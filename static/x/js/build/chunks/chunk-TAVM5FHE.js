import{a as Gn,b as So,c as Kl,d as Qs,e as ai,f as t0,g as n0,h as r0,i as i0,j as a0,k as s0,l as hd,m as pa,n as lt}from"./chunk-Q3Q473PS.js";import{a as wr,b as $e,c as Yt,d as au}from"./chunk-3RPRB7E5.js";var u0=$e((dd,o0)=>{(function(e,t){"use strict";typeof define=="function"&&define.amd?define([],t):typeof dd=="object"?o0.exports=t():e.MergeXML=t()})(dd,function(){return function(e){var t,n,r,i,a,s,o={pfx:"_",psr:"http://www.w3.org/1999/xhtml",xpe:"http://www.w3.org/2000/xmlns/"},l,c,h,p,E=1,b=3,C=8,N=7,w=this,I=function(){if(w.error={},typeof process<"u"&&process.versions&&process.versions.node){var O=typeof e=="object"&&typeof e.path=="string"?e.path:"";try{global.XPathEvaluator=wr(O+"xpath"),global.DOMParser=wr((O||"@xmldom/")+"xmldom").DOMParser,global.XMLSerializer=wr((O||"@xmldom/")+"xmldom").XMLSerializer}catch(re){console.log(re.message)}}t=S(),w.Init(e)},S=function(){for(var O,re=!1,le=["MSXML2.DOMDocument.6.0","MSXML2.DOMDocument.3.0","MSXML2.DOMDocument","Microsoft.XmlDom"],ie=le.length,oe=0;oe<ie;oe++)try{var Q=new ActiveXObject(le[oe]);if(Q.async=!1,re=!0,Q.loadXML("<x></x>")&&Q.selectSingleNode("/"))break}catch{}if(re)oe<ie?(n=le[oe],O=1):O="nox";else{var j;typeof window<"u"?(j=window,O=2):typeof global<"u"?(j=global,O=3):j={},j.DOMParser?j.XMLSerializer?j.XPathEvaluator?O===2?(r=new j.DOMParser,i=new j.XPathEvaluator,a=j.XPathResult,re=r.parseFromString("<invalid","text/xml"),o.psr=re.getElementsByTagName("parsererror")[0].namespaceURI):(r=new j.DOMParser({xmlns:o.psr,errorHandler:function(){l=!0}}),i=j.XPathEvaluator,a=j.XPathEvaluator.XPathResult,o.xpe=i.XPath.XMLNS_NAMESPACE_URI):O="nox":O="nos":O="nod"}return typeof O=="string"?W(O):O};w.Init=function(O){return typeof O!="object"&&(O={}),typeof O.stay>"u"?typeof c>"u"&&(c=["all"]):O.stay?typeof O.stay=="object"&&O.stay instanceof Array?c=O.stay:c=[O.stay]:c=[],typeof O.join>"u"?typeof h>"u"&&(h=["root"]):O.join?h=[String(O.join)]:h=[!1],h[1]=!1,typeof O.updn<"u"?p=O.updn:typeof p>"u"&&(p=!0),w.dom=null,w.nsp={},w.count=0,t&&(w.error={code:"",text:""}),t},w.AddFile=function(O){var re;return t?!O||!O.target?re=W("nof"):O.target.result?re=w.AddSource(O.target.result):re=W("emf"):re=t,re},w.AddSource=function(O){var re,le;if(t)if(typeof O=="object")le=w.Get(1,O)?O:!1,le&&(t>1&&!DOMParser||t===1&&!le.selectSingleNode("/"))&&(le=null);else try{le=_(O)}catch{le=!1}if(!t)re=t;else if(le===null)re=W("nob");else if(le===!1)re=W("inv");else if(le===!0)w.nsp=Z(w.dom.documentElement),w.count=1,re=w.dom;else if(v(le)){if(y(le,"/"),h[1]===!0){var ie=w.dom.createTextNode(`\r
`);w.dom.documentElement.appendChild(ie)}w.count++,re=w.dom}else re=!1;return re};var _=function(O){var re,le;return t>1?(l=!1,w.dom?(le=r.parseFromString(O,"text/xml"),re=P(le)?le:!1):(w.dom=r.parseFromString(O,"text/xml"),re=!!P(w.dom))):w.dom?(le=new ActiveXObject(n),le.async=!1,re=le.loadXML(O)?le:!1):(w.dom=new ActiveXObject(n),w.dom.async=!1,w.dom.setProperty("SelectionLanguage","XPath"),re=!!w.dom.loadXML(O)),re},P=function(O){return!l&&!O.getElementsByTagNameNS(o.psr,"parsererror").length},v=function(O){var re=!0,le=w.dom.characterSet||w.dom.inputEncoding||w.dom.xmlEncoding,ie=O.characterSet||O.inputEncoding||O.xmlEncoding;if(ie!==le)re=W("enc");else if(O.documentElement.namespaceURI!==w.dom.documentElement.namespaceURI)re=W("nse");else if(O.documentElement.nodeName!==w.dom.documentElement.nodeName){if(!h[0])re=W("dif");else if(!h[1]){var oe=typeof le<"u"?le:"UTF-8",Q=w.dom.xmlVersion?w.dom.xmlVersion:"1.0",j='<?xml version="'+Q+'" encoding="'+oe+`"?>\r
<`+h[0]+`>\r
</`+h[0]+">",H=_(j);if(H){var G=w.dom.documentElement.cloneNode(!0);H.documentElement.appendChild(G),G=H.createTextNode(`\r
`),H.documentElement.appendChild(G),w.dom=H,h[1]=!0}else re=W("jne"),h[1]=null}}if(re){var fe=Z(O.documentElement);for(var pe in fe)w.nsp[pe]||(typeof w.dom.documentElement.setAttributeNS<"u"?w.dom.documentElement.setAttributeNS(o.xpe,"xmlns:"+pe,fe[pe]):w.dom.documentElement.setAttribute("xmlns:"+pe,fe[pe]),w.nsp[pe]=fe[pe]);p?t===1?ce():t===3?s=w:s=w.lookupNamespaceURI:s=null}return re},y=function(O,re){for(var le=0;le<O.childNodes.length;le++){var ie,oe=O.childNodes[le],Q=$(O.childNodes,oe,re,le),j=w.Query(Q);if(oe.nodeType===E){var H=!0;if(j===null||j.namespaceURI!==oe.namespaceURI)ie=oe.cloneNode(!0),j=w.Query(re),j.appendChild(ie);else if(q(j.getAttribute("stay"),c)!==!1&&(H=!1),H)try{for(var G=0;G<oe.attributes.length;G++)oe.attributes[G].namespaceURI&&typeof oe.setAttributeNS<"u"?j.setAttributeNS(oe.attributes[G].namespaceURI,oe.attributes[G].nodeName,oe.attributes[G].nodeValue):j.setAttribute(oe.attributes[G].nodeName,oe.attributes[G].nodeValue)}catch{}oe.hasChildNodes()&&H&&y(oe,Q)}else(oe.nodeType===b||oe.nodeType===C)&&(j===null||j.nodeType!==oe.nodeType?(j=w.Query(re),oe.nodeType===b?ie=w.dom.createTextNode(oe.nodeValue):ie=w.dom.createComment(oe.nodeValue),j.appendChild(ie)):(j.nodeValue=oe.nodeValue,j.data=oe.data))}},$=function(O,re,le,ie){var oe,Q,j=0;if(re.nodeType===E){for(Q=0;Q<=ie;Q++)(p&&O[Q].nodeType===re.nodeType&&O[Q].nodeName===re.nodeName||!p&&O[Q].nodeType!==N)&&j++;if(p){var H=!1,G=Z(re);for(var fe in G)fe!==o.pfx&&(w.nsp[fe]=G[fe],H=t===1);H&&ce(),re.prefix?oe=re.prefix+":":w.nsp[o.pfx]?oe=o.pfx+":":oe="",oe+=re.localName?re.localName:re.baseName}else oe="node()"}else if(re.nodeType===b||re.nodeType===C){for(Q=0;Q<=ie;Q++)O[Q].nodeType===re.nodeType&&j++;oe=re.nodeType===b?"text()":"comment()"}else oe=le;return j&&(oe=le+(le.slice(-1)==="/"?"":"/")+oe+"["+j+"]"),oe},Z=function(O){for(var re={},le=O.attributes,ie=0;ie<le.length;++ie){var oe=le[ie].name.split(":");if(oe[0]==="xmlns"){var Q=oe[1]?oe[1]:o.pfx;re[Q]=le[ie].value}}return re};w.Query=function(O){if(!t)return null;var re;h[1]&&(O="/"+w.dom.documentElement.nodeName+(O==="/"?"":O));try{t>1?(re=i.evaluate(O,w.dom,s,a.FIRST_ORDERED_NODE_TYPE,null),re=re.singleNodeValue):re=w.dom.selectSingleNode(O)}catch{re=null}return re},w.lookupNamespaceURI=function(O){return w.nsp[O]||null};var ce=function(){var O="";for(var re in w.nsp)O+=" xmlns:"+re+"='"+w.nsp[re]+"'";O&&w.dom.setProperty("SelectionNamespaces",O.substr(1))},q=function(O,re){var le=!1;for(var ie in re)if(re[ie]===O){le=ie;break}return le};w.Get=function(O,re){var le;if(O&&!re&&(re=w.dom),!t)le=w.error.text;else if(!O)le=w.dom;else if(!re)le="";else if(re.xml)le=re.xml;else try{le=new XMLSerializer().serializeToString(re)}catch(oe){le=oe.message,O=null}if(le&&O===2){if(h[1]){var ie=le.indexOf("<"+h[0]);le=le.substr(0,ie)+`\r
`+le.substr(ie)}le=le.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/ |\t/g,"&nbsp;"),le=le.replace(/(\r\n|\n|\r)/g,"<br>")}return le};var W=function(O){var re={nod:"XML DOM is not supported",nos:"Serializer is not supported",nox:"xPath is not supported",nob:"Incompatible source object",nof:"File not found",emf:"File is empty",inv:"Invalid XML source",enc:"Different encoding",dif:"Different root nodes",jne:"Invalid join parameter",nse:"Namespace incompatibility",und:"Undefined error"};return w.error.code=re[O]?O:"und",w.error.text=re[w.error.code],!1};I()}})});var su=$e(($U,c0)=>{var pd=class extends Date{constructor(){super(NaN)}toString(){return""}},l0=e=>{if(["Invalid Date",""].includes(e.toString()))return e.toString();let t=new Date(e.getTime()-e.getTimezoneOffset()*60*1e3).toISOString().replace("Z",gd(e));return t.indexOf("T00:00:00.000")>0?t.split("T")[0]:t},gd=e=>{let t=function(s){return s<10?`0${s}`:s};if(e.toString()==="Invalid Date")return e.toString();let n=e.getTimezoneOffset(),r=n<0?"+":"-",i=t(Math.floor(Math.abs(n/60))),a=t(Math.floor(Math.abs(n%60)));return`${r+i}:${a}`};Date.prototype.toISOLocalString=function(){return l0(this)};Date.prototype.getTimezoneOffsetAsTime=function(){return gd(this)};c0.exports={BlankDate:pd,getTimezoneOffsetAsTime:gd,toISOLocalString:l0}});var md=$e((jU,h0)=>{var QT=/^\d\d\d\d-\d{1,2}-\d{1,2}(?:T\d\d:\d\d:\d\d\.?\d?\d?(?:Z|[+-]\d\d:\d\d)|.*)?$/;function f0(e){return e.getTime()/(1e3*60*60*24)}function JT(e){let t=null;return e.indexOf("T")>0?t=new Date(e):(t=e.split("-"),t=new Date(t[0],t[1]-1,t[2])),f0(t)}var eL=function(e,t){switch(e){case 1:return t%4===0&&t%100||t%400===0?29:28;case 8:case 3:case 5:case 10:return 30;default:return 31}},tL=function(e,t,n){return t=parseInt(t,10)-1,t>=0&&t<12&&n>0&&n<=eL(t,e)};h0.exports={DATE_STRING:QT,dateToDays:f0,dateStringToDays:JT,isValidDate:tL}});var ou=$e((KU,p0)=>{var{DATE_STRING:nL,dateToDays:rL,dateStringToDays:iL}=md(),{toISOLocalString:aL}=su();p0.exports={asBoolean:sL,asNumber:oL,asString:vd};function sL(e){if(d0(e))return!!vd(e).trim();switch(e.t){case"arr":return!!e.v.length;case"date":return!Number.isNaN(Number(e.v));default:return!!e.v}}function oL(e){if(e.t==="num")return e.v;if(e.t==="bool")return e.v?1:0;if(e.t==="date")return rL(e.v);let t=vd(e).trim();return t===""?NaN:nL.test(t)?iL(t):+t}function vd(e){if(d0(e))return uL(e);switch(e.t){case"str":return e.v;case"arr":return e.v.length&&e.v[0].textContent||"";case"date":return aL(e.v).replace(/T00:00:00.000.*/,"");case"num":case"bool":default:return e.v.toString()}}function uL(e){switch(e.nodeType){case Node.DOCUMENT_NODE:return e.documentElement.textContent;case Node.TEXT_NODE:case Node.CDATA_SECTION_NODE:case Node.PROCESSING_INSTRUCTION_NODE:case Node.COMMENT_NODE:case Node.ELEMENT_NODE:return e.textContent;case Node.ATTRIBUTE_NODE:return e.value;default:throw new Error(`TODO No handling for node type: ${e.nodeType}`)}}function d0(e){return e instanceof Node}});var _0=$e((WU,y0)=>{var{asBoolean:ju,asNumber:Vr,asString:_d}=ou();y0.exports={handleOperation:EL};var lL=0,cL=4,fL=8,hL=9,dL=12,pL=13,gL=14,mL=15,vL=16,yL=17,_L=20,bL=21,wL=22,xL=24;function EL(e,t,n){switch(t){case lL:return ju(e)||ju(n);case cL:return ju(e)&&ju(n);case fL:return m0(e,n,(r,i)=>r===i);case hL:return m0(e,n,(r,i)=>r!==i);case dL:return ff(e,n,(r,i)=>r<i);case pL:return ff(e,n,(r,i)=>r<=i);case gL:return ff(e,n,(r,i)=>r>i);case mL:return ff(e,n,(r,i)=>r>=i);case vL:return Vr(e)+Vr(n);case yL:return Vr(e)-Vr(n);case _L:return Vr(e)*Vr(n);case bL:return Vr(e)/Vr(n);case wL:return Vr(e)%Vr(n);case xL:return[...e.v,...n.v];default:throw new Error(`No handling for op ${t}`)}}function v0(e,t,n){return e.t===n&&t.t===n}function yd(e,t,n){return e.t===n||t.t===n}function g0(e){switch(e.t){case"num":return Vr;case"str":return _d;default:throw new Error(`No cast for type: ${e.t}`)}}function ff(e,t,n){let r,i;if(v0(e,t,"arr")){for(r=e.v.length-1;r>=0;--r)for(i=t.v.length-1;i>=0;--i)if(n(Vr(e.v[r]),Vr(t.v[i])))return!0;return!1}return e.t==="arr"?(t=Vr(t),e.v.map(Vr).some(a=>n(a,t))):t.t==="arr"?(e=Vr(e),t.v.map(Vr).some(a=>n(e,a))):n(Vr(e),Vr(t))}function m0(e,t,n){let r,i;if(v0(e,t,"arr")){for(r=e.v.length-1;r>=0;--r)for(i=t.v.length-1;i>=0;--i)if(n(e.v[r].textContent,t.v[i].textContent))return!0;return!1}if(yd(e,t,"bool"))return n(ju(e),ju(t));if(e.t==="arr"){let a=g0(t);return t=a(t),e.v.map(a).some(s=>n(s,t))}if(t.t==="arr"){let a=g0(e);return e=a(e),t.v.map(a).some(s=>n(s,e))}if(yd(e,t,"num"))return n(Vr(e),Vr(t));if(yd(e,t,"str"))return n(_d(e),_d(t));throw new Error(`not handled yet for these types: ${n.toString()}`)}});var hf=$e((GU,b0)=>{b0.exports={boolean:e=>({t:"bool",v:e}),number:e=>({t:"num",v:e}),string:e=>({t:"str",v:e}),date:e=>({t:"date",v:e})}});var x0=$e((ZU,w0)=>{var{asNumber:bd,asString:df}=ou(),Wl=hf();w0.exports={preprocessNativeArgs:TL};var CL={num:bd,str:df},SL={ceiling:{min:1,max:1,cast:["num"]},contains:{min:2,max:2,cast:["str","str"]},floor:{min:1,max:1,cast:["num"]},id:{min:1,max:1,conv:e=>[Wl.string(e.t==="arr"?e.v.map(df).join(" "):df(e))]},lang:{min:1,max:1,cast:["str"]},"starts-with":{min:2,max:2,cast:["str","str"]},substring:{min:2,max:3,conv:LL},"substring-after":{min:2,max:2,cast:["str","str"]},"substring-before":{min:2,max:2,cast:["str","str"]},translate:{min:3,max:3,cast:["str","str","str"]}};function TL(e,t){let n=SL[e];if(!n)return t;if(t.length<n.min)throw new Error("too few args");if(t.length>n.max)throw new Error("too many args");return n.conv?n.conv(...t):n.cast?t.map((r,i)=>{let a=n.cast[i];return{t:a,v:CL[a](r)}}):t}function LL(e,t,n){return e=Wl.string(df(e)),t=bd(t),n===void 0?[e,Wl.number(Math.max(0,t))]:[e,Wl.number(t),Wl.number(bd(n))]}});var wd=$e((XU,E0)=>{E0.exports=function(e){e.ordrd||e.v.sort(kL)};function kL(e,t){let n=e.compareDocumentPosition(t);return n&Node.DOCUMENT_POSITION_PRECEDING?1:n&Node.DOCUMENT_POSITION_FOLLOWING?-1:0}});var S0=$e((YU,C0)=>{var AL=wd();C0.exports={toSnapshotResult:IL};function IL(e,t,n){return(t===XPathResult.ORDERED_NODE_ITERATOR_TYPE||t===XPathResult.ORDERED_NODE_SNAPSHOT_TYPE)&&AL(e),(r=>{let i=0;return{resultType:t,singleNodeValue:n||r[0]||null,snapshotLength:r.length,snapshotItem:a=>r[a]||null,iterateNext:()=>r[i++]||null}})(e.v)}});var A0=$e((QU,k0)=>{var{handleOperation:NL}=_0(),{preprocessNativeArgs:PL}=x0(),{toSnapshotResult:DL}=S0(),{asBoolean:pf,asNumber:T0,asString:xd}=ou(),gf=0,mf=4,RL=8,OL=9,BL=12,ML=13,UL=14,qL=15,FL=16,VL=17,zL=20,HL=21,$L=22,L0=24,jL=/^[a-z]/,xs=57005;k0.exports=function(e,t){let n=t.func||{},r=t.process||{},i=function(l){let c,h,p;switch(l.resultType){case XPathResult.NUMBER_TYPE:return{t:"num",v:l.numberValue};case XPathResult.BOOLEAN_TYPE:return{t:"bool",v:l.booleanValue};case XPathResult.STRING_TYPE:return{t:"str",v:l.stringValue};case XPathResult.ORDERED_NODE_ITERATOR_TYPE:p=!0;case XPathResult.UNORDERED_NODE_ITERATOR_TYPE:for(c=[];h=l.iterateNext();)c.push(h);return{t:"arr",v:c,ordrd:p};case XPathResult.ORDERED_NODE_SNAPSHOT_TYPE:p=!0;case XPathResult.UNORDERED_NODE_SNAPSHOT_TYPE:for(c=[],h=0;h<l.snapshotLength;++h)c.push(l.snapshotItem(h));return{t:"arr",v:c,ordrd:p};case XPathResult.ANY_UNORDERED_NODE_TYPE:case XPathResult.FIRST_ORDERED_NODE_TYPE:return{t:"arr",v:[l.singleNodeValue]};default:throw new Error(`no handling for result type: ${l.resultType}`)}},a=function(l,c){if(r.toExternalResult){let h=r.toExternalResult(l,c);if(h)return h}switch(c){case null:case void 0:case XPathResult.ANY_TYPE:switch(l.t){case"num":return a(l,XPathResult.NUMBER_TYPE);case"str":return a(l,XPathResult.STRING_TYPE);case"bool":return a(l,XPathResult.BOOLEAN_TYPE);case"arr":return a(l,XPathResult.UNORDERED_NODE_ITERATOR_TYPE);default:throw new Error(`unrecognised internal type: ${l.t}`)}case XPathResult.NUMBER_TYPE:return{resultType:c,stringValue:xd(l),numberValue:T0(l)};case XPathResult.STRING_TYPE:return{resultType:c,stringValue:xd(l)};case XPathResult.BOOLEAN_TYPE:return{resultType:c,stringValue:xd(l),booleanValue:pf(l)};case XPathResult.UNORDERED_NODE_ITERATOR_TYPE:case XPathResult.ORDERED_NODE_ITERATOR_TYPE:case XPathResult.UNORDERED_NODE_SNAPSHOT_TYPE:case XPathResult.ORDERED_NODE_SNAPSHOT_TYPE:case XPathResult.ANY_UNORDERED_NODE_TYPE:case XPathResult.FIRST_ORDERED_NODE_TYPE:return DL(l,c);default:throw new Error("unrecognised return type:",c)}},s=function(l){if(r.typefor){let c=r.typefor(l);if(c)return c}return typeof l=="boolean"?"bool":typeof l=="number"?"num":"str"},o=function(l,c,h,p,E,b=1,C=1){let N,w,I=[{t:"root",tokens:[]}],S=()=>I[I.length-1],_=Q=>{let{tokens:j}=S();(ie()!==xs||Q!==xs)&&j.push(Q)},P=()=>{let{dead:Q,t:j,tokens:H}=S();return Q?!0:j==="fn"?ie()===xs:H.includes(xs)},v=Q=>{throw new Error((Q||"")+JSON.stringify({stack:I,cur:w}))},y=function(){w={v:""}},$=function(Q){if(Q<=mf&&W(Q),_({t:"op",v:Q}),Q<=mf){let{tokens:j}=S(),H=pf(j[j.length-2]);(Q===gf?H:!H)&&_(xs)}y()},Z=function(Q,j){let H=[];for(let G=0;G<j.length;++G)if(G%2){if(j[G]!==",")throw new Error(`Weird args (should be separated by commas):${JSON.stringify(j)}`)}else H.push(j[G]);return Object.prototype.hasOwnProperty.call(n,Q)?n[Q].apply({cN:c,contextSize:b,contextPosition:C},H):ce(Q,PL(Q,H))},ce=function(Q,j){let H=`${Q}(`;for(let G=0;G<j.length;++G){G&&(H+=",");let fe=j[G];switch(fe.t){case"arr":throw new Error(`callNative() can't handle nodeset functions yet for ${Q}()`);case"bool":H+=`${fe.v}()`;break;case"num":fe.v===1/0?H+="( 1 div 0)":fe.v===-1/0?H+="(-1 div 0)":H+=fe.v.toFixed(20);break;case"str":{let pe=fe.quote||(fe.v.indexOf('"')===-1?'"':"'");if(fe.v.indexOf(pe)!==-1)throw new Error(`Quote character found in String Literal: ${JSON.stringify(fe.v)}`);H+=pe+fe.v+pe;break}default:break}}return i(e.evaluate(`${H})`,c,h,XPathResult.ANY_TYPE,null))},q=function(Q,j,H){if(j>mf&&(Q===xs||H===xs))return xs;if(r.handleInfix){let G=r.handleInfix(v,Q,j,H);if(G&&G.t==="continue"&&(Q=G.lhs,j=G.op,H=G.rhs,G=null),typeof G<"u"&&G!==null)return G}return NL(Q,j,H)},W=function(Q){let{tokens:j}=S();if(!(j.length<2)){if(j[2]===xs&&j[1].v>=Q){let H=j.indexOf(",",2);j.splice(0,H===-1?j.length:H,{t:"bool",v:pf(j[0])})}for(let H=L0;H>=Q;H-=4){let G=1;for(;G<j.length-1;)if(j[G].t==="op"&&j[G].v>=H){let fe=q(j[G-1],j[G].v,j[G+1]);j.splice(G,2),j[G-1]={t:s(fe),v:fe}}else++G}}},O=function(){if(P()){y();return}let Q=w.v,j=ie();if(j&&j.t==="arr"){Q.charAt(0)!=="/"&&v(`not sure how to handle expression called on nodeset that doesn't start with a '/': ${Q}`),Q=e.createExpression(`.${Q}`,h);let H=[];j.v.forEach(G=>{let fe=i(Q.evaluate(G));H.push(...fe.v)}),j.v=H}else{let H=(c==null?void 0:c.nodeType)===Node.ATTRIBUTE_NODE&&Q.startsWith("/")?c.ownerDocument:c;_(i(e.evaluate(Q,H,h,XPathResult.ANY_TYPE,null)))}y()},re=function(){return l.charAt(N+1)},le=function(){w.v=parseFloat(w.str),_(w),y()},ie=function(){let Q=S().tokens;return Q[Q.length-1]},oe=function(Q){return Q>="0"&&Q<="9"};for(y(),N=0;N<l.length;++N){let Q=l.charAt(N);if(w.t==="sq"){if(w.inString)w.inString===Q&&delete w.inString;else if(Q==="[")++w.depth;else if(Q==="'"||Q==='"')w.inString=Q;else if(Q==="]"){if(--w.depth)w.v+=Q;else{if(P()){y();continue}let j,H=ie();if(H.t==="arr")j=H.v;else throw new Error("Not sure how to handle context node for predicate in this situation.");let G=w.v,fe=j.filter((pe,de)=>{let Ae=i(o(G,pe,h,XPathResult.ANY_TYPE,null,j.length,de+1));return Ae.t==="num"?T0(Ae)===1+de:pf(Ae)});H.v=fe,y()}continue}w.v+=Q;continue}if(w.t==="str"){Q===w.quote?(_(w),y()):w.v+=Q;continue}if(w.t==="num")if(oe(Q)||Q==="e"||Q==="-"&&l[N-1]==="e"){w.str+=Q;continue}else{if(Q===" "&&w.str==="-")continue;Q==="."&&!w.decimal?(w.decimal=1,w.str+=Q):le()}if(oe(Q))w.v===""?w={t:"num",str:Q}:w.v+=Q;else switch(Q){case"'":case'"':w.v===""?w={t:"str",quote:Q,v:""}:v(`Not sure how to handle: ${Q}`);break;case"(":I.push({v:w.v,t:"fn",dead:P(),tokens:[]}),y();break;case")":w.v!==""&&O(),W(gf),w=I.pop(),w.t!=="fn"&&v('")" outside function!'),w.dead?_(xs):w.v?w.v.charAt(0)==="/"?(w.tokens.length&&v("Unexpected args for node test function!"),w.v+="()",O()):_(Z(w.v,w.tokens)):(w.tokens.length!==1&&v(`Expected one token, but found: ${w.tokens.length}`),_(w.tokens[0])),y();break;case",":S().t!=="fn"&&v("Unexpected comma outside function arguments."),w.v&&O(),_(",");break;case"*":{let j=ie();if(!j||j===","||j.t==="op"||w.v){w.v+=Q;break}$(zL)}break;case"-":{let j=ie();w.v!==""&&re()!==" "&&l.charAt(N-1)!==" "?w.v+=Q:w.v===""&&(!j||j.t==="op"||j===",")?w={t:"num",str:"-"}:$(VL)}break;case"=":switch(w.v){case"<":$(ML);break;case">":$(qL);break;case"!":$(OL);break;default:w.v&&O(),$(RL)}break;case"!":w.v&&O(),w.v=Q;break;case">":case"<":w.v&&O(),re()==="="?w.v=Q:$(Q===">"?UL:BL);break;case"+":w.v&&O(),$(FL);break;case"|":w.v&&O(),$(L0);break;case`
`:case"\r":case"	":case" ":if(w.v==="")break;jL.test(w.v)||O();break;case"v":w.v==="di"?$(HL):w.v+=Q;break;case"r":w.v==="o"?$(gf):w.v+=Q;break;case"d":w.v==="an"?$(mf):w.v==="mo"?$($L):w.v+=Q;break;case"[":w.v&&(O(),y()),w.t="sq",w.depth=1;break;case".":if(w.v===""&&oe(re())){w={t:"num",str:Q};break}default:w.v+=Q}}return w.t==="num"&&le(),w.v&&O(),I.length!==1&&v("Stuff left on stack."),I[0].t!=="root"&&v("Weird stuff on stack."),I[0].tokens.length===0&&v("No tokens."),W(gf),I[0].tokens.length!==1&&v("Too many tokens."),a(I[0].tokens[0],p)};this.evaluate=o}});var D0=$e((JU,P0)=>{var{asString:Ed}=ou();function I0(e){return e.map(t=>t.trim().split(" "))}function Ku(e){return e*Math.PI/180}function N0(e){return e.every(t=>t[0]!==""&&t[0]>=-90&&t[0]<=90&&t[1]!==""&&t[1]>=-180&&t[1]<=180&&(typeof t[2]>"u"||!Number.isNaN(Number(t[2])))&&(typeof t[3]>"u"||!Number.isNaN(Number(t[3]))&&t[3]>=0))}function KL(e,t){let n=Ku(e.lng-t.lng),r=Ku(e.lat),i=Ku(t.lat);return Math.acos(Math.sin(r)*Math.sin(i)+Math.cos(r)*Math.cos(i)*Math.cos(n))*6378100}function WL(e){let t=I0(e);if(!N0(t))return Number.NaN;let n=t.length,r=0;if(n>2){for(let i=0;i<n;i++){let a={lat:t[i][0],lng:t[i][1]},s={lat:t[(i+1)%n][0],lng:t[(i+1)%n][1]};r+=Ku(s.lng-a.lng)*(2+Math.sin(Ku(a.lat))+Math.sin(Ku(s.lat)))}r=r*6378100*6378100/2}return Math.abs(Math.round(r*100))/100}function GL(e){let t=I0(e);if(!N0(t))return Number.NaN;let n=t.length,r=0;if(n>1)for(let i=1;i<n;i++){let a={lat:t[i-1][0],lng:t[i-1][1]},s={lat:t[i][0],lng:t[i][1]};r+=KL(a,s)}return Math.abs(Math.round(r*100))/100}P0.exports={asGeopoints:ZL,area:WL,distance:GL};function ZL(...e){return e.length>1?e.map(Ed):e[0].t==="arr"&&e[0].v.length>1?e[0].v.map(Ed):Ed(e[0]).split(";")}});var hn=$e((e6,R0)=>{R0.exports={options:{usePureJavaScript:!1}}});var M0=$e((t6,B0)=>{var Cd={};B0.exports=Cd;var O0={};Cd.encode=function(e,t,n){if(typeof t!="string")throw new TypeError('"alphabet" must be a string.');if(n!==void 0&&typeof n!="number")throw new TypeError('"maxline" must be a number.');var r="";if(!(e instanceof Uint8Array))r=XL(e,t);else{var i=0,a=t.length,s=t.charAt(0),o=[0];for(i=0;i<e.length;++i){for(var l=0,c=e[i];l<o.length;++l)c+=o[l]<<8,o[l]=c%a,c=c/a|0;for(;c>0;)o.push(c%a),c=c/a|0}for(i=0;e[i]===0&&i<e.length-1;++i)r+=s;for(i=o.length-1;i>=0;--i)r+=t[o[i]]}if(n){var h=new RegExp(".{1,"+n+"}","g");r=r.match(h).join(`\r
`)}return r};Cd.decode=function(e,t){if(typeof e!="string")throw new TypeError('"input" must be a string.');if(typeof t!="string")throw new TypeError('"alphabet" must be a string.');var n=O0[t];if(!n){n=O0[t]=[];for(var r=0;r<t.length;++r)n[t.charCodeAt(r)]=r}e=e.replace(/\s/g,"");for(var i=t.length,a=t.charAt(0),s=[0],r=0;r<e.length;r++){var o=n[e.charCodeAt(r)];if(o===void 0)return;for(var l=0,c=o;l<s.length;++l)c+=s[l]*i,s[l]=c&255,c>>=8;for(;c>0;)s.push(c&255),c>>=8}for(var h=0;e[h]===a&&h<e.length-1;++h)s.push(0);return typeof Buffer<"u"?Buffer.from(s.reverse()):new Uint8Array(s.reverse())};function XL(e,t){var n=0,r=t.length,i=t.charAt(0),a=[0];for(n=0;n<e.length();++n){for(var s=0,o=e.at(n);s<a.length;++s)o+=a[s]<<8,a[s]=o%r,o=o/r|0;for(;o>0;)a.push(o%r),o=o/r|0}var l="";for(n=0;e.at(n)===0&&n<e.length()-1;++n)l+=i;for(n=a.length-1;n>=0;--n)l+=t[a[n]];return l}});var Bn=$e((n6,V0)=>{var U0=hn(),q0=M0(),Le=V0.exports=U0.util=U0.util||{};(function(){if(typeof process<"u"&&process.nextTick&&!process.browser){Le.nextTick=process.nextTick,typeof setImmediate=="function"?Le.setImmediate=setImmediate:Le.setImmediate=Le.nextTick;return}if(typeof setImmediate=="function"){Le.setImmediate=function(){return setImmediate.apply(void 0,arguments)},Le.nextTick=function(o){return setImmediate(o)};return}if(Le.setImmediate=function(o){setTimeout(o,0)},typeof window<"u"&&typeof window.postMessage=="function"){let o=function(l){if(l.source===window&&l.data===e){l.stopPropagation();var c=t.slice();t.length=0,c.forEach(function(h){h()})}};var s=o,e="forge.setImmediate",t=[];Le.setImmediate=function(l){t.push(l),t.length===1&&window.postMessage(e,"*")},window.addEventListener("message",o,!0)}if(typeof MutationObserver<"u"){var n=Date.now(),r=!0,i=document.createElement("div"),t=[];new MutationObserver(function(){var l=t.slice();t.length=0,l.forEach(function(c){c()})}).observe(i,{attributes:!0});var a=Le.setImmediate;Le.setImmediate=function(l){Date.now()-n>15?(n=Date.now(),a(l)):(t.push(l),t.length===1&&i.setAttribute("a",r=!r))}}Le.nextTick=Le.setImmediate})();Le.isNodejs=typeof process<"u"&&process.versions&&process.versions.node;Le.globalScope=function(){return Le.isNodejs?global:typeof self>"u"?window:self}();Le.isArray=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"};Le.isArrayBuffer=function(e){return typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer};Le.isArrayBufferView=function(e){return e&&Le.isArrayBuffer(e.buffer)&&e.byteLength!==void 0};function Gl(e){if(!(e===8||e===16||e===24||e===32))throw new Error("Only 8, 16, 24, or 32 bits supported: "+e)}Le.ByteBuffer=Sd;function Sd(e){if(this.data="",this.read=0,typeof e=="string")this.data=e;else if(Le.isArrayBuffer(e)||Le.isArrayBufferView(e))if(typeof Buffer<"u"&&e instanceof Buffer)this.data=e.toString("binary");else{var t=new Uint8Array(e);try{this.data=String.fromCharCode.apply(null,t)}catch{for(var n=0;n<t.length;++n)this.putByte(t[n])}}else(e instanceof Sd||typeof e=="object"&&typeof e.data=="string"&&typeof e.read=="number")&&(this.data=e.data,this.read=e.read);this._constructedStringLength=0}Le.ByteStringBuffer=Sd;var YL=4096;Le.ByteStringBuffer.prototype._optimizeConstructedString=function(e){this._constructedStringLength+=e,this._constructedStringLength>YL&&(this.data.substr(0,1),this._constructedStringLength=0)};Le.ByteStringBuffer.prototype.length=function(){return this.data.length-this.read};Le.ByteStringBuffer.prototype.isEmpty=function(){return this.length()<=0};Le.ByteStringBuffer.prototype.putByte=function(e){return this.putBytes(String.fromCharCode(e))};Le.ByteStringBuffer.prototype.fillWithByte=function(e,t){e=String.fromCharCode(e);for(var n=this.data;t>0;)t&1&&(n+=e),t>>>=1,t>0&&(e+=e);return this.data=n,this._optimizeConstructedString(t),this};Le.ByteStringBuffer.prototype.putBytes=function(e){return this.data+=e,this._optimizeConstructedString(e.length),this};Le.ByteStringBuffer.prototype.putString=function(e){return this.putBytes(Le.encodeUtf8(e))};Le.ByteStringBuffer.prototype.putInt16=function(e){return this.putBytes(String.fromCharCode(e>>8&255)+String.fromCharCode(e&255))};Le.ByteStringBuffer.prototype.putInt24=function(e){return this.putBytes(String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(e&255))};Le.ByteStringBuffer.prototype.putInt32=function(e){return this.putBytes(String.fromCharCode(e>>24&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(e&255))};Le.ByteStringBuffer.prototype.putInt16Le=function(e){return this.putBytes(String.fromCharCode(e&255)+String.fromCharCode(e>>8&255))};Le.ByteStringBuffer.prototype.putInt24Le=function(e){return this.putBytes(String.fromCharCode(e&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(e>>16&255))};Le.ByteStringBuffer.prototype.putInt32Le=function(e){return this.putBytes(String.fromCharCode(e&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>24&255))};Le.ByteStringBuffer.prototype.putInt=function(e,t){Gl(t);var n="";do t-=8,n+=String.fromCharCode(e>>t&255);while(t>0);return this.putBytes(n)};Le.ByteStringBuffer.prototype.putSignedInt=function(e,t){return e<0&&(e+=2<<t-1),this.putInt(e,t)};Le.ByteStringBuffer.prototype.putBuffer=function(e){return this.putBytes(e.getBytes())};Le.ByteStringBuffer.prototype.getByte=function(){return this.data.charCodeAt(this.read++)};Le.ByteStringBuffer.prototype.getInt16=function(){var e=this.data.charCodeAt(this.read)<<8^this.data.charCodeAt(this.read+1);return this.read+=2,e};Le.ByteStringBuffer.prototype.getInt24=function(){var e=this.data.charCodeAt(this.read)<<16^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2);return this.read+=3,e};Le.ByteStringBuffer.prototype.getInt32=function(){var e=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);return this.read+=4,e};Le.ByteStringBuffer.prototype.getInt16Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8;return this.read+=2,e};Le.ByteStringBuffer.prototype.getInt24Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16;return this.read+=3,e};Le.ByteStringBuffer.prototype.getInt32Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16^this.data.charCodeAt(this.read+3)<<24;return this.read+=4,e};Le.ByteStringBuffer.prototype.getInt=function(e){Gl(e);var t=0;do t=(t<<8)+this.data.charCodeAt(this.read++),e-=8;while(e>0);return t};Le.ByteStringBuffer.prototype.getSignedInt=function(e){var t=this.getInt(e),n=2<<e-2;return t>=n&&(t-=n<<1),t};Le.ByteStringBuffer.prototype.getBytes=function(e){var t;return e?(e=Math.min(this.length(),e),t=this.data.slice(this.read,this.read+e),this.read+=e):e===0?t="":(t=this.read===0?this.data:this.data.slice(this.read),this.clear()),t};Le.ByteStringBuffer.prototype.bytes=function(e){return typeof e>"u"?this.data.slice(this.read):this.data.slice(this.read,this.read+e)};Le.ByteStringBuffer.prototype.at=function(e){return this.data.charCodeAt(this.read+e)};Le.ByteStringBuffer.prototype.setAt=function(e,t){return this.data=this.data.substr(0,this.read+e)+String.fromCharCode(t)+this.data.substr(this.read+e+1),this};Le.ByteStringBuffer.prototype.last=function(){return this.data.charCodeAt(this.data.length-1)};Le.ByteStringBuffer.prototype.copy=function(){var e=Le.createBuffer(this.data);return e.read=this.read,e};Le.ByteStringBuffer.prototype.compact=function(){return this.read>0&&(this.data=this.data.slice(this.read),this.read=0),this};Le.ByteStringBuffer.prototype.clear=function(){return this.data="",this.read=0,this};Le.ByteStringBuffer.prototype.truncate=function(e){var t=Math.max(0,this.length()-e);return this.data=this.data.substr(this.read,t),this.read=0,this};Le.ByteStringBuffer.prototype.toHex=function(){for(var e="",t=this.read;t<this.data.length;++t){var n=this.data.charCodeAt(t);n<16&&(e+="0"),e+=n.toString(16)}return e};Le.ByteStringBuffer.prototype.toString=function(){return Le.decodeUtf8(this.bytes())};function QL(e,t){t=t||{},this.read=t.readOffset||0,this.growSize=t.growSize||1024;var n=Le.isArrayBuffer(e),r=Le.isArrayBufferView(e);if(n||r){n?this.data=new DataView(e):this.data=new DataView(e.buffer,e.byteOffset,e.byteLength),this.write="writeOffset"in t?t.writeOffset:this.data.byteLength;return}this.data=new DataView(new ArrayBuffer(0)),this.write=0,e!=null&&this.putBytes(e),"writeOffset"in t&&(this.write=t.writeOffset)}Le.DataBuffer=QL;Le.DataBuffer.prototype.length=function(){return this.write-this.read};Le.DataBuffer.prototype.isEmpty=function(){return this.length()<=0};Le.DataBuffer.prototype.accommodate=function(e,t){if(this.length()>=e)return this;t=Math.max(t||this.growSize,e);var n=new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength),r=new Uint8Array(this.length()+t);return r.set(n),this.data=new DataView(r.buffer),this};Le.DataBuffer.prototype.putByte=function(e){return this.accommodate(1),this.data.setUint8(this.write++,e),this};Le.DataBuffer.prototype.fillWithByte=function(e,t){this.accommodate(t);for(var n=0;n<t;++n)this.data.setUint8(e);return this};Le.DataBuffer.prototype.putBytes=function(e,t){if(Le.isArrayBufferView(e)){var n=new Uint8Array(e.buffer,e.byteOffset,e.byteLength),r=n.byteLength-n.byteOffset;this.accommodate(r);var i=new Uint8Array(this.data.buffer,this.write);return i.set(n),this.write+=r,this}if(Le.isArrayBuffer(e)){var n=new Uint8Array(e);this.accommodate(n.byteLength);var i=new Uint8Array(this.data.buffer);return i.set(n,this.write),this.write+=n.byteLength,this}if(e instanceof Le.DataBuffer||typeof e=="object"&&typeof e.read=="number"&&typeof e.write=="number"&&Le.isArrayBufferView(e.data)){var n=new Uint8Array(e.data.byteLength,e.read,e.length());this.accommodate(n.byteLength);var i=new Uint8Array(e.data.byteLength,this.write);return i.set(n),this.write+=n.byteLength,this}if(e instanceof Le.ByteStringBuffer&&(e=e.data,t="binary"),t=t||"binary",typeof e=="string"){var a;if(t==="hex")return this.accommodate(Math.ceil(e.length/2)),a=new Uint8Array(this.data.buffer,this.write),this.write+=Le.binary.hex.decode(e,a,this.write),this;if(t==="base64")return this.accommodate(Math.ceil(e.length/4)*3),a=new Uint8Array(this.data.buffer,this.write),this.write+=Le.binary.base64.decode(e,a,this.write),this;if(t==="utf8"&&(e=Le.encodeUtf8(e),t="binary"),t==="binary"||t==="raw")return this.accommodate(e.length),a=new Uint8Array(this.data.buffer,this.write),this.write+=Le.binary.raw.decode(a),this;if(t==="utf16")return this.accommodate(e.length*2),a=new Uint16Array(this.data.buffer,this.write),this.write+=Le.text.utf16.encode(a),this;throw new Error("Invalid encoding: "+t)}throw Error("Invalid parameter: "+e)};Le.DataBuffer.prototype.putBuffer=function(e){return this.putBytes(e),e.clear(),this};Le.DataBuffer.prototype.putString=function(e){return this.putBytes(e,"utf16")};Le.DataBuffer.prototype.putInt16=function(e){return this.accommodate(2),this.data.setInt16(this.write,e),this.write+=2,this};Le.DataBuffer.prototype.putInt24=function(e){return this.accommodate(3),this.data.setInt16(this.write,e>>8&65535),this.data.setInt8(this.write,e>>16&255),this.write+=3,this};Le.DataBuffer.prototype.putInt32=function(e){return this.accommodate(4),this.data.setInt32(this.write,e),this.write+=4,this};Le.DataBuffer.prototype.putInt16Le=function(e){return this.accommodate(2),this.data.setInt16(this.write,e,!0),this.write+=2,this};Le.DataBuffer.prototype.putInt24Le=function(e){return this.accommodate(3),this.data.setInt8(this.write,e>>16&255),this.data.setInt16(this.write,e>>8&65535,!0),this.write+=3,this};Le.DataBuffer.prototype.putInt32Le=function(e){return this.accommodate(4),this.data.setInt32(this.write,e,!0),this.write+=4,this};Le.DataBuffer.prototype.putInt=function(e,t){Gl(t),this.accommodate(t/8);do t-=8,this.data.setInt8(this.write++,e>>t&255);while(t>0);return this};Le.DataBuffer.prototype.putSignedInt=function(e,t){return Gl(t),this.accommodate(t/8),e<0&&(e+=2<<t-1),this.putInt(e,t)};Le.DataBuffer.prototype.getByte=function(){return this.data.getInt8(this.read++)};Le.DataBuffer.prototype.getInt16=function(){var e=this.data.getInt16(this.read);return this.read+=2,e};Le.DataBuffer.prototype.getInt24=function(){var e=this.data.getInt16(this.read)<<8^this.data.getInt8(this.read+2);return this.read+=3,e};Le.DataBuffer.prototype.getInt32=function(){var e=this.data.getInt32(this.read);return this.read+=4,e};Le.DataBuffer.prototype.getInt16Le=function(){var e=this.data.getInt16(this.read,!0);return this.read+=2,e};Le.DataBuffer.prototype.getInt24Le=function(){var e=this.data.getInt8(this.read)^this.data.getInt16(this.read+1,!0)<<8;return this.read+=3,e};Le.DataBuffer.prototype.getInt32Le=function(){var e=this.data.getInt32(this.read,!0);return this.read+=4,e};Le.DataBuffer.prototype.getInt=function(e){Gl(e);var t=0;do t=(t<<8)+this.data.getInt8(this.read++),e-=8;while(e>0);return t};Le.DataBuffer.prototype.getSignedInt=function(e){var t=this.getInt(e),n=2<<e-2;return t>=n&&(t-=n<<1),t};Le.DataBuffer.prototype.getBytes=function(e){var t;return e?(e=Math.min(this.length(),e),t=this.data.slice(this.read,this.read+e),this.read+=e):e===0?t="":(t=this.read===0?this.data:this.data.slice(this.read),this.clear()),t};Le.DataBuffer.prototype.bytes=function(e){return typeof e>"u"?this.data.slice(this.read):this.data.slice(this.read,this.read+e)};Le.DataBuffer.prototype.at=function(e){return this.data.getUint8(this.read+e)};Le.DataBuffer.prototype.setAt=function(e,t){return this.data.setUint8(e,t),this};Le.DataBuffer.prototype.last=function(){return this.data.getUint8(this.write-1)};Le.DataBuffer.prototype.copy=function(){return new Le.DataBuffer(this)};Le.DataBuffer.prototype.compact=function(){if(this.read>0){var e=new Uint8Array(this.data.buffer,this.read),t=new Uint8Array(e.byteLength);t.set(e),this.data=new DataView(t),this.write-=this.read,this.read=0}return this};Le.DataBuffer.prototype.clear=function(){return this.data=new DataView(new ArrayBuffer(0)),this.read=this.write=0,this};Le.DataBuffer.prototype.truncate=function(e){return this.write=Math.max(0,this.length()-e),this.read=Math.min(this.read,this.write),this};Le.DataBuffer.prototype.toHex=function(){for(var e="",t=this.read;t<this.data.byteLength;++t){var n=this.data.getUint8(t);n<16&&(e+="0"),e+=n.toString(16)}return e};Le.DataBuffer.prototype.toString=function(e){var t=new Uint8Array(this.data,this.read,this.length());if(e=e||"utf8",e==="binary"||e==="raw")return Le.binary.raw.encode(t);if(e==="hex")return Le.binary.hex.encode(t);if(e==="base64")return Le.binary.base64.encode(t);if(e==="utf8")return Le.text.utf8.decode(t);if(e==="utf16")return Le.text.utf16.decode(t);throw new Error("Invalid encoding: "+e)};Le.createBuffer=function(e,t){return t=t||"raw",e!==void 0&&t==="utf8"&&(e=Le.encodeUtf8(e)),new Le.ByteBuffer(e)};Le.fillString=function(e,t){for(var n="";t>0;)t&1&&(n+=e),t>>>=1,t>0&&(e+=e);return n};Le.xorBytes=function(e,t,n){for(var r="",i="",a="",s=0,o=0;n>0;--n,++s)i=e.charCodeAt(s)^t.charCodeAt(s),o>=10&&(r+=a,a="",o=0),a+=String.fromCharCode(i),++o;return r+=a,r};Le.hexToBytes=function(e){var t="",n=0;for(e.length&!0&&(n=1,t+=String.fromCharCode(parseInt(e[0],16)));n<e.length;n+=2)t+=String.fromCharCode(parseInt(e.substr(n,2),16));return t};Le.bytesToHex=function(e){return Le.createBuffer(e).toHex()};Le.int32ToBytes=function(e){return String.fromCharCode(e>>24&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(e&255)};var To="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",Lo=[62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,64,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],F0="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";Le.encode64=function(e,t){for(var n="",r="",i,a,s,o=0;o<e.length;)i=e.charCodeAt(o++),a=e.charCodeAt(o++),s=e.charCodeAt(o++),n+=To.charAt(i>>2),n+=To.charAt((i&3)<<4|a>>4),isNaN(a)?n+="==":(n+=To.charAt((a&15)<<2|s>>6),n+=isNaN(s)?"=":To.charAt(s&63)),t&&n.length>t&&(r+=n.substr(0,t)+`\r
`,n=n.substr(t));return r+=n,r};Le.decode64=function(e){e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var t="",n,r,i,a,s=0;s<e.length;)n=Lo[e.charCodeAt(s++)-43],r=Lo[e.charCodeAt(s++)-43],i=Lo[e.charCodeAt(s++)-43],a=Lo[e.charCodeAt(s++)-43],t+=String.fromCharCode(n<<2|r>>4),i!==64&&(t+=String.fromCharCode((r&15)<<4|i>>2),a!==64&&(t+=String.fromCharCode((i&3)<<6|a)));return t};Le.encodeUtf8=function(e){return unescape(encodeURIComponent(e))};Le.decodeUtf8=function(e){return decodeURIComponent(escape(e))};Le.binary={raw:{},hex:{},base64:{},base58:{},baseN:{encode:q0.encode,decode:q0.decode}};Le.binary.raw.encode=function(e){return String.fromCharCode.apply(null,e)};Le.binary.raw.decode=function(e,t,n){var r=t;r||(r=new Uint8Array(e.length)),n=n||0;for(var i=n,a=0;a<e.length;++a)r[i++]=e.charCodeAt(a);return t?i-n:r};Le.binary.hex.encode=Le.bytesToHex;Le.binary.hex.decode=function(e,t,n){var r=t;r||(r=new Uint8Array(Math.ceil(e.length/2))),n=n||0;var i=0,a=n;for(e.length&1&&(i=1,r[a++]=parseInt(e[0],16));i<e.length;i+=2)r[a++]=parseInt(e.substr(i,2),16);return t?a-n:r};Le.binary.base64.encode=function(e,t){for(var n="",r="",i,a,s,o=0;o<e.byteLength;)i=e[o++],a=e[o++],s=e[o++],n+=To.charAt(i>>2),n+=To.charAt((i&3)<<4|a>>4),isNaN(a)?n+="==":(n+=To.charAt((a&15)<<2|s>>6),n+=isNaN(s)?"=":To.charAt(s&63)),t&&n.length>t&&(r+=n.substr(0,t)+`\r
`,n=n.substr(t));return r+=n,r};Le.binary.base64.decode=function(e,t,n){var r=t;r||(r=new Uint8Array(Math.ceil(e.length/4)*3)),e=e.replace(/[^A-Za-z0-9\+\/\=]/g,""),n=n||0;for(var i,a,s,o,l=0,c=n;l<e.length;)i=Lo[e.charCodeAt(l++)-43],a=Lo[e.charCodeAt(l++)-43],s=Lo[e.charCodeAt(l++)-43],o=Lo[e.charCodeAt(l++)-43],r[c++]=i<<2|a>>4,s!==64&&(r[c++]=(a&15)<<4|s>>2,o!==64&&(r[c++]=(s&3)<<6|o));return t?c-n:r.subarray(0,c)};Le.binary.base58.encode=function(e,t){return Le.binary.baseN.encode(e,F0,t)};Le.binary.base58.decode=function(e,t){return Le.binary.baseN.decode(e,F0,t)};Le.text={utf8:{},utf16:{}};Le.text.utf8.encode=function(e,t,n){e=Le.encodeUtf8(e);var r=t;r||(r=new Uint8Array(e.length)),n=n||0;for(var i=n,a=0;a<e.length;++a)r[i++]=e.charCodeAt(a);return t?i-n:r};Le.text.utf8.decode=function(e){return Le.decodeUtf8(String.fromCharCode.apply(null,e))};Le.text.utf16.encode=function(e,t,n){var r=t;r||(r=new Uint8Array(e.length*2));var i=new Uint16Array(r.buffer);n=n||0;for(var a=n,s=n,o=0;o<e.length;++o)i[s++]=e.charCodeAt(o),a+=2;return t?a-n:r};Le.text.utf16.decode=function(e){return String.fromCharCode.apply(null,new Uint16Array(e.buffer))};Le.deflate=function(e,t,n){if(t=Le.decode64(e.deflate(Le.encode64(t)).rval),n){var r=2,i=t.charCodeAt(1);i&32&&(r=6),t=t.substring(r,t.length-4)}return t};Le.inflate=function(e,t,n){var r=e.inflate(Le.encode64(t)).rval;return r===null?null:Le.decode64(r)};var Td=function(e,t,n){if(!e)throw new Error("WebStorage not available.");var r;if(n===null?r=e.removeItem(t):(n=Le.encode64(JSON.stringify(n)),r=e.setItem(t,n)),typeof r<"u"&&r.rval!==!0){var i=new Error(r.error.message);throw i.id=r.error.id,i.name=r.error.name,i}},Ld=function(e,t){if(!e)throw new Error("WebStorage not available.");var n=e.getItem(t);if(e.init)if(n.rval===null){if(n.error){var r=new Error(n.error.message);throw r.id=n.error.id,r.name=n.error.name,r}n=null}else n=n.rval;return n!==null&&(n=JSON.parse(Le.decode64(n))),n},JL=function(e,t,n,r){var i=Ld(e,t);i===null&&(i={}),i[n]=r,Td(e,t,i)},ek=function(e,t,n){var r=Ld(e,t);return r!==null&&(r=n in r?r[n]:null),r},tk=function(e,t,n){var r=Ld(e,t);if(r!==null&&n in r){delete r[n];var i=!0;for(var a in r){i=!1;break}i&&(r=null),Td(e,t,r)}},nk=function(e,t){Td(e,t,null)},vf=function(e,t,n){var r=null;typeof n>"u"&&(n=["web","flash"]);var i,a=!1,s=null;for(var o in n){i=n[o];try{if(i==="flash"||i==="both"){if(t[0]===null)throw new Error("Flash local storage not available.");r=e.apply(this,t),a=i==="flash"}(i==="web"||i==="both")&&(t[0]=localStorage,r=e.apply(this,t),a=!0)}catch(l){s=l}if(a)break}if(!a)throw s;return r};Le.setItem=function(e,t,n,r,i){vf(JL,arguments,i)};Le.getItem=function(e,t,n,r){return vf(ek,arguments,r)};Le.removeItem=function(e,t,n,r){vf(tk,arguments,r)};Le.clearItems=function(e,t,n){vf(nk,arguments,n)};Le.isEmpty=function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0};Le.format=function(e){for(var t=/%./g,n,r,i=0,a=[],s=0;n=t.exec(e);){r=e.substring(s,t.lastIndex-2),r.length>0&&a.push(r),s=t.lastIndex;var o=n[0][1];switch(o){case"s":case"o":i<arguments.length?a.push(arguments[i+++1]):a.push("<?>");break;case"%":a.push("%");break;default:a.push("<%"+o+"?>")}}return a.push(e.substring(s)),a.join("")};Le.formatNumber=function(e,t,n,r){var i=e,a=isNaN(t=Math.abs(t))?2:t,s=n===void 0?",":n,o=r===void 0?".":r,l=i<0?"-":"",c=parseInt(i=Math.abs(+i||0).toFixed(a),10)+"",h=c.length>3?c.length%3:0;return l+(h?c.substr(0,h)+o:"")+c.substr(h).replace(/(\d{3})(?=\d)/g,"$1"+o)+(a?s+Math.abs(i-c).toFixed(a).slice(2):"")};Le.formatSize=function(e){return e>=1073741824?e=Le.formatNumber(e/1073741824,2,".","")+" GiB":e>=1048576?e=Le.formatNumber(e/1048576,2,".","")+" MiB":e>=1024?e=Le.formatNumber(e/1024,0)+" KiB":e=Le.formatNumber(e,0)+" bytes",e};Le.bytesFromIP=function(e){return e.indexOf(".")!==-1?Le.bytesFromIPv4(e):e.indexOf(":")!==-1?Le.bytesFromIPv6(e):null};Le.bytesFromIPv4=function(e){if(e=e.split("."),e.length!==4)return null;for(var t=Le.createBuffer(),n=0;n<e.length;++n){var r=parseInt(e[n],10);if(isNaN(r))return null;t.putByte(r)}return t.getBytes()};Le.bytesFromIPv6=function(e){var t=0;e=e.split(":").filter(function(s){return s.length===0&&++t,!0});for(var n=(8-e.length+t)*2,r=Le.createBuffer(),i=0;i<8;++i){if(!e[i]||e[i].length===0){r.fillWithByte(0,n),n=0;continue}var a=Le.hexToBytes(e[i]);a.length<2&&r.putByte(0),r.putBytes(a)}return r.getBytes()};Le.bytesToIP=function(e){return e.length===4?Le.bytesToIPv4(e):e.length===16?Le.bytesToIPv6(e):null};Le.bytesToIPv4=function(e){if(e.length!==4)return null;for(var t=[],n=0;n<e.length;++n)t.push(e.charCodeAt(n));return t.join(".")};Le.bytesToIPv6=function(e){if(e.length!==16)return null;for(var t=[],n=[],r=0,i=0;i<e.length;i+=2){for(var a=Le.bytesToHex(e[i]+e[i+1]);a[0]==="0"&&a!=="0";)a=a.substr(1);if(a==="0"){var s=n[n.length-1],o=t.length;!s||o!==s.end+1?n.push({start:o,end:o}):(s.end=o,s.end-s.start>n[r].end-n[r].start&&(r=n.length-1))}t.push(a)}if(n.length>0){var l=n[r];l.end-l.start>0&&(t.splice(l.start,l.end-l.start+1,""),l.start===0&&t.unshift(""),l.end===7&&t.push(""))}return t.join(":")};Le.estimateCores=function(e,t){if(typeof e=="function"&&(t=e,e={}),e=e||{},"cores"in Le&&!e.update)return t(null,Le.cores);if(typeof navigator<"u"&&"hardwareConcurrency"in navigator&&navigator.hardwareConcurrency>0)return Le.cores=navigator.hardwareConcurrency,t(null,Le.cores);if(typeof Worker>"u")return Le.cores=1,t(null,Le.cores);if(typeof Blob>"u")return Le.cores=2,t(null,Le.cores);var n=URL.createObjectURL(new Blob(["(",function(){self.addEventListener("message",function(s){for(var o=Date.now(),l=o+4;Date.now()<l;);self.postMessage({st:o,et:l})})}.toString(),")()"],{type:"application/javascript"}));r([],5,16);function r(s,o,l){if(o===0){var c=Math.floor(s.reduce(function(h,p){return h+p},0)/s.length);return Le.cores=Math.max(1,c),URL.revokeObjectURL(n),t(null,Le.cores)}i(l,function(h,p){s.push(a(l,p)),r(s,o-1,l)})}function i(s,o){for(var l=[],c=[],h=0;h<s;++h){var p=new Worker(n);p.addEventListener("message",function(E){if(c.push(E.data),c.length===s){for(var b=0;b<s;++b)l[b].terminate();o(null,c)}}),l.push(p)}for(var h=0;h<s;++h)l[h].postMessage(h)}function a(s,o){for(var l=[],c=0;c<s;++c)for(var h=o[c],p=l[c]=[],E=0;E<s;++E)if(c!==E){var b=o[E];(h.st>b.st&&h.st<b.et||b.st>h.st&&b.st<h.et)&&p.push(E)}return l.reduce(function(C,N){return Math.max(C,N.length)},0)}}});var yf=$e((r6,z0)=>{var gi=hn();Bn();z0.exports=gi.cipher=gi.cipher||{};gi.cipher.algorithms=gi.cipher.algorithms||{};gi.cipher.createCipher=function(e,t){var n=e;if(typeof n=="string"&&(n=gi.cipher.getAlgorithm(n),n&&(n=n())),!n)throw new Error("Unsupported algorithm: "+e);return new gi.cipher.BlockCipher({algorithm:n,key:t,decrypt:!1})};gi.cipher.createDecipher=function(e,t){var n=e;if(typeof n=="string"&&(n=gi.cipher.getAlgorithm(n),n&&(n=n())),!n)throw new Error("Unsupported algorithm: "+e);return new gi.cipher.BlockCipher({algorithm:n,key:t,decrypt:!0})};gi.cipher.registerAlgorithm=function(e,t){e=e.toUpperCase(),gi.cipher.algorithms[e]=t};gi.cipher.getAlgorithm=function(e){return e=e.toUpperCase(),e in gi.cipher.algorithms?gi.cipher.algorithms[e]:null};var kd=gi.cipher.BlockCipher=function(e){this.algorithm=e.algorithm,this.mode=this.algorithm.mode,this.blockSize=this.mode.blockSize,this._finish=!1,this._input=null,this.output=null,this._op=e.decrypt?this.mode.decrypt:this.mode.encrypt,this._decrypt=e.decrypt,this.algorithm.initialize(e)};kd.prototype.start=function(e){e=e||{};var t={};for(var n in e)t[n]=e[n];t.decrypt=this._decrypt,this._finish=!1,this._input=gi.util.createBuffer(),this.output=e.output||gi.util.createBuffer(),this.mode.start(t)};kd.prototype.update=function(e){for(e&&this._input.putBuffer(e);!this._op.call(this.mode,this._input,this.output,this._finish)&&!this._finish;);this._input.compact()};kd.prototype.finish=function(e){e&&(this.mode.name==="ECB"||this.mode.name==="CBC")&&(this.mode.pad=function(n){return e(this.blockSize,n,!1)},this.mode.unpad=function(n){return e(this.blockSize,n,!0)});var t={};return t.decrypt=this._decrypt,t.overflow=this._input.length()%this.blockSize,!(!this._decrypt&&this.mode.pad&&!this.mode.pad(this._input,t)||(this._finish=!0,this.update(),this._decrypt&&this.mode.unpad&&!this.mode.unpad(this.output,t))||this.mode.afterFinish&&!this.mode.afterFinish(this.output,t))}});var Id=$e((i6,H0)=>{var mi=hn();Bn();mi.cipher=mi.cipher||{};var wn=H0.exports=mi.cipher.modes=mi.cipher.modes||{};wn.ecb=function(e){e=e||{},this.name="ECB",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)};wn.ecb.prototype.start=function(e){};wn.ecb.prototype.encrypt=function(e,t,n){if(e.length()<this.blockSize&&!(n&&e.length()>0))return!0;for(var r=0;r<this._ints;++r)this._inBlock[r]=e.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var r=0;r<this._ints;++r)t.putInt32(this._outBlock[r])};wn.ecb.prototype.decrypt=function(e,t,n){if(e.length()<this.blockSize&&!(n&&e.length()>0))return!0;for(var r=0;r<this._ints;++r)this._inBlock[r]=e.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var r=0;r<this._ints;++r)t.putInt32(this._outBlock[r])};wn.ecb.prototype.pad=function(e,t){var n=e.length()===this.blockSize?this.blockSize:this.blockSize-e.length();return e.fillWithByte(n,n),!0};wn.ecb.prototype.unpad=function(e,t){if(t.overflow>0)return!1;var n=e.length(),r=e.at(n-1);return r>this.blockSize<<2?!1:(e.truncate(r),!0)};wn.cbc=function(e){e=e||{},this.name="CBC",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)};wn.cbc.prototype.start=function(e){if(e.iv===null){if(!this._prev)throw new Error("Invalid IV parameter.");this._iv=this._prev.slice(0)}else if("iv"in e)this._iv=_f(e.iv,this.blockSize),this._prev=this._iv.slice(0);else throw new Error("Invalid IV parameter.")};wn.cbc.prototype.encrypt=function(e,t,n){if(e.length()<this.blockSize&&!(n&&e.length()>0))return!0;for(var r=0;r<this._ints;++r)this._inBlock[r]=this._prev[r]^e.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var r=0;r<this._ints;++r)t.putInt32(this._outBlock[r]);this._prev=this._outBlock};wn.cbc.prototype.decrypt=function(e,t,n){if(e.length()<this.blockSize&&!(n&&e.length()>0))return!0;for(var r=0;r<this._ints;++r)this._inBlock[r]=e.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var r=0;r<this._ints;++r)t.putInt32(this._prev[r]^this._outBlock[r]);this._prev=this._inBlock.slice(0)};wn.cbc.prototype.pad=function(e,t){var n=e.length()===this.blockSize?this.blockSize:this.blockSize-e.length();return e.fillWithByte(n,n),!0};wn.cbc.prototype.unpad=function(e,t){if(t.overflow>0)return!1;var n=e.length(),r=e.at(n-1);return r>this.blockSize<<2?!1:(e.truncate(r),!0)};wn.cfb=function(e){e=e||{},this.name="CFB",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialBlock=new Array(this._ints),this._partialOutput=mi.util.createBuffer(),this._partialBytes=0};wn.cfb.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=_f(e.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};wn.cfb.prototype.encrypt=function(e,t,n){var r=e.length();if(r===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&r>=this.blockSize){for(var i=0;i<this._ints;++i)this._inBlock[i]=e.getInt32()^this._outBlock[i],t.putInt32(this._inBlock[i]);return}var a=(this.blockSize-r)%this.blockSize;a>0&&(a=this.blockSize-a),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialBlock[i]=e.getInt32()^this._outBlock[i],this._partialOutput.putInt32(this._partialBlock[i]);if(a>0)e.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._partialBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),a>0&&!n)return t.putBytes(this._partialOutput.getBytes(a-this._partialBytes)),this._partialBytes=a,!0;t.putBytes(this._partialOutput.getBytes(r-this._partialBytes)),this._partialBytes=0};wn.cfb.prototype.decrypt=function(e,t,n){var r=e.length();if(r===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&r>=this.blockSize){for(var i=0;i<this._ints;++i)this._inBlock[i]=e.getInt32(),t.putInt32(this._inBlock[i]^this._outBlock[i]);return}var a=(this.blockSize-r)%this.blockSize;a>0&&(a=this.blockSize-a),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialBlock[i]=e.getInt32(),this._partialOutput.putInt32(this._partialBlock[i]^this._outBlock[i]);if(a>0)e.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._partialBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),a>0&&!n)return t.putBytes(this._partialOutput.getBytes(a-this._partialBytes)),this._partialBytes=a,!0;t.putBytes(this._partialOutput.getBytes(r-this._partialBytes)),this._partialBytes=0};wn.ofb=function(e){e=e||{},this.name="OFB",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=mi.util.createBuffer(),this._partialBytes=0};wn.ofb.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=_f(e.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};wn.ofb.prototype.encrypt=function(e,t,n){var r=e.length();if(e.length()===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&r>=this.blockSize){for(var i=0;i<this._ints;++i)t.putInt32(e.getInt32()^this._outBlock[i]),this._inBlock[i]=this._outBlock[i];return}var a=(this.blockSize-r)%this.blockSize;a>0&&(a=this.blockSize-a),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(e.getInt32()^this._outBlock[i]);if(a>0)e.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._outBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),a>0&&!n)return t.putBytes(this._partialOutput.getBytes(a-this._partialBytes)),this._partialBytes=a,!0;t.putBytes(this._partialOutput.getBytes(r-this._partialBytes)),this._partialBytes=0};wn.ofb.prototype.decrypt=wn.ofb.prototype.encrypt;wn.ctr=function(e){e=e||{},this.name="CTR",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=mi.util.createBuffer(),this._partialBytes=0};wn.ctr.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=_f(e.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};wn.ctr.prototype.encrypt=function(e,t,n){var r=e.length();if(r===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&r>=this.blockSize)for(var i=0;i<this._ints;++i)t.putInt32(e.getInt32()^this._outBlock[i]);else{var a=(this.blockSize-r)%this.blockSize;a>0&&(a=this.blockSize-a),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(e.getInt32()^this._outBlock[i]);if(a>0&&(e.read-=this.blockSize),this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),a>0&&!n)return t.putBytes(this._partialOutput.getBytes(a-this._partialBytes)),this._partialBytes=a,!0;t.putBytes(this._partialOutput.getBytes(r-this._partialBytes)),this._partialBytes=0}bf(this._inBlock)};wn.ctr.prototype.decrypt=wn.ctr.prototype.encrypt;wn.gcm=function(e){e=e||{},this.name="GCM",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints),this._partialOutput=mi.util.createBuffer(),this._partialBytes=0,this._R=3774873600};wn.gcm.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");var t=mi.util.createBuffer(e.iv);this._cipherLength=0;var n;if("additionalData"in e?n=mi.util.createBuffer(e.additionalData):n=mi.util.createBuffer(),"tagLength"in e?this._tagLength=e.tagLength:this._tagLength=128,this._tag=null,e.decrypt&&(this._tag=mi.util.createBuffer(e.tag).getBytes(),this._tag.length!==this._tagLength/8))throw new Error("Authentication tag does not match tag length.");this._hashBlock=new Array(this._ints),this.tag=null,this._hashSubkey=new Array(this._ints),this.cipher.encrypt([0,0,0,0],this._hashSubkey),this.componentBits=4,this._m=this.generateHashTable(this._hashSubkey,this.componentBits);var r=t.length();if(r===12)this._j0=[t.getInt32(),t.getInt32(),t.getInt32(),1];else{for(this._j0=[0,0,0,0];t.length()>0;)this._j0=this.ghash(this._hashSubkey,this._j0,[t.getInt32(),t.getInt32(),t.getInt32(),t.getInt32()]);this._j0=this.ghash(this._hashSubkey,this._j0,[0,0].concat(Ad(r*8)))}this._inBlock=this._j0.slice(0),bf(this._inBlock),this._partialBytes=0,n=mi.util.createBuffer(n),this._aDataLength=Ad(n.length()*8);var i=n.length()%this.blockSize;for(i&&n.fillWithByte(0,this.blockSize-i),this._s=[0,0,0,0];n.length()>0;)this._s=this.ghash(this._hashSubkey,this._s,[n.getInt32(),n.getInt32(),n.getInt32(),n.getInt32()])};wn.gcm.prototype.encrypt=function(e,t,n){var r=e.length();if(r===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&r>=this.blockSize){for(var i=0;i<this._ints;++i)t.putInt32(this._outBlock[i]^=e.getInt32());this._cipherLength+=this.blockSize}else{var a=(this.blockSize-r)%this.blockSize;a>0&&(a=this.blockSize-a),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(e.getInt32()^this._outBlock[i]);if(a<=0||n){if(n){var s=r%this.blockSize;this._cipherLength+=s,this._partialOutput.truncate(this.blockSize-s)}else this._cipherLength+=this.blockSize;for(var i=0;i<this._ints;++i)this._outBlock[i]=this._partialOutput.getInt32();this._partialOutput.read-=this.blockSize}if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),a>0&&!n)return e.read-=this.blockSize,t.putBytes(this._partialOutput.getBytes(a-this._partialBytes)),this._partialBytes=a,!0;t.putBytes(this._partialOutput.getBytes(r-this._partialBytes)),this._partialBytes=0}this._s=this.ghash(this._hashSubkey,this._s,this._outBlock),bf(this._inBlock)};wn.gcm.prototype.decrypt=function(e,t,n){var r=e.length();if(r<this.blockSize&&!(n&&r>0))return!0;this.cipher.encrypt(this._inBlock,this._outBlock),bf(this._inBlock),this._hashBlock[0]=e.getInt32(),this._hashBlock[1]=e.getInt32(),this._hashBlock[2]=e.getInt32(),this._hashBlock[3]=e.getInt32(),this._s=this.ghash(this._hashSubkey,this._s,this._hashBlock);for(var i=0;i<this._ints;++i)t.putInt32(this._outBlock[i]^this._hashBlock[i]);r<this.blockSize?this._cipherLength+=r%this.blockSize:this._cipherLength+=this.blockSize};wn.gcm.prototype.afterFinish=function(e,t){var n=!0;t.decrypt&&t.overflow&&e.truncate(this.blockSize-t.overflow),this.tag=mi.util.createBuffer();var r=this._aDataLength.concat(Ad(this._cipherLength*8));this._s=this.ghash(this._hashSubkey,this._s,r);var i=[];this.cipher.encrypt(this._j0,i);for(var a=0;a<this._ints;++a)this.tag.putInt32(this._s[a]^i[a]);return this.tag.truncate(this.tag.length()%(this._tagLength/8)),t.decrypt&&this.tag.bytes()!==this._tag&&(n=!1),n};wn.gcm.prototype.multiply=function(e,t){for(var n=[0,0,0,0],r=t.slice(0),i=0;i<128;++i){var a=e[i/32|0]&1<<31-i%32;a&&(n[0]^=r[0],n[1]^=r[1],n[2]^=r[2],n[3]^=r[3]),this.pow(r,r)}return n};wn.gcm.prototype.pow=function(e,t){for(var n=e[3]&1,r=3;r>0;--r)t[r]=e[r]>>>1|(e[r-1]&1)<<31;t[0]=e[0]>>>1,n&&(t[0]^=this._R)};wn.gcm.prototype.tableMultiply=function(e){for(var t=[0,0,0,0],n=0;n<32;++n){var r=n/8|0,i=e[r]>>>(7-n%8)*4&15,a=this._m[n][i];t[0]^=a[0],t[1]^=a[1],t[2]^=a[2],t[3]^=a[3]}return t};wn.gcm.prototype.ghash=function(e,t,n){return t[0]^=n[0],t[1]^=n[1],t[2]^=n[2],t[3]^=n[3],this.tableMultiply(t)};wn.gcm.prototype.generateHashTable=function(e,t){for(var n=8/t,r=4*n,i=16*n,a=new Array(i),s=0;s<i;++s){var o=[0,0,0,0],l=s/r|0,c=(r-1-s%r)*t;o[l]=1<<t-1<<c,a[s]=this.generateSubHashTable(this.multiply(o,e),t)}return a};wn.gcm.prototype.generateSubHashTable=function(e,t){var n=1<<t,r=n>>>1,i=new Array(n);i[r]=e.slice(0);for(var a=r>>>1;a>0;)this.pow(i[2*a],i[a]=[]),a>>=1;for(a=2;a<r;){for(var s=1;s<a;++s){var o=i[a],l=i[s];i[a+s]=[o[0]^l[0],o[1]^l[1],o[2]^l[2],o[3]^l[3]]}a*=2}for(i[0]=[0,0,0,0],a=r+1;a<n;++a){var c=i[a^r];i[a]=[e[0]^c[0],e[1]^c[1],e[2]^c[2],e[3]^c[3]]}return i};function _f(e,t){if(typeof e=="string"&&(e=mi.util.createBuffer(e)),mi.util.isArray(e)&&e.length>4){var n=e;e=mi.util.createBuffer();for(var r=0;r<n.length;++r)e.putByte(n[r])}if(e.length()<t)throw new Error("Invalid IV length; got "+e.length()+" bytes and expected "+t+" bytes.");if(!mi.util.isArray(e)){for(var i=[],a=t/4,r=0;r<a;++r)i.push(e.getInt32());e=i}return e}function bf(e){e[e.length-1]=e[e.length-1]+1&4294967295}function Ad(e){return[e/4294967296|0,e&4294967295]}});var ko=$e((a6,W0)=>{var or=hn();yf();Id();Bn();W0.exports=or.aes=or.aes||{};or.aes.startEncrypting=function(e,t,n,r){var i=wf({key:e,output:n,decrypt:!1,mode:r});return i.start(t),i};or.aes.createEncryptionCipher=function(e,t){return wf({key:e,output:null,decrypt:!1,mode:t})};or.aes.startDecrypting=function(e,t,n,r){var i=wf({key:e,output:n,decrypt:!0,mode:r});return i.start(t),i};or.aes.createDecryptionCipher=function(e,t){return wf({key:e,output:null,decrypt:!0,mode:t})};or.aes.Algorithm=function(e,t){Dd||j0();var n=this;n.name=e,n.mode=new t({blockSize:16,cipher:{encrypt:function(r,i){return Pd(n._w,r,i,!1)},decrypt:function(r,i){return Pd(n._w,r,i,!0)}}}),n._init=!1};or.aes.Algorithm.prototype.initialize=function(e){if(!this._init){var t=e.key,n;if(typeof t=="string"&&(t.length===16||t.length===24||t.length===32))t=or.util.createBuffer(t);else if(or.util.isArray(t)&&(t.length===16||t.length===24||t.length===32)){n=t,t=or.util.createBuffer();for(var r=0;r<n.length;++r)t.putByte(n[r])}if(!or.util.isArray(t)){n=t,t=[];var i=n.length();if(i===16||i===24||i===32){i=i>>>2;for(var r=0;r<i;++r)t.push(n.getInt32())}}if(!or.util.isArray(t)||!(t.length===4||t.length===6||t.length===8))throw new Error("Invalid key parameter.");var a=this.mode.name,s=["CFB","OFB","CTR","GCM"].indexOf(a)!==-1;this._w=K0(t,e.decrypt&&!s),this._init=!0}};or.aes._expandKey=function(e,t){return Dd||j0(),K0(e,t)};or.aes._updateBlock=Pd;Gu("AES-ECB",or.cipher.modes.ecb);Gu("AES-CBC",or.cipher.modes.cbc);Gu("AES-CFB",or.cipher.modes.cfb);Gu("AES-OFB",or.cipher.modes.ofb);Gu("AES-CTR",or.cipher.modes.ctr);Gu("AES-GCM",or.cipher.modes.gcm);function Gu(e,t){var n=function(){return new or.aes.Algorithm(e,t)};or.cipher.registerAlgorithm(e,n)}var Dd=!1,Wu=4,Yi,Nd,$0,uu,rs;function j0(){Dd=!0,$0=[0,1,2,4,8,16,32,64,128,27,54];for(var e=new Array(256),t=0;t<128;++t)e[t]=t<<1,e[t+128]=t+128<<1^283;Yi=new Array(256),Nd=new Array(256),uu=new Array(4),rs=new Array(4);for(var t=0;t<4;++t)uu[t]=new Array(256),rs[t]=new Array(256);for(var n=0,r=0,i,a,s,o,l,c,h,t=0;t<256;++t){o=r^r<<1^r<<2^r<<3^r<<4,o=o>>8^o&255^99,Yi[n]=o,Nd[o]=n,l=e[o],i=e[n],a=e[i],s=e[a],c=l<<24^o<<16^o<<8^(o^l),h=(i^a^s)<<24^(n^s)<<16^(n^a^s)<<8^(n^i^s);for(var p=0;p<4;++p)uu[p][n]=c,rs[p][o]=h,c=c<<24|c>>>8,h=h<<24|h>>>8;n===0?n=r=1:(n=i^e[e[e[i^s]]],r^=e[e[r]])}}function K0(e,t){for(var n=e.slice(0),r,i=1,a=n.length,s=a+6+1,o=Wu*s,l=a;l<o;++l)r=n[l-1],l%a===0?(r=Yi[r>>>16&255]<<24^Yi[r>>>8&255]<<16^Yi[r&255]<<8^Yi[r>>>24]^$0[i]<<24,i++):a>6&&l%a===4&&(r=Yi[r>>>24]<<24^Yi[r>>>16&255]<<16^Yi[r>>>8&255]<<8^Yi[r&255]),n[l]=n[l-a]^r;if(t){var c,h=rs[0],p=rs[1],E=rs[2],b=rs[3],C=n.slice(0);o=n.length;for(var l=0,N=o-Wu;l<o;l+=Wu,N-=Wu)if(l===0||l===o-Wu)C[l]=n[N],C[l+1]=n[N+3],C[l+2]=n[N+2],C[l+3]=n[N+1];else for(var w=0;w<Wu;++w)c=n[N+w],C[l+(3&-w)]=h[Yi[c>>>24]]^p[Yi[c>>>16&255]]^E[Yi[c>>>8&255]]^b[Yi[c&255]];n=C}return n}function Pd(e,t,n,r){var i=e.length/4-1,a,s,o,l,c;r?(a=rs[0],s=rs[1],o=rs[2],l=rs[3],c=Nd):(a=uu[0],s=uu[1],o=uu[2],l=uu[3],c=Yi);var h,p,E,b,C,N,w;h=t[0]^e[0],p=t[r?3:1]^e[1],E=t[2]^e[2],b=t[r?1:3]^e[3];for(var I=3,S=1;S<i;++S)C=a[h>>>24]^s[p>>>16&255]^o[E>>>8&255]^l[b&255]^e[++I],N=a[p>>>24]^s[E>>>16&255]^o[b>>>8&255]^l[h&255]^e[++I],w=a[E>>>24]^s[b>>>16&255]^o[h>>>8&255]^l[p&255]^e[++I],b=a[b>>>24]^s[h>>>16&255]^o[p>>>8&255]^l[E&255]^e[++I],h=C,p=N,E=w;n[0]=c[h>>>24]<<24^c[p>>>16&255]<<16^c[E>>>8&255]<<8^c[b&255]^e[++I],n[r?3:1]=c[p>>>24]<<24^c[E>>>16&255]<<16^c[b>>>8&255]<<8^c[h&255]^e[++I],n[2]=c[E>>>24]<<24^c[b>>>16&255]<<16^c[h>>>8&255]<<8^c[p&255]^e[++I],n[r?1:3]=c[b>>>24]<<24^c[h>>>16&255]<<16^c[p>>>8&255]<<8^c[E&255]^e[++I]}function wf(e){e=e||{};var t=(e.mode||"CBC").toUpperCase(),n="AES-"+t,r;e.decrypt?r=or.cipher.createDecipher(n,e.key):r=or.cipher.createCipher(n,e.key);var i=r.start;return r.start=function(a,s){var o=null;s instanceof or.util.ByteBuffer&&(o=s,s={}),s=s||{},s.output=o,s.iv=a,i.call(r,s)},r}});var Ao=$e((s6,G0)=>{var Zl=hn();Zl.pki=Zl.pki||{};var Rd=G0.exports=Zl.pki.oids=Zl.oids=Zl.oids||{};function ct(e,t){Rd[e]=t,Rd[t]=e}function Hn(e,t){Rd[e]=t}ct("1.2.840.113549.1.1.1","rsaEncryption");ct("1.2.840.113549.1.1.4","md5WithRSAEncryption");ct("1.2.840.113549.1.1.5","sha1WithRSAEncryption");ct("1.2.840.113549.1.1.7","RSAES-OAEP");ct("1.2.840.113549.1.1.8","mgf1");ct("1.2.840.113549.1.1.9","pSpecified");ct("1.2.840.113549.1.1.10","RSASSA-PSS");ct("1.2.840.113549.1.1.11","sha256WithRSAEncryption");ct("1.2.840.113549.1.1.12","sha384WithRSAEncryption");ct("1.2.840.113549.1.1.13","sha512WithRSAEncryption");ct("1.3.101.112","EdDSA25519");ct("1.2.840.10040.4.3","dsa-with-sha1");ct("1.3.14.3.2.7","desCBC");ct("1.3.14.3.2.26","sha1");ct("1.3.14.3.2.29","sha1WithRSASignature");ct("2.16.840.1.101.3.4.2.1","sha256");ct("2.16.840.1.101.3.4.2.2","sha384");ct("2.16.840.1.101.3.4.2.3","sha512");ct("2.16.840.1.101.3.4.2.4","sha224");ct("2.16.840.1.101.3.4.2.5","sha512-224");ct("2.16.840.1.101.3.4.2.6","sha512-256");ct("1.2.840.113549.2.2","md2");ct("1.2.840.113549.2.5","md5");ct("1.2.840.113549.1.7.1","data");ct("1.2.840.113549.1.7.2","signedData");ct("1.2.840.113549.1.7.3","envelopedData");ct("1.2.840.113549.1.7.4","signedAndEnvelopedData");ct("1.2.840.113549.1.7.5","digestedData");ct("1.2.840.113549.1.7.6","encryptedData");ct("1.2.840.113549.1.9.1","emailAddress");ct("1.2.840.113549.1.9.2","unstructuredName");ct("1.2.840.113549.1.9.3","contentType");ct("1.2.840.113549.1.9.4","messageDigest");ct("1.2.840.113549.1.9.5","signingTime");ct("1.2.840.113549.1.9.6","counterSignature");ct("1.2.840.113549.1.9.7","challengePassword");ct("1.2.840.113549.1.9.8","unstructuredAddress");ct("1.2.840.113549.1.9.14","extensionRequest");ct("1.2.840.113549.1.9.20","friendlyName");ct("1.2.840.113549.1.9.21","localKeyId");ct("1.2.840.113549.1.9.22.1","x509Certificate");ct("1.2.840.113549.1.12.10.1.1","keyBag");ct("1.2.840.113549.1.12.10.1.2","pkcs8ShroudedKeyBag");ct("1.2.840.113549.1.12.10.1.3","certBag");ct("1.2.840.113549.1.12.10.1.4","crlBag");ct("1.2.840.113549.1.12.10.1.5","secretBag");ct("1.2.840.113549.1.12.10.1.6","safeContentsBag");ct("1.2.840.113549.1.5.13","pkcs5PBES2");ct("1.2.840.113549.1.5.12","pkcs5PBKDF2");ct("1.2.840.113549.1.12.1.1","pbeWithSHAAnd128BitRC4");ct("1.2.840.113549.1.12.1.2","pbeWithSHAAnd40BitRC4");ct("1.2.840.113549.1.12.1.3","pbeWithSHAAnd3-KeyTripleDES-CBC");ct("1.2.840.113549.1.12.1.4","pbeWithSHAAnd2-KeyTripleDES-CBC");ct("1.2.840.113549.1.12.1.5","pbeWithSHAAnd128BitRC2-CBC");ct("1.2.840.113549.1.12.1.6","pbewithSHAAnd40BitRC2-CBC");ct("1.2.840.113549.2.7","hmacWithSHA1");ct("1.2.840.113549.2.8","hmacWithSHA224");ct("1.2.840.113549.2.9","hmacWithSHA256");ct("1.2.840.113549.2.10","hmacWithSHA384");ct("1.2.840.113549.2.11","hmacWithSHA512");ct("1.2.840.113549.3.7","des-EDE3-CBC");ct("2.16.840.1.101.3.4.1.2","aes128-CBC");ct("2.16.840.1.101.3.4.1.22","aes192-CBC");ct("2.16.840.1.101.3.4.1.42","aes256-CBC");ct("2.5.4.3","commonName");ct("2.5.4.4","surname");ct("2.5.4.5","serialNumber");ct("2.5.4.6","countryName");ct("2.5.4.7","localityName");ct("2.5.4.8","stateOrProvinceName");ct("2.5.4.9","streetAddress");ct("2.5.4.10","organizationName");ct("2.5.4.11","organizationalUnitName");ct("2.5.4.12","title");ct("2.5.4.13","description");ct("2.5.4.15","businessCategory");ct("2.5.4.17","postalCode");ct("2.5.4.42","givenName");ct("1.3.6.1.4.1.311.60.2.1.2","jurisdictionOfIncorporationStateOrProvinceName");ct("1.3.6.1.4.1.311.60.2.1.3","jurisdictionOfIncorporationCountryName");ct("2.16.840.1.113730.1.1","nsCertType");ct("2.16.840.1.113730.1.13","nsComment");Hn("2.5.29.1","authorityKeyIdentifier");Hn("2.5.29.2","keyAttributes");Hn("2.5.29.3","certificatePolicies");Hn("2.5.29.4","keyUsageRestriction");Hn("2.5.29.5","policyMapping");Hn("2.5.29.6","subtreesConstraint");Hn("2.5.29.7","subjectAltName");Hn("2.5.29.8","issuerAltName");Hn("2.5.29.9","subjectDirectoryAttributes");Hn("2.5.29.10","basicConstraints");Hn("2.5.29.11","nameConstraints");Hn("2.5.29.12","policyConstraints");Hn("2.5.29.13","basicConstraints");ct("2.5.29.14","subjectKeyIdentifier");ct("2.5.29.15","keyUsage");Hn("2.5.29.16","privateKeyUsagePeriod");ct("2.5.29.17","subjectAltName");ct("2.5.29.18","issuerAltName");ct("2.5.29.19","basicConstraints");Hn("2.5.29.20","cRLNumber");Hn("2.5.29.21","cRLReason");Hn("2.5.29.22","expirationDate");Hn("2.5.29.23","instructionCode");Hn("2.5.29.24","invalidityDate");Hn("2.5.29.25","cRLDistributionPoints");Hn("2.5.29.26","issuingDistributionPoint");Hn("2.5.29.27","deltaCRLIndicator");Hn("2.5.29.28","issuingDistributionPoint");Hn("2.5.29.29","certificateIssuer");Hn("2.5.29.30","nameConstraints");ct("2.5.29.31","cRLDistributionPoints");ct("2.5.29.32","certificatePolicies");Hn("2.5.29.33","policyMappings");Hn("2.5.29.34","policyConstraints");ct("2.5.29.35","authorityKeyIdentifier");Hn("2.5.29.36","policyConstraints");ct("2.5.29.37","extKeyUsage");Hn("2.5.29.46","freshestCRL");Hn("2.5.29.54","inhibitAnyPolicy");ct("1.3.6.1.4.1.11129.2.4.2","timestampList");ct("1.3.6.1.5.5.7.1.1","authorityInfoAccess");ct("1.3.6.1.5.5.7.3.1","serverAuth");ct("1.3.6.1.5.5.7.3.2","clientAuth");ct("1.3.6.1.5.5.7.3.3","codeSigning");ct("1.3.6.1.5.5.7.3.4","emailProtection");ct("1.3.6.1.5.5.7.3.8","timeStamping")});var is=$e((o6,X0)=>{var dr=hn();Bn();Ao();var xt=X0.exports=dr.asn1=dr.asn1||{};xt.Class={UNIVERSAL:0,APPLICATION:64,CONTEXT_SPECIFIC:128,PRIVATE:192};xt.Type={NONE:0,BOOLEAN:1,INTEGER:2,BITSTRING:3,OCTETSTRING:4,NULL:5,OID:6,ODESC:7,EXTERNAL:8,REAL:9,ENUMERATED:10,EMBEDDED:11,UTF8:12,ROID:13,SEQUENCE:16,SET:17,PRINTABLESTRING:19,IA5STRING:22,UTCTIME:23,GENERALIZEDTIME:24,BMPSTRING:30};xt.create=function(e,t,n,r,i){if(dr.util.isArray(r)){for(var a=[],s=0;s<r.length;++s)r[s]!==void 0&&a.push(r[s]);r=a}var o={tagClass:e,type:t,constructed:n,composed:n||dr.util.isArray(r),value:r};return i&&"bitStringContents"in i&&(o.bitStringContents=i.bitStringContents,o.original=xt.copy(o)),o};xt.copy=function(e,t){var n;if(dr.util.isArray(e)){n=[];for(var r=0;r<e.length;++r)n.push(xt.copy(e[r],t));return n}return typeof e=="string"?e:(n={tagClass:e.tagClass,type:e.type,constructed:e.constructed,composed:e.composed,value:xt.copy(e.value,t)},t&&!t.excludeBitStringContents&&(n.bitStringContents=e.bitStringContents),n)};xt.equals=function(e,t,n){if(dr.util.isArray(e)){if(!dr.util.isArray(t)||e.length!==t.length)return!1;for(var r=0;r<e.length;++r)if(!xt.equals(e[r],t[r]))return!1;return!0}if(typeof e!=typeof t)return!1;if(typeof e=="string")return e===t;var i=e.tagClass===t.tagClass&&e.type===t.type&&e.constructed===t.constructed&&e.composed===t.composed&&xt.equals(e.value,t.value);return n&&n.includeBitStringContents&&(i=i&&e.bitStringContents===t.bitStringContents),i};xt.getBerValueLength=function(e){var t=e.getByte();if(t!==128){var n,r=t&128;return r?n=e.getInt((t&127)<<3):n=t,n}};function Xl(e,t,n){if(n>t){var r=new Error("Too few bytes to parse DER.");throw r.available=e.length(),r.remaining=t,r.requested=n,r}}var rk=function(e,t){var n=e.getByte();if(t--,n!==128){var r,i=n&128;if(!i)r=n;else{var a=n&127;Xl(e,t,a),r=e.getInt(a<<3)}if(r<0)throw new Error("Negative length: "+r);return r}};xt.fromDer=function(e,t){t===void 0&&(t={strict:!0,parseAllBytes:!0,decodeBitStrings:!0}),typeof t=="boolean"&&(t={strict:t,parseAllBytes:!0,decodeBitStrings:!0}),"strict"in t||(t.strict=!0),"parseAllBytes"in t||(t.parseAllBytes=!0),"decodeBitStrings"in t||(t.decodeBitStrings=!0),typeof e=="string"&&(e=dr.util.createBuffer(e));var n=e.length(),r=xf(e,e.length(),0,t);if(t.parseAllBytes&&e.length()!==0){var i=new Error("Unparsed DER bytes remain after ASN.1 parsing.");throw i.byteCount=n,i.remaining=e.length(),i}return r};function xf(e,t,n,r){var i;Xl(e,t,2);var a=e.getByte();t--;var s=a&192,o=a&31;i=e.length();var l=rk(e,t);if(t-=i-e.length(),l!==void 0&&l>t){if(r.strict){var c=new Error("Too few bytes to read ASN.1 value.");throw c.available=e.length(),c.remaining=t,c.requested=l,c}l=t}var h,p,E=(a&32)===32;if(E)if(h=[],l===void 0)for(;;){if(Xl(e,t,2),e.bytes(2)===String.fromCharCode(0,0)){e.getBytes(2),t-=2;break}i=e.length(),h.push(xf(e,t,n+1,r)),t-=i-e.length()}else for(;l>0;)i=e.length(),h.push(xf(e,l,n+1,r)),t-=i-e.length(),l-=i-e.length();if(h===void 0&&s===xt.Class.UNIVERSAL&&o===xt.Type.BITSTRING&&(p=e.bytes(l)),h===void 0&&r.decodeBitStrings&&s===xt.Class.UNIVERSAL&&o===xt.Type.BITSTRING&&l>1){var b=e.read,C=t,N=0;if(o===xt.Type.BITSTRING&&(Xl(e,t,1),N=e.getByte(),t--),N===0)try{i=e.length();var w={strict:!0,decodeBitStrings:!0},I=xf(e,t,n+1,w),S=i-e.length();t-=S,o==xt.Type.BITSTRING&&S++;var _=I.tagClass;S===l&&(_===xt.Class.UNIVERSAL||_===xt.Class.CONTEXT_SPECIFIC)&&(h=[I])}catch{}h===void 0&&(e.read=b,t=C)}if(h===void 0){if(l===void 0){if(r.strict)throw new Error("Non-constructed ASN.1 object of indefinite length.");l=t}if(o===xt.Type.BMPSTRING)for(h="";l>0;l-=2)Xl(e,t,2),h+=String.fromCharCode(e.getInt16()),t-=2;else h=e.getBytes(l),t-=l}var P=p===void 0?null:{bitStringContents:p};return xt.create(s,o,E,h,P)}xt.toDer=function(e){var t=dr.util.createBuffer(),n=e.tagClass|e.type,r=dr.util.createBuffer(),i=!1;if("bitStringContents"in e&&(i=!0,e.original&&(i=xt.equals(e,e.original))),i)r.putBytes(e.bitStringContents);else if(e.composed){e.constructed?n|=32:r.putByte(0);for(var a=0;a<e.value.length;++a)e.value[a]!==void 0&&r.putBuffer(xt.toDer(e.value[a]))}else if(e.type===xt.Type.BMPSTRING)for(var a=0;a<e.value.length;++a)r.putInt16(e.value.charCodeAt(a));else e.type===xt.Type.INTEGER&&e.value.length>1&&(e.value.charCodeAt(0)===0&&!(e.value.charCodeAt(1)&128)||e.value.charCodeAt(0)===255&&(e.value.charCodeAt(1)&128)===128)?r.putBytes(e.value.substr(1)):r.putBytes(e.value);if(t.putByte(n),r.length()<=127)t.putByte(r.length()&127);else{var s=r.length(),o="";do o+=String.fromCharCode(s&255),s=s>>>8;while(s>0);t.putByte(o.length|128);for(var a=o.length-1;a>=0;--a)t.putByte(o.charCodeAt(a))}return t.putBuffer(r),t};xt.oidToDer=function(e){var t=e.split("."),n=dr.util.createBuffer();n.putByte(40*parseInt(t[0],10)+parseInt(t[1],10));for(var r,i,a,s,o=2;o<t.length;++o){r=!0,i=[],a=parseInt(t[o],10);do s=a&127,a=a>>>7,r||(s|=128),i.push(s),r=!1;while(a>0);for(var l=i.length-1;l>=0;--l)n.putByte(i[l])}return n};xt.derToOid=function(e){var t;typeof e=="string"&&(e=dr.util.createBuffer(e));var n=e.getByte();t=Math.floor(n/40)+"."+n%40;for(var r=0;e.length()>0;)n=e.getByte(),r=r<<7,n&128?r+=n&127:(t+="."+(r+n),r=0);return t};xt.utcTimeToDate=function(e){var t=new Date,n=parseInt(e.substr(0,2),10);n=n>=50?1900+n:2e3+n;var r=parseInt(e.substr(2,2),10)-1,i=parseInt(e.substr(4,2),10),a=parseInt(e.substr(6,2),10),s=parseInt(e.substr(8,2),10),o=0;if(e.length>11){var l=e.charAt(10),c=10;l!=="+"&&l!=="-"&&(o=parseInt(e.substr(10,2),10),c+=2)}if(t.setUTCFullYear(n,r,i),t.setUTCHours(a,s,o,0),c&&(l=e.charAt(c),l==="+"||l==="-")){var h=parseInt(e.substr(c+1,2),10),p=parseInt(e.substr(c+4,2),10),E=h*60+p;E*=6e4,l==="+"?t.setTime(+t-E):t.setTime(+t+E)}return t};xt.generalizedTimeToDate=function(e){var t=new Date,n=parseInt(e.substr(0,4),10),r=parseInt(e.substr(4,2),10)-1,i=parseInt(e.substr(6,2),10),a=parseInt(e.substr(8,2),10),s=parseInt(e.substr(10,2),10),o=parseInt(e.substr(12,2),10),l=0,c=0,h=!1;e.charAt(e.length-1)==="Z"&&(h=!0);var p=e.length-5,E=e.charAt(p);if(E==="+"||E==="-"){var b=parseInt(e.substr(p+1,2),10),C=parseInt(e.substr(p+4,2),10);c=b*60+C,c*=6e4,E==="+"&&(c*=-1),h=!0}return e.charAt(14)==="."&&(l=parseFloat(e.substr(14),10)*1e3),h?(t.setUTCFullYear(n,r,i),t.setUTCHours(a,s,o,l),t.setTime(+t+c)):(t.setFullYear(n,r,i),t.setHours(a,s,o,l)),t};xt.dateToUtcTime=function(e){if(typeof e=="string")return e;var t="",n=[];n.push((""+e.getUTCFullYear()).substr(2)),n.push(""+(e.getUTCMonth()+1)),n.push(""+e.getUTCDate()),n.push(""+e.getUTCHours()),n.push(""+e.getUTCMinutes()),n.push(""+e.getUTCSeconds());for(var r=0;r<n.length;++r)n[r].length<2&&(t+="0"),t+=n[r];return t+="Z",t};xt.dateToGeneralizedTime=function(e){if(typeof e=="string")return e;var t="",n=[];n.push(""+e.getUTCFullYear()),n.push(""+(e.getUTCMonth()+1)),n.push(""+e.getUTCDate()),n.push(""+e.getUTCHours()),n.push(""+e.getUTCMinutes()),n.push(""+e.getUTCSeconds());for(var r=0;r<n.length;++r)n[r].length<2&&(t+="0"),t+=n[r];return t+="Z",t};xt.integerToDer=function(e){var t=dr.util.createBuffer();if(e>=-128&&e<128)return t.putSignedInt(e,8);if(e>=-32768&&e<32768)return t.putSignedInt(e,16);if(e>=-8388608&&e<8388608)return t.putSignedInt(e,24);if(e>=-2147483648&&e<2147483648)return t.putSignedInt(e,32);var n=new Error("Integer too large; max is 32-bits.");throw n.integer=e,n};xt.derToInteger=function(e){typeof e=="string"&&(e=dr.util.createBuffer(e));var t=e.length()*8;if(t>32)throw new Error("Integer too large; max is 32-bits.");return e.getSignedInt(t)};xt.validate=function(e,t,n,r){var i=!1;if((e.tagClass===t.tagClass||typeof t.tagClass>"u")&&(e.type===t.type||typeof t.type>"u"))if(e.constructed===t.constructed||typeof t.constructed>"u"){if(i=!0,t.value&&dr.util.isArray(t.value))for(var a=0,s=0;i&&s<t.value.length;++s)i=t.value[s].optional||!1,e.value[a]&&(i=xt.validate(e.value[a],t.value[s],n,r),i?++a:t.value[s].optional&&(i=!0)),!i&&r&&r.push("["+t.name+'] Tag class "'+t.tagClass+'", type "'+t.type+'" expected value length "'+t.value.length+'", got "'+e.value.length+'"');if(i&&n&&(t.capture&&(n[t.capture]=e.value),t.captureAsn1&&(n[t.captureAsn1]=e),t.captureBitStringContents&&"bitStringContents"in e&&(n[t.captureBitStringContents]=e.bitStringContents),t.captureBitStringValue&&"bitStringContents"in e)){var o;if(e.bitStringContents.length<2)n[t.captureBitStringValue]="";else{var l=e.bitStringContents.charCodeAt(0);if(l!==0)throw new Error("captureBitStringValue only supported for zero unused bits");n[t.captureBitStringValue]=e.bitStringContents.slice(1)}}}else r&&r.push("["+t.name+'] Expected constructed "'+t.constructed+'", got "'+e.constructed+'"');else r&&(e.tagClass!==t.tagClass&&r.push("["+t.name+'] Expected tag class "'+t.tagClass+'", got "'+e.tagClass+'"'),e.type!==t.type&&r.push("["+t.name+'] Expected type "'+t.type+'", got "'+e.type+'"'));return i};var Z0=/[^\\u0000-\\u00ff]/;xt.prettyPrint=function(e,t,n){var r="";t=t||0,n=n||2,t>0&&(r+=`
`);for(var i="",a=0;a<t*n;++a)i+=" ";switch(r+=i+"Tag: ",e.tagClass){case xt.Class.UNIVERSAL:r+="Universal:";break;case xt.Class.APPLICATION:r+="Application:";break;case xt.Class.CONTEXT_SPECIFIC:r+="Context-Specific:";break;case xt.Class.PRIVATE:r+="Private:";break}if(e.tagClass===xt.Class.UNIVERSAL)switch(r+=e.type,e.type){case xt.Type.NONE:r+=" (None)";break;case xt.Type.BOOLEAN:r+=" (Boolean)";break;case xt.Type.INTEGER:r+=" (Integer)";break;case xt.Type.BITSTRING:r+=" (Bit string)";break;case xt.Type.OCTETSTRING:r+=" (Octet string)";break;case xt.Type.NULL:r+=" (Null)";break;case xt.Type.OID:r+=" (Object Identifier)";break;case xt.Type.ODESC:r+=" (Object Descriptor)";break;case xt.Type.EXTERNAL:r+=" (External or Instance of)";break;case xt.Type.REAL:r+=" (Real)";break;case xt.Type.ENUMERATED:r+=" (Enumerated)";break;case xt.Type.EMBEDDED:r+=" (Embedded PDV)";break;case xt.Type.UTF8:r+=" (UTF8)";break;case xt.Type.ROID:r+=" (Relative Object Identifier)";break;case xt.Type.SEQUENCE:r+=" (Sequence)";break;case xt.Type.SET:r+=" (Set)";break;case xt.Type.PRINTABLESTRING:r+=" (Printable String)";break;case xt.Type.IA5String:r+=" (IA5String (ASCII))";break;case xt.Type.UTCTIME:r+=" (UTC time)";break;case xt.Type.GENERALIZEDTIME:r+=" (Generalized time)";break;case xt.Type.BMPSTRING:r+=" (BMP String)";break}else r+=e.type;if(r+=`
`,r+=i+"Constructed: "+e.constructed+`
`,e.composed){for(var s=0,o="",a=0;a<e.value.length;++a)e.value[a]!==void 0&&(s+=1,o+=xt.prettyPrint(e.value[a],t+1,n),a+1<e.value.length&&(o+=","));r+=i+"Sub values: "+s+o}else{if(r+=i+"Value: ",e.type===xt.Type.OID){var l=xt.derToOid(e.value);r+=l,dr.pki&&dr.pki.oids&&l in dr.pki.oids&&(r+=" ("+dr.pki.oids[l]+") ")}if(e.type===xt.Type.INTEGER)try{r+=xt.derToInteger(e.value)}catch{r+="0x"+dr.util.bytesToHex(e.value)}else if(e.type===xt.Type.BITSTRING){if(e.value.length>1?r+="0x"+dr.util.bytesToHex(e.value.slice(1)):r+="(none)",e.value.length>0){var c=e.value.charCodeAt(0);c==1?r+=" (1 unused bit shown)":c>1&&(r+=" ("+c+" unused bits shown)")}}else if(e.type===xt.Type.OCTETSTRING)Z0.test(e.value)||(r+="("+e.value+") "),r+="0x"+dr.util.bytesToHex(e.value);else if(e.type===xt.Type.UTF8)try{r+=dr.util.decodeUtf8(e.value)}catch(h){if(h.message==="URI malformed")r+="0x"+dr.util.bytesToHex(e.value)+" (malformed UTF8)";else throw h}else e.type===xt.Type.PRINTABLESTRING||e.type===xt.Type.IA5String?r+=e.value:Z0.test(e.value)?r+="0x"+dr.util.bytesToHex(e.value):e.value.length===0?r+="[null]":r+=e.value}return r}});var Es=$e((u6,Y0)=>{var Ef=hn();Y0.exports=Ef.md=Ef.md||{};Ef.md.algorithms=Ef.md.algorithms||{}});var Zu=$e((l6,Q0)=>{var Js=hn();Es();Bn();var ik=Q0.exports=Js.hmac=Js.hmac||{};ik.create=function(){var e=null,t=null,n=null,r=null,i={};return i.start=function(a,s){if(a!==null)if(typeof a=="string")if(a=a.toLowerCase(),a in Js.md.algorithms)t=Js.md.algorithms[a].create();else throw new Error('Unknown hash algorithm "'+a+'"');else t=a;if(s===null)s=e;else{if(typeof s=="string")s=Js.util.createBuffer(s);else if(Js.util.isArray(s)){var o=s;s=Js.util.createBuffer();for(var l=0;l<o.length;++l)s.putByte(o[l])}var c=s.length();c>t.blockLength&&(t.start(),t.update(s.bytes()),s=t.digest()),n=Js.util.createBuffer(),r=Js.util.createBuffer(),c=s.length();for(var l=0;l<c;++l){var o=s.at(l);n.putByte(54^o),r.putByte(92^o)}if(c<t.blockLength)for(var o=t.blockLength-c,l=0;l<o;++l)n.putByte(54),r.putByte(92);e=s,n=n.bytes(),r=r.bytes()}t.start(),t.update(n)},i.update=function(a){t.update(a)},i.getMac=function(){var a=t.digest().bytes();return t.start(),t.update(r),t.update(a),t.digest()},i.digest=i.getMac,i}});var Sf=$e((c6,ny)=>{var Cs=hn();Es();Bn();var ey=ny.exports=Cs.md5=Cs.md5||{};Cs.md.md5=Cs.md.algorithms.md5=ey;ey.create=function(){ty||ak();var e=null,t=Cs.util.createBuffer(),n=new Array(16),r={algorithm:"md5",blockLength:64,digestLength:16,messageLength:0,fullMessageLength:null,messageLengthSize:8};return r.start=function(){r.messageLength=0,r.fullMessageLength=r.messageLength64=[];for(var i=r.messageLengthSize/4,a=0;a<i;++a)r.fullMessageLength.push(0);return t=Cs.util.createBuffer(),e={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878},r},r.start(),r.update=function(i,a){a==="utf8"&&(i=Cs.util.encodeUtf8(i));var s=i.length;r.messageLength+=s,s=[s/4294967296>>>0,s>>>0];for(var o=r.fullMessageLength.length-1;o>=0;--o)r.fullMessageLength[o]+=s[1],s[1]=s[0]+(r.fullMessageLength[o]/4294967296>>>0),r.fullMessageLength[o]=r.fullMessageLength[o]>>>0,s[0]=s[1]/4294967296>>>0;return t.putBytes(i),J0(e,n,t),(t.read>2048||t.length()===0)&&t.compact(),r},r.digest=function(){var i=Cs.util.createBuffer();i.putBytes(t.bytes());var a=r.fullMessageLength[r.fullMessageLength.length-1]+r.messageLengthSize,s=a&r.blockLength-1;i.putBytes(Od.substr(0,r.blockLength-s));for(var o,l=0,c=r.fullMessageLength.length-1;c>=0;--c)o=r.fullMessageLength[c]*8+l,l=o/4294967296>>>0,i.putInt32Le(o>>>0);var h={h0:e.h0,h1:e.h1,h2:e.h2,h3:e.h3};J0(h,n,i);var p=Cs.util.createBuffer();return p.putInt32Le(h.h0),p.putInt32Le(h.h1),p.putInt32Le(h.h2),p.putInt32Le(h.h3),p},r};var Od=null,Cf=null,Yl=null,Xu=null,ty=!1;function ak(){Od=String.fromCharCode(128),Od+=Cs.util.fillString(String.fromCharCode(0),64),Cf=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,1,6,11,0,5,10,15,4,9,14,3,8,13,2,7,12,5,8,11,14,1,4,7,10,13,0,3,6,9,12,15,2,0,7,14,5,12,3,10,1,8,15,6,13,4,11,2,9],Yl=[7,12,17,22,7,12,17,22,7,12,17,22,7,12,17,22,5,9,14,20,5,9,14,20,5,9,14,20,5,9,14,20,4,11,16,23,4,11,16,23,4,11,16,23,4,11,16,23,6,10,15,21,6,10,15,21,6,10,15,21,6,10,15,21],Xu=new Array(64);for(var e=0;e<64;++e)Xu[e]=Math.floor(Math.abs(Math.sin(e+1))*4294967296);ty=!0}function J0(e,t,n){for(var r,i,a,s,o,l,c,h,p=n.length();p>=64;){for(i=e.h0,a=e.h1,s=e.h2,o=e.h3,h=0;h<16;++h)t[h]=n.getInt32Le(),l=o^a&(s^o),r=i+l+Xu[h]+t[h],c=Yl[h],i=o,o=s,s=a,a+=r<<c|r>>>32-c;for(;h<32;++h)l=s^o&(a^s),r=i+l+Xu[h]+t[Cf[h]],c=Yl[h],i=o,o=s,s=a,a+=r<<c|r>>>32-c;for(;h<48;++h)l=a^s^o,r=i+l+Xu[h]+t[Cf[h]],c=Yl[h],i=o,o=s,s=a,a+=r<<c|r>>>32-c;for(;h<64;++h)l=s^(a|~o),r=i+l+Xu[h]+t[Cf[h]],c=Yl[h],i=o,o=s,s=a,a+=r<<c|r>>>32-c;e.h0=e.h0+i|0,e.h1=e.h1+a|0,e.h2=e.h2+s|0,e.h3=e.h3+o|0,p-=64}}});var lu=$e((f6,iy)=>{var Lf=hn();Bn();var ry=iy.exports=Lf.pem=Lf.pem||{};ry.encode=function(e,t){t=t||{};var n="-----BEGIN "+e.type+`-----\r
`,r;if(e.procType&&(r={name:"Proc-Type",values:[String(e.procType.version),e.procType.type]},n+=Tf(r)),e.contentDomain&&(r={name:"Content-Domain",values:[e.contentDomain]},n+=Tf(r)),e.dekInfo&&(r={name:"DEK-Info",values:[e.dekInfo.algorithm]},e.dekInfo.parameters&&r.values.push(e.dekInfo.parameters),n+=Tf(r)),e.headers)for(var i=0;i<e.headers.length;++i)n+=Tf(e.headers[i]);return e.procType&&(n+=`\r
`),n+=Lf.util.encode64(e.body,t.maxline||64)+`\r
`,n+="-----END "+e.type+`-----\r
`,n};ry.decode=function(e){for(var t=[],n=/\s*-----BEGIN ([A-Z0-9- ]+)-----\r?\n?([\x21-\x7e\s]+?(?:\r?\n\r?\n))?([:A-Za-z0-9+\/=\s]+?)-----END \1-----/g,r=/([\x21-\x7e]+):\s*([\x21-\x7e\s^:]+)/,i=/\r?\n/,a;a=n.exec(e),!!a;){var s=a[1];s==="NEW CERTIFICATE REQUEST"&&(s="CERTIFICATE REQUEST");var o={type:s,procType:null,contentDomain:null,dekInfo:null,headers:[],body:Lf.util.decode64(a[3])};if(t.push(o),!!a[2]){for(var l=a[2].split(i),c=0;a&&c<l.length;){for(var h=l[c].replace(/\s+$/,""),p=c+1;p<l.length;++p){var E=l[p];if(!/\s/.test(E[0]))break;h+=E,c=p}if(a=h.match(r),a){for(var b={name:a[1],values:[]},C=a[2].split(","),N=0;N<C.length;++N)b.values.push(sk(C[N]));if(o.procType)if(!o.contentDomain&&b.name==="Content-Domain")o.contentDomain=C[0]||"";else if(!o.dekInfo&&b.name==="DEK-Info"){if(b.values.length===0)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must have at least one subfield.');o.dekInfo={algorithm:C[0],parameters:C[1]||null}}else o.headers.push(b);else{if(b.name!=="Proc-Type")throw new Error('Invalid PEM formatted message. The first encapsulated header must be "Proc-Type".');if(b.values.length!==2)throw new Error('Invalid PEM formatted message. The "Proc-Type" header must have two subfields.');o.procType={version:C[0],type:C[1]}}}++c}if(o.procType==="ENCRYPTED"&&!o.dekInfo)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must be present if "Proc-Type" is "ENCRYPTED".')}}if(t.length===0)throw new Error("Invalid PEM formatted message.");return t};function Tf(e){for(var t=e.name+": ",n=[],r=function(l,c){return" "+c},i=0;i<e.values.length;++i)n.push(e.values[i].replace(/^(\S+\r\n)/,r));t+=n.join(",")+`\r
`;for(var a=0,s=-1,i=0;i<t.length;++i,++a)if(a>65&&s!==-1){var o=t[s];o===","?(++s,t=t.substr(0,s)+`\r
 `+t.substr(s)):t=t.substr(0,s)+`\r
`+o+t.substr(s+1),a=i-s-1,s=-1,++i}else(t[i]===" "||t[i]==="	"||t[i]===",")&&(s=i);return t}function sk(e){return e.replace(/^\s+/,"")}});var Ql=$e((h6,sy)=>{var xr=hn();yf();Id();Bn();sy.exports=xr.des=xr.des||{};xr.des.startEncrypting=function(e,t,n,r){var i=kf({key:e,output:n,decrypt:!1,mode:r||(t===null?"ECB":"CBC")});return i.start(t),i};xr.des.createEncryptionCipher=function(e,t){return kf({key:e,output:null,decrypt:!1,mode:t})};xr.des.startDecrypting=function(e,t,n,r){var i=kf({key:e,output:n,decrypt:!0,mode:r||(t===null?"ECB":"CBC")});return i.start(t),i};xr.des.createDecryptionCipher=function(e,t){return kf({key:e,output:null,decrypt:!0,mode:t})};xr.des.Algorithm=function(e,t){var n=this;n.name=e,n.mode=new t({blockSize:8,cipher:{encrypt:function(r,i){return ay(n._keys,r,i,!1)},decrypt:function(r,i){return ay(n._keys,r,i,!0)}}}),n._init=!1};xr.des.Algorithm.prototype.initialize=function(e){if(!this._init){var t=xr.util.createBuffer(e.key);if(this.name.indexOf("3DES")===0&&t.length()!==24)throw new Error("Invalid Triple-DES key size: "+t.length()*8);this._keys=gk(t),this._init=!0}};Ss("DES-ECB",xr.cipher.modes.ecb);Ss("DES-CBC",xr.cipher.modes.cbc);Ss("DES-CFB",xr.cipher.modes.cfb);Ss("DES-OFB",xr.cipher.modes.ofb);Ss("DES-CTR",xr.cipher.modes.ctr);Ss("3DES-ECB",xr.cipher.modes.ecb);Ss("3DES-CBC",xr.cipher.modes.cbc);Ss("3DES-CFB",xr.cipher.modes.cfb);Ss("3DES-OFB",xr.cipher.modes.ofb);Ss("3DES-CTR",xr.cipher.modes.ctr);function Ss(e,t){var n=function(){return new xr.des.Algorithm(e,t)};xr.cipher.registerAlgorithm(e,n)}var ok=[16843776,0,65536,16843780,16842756,66564,4,65536,1024,16843776,16843780,1024,16778244,16842756,16777216,4,1028,16778240,16778240,66560,66560,16842752,16842752,16778244,65540,16777220,16777220,65540,0,1028,66564,16777216,65536,16843780,4,16842752,16843776,16777216,16777216,1024,16842756,65536,66560,16777220,1024,4,16778244,66564,16843780,65540,16842752,16778244,16777220,1028,66564,16843776,1028,16778240,16778240,0,65540,66560,0,16842756],uk=[-2146402272,-2147450880,32768,1081376,1048576,32,-2146435040,-2147450848,-2147483616,-2146402272,-2146402304,-2147483648,-2147450880,1048576,32,-2146435040,1081344,1048608,-2147450848,0,-2147483648,32768,1081376,-2146435072,1048608,-2147483616,0,1081344,32800,-2146402304,-2146435072,32800,0,1081376,-2146435040,1048576,-2147450848,-2146435072,-2146402304,32768,-2146435072,-2147450880,32,-2146402272,1081376,32,32768,-2147483648,32800,-2146402304,1048576,-2147483616,1048608,-2147450848,-2147483616,1048608,1081344,0,-2147450880,32800,-2147483648,-2146435040,-2146402272,1081344],lk=[520,134349312,0,134348808,134218240,0,131592,134218240,131080,134217736,134217736,131072,134349320,131080,134348800,520,134217728,8,134349312,512,131584,134348800,134348808,131592,134218248,131584,131072,134218248,8,134349320,512,134217728,134349312,134217728,131080,520,131072,134349312,134218240,0,512,131080,134349320,134218240,134217736,512,0,134348808,134218248,131072,134217728,134349320,8,131592,131584,134217736,134348800,134218248,520,134348800,131592,8,134348808,131584],ck=[8396801,8321,8321,128,8396928,8388737,8388609,8193,0,8396800,8396800,8396929,129,0,8388736,8388609,1,8192,8388608,8396801,128,8388608,8193,8320,8388737,1,8320,8388736,8192,8396928,8396929,129,8388736,8388609,8396800,8396929,129,0,0,8396800,8320,8388736,8388737,1,8396801,8321,8321,128,8396929,129,1,8192,8388609,8193,8396928,8388737,8193,8320,8388608,8396801,128,8388608,8192,8396928],fk=[256,34078976,34078720,1107296512,524288,256,1073741824,34078720,1074266368,524288,33554688,1074266368,1107296512,1107820544,524544,1073741824,33554432,1074266112,1074266112,0,1073742080,1107820800,1107820800,33554688,1107820544,1073742080,0,1107296256,34078976,33554432,1107296256,524544,524288,1107296512,256,33554432,1073741824,34078720,1107296512,1074266368,33554688,1073741824,1107820544,34078976,1074266368,256,33554432,1107820544,1107820800,524544,1107296256,1107820800,34078720,0,1074266112,1107296256,524544,33554688,1073742080,524288,0,1074266112,34078976,1073742080],hk=[536870928,541065216,16384,541081616,541065216,16,541081616,4194304,536887296,4210704,4194304,536870928,4194320,536887296,536870912,16400,0,4194320,536887312,16384,4210688,536887312,16,541065232,541065232,0,4210704,541081600,16400,4210688,541081600,536870912,536887296,16,541065232,4210688,541081616,4194304,16400,536870928,4194304,536887296,536870912,16400,536870928,541081616,4210688,541065216,4210704,541081600,0,541065232,16,16384,541065216,4210704,16384,4194320,536887312,0,541081600,536870912,4194320,536887312],dk=[2097152,69206018,67110914,0,2048,67110914,2099202,69208064,69208066,2097152,0,67108866,2,67108864,69206018,2050,67110912,2099202,2097154,67110912,67108866,69206016,69208064,2097154,69206016,2048,2050,69208066,2099200,2,67108864,2099200,67108864,2099200,2097152,67110914,67110914,69206018,69206018,2,2097154,67108864,67110912,2097152,69208064,2050,2099202,69208064,2050,67108866,69208066,69206016,2099200,0,2,69208066,0,2099202,69206016,2048,67108866,67110912,2048,2097154],pk=[268439616,4096,262144,268701760,268435456,268439616,64,268435456,262208,268697600,268701760,266240,268701696,266304,4096,64,268697600,268435520,268439552,4160,266240,262208,268697664,268701696,4160,0,0,268697664,268435520,268439552,266304,262144,266304,262144,268701696,4096,64,268697664,4096,266304,268439552,64,268435520,268697600,268697664,268435456,262144,268439616,0,268701760,262208,268435520,268697600,268439552,268439616,0,268701760,266240,266240,4160,4160,262208,268435456,268701696];function gk(e){for(var t=[0,4,536870912,536870916,65536,65540,536936448,536936452,512,516,536871424,536871428,66048,66052,536936960,536936964],n=[0,1,1048576,1048577,67108864,67108865,68157440,68157441,256,257,1048832,1048833,67109120,67109121,68157696,68157697],r=[0,8,2048,2056,16777216,16777224,16779264,16779272,0,8,2048,2056,16777216,16777224,16779264,16779272],i=[0,2097152,134217728,136314880,8192,2105344,134225920,136323072,131072,2228224,134348800,136445952,139264,2236416,134356992,136454144],a=[0,262144,16,262160,0,262144,16,262160,4096,266240,4112,266256,4096,266240,4112,266256],s=[0,1024,32,1056,0,1024,32,1056,33554432,33555456,33554464,33555488,33554432,33555456,33554464,33555488],o=[0,268435456,524288,268959744,2,268435458,524290,268959746,0,268435456,524288,268959744,2,268435458,524290,268959746],l=[0,65536,2048,67584,536870912,536936448,536872960,536938496,131072,196608,133120,198656,537001984,537067520,537004032,537069568],c=[0,262144,0,262144,2,262146,2,262146,33554432,33816576,33554432,33816576,33554434,33816578,33554434,33816578],h=[0,268435456,8,268435464,0,268435456,8,268435464,1024,268436480,1032,268436488,1024,268436480,1032,268436488],p=[0,32,0,32,1048576,1048608,1048576,1048608,8192,8224,8192,8224,1056768,1056800,1056768,1056800],E=[0,16777216,512,16777728,2097152,18874368,2097664,18874880,67108864,83886080,67109376,83886592,69206016,85983232,69206528,85983744],b=[0,4096,134217728,134221824,524288,528384,134742016,134746112,16,4112,134217744,134221840,524304,528400,134742032,134746128],C=[0,4,256,260,0,4,256,260,1,5,257,261,1,5,257,261],N=e.length()>8?3:1,w=[],I=[0,0,1,1,1,1,1,1,0,1,1,1,1,1,1,0],S=0,_,P=0;P<N;P++){var v=e.getInt32(),y=e.getInt32();_=(v>>>4^y)&252645135,y^=_,v^=_<<4,_=(y>>>-16^v)&65535,v^=_,y^=_<<-16,_=(v>>>2^y)&858993459,y^=_,v^=_<<2,_=(y>>>-16^v)&65535,v^=_,y^=_<<-16,_=(v>>>1^y)&1431655765,y^=_,v^=_<<1,_=(y>>>8^v)&16711935,v^=_,y^=_<<8,_=(v>>>1^y)&1431655765,y^=_,v^=_<<1,_=v<<8|y>>>20&240,v=y<<24|y<<8&16711680|y>>>8&65280|y>>>24&240,y=_;for(var $=0;$<I.length;++$){I[$]?(v=v<<2|v>>>26,y=y<<2|y>>>26):(v=v<<1|v>>>27,y=y<<1|y>>>27),v&=-15,y&=-15;var Z=t[v>>>28]|n[v>>>24&15]|r[v>>>20&15]|i[v>>>16&15]|a[v>>>12&15]|s[v>>>8&15]|o[v>>>4&15],ce=l[y>>>28]|c[y>>>24&15]|h[y>>>20&15]|p[y>>>16&15]|E[y>>>12&15]|b[y>>>8&15]|C[y>>>4&15];_=(ce>>>16^Z)&65535,w[S++]=Z^_,w[S++]=ce^_<<16}}return w}function ay(e,t,n,r){var i=e.length===32?3:9,a;i===3?a=r?[30,-2,-2]:[0,32,2]:a=r?[94,62,-2,32,64,2,30,-2,-2]:[0,32,2,62,30,-2,64,96,2];var s,o=t[0],l=t[1];s=(o>>>4^l)&252645135,l^=s,o^=s<<4,s=(o>>>16^l)&65535,l^=s,o^=s<<16,s=(l>>>2^o)&858993459,o^=s,l^=s<<2,s=(l>>>8^o)&16711935,o^=s,l^=s<<8,s=(o>>>1^l)&1431655765,l^=s,o^=s<<1,o=o<<1|o>>>31,l=l<<1|l>>>31;for(var c=0;c<i;c+=3){for(var h=a[c+1],p=a[c+2],E=a[c];E!=h;E+=p){var b=l^e[E],C=(l>>>4|l<<28)^e[E+1];s=o,o=l,l=s^(uk[b>>>24&63]|ck[b>>>16&63]|hk[b>>>8&63]|pk[b&63]|ok[C>>>24&63]|lk[C>>>16&63]|fk[C>>>8&63]|dk[C&63])}s=o,o=l,l=s}o=o>>>1|o<<31,l=l>>>1|l<<31,s=(o>>>1^l)&1431655765,l^=s,o^=s<<1,s=(l>>>8^o)&16711935,o^=s,l^=s<<8,s=(l>>>2^o)&858993459,o^=s,l^=s<<2,s=(o>>>16^l)&65535,l^=s,o^=s<<16,s=(o>>>4^l)&252645135,l^=s,o^=s<<4,n[0]=o,n[1]=l}function kf(e){e=e||{};var t=(e.mode||"CBC").toUpperCase(),n="DES-"+t,r;e.decrypt?r=xr.cipher.createDecipher(n,e.key):r=xr.cipher.createCipher(n,e.key);var i=r.start;return r.start=function(a,s){var o=null;s instanceof xr.util.ByteBuffer&&(o=s,s={}),s=s||{},s.output=o,s.iv=a,i.call(r,s)},r}});var Af=$e((d6,oy)=>{var Qi=hn();Zu();Es();Bn();var mk=Qi.pkcs5=Qi.pkcs5||{},eo;Qi.util.isNodejs&&!Qi.options.usePureJavaScript&&(eo=wr("crypto"));oy.exports=Qi.pbkdf2=mk.pbkdf2=function(e,t,n,r,i,a){if(typeof i=="function"&&(a=i,i=null),Qi.util.isNodejs&&!Qi.options.usePureJavaScript&&eo.pbkdf2&&(i===null||typeof i!="object")&&(eo.pbkdf2Sync.length>4||!i||i==="sha1"))return typeof i!="string"&&(i="sha1"),e=Buffer.from(e,"binary"),t=Buffer.from(t,"binary"),a?eo.pbkdf2Sync.length===4?eo.pbkdf2(e,t,n,r,function(_,P){if(_)return a(_);a(null,P.toString("binary"))}):eo.pbkdf2(e,t,n,r,i,function(_,P){if(_)return a(_);a(null,P.toString("binary"))}):eo.pbkdf2Sync.length===4?eo.pbkdf2Sync(e,t,n,r).toString("binary"):eo.pbkdf2Sync(e,t,n,r,i).toString("binary");if((typeof i>"u"||i===null)&&(i="sha1"),typeof i=="string"){if(!(i in Qi.md.algorithms))throw new Error("Unknown hash algorithm: "+i);i=Qi.md[i].create()}var s=i.digestLength;if(r>4294967295*s){var o=new Error("Derived key is too long.");if(a)return a(o);throw o}var l=Math.ceil(r/s),c=r-(l-1)*s,h=Qi.hmac.create();h.start(i,e);var p="",E,b,C;if(!a){for(var N=1;N<=l;++N){h.start(null,null),h.update(t),h.update(Qi.util.int32ToBytes(N)),E=C=h.digest().getBytes();for(var w=2;w<=n;++w)h.start(null,null),h.update(C),b=h.digest().getBytes(),E=Qi.util.xorBytes(E,b,s),C=b;p+=N<l?E:E.substr(0,c)}return p}var N=1,w;function I(){if(N>l)return a(null,p);h.start(null,null),h.update(t),h.update(Qi.util.int32ToBytes(N)),E=C=h.digest().getBytes(),w=2,S()}function S(){if(w<=n)return h.start(null,null),h.update(C),b=h.digest().getBytes(),E=Qi.util.xorBytes(E,b,s),C=b,++w,Qi.util.setImmediate(S);p+=N<l?E:E.substr(0,c),++N,I()}I()}});var Md=$e((p6,hy)=>{var Ts=hn();Es();Bn();var ly=hy.exports=Ts.sha256=Ts.sha256||{};Ts.md.sha256=Ts.md.algorithms.sha256=ly;ly.create=function(){cy||vk();var e=null,t=Ts.util.createBuffer(),n=new Array(64),r={algorithm:"sha256",blockLength:64,digestLength:32,messageLength:0,fullMessageLength:null,messageLengthSize:8};return r.start=function(){r.messageLength=0,r.fullMessageLength=r.messageLength64=[];for(var i=r.messageLengthSize/4,a=0;a<i;++a)r.fullMessageLength.push(0);return t=Ts.util.createBuffer(),e={h0:1779033703,h1:3144134277,h2:1013904242,h3:2773480762,h4:1359893119,h5:2600822924,h6:528734635,h7:1541459225},r},r.start(),r.update=function(i,a){a==="utf8"&&(i=Ts.util.encodeUtf8(i));var s=i.length;r.messageLength+=s,s=[s/4294967296>>>0,s>>>0];for(var o=r.fullMessageLength.length-1;o>=0;--o)r.fullMessageLength[o]+=s[1],s[1]=s[0]+(r.fullMessageLength[o]/4294967296>>>0),r.fullMessageLength[o]=r.fullMessageLength[o]>>>0,s[0]=s[1]/4294967296>>>0;return t.putBytes(i),uy(e,n,t),(t.read>2048||t.length()===0)&&t.compact(),r},r.digest=function(){var i=Ts.util.createBuffer();i.putBytes(t.bytes());var a=r.fullMessageLength[r.fullMessageLength.length-1]+r.messageLengthSize,s=a&r.blockLength-1;i.putBytes(Bd.substr(0,r.blockLength-s));for(var o,l,c=r.fullMessageLength[0]*8,h=0;h<r.fullMessageLength.length-1;++h)o=r.fullMessageLength[h+1]*8,l=o/4294967296>>>0,c+=l,i.putInt32(c>>>0),c=o>>>0;i.putInt32(c);var p={h0:e.h0,h1:e.h1,h2:e.h2,h3:e.h3,h4:e.h4,h5:e.h5,h6:e.h6,h7:e.h7};uy(p,n,i);var E=Ts.util.createBuffer();return E.putInt32(p.h0),E.putInt32(p.h1),E.putInt32(p.h2),E.putInt32(p.h3),E.putInt32(p.h4),E.putInt32(p.h5),E.putInt32(p.h6),E.putInt32(p.h7),E},r};var Bd=null,cy=!1,fy=null;function vk(){Bd=String.fromCharCode(128),Bd+=Ts.util.fillString(String.fromCharCode(0),64),fy=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],cy=!0}function uy(e,t,n){for(var r,i,a,s,o,l,c,h,p,E,b,C,N,w,I,S=n.length();S>=64;){for(c=0;c<16;++c)t[c]=n.getInt32();for(;c<64;++c)r=t[c-2],r=(r>>>17|r<<15)^(r>>>19|r<<13)^r>>>10,i=t[c-15],i=(i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3,t[c]=r+t[c-7]+i+t[c-16]|0;for(h=e.h0,p=e.h1,E=e.h2,b=e.h3,C=e.h4,N=e.h5,w=e.h6,I=e.h7,c=0;c<64;++c)s=(C>>>6|C<<26)^(C>>>11|C<<21)^(C>>>25|C<<7),o=w^C&(N^w),a=(h>>>2|h<<30)^(h>>>13|h<<19)^(h>>>22|h<<10),l=h&p|E&(h^p),r=I+s+o+fy[c]+t[c],i=a+l,I=w,w=N,N=C,C=b+r>>>0,b=E,E=p,p=h,h=r+i>>>0;e.h0=e.h0+h|0,e.h1=e.h1+p|0,e.h2=e.h2+E|0,e.h3=e.h3+b|0,e.h4=e.h4+C|0,e.h5=e.h5+N|0,e.h6=e.h6+w|0,e.h7=e.h7+I|0,S-=64}}});var Ud=$e((g6,dy)=>{var Ls=hn();Bn();var If=null;Ls.util.isNodejs&&!Ls.options.usePureJavaScript&&!process.versions["node-webkit"]&&(If=wr("crypto"));var yk=dy.exports=Ls.prng=Ls.prng||{};yk.create=function(e){for(var t={plugin:e,key:null,seed:null,time:null,reseeds:0,generated:0,keyBytes:""},n=e.md,r=new Array(32),i=0;i<32;++i)r[i]=n.create();t.pools=r,t.pool=0,t.generate=function(c,h){if(!h)return t.generateSync(c);var p=t.plugin.cipher,E=t.plugin.increment,b=t.plugin.formatKey,C=t.plugin.formatSeed,N=Ls.util.createBuffer();t.key=null,w();function w(I){if(I)return h(I);if(N.length()>=c)return h(null,N.getBytes(c));if(t.generated>1048575&&(t.key=null),t.key===null)return Ls.util.nextTick(function(){a(w)});var S=p(t.key,t.seed);t.generated+=S.length,N.putBytes(S),t.key=b(p(t.key,E(t.seed))),t.seed=C(p(t.key,t.seed)),Ls.util.setImmediate(w)}},t.generateSync=function(c){var h=t.plugin.cipher,p=t.plugin.increment,E=t.plugin.formatKey,b=t.plugin.formatSeed;t.key=null;for(var C=Ls.util.createBuffer();C.length()<c;){t.generated>1048575&&(t.key=null),t.key===null&&s();var N=h(t.key,t.seed);t.generated+=N.length,C.putBytes(N),t.key=E(h(t.key,p(t.seed))),t.seed=b(h(t.key,t.seed))}return C.getBytes(c)};function a(c){if(t.pools[0].messageLength>=32)return o(),c();var h=32-t.pools[0].messageLength<<5;t.seedFile(h,function(p,E){if(p)return c(p);t.collect(E),o(),c()})}function s(){if(t.pools[0].messageLength>=32)return o();var c=32-t.pools[0].messageLength<<5;t.collect(t.seedFileSync(c)),o()}function o(){t.reseeds=t.reseeds===4294967295?0:t.reseeds+1;var c=t.plugin.md.create();c.update(t.keyBytes);for(var h=1,p=0;p<32;++p)t.reseeds%h===0&&(c.update(t.pools[p].digest().getBytes()),t.pools[p].start()),h=h<<1;t.keyBytes=c.digest().getBytes(),c.start(),c.update(t.keyBytes);var E=c.digest().getBytes();t.key=t.plugin.formatKey(t.keyBytes),t.seed=t.plugin.formatSeed(E),t.generated=0}function l(c){var h=null,p=Ls.util.globalScope,E=p.crypto||p.msCrypto;E&&E.getRandomValues&&(h=function(v){return E.getRandomValues(v)});var b=Ls.util.createBuffer();if(h)for(;b.length()<c;){var C=Math.max(1,Math.min(c-b.length(),65536)/4),N=new Uint32Array(Math.floor(C));try{h(N);for(var w=0;w<N.length;++w)b.putInt32(N[w])}catch(v){if(!(typeof QuotaExceededError<"u"&&v instanceof QuotaExceededError))throw v}}if(b.length()<c)for(var I,S,_,P=Math.floor(Math.random()*65536);b.length()<c;){S=16807*(P&65535),I=16807*(P>>16),S+=(I&32767)<<16,S+=I>>15,S=(S&2147483647)+(S>>31),P=S&4294967295;for(var w=0;w<3;++w)_=P>>>(w<<3),_^=Math.floor(Math.random()*256),b.putByte(_&255)}return b.getBytes(c)}return If?(t.seedFile=function(c,h){If.randomBytes(c,function(p,E){if(p)return h(p);h(null,E.toString())})},t.seedFileSync=function(c){return If.randomBytes(c).toString()}):(t.seedFile=function(c,h){try{h(null,l(c))}catch(p){h(p)}},t.seedFileSync=l),t.collect=function(c){for(var h=c.length,p=0;p<h;++p)t.pools[t.pool].update(c.substr(p,1)),t.pool=t.pool===31?0:t.pool+1},t.collectInt=function(c,h){for(var p="",E=0;E<h;E+=8)p+=String.fromCharCode(c>>E&255);t.collect(p)},t.registerWorker=function(c){if(c===self)t.seedFile=function(p,E){function b(C){var N=C.data;N.forge&&N.forge.prng&&(self.removeEventListener("message",b),E(N.forge.prng.err,N.forge.prng.bytes))}self.addEventListener("message",b),self.postMessage({forge:{prng:{needed:p}}})};else{var h=function(p){var E=p.data;E.forge&&E.forge.prng&&t.seedFile(E.forge.prng.needed,function(b,C){c.postMessage({forge:{prng:{err:b,bytes:C}}})})};c.addEventListener("message",h)}},t}});var za=$e((m6,qd)=>{var vi=hn();ko();Md();Ud();Bn();(function(){if(vi.random&&vi.random.getBytes){qd.exports=vi.random;return}(function(e){var t={},n=new Array(4),r=vi.util.createBuffer();t.formatKey=function(p){var E=vi.util.createBuffer(p);return p=new Array(4),p[0]=E.getInt32(),p[1]=E.getInt32(),p[2]=E.getInt32(),p[3]=E.getInt32(),vi.aes._expandKey(p,!1)},t.formatSeed=function(p){var E=vi.util.createBuffer(p);return p=new Array(4),p[0]=E.getInt32(),p[1]=E.getInt32(),p[2]=E.getInt32(),p[3]=E.getInt32(),p},t.cipher=function(p,E){return vi.aes._updateBlock(p,E,n,!1),r.putInt32(n[0]),r.putInt32(n[1]),r.putInt32(n[2]),r.putInt32(n[3]),r.getBytes()},t.increment=function(p){return++p[3],p},t.md=vi.md.sha256;function i(){var p=vi.prng.create(t);return p.getBytes=function(E,b){return p.generate(E,b)},p.getBytesSync=function(E){return p.generate(E)},p}var a=i(),s=null,o=vi.util.globalScope,l=o.crypto||o.msCrypto;if(l&&l.getRandomValues&&(s=function(p){return l.getRandomValues(p)}),vi.options.usePureJavaScript||!vi.util.isNodejs&&!s){if(typeof window>"u"||window.document,a.collectInt(+new Date,32),typeof navigator<"u"){var c="";for(var h in navigator)try{typeof navigator[h]=="string"&&(c+=navigator[h])}catch{}a.collect(c),c=null}e&&(e().mousemove(function(p){a.collectInt(p.clientX,16),a.collectInt(p.clientY,16)}),e().keypress(function(p){a.collectInt(p.charCode,8)}))}if(!vi.random)vi.random=a;else for(var h in a)vi.random[h]=a[h];vi.random.createInstance=i,qd.exports=vi.random})(typeof jQuery<"u"?jQuery:null)})()});var Vd=$e((v6,my)=>{var ga=hn();Bn();var Fd=[217,120,249,196,25,221,181,237,40,233,253,121,74,160,216,157,198,126,55,131,43,118,83,142,98,76,100,136,68,139,251,162,23,154,89,245,135,179,79,19,97,69,109,141,9,129,125,50,189,143,64,235,134,183,123,11,240,149,33,34,92,107,78,130,84,214,101,147,206,96,178,28,115,86,192,20,167,140,241,220,18,117,202,31,59,190,228,209,66,61,212,48,163,60,182,38,111,191,14,218,70,105,7,87,39,242,29,155,188,148,67,3,248,17,199,246,144,239,62,231,6,195,213,47,200,102,30,215,8,232,234,222,128,82,238,247,132,170,114,172,53,77,106,42,150,26,210,113,90,21,73,116,75,159,208,94,4,24,164,236,194,224,65,110,15,81,203,204,36,145,175,80,161,244,112,57,153,124,58,133,35,184,180,122,252,2,54,91,37,85,151,49,45,93,250,152,227,138,146,174,5,223,41,16,103,108,186,201,211,0,230,207,225,158,168,44,99,22,1,63,88,226,137,169,13,56,52,27,171,51,255,176,187,72,12,95,185,177,205,46,197,243,219,71,229,165,156,119,10,166,32,104,254,127,193,173],py=[1,2,3,5],_k=function(e,t){return e<<t&65535|(e&65535)>>16-t},bk=function(e,t){return(e&65535)>>t|e<<16-t&65535};my.exports=ga.rc2=ga.rc2||{};ga.rc2.expandKey=function(e,t){typeof e=="string"&&(e=ga.util.createBuffer(e)),t=t||128;var n=e,r=e.length(),i=t,a=Math.ceil(i/8),s=255>>(i&7),o;for(o=r;o<128;o++)n.putByte(Fd[n.at(o-1)+n.at(o-r)&255]);for(n.setAt(128-a,Fd[n.at(128-a)&s]),o=127-a;o>=0;o--)n.setAt(o,Fd[n.at(o+1)^n.at(o+a)]);return n};var gy=function(e,t,n){var r=!1,i=null,a=null,s=null,o,l,c,h,p=[];for(e=ga.rc2.expandKey(e,t),c=0;c<64;c++)p.push(e.getInt16Le());n?(o=function(C){for(c=0;c<4;c++)C[c]+=p[h]+(C[(c+3)%4]&C[(c+2)%4])+(~C[(c+3)%4]&C[(c+1)%4]),C[c]=_k(C[c],py[c]),h++},l=function(C){for(c=0;c<4;c++)C[c]+=p[C[(c+3)%4]&63]}):(o=function(C){for(c=3;c>=0;c--)C[c]=bk(C[c],py[c]),C[c]-=p[h]+(C[(c+3)%4]&C[(c+2)%4])+(~C[(c+3)%4]&C[(c+1)%4]),h--},l=function(C){for(c=3;c>=0;c--)C[c]-=p[C[(c+3)%4]&63]});var E=function(C){var N=[];for(c=0;c<4;c++){var w=i.getInt16Le();s!==null&&(n?w^=s.getInt16Le():s.putInt16Le(w)),N.push(w&65535)}h=n?0:63;for(var I=0;I<C.length;I++)for(var S=0;S<C[I][0];S++)C[I][1](N);for(c=0;c<4;c++)s!==null&&(n?s.putInt16Le(N[c]):N[c]^=s.getInt16Le()),a.putInt16Le(N[c])},b=null;return b={start:function(C,N){C&&typeof C=="string"&&(C=ga.util.createBuffer(C)),r=!1,i=ga.util.createBuffer(),a=N||new ga.util.createBuffer,s=C,b.output=a},update:function(C){for(r||i.putBuffer(C);i.length()>=8;)E([[5,o],[1,l],[6,o],[1,l],[5,o]])},finish:function(C){var N=!0;if(n)if(C)N=C(8,i,!n);else{var w=i.length()===8?8:8-i.length();i.fillWithByte(w,w)}if(N&&(r=!0,b.update()),!n&&(N=i.length()===0,N))if(C)N=C(8,a,!n);else{var I=a.length(),S=a.at(I-1);S>I?N=!1:a.truncate(S)}return N}},b};ga.rc2.startEncrypting=function(e,t,n){var r=ga.rc2.createEncryptionCipher(e,128);return r.start(t,n),r};ga.rc2.createEncryptionCipher=function(e,t){return gy(e,t,!0)};ga.rc2.startDecrypting=function(e,t,n){var r=ga.rc2.createDecryptionCipher(e,128);return r.start(t,n),r};ga.rc2.createDecryptionCipher=function(e,t){return gy(e,t,!1)}});var ec=$e((y6,Cy)=>{var zd=hn();Cy.exports=zd.jsbn=zd.jsbn||{};var to,wk=0xdeadbeefcafe,vy=(wk&16777215)==15715070;function ot(e,t,n){this.data=[],e!=null&&(typeof e=="number"?this.fromNumber(e,t,n):t==null&&typeof e!="string"?this.fromString(e,256):this.fromString(e,t))}zd.jsbn.BigInteger=ot;function Mn(){return new ot(null)}function xk(e,t,n,r,i,a){for(;--a>=0;){var s=t*this.data[e++]+n.data[r]+i;i=Math.floor(s/67108864),n.data[r++]=s&67108863}return i}function Ek(e,t,n,r,i,a){for(var s=t&32767,o=t>>15;--a>=0;){var l=this.data[e]&32767,c=this.data[e++]>>15,h=o*l+c*s;l=s*l+((h&32767)<<15)+n.data[r]+(i&1073741823),i=(l>>>30)+(h>>>15)+o*c+(i>>>30),n.data[r++]=l&1073741823}return i}function yy(e,t,n,r,i,a){for(var s=t&16383,o=t>>14;--a>=0;){var l=this.data[e]&16383,c=this.data[e++]>>14,h=o*l+c*s;l=s*l+((h&16383)<<14)+n.data[r]+i,i=(l>>28)+(h>>14)+o*c,n.data[r++]=l&268435455}return i}typeof navigator>"u"?(ot.prototype.am=yy,to=28):vy&&navigator.appName=="Microsoft Internet Explorer"?(ot.prototype.am=Ek,to=30):vy&&navigator.appName!="Netscape"?(ot.prototype.am=xk,to=26):(ot.prototype.am=yy,to=28);ot.prototype.DB=to;ot.prototype.DM=(1<<to)-1;ot.prototype.DV=1<<to;var Hd=52;ot.prototype.FV=Math.pow(2,Hd);ot.prototype.F1=Hd-to;ot.prototype.F2=2*to-Hd;var Ck="0123456789abcdefghijklmnopqrstuvwxyz",Nf=new Array,Yu,Ha;Yu="0".charCodeAt(0);for(Ha=0;Ha<=9;++Ha)Nf[Yu++]=Ha;Yu="a".charCodeAt(0);for(Ha=10;Ha<36;++Ha)Nf[Yu++]=Ha;Yu="A".charCodeAt(0);for(Ha=10;Ha<36;++Ha)Nf[Yu++]=Ha;function _y(e){return Ck.charAt(e)}function by(e,t){var n=Nf[e.charCodeAt(t)];return n==null?-1:n}function Sk(e){for(var t=this.t-1;t>=0;--t)e.data[t]=this.data[t];e.t=this.t,e.s=this.s}function Tk(e){this.t=1,this.s=e<0?-1:0,e>0?this.data[0]=e:e<-1?this.data[0]=e+this.DV:this.t=0}function Io(e){var t=Mn();return t.fromInt(e),t}function Lk(e,t){var n;if(t==16)n=4;else if(t==8)n=3;else if(t==256)n=8;else if(t==2)n=1;else if(t==32)n=5;else if(t==4)n=2;else{this.fromRadix(e,t);return}this.t=0,this.s=0;for(var r=e.length,i=!1,a=0;--r>=0;){var s=n==8?e[r]&255:by(e,r);if(s<0){e.charAt(r)=="-"&&(i=!0);continue}i=!1,a==0?this.data[this.t++]=s:a+n>this.DB?(this.data[this.t-1]|=(s&(1<<this.DB-a)-1)<<a,this.data[this.t++]=s>>this.DB-a):this.data[this.t-1]|=s<<a,a+=n,a>=this.DB&&(a-=this.DB)}n==8&&e[0]&128&&(this.s=-1,a>0&&(this.data[this.t-1]|=(1<<this.DB-a)-1<<a)),this.clamp(),i&&ot.ZERO.subTo(this,this)}function kk(){for(var e=this.s&this.DM;this.t>0&&this.data[this.t-1]==e;)--this.t}function Ak(e){if(this.s<0)return"-"+this.negate().toString(e);var t;if(e==16)t=4;else if(e==8)t=3;else if(e==2)t=1;else if(e==32)t=5;else if(e==4)t=2;else return this.toRadix(e);var n=(1<<t)-1,r,i=!1,a="",s=this.t,o=this.DB-s*this.DB%t;if(s-- >0)for(o<this.DB&&(r=this.data[s]>>o)>0&&(i=!0,a=_y(r));s>=0;)o<t?(r=(this.data[s]&(1<<o)-1)<<t-o,r|=this.data[--s]>>(o+=this.DB-t)):(r=this.data[s]>>(o-=t)&n,o<=0&&(o+=this.DB,--s)),r>0&&(i=!0),i&&(a+=_y(r));return i?a:"0"}function Ik(){var e=Mn();return ot.ZERO.subTo(this,e),e}function Nk(){return this.s<0?this.negate():this}function Pk(e){var t=this.s-e.s;if(t!=0)return t;var n=this.t;if(t=n-e.t,t!=0)return this.s<0?-t:t;for(;--n>=0;)if((t=this.data[n]-e.data[n])!=0)return t;return 0}function Pf(e){var t=1,n;return(n=e>>>16)!=0&&(e=n,t+=16),(n=e>>8)!=0&&(e=n,t+=8),(n=e>>4)!=0&&(e=n,t+=4),(n=e>>2)!=0&&(e=n,t+=2),(n=e>>1)!=0&&(e=n,t+=1),t}function Dk(){return this.t<=0?0:this.DB*(this.t-1)+Pf(this.data[this.t-1]^this.s&this.DM)}function Rk(e,t){var n;for(n=this.t-1;n>=0;--n)t.data[n+e]=this.data[n];for(n=e-1;n>=0;--n)t.data[n]=0;t.t=this.t+e,t.s=this.s}function Ok(e,t){for(var n=e;n<this.t;++n)t.data[n-e]=this.data[n];t.t=Math.max(this.t-e,0),t.s=this.s}function Bk(e,t){var n=e%this.DB,r=this.DB-n,i=(1<<r)-1,a=Math.floor(e/this.DB),s=this.s<<n&this.DM,o;for(o=this.t-1;o>=0;--o)t.data[o+a+1]=this.data[o]>>r|s,s=(this.data[o]&i)<<n;for(o=a-1;o>=0;--o)t.data[o]=0;t.data[a]=s,t.t=this.t+a+1,t.s=this.s,t.clamp()}function Mk(e,t){t.s=this.s;var n=Math.floor(e/this.DB);if(n>=this.t){t.t=0;return}var r=e%this.DB,i=this.DB-r,a=(1<<r)-1;t.data[0]=this.data[n]>>r;for(var s=n+1;s<this.t;++s)t.data[s-n-1]|=(this.data[s]&a)<<i,t.data[s-n]=this.data[s]>>r;r>0&&(t.data[this.t-n-1]|=(this.s&a)<<i),t.t=this.t-n,t.clamp()}function Uk(e,t){for(var n=0,r=0,i=Math.min(e.t,this.t);n<i;)r+=this.data[n]-e.data[n],t.data[n++]=r&this.DM,r>>=this.DB;if(e.t<this.t){for(r-=e.s;n<this.t;)r+=this.data[n],t.data[n++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;n<e.t;)r-=e.data[n],t.data[n++]=r&this.DM,r>>=this.DB;r-=e.s}t.s=r<0?-1:0,r<-1?t.data[n++]=this.DV+r:r>0&&(t.data[n++]=r),t.t=n,t.clamp()}function qk(e,t){var n=this.abs(),r=e.abs(),i=n.t;for(t.t=i+r.t;--i>=0;)t.data[i]=0;for(i=0;i<r.t;++i)t.data[i+n.t]=n.am(0,r.data[i],t,i,0,n.t);t.s=0,t.clamp(),this.s!=e.s&&ot.ZERO.subTo(t,t)}function Fk(e){for(var t=this.abs(),n=e.t=2*t.t;--n>=0;)e.data[n]=0;for(n=0;n<t.t-1;++n){var r=t.am(n,t.data[n],e,2*n,0,1);(e.data[n+t.t]+=t.am(n+1,2*t.data[n],e,2*n+1,r,t.t-n-1))>=t.DV&&(e.data[n+t.t]-=t.DV,e.data[n+t.t+1]=1)}e.t>0&&(e.data[e.t-1]+=t.am(n,t.data[n],e,2*n,0,1)),e.s=0,e.clamp()}function Vk(e,t,n){var r=e.abs();if(!(r.t<=0)){var i=this.abs();if(i.t<r.t){t!=null&&t.fromInt(0),n!=null&&this.copyTo(n);return}n==null&&(n=Mn());var a=Mn(),s=this.s,o=e.s,l=this.DB-Pf(r.data[r.t-1]);l>0?(r.lShiftTo(l,a),i.lShiftTo(l,n)):(r.copyTo(a),i.copyTo(n));var c=a.t,h=a.data[c-1];if(h!=0){var p=h*(1<<this.F1)+(c>1?a.data[c-2]>>this.F2:0),E=this.FV/p,b=(1<<this.F1)/p,C=1<<this.F2,N=n.t,w=N-c,I=t==null?Mn():t;for(a.dlShiftTo(w,I),n.compareTo(I)>=0&&(n.data[n.t++]=1,n.subTo(I,n)),ot.ONE.dlShiftTo(c,I),I.subTo(a,a);a.t<c;)a.data[a.t++]=0;for(;--w>=0;){var S=n.data[--N]==h?this.DM:Math.floor(n.data[N]*E+(n.data[N-1]+C)*b);if((n.data[N]+=a.am(0,S,n,w,0,c))<S)for(a.dlShiftTo(w,I),n.subTo(I,n);n.data[N]<--S;)n.subTo(I,n)}t!=null&&(n.drShiftTo(c,t),s!=o&&ot.ZERO.subTo(t,t)),n.t=c,n.clamp(),l>0&&n.rShiftTo(l,n),s<0&&ot.ZERO.subTo(n,n)}}}function zk(e){var t=Mn();return this.abs().divRemTo(e,null,t),this.s<0&&t.compareTo(ot.ZERO)>0&&e.subTo(t,t),t}function cu(e){this.m=e}function Hk(e){return e.s<0||e.compareTo(this.m)>=0?e.mod(this.m):e}function $k(e){return e}function jk(e){e.divRemTo(this.m,null,e)}function Kk(e,t,n){e.multiplyTo(t,n),this.reduce(n)}function Wk(e,t){e.squareTo(t),this.reduce(t)}cu.prototype.convert=Hk;cu.prototype.revert=$k;cu.prototype.reduce=jk;cu.prototype.mulTo=Kk;cu.prototype.sqrTo=Wk;function Gk(){if(this.t<1)return 0;var e=this.data[0];if(!(e&1))return 0;var t=e&3;return t=t*(2-(e&15)*t)&15,t=t*(2-(e&255)*t)&255,t=t*(2-((e&65535)*t&65535))&65535,t=t*(2-e*t%this.DV)%this.DV,t>0?this.DV-t:-t}function fu(e){this.m=e,this.mp=e.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}function Zk(e){var t=Mn();return e.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),e.s<0&&t.compareTo(ot.ZERO)>0&&this.m.subTo(t,t),t}function Xk(e){var t=Mn();return e.copyTo(t),this.reduce(t),t}function Yk(e){for(;e.t<=this.mt2;)e.data[e.t++]=0;for(var t=0;t<this.m.t;++t){var n=e.data[t]&32767,r=n*this.mpl+((n*this.mph+(e.data[t]>>15)*this.mpl&this.um)<<15)&e.DM;for(n=t+this.m.t,e.data[n]+=this.m.am(0,r,e,t,0,this.m.t);e.data[n]>=e.DV;)e.data[n]-=e.DV,e.data[++n]++}e.clamp(),e.drShiftTo(this.m.t,e),e.compareTo(this.m)>=0&&e.subTo(this.m,e)}function Qk(e,t){e.squareTo(t),this.reduce(t)}function Jk(e,t,n){e.multiplyTo(t,n),this.reduce(n)}fu.prototype.convert=Zk;fu.prototype.revert=Xk;fu.prototype.reduce=Yk;fu.prototype.mulTo=Jk;fu.prototype.sqrTo=Qk;function e2(){return(this.t>0?this.data[0]&1:this.s)==0}function t2(e,t){if(e>4294967295||e<1)return ot.ONE;var n=Mn(),r=Mn(),i=t.convert(this),a=Pf(e)-1;for(i.copyTo(n);--a>=0;)if(t.sqrTo(n,r),(e&1<<a)>0)t.mulTo(r,i,n);else{var s=n;n=r,r=s}return t.revert(n)}function n2(e,t){var n;return e<256||t.isEven()?n=new cu(t):n=new fu(t),this.exp(e,n)}ot.prototype.copyTo=Sk;ot.prototype.fromInt=Tk;ot.prototype.fromString=Lk;ot.prototype.clamp=kk;ot.prototype.dlShiftTo=Rk;ot.prototype.drShiftTo=Ok;ot.prototype.lShiftTo=Bk;ot.prototype.rShiftTo=Mk;ot.prototype.subTo=Uk;ot.prototype.multiplyTo=qk;ot.prototype.squareTo=Fk;ot.prototype.divRemTo=Vk;ot.prototype.invDigit=Gk;ot.prototype.isEven=e2;ot.prototype.exp=t2;ot.prototype.toString=Ak;ot.prototype.negate=Ik;ot.prototype.abs=Nk;ot.prototype.compareTo=Pk;ot.prototype.bitLength=Dk;ot.prototype.mod=zk;ot.prototype.modPowInt=n2;ot.ZERO=Io(0);ot.ONE=Io(1);function r2(){var e=Mn();return this.copyTo(e),e}function i2(){if(this.s<0){if(this.t==1)return this.data[0]-this.DV;if(this.t==0)return-1}else{if(this.t==1)return this.data[0];if(this.t==0)return 0}return(this.data[1]&(1<<32-this.DB)-1)<<this.DB|this.data[0]}function a2(){return this.t==0?this.s:this.data[0]<<24>>24}function s2(){return this.t==0?this.s:this.data[0]<<16>>16}function o2(e){return Math.floor(Math.LN2*this.DB/Math.log(e))}function u2(){return this.s<0?-1:this.t<=0||this.t==1&&this.data[0]<=0?0:1}function l2(e){if(e==null&&(e=10),this.signum()==0||e<2||e>36)return"0";var t=this.chunkSize(e),n=Math.pow(e,t),r=Io(n),i=Mn(),a=Mn(),s="";for(this.divRemTo(r,i,a);i.signum()>0;)s=(n+a.intValue()).toString(e).substr(1)+s,i.divRemTo(r,i,a);return a.intValue().toString(e)+s}function c2(e,t){this.fromInt(0),t==null&&(t=10);for(var n=this.chunkSize(t),r=Math.pow(t,n),i=!1,a=0,s=0,o=0;o<e.length;++o){var l=by(e,o);if(l<0){e.charAt(o)=="-"&&this.signum()==0&&(i=!0);continue}s=t*s+l,++a>=n&&(this.dMultiply(r),this.dAddOffset(s,0),a=0,s=0)}a>0&&(this.dMultiply(Math.pow(t,a)),this.dAddOffset(s,0)),i&&ot.ZERO.subTo(this,this)}function f2(e,t,n){if(typeof t=="number")if(e<2)this.fromInt(1);else for(this.fromNumber(e,n),this.testBit(e-1)||this.bitwiseTo(ot.ONE.shiftLeft(e-1),$d,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(t);)this.dAddOffset(2,0),this.bitLength()>e&&this.subTo(ot.ONE.shiftLeft(e-1),this);else{var r=new Array,i=e&7;r.length=(e>>3)+1,t.nextBytes(r),i>0?r[0]&=(1<<i)-1:r[0]=0,this.fromString(r,256)}}function h2(){var e=this.t,t=new Array;t[0]=this.s;var n=this.DB-e*this.DB%8,r,i=0;if(e-- >0)for(n<this.DB&&(r=this.data[e]>>n)!=(this.s&this.DM)>>n&&(t[i++]=r|this.s<<this.DB-n);e>=0;)n<8?(r=(this.data[e]&(1<<n)-1)<<8-n,r|=this.data[--e]>>(n+=this.DB-8)):(r=this.data[e]>>(n-=8)&255,n<=0&&(n+=this.DB,--e)),r&128&&(r|=-256),i==0&&(this.s&128)!=(r&128)&&++i,(i>0||r!=this.s)&&(t[i++]=r);return t}function d2(e){return this.compareTo(e)==0}function p2(e){return this.compareTo(e)<0?this:e}function g2(e){return this.compareTo(e)>0?this:e}function m2(e,t,n){var r,i,a=Math.min(e.t,this.t);for(r=0;r<a;++r)n.data[r]=t(this.data[r],e.data[r]);if(e.t<this.t){for(i=e.s&this.DM,r=a;r<this.t;++r)n.data[r]=t(this.data[r],i);n.t=this.t}else{for(i=this.s&this.DM,r=a;r<e.t;++r)n.data[r]=t(i,e.data[r]);n.t=e.t}n.s=t(this.s,e.s),n.clamp()}function v2(e,t){return e&t}function y2(e){var t=Mn();return this.bitwiseTo(e,v2,t),t}function $d(e,t){return e|t}function _2(e){var t=Mn();return this.bitwiseTo(e,$d,t),t}function wy(e,t){return e^t}function b2(e){var t=Mn();return this.bitwiseTo(e,wy,t),t}function xy(e,t){return e&~t}function w2(e){var t=Mn();return this.bitwiseTo(e,xy,t),t}function x2(){for(var e=Mn(),t=0;t<this.t;++t)e.data[t]=this.DM&~this.data[t];return e.t=this.t,e.s=~this.s,e}function E2(e){var t=Mn();return e<0?this.rShiftTo(-e,t):this.lShiftTo(e,t),t}function C2(e){var t=Mn();return e<0?this.lShiftTo(-e,t):this.rShiftTo(e,t),t}function S2(e){if(e==0)return-1;var t=0;return e&65535||(e>>=16,t+=16),e&255||(e>>=8,t+=8),e&15||(e>>=4,t+=4),e&3||(e>>=2,t+=2),e&1||++t,t}function T2(){for(var e=0;e<this.t;++e)if(this.data[e]!=0)return e*this.DB+S2(this.data[e]);return this.s<0?this.t*this.DB:-1}function L2(e){for(var t=0;e!=0;)e&=e-1,++t;return t}function k2(){for(var e=0,t=this.s&this.DM,n=0;n<this.t;++n)e+=L2(this.data[n]^t);return e}function A2(e){var t=Math.floor(e/this.DB);return t>=this.t?this.s!=0:(this.data[t]&1<<e%this.DB)!=0}function I2(e,t){var n=ot.ONE.shiftLeft(e);return this.bitwiseTo(n,t,n),n}function N2(e){return this.changeBit(e,$d)}function P2(e){return this.changeBit(e,xy)}function D2(e){return this.changeBit(e,wy)}function R2(e,t){for(var n=0,r=0,i=Math.min(e.t,this.t);n<i;)r+=this.data[n]+e.data[n],t.data[n++]=r&this.DM,r>>=this.DB;if(e.t<this.t){for(r+=e.s;n<this.t;)r+=this.data[n],t.data[n++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;n<e.t;)r+=e.data[n],t.data[n++]=r&this.DM,r>>=this.DB;r+=e.s}t.s=r<0?-1:0,r>0?t.data[n++]=r:r<-1&&(t.data[n++]=this.DV+r),t.t=n,t.clamp()}function O2(e){var t=Mn();return this.addTo(e,t),t}function B2(e){var t=Mn();return this.subTo(e,t),t}function M2(e){var t=Mn();return this.multiplyTo(e,t),t}function U2(e){var t=Mn();return this.divRemTo(e,t,null),t}function q2(e){var t=Mn();return this.divRemTo(e,null,t),t}function F2(e){var t=Mn(),n=Mn();return this.divRemTo(e,t,n),new Array(t,n)}function V2(e){this.data[this.t]=this.am(0,e-1,this,0,0,this.t),++this.t,this.clamp()}function z2(e,t){if(e!=0){for(;this.t<=t;)this.data[this.t++]=0;for(this.data[t]+=e;this.data[t]>=this.DV;)this.data[t]-=this.DV,++t>=this.t&&(this.data[this.t++]=0),++this.data[t]}}function Jl(){}function Ey(e){return e}function H2(e,t,n){e.multiplyTo(t,n)}function $2(e,t){e.squareTo(t)}Jl.prototype.convert=Ey;Jl.prototype.revert=Ey;Jl.prototype.mulTo=H2;Jl.prototype.sqrTo=$2;function j2(e){return this.exp(e,new Jl)}function K2(e,t,n){var r=Math.min(this.t+e.t,t);for(n.s=0,n.t=r;r>0;)n.data[--r]=0;var i;for(i=n.t-this.t;r<i;++r)n.data[r+this.t]=this.am(0,e.data[r],n,r,0,this.t);for(i=Math.min(e.t,t);r<i;++r)this.am(0,e.data[r],n,r,0,t-r);n.clamp()}function W2(e,t,n){--t;var r=n.t=this.t+e.t-t;for(n.s=0;--r>=0;)n.data[r]=0;for(r=Math.max(t-this.t,0);r<e.t;++r)n.data[this.t+r-t]=this.am(t-r,e.data[r],n,0,0,this.t+r-t);n.clamp(),n.drShiftTo(1,n)}function Qu(e){this.r2=Mn(),this.q3=Mn(),ot.ONE.dlShiftTo(2*e.t,this.r2),this.mu=this.r2.divide(e),this.m=e}function G2(e){if(e.s<0||e.t>2*this.m.t)return e.mod(this.m);if(e.compareTo(this.m)<0)return e;var t=Mn();return e.copyTo(t),this.reduce(t),t}function Z2(e){return e}function X2(e){for(e.drShiftTo(this.m.t-1,this.r2),e.t>this.m.t+1&&(e.t=this.m.t+1,e.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);e.compareTo(this.r2)<0;)e.dAddOffset(1,this.m.t+1);for(e.subTo(this.r2,e);e.compareTo(this.m)>=0;)e.subTo(this.m,e)}function Y2(e,t){e.squareTo(t),this.reduce(t)}function Q2(e,t,n){e.multiplyTo(t,n),this.reduce(n)}Qu.prototype.convert=G2;Qu.prototype.revert=Z2;Qu.prototype.reduce=X2;Qu.prototype.mulTo=Q2;Qu.prototype.sqrTo=Y2;function J2(e,t){var n=e.bitLength(),r,i=Io(1),a;if(n<=0)return i;n<18?r=1:n<48?r=3:n<144?r=4:n<768?r=5:r=6,n<8?a=new cu(t):t.isEven()?a=new Qu(t):a=new fu(t);var s=new Array,o=3,l=r-1,c=(1<<r)-1;if(s[1]=a.convert(this),r>1){var h=Mn();for(a.sqrTo(s[1],h);o<=c;)s[o]=Mn(),a.mulTo(h,s[o-2],s[o]),o+=2}var p=e.t-1,E,b=!0,C=Mn(),N;for(n=Pf(e.data[p])-1;p>=0;){for(n>=l?E=e.data[p]>>n-l&c:(E=(e.data[p]&(1<<n+1)-1)<<l-n,p>0&&(E|=e.data[p-1]>>this.DB+n-l)),o=r;!(E&1);)E>>=1,--o;if((n-=o)<0&&(n+=this.DB,--p),b)s[E].copyTo(i),b=!1;else{for(;o>1;)a.sqrTo(i,C),a.sqrTo(C,i),o-=2;o>0?a.sqrTo(i,C):(N=i,i=C,C=N),a.mulTo(C,s[E],i)}for(;p>=0&&!(e.data[p]&1<<n);)a.sqrTo(i,C),N=i,i=C,C=N,--n<0&&(n=this.DB-1,--p)}return a.revert(i)}function eA(e){var t=this.s<0?this.negate():this.clone(),n=e.s<0?e.negate():e.clone();if(t.compareTo(n)<0){var r=t;t=n,n=r}var i=t.getLowestSetBit(),a=n.getLowestSetBit();if(a<0)return t;for(i<a&&(a=i),a>0&&(t.rShiftTo(a,t),n.rShiftTo(a,n));t.signum()>0;)(i=t.getLowestSetBit())>0&&t.rShiftTo(i,t),(i=n.getLowestSetBit())>0&&n.rShiftTo(i,n),t.compareTo(n)>=0?(t.subTo(n,t),t.rShiftTo(1,t)):(n.subTo(t,n),n.rShiftTo(1,n));return a>0&&n.lShiftTo(a,n),n}function tA(e){if(e<=0)return 0;var t=this.DV%e,n=this.s<0?e-1:0;if(this.t>0)if(t==0)n=this.data[0]%e;else for(var r=this.t-1;r>=0;--r)n=(t*n+this.data[r])%e;return n}function nA(e){var t=e.isEven();if(this.isEven()&&t||e.signum()==0)return ot.ZERO;for(var n=e.clone(),r=this.clone(),i=Io(1),a=Io(0),s=Io(0),o=Io(1);n.signum()!=0;){for(;n.isEven();)n.rShiftTo(1,n),t?((!i.isEven()||!a.isEven())&&(i.addTo(this,i),a.subTo(e,a)),i.rShiftTo(1,i)):a.isEven()||a.subTo(e,a),a.rShiftTo(1,a);for(;r.isEven();)r.rShiftTo(1,r),t?((!s.isEven()||!o.isEven())&&(s.addTo(this,s),o.subTo(e,o)),s.rShiftTo(1,s)):o.isEven()||o.subTo(e,o),o.rShiftTo(1,o);n.compareTo(r)>=0?(n.subTo(r,n),t&&i.subTo(s,i),a.subTo(o,a)):(r.subTo(n,r),t&&s.subTo(i,s),o.subTo(a,o))}if(r.compareTo(ot.ONE)!=0)return ot.ZERO;if(o.compareTo(e)>=0)return o.subtract(e);if(o.signum()<0)o.addTo(e,o);else return o;return o.signum()<0?o.add(e):o}var as=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509],rA=(1<<26)/as[as.length-1];function iA(e){var t,n=this.abs();if(n.t==1&&n.data[0]<=as[as.length-1]){for(t=0;t<as.length;++t)if(n.data[0]==as[t])return!0;return!1}if(n.isEven())return!1;for(t=1;t<as.length;){for(var r=as[t],i=t+1;i<as.length&&r<rA;)r*=as[i++];for(r=n.modInt(r);t<i;)if(r%as[t++]==0)return!1}return n.millerRabin(e)}function aA(e){var t=this.subtract(ot.ONE),n=t.getLowestSetBit();if(n<=0)return!1;for(var r=t.shiftRight(n),i=sA(),a,s=0;s<e;++s){do a=new ot(this.bitLength(),i);while(a.compareTo(ot.ONE)<=0||a.compareTo(t)>=0);var o=a.modPow(r,this);if(o.compareTo(ot.ONE)!=0&&o.compareTo(t)!=0){for(var l=1;l++<n&&o.compareTo(t)!=0;)if(o=o.modPowInt(2,this),o.compareTo(ot.ONE)==0)return!1;if(o.compareTo(t)!=0)return!1}}return!0}function sA(){return{nextBytes:function(e){for(var t=0;t<e.length;++t)e[t]=Math.floor(Math.random()*256)}}}ot.prototype.chunkSize=o2;ot.prototype.toRadix=l2;ot.prototype.fromRadix=c2;ot.prototype.fromNumber=f2;ot.prototype.bitwiseTo=m2;ot.prototype.changeBit=I2;ot.prototype.addTo=R2;ot.prototype.dMultiply=V2;ot.prototype.dAddOffset=z2;ot.prototype.multiplyLowerTo=K2;ot.prototype.multiplyUpperTo=W2;ot.prototype.modInt=tA;ot.prototype.millerRabin=aA;ot.prototype.clone=r2;ot.prototype.intValue=i2;ot.prototype.byteValue=a2;ot.prototype.shortValue=s2;ot.prototype.signum=u2;ot.prototype.toByteArray=h2;ot.prototype.equals=d2;ot.prototype.min=p2;ot.prototype.max=g2;ot.prototype.and=y2;ot.prototype.or=_2;ot.prototype.xor=b2;ot.prototype.andNot=w2;ot.prototype.not=x2;ot.prototype.shiftLeft=E2;ot.prototype.shiftRight=C2;ot.prototype.getLowestSetBit=T2;ot.prototype.bitCount=k2;ot.prototype.testBit=A2;ot.prototype.setBit=N2;ot.prototype.clearBit=P2;ot.prototype.flipBit=D2;ot.prototype.add=O2;ot.prototype.subtract=B2;ot.prototype.multiply=M2;ot.prototype.divide=U2;ot.prototype.remainder=q2;ot.prototype.divideAndRemainder=F2;ot.prototype.modPow=J2;ot.prototype.modInverse=nA;ot.prototype.pow=j2;ot.prototype.gcd=eA;ot.prototype.isProbablePrime=iA});var Ju=$e((_6,ky)=>{var ks=hn();Es();Bn();var Ty=ky.exports=ks.sha1=ks.sha1||{};ks.md.sha1=ks.md.algorithms.sha1=Ty;Ty.create=function(){Ly||oA();var e=null,t=ks.util.createBuffer(),n=new Array(80),r={algorithm:"sha1",blockLength:64,digestLength:20,messageLength:0,fullMessageLength:null,messageLengthSize:8};return r.start=function(){r.messageLength=0,r.fullMessageLength=r.messageLength64=[];for(var i=r.messageLengthSize/4,a=0;a<i;++a)r.fullMessageLength.push(0);return t=ks.util.createBuffer(),e={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878,h4:3285377520},r},r.start(),r.update=function(i,a){a==="utf8"&&(i=ks.util.encodeUtf8(i));var s=i.length;r.messageLength+=s,s=[s/4294967296>>>0,s>>>0];for(var o=r.fullMessageLength.length-1;o>=0;--o)r.fullMessageLength[o]+=s[1],s[1]=s[0]+(r.fullMessageLength[o]/4294967296>>>0),r.fullMessageLength[o]=r.fullMessageLength[o]>>>0,s[0]=s[1]/4294967296>>>0;return t.putBytes(i),Sy(e,n,t),(t.read>2048||t.length()===0)&&t.compact(),r},r.digest=function(){var i=ks.util.createBuffer();i.putBytes(t.bytes());var a=r.fullMessageLength[r.fullMessageLength.length-1]+r.messageLengthSize,s=a&r.blockLength-1;i.putBytes(jd.substr(0,r.blockLength-s));for(var o,l,c=r.fullMessageLength[0]*8,h=0;h<r.fullMessageLength.length-1;++h)o=r.fullMessageLength[h+1]*8,l=o/4294967296>>>0,c+=l,i.putInt32(c>>>0),c=o>>>0;i.putInt32(c);var p={h0:e.h0,h1:e.h1,h2:e.h2,h3:e.h3,h4:e.h4};Sy(p,n,i);var E=ks.util.createBuffer();return E.putInt32(p.h0),E.putInt32(p.h1),E.putInt32(p.h2),E.putInt32(p.h3),E.putInt32(p.h4),E},r};var jd=null,Ly=!1;function oA(){jd=String.fromCharCode(128),jd+=ks.util.fillString(String.fromCharCode(0),64),Ly=!0}function Sy(e,t,n){for(var r,i,a,s,o,l,c,h,p=n.length();p>=64;){for(i=e.h0,a=e.h1,s=e.h2,o=e.h3,l=e.h4,h=0;h<16;++h)r=n.getInt32(),t[h]=r,c=o^a&(s^o),r=(i<<5|i>>>27)+c+l+1518500249+r,l=o,o=s,s=(a<<30|a>>>2)>>>0,a=i,i=r;for(;h<20;++h)r=t[h-3]^t[h-8]^t[h-14]^t[h-16],r=r<<1|r>>>31,t[h]=r,c=o^a&(s^o),r=(i<<5|i>>>27)+c+l+1518500249+r,l=o,o=s,s=(a<<30|a>>>2)>>>0,a=i,i=r;for(;h<32;++h)r=t[h-3]^t[h-8]^t[h-14]^t[h-16],r=r<<1|r>>>31,t[h]=r,c=a^s^o,r=(i<<5|i>>>27)+c+l+1859775393+r,l=o,o=s,s=(a<<30|a>>>2)>>>0,a=i,i=r;for(;h<40;++h)r=t[h-6]^t[h-16]^t[h-28]^t[h-32],r=r<<2|r>>>30,t[h]=r,c=a^s^o,r=(i<<5|i>>>27)+c+l+1859775393+r,l=o,o=s,s=(a<<30|a>>>2)>>>0,a=i,i=r;for(;h<60;++h)r=t[h-6]^t[h-16]^t[h-28]^t[h-32],r=r<<2|r>>>30,t[h]=r,c=a&s|o&(a^s),r=(i<<5|i>>>27)+c+l+2400959708+r,l=o,o=s,s=(a<<30|a>>>2)>>>0,a=i,i=r;for(;h<80;++h)r=t[h-6]^t[h-16]^t[h-28]^t[h-32],r=r<<2|r>>>30,t[h]=r,c=a^s^o,r=(i<<5|i>>>27)+c+l+3395469782+r,l=o,o=s,s=(a<<30|a>>>2)>>>0,a=i,i=r;e.h0=e.h0+i|0,e.h1=e.h1+a|0,e.h2=e.h2+s|0,e.h3=e.h3+o|0,e.h4=e.h4+l|0,p-=64}}});var Kd=$e((b6,Iy)=>{var As=hn();Bn();za();Ju();var Ay=Iy.exports=As.pkcs1=As.pkcs1||{};Ay.encode_rsa_oaep=function(e,t,n){var r,i,a,s;typeof n=="string"?(r=n,i=arguments[3]||void 0,a=arguments[4]||void 0):n&&(r=n.label||void 0,i=n.seed||void 0,a=n.md||void 0,n.mgf1&&n.mgf1.md&&(s=n.mgf1.md)),a?a.start():a=As.md.sha1.create(),s||(s=a);var o=Math.ceil(e.n.bitLength()/8),l=o-2*a.digestLength-2;if(t.length>l){var c=new Error("RSAES-OAEP input message length is too long.");throw c.length=t.length,c.maxLength=l,c}r||(r=""),a.update(r,"raw");for(var h=a.digest(),p="",E=l-t.length,b=0;b<E;b++)p+="\0";var C=h.getBytes()+p+""+t;if(!i)i=As.random.getBytes(a.digestLength);else if(i.length!==a.digestLength){var c=new Error("Invalid RSAES-OAEP seed. The seed length must match the digest length.");throw c.seedLength=i.length,c.digestLength=a.digestLength,c}var N=Df(i,o-a.digestLength-1,s),w=As.util.xorBytes(C,N,C.length),I=Df(w,a.digestLength,s),S=As.util.xorBytes(i,I,i.length);return"\0"+S+w};Ay.decode_rsa_oaep=function(e,t,n){var r,i,a;typeof n=="string"?(r=n,i=arguments[3]||void 0):n&&(r=n.label||void 0,i=n.md||void 0,n.mgf1&&n.mgf1.md&&(a=n.mgf1.md));var s=Math.ceil(e.n.bitLength()/8);if(t.length!==s){var w=new Error("RSAES-OAEP encoded message length is invalid.");throw w.length=t.length,w.expectedLength=s,w}if(i===void 0?i=As.md.sha1.create():i.start(),a||(a=i),s<2*i.digestLength+2)throw new Error("RSAES-OAEP key is too short for the hash function.");r||(r=""),i.update(r,"raw");for(var o=i.digest().getBytes(),l=t.charAt(0),c=t.substring(1,i.digestLength+1),h=t.substring(1+i.digestLength),p=Df(h,i.digestLength,a),E=As.util.xorBytes(c,p,c.length),b=Df(E,s-i.digestLength-1,a),C=As.util.xorBytes(h,b,h.length),N=C.substring(0,i.digestLength),w=l!=="\0",I=0;I<i.digestLength;++I)w|=o.charAt(I)!==N.charAt(I);for(var S=1,_=i.digestLength,P=i.digestLength;P<C.length;P++){var v=C.charCodeAt(P),y=v&1^1,$=S?65534:0;w|=v&$,S=S&y,_+=S}if(w||C.charCodeAt(_)!==1)throw new Error("Invalid RSAES-OAEP padding.");return C.substring(_+1)};function Df(e,t,n){n||(n=As.md.sha1.create());for(var r="",i=Math.ceil(t/n.digestLength),a=0;a<i;++a){var s=String.fromCharCode(a>>24&255,a>>16&255,a>>8&255,a&255);n.start(),n.update(e+s),r+=n.digest().getBytes()}return r.substring(0,t)}});var Gd=$e((w6,Wd)=>{var No=hn();Bn();ec();za();(function(){if(No.prime){Wd.exports=No.prime;return}var e=Wd.exports=No.prime=No.prime||{},t=No.jsbn.BigInteger,n=[6,4,2,4,2,4,6,2],r=new t(null);r.fromInt(30);var i=function(p,E){return p|E};e.generateProbablePrime=function(p,E,b){typeof E=="function"&&(b=E,E={}),E=E||{};var C=E.algorithm||"PRIMEINC";typeof C=="string"&&(C={name:C}),C.options=C.options||{};var N=E.prng||No.random,w={nextBytes:function(I){for(var S=N.getBytesSync(I.length),_=0;_<I.length;++_)I[_]=S.charCodeAt(_)}};if(C.name==="PRIMEINC")return a(p,w,C.options,b);throw new Error("Invalid prime generation algorithm: "+C.name)};function a(p,E,b,C){return"workers"in b?l(p,E,b,C):s(p,E,b,C)}function s(p,E,b,C){var N=c(p,E),w=0,I=h(N.bitLength());"millerRabinTests"in b&&(I=b.millerRabinTests);var S=10;"maxBlockTime"in b&&(S=b.maxBlockTime),o(N,p,E,w,I,S,C)}function o(p,E,b,C,N,w,I){var S=+new Date;do{if(p.bitLength()>E&&(p=c(E,b)),p.isProbablePrime(N))return I(null,p);p.dAddOffset(n[C++%8],0)}while(w<0||+new Date-S<w);No.util.setImmediate(function(){o(p,E,b,C,N,w,I)})}function l(p,E,b,C){if(typeof Worker>"u")return s(p,E,b,C);var N=c(p,E),w=b.workers,I=b.workLoad||100,S=I*30/8,_=b.workerScript||"forge/prime.worker.js";if(w===-1)return No.util.estimateCores(function(v,y){v&&(y=2),w=y-1,P()});P();function P(){w=Math.max(1,w);for(var v=[],y=0;y<w;++y)v[y]=new Worker(_);for(var $=w,y=0;y<w;++y)v[y].addEventListener("message",ce);var Z=!1;function ce(q){if(!Z){--$;var W=q.data;if(W.found){for(var O=0;O<v.length;++O)v[O].terminate();return Z=!0,C(null,new t(W.prime,16))}N.bitLength()>p&&(N=c(p,E));var re=N.toString(16);q.target.postMessage({hex:re,workLoad:I}),N.dAddOffset(S,0)}}}}function c(p,E){var b=new t(p,E),C=p-1;return b.testBit(C)||b.bitwiseTo(t.ONE.shiftLeft(C),i,b),b.dAddOffset(31-b.mod(r).byteValue(),0),b}function h(p){return p<=100?27:p<=150?18:p<=200?15:p<=250?12:p<=300?9:p<=350?8:p<=400?7:p<=500?6:p<=600?5:p<=800?4:p<=1250?3:2}})()});var tc=$e((x6,My)=>{var Bt=hn();is();ec();Ao();Kd();Gd();za();Bn();typeof Pn>"u"&&(Pn=Bt.jsbn.BigInteger);var Pn,Zd=Bt.util.isNodejs?wr("crypto"):null,Fe=Bt.asn1,$a=Bt.util;Bt.pki=Bt.pki||{};My.exports=Bt.pki.rsa=Bt.rsa=Bt.rsa||{};var sn=Bt.pki,uA=[6,4,2,4,2,4,6,2],lA={name:"PrivateKeyInfo",tagClass:Fe.Class.UNIVERSAL,type:Fe.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:Fe.Class.UNIVERSAL,type:Fe.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:Fe.Class.UNIVERSAL,type:Fe.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:Fe.Class.UNIVERSAL,type:Fe.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:Fe.Class.UNIVERSAL,type:Fe.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]},cA={name:"RSAPrivateKey",tagClass:Fe.Class.UNIVERSAL,type:Fe.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPrivateKey.version",tagClass:Fe.Class.UNIVERSAL,type:Fe.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"RSAPrivateKey.modulus",tagClass:Fe.Class.UNIVERSAL,type:Fe.Type.INTEGER,constructed:!1,capture:"privateKeyModulus"},{name:"RSAPrivateKey.publicExponent",tagClass:Fe.Class.UNIVERSAL,type:Fe.Type.INTEGER,constructed:!1,capture:"privateKeyPublicExponent"},{name:"RSAPrivateKey.privateExponent",tagClass:Fe.Class.UNIVERSAL,type:Fe.Type.INTEGER,constructed:!1,capture:"privateKeyPrivateExponent"},{name:"RSAPrivateKey.prime1",tagClass:Fe.Class.UNIVERSAL,type:Fe.Type.INTEGER,constructed:!1,capture:"privateKeyPrime1"},{name:"RSAPrivateKey.prime2",tagClass:Fe.Class.UNIVERSAL,type:Fe.Type.INTEGER,constructed:!1,capture:"privateKeyPrime2"},{name:"RSAPrivateKey.exponent1",tagClass:Fe.Class.UNIVERSAL,type:Fe.Type.INTEGER,constructed:!1,capture:"privateKeyExponent1"},{name:"RSAPrivateKey.exponent2",tagClass:Fe.Class.UNIVERSAL,type:Fe.Type.INTEGER,constructed:!1,capture:"privateKeyExponent2"},{name:"RSAPrivateKey.coefficient",tagClass:Fe.Class.UNIVERSAL,type:Fe.Type.INTEGER,constructed:!1,capture:"privateKeyCoefficient"}]},fA={name:"RSAPublicKey",tagClass:Fe.Class.UNIVERSAL,type:Fe.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPublicKey.modulus",tagClass:Fe.Class.UNIVERSAL,type:Fe.Type.INTEGER,constructed:!1,capture:"publicKeyModulus"},{name:"RSAPublicKey.exponent",tagClass:Fe.Class.UNIVERSAL,type:Fe.Type.INTEGER,constructed:!1,capture:"publicKeyExponent"}]},hA=Bt.pki.rsa.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:Fe.Class.UNIVERSAL,type:Fe.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:Fe.Class.UNIVERSAL,type:Fe.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:Fe.Class.UNIVERSAL,type:Fe.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{name:"SubjectPublicKeyInfo.subjectPublicKey",tagClass:Fe.Class.UNIVERSAL,type:Fe.Type.BITSTRING,constructed:!1,value:[{name:"SubjectPublicKeyInfo.subjectPublicKey.RSAPublicKey",tagClass:Fe.Class.UNIVERSAL,type:Fe.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"rsaPublicKey"}]}]},dA={name:"DigestInfo",tagClass:Fe.Class.UNIVERSAL,type:Fe.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm",tagClass:Fe.Class.UNIVERSAL,type:Fe.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm.algorithmIdentifier",tagClass:Fe.Class.UNIVERSAL,type:Fe.Type.OID,constructed:!1,capture:"algorithmIdentifier"},{name:"DigestInfo.DigestAlgorithm.parameters",tagClass:Fe.Class.UNIVERSAL,type:Fe.Type.NULL,capture:"parameters",optional:!0,constructed:!1}]},{name:"DigestInfo.digest",tagClass:Fe.Class.UNIVERSAL,type:Fe.Type.OCTETSTRING,constructed:!1,capture:"digest"}]},pA=function(e){var t;if(e.algorithm in sn.oids)t=sn.oids[e.algorithm];else{var n=new Error("Unknown message digest algorithm.");throw n.algorithm=e.algorithm,n}var r=Fe.oidToDer(t).getBytes(),i=Fe.create(Fe.Class.UNIVERSAL,Fe.Type.SEQUENCE,!0,[]),a=Fe.create(Fe.Class.UNIVERSAL,Fe.Type.SEQUENCE,!0,[]);a.value.push(Fe.create(Fe.Class.UNIVERSAL,Fe.Type.OID,!1,r)),a.value.push(Fe.create(Fe.Class.UNIVERSAL,Fe.Type.NULL,!1,""));var s=Fe.create(Fe.Class.UNIVERSAL,Fe.Type.OCTETSTRING,!1,e.digest().getBytes());return i.value.push(a),i.value.push(s),Fe.toDer(i).getBytes()},Oy=function(e,t,n){if(n)return e.modPow(t.e,t.n);if(!t.p||!t.q)return e.modPow(t.d,t.n);t.dP||(t.dP=t.d.mod(t.p.subtract(Pn.ONE))),t.dQ||(t.dQ=t.d.mod(t.q.subtract(Pn.ONE))),t.qInv||(t.qInv=t.q.modInverse(t.p));var r;do r=new Pn(Bt.util.bytesToHex(Bt.random.getBytes(t.n.bitLength()/8)),16);while(r.compareTo(t.n)>=0||!r.gcd(t.n).equals(Pn.ONE));e=e.multiply(r.modPow(t.e,t.n)).mod(t.n);for(var i=e.mod(t.p).modPow(t.dP,t.p),a=e.mod(t.q).modPow(t.dQ,t.q);i.compareTo(a)<0;)i=i.add(t.p);var s=i.subtract(a).multiply(t.qInv).mod(t.p).multiply(t.q).add(a);return s=s.multiply(r.modInverse(t.n)).mod(t.n),s};sn.rsa.encrypt=function(e,t,n){var r=n,i,a=Math.ceil(t.n.bitLength()/8);n!==!1&&n!==!0?(r=n===2,i=By(e,t,n)):(i=Bt.util.createBuffer(),i.putBytes(e));for(var s=new Pn(i.toHex(),16),o=Oy(s,t,r),l=o.toString(16),c=Bt.util.createBuffer(),h=a-Math.ceil(l.length/2);h>0;)c.putByte(0),--h;return c.putBytes(Bt.util.hexToBytes(l)),c.getBytes()};sn.rsa.decrypt=function(e,t,n,r){var i=Math.ceil(t.n.bitLength()/8);if(e.length!==i){var a=new Error("Encrypted message length is invalid.");throw a.length=e.length,a.expected=i,a}var s=new Pn(Bt.util.createBuffer(e).toHex(),16);if(s.compareTo(t.n)>=0)throw new Error("Encrypted message is invalid.");for(var o=Oy(s,t,n),l=o.toString(16),c=Bt.util.createBuffer(),h=i-Math.ceil(l.length/2);h>0;)c.putByte(0),--h;return c.putBytes(Bt.util.hexToBytes(l)),r!==!1?Rf(c.getBytes(),t,n):c.getBytes()};sn.rsa.createKeyPairGenerationState=function(e,t,n){typeof e=="string"&&(e=parseInt(e,10)),e=e||2048,n=n||{};var r=n.prng||Bt.random,i={nextBytes:function(o){for(var l=r.getBytesSync(o.length),c=0;c<o.length;++c)o[c]=l.charCodeAt(c)}},a=n.algorithm||"PRIMEINC",s;if(a==="PRIMEINC")s={algorithm:a,state:0,bits:e,rng:i,eInt:t||65537,e:new Pn(null),p:null,q:null,qBits:e>>1,pBits:e-(e>>1),pqState:0,num:null,keys:null},s.e.fromInt(s.eInt);else throw new Error("Invalid key generation algorithm: "+a);return s};sn.rsa.stepKeyPairGenerationState=function(e,t){"algorithm"in e||(e.algorithm="PRIMEINC");var n=new Pn(null);n.fromInt(30);for(var r=0,i=function(p,E){return p|E},a=+new Date,s,o=0;e.keys===null&&(t<=0||o<t);){if(e.state===0){var l=e.p===null?e.pBits:e.qBits,c=l-1;e.pqState===0?(e.num=new Pn(l,e.rng),e.num.testBit(c)||e.num.bitwiseTo(Pn.ONE.shiftLeft(c),i,e.num),e.num.dAddOffset(31-e.num.mod(n).byteValue(),0),r=0,++e.pqState):e.pqState===1?e.num.bitLength()>l?e.pqState=0:e.num.isProbablePrime(mA(e.num.bitLength()))?++e.pqState:e.num.dAddOffset(uA[r++%8],0):e.pqState===2?e.pqState=e.num.subtract(Pn.ONE).gcd(e.e).compareTo(Pn.ONE)===0?3:0:e.pqState===3&&(e.pqState=0,e.p===null?e.p=e.num:e.q=e.num,e.p!==null&&e.q!==null&&++e.state,e.num=null)}else if(e.state===1)e.p.compareTo(e.q)<0&&(e.num=e.p,e.p=e.q,e.q=e.num),++e.state;else if(e.state===2)e.p1=e.p.subtract(Pn.ONE),e.q1=e.q.subtract(Pn.ONE),e.phi=e.p1.multiply(e.q1),++e.state;else if(e.state===3)e.phi.gcd(e.e).compareTo(Pn.ONE)===0?++e.state:(e.p=null,e.q=null,e.state=0);else if(e.state===4)e.n=e.p.multiply(e.q),e.n.bitLength()===e.bits?++e.state:(e.q=null,e.state=0);else if(e.state===5){var h=e.e.modInverse(e.phi);e.keys={privateKey:sn.rsa.setPrivateKey(e.n,e.e,h,e.p,e.q,h.mod(e.p1),h.mod(e.q1),e.q.modInverse(e.p)),publicKey:sn.rsa.setPublicKey(e.n,e.e)}}s=+new Date,o+=s-a,a=s}return e.keys!==null};sn.rsa.generateKeyPair=function(e,t,n,r){if(arguments.length===1?typeof e=="object"?(n=e,e=void 0):typeof e=="function"&&(r=e,e=void 0):arguments.length===2?typeof e=="number"?typeof t=="function"?(r=t,t=void 0):typeof t!="number"&&(n=t,t=void 0):(n=e,r=t,e=void 0,t=void 0):arguments.length===3&&(typeof t=="number"?typeof n=="function"&&(r=n,n=void 0):(r=n,n=t,t=void 0)),n=n||{},e===void 0&&(e=n.bits||2048),t===void 0&&(t=n.e||65537),!Bt.options.usePureJavaScript&&!n.prng&&e>=256&&e<=16384&&(t===65537||t===3)){if(r){if(Ny("generateKeyPair"))return Zd.generateKeyPair("rsa",{modulusLength:e,publicExponent:t,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}},function(o,l,c){if(o)return r(o);r(null,{privateKey:sn.privateKeyFromPem(c),publicKey:sn.publicKeyFromPem(l)})});if(Py("generateKey")&&Py("exportKey"))return $a.globalScope.crypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:e,publicExponent:Ry(t),hash:{name:"SHA-256"}},!0,["sign","verify"]).then(function(o){return $a.globalScope.crypto.subtle.exportKey("pkcs8",o.privateKey)}).then(void 0,function(o){r(o)}).then(function(o){if(o){var l=sn.privateKeyFromAsn1(Fe.fromDer(Bt.util.createBuffer(o)));r(null,{privateKey:l,publicKey:sn.setRsaPublicKey(l.n,l.e)})}});if(Dy("generateKey")&&Dy("exportKey")){var i=$a.globalScope.msCrypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:e,publicExponent:Ry(t),hash:{name:"SHA-256"}},!0,["sign","verify"]);i.oncomplete=function(o){var l=o.target.result,c=$a.globalScope.msCrypto.subtle.exportKey("pkcs8",l.privateKey);c.oncomplete=function(h){var p=h.target.result,E=sn.privateKeyFromAsn1(Fe.fromDer(Bt.util.createBuffer(p)));r(null,{privateKey:E,publicKey:sn.setRsaPublicKey(E.n,E.e)})},c.onerror=function(h){r(h)}},i.onerror=function(o){r(o)};return}}else if(Ny("generateKeyPairSync")){var a=Zd.generateKeyPairSync("rsa",{modulusLength:e,publicExponent:t,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}});return{privateKey:sn.privateKeyFromPem(a.privateKey),publicKey:sn.publicKeyFromPem(a.publicKey)}}}var s=sn.rsa.createKeyPairGenerationState(e,t,n);if(!r)return sn.rsa.stepKeyPairGenerationState(s,0),s.keys;gA(s,n,r)};sn.setRsaPublicKey=sn.rsa.setPublicKey=function(e,t){var n={n:e,e:t};return n.encrypt=function(r,i,a){if(typeof i=="string"?i=i.toUpperCase():i===void 0&&(i="RSAES-PKCS1-V1_5"),i==="RSAES-PKCS1-V1_5")i={encode:function(o,l,c){return By(o,l,2).getBytes()}};else if(i==="RSA-OAEP"||i==="RSAES-OAEP")i={encode:function(o,l){return Bt.pkcs1.encode_rsa_oaep(l,o,a)}};else if(["RAW","NONE","NULL",null].indexOf(i)!==-1)i={encode:function(o){return o}};else if(typeof i=="string")throw new Error('Unsupported encryption scheme: "'+i+'".');var s=i.encode(r,n,!0);return sn.rsa.encrypt(s,n,!0)},n.verify=function(r,i,a,s){typeof a=="string"?a=a.toUpperCase():a===void 0&&(a="RSASSA-PKCS1-V1_5"),s===void 0&&(s={_parseAllDigestBytes:!0}),"_parseAllDigestBytes"in s||(s._parseAllDigestBytes=!0),a==="RSASSA-PKCS1-V1_5"?a={verify:function(l,c){c=Rf(c,n,!0);var h=Fe.fromDer(c,{parseAllBytes:s._parseAllDigestBytes}),p={},E=[];if(!Fe.validate(h,dA,p,E)){var b=new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value.");throw b.errors=E,b}var C=Fe.derToOid(p.algorithmIdentifier);if(!(C===Bt.oids.md2||C===Bt.oids.md5||C===Bt.oids.sha1||C===Bt.oids.sha224||C===Bt.oids.sha256||C===Bt.oids.sha384||C===Bt.oids.sha512||C===Bt.oids["sha512-224"]||C===Bt.oids["sha512-256"])){var b=new Error("Unknown RSASSA-PKCS1-v1_5 DigestAlgorithm identifier.");throw b.oid=C,b}if((C===Bt.oids.md2||C===Bt.oids.md5)&&!("parameters"in p))throw new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value. Missing algorithm identifer NULL parameters.");return l===p.digest}}:(a==="NONE"||a==="NULL"||a===null)&&(a={verify:function(l,c){return c=Rf(c,n,!0),l===c}});var o=sn.rsa.decrypt(i,n,!0,!1);return a.verify(r,o,n.n.bitLength())},n};sn.setRsaPrivateKey=sn.rsa.setPrivateKey=function(e,t,n,r,i,a,s,o){var l={n:e,e:t,d:n,p:r,q:i,dP:a,dQ:s,qInv:o};return l.decrypt=function(c,h,p){typeof h=="string"?h=h.toUpperCase():h===void 0&&(h="RSAES-PKCS1-V1_5");var E=sn.rsa.decrypt(c,l,!1,!1);if(h==="RSAES-PKCS1-V1_5")h={decode:Rf};else if(h==="RSA-OAEP"||h==="RSAES-OAEP")h={decode:function(b,C){return Bt.pkcs1.decode_rsa_oaep(C,b,p)}};else if(["RAW","NONE","NULL",null].indexOf(h)!==-1)h={decode:function(b){return b}};else throw new Error('Unsupported encryption scheme: "'+h+'".');return h.decode(E,l,!1)},l.sign=function(c,h){var p=!1;typeof h=="string"&&(h=h.toUpperCase()),h===void 0||h==="RSASSA-PKCS1-V1_5"?(h={encode:pA},p=1):(h==="NONE"||h==="NULL"||h===null)&&(h={encode:function(){return c}},p=1);var E=h.encode(c,l.n.bitLength());return sn.rsa.encrypt(E,l,p)},l};sn.wrapRsaPrivateKey=function(e){return Fe.create(Fe.Class.UNIVERSAL,Fe.Type.SEQUENCE,!0,[Fe.create(Fe.Class.UNIVERSAL,Fe.Type.INTEGER,!1,Fe.integerToDer(0).getBytes()),Fe.create(Fe.Class.UNIVERSAL,Fe.Type.SEQUENCE,!0,[Fe.create(Fe.Class.UNIVERSAL,Fe.Type.OID,!1,Fe.oidToDer(sn.oids.rsaEncryption).getBytes()),Fe.create(Fe.Class.UNIVERSAL,Fe.Type.NULL,!1,"")]),Fe.create(Fe.Class.UNIVERSAL,Fe.Type.OCTETSTRING,!1,Fe.toDer(e).getBytes())])};sn.privateKeyFromAsn1=function(e){var t={},n=[];if(Fe.validate(e,lA,t,n)&&(e=Fe.fromDer(Bt.util.createBuffer(t.privateKey))),t={},n=[],!Fe.validate(e,cA,t,n)){var r=new Error("Cannot read private key. ASN.1 object does not contain an RSAPrivateKey.");throw r.errors=n,r}var i,a,s,o,l,c,h,p;return i=Bt.util.createBuffer(t.privateKeyModulus).toHex(),a=Bt.util.createBuffer(t.privateKeyPublicExponent).toHex(),s=Bt.util.createBuffer(t.privateKeyPrivateExponent).toHex(),o=Bt.util.createBuffer(t.privateKeyPrime1).toHex(),l=Bt.util.createBuffer(t.privateKeyPrime2).toHex(),c=Bt.util.createBuffer(t.privateKeyExponent1).toHex(),h=Bt.util.createBuffer(t.privateKeyExponent2).toHex(),p=Bt.util.createBuffer(t.privateKeyCoefficient).toHex(),sn.setRsaPrivateKey(new Pn(i,16),new Pn(a,16),new Pn(s,16),new Pn(o,16),new Pn(l,16),new Pn(c,16),new Pn(h,16),new Pn(p,16))};sn.privateKeyToAsn1=sn.privateKeyToRSAPrivateKey=function(e){return Fe.create(Fe.Class.UNIVERSAL,Fe.Type.SEQUENCE,!0,[Fe.create(Fe.Class.UNIVERSAL,Fe.Type.INTEGER,!1,Fe.integerToDer(0).getBytes()),Fe.create(Fe.Class.UNIVERSAL,Fe.Type.INTEGER,!1,Is(e.n)),Fe.create(Fe.Class.UNIVERSAL,Fe.Type.INTEGER,!1,Is(e.e)),Fe.create(Fe.Class.UNIVERSAL,Fe.Type.INTEGER,!1,Is(e.d)),Fe.create(Fe.Class.UNIVERSAL,Fe.Type.INTEGER,!1,Is(e.p)),Fe.create(Fe.Class.UNIVERSAL,Fe.Type.INTEGER,!1,Is(e.q)),Fe.create(Fe.Class.UNIVERSAL,Fe.Type.INTEGER,!1,Is(e.dP)),Fe.create(Fe.Class.UNIVERSAL,Fe.Type.INTEGER,!1,Is(e.dQ)),Fe.create(Fe.Class.UNIVERSAL,Fe.Type.INTEGER,!1,Is(e.qInv))])};sn.publicKeyFromAsn1=function(e){var t={},n=[];if(Fe.validate(e,hA,t,n)){var r=Fe.derToOid(t.publicKeyOid);if(r!==sn.oids.rsaEncryption){var i=new Error("Cannot read public key. Unknown OID.");throw i.oid=r,i}e=t.rsaPublicKey}if(n=[],!Fe.validate(e,fA,t,n)){var i=new Error("Cannot read public key. ASN.1 object does not contain an RSAPublicKey.");throw i.errors=n,i}var a=Bt.util.createBuffer(t.publicKeyModulus).toHex(),s=Bt.util.createBuffer(t.publicKeyExponent).toHex();return sn.setRsaPublicKey(new Pn(a,16),new Pn(s,16))};sn.publicKeyToAsn1=sn.publicKeyToSubjectPublicKeyInfo=function(e){return Fe.create(Fe.Class.UNIVERSAL,Fe.Type.SEQUENCE,!0,[Fe.create(Fe.Class.UNIVERSAL,Fe.Type.SEQUENCE,!0,[Fe.create(Fe.Class.UNIVERSAL,Fe.Type.OID,!1,Fe.oidToDer(sn.oids.rsaEncryption).getBytes()),Fe.create(Fe.Class.UNIVERSAL,Fe.Type.NULL,!1,"")]),Fe.create(Fe.Class.UNIVERSAL,Fe.Type.BITSTRING,!1,[sn.publicKeyToRSAPublicKey(e)])])};sn.publicKeyToRSAPublicKey=function(e){return Fe.create(Fe.Class.UNIVERSAL,Fe.Type.SEQUENCE,!0,[Fe.create(Fe.Class.UNIVERSAL,Fe.Type.INTEGER,!1,Is(e.n)),Fe.create(Fe.Class.UNIVERSAL,Fe.Type.INTEGER,!1,Is(e.e))])};function By(e,t,n){var r=Bt.util.createBuffer(),i=Math.ceil(t.n.bitLength()/8);if(e.length>i-11){var a=new Error("Message is too long for PKCS#1 v1.5 padding.");throw a.length=e.length,a.max=i-11,a}r.putByte(0),r.putByte(n);var s=i-3-e.length,o;if(n===0||n===1){o=n===0?0:255;for(var l=0;l<s;++l)r.putByte(o)}else for(;s>0;){for(var c=0,h=Bt.random.getBytes(s),l=0;l<s;++l)o=h.charCodeAt(l),o===0?++c:r.putByte(o);s=c}return r.putByte(0),r.putBytes(e),r}function Rf(e,t,n,r){var i=Math.ceil(t.n.bitLength()/8),a=Bt.util.createBuffer(e),s=a.getByte(),o=a.getByte();if(s!==0||n&&o!==0&&o!==1||!n&&o!=2||n&&o===0&&typeof r>"u")throw new Error("Encryption block is invalid.");var l=0;if(o===0){l=i-3-r;for(var c=0;c<l;++c)if(a.getByte()!==0)throw new Error("Encryption block is invalid.")}else if(o===1)for(l=0;a.length()>1;){if(a.getByte()!==255){--a.read;break}++l}else if(o===2)for(l=0;a.length()>1;){if(a.getByte()===0){--a.read;break}++l}var h=a.getByte();if(h!==0||l!==i-3-a.length())throw new Error("Encryption block is invalid.");return a.getBytes()}function gA(e,t,n){typeof t=="function"&&(n=t,t={}),t=t||{};var r={algorithm:{name:t.algorithm||"PRIMEINC",options:{workers:t.workers||2,workLoad:t.workLoad||100,workerScript:t.workerScript}}};"prng"in t&&(r.prng=t.prng),i();function i(){a(e.pBits,function(o,l){if(o)return n(o);if(e.p=l,e.q!==null)return s(o,e.q);a(e.qBits,s)})}function a(o,l){Bt.prime.generateProbablePrime(o,r,l)}function s(o,l){if(o)return n(o);if(e.q=l,e.p.compareTo(e.q)<0){var c=e.p;e.p=e.q,e.q=c}if(e.p.subtract(Pn.ONE).gcd(e.e).compareTo(Pn.ONE)!==0){e.p=null,i();return}if(e.q.subtract(Pn.ONE).gcd(e.e).compareTo(Pn.ONE)!==0){e.q=null,a(e.qBits,s);return}if(e.p1=e.p.subtract(Pn.ONE),e.q1=e.q.subtract(Pn.ONE),e.phi=e.p1.multiply(e.q1),e.phi.gcd(e.e).compareTo(Pn.ONE)!==0){e.p=e.q=null,i();return}if(e.n=e.p.multiply(e.q),e.n.bitLength()!==e.bits){e.q=null,a(e.qBits,s);return}var h=e.e.modInverse(e.phi);e.keys={privateKey:sn.rsa.setPrivateKey(e.n,e.e,h,e.p,e.q,h.mod(e.p1),h.mod(e.q1),e.q.modInverse(e.p)),publicKey:sn.rsa.setPublicKey(e.n,e.e)},n(null,e.keys)}}function Is(e){var t=e.toString(16);t[0]>="8"&&(t="00"+t);var n=Bt.util.hexToBytes(t);return n.length>1&&(n.charCodeAt(0)===0&&!(n.charCodeAt(1)&128)||n.charCodeAt(0)===255&&(n.charCodeAt(1)&128)===128)?n.substr(1):n}function mA(e){return e<=100?27:e<=150?18:e<=200?15:e<=250?12:e<=300?9:e<=350?8:e<=400?7:e<=500?6:e<=600?5:e<=800?4:e<=1250?3:2}function Ny(e){return Bt.util.isNodejs&&typeof Zd[e]=="function"}function Py(e){return typeof $a.globalScope<"u"&&typeof $a.globalScope.crypto=="object"&&typeof $a.globalScope.crypto.subtle=="object"&&typeof $a.globalScope.crypto.subtle[e]=="function"}function Dy(e){return typeof $a.globalScope<"u"&&typeof $a.globalScope.msCrypto=="object"&&typeof $a.globalScope.msCrypto.subtle=="object"&&typeof $a.globalScope.msCrypto.subtle[e]=="function"}function Ry(e){for(var t=Bt.util.hexToBytes(e.toString(16)),n=new Uint8Array(t.length),r=0;r<t.length;++r)n[r]=t.charCodeAt(r);return n}});var Xd=$e((E6,zy)=>{var Lt=hn();ko();is();Ql();Es();Ao();Af();lu();za();Vd();tc();Bn();typeof Uy>"u"&&(Uy=Lt.jsbn.BigInteger);var Uy,Ye=Lt.asn1,ln=Lt.pki=Lt.pki||{};zy.exports=ln.pbe=Lt.pbe=Lt.pbe||{};var hu=ln.oids,vA={name:"EncryptedPrivateKeyInfo",tagClass:Ye.Class.UNIVERSAL,type:Ye.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedPrivateKeyInfo.encryptionAlgorithm",tagClass:Ye.Class.UNIVERSAL,type:Ye.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:Ye.Class.UNIVERSAL,type:Ye.Type.OID,constructed:!1,capture:"encryptionOid"},{name:"AlgorithmIdentifier.parameters",tagClass:Ye.Class.UNIVERSAL,type:Ye.Type.SEQUENCE,constructed:!0,captureAsn1:"encryptionParams"}]},{name:"EncryptedPrivateKeyInfo.encryptedData",tagClass:Ye.Class.UNIVERSAL,type:Ye.Type.OCTETSTRING,constructed:!1,capture:"encryptedData"}]},yA={name:"PBES2Algorithms",tagClass:Ye.Class.UNIVERSAL,type:Ye.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc",tagClass:Ye.Class.UNIVERSAL,type:Ye.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc.oid",tagClass:Ye.Class.UNIVERSAL,type:Ye.Type.OID,constructed:!1,capture:"kdfOid"},{name:"PBES2Algorithms.params",tagClass:Ye.Class.UNIVERSAL,type:Ye.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.params.salt",tagClass:Ye.Class.UNIVERSAL,type:Ye.Type.OCTETSTRING,constructed:!1,capture:"kdfSalt"},{name:"PBES2Algorithms.params.iterationCount",tagClass:Ye.Class.UNIVERSAL,type:Ye.Type.INTEGER,constructed:!1,capture:"kdfIterationCount"},{name:"PBES2Algorithms.params.keyLength",tagClass:Ye.Class.UNIVERSAL,type:Ye.Type.INTEGER,constructed:!1,optional:!0,capture:"keyLength"},{name:"PBES2Algorithms.params.prf",tagClass:Ye.Class.UNIVERSAL,type:Ye.Type.SEQUENCE,constructed:!0,optional:!0,value:[{name:"PBES2Algorithms.params.prf.algorithm",tagClass:Ye.Class.UNIVERSAL,type:Ye.Type.OID,constructed:!1,capture:"prfOid"}]}]}]},{name:"PBES2Algorithms.encryptionScheme",tagClass:Ye.Class.UNIVERSAL,type:Ye.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.encryptionScheme.oid",tagClass:Ye.Class.UNIVERSAL,type:Ye.Type.OID,constructed:!1,capture:"encOid"},{name:"PBES2Algorithms.encryptionScheme.iv",tagClass:Ye.Class.UNIVERSAL,type:Ye.Type.OCTETSTRING,constructed:!1,capture:"encIv"}]}]},_A={name:"pkcs-12PbeParams",tagClass:Ye.Class.UNIVERSAL,type:Ye.Type.SEQUENCE,constructed:!0,value:[{name:"pkcs-12PbeParams.salt",tagClass:Ye.Class.UNIVERSAL,type:Ye.Type.OCTETSTRING,constructed:!1,capture:"salt"},{name:"pkcs-12PbeParams.iterations",tagClass:Ye.Class.UNIVERSAL,type:Ye.Type.INTEGER,constructed:!1,capture:"iterations"}]};ln.encryptPrivateKeyInfo=function(e,t,n){n=n||{},n.saltSize=n.saltSize||8,n.count=n.count||2048,n.algorithm=n.algorithm||"aes128",n.prfAlgorithm=n.prfAlgorithm||"sha1";var r=Lt.random.getBytesSync(n.saltSize),i=n.count,a=Ye.integerToDer(i),s,o,l;if(n.algorithm.indexOf("aes")===0||n.algorithm==="des"){var c,h,p;switch(n.algorithm){case"aes128":s=16,c=16,h=hu["aes128-CBC"],p=Lt.aes.createEncryptionCipher;break;case"aes192":s=24,c=16,h=hu["aes192-CBC"],p=Lt.aes.createEncryptionCipher;break;case"aes256":s=32,c=16,h=hu["aes256-CBC"],p=Lt.aes.createEncryptionCipher;break;case"des":s=8,c=8,h=hu.desCBC,p=Lt.des.createEncryptionCipher;break;default:var E=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw E.algorithm=n.algorithm,E}var b="hmacWith"+n.prfAlgorithm.toUpperCase(),C=Vy(b),N=Lt.pkcs5.pbkdf2(t,r,i,s,C),w=Lt.random.getBytesSync(c),I=p(N);I.start(w),I.update(Ye.toDer(e)),I.finish(),l=I.output.getBytes();var S=bA(r,a,s,b);o=Ye.create(Ye.Class.UNIVERSAL,Ye.Type.SEQUENCE,!0,[Ye.create(Ye.Class.UNIVERSAL,Ye.Type.OID,!1,Ye.oidToDer(hu.pkcs5PBES2).getBytes()),Ye.create(Ye.Class.UNIVERSAL,Ye.Type.SEQUENCE,!0,[Ye.create(Ye.Class.UNIVERSAL,Ye.Type.SEQUENCE,!0,[Ye.create(Ye.Class.UNIVERSAL,Ye.Type.OID,!1,Ye.oidToDer(hu.pkcs5PBKDF2).getBytes()),S]),Ye.create(Ye.Class.UNIVERSAL,Ye.Type.SEQUENCE,!0,[Ye.create(Ye.Class.UNIVERSAL,Ye.Type.OID,!1,Ye.oidToDer(h).getBytes()),Ye.create(Ye.Class.UNIVERSAL,Ye.Type.OCTETSTRING,!1,w)])])])}else if(n.algorithm==="3des"){s=24;var _=new Lt.util.ByteBuffer(r),N=ln.pbe.generatePkcs12Key(t,_,1,i,s),w=ln.pbe.generatePkcs12Key(t,_,2,i,s),I=Lt.des.createEncryptionCipher(N);I.start(w),I.update(Ye.toDer(e)),I.finish(),l=I.output.getBytes(),o=Ye.create(Ye.Class.UNIVERSAL,Ye.Type.SEQUENCE,!0,[Ye.create(Ye.Class.UNIVERSAL,Ye.Type.OID,!1,Ye.oidToDer(hu["pbeWithSHAAnd3-KeyTripleDES-CBC"]).getBytes()),Ye.create(Ye.Class.UNIVERSAL,Ye.Type.SEQUENCE,!0,[Ye.create(Ye.Class.UNIVERSAL,Ye.Type.OCTETSTRING,!1,r),Ye.create(Ye.Class.UNIVERSAL,Ye.Type.INTEGER,!1,a.getBytes())])])}else{var E=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw E.algorithm=n.algorithm,E}var P=Ye.create(Ye.Class.UNIVERSAL,Ye.Type.SEQUENCE,!0,[o,Ye.create(Ye.Class.UNIVERSAL,Ye.Type.OCTETSTRING,!1,l)]);return P};ln.decryptPrivateKeyInfo=function(e,t){var n=null,r={},i=[];if(!Ye.validate(e,vA,r,i)){var a=new Error("Cannot read encrypted private key. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw a.errors=i,a}var s=Ye.derToOid(r.encryptionOid),o=ln.pbe.getCipher(s,r.encryptionParams,t),l=Lt.util.createBuffer(r.encryptedData);return o.update(l),o.finish()&&(n=Ye.fromDer(o.output)),n};ln.encryptedPrivateKeyToPem=function(e,t){var n={type:"ENCRYPTED PRIVATE KEY",body:Ye.toDer(e).getBytes()};return Lt.pem.encode(n,{maxline:t})};ln.encryptedPrivateKeyFromPem=function(e){var t=Lt.pem.decode(e)[0];if(t.type!=="ENCRYPTED PRIVATE KEY"){var n=new Error('Could not convert encrypted private key from PEM; PEM header type is "ENCRYPTED PRIVATE KEY".');throw n.headerType=t.type,n}if(t.procType&&t.procType.type==="ENCRYPTED")throw new Error("Could not convert encrypted private key from PEM; PEM is encrypted.");return Ye.fromDer(t.body)};ln.encryptRsaPrivateKey=function(e,t,n){if(n=n||{},!n.legacy){var r=ln.wrapRsaPrivateKey(ln.privateKeyToAsn1(e));return r=ln.encryptPrivateKeyInfo(r,t,n),ln.encryptedPrivateKeyToPem(r)}var i,a,s,o;switch(n.algorithm){case"aes128":i="AES-128-CBC",s=16,a=Lt.random.getBytesSync(16),o=Lt.aes.createEncryptionCipher;break;case"aes192":i="AES-192-CBC",s=24,a=Lt.random.getBytesSync(16),o=Lt.aes.createEncryptionCipher;break;case"aes256":i="AES-256-CBC",s=32,a=Lt.random.getBytesSync(16),o=Lt.aes.createEncryptionCipher;break;case"3des":i="DES-EDE3-CBC",s=24,a=Lt.random.getBytesSync(8),o=Lt.des.createEncryptionCipher;break;case"des":i="DES-CBC",s=8,a=Lt.random.getBytesSync(8),o=Lt.des.createEncryptionCipher;break;default:var l=new Error('Could not encrypt RSA private key; unsupported encryption algorithm "'+n.algorithm+'".');throw l.algorithm=n.algorithm,l}var c=Lt.pbe.opensslDeriveBytes(t,a.substr(0,8),s),h=o(c);h.start(a),h.update(Ye.toDer(ln.privateKeyToAsn1(e))),h.finish();var p={type:"RSA PRIVATE KEY",procType:{version:"4",type:"ENCRYPTED"},dekInfo:{algorithm:i,parameters:Lt.util.bytesToHex(a).toUpperCase()},body:h.output.getBytes()};return Lt.pem.encode(p)};ln.decryptRsaPrivateKey=function(e,t){var n=null,r=Lt.pem.decode(e)[0];if(r.type!=="ENCRYPTED PRIVATE KEY"&&r.type!=="PRIVATE KEY"&&r.type!=="RSA PRIVATE KEY"){var i=new Error('Could not convert private key from PEM; PEM header type is not "ENCRYPTED PRIVATE KEY", "PRIVATE KEY", or "RSA PRIVATE KEY".');throw i.headerType=i,i}if(r.procType&&r.procType.type==="ENCRYPTED"){var a,s;switch(r.dekInfo.algorithm){case"DES-CBC":a=8,s=Lt.des.createDecryptionCipher;break;case"DES-EDE3-CBC":a=24,s=Lt.des.createDecryptionCipher;break;case"AES-128-CBC":a=16,s=Lt.aes.createDecryptionCipher;break;case"AES-192-CBC":a=24,s=Lt.aes.createDecryptionCipher;break;case"AES-256-CBC":a=32,s=Lt.aes.createDecryptionCipher;break;case"RC2-40-CBC":a=5,s=function(p){return Lt.rc2.createDecryptionCipher(p,40)};break;case"RC2-64-CBC":a=8,s=function(p){return Lt.rc2.createDecryptionCipher(p,64)};break;case"RC2-128-CBC":a=16,s=function(p){return Lt.rc2.createDecryptionCipher(p,128)};break;default:var i=new Error('Could not decrypt private key; unsupported encryption algorithm "'+r.dekInfo.algorithm+'".');throw i.algorithm=r.dekInfo.algorithm,i}var o=Lt.util.hexToBytes(r.dekInfo.parameters),l=Lt.pbe.opensslDeriveBytes(t,o.substr(0,8),a),c=s(l);if(c.start(o),c.update(Lt.util.createBuffer(r.body)),c.finish())n=c.output.getBytes();else return n}else n=r.body;return r.type==="ENCRYPTED PRIVATE KEY"?n=ln.decryptPrivateKeyInfo(Ye.fromDer(n),t):n=Ye.fromDer(n),n!==null&&(n=ln.privateKeyFromAsn1(n)),n};ln.pbe.generatePkcs12Key=function(e,t,n,r,i,a){var s,o;if(typeof a>"u"||a===null){if(!("sha1"in Lt.md))throw new Error('"sha1" hash algorithm unavailable.');a=Lt.md.sha1.create()}var l=a.digestLength,c=a.blockLength,h=new Lt.util.ByteBuffer,p=new Lt.util.ByteBuffer;if(e!=null){for(o=0;o<e.length;o++)p.putInt16(e.charCodeAt(o));p.putInt16(0)}var E=p.length(),b=t.length(),C=new Lt.util.ByteBuffer;C.fillWithByte(n,c);var N=c*Math.ceil(b/c),w=new Lt.util.ByteBuffer;for(o=0;o<N;o++)w.putByte(t.at(o%b));var I=c*Math.ceil(E/c),S=new Lt.util.ByteBuffer;for(o=0;o<I;o++)S.putByte(p.at(o%E));var _=w;_.putBuffer(S);for(var P=Math.ceil(i/l),v=1;v<=P;v++){var y=new Lt.util.ByteBuffer;y.putBytes(C.bytes()),y.putBytes(_.bytes());for(var $=0;$<r;$++)a.start(),a.update(y.getBytes()),y=a.digest();var Z=new Lt.util.ByteBuffer;for(o=0;o<c;o++)Z.putByte(y.at(o%l));var ce=Math.ceil(b/c)+Math.ceil(E/c),q=new Lt.util.ByteBuffer;for(s=0;s<ce;s++){var W=new Lt.util.ByteBuffer(_.getBytes(c)),O=511;for(o=Z.length()-1;o>=0;o--)O=O>>8,O+=Z.at(o)+W.at(o),W.setAt(o,O&255);q.putBuffer(W)}_=q,h.putBuffer(y)}return h.truncate(h.length()-i),h};ln.pbe.getCipher=function(e,t,n){switch(e){case ln.oids.pkcs5PBES2:return ln.pbe.getCipherForPBES2(e,t,n);case ln.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:case ln.oids["pbewithSHAAnd40BitRC2-CBC"]:return ln.pbe.getCipherForPKCS12PBE(e,t,n);default:var r=new Error("Cannot read encrypted PBE data block. Unsupported OID.");throw r.oid=e,r.supportedOids=["pkcs5PBES2","pbeWithSHAAnd3-KeyTripleDES-CBC","pbewithSHAAnd40BitRC2-CBC"],r}};ln.pbe.getCipherForPBES2=function(e,t,n){var r={},i=[];if(!Ye.validate(t,yA,r,i)){var a=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw a.errors=i,a}if(e=Ye.derToOid(r.kdfOid),e!==ln.oids.pkcs5PBKDF2){var a=new Error("Cannot read encrypted private key. Unsupported key derivation function OID.");throw a.oid=e,a.supportedOids=["pkcs5PBKDF2"],a}if(e=Ye.derToOid(r.encOid),e!==ln.oids["aes128-CBC"]&&e!==ln.oids["aes192-CBC"]&&e!==ln.oids["aes256-CBC"]&&e!==ln.oids["des-EDE3-CBC"]&&e!==ln.oids.desCBC){var a=new Error("Cannot read encrypted private key. Unsupported encryption scheme OID.");throw a.oid=e,a.supportedOids=["aes128-CBC","aes192-CBC","aes256-CBC","des-EDE3-CBC","desCBC"],a}var s=r.kdfSalt,o=Lt.util.createBuffer(r.kdfIterationCount);o=o.getInt(o.length()<<3);var l,c;switch(ln.oids[e]){case"aes128-CBC":l=16,c=Lt.aes.createDecryptionCipher;break;case"aes192-CBC":l=24,c=Lt.aes.createDecryptionCipher;break;case"aes256-CBC":l=32,c=Lt.aes.createDecryptionCipher;break;case"des-EDE3-CBC":l=24,c=Lt.des.createDecryptionCipher;break;case"desCBC":l=8,c=Lt.des.createDecryptionCipher;break}var h=Fy(r.prfOid),p=Lt.pkcs5.pbkdf2(n,s,o,l,h),E=r.encIv,b=c(p);return b.start(E),b};ln.pbe.getCipherForPKCS12PBE=function(e,t,n){var r={},i=[];if(!Ye.validate(t,_A,r,i)){var a=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw a.errors=i,a}var s=Lt.util.createBuffer(r.salt),o=Lt.util.createBuffer(r.iterations);o=o.getInt(o.length()<<3);var l,c,h;switch(e){case ln.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:l=24,c=8,h=Lt.des.startDecrypting;break;case ln.oids["pbewithSHAAnd40BitRC2-CBC"]:l=5,c=8,h=function(N,w){var I=Lt.rc2.createDecryptionCipher(N,40);return I.start(w,null),I};break;default:var a=new Error("Cannot read PKCS #12 PBE data block. Unsupported OID.");throw a.oid=e,a}var p=Fy(r.prfOid),E=ln.pbe.generatePkcs12Key(n,s,1,o,l,p);p.start();var b=ln.pbe.generatePkcs12Key(n,s,2,o,c,p);return h(E,b)};ln.pbe.opensslDeriveBytes=function(e,t,n,r){if(typeof r>"u"||r===null){if(!("md5"in Lt.md))throw new Error('"md5" hash algorithm unavailable.');r=Lt.md.md5.create()}t===null&&(t="");for(var i=[qy(r,e+t)],a=16,s=1;a<n;++s,a+=16)i.push(qy(r,i[s-1]+e+t));return i.join("").substr(0,n)};function qy(e,t){return e.start().update(t).digest().getBytes()}function Fy(e){var t;if(!e)t="hmacWithSHA1";else if(t=ln.oids[Ye.derToOid(e)],!t){var n=new Error("Unsupported PRF OID.");throw n.oid=e,n.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],n}return Vy(t)}function Vy(e){var t=Lt.md;switch(e){case"hmacWithSHA224":t=Lt.md.sha512;case"hmacWithSHA1":case"hmacWithSHA256":case"hmacWithSHA384":case"hmacWithSHA512":e=e.substr(8).toLowerCase();break;default:var n=new Error("Unsupported PRF algorithm.");throw n.algorithm=e,n.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],n}if(!t||!(e in t))throw new Error("Unknown hash algorithm: "+e);return t[e].create()}function bA(e,t,n,r){var i=Ye.create(Ye.Class.UNIVERSAL,Ye.Type.SEQUENCE,!0,[Ye.create(Ye.Class.UNIVERSAL,Ye.Type.OCTETSTRING,!1,e),Ye.create(Ye.Class.UNIVERSAL,Ye.Type.INTEGER,!1,t.getBytes())]);return r!=="hmacWithSHA1"&&i.value.push(Ye.create(Ye.Class.UNIVERSAL,Ye.Type.INTEGER,!1,Lt.util.hexToBytes(n.toString(16))),Ye.create(Ye.Class.UNIVERSAL,Ye.Type.SEQUENCE,!0,[Ye.create(Ye.Class.UNIVERSAL,Ye.Type.OID,!1,Ye.oidToDer(ln.oids[r]).getBytes()),Ye.create(Ye.Class.UNIVERSAL,Ye.Type.NULL,!1,"")])),i}});var Yd=$e((C6,jy)=>{var el=hn();is();Bn();var Ct=el.asn1,tl=jy.exports=el.pkcs7asn1=el.pkcs7asn1||{};el.pkcs7=el.pkcs7||{};el.pkcs7.asn1=tl;var Hy={name:"ContentInfo",tagClass:Ct.Class.UNIVERSAL,type:Ct.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.ContentType",tagClass:Ct.Class.UNIVERSAL,type:Ct.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:Ct.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,captureAsn1:"content"}]};tl.contentInfoValidator=Hy;var $y={name:"EncryptedContentInfo",tagClass:Ct.Class.UNIVERSAL,type:Ct.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentType",tagClass:Ct.Class.UNIVERSAL,type:Ct.Type.OID,constructed:!1,capture:"contentType"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm",tagClass:Ct.Class.UNIVERSAL,type:Ct.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentEncryptionAlgorithm.algorithm",tagClass:Ct.Class.UNIVERSAL,type:Ct.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm.parameter",tagClass:Ct.Class.UNIVERSAL,captureAsn1:"encParameter"}]},{name:"EncryptedContentInfo.encryptedContent",tagClass:Ct.Class.CONTEXT_SPECIFIC,type:0,capture:"encryptedContent",captureAsn1:"encryptedContentAsn1"}]};tl.envelopedDataValidator={name:"EnvelopedData",tagClass:Ct.Class.UNIVERSAL,type:Ct.Type.SEQUENCE,constructed:!0,value:[{name:"EnvelopedData.Version",tagClass:Ct.Class.UNIVERSAL,type:Ct.Type.INTEGER,constructed:!1,capture:"version"},{name:"EnvelopedData.RecipientInfos",tagClass:Ct.Class.UNIVERSAL,type:Ct.Type.SET,constructed:!0,captureAsn1:"recipientInfos"}].concat($y)};tl.encryptedDataValidator={name:"EncryptedData",tagClass:Ct.Class.UNIVERSAL,type:Ct.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedData.Version",tagClass:Ct.Class.UNIVERSAL,type:Ct.Type.INTEGER,constructed:!1,capture:"version"}].concat($y)};var wA={name:"SignerInfo",tagClass:Ct.Class.UNIVERSAL,type:Ct.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.version",tagClass:Ct.Class.UNIVERSAL,type:Ct.Type.INTEGER,constructed:!1},{name:"SignerInfo.issuerAndSerialNumber",tagClass:Ct.Class.UNIVERSAL,type:Ct.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.issuerAndSerialNumber.issuer",tagClass:Ct.Class.UNIVERSAL,type:Ct.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"SignerInfo.issuerAndSerialNumber.serialNumber",tagClass:Ct.Class.UNIVERSAL,type:Ct.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"SignerInfo.digestAlgorithm",tagClass:Ct.Class.UNIVERSAL,type:Ct.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.digestAlgorithm.algorithm",tagClass:Ct.Class.UNIVERSAL,type:Ct.Type.OID,constructed:!1,capture:"digestAlgorithm"},{name:"SignerInfo.digestAlgorithm.parameter",tagClass:Ct.Class.UNIVERSAL,constructed:!1,captureAsn1:"digestParameter",optional:!0}]},{name:"SignerInfo.authenticatedAttributes",tagClass:Ct.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"authenticatedAttributes"},{name:"SignerInfo.digestEncryptionAlgorithm",tagClass:Ct.Class.UNIVERSAL,type:Ct.Type.SEQUENCE,constructed:!0,capture:"signatureAlgorithm"},{name:"SignerInfo.encryptedDigest",tagClass:Ct.Class.UNIVERSAL,type:Ct.Type.OCTETSTRING,constructed:!1,capture:"signature"},{name:"SignerInfo.unauthenticatedAttributes",tagClass:Ct.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,capture:"unauthenticatedAttributes"}]};tl.signedDataValidator={name:"SignedData",tagClass:Ct.Class.UNIVERSAL,type:Ct.Type.SEQUENCE,constructed:!0,value:[{name:"SignedData.Version",tagClass:Ct.Class.UNIVERSAL,type:Ct.Type.INTEGER,constructed:!1,capture:"version"},{name:"SignedData.DigestAlgorithms",tagClass:Ct.Class.UNIVERSAL,type:Ct.Type.SET,constructed:!0,captureAsn1:"digestAlgorithms"},Hy,{name:"SignedData.Certificates",tagClass:Ct.Class.CONTEXT_SPECIFIC,type:0,optional:!0,captureAsn1:"certificates"},{name:"SignedData.CertificateRevocationLists",tagClass:Ct.Class.CONTEXT_SPECIFIC,type:1,optional:!0,captureAsn1:"crls"},{name:"SignedData.SignerInfos",tagClass:Ct.Class.UNIVERSAL,type:Ct.Type.SET,capture:"signerInfos",optional:!0,value:[wA]}]};tl.recipientInfoValidator={name:"RecipientInfo",tagClass:Ct.Class.UNIVERSAL,type:Ct.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.version",tagClass:Ct.Class.UNIVERSAL,type:Ct.Type.INTEGER,constructed:!1,capture:"version"},{name:"RecipientInfo.issuerAndSerial",tagClass:Ct.Class.UNIVERSAL,type:Ct.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.issuerAndSerial.issuer",tagClass:Ct.Class.UNIVERSAL,type:Ct.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"RecipientInfo.issuerAndSerial.serialNumber",tagClass:Ct.Class.UNIVERSAL,type:Ct.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"RecipientInfo.keyEncryptionAlgorithm",tagClass:Ct.Class.UNIVERSAL,type:Ct.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.keyEncryptionAlgorithm.algorithm",tagClass:Ct.Class.UNIVERSAL,type:Ct.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"RecipientInfo.keyEncryptionAlgorithm.parameter",tagClass:Ct.Class.UNIVERSAL,constructed:!1,captureAsn1:"encParameter",optional:!0}]},{name:"RecipientInfo.encryptedKey",tagClass:Ct.Class.UNIVERSAL,type:Ct.Type.OCTETSTRING,constructed:!1,capture:"encKey"}]}});var Qd=$e((S6,Ky)=>{var du=hn();Bn();du.mgf=du.mgf||{};var xA=Ky.exports=du.mgf.mgf1=du.mgf1=du.mgf1||{};xA.create=function(e){var t={generate:function(n,r){for(var i=new du.util.ByteBuffer,a=Math.ceil(r/e.digestLength),s=0;s<a;s++){var o=new du.util.ByteBuffer;o.putInt32(s),e.start(),e.update(n+o.getBytes()),i.putBuffer(e.digest())}return i.truncate(i.length()-r),i.getBytes()}};return t}});var Gy=$e((T6,Wy)=>{var Of=hn();Qd();Wy.exports=Of.mgf=Of.mgf||{};Of.mgf.mgf1=Of.mgf1});var Bf=$e((L6,Zy)=>{var pu=hn();za();Bn();var EA=Zy.exports=pu.pss=pu.pss||{};EA.create=function(e){arguments.length===3&&(e={md:arguments[0],mgf:arguments[1],saltLength:arguments[2]});var t=e.md,n=e.mgf,r=t.digestLength,i=e.salt||null;typeof i=="string"&&(i=pu.util.createBuffer(i));var a;if("saltLength"in e)a=e.saltLength;else if(i!==null)a=i.length();else throw new Error("Salt length not specified or specific salt not given.");if(i!==null&&i.length()!==a)throw new Error("Given salt length does not match length of given salt.");var s=e.prng||pu.random,o={};return o.encode=function(l,c){var h,p=c-1,E=Math.ceil(p/8),b=l.digest().getBytes();if(E<r+a+2)throw new Error("Message is too long to encrypt.");var C;i===null?C=s.getBytesSync(a):C=i.bytes();var N=new pu.util.ByteBuffer;N.fillWithByte(0,8),N.putBytes(b),N.putBytes(C),t.start(),t.update(N.getBytes());var w=t.digest().getBytes(),I=new pu.util.ByteBuffer;I.fillWithByte(0,E-a-r-2),I.putByte(1),I.putBytes(C);var S=I.getBytes(),_=E-r-1,P=n.generate(w,_),v="";for(h=0;h<_;h++)v+=String.fromCharCode(S.charCodeAt(h)^P.charCodeAt(h));var y=65280>>8*E-p&255;return v=String.fromCharCode(v.charCodeAt(0)&~y)+v.substr(1),v+w+String.fromCharCode(188)},o.verify=function(l,c,h){var p,E=h-1,b=Math.ceil(E/8);if(c=c.substr(-b),b<r+a+2)throw new Error("Inconsistent parameters to PSS signature verification.");if(c.charCodeAt(b-1)!==188)throw new Error("Encoded message does not end in 0xBC.");var C=b-r-1,N=c.substr(0,C),w=c.substr(C,r),I=65280>>8*b-E&255;if(N.charCodeAt(0)&I)throw new Error("Bits beyond keysize not zero as expected.");var S=n.generate(w,C),_="";for(p=0;p<C;p++)_+=String.fromCharCode(N.charCodeAt(p)^S.charCodeAt(p));_=String.fromCharCode(_.charCodeAt(0)&~I)+_.substr(1);var P=b-r-a-2;for(p=0;p<P;p++)if(_.charCodeAt(p)!==0)throw new Error("Leftmost octets not zero as expected");if(_.charCodeAt(P)!==1)throw new Error("Inconsistent PSS signature, 0x01 marker not found");var v=_.substr(-a),y=new pu.util.ByteBuffer;y.fillWithByte(0,8),y.putBytes(l),y.putBytes(v),t.start(),t.update(y.getBytes());var $=t.digest().getBytes();return w===$},o}});var qf=$e((k6,e_)=>{var Mt=hn();ko();is();Ql();Es();Gy();Ao();lu();Bf();tc();Bn();var J=Mt.asn1,vt=e_.exports=Mt.pki=Mt.pki||{},Dn=vt.oids,Dr={};Dr.CN=Dn.commonName;Dr.commonName="CN";Dr.C=Dn.countryName;Dr.countryName="C";Dr.L=Dn.localityName;Dr.localityName="L";Dr.ST=Dn.stateOrProvinceName;Dr.stateOrProvinceName="ST";Dr.O=Dn.organizationName;Dr.organizationName="O";Dr.OU=Dn.organizationalUnitName;Dr.organizationalUnitName="OU";Dr.E=Dn.emailAddress;Dr.emailAddress="E";var Yy=Mt.pki.rsa.publicKeyValidator,CA={name:"Certificate",tagClass:J.Class.UNIVERSAL,type:J.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate",tagClass:J.Class.UNIVERSAL,type:J.Type.SEQUENCE,constructed:!0,captureAsn1:"tbsCertificate",value:[{name:"Certificate.TBSCertificate.version",tagClass:J.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.version.integer",tagClass:J.Class.UNIVERSAL,type:J.Type.INTEGER,constructed:!1,capture:"certVersion"}]},{name:"Certificate.TBSCertificate.serialNumber",tagClass:J.Class.UNIVERSAL,type:J.Type.INTEGER,constructed:!1,capture:"certSerialNumber"},{name:"Certificate.TBSCertificate.signature",tagClass:J.Class.UNIVERSAL,type:J.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.signature.algorithm",tagClass:J.Class.UNIVERSAL,type:J.Type.OID,constructed:!1,capture:"certinfoSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:J.Class.UNIVERSAL,optional:!0,captureAsn1:"certinfoSignatureParams"}]},{name:"Certificate.TBSCertificate.issuer",tagClass:J.Class.UNIVERSAL,type:J.Type.SEQUENCE,constructed:!0,captureAsn1:"certIssuer"},{name:"Certificate.TBSCertificate.validity",tagClass:J.Class.UNIVERSAL,type:J.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.validity.notBefore (utc)",tagClass:J.Class.UNIVERSAL,type:J.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity1UTCTime"},{name:"Certificate.TBSCertificate.validity.notBefore (generalized)",tagClass:J.Class.UNIVERSAL,type:J.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity2GeneralizedTime"},{name:"Certificate.TBSCertificate.validity.notAfter (utc)",tagClass:J.Class.UNIVERSAL,type:J.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity3UTCTime"},{name:"Certificate.TBSCertificate.validity.notAfter (generalized)",tagClass:J.Class.UNIVERSAL,type:J.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity4GeneralizedTime"}]},{name:"Certificate.TBSCertificate.subject",tagClass:J.Class.UNIVERSAL,type:J.Type.SEQUENCE,constructed:!0,captureAsn1:"certSubject"},Yy,{name:"Certificate.TBSCertificate.issuerUniqueID",tagClass:J.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.issuerUniqueID.id",tagClass:J.Class.UNIVERSAL,type:J.Type.BITSTRING,constructed:!1,captureBitStringValue:"certIssuerUniqueId"}]},{name:"Certificate.TBSCertificate.subjectUniqueID",tagClass:J.Class.CONTEXT_SPECIFIC,type:2,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.subjectUniqueID.id",tagClass:J.Class.UNIVERSAL,type:J.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSubjectUniqueId"}]},{name:"Certificate.TBSCertificate.extensions",tagClass:J.Class.CONTEXT_SPECIFIC,type:3,constructed:!0,captureAsn1:"certExtensions",optional:!0}]},{name:"Certificate.signatureAlgorithm",tagClass:J.Class.UNIVERSAL,type:J.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.signatureAlgorithm.algorithm",tagClass:J.Class.UNIVERSAL,type:J.Type.OID,constructed:!1,capture:"certSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:J.Class.UNIVERSAL,optional:!0,captureAsn1:"certSignatureParams"}]},{name:"Certificate.signatureValue",tagClass:J.Class.UNIVERSAL,type:J.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSignature"}]},SA={name:"rsapss",tagClass:J.Class.UNIVERSAL,type:J.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.hashAlgorithm",tagClass:J.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier",tagClass:J.Class.UNIVERSAL,type:J.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier.algorithm",tagClass:J.Class.UNIVERSAL,type:J.Type.OID,constructed:!1,capture:"hashOid"}]}]},{name:"rsapss.maskGenAlgorithm",tagClass:J.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier",tagClass:J.Class.UNIVERSAL,type:J.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.algorithm",tagClass:J.Class.UNIVERSAL,type:J.Type.OID,constructed:!1,capture:"maskGenOid"},{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params",tagClass:J.Class.UNIVERSAL,type:J.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params.algorithm",tagClass:J.Class.UNIVERSAL,type:J.Type.OID,constructed:!1,capture:"maskGenHashOid"}]}]}]},{name:"rsapss.saltLength",tagClass:J.Class.CONTEXT_SPECIFIC,type:2,optional:!0,value:[{name:"rsapss.saltLength.saltLength",tagClass:J.Class.UNIVERSAL,type:J.Class.INTEGER,constructed:!1,capture:"saltLength"}]},{name:"rsapss.trailerField",tagClass:J.Class.CONTEXT_SPECIFIC,type:3,optional:!0,value:[{name:"rsapss.trailer.trailer",tagClass:J.Class.UNIVERSAL,type:J.Class.INTEGER,constructed:!1,capture:"trailer"}]}]},TA={name:"CertificationRequestInfo",tagClass:J.Class.UNIVERSAL,type:J.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfo",value:[{name:"CertificationRequestInfo.integer",tagClass:J.Class.UNIVERSAL,type:J.Type.INTEGER,constructed:!1,capture:"certificationRequestInfoVersion"},{name:"CertificationRequestInfo.subject",tagClass:J.Class.UNIVERSAL,type:J.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfoSubject"},Yy,{name:"CertificationRequestInfo.attributes",tagClass:J.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"certificationRequestInfoAttributes",value:[{name:"CertificationRequestInfo.attributes",tagClass:J.Class.UNIVERSAL,type:J.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequestInfo.attributes.type",tagClass:J.Class.UNIVERSAL,type:J.Type.OID,constructed:!1},{name:"CertificationRequestInfo.attributes.value",tagClass:J.Class.UNIVERSAL,type:J.Type.SET,constructed:!0}]}]}]},LA={name:"CertificationRequest",tagClass:J.Class.UNIVERSAL,type:J.Type.SEQUENCE,constructed:!0,captureAsn1:"csr",value:[TA,{name:"CertificationRequest.signatureAlgorithm",tagClass:J.Class.UNIVERSAL,type:J.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequest.signatureAlgorithm.algorithm",tagClass:J.Class.UNIVERSAL,type:J.Type.OID,constructed:!1,capture:"csrSignatureOid"},{name:"CertificationRequest.signatureAlgorithm.parameters",tagClass:J.Class.UNIVERSAL,optional:!0,captureAsn1:"csrSignatureParams"}]},{name:"CertificationRequest.signature",tagClass:J.Class.UNIVERSAL,type:J.Type.BITSTRING,constructed:!1,captureBitStringValue:"csrSignature"}]};vt.RDNAttributesAsArray=function(e,t){for(var n=[],r,i,a,s=0;s<e.value.length;++s){r=e.value[s];for(var o=0;o<r.value.length;++o)a={},i=r.value[o],a.type=J.derToOid(i.value[0].value),a.value=i.value[1].value,a.valueTagClass=i.value[1].type,a.type in Dn&&(a.name=Dn[a.type],a.name in Dr&&(a.shortName=Dr[a.name])),t&&(t.update(a.type),t.update(a.value)),n.push(a)}return n};vt.CRIAttributesAsArray=function(e){for(var t=[],n=0;n<e.length;++n)for(var r=e[n],i=J.derToOid(r.value[0].value),a=r.value[1].value,s=0;s<a.length;++s){var o={};if(o.type=i,o.value=a[s].value,o.valueTagClass=a[s].type,o.type in Dn&&(o.name=Dn[o.type],o.name in Dr&&(o.shortName=Dr[o.name])),o.type===Dn.extensionRequest){o.extensions=[];for(var l=0;l<o.value.length;++l)o.extensions.push(vt.certificateExtensionFromAsn1(o.value[l]))}t.push(o)}return t};function Po(e,t){typeof t=="string"&&(t={shortName:t});for(var n=null,r,i=0;n===null&&i<e.attributes.length;++i)r=e.attributes[i],(t.type&&t.type===r.type||t.name&&t.name===r.name||t.shortName&&t.shortName===r.shortName)&&(n=r);return n}var Mf=function(e,t,n){var r={};if(e!==Dn["RSASSA-PSS"])return r;n&&(r={hash:{algorithmOid:Dn.sha1},mgf:{algorithmOid:Dn.mgf1,hash:{algorithmOid:Dn.sha1}},saltLength:20});var i={},a=[];if(!J.validate(t,SA,i,a)){var s=new Error("Cannot read RSASSA-PSS parameter block.");throw s.errors=a,s}return i.hashOid!==void 0&&(r.hash=r.hash||{},r.hash.algorithmOid=J.derToOid(i.hashOid)),i.maskGenOid!==void 0&&(r.mgf=r.mgf||{},r.mgf.algorithmOid=J.derToOid(i.maskGenOid),r.mgf.hash=r.mgf.hash||{},r.mgf.hash.algorithmOid=J.derToOid(i.maskGenHashOid)),i.saltLength!==void 0&&(r.saltLength=i.saltLength.charCodeAt(0)),r},Uf=function(e){switch(Dn[e.signatureOid]){case"sha1WithRSAEncryption":case"sha1WithRSASignature":return Mt.md.sha1.create();case"md5WithRSAEncryption":return Mt.md.md5.create();case"sha256WithRSAEncryption":return Mt.md.sha256.create();case"sha384WithRSAEncryption":return Mt.md.sha384.create();case"sha512WithRSAEncryption":return Mt.md.sha512.create();case"RSASSA-PSS":return Mt.md.sha256.create();default:var t=new Error("Could not compute "+e.type+" digest. Unknown signature OID.");throw t.signatureOid=e.signatureOid,t}},Qy=function(e){var t=e.certificate,n;switch(t.signatureOid){case Dn.sha1WithRSAEncryption:case Dn.sha1WithRSASignature:break;case Dn["RSASSA-PSS"]:var r,i;if(r=Dn[t.signatureParameters.mgf.hash.algorithmOid],r===void 0||Mt.md[r]===void 0){var a=new Error("Unsupported MGF hash function.");throw a.oid=t.signatureParameters.mgf.hash.algorithmOid,a.name=r,a}if(i=Dn[t.signatureParameters.mgf.algorithmOid],i===void 0||Mt.mgf[i]===void 0){var a=new Error("Unsupported MGF function.");throw a.oid=t.signatureParameters.mgf.algorithmOid,a.name=i,a}if(i=Mt.mgf[i].create(Mt.md[r].create()),r=Dn[t.signatureParameters.hash.algorithmOid],r===void 0||Mt.md[r]===void 0){var a=new Error("Unsupported RSASSA-PSS hash function.");throw a.oid=t.signatureParameters.hash.algorithmOid,a.name=r,a}n=Mt.pss.create(Mt.md[r].create(),i,t.signatureParameters.saltLength);break}return t.publicKey.verify(e.md.digest().getBytes(),e.signature,n)};vt.certificateFromPem=function(e,t,n){var r=Mt.pem.decode(e)[0];if(r.type!=="CERTIFICATE"&&r.type!=="X509 CERTIFICATE"&&r.type!=="TRUSTED CERTIFICATE"){var i=new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');throw i.headerType=r.type,i}if(r.procType&&r.procType.type==="ENCRYPTED")throw new Error("Could not convert certificate from PEM; PEM is encrypted.");var a=J.fromDer(r.body,n);return vt.certificateFromAsn1(a,t)};vt.certificateToPem=function(e,t){var n={type:"CERTIFICATE",body:J.toDer(vt.certificateToAsn1(e)).getBytes()};return Mt.pem.encode(n,{maxline:t})};vt.publicKeyFromPem=function(e){var t=Mt.pem.decode(e)[0];if(t.type!=="PUBLIC KEY"&&t.type!=="RSA PUBLIC KEY"){var n=new Error('Could not convert public key from PEM; PEM header type is not "PUBLIC KEY" or "RSA PUBLIC KEY".');throw n.headerType=t.type,n}if(t.procType&&t.procType.type==="ENCRYPTED")throw new Error("Could not convert public key from PEM; PEM is encrypted.");var r=J.fromDer(t.body);return vt.publicKeyFromAsn1(r)};vt.publicKeyToPem=function(e,t){var n={type:"PUBLIC KEY",body:J.toDer(vt.publicKeyToAsn1(e)).getBytes()};return Mt.pem.encode(n,{maxline:t})};vt.publicKeyToRSAPublicKeyPem=function(e,t){var n={type:"RSA PUBLIC KEY",body:J.toDer(vt.publicKeyToRSAPublicKey(e)).getBytes()};return Mt.pem.encode(n,{maxline:t})};vt.getPublicKeyFingerprint=function(e,t){t=t||{};var n=t.md||Mt.md.sha1.create(),r=t.type||"RSAPublicKey",i;switch(r){case"RSAPublicKey":i=J.toDer(vt.publicKeyToRSAPublicKey(e)).getBytes();break;case"SubjectPublicKeyInfo":i=J.toDer(vt.publicKeyToAsn1(e)).getBytes();break;default:throw new Error('Unknown fingerprint type "'+t.type+'".')}n.start(),n.update(i);var a=n.digest();if(t.encoding==="hex"){var s=a.toHex();return t.delimiter?s.match(/.{2}/g).join(t.delimiter):s}else{if(t.encoding==="binary")return a.getBytes();if(t.encoding)throw new Error('Unknown encoding "'+t.encoding+'".')}return a};vt.certificationRequestFromPem=function(e,t,n){var r=Mt.pem.decode(e)[0];if(r.type!=="CERTIFICATE REQUEST"){var i=new Error('Could not convert certification request from PEM; PEM header type is not "CERTIFICATE REQUEST".');throw i.headerType=r.type,i}if(r.procType&&r.procType.type==="ENCRYPTED")throw new Error("Could not convert certification request from PEM; PEM is encrypted.");var a=J.fromDer(r.body,n);return vt.certificationRequestFromAsn1(a,t)};vt.certificationRequestToPem=function(e,t){var n={type:"CERTIFICATE REQUEST",body:J.toDer(vt.certificationRequestToAsn1(e)).getBytes()};return Mt.pem.encode(n,{maxline:t})};vt.createCertificate=function(){var e={};return e.version=2,e.serialNumber="00",e.signatureOid=null,e.signature=null,e.siginfo={},e.siginfo.algorithmOid=null,e.validity={},e.validity.notBefore=new Date,e.validity.notAfter=new Date,e.issuer={},e.issuer.getField=function(t){return Po(e.issuer,t)},e.issuer.addField=function(t){ja([t]),e.issuer.attributes.push(t)},e.issuer.attributes=[],e.issuer.hash=null,e.subject={},e.subject.getField=function(t){return Po(e.subject,t)},e.subject.addField=function(t){ja([t]),e.subject.attributes.push(t)},e.subject.attributes=[],e.subject.hash=null,e.extensions=[],e.publicKey=null,e.md=null,e.setSubject=function(t,n){ja(t),e.subject.attributes=t,delete e.subject.uniqueId,n&&(e.subject.uniqueId=n),e.subject.hash=null},e.setIssuer=function(t,n){ja(t),e.issuer.attributes=t,delete e.issuer.uniqueId,n&&(e.issuer.uniqueId=n),e.issuer.hash=null},e.setExtensions=function(t){for(var n=0;n<t.length;++n)Jy(t[n],{cert:e});e.extensions=t},e.getExtension=function(t){typeof t=="string"&&(t={name:t});for(var n=null,r,i=0;n===null&&i<e.extensions.length;++i)r=e.extensions[i],(t.id&&r.id===t.id||t.name&&r.name===t.name)&&(n=r);return n},e.sign=function(t,n){e.md=n||Mt.md.sha1.create();var r=Dn[e.md.algorithm+"WithRSAEncryption"];if(!r){var i=new Error("Could not compute certificate digest. Unknown message digest algorithm OID.");throw i.algorithm=e.md.algorithm,i}e.signatureOid=e.siginfo.algorithmOid=r,e.tbsCertificate=vt.getTBSCertificate(e);var a=J.toDer(e.tbsCertificate);e.md.update(a.getBytes()),e.signature=t.sign(e.md)},e.verify=function(t){var n=!1;if(!e.issued(t)){var r=t.issuer,i=e.subject,a=new Error("The parent certificate did not issue the given child certificate; the child certificate's issuer does not match the parent's subject.");throw a.expectedIssuer=i.attributes,a.actualIssuer=r.attributes,a}var s=t.md;if(s===null){s=Uf({signatureOid:t.signatureOid,type:"certificate"});var o=t.tbsCertificate||vt.getTBSCertificate(t),l=J.toDer(o);s.update(l.getBytes())}return s!==null&&(n=Qy({certificate:e,md:s,signature:t.signature})),n},e.isIssuer=function(t){var n=!1,r=e.issuer,i=t.subject;if(r.hash&&i.hash)n=r.hash===i.hash;else if(r.attributes.length===i.attributes.length){n=!0;for(var a,s,o=0;n&&o<r.attributes.length;++o)a=r.attributes[o],s=i.attributes[o],(a.type!==s.type||a.value!==s.value)&&(n=!1)}return n},e.issued=function(t){return t.isIssuer(e)},e.generateSubjectKeyIdentifier=function(){return vt.getPublicKeyFingerprint(e.publicKey,{type:"RSAPublicKey"})},e.verifySubjectKeyIdentifier=function(){for(var t=Dn.subjectKeyIdentifier,n=0;n<e.extensions.length;++n){var r=e.extensions[n];if(r.id===t){var i=e.generateSubjectKeyIdentifier().getBytes();return Mt.util.hexToBytes(r.subjectKeyIdentifier)===i}}return!1},e};vt.certificateFromAsn1=function(e,t){var n={},r=[];if(!J.validate(e,CA,n,r)){var i=new Error("Cannot read X.509 certificate. ASN.1 object is not an X509v3 Certificate.");throw i.errors=r,i}var a=J.derToOid(n.publicKeyOid);if(a!==vt.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var s=vt.createCertificate();s.version=n.certVersion?n.certVersion.charCodeAt(0):0;var o=Mt.util.createBuffer(n.certSerialNumber);s.serialNumber=o.toHex(),s.signatureOid=Mt.asn1.derToOid(n.certSignatureOid),s.signatureParameters=Mf(s.signatureOid,n.certSignatureParams,!0),s.siginfo.algorithmOid=Mt.asn1.derToOid(n.certinfoSignatureOid),s.siginfo.parameters=Mf(s.siginfo.algorithmOid,n.certinfoSignatureParams,!1),s.signature=n.certSignature;var l=[];if(n.certValidity1UTCTime!==void 0&&l.push(J.utcTimeToDate(n.certValidity1UTCTime)),n.certValidity2GeneralizedTime!==void 0&&l.push(J.generalizedTimeToDate(n.certValidity2GeneralizedTime)),n.certValidity3UTCTime!==void 0&&l.push(J.utcTimeToDate(n.certValidity3UTCTime)),n.certValidity4GeneralizedTime!==void 0&&l.push(J.generalizedTimeToDate(n.certValidity4GeneralizedTime)),l.length>2)throw new Error("Cannot read notBefore/notAfter validity times; more than two times were provided in the certificate.");if(l.length<2)throw new Error("Cannot read notBefore/notAfter validity times; they were not provided as either UTCTime or GeneralizedTime.");if(s.validity.notBefore=l[0],s.validity.notAfter=l[1],s.tbsCertificate=n.tbsCertificate,t){s.md=Uf({signatureOid:s.signatureOid,type:"certificate"});var c=J.toDer(s.tbsCertificate);s.md.update(c.getBytes())}var h=Mt.md.sha1.create(),p=J.toDer(n.certIssuer);h.update(p.getBytes()),s.issuer.getField=function(C){return Po(s.issuer,C)},s.issuer.addField=function(C){ja([C]),s.issuer.attributes.push(C)},s.issuer.attributes=vt.RDNAttributesAsArray(n.certIssuer),n.certIssuerUniqueId&&(s.issuer.uniqueId=n.certIssuerUniqueId),s.issuer.hash=h.digest().toHex();var E=Mt.md.sha1.create(),b=J.toDer(n.certSubject);return E.update(b.getBytes()),s.subject.getField=function(C){return Po(s.subject,C)},s.subject.addField=function(C){ja([C]),s.subject.attributes.push(C)},s.subject.attributes=vt.RDNAttributesAsArray(n.certSubject),n.certSubjectUniqueId&&(s.subject.uniqueId=n.certSubjectUniqueId),s.subject.hash=E.digest().toHex(),n.certExtensions?s.extensions=vt.certificateExtensionsFromAsn1(n.certExtensions):s.extensions=[],s.publicKey=vt.publicKeyFromAsn1(n.subjectPublicKeyInfo),s};vt.certificateExtensionsFromAsn1=function(e){for(var t=[],n=0;n<e.value.length;++n)for(var r=e.value[n],i=0;i<r.value.length;++i)t.push(vt.certificateExtensionFromAsn1(r.value[i]));return t};vt.certificateExtensionFromAsn1=function(e){var t={};if(t.id=J.derToOid(e.value[0].value),t.critical=!1,e.value[1].type===J.Type.BOOLEAN?(t.critical=e.value[1].value.charCodeAt(0)!==0,t.value=e.value[2].value):t.value=e.value[1].value,t.id in Dn){if(t.name=Dn[t.id],t.name==="keyUsage"){var n=J.fromDer(t.value),r=0,i=0;n.value.length>1&&(r=n.value.charCodeAt(1),i=n.value.length>2?n.value.charCodeAt(2):0),t.digitalSignature=(r&128)===128,t.nonRepudiation=(r&64)===64,t.keyEncipherment=(r&32)===32,t.dataEncipherment=(r&16)===16,t.keyAgreement=(r&8)===8,t.keyCertSign=(r&4)===4,t.cRLSign=(r&2)===2,t.encipherOnly=(r&1)===1,t.decipherOnly=(i&128)===128}else if(t.name==="basicConstraints"){var n=J.fromDer(t.value);n.value.length>0&&n.value[0].type===J.Type.BOOLEAN?t.cA=n.value[0].value.charCodeAt(0)!==0:t.cA=!1;var a=null;n.value.length>0&&n.value[0].type===J.Type.INTEGER?a=n.value[0].value:n.value.length>1&&(a=n.value[1].value),a!==null&&(t.pathLenConstraint=J.derToInteger(a))}else if(t.name==="extKeyUsage")for(var n=J.fromDer(t.value),s=0;s<n.value.length;++s){var o=J.derToOid(n.value[s].value);o in Dn?t[Dn[o]]=!0:t[o]=!0}else if(t.name==="nsCertType"){var n=J.fromDer(t.value),r=0;n.value.length>1&&(r=n.value.charCodeAt(1)),t.client=(r&128)===128,t.server=(r&64)===64,t.email=(r&32)===32,t.objsign=(r&16)===16,t.reserved=(r&8)===8,t.sslCA=(r&4)===4,t.emailCA=(r&2)===2,t.objCA=(r&1)===1}else if(t.name==="subjectAltName"||t.name==="issuerAltName"){t.altNames=[];for(var l,n=J.fromDer(t.value),c=0;c<n.value.length;++c){l=n.value[c];var h={type:l.type,value:l.value};switch(t.altNames.push(h),l.type){case 1:case 2:case 6:break;case 7:h.ip=Mt.util.bytesToIP(l.value);break;case 8:h.oid=J.derToOid(l.value);break;default:}}}else if(t.name==="subjectKeyIdentifier"){var n=J.fromDer(t.value);t.subjectKeyIdentifier=Mt.util.bytesToHex(n.value)}}return t};vt.certificationRequestFromAsn1=function(e,t){var n={},r=[];if(!J.validate(e,LA,n,r)){var i=new Error("Cannot read PKCS#10 certificate request. ASN.1 object is not a PKCS#10 CertificationRequest.");throw i.errors=r,i}var a=J.derToOid(n.publicKeyOid);if(a!==vt.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var s=vt.createCertificationRequest();if(s.version=n.csrVersion?n.csrVersion.charCodeAt(0):0,s.signatureOid=Mt.asn1.derToOid(n.csrSignatureOid),s.signatureParameters=Mf(s.signatureOid,n.csrSignatureParams,!0),s.siginfo.algorithmOid=Mt.asn1.derToOid(n.csrSignatureOid),s.siginfo.parameters=Mf(s.siginfo.algorithmOid,n.csrSignatureParams,!1),s.signature=n.csrSignature,s.certificationRequestInfo=n.certificationRequestInfo,t){s.md=Uf({signatureOid:s.signatureOid,type:"certification request"});var o=J.toDer(s.certificationRequestInfo);s.md.update(o.getBytes())}var l=Mt.md.sha1.create();return s.subject.getField=function(c){return Po(s.subject,c)},s.subject.addField=function(c){ja([c]),s.subject.attributes.push(c)},s.subject.attributes=vt.RDNAttributesAsArray(n.certificationRequestInfoSubject,l),s.subject.hash=l.digest().toHex(),s.publicKey=vt.publicKeyFromAsn1(n.subjectPublicKeyInfo),s.getAttribute=function(c){return Po(s,c)},s.addAttribute=function(c){ja([c]),s.attributes.push(c)},s.attributes=vt.CRIAttributesAsArray(n.certificationRequestInfoAttributes||[]),s};vt.createCertificationRequest=function(){var e={};return e.version=0,e.signatureOid=null,e.signature=null,e.siginfo={},e.siginfo.algorithmOid=null,e.subject={},e.subject.getField=function(t){return Po(e.subject,t)},e.subject.addField=function(t){ja([t]),e.subject.attributes.push(t)},e.subject.attributes=[],e.subject.hash=null,e.publicKey=null,e.attributes=[],e.getAttribute=function(t){return Po(e,t)},e.addAttribute=function(t){ja([t]),e.attributes.push(t)},e.md=null,e.setSubject=function(t){ja(t),e.subject.attributes=t,e.subject.hash=null},e.setAttributes=function(t){ja(t),e.attributes=t},e.sign=function(t,n){e.md=n||Mt.md.sha1.create();var r=Dn[e.md.algorithm+"WithRSAEncryption"];if(!r){var i=new Error("Could not compute certification request digest. Unknown message digest algorithm OID.");throw i.algorithm=e.md.algorithm,i}e.signatureOid=e.siginfo.algorithmOid=r,e.certificationRequestInfo=vt.getCertificationRequestInfo(e);var a=J.toDer(e.certificationRequestInfo);e.md.update(a.getBytes()),e.signature=t.sign(e.md)},e.verify=function(){var t=!1,n=e.md;if(n===null){n=Uf({signatureOid:e.signatureOid,type:"certification request"});var r=e.certificationRequestInfo||vt.getCertificationRequestInfo(e),i=J.toDer(r);n.update(i.getBytes())}return n!==null&&(t=Qy({certificate:e,md:n,signature:e.signature})),t},e};function nl(e){for(var t=J.create(J.Class.UNIVERSAL,J.Type.SEQUENCE,!0,[]),n,r,i=e.attributes,a=0;a<i.length;++a){n=i[a];var s=n.value,o=J.Type.PRINTABLESTRING;"valueTagClass"in n&&(o=n.valueTagClass,o===J.Type.UTF8&&(s=Mt.util.encodeUtf8(s))),r=J.create(J.Class.UNIVERSAL,J.Type.SET,!0,[J.create(J.Class.UNIVERSAL,J.Type.SEQUENCE,!0,[J.create(J.Class.UNIVERSAL,J.Type.OID,!1,J.oidToDer(n.type).getBytes()),J.create(J.Class.UNIVERSAL,o,!1,s)])]),t.value.push(r)}return t}function ja(e){for(var t,n=0;n<e.length;++n){if(t=e[n],typeof t.name>"u"&&(t.type&&t.type in vt.oids?t.name=vt.oids[t.type]:t.shortName&&t.shortName in Dr&&(t.name=vt.oids[Dr[t.shortName]])),typeof t.type>"u")if(t.name&&t.name in vt.oids)t.type=vt.oids[t.name];else{var r=new Error("Attribute type not specified.");throw r.attribute=t,r}if(typeof t.shortName>"u"&&t.name&&t.name in Dr&&(t.shortName=Dr[t.name]),t.type===Dn.extensionRequest&&(t.valueConstructed=!0,t.valueTagClass=J.Type.SEQUENCE,!t.value&&t.extensions)){t.value=[];for(var i=0;i<t.extensions.length;++i)t.value.push(vt.certificateExtensionToAsn1(Jy(t.extensions[i])))}if(typeof t.value>"u"){var r=new Error("Attribute value not specified.");throw r.attribute=t,r}}}function Jy(e,t){if(t=t||{},typeof e.name>"u"&&e.id&&e.id in vt.oids&&(e.name=vt.oids[e.id]),typeof e.id>"u")if(e.name&&e.name in vt.oids)e.id=vt.oids[e.name];else{var n=new Error("Extension ID not specified.");throw n.extension=e,n}if(typeof e.value<"u")return e;if(e.name==="keyUsage"){var r=0,i=0,a=0;e.digitalSignature&&(i|=128,r=7),e.nonRepudiation&&(i|=64,r=6),e.keyEncipherment&&(i|=32,r=5),e.dataEncipherment&&(i|=16,r=4),e.keyAgreement&&(i|=8,r=3),e.keyCertSign&&(i|=4,r=2),e.cRLSign&&(i|=2,r=1),e.encipherOnly&&(i|=1,r=0),e.decipherOnly&&(a|=128,r=7);var s=String.fromCharCode(r);a!==0?s+=String.fromCharCode(i)+String.fromCharCode(a):i!==0&&(s+=String.fromCharCode(i)),e.value=J.create(J.Class.UNIVERSAL,J.Type.BITSTRING,!1,s)}else if(e.name==="basicConstraints")e.value=J.create(J.Class.UNIVERSAL,J.Type.SEQUENCE,!0,[]),e.cA&&e.value.value.push(J.create(J.Class.UNIVERSAL,J.Type.BOOLEAN,!1,String.fromCharCode(255))),"pathLenConstraint"in e&&e.value.value.push(J.create(J.Class.UNIVERSAL,J.Type.INTEGER,!1,J.integerToDer(e.pathLenConstraint).getBytes()));else if(e.name==="extKeyUsage"){e.value=J.create(J.Class.UNIVERSAL,J.Type.SEQUENCE,!0,[]);var o=e.value.value;for(var l in e)e[l]===!0&&(l in Dn?o.push(J.create(J.Class.UNIVERSAL,J.Type.OID,!1,J.oidToDer(Dn[l]).getBytes())):l.indexOf(".")!==-1&&o.push(J.create(J.Class.UNIVERSAL,J.Type.OID,!1,J.oidToDer(l).getBytes())))}else if(e.name==="nsCertType"){var r=0,i=0;e.client&&(i|=128,r=7),e.server&&(i|=64,r=6),e.email&&(i|=32,r=5),e.objsign&&(i|=16,r=4),e.reserved&&(i|=8,r=3),e.sslCA&&(i|=4,r=2),e.emailCA&&(i|=2,r=1),e.objCA&&(i|=1,r=0);var s=String.fromCharCode(r);i!==0&&(s+=String.fromCharCode(i)),e.value=J.create(J.Class.UNIVERSAL,J.Type.BITSTRING,!1,s)}else if(e.name==="subjectAltName"||e.name==="issuerAltName"){e.value=J.create(J.Class.UNIVERSAL,J.Type.SEQUENCE,!0,[]);for(var c,h=0;h<e.altNames.length;++h){c=e.altNames[h];var s=c.value;if(c.type===7&&c.ip){if(s=Mt.util.bytesFromIP(c.ip),s===null){var n=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.');throw n.extension=e,n}}else c.type===8&&(c.oid?s=J.oidToDer(J.oidToDer(c.oid)):s=J.oidToDer(s));e.value.value.push(J.create(J.Class.CONTEXT_SPECIFIC,c.type,!1,s))}}else if(e.name==="nsComment"&&t.cert){if(!/^[\x00-\x7F]*$/.test(e.comment)||e.comment.length<1||e.comment.length>128)throw new Error('Invalid "nsComment" content.');e.value=J.create(J.Class.UNIVERSAL,J.Type.IA5STRING,!1,e.comment)}else if(e.name==="subjectKeyIdentifier"&&t.cert){var p=t.cert.generateSubjectKeyIdentifier();e.subjectKeyIdentifier=p.toHex(),e.value=J.create(J.Class.UNIVERSAL,J.Type.OCTETSTRING,!1,p.getBytes())}else if(e.name==="authorityKeyIdentifier"&&t.cert){e.value=J.create(J.Class.UNIVERSAL,J.Type.SEQUENCE,!0,[]);var o=e.value.value;if(e.keyIdentifier){var E=e.keyIdentifier===!0?t.cert.generateSubjectKeyIdentifier().getBytes():e.keyIdentifier;o.push(J.create(J.Class.CONTEXT_SPECIFIC,0,!1,E))}if(e.authorityCertIssuer){var b=[J.create(J.Class.CONTEXT_SPECIFIC,4,!0,[nl(e.authorityCertIssuer===!0?t.cert.issuer:e.authorityCertIssuer)])];o.push(J.create(J.Class.CONTEXT_SPECIFIC,1,!0,b))}if(e.serialNumber){var C=Mt.util.hexToBytes(e.serialNumber===!0?t.cert.serialNumber:e.serialNumber);o.push(J.create(J.Class.CONTEXT_SPECIFIC,2,!1,C))}}else if(e.name==="cRLDistributionPoints"){e.value=J.create(J.Class.UNIVERSAL,J.Type.SEQUENCE,!0,[]);for(var o=e.value.value,N=J.create(J.Class.UNIVERSAL,J.Type.SEQUENCE,!0,[]),w=J.create(J.Class.CONTEXT_SPECIFIC,0,!0,[]),c,h=0;h<e.altNames.length;++h){c=e.altNames[h];var s=c.value;if(c.type===7&&c.ip){if(s=Mt.util.bytesFromIP(c.ip),s===null){var n=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.');throw n.extension=e,n}}else c.type===8&&(c.oid?s=J.oidToDer(J.oidToDer(c.oid)):s=J.oidToDer(s));w.value.push(J.create(J.Class.CONTEXT_SPECIFIC,c.type,!1,s))}N.value.push(J.create(J.Class.CONTEXT_SPECIFIC,0,!0,[w])),o.push(N)}if(typeof e.value>"u"){var n=new Error("Extension value not specified.");throw n.extension=e,n}return e}function Jd(e,t){switch(e){case Dn["RSASSA-PSS"]:var n=[];return t.hash.algorithmOid!==void 0&&n.push(J.create(J.Class.CONTEXT_SPECIFIC,0,!0,[J.create(J.Class.UNIVERSAL,J.Type.SEQUENCE,!0,[J.create(J.Class.UNIVERSAL,J.Type.OID,!1,J.oidToDer(t.hash.algorithmOid).getBytes()),J.create(J.Class.UNIVERSAL,J.Type.NULL,!1,"")])])),t.mgf.algorithmOid!==void 0&&n.push(J.create(J.Class.CONTEXT_SPECIFIC,1,!0,[J.create(J.Class.UNIVERSAL,J.Type.SEQUENCE,!0,[J.create(J.Class.UNIVERSAL,J.Type.OID,!1,J.oidToDer(t.mgf.algorithmOid).getBytes()),J.create(J.Class.UNIVERSAL,J.Type.SEQUENCE,!0,[J.create(J.Class.UNIVERSAL,J.Type.OID,!1,J.oidToDer(t.mgf.hash.algorithmOid).getBytes()),J.create(J.Class.UNIVERSAL,J.Type.NULL,!1,"")])])])),t.saltLength!==void 0&&n.push(J.create(J.Class.CONTEXT_SPECIFIC,2,!0,[J.create(J.Class.UNIVERSAL,J.Type.INTEGER,!1,J.integerToDer(t.saltLength).getBytes())])),J.create(J.Class.UNIVERSAL,J.Type.SEQUENCE,!0,n);default:return J.create(J.Class.UNIVERSAL,J.Type.NULL,!1,"")}}function kA(e){var t=J.create(J.Class.CONTEXT_SPECIFIC,0,!0,[]);if(e.attributes.length===0)return t;for(var n=e.attributes,r=0;r<n.length;++r){var i=n[r],a=i.value,s=J.Type.UTF8;"valueTagClass"in i&&(s=i.valueTagClass),s===J.Type.UTF8&&(a=Mt.util.encodeUtf8(a));var o=!1;"valueConstructed"in i&&(o=i.valueConstructed);var l=J.create(J.Class.UNIVERSAL,J.Type.SEQUENCE,!0,[J.create(J.Class.UNIVERSAL,J.Type.OID,!1,J.oidToDer(i.type).getBytes()),J.create(J.Class.UNIVERSAL,J.Type.SET,!0,[J.create(J.Class.UNIVERSAL,s,o,a)])]);t.value.push(l)}return t}var AA=new Date("1950-01-01T00:00:00Z"),IA=new Date("2050-01-01T00:00:00Z");function Xy(e){return e>=AA&&e<IA?J.create(J.Class.UNIVERSAL,J.Type.UTCTIME,!1,J.dateToUtcTime(e)):J.create(J.Class.UNIVERSAL,J.Type.GENERALIZEDTIME,!1,J.dateToGeneralizedTime(e))}vt.getTBSCertificate=function(e){var t=Xy(e.validity.notBefore),n=Xy(e.validity.notAfter),r=J.create(J.Class.UNIVERSAL,J.Type.SEQUENCE,!0,[J.create(J.Class.CONTEXT_SPECIFIC,0,!0,[J.create(J.Class.UNIVERSAL,J.Type.INTEGER,!1,J.integerToDer(e.version).getBytes())]),J.create(J.Class.UNIVERSAL,J.Type.INTEGER,!1,Mt.util.hexToBytes(e.serialNumber)),J.create(J.Class.UNIVERSAL,J.Type.SEQUENCE,!0,[J.create(J.Class.UNIVERSAL,J.Type.OID,!1,J.oidToDer(e.siginfo.algorithmOid).getBytes()),Jd(e.siginfo.algorithmOid,e.siginfo.parameters)]),nl(e.issuer),J.create(J.Class.UNIVERSAL,J.Type.SEQUENCE,!0,[t,n]),nl(e.subject),vt.publicKeyToAsn1(e.publicKey)]);return e.issuer.uniqueId&&r.value.push(J.create(J.Class.CONTEXT_SPECIFIC,1,!0,[J.create(J.Class.UNIVERSAL,J.Type.BITSTRING,!1,String.fromCharCode(0)+e.issuer.uniqueId)])),e.subject.uniqueId&&r.value.push(J.create(J.Class.CONTEXT_SPECIFIC,2,!0,[J.create(J.Class.UNIVERSAL,J.Type.BITSTRING,!1,String.fromCharCode(0)+e.subject.uniqueId)])),e.extensions.length>0&&r.value.push(vt.certificateExtensionsToAsn1(e.extensions)),r};vt.getCertificationRequestInfo=function(e){var t=J.create(J.Class.UNIVERSAL,J.Type.SEQUENCE,!0,[J.create(J.Class.UNIVERSAL,J.Type.INTEGER,!1,J.integerToDer(e.version).getBytes()),nl(e.subject),vt.publicKeyToAsn1(e.publicKey),kA(e)]);return t};vt.distinguishedNameToAsn1=function(e){return nl(e)};vt.certificateToAsn1=function(e){var t=e.tbsCertificate||vt.getTBSCertificate(e);return J.create(J.Class.UNIVERSAL,J.Type.SEQUENCE,!0,[t,J.create(J.Class.UNIVERSAL,J.Type.SEQUENCE,!0,[J.create(J.Class.UNIVERSAL,J.Type.OID,!1,J.oidToDer(e.signatureOid).getBytes()),Jd(e.signatureOid,e.signatureParameters)]),J.create(J.Class.UNIVERSAL,J.Type.BITSTRING,!1,String.fromCharCode(0)+e.signature)])};vt.certificateExtensionsToAsn1=function(e){var t=J.create(J.Class.CONTEXT_SPECIFIC,3,!0,[]),n=J.create(J.Class.UNIVERSAL,J.Type.SEQUENCE,!0,[]);t.value.push(n);for(var r=0;r<e.length;++r)n.value.push(vt.certificateExtensionToAsn1(e[r]));return t};vt.certificateExtensionToAsn1=function(e){var t=J.create(J.Class.UNIVERSAL,J.Type.SEQUENCE,!0,[]);t.value.push(J.create(J.Class.UNIVERSAL,J.Type.OID,!1,J.oidToDer(e.id).getBytes())),e.critical&&t.value.push(J.create(J.Class.UNIVERSAL,J.Type.BOOLEAN,!1,String.fromCharCode(255)));var n=e.value;return typeof e.value!="string"&&(n=J.toDer(n).getBytes()),t.value.push(J.create(J.Class.UNIVERSAL,J.Type.OCTETSTRING,!1,n)),t};vt.certificationRequestToAsn1=function(e){var t=e.certificationRequestInfo||vt.getCertificationRequestInfo(e);return J.create(J.Class.UNIVERSAL,J.Type.SEQUENCE,!0,[t,J.create(J.Class.UNIVERSAL,J.Type.SEQUENCE,!0,[J.create(J.Class.UNIVERSAL,J.Type.OID,!1,J.oidToDer(e.signatureOid).getBytes()),Jd(e.signatureOid,e.signatureParameters)]),J.create(J.Class.UNIVERSAL,J.Type.BITSTRING,!1,String.fromCharCode(0)+e.signature)])};vt.createCaStore=function(e){var t={certs:{}};t.getIssuer=function(s){var o=n(s.issuer);return o},t.addCertificate=function(s){if(typeof s=="string"&&(s=Mt.pki.certificateFromPem(s)),r(s.subject),!t.hasCertificate(s))if(s.subject.hash in t.certs){var o=t.certs[s.subject.hash];Mt.util.isArray(o)||(o=[o]),o.push(s),t.certs[s.subject.hash]=o}else t.certs[s.subject.hash]=s},t.hasCertificate=function(s){typeof s=="string"&&(s=Mt.pki.certificateFromPem(s));var o=n(s.subject);if(!o)return!1;Mt.util.isArray(o)||(o=[o]);for(var l=J.toDer(vt.certificateToAsn1(s)).getBytes(),c=0;c<o.length;++c){var h=J.toDer(vt.certificateToAsn1(o[c])).getBytes();if(l===h)return!0}return!1},t.listAllCertificates=function(){var s=[];for(var o in t.certs)if(t.certs.hasOwnProperty(o)){var l=t.certs[o];if(!Mt.util.isArray(l))s.push(l);else for(var c=0;c<l.length;++c)s.push(l[c])}return s},t.removeCertificate=function(s){var o;if(typeof s=="string"&&(s=Mt.pki.certificateFromPem(s)),r(s.subject),!t.hasCertificate(s))return null;var l=n(s.subject);if(!Mt.util.isArray(l))return o=t.certs[s.subject.hash],delete t.certs[s.subject.hash],o;for(var c=J.toDer(vt.certificateToAsn1(s)).getBytes(),h=0;h<l.length;++h){var p=J.toDer(vt.certificateToAsn1(l[h])).getBytes();c===p&&(o=l[h],l.splice(h,1))}return l.length===0&&delete t.certs[s.subject.hash],o};function n(s){return r(s),t.certs[s.hash]||null}function r(s){if(!s.hash){var o=Mt.md.sha1.create();s.attributes=vt.RDNAttributesAsArray(nl(s),o),s.hash=o.digest().toHex()}}if(e)for(var i=0;i<e.length;++i){var a=e[i];t.addCertificate(a)}return t};vt.certificateError={bad_certificate:"forge.pki.BadCertificate",unsupported_certificate:"forge.pki.UnsupportedCertificate",certificate_revoked:"forge.pki.CertificateRevoked",certificate_expired:"forge.pki.CertificateExpired",certificate_unknown:"forge.pki.CertificateUnknown",unknown_ca:"forge.pki.UnknownCertificateAuthority"};vt.verifyCertificateChain=function(e,t,n){typeof n=="function"&&(n={verify:n}),n=n||{},t=t.slice(0);var r=t.slice(0),i=n.validityCheckDate;typeof i>"u"&&(i=new Date);var a=!0,s=null,o=0;do{var l=t.shift(),c=null,h=!1;if(i&&(i<l.validity.notBefore||i>l.validity.notAfter)&&(s={message:"Certificate is not valid yet or has expired.",error:vt.certificateError.certificate_expired,notBefore:l.validity.notBefore,notAfter:l.validity.notAfter,now:i}),s===null){if(c=t[0]||e.getIssuer(l),c===null&&l.isIssuer(l)&&(h=!0,c=l),c){var p=c;Mt.util.isArray(p)||(p=[p]);for(var E=!1;!E&&p.length>0;){c=p.shift();try{E=c.verify(l)}catch{}}E||(s={message:"Certificate signature is invalid.",error:vt.certificateError.bad_certificate})}s===null&&(!c||h)&&!e.hasCertificate(l)&&(s={message:"Certificate is not trusted.",error:vt.certificateError.unknown_ca})}if(s===null&&c&&!l.isIssuer(c)&&(s={message:"Certificate issuer is invalid.",error:vt.certificateError.bad_certificate}),s===null)for(var b={keyUsage:!0,basicConstraints:!0},C=0;s===null&&C<l.extensions.length;++C){var N=l.extensions[C];N.critical&&!(N.name in b)&&(s={message:"Certificate has an unsupported critical extension.",error:vt.certificateError.unsupported_certificate})}if(s===null&&(!a||t.length===0&&(!c||h))){var w=l.getExtension("basicConstraints"),I=l.getExtension("keyUsage");if(I!==null&&(!I.keyCertSign||w===null)&&(s={message:"Certificate keyUsage or basicConstraints conflict or indicate that the certificate is not a CA. If the certificate is the only one in the chain or isn't the first then the certificate must be a valid CA.",error:vt.certificateError.bad_certificate}),s===null&&w!==null&&!w.cA&&(s={message:"Certificate basicConstraints indicates the certificate is not a CA.",error:vt.certificateError.bad_certificate}),s===null&&I!==null&&"pathLenConstraint"in w){var S=o-1;S>w.pathLenConstraint&&(s={message:"Certificate basicConstraints pathLenConstraint violated.",error:vt.certificateError.bad_certificate})}}var _=s===null?!0:s.error,P=n.verify?n.verify(_,o,r):_;if(P===!0)s=null;else throw _===!0&&(s={message:"The application rejected the certificate.",error:vt.certificateError.bad_certificate}),(P||P===0)&&(typeof P=="object"&&!Mt.util.isArray(P)?(P.message&&(s.message=P.message),P.error&&(s.error=P.error)):typeof P=="string"&&(s.error=P)),s;a=!1,++o}while(t.length>0);return!0}});var tp=$e((A6,n_)=>{var ur=hn();is();Zu();Ao();Yd();Xd();za();tc();Ju();Bn();qf();var be=ur.asn1,xn=ur.pki,rc=n_.exports=ur.pkcs12=ur.pkcs12||{},t_={name:"ContentInfo",tagClass:be.Class.UNIVERSAL,type:be.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.contentType",tagClass:be.Class.UNIVERSAL,type:be.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:be.Class.CONTEXT_SPECIFIC,constructed:!0,captureAsn1:"content"}]},NA={name:"PFX",tagClass:be.Class.UNIVERSAL,type:be.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.version",tagClass:be.Class.UNIVERSAL,type:be.Type.INTEGER,constructed:!1,capture:"version"},t_,{name:"PFX.macData",tagClass:be.Class.UNIVERSAL,type:be.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"mac",value:[{name:"PFX.macData.mac",tagClass:be.Class.UNIVERSAL,type:be.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.macData.mac.digestAlgorithm",tagClass:be.Class.UNIVERSAL,type:be.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.macData.mac.digestAlgorithm.algorithm",tagClass:be.Class.UNIVERSAL,type:be.Type.OID,constructed:!1,capture:"macAlgorithm"},{name:"PFX.macData.mac.digestAlgorithm.parameters",tagClass:be.Class.UNIVERSAL,captureAsn1:"macAlgorithmParameters"}]},{name:"PFX.macData.mac.digest",tagClass:be.Class.UNIVERSAL,type:be.Type.OCTETSTRING,constructed:!1,capture:"macDigest"}]},{name:"PFX.macData.macSalt",tagClass:be.Class.UNIVERSAL,type:be.Type.OCTETSTRING,constructed:!1,capture:"macSalt"},{name:"PFX.macData.iterations",tagClass:be.Class.UNIVERSAL,type:be.Type.INTEGER,constructed:!1,optional:!0,capture:"macIterations"}]}]},PA={name:"SafeBag",tagClass:be.Class.UNIVERSAL,type:be.Type.SEQUENCE,constructed:!0,value:[{name:"SafeBag.bagId",tagClass:be.Class.UNIVERSAL,type:be.Type.OID,constructed:!1,capture:"bagId"},{name:"SafeBag.bagValue",tagClass:be.Class.CONTEXT_SPECIFIC,constructed:!0,captureAsn1:"bagValue"},{name:"SafeBag.bagAttributes",tagClass:be.Class.UNIVERSAL,type:be.Type.SET,constructed:!0,optional:!0,capture:"bagAttributes"}]},DA={name:"Attribute",tagClass:be.Class.UNIVERSAL,type:be.Type.SEQUENCE,constructed:!0,value:[{name:"Attribute.attrId",tagClass:be.Class.UNIVERSAL,type:be.Type.OID,constructed:!1,capture:"oid"},{name:"Attribute.attrValues",tagClass:be.Class.UNIVERSAL,type:be.Type.SET,constructed:!0,capture:"values"}]},RA={name:"CertBag",tagClass:be.Class.UNIVERSAL,type:be.Type.SEQUENCE,constructed:!0,value:[{name:"CertBag.certId",tagClass:be.Class.UNIVERSAL,type:be.Type.OID,constructed:!1,capture:"certId"},{name:"CertBag.certValue",tagClass:be.Class.CONTEXT_SPECIFIC,constructed:!0,value:[{name:"CertBag.certValue[0]",tagClass:be.Class.UNIVERSAL,type:be.Class.OCTETSTRING,constructed:!1,capture:"cert"}]}]};function nc(e,t,n,r){for(var i=[],a=0;a<e.length;a++)for(var s=0;s<e[a].safeBags.length;s++){var o=e[a].safeBags[s];if(!(r!==void 0&&o.type!==r)){if(t===null){i.push(o);continue}o.attributes[t]!==void 0&&o.attributes[t].indexOf(n)>=0&&i.push(o)}}return i}rc.pkcs12FromAsn1=function(e,t,n){typeof t=="string"?(n=t,t=!0):t===void 0&&(t=!0);var r={},i=[];if(!be.validate(e,NA,r,i)){var a=new Error("Cannot read PKCS#12 PFX. ASN.1 object is not an PKCS#12 PFX.");throw a.errors=a,a}var s={version:r.version.charCodeAt(0),safeContents:[],getBags:function(w){var I={},S;return"localKeyId"in w?S=w.localKeyId:"localKeyIdHex"in w&&(S=ur.util.hexToBytes(w.localKeyIdHex)),S===void 0&&!("friendlyName"in w)&&"bagType"in w&&(I[w.bagType]=nc(s.safeContents,null,null,w.bagType)),S!==void 0&&(I.localKeyId=nc(s.safeContents,"localKeyId",S,w.bagType)),"friendlyName"in w&&(I.friendlyName=nc(s.safeContents,"friendlyName",w.friendlyName,w.bagType)),I},getBagsByFriendlyName:function(w,I){return nc(s.safeContents,"friendlyName",w,I)},getBagsByLocalKeyId:function(w,I){return nc(s.safeContents,"localKeyId",w,I)}};if(r.version.charCodeAt(0)!==3){var a=new Error("PKCS#12 PFX of version other than 3 not supported.");throw a.version=r.version.charCodeAt(0),a}if(be.derToOid(r.contentType)!==xn.oids.data){var a=new Error("Only PKCS#12 PFX in password integrity mode supported.");throw a.oid=be.derToOid(r.contentType),a}var o=r.content.value[0];if(o.tagClass!==be.Class.UNIVERSAL||o.type!==be.Type.OCTETSTRING)throw new Error("PKCS#12 authSafe content data is not an OCTET STRING.");if(o=ep(o),r.mac){var l=null,c=0,h=be.derToOid(r.macAlgorithm);switch(h){case xn.oids.sha1:l=ur.md.sha1.create(),c=20;break;case xn.oids.sha256:l=ur.md.sha256.create(),c=32;break;case xn.oids.sha384:l=ur.md.sha384.create(),c=48;break;case xn.oids.sha512:l=ur.md.sha512.create(),c=64;break;case xn.oids.md5:l=ur.md.md5.create(),c=16;break}if(l===null)throw new Error("PKCS#12 uses unsupported MAC algorithm: "+h);var p=new ur.util.ByteBuffer(r.macSalt),E="macIterations"in r?parseInt(ur.util.bytesToHex(r.macIterations),16):1,b=rc.generateKey(n,p,3,E,c,l),C=ur.hmac.create();C.start(l,b),C.update(o.value);var N=C.getMac();if(N.getBytes()!==r.macDigest)throw new Error("PKCS#12 MAC could not be verified. Invalid password?")}return OA(s,o.value,t,n),s};function ep(e){if(e.composed||e.constructed){for(var t=ur.util.createBuffer(),n=0;n<e.value.length;++n)t.putBytes(e.value[n].value);e.composed=e.constructed=!1,e.value=t.getBytes()}return e}function OA(e,t,n,r){if(t=be.fromDer(t,n),t.tagClass!==be.Class.UNIVERSAL||t.type!==be.Type.SEQUENCE||t.constructed!==!0)throw new Error("PKCS#12 AuthenticatedSafe expected to be a SEQUENCE OF ContentInfo");for(var i=0;i<t.value.length;i++){var a=t.value[i],s={},o=[];if(!be.validate(a,t_,s,o)){var l=new Error("Cannot read ContentInfo.");throw l.errors=o,l}var c={encrypted:!1},h=null,p=s.content.value[0];switch(be.derToOid(s.contentType)){case xn.oids.data:if(p.tagClass!==be.Class.UNIVERSAL||p.type!==be.Type.OCTETSTRING)throw new Error("PKCS#12 SafeContents Data is not an OCTET STRING.");h=ep(p).value;break;case xn.oids.encryptedData:h=BA(p,r),c.encrypted=!0;break;default:var l=new Error("Unsupported PKCS#12 contentType.");throw l.contentType=be.derToOid(s.contentType),l}c.safeBags=MA(h,n,r),e.safeContents.push(c)}}function BA(e,t){var n={},r=[];if(!be.validate(e,ur.pkcs7.asn1.encryptedDataValidator,n,r)){var i=new Error("Cannot read EncryptedContentInfo.");throw i.errors=r,i}var a=be.derToOid(n.contentType);if(a!==xn.oids.data){var i=new Error("PKCS#12 EncryptedContentInfo ContentType is not Data.");throw i.oid=a,i}a=be.derToOid(n.encAlgorithm);var s=xn.pbe.getCipher(a,n.encParameter,t),o=ep(n.encryptedContentAsn1),l=ur.util.createBuffer(o.value);if(s.update(l),!s.finish())throw new Error("Failed to decrypt PKCS#12 SafeContents.");return s.output.getBytes()}function MA(e,t,n){if(!t&&e.length===0)return[];if(e=be.fromDer(e,t),e.tagClass!==be.Class.UNIVERSAL||e.type!==be.Type.SEQUENCE||e.constructed!==!0)throw new Error("PKCS#12 SafeContents expected to be a SEQUENCE OF SafeBag.");for(var r=[],i=0;i<e.value.length;i++){var a=e.value[i],s={},o=[];if(!be.validate(a,PA,s,o)){var l=new Error("Cannot read SafeBag.");throw l.errors=o,l}var c={type:be.derToOid(s.bagId),attributes:UA(s.bagAttributes)};r.push(c);var h,p,E=s.bagValue.value[0];switch(c.type){case xn.oids.pkcs8ShroudedKeyBag:if(E=xn.decryptPrivateKeyInfo(E,n),E===null)throw new Error("Unable to decrypt PKCS#8 ShroudedKeyBag, wrong password?");case xn.oids.keyBag:try{c.key=xn.privateKeyFromAsn1(E)}catch{c.key=null,c.asn1=E}continue;case xn.oids.certBag:h=RA,p=function(){if(be.derToOid(s.certId)!==xn.oids.x509Certificate){var C=new Error("Unsupported certificate type, only X.509 supported.");throw C.oid=be.derToOid(s.certId),C}var N=be.fromDer(s.cert,t);try{c.cert=xn.certificateFromAsn1(N,!0)}catch{c.cert=null,c.asn1=N}};break;default:var l=new Error("Unsupported PKCS#12 SafeBag type.");throw l.oid=c.type,l}if(h!==void 0&&!be.validate(E,h,s,o)){var l=new Error("Cannot read PKCS#12 "+h.name);throw l.errors=o,l}p()}return r}function UA(e){var t={};if(e!==void 0)for(var n=0;n<e.length;++n){var r={},i=[];if(!be.validate(e[n],DA,r,i)){var a=new Error("Cannot read PKCS#12 BagAttribute.");throw a.errors=i,a}var s=be.derToOid(r.oid);if(xn.oids[s]!==void 0){t[xn.oids[s]]=[];for(var o=0;o<r.values.length;++o)t[xn.oids[s]].push(r.values[o].value)}}return t}rc.toPkcs12Asn1=function(e,t,n,r){r=r||{},r.saltSize=r.saltSize||8,r.count=r.count||2048,r.algorithm=r.algorithm||r.encAlgorithm||"aes128","useMac"in r||(r.useMac=!0),"localKeyId"in r||(r.localKeyId=null),"generateLocalKeyId"in r||(r.generateLocalKeyId=!0);var i=r.localKeyId,a;if(i!==null)i=ur.util.hexToBytes(i);else if(r.generateLocalKeyId)if(t){var s=ur.util.isArray(t)?t[0]:t;typeof s=="string"&&(s=xn.certificateFromPem(s));var o=ur.md.sha1.create();o.update(be.toDer(xn.certificateToAsn1(s)).getBytes()),i=o.digest().getBytes()}else i=ur.random.getBytes(20);var l=[];i!==null&&l.push(be.create(be.Class.UNIVERSAL,be.Type.SEQUENCE,!0,[be.create(be.Class.UNIVERSAL,be.Type.OID,!1,be.oidToDer(xn.oids.localKeyId).getBytes()),be.create(be.Class.UNIVERSAL,be.Type.SET,!0,[be.create(be.Class.UNIVERSAL,be.Type.OCTETSTRING,!1,i)])])),"friendlyName"in r&&l.push(be.create(be.Class.UNIVERSAL,be.Type.SEQUENCE,!0,[be.create(be.Class.UNIVERSAL,be.Type.OID,!1,be.oidToDer(xn.oids.friendlyName).getBytes()),be.create(be.Class.UNIVERSAL,be.Type.SET,!0,[be.create(be.Class.UNIVERSAL,be.Type.BMPSTRING,!1,r.friendlyName)])])),l.length>0&&(a=be.create(be.Class.UNIVERSAL,be.Type.SET,!0,l));var c=[],h=[];t!==null&&(ur.util.isArray(t)?h=t:h=[t]);for(var p=[],E=0;E<h.length;++E){t=h[E],typeof t=="string"&&(t=xn.certificateFromPem(t));var b=E===0?a:void 0,C=xn.certificateToAsn1(t),N=be.create(be.Class.UNIVERSAL,be.Type.SEQUENCE,!0,[be.create(be.Class.UNIVERSAL,be.Type.OID,!1,be.oidToDer(xn.oids.certBag).getBytes()),be.create(be.Class.CONTEXT_SPECIFIC,0,!0,[be.create(be.Class.UNIVERSAL,be.Type.SEQUENCE,!0,[be.create(be.Class.UNIVERSAL,be.Type.OID,!1,be.oidToDer(xn.oids.x509Certificate).getBytes()),be.create(be.Class.CONTEXT_SPECIFIC,0,!0,[be.create(be.Class.UNIVERSAL,be.Type.OCTETSTRING,!1,be.toDer(C).getBytes())])])]),b]);p.push(N)}if(p.length>0){var w=be.create(be.Class.UNIVERSAL,be.Type.SEQUENCE,!0,p),I=be.create(be.Class.UNIVERSAL,be.Type.SEQUENCE,!0,[be.create(be.Class.UNIVERSAL,be.Type.OID,!1,be.oidToDer(xn.oids.data).getBytes()),be.create(be.Class.CONTEXT_SPECIFIC,0,!0,[be.create(be.Class.UNIVERSAL,be.Type.OCTETSTRING,!1,be.toDer(w).getBytes())])]);c.push(I)}var S=null;if(e!==null){var _=xn.wrapRsaPrivateKey(xn.privateKeyToAsn1(e));n===null?S=be.create(be.Class.UNIVERSAL,be.Type.SEQUENCE,!0,[be.create(be.Class.UNIVERSAL,be.Type.OID,!1,be.oidToDer(xn.oids.keyBag).getBytes()),be.create(be.Class.CONTEXT_SPECIFIC,0,!0,[_]),a]):S=be.create(be.Class.UNIVERSAL,be.Type.SEQUENCE,!0,[be.create(be.Class.UNIVERSAL,be.Type.OID,!1,be.oidToDer(xn.oids.pkcs8ShroudedKeyBag).getBytes()),be.create(be.Class.CONTEXT_SPECIFIC,0,!0,[xn.encryptPrivateKeyInfo(_,n,r)]),a]);var P=be.create(be.Class.UNIVERSAL,be.Type.SEQUENCE,!0,[S]),v=be.create(be.Class.UNIVERSAL,be.Type.SEQUENCE,!0,[be.create(be.Class.UNIVERSAL,be.Type.OID,!1,be.oidToDer(xn.oids.data).getBytes()),be.create(be.Class.CONTEXT_SPECIFIC,0,!0,[be.create(be.Class.UNIVERSAL,be.Type.OCTETSTRING,!1,be.toDer(P).getBytes())])]);c.push(v)}var y=be.create(be.Class.UNIVERSAL,be.Type.SEQUENCE,!0,c),$;if(r.useMac){var o=ur.md.sha1.create(),Z=new ur.util.ByteBuffer(ur.random.getBytes(r.saltSize)),ce=r.count,e=rc.generateKey(n,Z,3,ce,20),q=ur.hmac.create();q.start(o,e),q.update(be.toDer(y).getBytes());var W=q.getMac();$=be.create(be.Class.UNIVERSAL,be.Type.SEQUENCE,!0,[be.create(be.Class.UNIVERSAL,be.Type.SEQUENCE,!0,[be.create(be.Class.UNIVERSAL,be.Type.SEQUENCE,!0,[be.create(be.Class.UNIVERSAL,be.Type.OID,!1,be.oidToDer(xn.oids.sha1).getBytes()),be.create(be.Class.UNIVERSAL,be.Type.NULL,!1,"")]),be.create(be.Class.UNIVERSAL,be.Type.OCTETSTRING,!1,W.getBytes())]),be.create(be.Class.UNIVERSAL,be.Type.OCTETSTRING,!1,Z.getBytes()),be.create(be.Class.UNIVERSAL,be.Type.INTEGER,!1,be.integerToDer(ce).getBytes())])}return be.create(be.Class.UNIVERSAL,be.Type.SEQUENCE,!0,[be.create(be.Class.UNIVERSAL,be.Type.INTEGER,!1,be.integerToDer(3).getBytes()),be.create(be.Class.UNIVERSAL,be.Type.SEQUENCE,!0,[be.create(be.Class.UNIVERSAL,be.Type.OID,!1,be.oidToDer(xn.oids.data).getBytes()),be.create(be.Class.CONTEXT_SPECIFIC,0,!0,[be.create(be.Class.UNIVERSAL,be.Type.OCTETSTRING,!1,be.toDer(y).getBytes())])]),$])};rc.generateKey=ur.pbe.generatePkcs12Key});var rp=$e((I6,r_)=>{var Do=hn();is();Ao();Xd();lu();Af();tp();Bf();tc();Bn();qf();var np=Do.asn1,rl=r_.exports=Do.pki=Do.pki||{};rl.pemToDer=function(e){var t=Do.pem.decode(e)[0];if(t.procType&&t.procType.type==="ENCRYPTED")throw new Error("Could not convert PEM to DER; PEM is encrypted.");return Do.util.createBuffer(t.body)};rl.privateKeyFromPem=function(e){var t=Do.pem.decode(e)[0];if(t.type!=="PRIVATE KEY"&&t.type!=="RSA PRIVATE KEY"){var n=new Error('Could not convert private key from PEM; PEM header type is not "PRIVATE KEY" or "RSA PRIVATE KEY".');throw n.headerType=t.type,n}if(t.procType&&t.procType.type==="ENCRYPTED")throw new Error("Could not convert private key from PEM; PEM is encrypted.");var r=np.fromDer(t.body);return rl.privateKeyFromAsn1(r)};rl.privateKeyToPem=function(e,t){var n={type:"RSA PRIVATE KEY",body:np.toDer(rl.privateKeyToAsn1(e)).getBytes()};return Do.pem.encode(n,{maxline:t})};rl.privateKeyInfoToPem=function(e,t){var n={type:"PRIVATE KEY",body:np.toDer(e).getBytes()};return Do.pem.encode(n,{maxline:t})}});var lp=$e((N6,f_)=>{var ut=hn();is();Zu();Sf();lu();rp();za();Ju();Bn();var Hf=function(e,t,n,r){var i=ut.util.createBuffer(),a=e.length>>1,s=a+(e.length&1),o=e.substr(0,s),l=e.substr(a,s),c=ut.util.createBuffer(),h=ut.hmac.create();n=t+n;var p=Math.ceil(r/16),E=Math.ceil(r/20);h.start("MD5",o);var b=ut.util.createBuffer();c.putBytes(n);for(var C=0;C<p;++C)h.start(null,null),h.update(c.getBytes()),c.putBuffer(h.digest()),h.start(null,null),h.update(c.bytes()+n),b.putBuffer(h.digest());h.start("SHA1",l);var N=ut.util.createBuffer();c.clear(),c.putBytes(n);for(var C=0;C<E;++C)h.start(null,null),h.update(c.getBytes()),c.putBuffer(h.digest()),h.start(null,null),h.update(c.bytes()+n),N.putBuffer(h.digest());return i.putBytes(ut.util.xorBytes(b.getBytes(),N.getBytes(),r)),i},qA=function(e,t,n){var r=ut.hmac.create();r.start("SHA1",e);var i=ut.util.createBuffer();return i.putInt32(t[0]),i.putInt32(t[1]),i.putByte(n.type),i.putByte(n.version.major),i.putByte(n.version.minor),i.putInt16(n.length),i.putBytes(n.fragment.bytes()),r.update(i.getBytes()),r.digest().getBytes()},FA=function(e,t,n){var r=!1;try{var i=e.deflate(t.fragment.getBytes());t.fragment=ut.util.createBuffer(i),t.length=i.length,r=!0}catch{}return r},VA=function(e,t,n){var r=!1;try{var i=e.inflate(t.fragment.getBytes());t.fragment=ut.util.createBuffer(i),t.length=i.length,r=!0}catch{}return r},Aa=function(e,t){var n=0;switch(t){case 1:n=e.getByte();break;case 2:n=e.getInt16();break;case 3:n=e.getInt24();break;case 4:n=e.getInt32();break}return ut.util.createBuffer(e.getBytes(n))},Ka=function(e,t,n){e.putInt(n.length(),t<<3),e.putBuffer(n)},ne={};ne.Versions={TLS_1_0:{major:3,minor:1},TLS_1_1:{major:3,minor:2},TLS_1_2:{major:3,minor:3}};ne.SupportedVersions=[ne.Versions.TLS_1_1,ne.Versions.TLS_1_0];ne.Version=ne.SupportedVersions[0];ne.MaxFragment=16384-1024;ne.ConnectionEnd={server:0,client:1};ne.PRFAlgorithm={tls_prf_sha256:0};ne.BulkCipherAlgorithm={none:null,rc4:0,des3:1,aes:2};ne.CipherType={stream:0,block:1,aead:2};ne.MACAlgorithm={none:null,hmac_md5:0,hmac_sha1:1,hmac_sha256:2,hmac_sha384:3,hmac_sha512:4};ne.CompressionMethod={none:0,deflate:1};ne.ContentType={change_cipher_spec:20,alert:21,handshake:22,application_data:23,heartbeat:24};ne.HandshakeType={hello_request:0,client_hello:1,server_hello:2,certificate:11,server_key_exchange:12,certificate_request:13,server_hello_done:14,certificate_verify:15,client_key_exchange:16,finished:20};ne.Alert={};ne.Alert.Level={warning:1,fatal:2};ne.Alert.Description={close_notify:0,unexpected_message:10,bad_record_mac:20,decryption_failed:21,record_overflow:22,decompression_failure:30,handshake_failure:40,bad_certificate:42,unsupported_certificate:43,certificate_revoked:44,certificate_expired:45,certificate_unknown:46,illegal_parameter:47,unknown_ca:48,access_denied:49,decode_error:50,decrypt_error:51,export_restriction:60,protocol_version:70,insufficient_security:71,internal_error:80,user_canceled:90,no_renegotiation:100};ne.HeartbeatMessageType={heartbeat_request:1,heartbeat_response:2};ne.CipherSuites={};ne.getCipherSuite=function(e){var t=null;for(var n in ne.CipherSuites){var r=ne.CipherSuites[n];if(r.id[0]===e.charCodeAt(0)&&r.id[1]===e.charCodeAt(1)){t=r;break}}return t};ne.handleUnexpected=function(e,t){var n=!e.open&&e.entity===ne.ConnectionEnd.client;n||e.error(e,{message:"Unexpected message. Received TLS record out of order.",send:!0,alert:{level:ne.Alert.Level.fatal,description:ne.Alert.Description.unexpected_message}})};ne.handleHelloRequest=function(e,t,n){!e.handshaking&&e.handshakes>0&&(ne.queue(e,ne.createAlert(e,{level:ne.Alert.Level.warning,description:ne.Alert.Description.no_renegotiation})),ne.flush(e)),e.process()};ne.parseHelloMessage=function(e,t,n){var r=null,i=e.entity===ne.ConnectionEnd.client;if(n<38)e.error(e,{message:i?"Invalid ServerHello message. Message too short.":"Invalid ClientHello message. Message too short.",send:!0,alert:{level:ne.Alert.Level.fatal,description:ne.Alert.Description.illegal_parameter}});else{var a=t.fragment,s=a.length();if(r={version:{major:a.getByte(),minor:a.getByte()},random:ut.util.createBuffer(a.getBytes(32)),session_id:Aa(a,1),extensions:[]},i?(r.cipher_suite=a.getBytes(2),r.compression_method=a.getByte()):(r.cipher_suites=Aa(a,2),r.compression_methods=Aa(a,1)),s=n-(s-a.length()),s>0){for(var o=Aa(a,2);o.length()>0;)r.extensions.push({type:[o.getByte(),o.getByte()],data:Aa(o,2)});if(!i)for(var l=0;l<r.extensions.length;++l){var c=r.extensions[l];if(c.type[0]===0&&c.type[1]===0)for(var h=Aa(c.data,2);h.length()>0;){var p=h.getByte();if(p!==0)break;e.session.extensions.server_name.serverNameList.push(Aa(h,2).getBytes())}}}if(e.session.version&&(r.version.major!==e.session.version.major||r.version.minor!==e.session.version.minor))return e.error(e,{message:"TLS version change is disallowed during renegotiation.",send:!0,alert:{level:ne.Alert.Level.fatal,description:ne.Alert.Description.protocol_version}});if(i)e.session.cipherSuite=ne.getCipherSuite(r.cipher_suite);else for(var E=ut.util.createBuffer(r.cipher_suites.bytes());E.length()>0&&(e.session.cipherSuite=ne.getCipherSuite(E.getBytes(2)),e.session.cipherSuite===null););if(e.session.cipherSuite===null)return e.error(e,{message:"No cipher suites in common.",send:!0,alert:{level:ne.Alert.Level.fatal,description:ne.Alert.Description.handshake_failure},cipherSuite:ut.util.bytesToHex(r.cipher_suite)});i?e.session.compressionMethod=r.compression_method:e.session.compressionMethod=ne.CompressionMethod.none}return r};ne.createSecurityParameters=function(e,t){var n=e.entity===ne.ConnectionEnd.client,r=t.random.bytes(),i=n?e.session.sp.client_random:r,a=n?r:ne.createRandom().getBytes();e.session.sp={entity:e.entity,prf_algorithm:ne.PRFAlgorithm.tls_prf_sha256,bulk_cipher_algorithm:null,cipher_type:null,enc_key_length:null,block_length:null,fixed_iv_length:null,record_iv_length:null,mac_algorithm:null,mac_length:null,mac_key_length:null,compression_algorithm:e.session.compressionMethod,pre_master_secret:null,master_secret:null,client_random:i,server_random:a}};ne.handleServerHello=function(e,t,n){var r=ne.parseHelloMessage(e,t,n);if(!e.fail){if(r.version.minor<=e.version.minor)e.version.minor=r.version.minor;else return e.error(e,{message:"Incompatible TLS version.",send:!0,alert:{level:ne.Alert.Level.fatal,description:ne.Alert.Description.protocol_version}});e.session.version=e.version;var i=r.session_id.bytes();i.length>0&&i===e.session.id?(e.expect=s_,e.session.resuming=!0,e.session.sp.server_random=r.random.bytes()):(e.expect=HA,e.session.resuming=!1,ne.createSecurityParameters(e,r)),e.session.id=i,e.process()}};ne.handleClientHello=function(e,t,n){var r=ne.parseHelloMessage(e,t,n);if(!e.fail){var i=r.session_id.bytes(),a=null;if(e.sessionCache&&(a=e.sessionCache.getSession(i),a===null?i="":(a.version.major!==r.version.major||a.version.minor>r.version.minor)&&(a=null,i="")),i.length===0&&(i=ut.random.getBytes(32)),e.session.id=i,e.session.clientHelloVersion=r.version,e.session.sp={},a)e.version=e.session.version=a.version,e.session.sp=a.sp;else{for(var s,o=1;o<ne.SupportedVersions.length&&(s=ne.SupportedVersions[o],!(s.minor<=r.version.minor));++o);e.version={major:s.major,minor:s.minor},e.session.version=e.version}a!==null?(e.expect=op,e.session.resuming=!0,e.session.sp.client_random=r.random.bytes()):(e.expect=e.verifyClient!==!1?XA:sp,e.session.resuming=!1,ne.createSecurityParameters(e,r)),e.open=!0,ne.queue(e,ne.createRecord(e,{type:ne.ContentType.handshake,data:ne.createServerHello(e)})),e.session.resuming?(ne.queue(e,ne.createRecord(e,{type:ne.ContentType.change_cipher_spec,data:ne.createChangeCipherSpec()})),e.state.pending=ne.createConnectionState(e),e.state.current.write=e.state.pending.write,ne.queue(e,ne.createRecord(e,{type:ne.ContentType.handshake,data:ne.createFinished(e)}))):(ne.queue(e,ne.createRecord(e,{type:ne.ContentType.handshake,data:ne.createCertificate(e)})),e.fail||(ne.queue(e,ne.createRecord(e,{type:ne.ContentType.handshake,data:ne.createServerKeyExchange(e)})),e.verifyClient!==!1&&ne.queue(e,ne.createRecord(e,{type:ne.ContentType.handshake,data:ne.createCertificateRequest(e)})),ne.queue(e,ne.createRecord(e,{type:ne.ContentType.handshake,data:ne.createServerHelloDone(e)})))),ne.flush(e),e.process()}};ne.handleCertificate=function(e,t,n){if(n<3)return e.error(e,{message:"Invalid Certificate message. Message too short.",send:!0,alert:{level:ne.Alert.Level.fatal,description:ne.Alert.Description.illegal_parameter}});var r=t.fragment,i={certificate_list:Aa(r,3)},a,s,o=[];try{for(;i.certificate_list.length()>0;)a=Aa(i.certificate_list,3),s=ut.asn1.fromDer(a),a=ut.pki.certificateFromAsn1(s,!0),o.push(a)}catch(c){return e.error(e,{message:"Could not parse certificate list.",cause:c,send:!0,alert:{level:ne.Alert.Level.fatal,description:ne.Alert.Description.bad_certificate}})}var l=e.entity===ne.ConnectionEnd.client;(l||e.verifyClient===!0)&&o.length===0?e.error(e,{message:l?"No server certificate provided.":"No client certificate provided.",send:!0,alert:{level:ne.Alert.Level.fatal,description:ne.Alert.Description.illegal_parameter}}):o.length===0?e.expect=l?i_:sp:(l?e.session.serverCertificate=o[0]:e.session.clientCertificate=o[0],ne.verifyCertificateChain(e,o)&&(e.expect=l?i_:sp)),e.process()};ne.handleServerKeyExchange=function(e,t,n){if(n>0)return e.error(e,{message:"Invalid key parameters. Only RSA is supported.",send:!0,alert:{level:ne.Alert.Level.fatal,description:ne.Alert.Description.unsupported_certificate}});e.expect=$A,e.process()};ne.handleClientKeyExchange=function(e,t,n){if(n<48)return e.error(e,{message:"Invalid key parameters. Only RSA is supported.",send:!0,alert:{level:ne.Alert.Level.fatal,description:ne.Alert.Description.unsupported_certificate}});var r=t.fragment,i={enc_pre_master_secret:Aa(r,2).getBytes()},a=null;if(e.getPrivateKey)try{a=e.getPrivateKey(e,e.session.serverCertificate),a=ut.pki.privateKeyFromPem(a)}catch(l){e.error(e,{message:"Could not get private key.",cause:l,send:!0,alert:{level:ne.Alert.Level.fatal,description:ne.Alert.Description.internal_error}})}if(a===null)return e.error(e,{message:"No private key set.",send:!0,alert:{level:ne.Alert.Level.fatal,description:ne.Alert.Description.internal_error}});try{var s=e.session.sp;s.pre_master_secret=a.decrypt(i.enc_pre_master_secret);var o=e.session.clientHelloVersion;if(o.major!==s.pre_master_secret.charCodeAt(0)||o.minor!==s.pre_master_secret.charCodeAt(1))throw new Error("TLS version rollback attack detected.")}catch{s.pre_master_secret=ut.random.getBytes(48)}e.expect=op,e.session.clientCertificate!==null&&(e.expect=YA),e.process()};ne.handleCertificateRequest=function(e,t,n){if(n<3)return e.error(e,{message:"Invalid CertificateRequest. Message too short.",send:!0,alert:{level:ne.Alert.Level.fatal,description:ne.Alert.Description.illegal_parameter}});var r=t.fragment,i={certificate_types:Aa(r,1),certificate_authorities:Aa(r,2)};e.session.certificateRequest=i,e.expect=jA,e.process()};ne.handleCertificateVerify=function(e,t,n){if(n<2)return e.error(e,{message:"Invalid CertificateVerify. Message too short.",send:!0,alert:{level:ne.Alert.Level.fatal,description:ne.Alert.Description.illegal_parameter}});var r=t.fragment;r.read-=4;var i=r.bytes();r.read+=4;var a={signature:Aa(r,2).getBytes()},s=ut.util.createBuffer();s.putBuffer(e.session.md5.digest()),s.putBuffer(e.session.sha1.digest()),s=s.getBytes();try{var o=e.session.clientCertificate;if(!o.publicKey.verify(s,a.signature,"NONE"))throw new Error("CertificateVerify signature does not match.");e.session.md5.update(i),e.session.sha1.update(i)}catch{return e.error(e,{message:"Bad signature in CertificateVerify.",send:!0,alert:{level:ne.Alert.Level.fatal,description:ne.Alert.Description.handshake_failure}})}e.expect=op,e.process()};ne.handleServerHelloDone=function(e,t,n){if(n>0)return e.error(e,{message:"Invalid ServerHelloDone message. Invalid length.",send:!0,alert:{level:ne.Alert.Level.fatal,description:ne.Alert.Description.record_overflow}});if(e.serverCertificate===null){var r={message:"No server certificate provided. Not enough security.",send:!0,alert:{level:ne.Alert.Level.fatal,description:ne.Alert.Description.insufficient_security}},i=0,a=e.verify(e,r.alert.description,i,[]);if(a!==!0)return(a||a===0)&&(typeof a=="object"&&!ut.util.isArray(a)?(a.message&&(r.message=a.message),a.alert&&(r.alert.description=a.alert)):typeof a=="number"&&(r.alert.description=a)),e.error(e,r)}e.session.certificateRequest!==null&&(t=ne.createRecord(e,{type:ne.ContentType.handshake,data:ne.createCertificate(e)}),ne.queue(e,t)),t=ne.createRecord(e,{type:ne.ContentType.handshake,data:ne.createClientKeyExchange(e)}),ne.queue(e,t),e.expect=GA;var s=function(o,l){o.session.certificateRequest!==null&&o.session.clientCertificate!==null&&ne.queue(o,ne.createRecord(o,{type:ne.ContentType.handshake,data:ne.createCertificateVerify(o,l)})),ne.queue(o,ne.createRecord(o,{type:ne.ContentType.change_cipher_spec,data:ne.createChangeCipherSpec()})),o.state.pending=ne.createConnectionState(o),o.state.current.write=o.state.pending.write,ne.queue(o,ne.createRecord(o,{type:ne.ContentType.handshake,data:ne.createFinished(o)})),o.expect=s_,ne.flush(o),o.process()};if(e.session.certificateRequest===null||e.session.clientCertificate===null)return s(e,null);ne.getClientSignature(e,s)};ne.handleChangeCipherSpec=function(e,t){if(t.fragment.getByte()!==1)return e.error(e,{message:"Invalid ChangeCipherSpec message received.",send:!0,alert:{level:ne.Alert.Level.fatal,description:ne.Alert.Description.illegal_parameter}});var n=e.entity===ne.ConnectionEnd.client;(e.session.resuming&&n||!e.session.resuming&&!n)&&(e.state.pending=ne.createConnectionState(e)),e.state.current.read=e.state.pending.read,(!e.session.resuming&&n||e.session.resuming&&!n)&&(e.state.pending=null),e.expect=n?KA:QA,e.process()};ne.handleFinished=function(e,t,n){var r=t.fragment;r.read-=4;var i=r.bytes();r.read+=4;var a=t.fragment.getBytes();r=ut.util.createBuffer(),r.putBuffer(e.session.md5.digest()),r.putBuffer(e.session.sha1.digest());var s=e.entity===ne.ConnectionEnd.client,o=s?"server finished":"client finished",l=e.session.sp,c=12,h=Hf;if(r=h(l.master_secret,o,r.getBytes(),c),r.getBytes()!==a)return e.error(e,{message:"Invalid verify_data in Finished message.",send:!0,alert:{level:ne.Alert.Level.fatal,description:ne.Alert.Description.decrypt_error}});e.session.md5.update(i),e.session.sha1.update(i),(e.session.resuming&&s||!e.session.resuming&&!s)&&(ne.queue(e,ne.createRecord(e,{type:ne.ContentType.change_cipher_spec,data:ne.createChangeCipherSpec()})),e.state.current.write=e.state.pending.write,e.state.pending=null,ne.queue(e,ne.createRecord(e,{type:ne.ContentType.handshake,data:ne.createFinished(e)}))),e.expect=s?WA:JA,e.handshaking=!1,++e.handshakes,e.peerCertificate=s?e.session.serverCertificate:e.session.clientCertificate,ne.flush(e),e.isConnected=!0,e.connected(e),e.process()};ne.handleAlert=function(e,t){var n=t.fragment,r={level:n.getByte(),description:n.getByte()},i;switch(r.description){case ne.Alert.Description.close_notify:i="Connection closed.";break;case ne.Alert.Description.unexpected_message:i="Unexpected message.";break;case ne.Alert.Description.bad_record_mac:i="Bad record MAC.";break;case ne.Alert.Description.decryption_failed:i="Decryption failed.";break;case ne.Alert.Description.record_overflow:i="Record overflow.";break;case ne.Alert.Description.decompression_failure:i="Decompression failed.";break;case ne.Alert.Description.handshake_failure:i="Handshake failure.";break;case ne.Alert.Description.bad_certificate:i="Bad certificate.";break;case ne.Alert.Description.unsupported_certificate:i="Unsupported certificate.";break;case ne.Alert.Description.certificate_revoked:i="Certificate revoked.";break;case ne.Alert.Description.certificate_expired:i="Certificate expired.";break;case ne.Alert.Description.certificate_unknown:i="Certificate unknown.";break;case ne.Alert.Description.illegal_parameter:i="Illegal parameter.";break;case ne.Alert.Description.unknown_ca:i="Unknown certificate authority.";break;case ne.Alert.Description.access_denied:i="Access denied.";break;case ne.Alert.Description.decode_error:i="Decode error.";break;case ne.Alert.Description.decrypt_error:i="Decrypt error.";break;case ne.Alert.Description.export_restriction:i="Export restriction.";break;case ne.Alert.Description.protocol_version:i="Unsupported protocol version.";break;case ne.Alert.Description.insufficient_security:i="Insufficient security.";break;case ne.Alert.Description.internal_error:i="Internal error.";break;case ne.Alert.Description.user_canceled:i="User canceled.";break;case ne.Alert.Description.no_renegotiation:i="Renegotiation not supported.";break;default:i="Unknown error.";break}if(r.description===ne.Alert.Description.close_notify)return e.close();e.error(e,{message:i,send:!1,origin:e.entity===ne.ConnectionEnd.client?"server":"client",alert:r}),e.process()};ne.handleHandshake=function(e,t){var n=t.fragment,r=n.getByte(),i=n.getInt24();if(i>n.length())return e.fragmented=t,t.fragment=ut.util.createBuffer(),n.read-=4,e.process();e.fragmented=null,n.read-=4;var a=n.bytes(i+4);n.read+=4,r in zf[e.entity][e.expect]?(e.entity===ne.ConnectionEnd.server&&!e.open&&!e.fail&&(e.handshaking=!0,e.session={version:null,extensions:{server_name:{serverNameList:[]}},cipherSuite:null,compressionMethod:null,serverCertificate:null,clientCertificate:null,md5:ut.md.md5.create(),sha1:ut.md.sha1.create()}),r!==ne.HandshakeType.hello_request&&r!==ne.HandshakeType.certificate_verify&&r!==ne.HandshakeType.finished&&(e.session.md5.update(a),e.session.sha1.update(a)),zf[e.entity][e.expect][r](e,t,i)):ne.handleUnexpected(e,t)};ne.handleApplicationData=function(e,t){e.data.putBuffer(t.fragment),e.dataReady(e),e.process()};ne.handleHeartbeat=function(e,t){var n=t.fragment,r=n.getByte(),i=n.getInt16(),a=n.getBytes(i);if(r===ne.HeartbeatMessageType.heartbeat_request){if(e.handshaking||i>a.length)return e.process();ne.queue(e,ne.createRecord(e,{type:ne.ContentType.heartbeat,data:ne.createHeartbeat(ne.HeartbeatMessageType.heartbeat_response,a)})),ne.flush(e)}else if(r===ne.HeartbeatMessageType.heartbeat_response){if(a!==e.expectedHeartbeatPayload)return e.process();e.heartbeatReceived&&e.heartbeatReceived(e,ut.util.createBuffer(a))}e.process()};var zA=0,HA=1,i_=2,$A=3,jA=4,s_=5,KA=6,WA=7,GA=8,ZA=0,XA=1,sp=2,YA=3,op=4,QA=5,JA=6,ee=ne.handleUnexpected,o_=ne.handleChangeCipherSpec,Ti=ne.handleAlert,Ji=ne.handleHandshake,u_=ne.handleApplicationData,Li=ne.handleHeartbeat,up=[];up[ne.ConnectionEnd.client]=[[ee,Ti,Ji,ee,Li],[ee,Ti,Ji,ee,Li],[ee,Ti,Ji,ee,Li],[ee,Ti,Ji,ee,Li],[ee,Ti,Ji,ee,Li],[o_,Ti,ee,ee,Li],[ee,Ti,Ji,ee,Li],[ee,Ti,Ji,u_,Li],[ee,Ti,Ji,ee,Li]];up[ne.ConnectionEnd.server]=[[ee,Ti,Ji,ee,Li],[ee,Ti,Ji,ee,Li],[ee,Ti,Ji,ee,Li],[ee,Ti,Ji,ee,Li],[o_,Ti,ee,ee,Li],[ee,Ti,Ji,ee,Li],[ee,Ti,Ji,u_,Li],[ee,Ti,Ji,ee,Li]];var Ro=ne.handleHelloRequest,eI=ne.handleServerHello,l_=ne.handleCertificate,a_=ne.handleServerKeyExchange,ip=ne.handleCertificateRequest,Ff=ne.handleServerHelloDone,c_=ne.handleFinished,zf=[];zf[ne.ConnectionEnd.client]=[[ee,ee,eI,ee,ee,ee,ee,ee,ee,ee,ee,ee,ee,ee,ee,ee,ee,ee,ee,ee,ee],[Ro,ee,ee,ee,ee,ee,ee,ee,ee,ee,ee,l_,a_,ip,Ff,ee,ee,ee,ee,ee,ee],[Ro,ee,ee,ee,ee,ee,ee,ee,ee,ee,ee,ee,a_,ip,Ff,ee,ee,ee,ee,ee,ee],[Ro,ee,ee,ee,ee,ee,ee,ee,ee,ee,ee,ee,ee,ip,Ff,ee,ee,ee,ee,ee,ee],[Ro,ee,ee,ee,ee,ee,ee,ee,ee,ee,ee,ee,ee,ee,Ff,ee,ee,ee,ee,ee,ee],[Ro,ee,ee,ee,ee,ee,ee,ee,ee,ee,ee,ee,ee,ee,ee,ee,ee,ee,ee,ee,ee],[Ro,ee,ee,ee,ee,ee,ee,ee,ee,ee,ee,ee,ee,ee,ee,ee,ee,ee,ee,ee,c_],[Ro,ee,ee,ee,ee,ee,ee,ee,ee,ee,ee,ee,ee,ee,ee,ee,ee,ee,ee,ee,ee],[Ro,ee,ee,ee,ee,ee,ee,ee,ee,ee,ee,ee,ee,ee,ee,ee,ee,ee,ee,ee,ee]];var tI=ne.handleClientHello,nI=ne.handleClientKeyExchange,rI=ne.handleCertificateVerify;zf[ne.ConnectionEnd.server]=[[ee,tI,ee,ee,ee,ee,ee,ee,ee,ee,ee,ee,ee,ee,ee,ee,ee,ee,ee,ee,ee],[ee,ee,ee,ee,ee,ee,ee,ee,ee,ee,ee,l_,ee,ee,ee,ee,ee,ee,ee,ee,ee],[ee,ee,ee,ee,ee,ee,ee,ee,ee,ee,ee,ee,ee,ee,ee,ee,nI,ee,ee,ee,ee],[ee,ee,ee,ee,ee,ee,ee,ee,ee,ee,ee,ee,ee,ee,ee,rI,ee,ee,ee,ee,ee],[ee,ee,ee,ee,ee,ee,ee,ee,ee,ee,ee,ee,ee,ee,ee,ee,ee,ee,ee,ee,ee],[ee,ee,ee,ee,ee,ee,ee,ee,ee,ee,ee,ee,ee,ee,ee,ee,ee,ee,ee,ee,c_],[ee,ee,ee,ee,ee,ee,ee,ee,ee,ee,ee,ee,ee,ee,ee,ee,ee,ee,ee,ee,ee],[ee,ee,ee,ee,ee,ee,ee,ee,ee,ee,ee,ee,ee,ee,ee,ee,ee,ee,ee,ee,ee]];ne.generateKeys=function(e,t){var n=Hf,r=t.client_random+t.server_random;e.session.resuming||(t.master_secret=n(t.pre_master_secret,"master secret",r,48).bytes(),t.pre_master_secret=null),r=t.server_random+t.client_random;var i=2*t.mac_key_length+2*t.enc_key_length,a=e.version.major===ne.Versions.TLS_1_0.major&&e.version.minor===ne.Versions.TLS_1_0.minor;a&&(i+=2*t.fixed_iv_length);var s=n(t.master_secret,"key expansion",r,i),o={client_write_MAC_key:s.getBytes(t.mac_key_length),server_write_MAC_key:s.getBytes(t.mac_key_length),client_write_key:s.getBytes(t.enc_key_length),server_write_key:s.getBytes(t.enc_key_length)};return a&&(o.client_write_IV=s.getBytes(t.fixed_iv_length),o.server_write_IV=s.getBytes(t.fixed_iv_length)),o};ne.createConnectionState=function(e){var t=e.entity===ne.ConnectionEnd.client,n=function(){var a={sequenceNumber:[0,0],macKey:null,macLength:0,macFunction:null,cipherState:null,cipherFunction:function(s){return!0},compressionState:null,compressFunction:function(s){return!0},updateSequenceNumber:function(){a.sequenceNumber[1]===4294967295?(a.sequenceNumber[1]=0,++a.sequenceNumber[0]):++a.sequenceNumber[1]}};return a},r={read:n(),write:n()};if(r.read.update=function(a,s){return r.read.cipherFunction(s,r.read)?r.read.compressFunction(a,s,r.read)||a.error(a,{message:"Could not decompress record.",send:!0,alert:{level:ne.Alert.Level.fatal,description:ne.Alert.Description.decompression_failure}}):a.error(a,{message:"Could not decrypt record or bad MAC.",send:!0,alert:{level:ne.Alert.Level.fatal,description:ne.Alert.Description.bad_record_mac}}),!a.fail},r.write.update=function(a,s){return r.write.compressFunction(a,s,r.write)?r.write.cipherFunction(s,r.write)||a.error(a,{message:"Could not encrypt record.",send:!1,alert:{level:ne.Alert.Level.fatal,description:ne.Alert.Description.internal_error}}):a.error(a,{message:"Could not compress record.",send:!1,alert:{level:ne.Alert.Level.fatal,description:ne.Alert.Description.internal_error}}),!a.fail},e.session){var i=e.session.sp;switch(e.session.cipherSuite.initSecurityParameters(i),i.keys=ne.generateKeys(e,i),r.read.macKey=t?i.keys.server_write_MAC_key:i.keys.client_write_MAC_key,r.write.macKey=t?i.keys.client_write_MAC_key:i.keys.server_write_MAC_key,e.session.cipherSuite.initConnectionState(r,e,i),i.compression_algorithm){case ne.CompressionMethod.none:break;case ne.CompressionMethod.deflate:r.read.compressFunction=VA,r.write.compressFunction=FA;break;default:throw new Error("Unsupported compression algorithm.")}}return r};ne.createRandom=function(){var e=new Date,t=+e+e.getTimezoneOffset()*6e4,n=ut.util.createBuffer();return n.putInt32(t),n.putBytes(ut.random.getBytes(28)),n};ne.createRecord=function(e,t){if(!t.data)return null;var n={type:t.type,version:{major:e.version.major,minor:e.version.minor},length:t.data.length(),fragment:t.data};return n};ne.createAlert=function(e,t){var n=ut.util.createBuffer();return n.putByte(t.level),n.putByte(t.description),ne.createRecord(e,{type:ne.ContentType.alert,data:n})};ne.createClientHello=function(e){e.session.clientHelloVersion={major:e.version.major,minor:e.version.minor};for(var t=ut.util.createBuffer(),n=0;n<e.cipherSuites.length;++n){var r=e.cipherSuites[n];t.putByte(r.id[0]),t.putByte(r.id[1])}var i=t.length(),a=ut.util.createBuffer();a.putByte(ne.CompressionMethod.none);var s=a.length(),o=ut.util.createBuffer();if(e.virtualHost){var l=ut.util.createBuffer();l.putByte(0),l.putByte(0);var c=ut.util.createBuffer();c.putByte(0),Ka(c,2,ut.util.createBuffer(e.virtualHost));var h=ut.util.createBuffer();Ka(h,2,c),Ka(l,2,h),o.putBuffer(l)}var p=o.length();p>0&&(p+=2);var E=e.session.id,b=E.length+1+2+4+28+2+i+1+s+p,C=ut.util.createBuffer();return C.putByte(ne.HandshakeType.client_hello),C.putInt24(b),C.putByte(e.version.major),C.putByte(e.version.minor),C.putBytes(e.session.sp.client_random),Ka(C,1,ut.util.createBuffer(E)),Ka(C,2,t),Ka(C,1,a),p>0&&Ka(C,2,o),C};ne.createServerHello=function(e){var t=e.session.id,n=t.length+1+2+4+28+2+1,r=ut.util.createBuffer();return r.putByte(ne.HandshakeType.server_hello),r.putInt24(n),r.putByte(e.version.major),r.putByte(e.version.minor),r.putBytes(e.session.sp.server_random),Ka(r,1,ut.util.createBuffer(t)),r.putByte(e.session.cipherSuite.id[0]),r.putByte(e.session.cipherSuite.id[1]),r.putByte(e.session.compressionMethod),r};ne.createCertificate=function(e){var t=e.entity===ne.ConnectionEnd.client,n=null;if(e.getCertificate){var r;t?r=e.session.certificateRequest:r=e.session.extensions.server_name.serverNameList,n=e.getCertificate(e,r)}var i=ut.util.createBuffer();if(n!==null)try{ut.util.isArray(n)||(n=[n]);for(var a=null,s=0;s<n.length;++s){var o=ut.pem.decode(n[s])[0];if(o.type!=="CERTIFICATE"&&o.type!=="X509 CERTIFICATE"&&o.type!=="TRUSTED CERTIFICATE"){var l=new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');throw l.headerType=o.type,l}if(o.procType&&o.procType.type==="ENCRYPTED")throw new Error("Could not convert certificate from PEM; PEM is encrypted.");var c=ut.util.createBuffer(o.body);a===null&&(a=ut.asn1.fromDer(c.bytes(),!1));var h=ut.util.createBuffer();Ka(h,3,c),i.putBuffer(h)}n=ut.pki.certificateFromAsn1(a),t?e.session.clientCertificate=n:e.session.serverCertificate=n}catch(b){return e.error(e,{message:"Could not send certificate list.",cause:b,send:!0,alert:{level:ne.Alert.Level.fatal,description:ne.Alert.Description.bad_certificate}})}var p=3+i.length(),E=ut.util.createBuffer();return E.putByte(ne.HandshakeType.certificate),E.putInt24(p),Ka(E,3,i),E};ne.createClientKeyExchange=function(e){var t=ut.util.createBuffer();t.putByte(e.session.clientHelloVersion.major),t.putByte(e.session.clientHelloVersion.minor),t.putBytes(ut.random.getBytes(46));var n=e.session.sp;n.pre_master_secret=t.getBytes();var r=e.session.serverCertificate.publicKey;t=r.encrypt(n.pre_master_secret);var i=t.length+2,a=ut.util.createBuffer();return a.putByte(ne.HandshakeType.client_key_exchange),a.putInt24(i),a.putInt16(t.length),a.putBytes(t),a};ne.createServerKeyExchange=function(e){var t=0,n=ut.util.createBuffer();return t>0&&(n.putByte(ne.HandshakeType.server_key_exchange),n.putInt24(t)),n};ne.getClientSignature=function(e,t){var n=ut.util.createBuffer();n.putBuffer(e.session.md5.digest()),n.putBuffer(e.session.sha1.digest()),n=n.getBytes(),e.getSignature=e.getSignature||function(r,i,a){var s=null;if(r.getPrivateKey)try{s=r.getPrivateKey(r,r.session.clientCertificate),s=ut.pki.privateKeyFromPem(s)}catch(o){r.error(r,{message:"Could not get private key.",cause:o,send:!0,alert:{level:ne.Alert.Level.fatal,description:ne.Alert.Description.internal_error}})}s===null?r.error(r,{message:"No private key set.",send:!0,alert:{level:ne.Alert.Level.fatal,description:ne.Alert.Description.internal_error}}):i=s.sign(i,null),a(r,i)},e.getSignature(e,n,t)};ne.createCertificateVerify=function(e,t){var n=t.length+2,r=ut.util.createBuffer();return r.putByte(ne.HandshakeType.certificate_verify),r.putInt24(n),r.putInt16(t.length),r.putBytes(t),r};ne.createCertificateRequest=function(e){var t=ut.util.createBuffer();t.putByte(1);var n=ut.util.createBuffer();for(var r in e.caStore.certs){var i=e.caStore.certs[r],a=ut.pki.distinguishedNameToAsn1(i.subject),s=ut.asn1.toDer(a);n.putInt16(s.length()),n.putBuffer(s)}var o=1+t.length()+2+n.length(),l=ut.util.createBuffer();return l.putByte(ne.HandshakeType.certificate_request),l.putInt24(o),Ka(l,1,t),Ka(l,2,n),l};ne.createServerHelloDone=function(e){var t=ut.util.createBuffer();return t.putByte(ne.HandshakeType.server_hello_done),t.putInt24(0),t};ne.createChangeCipherSpec=function(){var e=ut.util.createBuffer();return e.putByte(1),e};ne.createFinished=function(e){var t=ut.util.createBuffer();t.putBuffer(e.session.md5.digest()),t.putBuffer(e.session.sha1.digest());var n=e.entity===ne.ConnectionEnd.client,r=e.session.sp,i=12,a=Hf,s=n?"client finished":"server finished";t=a(r.master_secret,s,t.getBytes(),i);var o=ut.util.createBuffer();return o.putByte(ne.HandshakeType.finished),o.putInt24(t.length()),o.putBuffer(t),o};ne.createHeartbeat=function(e,t,n){typeof n>"u"&&(n=t.length);var r=ut.util.createBuffer();r.putByte(e),r.putInt16(n),r.putBytes(t);var i=r.length(),a=Math.max(16,i-n-3);return r.putBytes(ut.random.getBytes(a)),r};ne.queue=function(e,t){if(t&&!(t.fragment.length()===0&&(t.type===ne.ContentType.handshake||t.type===ne.ContentType.alert||t.type===ne.ContentType.change_cipher_spec))){if(t.type===ne.ContentType.handshake){var n=t.fragment.bytes();e.session.md5.update(n),e.session.sha1.update(n),n=null}var r;if(t.fragment.length()<=ne.MaxFragment)r=[t];else{r=[];for(var i=t.fragment.bytes();i.length>ne.MaxFragment;)r.push(ne.createRecord(e,{type:t.type,data:ut.util.createBuffer(i.slice(0,ne.MaxFragment))})),i=i.slice(ne.MaxFragment);i.length>0&&r.push(ne.createRecord(e,{type:t.type,data:ut.util.createBuffer(i)}))}for(var a=0;a<r.length&&!e.fail;++a){var s=r[a],o=e.state.current.write;o.update(e,s)&&e.records.push(s)}}};ne.flush=function(e){for(var t=0;t<e.records.length;++t){var n=e.records[t];e.tlsData.putByte(n.type),e.tlsData.putByte(n.version.major),e.tlsData.putByte(n.version.minor),e.tlsData.putInt16(n.fragment.length()),e.tlsData.putBuffer(e.records[t].fragment)}return e.records=[],e.tlsDataReady(e)};var ap=function(e){switch(e){case!0:return!0;case ut.pki.certificateError.bad_certificate:return ne.Alert.Description.bad_certificate;case ut.pki.certificateError.unsupported_certificate:return ne.Alert.Description.unsupported_certificate;case ut.pki.certificateError.certificate_revoked:return ne.Alert.Description.certificate_revoked;case ut.pki.certificateError.certificate_expired:return ne.Alert.Description.certificate_expired;case ut.pki.certificateError.certificate_unknown:return ne.Alert.Description.certificate_unknown;case ut.pki.certificateError.unknown_ca:return ne.Alert.Description.unknown_ca;default:return ne.Alert.Description.bad_certificate}},iI=function(e){switch(e){case!0:return!0;case ne.Alert.Description.bad_certificate:return ut.pki.certificateError.bad_certificate;case ne.Alert.Description.unsupported_certificate:return ut.pki.certificateError.unsupported_certificate;case ne.Alert.Description.certificate_revoked:return ut.pki.certificateError.certificate_revoked;case ne.Alert.Description.certificate_expired:return ut.pki.certificateError.certificate_expired;case ne.Alert.Description.certificate_unknown:return ut.pki.certificateError.certificate_unknown;case ne.Alert.Description.unknown_ca:return ut.pki.certificateError.unknown_ca;default:return ut.pki.certificateError.bad_certificate}};ne.verifyCertificateChain=function(e,t){try{var n={};for(var r in e.verifyOptions)n[r]=e.verifyOptions[r];n.verify=function(a,s,o){var l=ap(a),c=e.verify(e,a,s,o);if(c!==!0){if(typeof c=="object"&&!ut.util.isArray(c)){var h=new Error("The application rejected the certificate.");throw h.send=!0,h.alert={level:ne.Alert.Level.fatal,description:ne.Alert.Description.bad_certificate},c.message&&(h.message=c.message),c.alert&&(h.alert.description=c.alert),h}c!==a&&(c=iI(c))}return c},ut.pki.verifyCertificateChain(e.caStore,t,n)}catch(a){var i=a;(typeof i!="object"||ut.util.isArray(i))&&(i={send:!0,alert:{level:ne.Alert.Level.fatal,description:ap(a)}}),"send"in i||(i.send=!0),"alert"in i||(i.alert={level:ne.Alert.Level.fatal,description:ap(i.error)}),e.error(e,i)}return!e.fail};ne.createSessionCache=function(e,t){var n=null;if(e&&e.getSession&&e.setSession&&e.order)n=e;else{n={},n.cache=e||{},n.capacity=Math.max(t||100,1),n.order=[];for(var r in e)n.order.length<=t?n.order.push(r):delete e[r];n.getSession=function(i){var a=null,s=null;if(i?s=ut.util.bytesToHex(i):n.order.length>0&&(s=n.order[0]),s!==null&&s in n.cache){a=n.cache[s],delete n.cache[s];for(var o in n.order)if(n.order[o]===s){n.order.splice(o,1);break}}return a},n.setSession=function(i,a){if(n.order.length===n.capacity){var s=n.order.shift();delete n.cache[s]}var s=ut.util.bytesToHex(i);n.order.push(s),n.cache[s]=a}}return n};ne.createConnection=function(e){var t=null;e.caStore?ut.util.isArray(e.caStore)?t=ut.pki.createCaStore(e.caStore):t=e.caStore:t=ut.pki.createCaStore();var n=e.cipherSuites||null;if(n===null){n=[];for(var r in ne.CipherSuites)n.push(ne.CipherSuites[r])}var i=e.server?ne.ConnectionEnd.server:ne.ConnectionEnd.client,a=e.sessionCache?ne.createSessionCache(e.sessionCache):null,s={version:{major:ne.Version.major,minor:ne.Version.minor},entity:i,sessionId:e.sessionId,caStore:t,sessionCache:a,cipherSuites:n,connected:e.connected,virtualHost:e.virtualHost||null,verifyClient:e.verifyClient||!1,verify:e.verify||function(h,p,E,b){return p},verifyOptions:e.verifyOptions||{},getCertificate:e.getCertificate||null,getPrivateKey:e.getPrivateKey||null,getSignature:e.getSignature||null,input:ut.util.createBuffer(),tlsData:ut.util.createBuffer(),data:ut.util.createBuffer(),tlsDataReady:e.tlsDataReady,dataReady:e.dataReady,heartbeatReceived:e.heartbeatReceived,closed:e.closed,error:function(h,p){p.origin=p.origin||(h.entity===ne.ConnectionEnd.client?"client":"server"),p.send&&(ne.queue(h,ne.createAlert(h,p.alert)),ne.flush(h));var E=p.fatal!==!1;E&&(h.fail=!0),e.error(h,p),E&&h.close(!1)},deflate:e.deflate||null,inflate:e.inflate||null};s.reset=function(h){s.version={major:ne.Version.major,minor:ne.Version.minor},s.record=null,s.session=null,s.peerCertificate=null,s.state={pending:null,current:null},s.expect=s.entity===ne.ConnectionEnd.client?zA:ZA,s.fragmented=null,s.records=[],s.open=!1,s.handshakes=0,s.handshaking=!1,s.isConnected=!1,s.fail=!(h||typeof h>"u"),s.input.clear(),s.tlsData.clear(),s.data.clear(),s.state.current=ne.createConnectionState(s)},s.reset();var o=function(h,p){var E=p.type-ne.ContentType.change_cipher_spec,b=up[h.entity][h.expect];E in b?b[E](h,p):ne.handleUnexpected(h,p)},l=function(h){var p=0,E=h.input,b=E.length();if(b<5)p=5-b;else{h.record={type:E.getByte(),version:{major:E.getByte(),minor:E.getByte()},length:E.getInt16(),fragment:ut.util.createBuffer(),ready:!1};var C=h.record.version.major===h.version.major;C&&h.session&&h.session.version&&(C=h.record.version.minor===h.version.minor),C||h.error(h,{message:"Incompatible TLS version.",send:!0,alert:{level:ne.Alert.Level.fatal,description:ne.Alert.Description.protocol_version}})}return p},c=function(h){var p=0,E=h.input,b=E.length();if(b<h.record.length)p=h.record.length-b;else{h.record.fragment.putBytes(E.getBytes(h.record.length)),E.compact();var C=h.state.current.read;C.update(h,h.record)&&(h.fragmented!==null&&(h.fragmented.type===h.record.type?(h.fragmented.fragment.putBuffer(h.record.fragment),h.record=h.fragmented):h.error(h,{message:"Invalid fragmented record.",send:!0,alert:{level:ne.Alert.Level.fatal,description:ne.Alert.Description.unexpected_message}})),h.record.ready=!0)}return p};return s.handshake=function(h){if(s.entity!==ne.ConnectionEnd.client)s.error(s,{message:"Cannot initiate handshake as a server.",fatal:!1});else if(s.handshaking)s.error(s,{message:"Handshake already in progress.",fatal:!1});else{s.fail&&!s.open&&s.handshakes===0&&(s.fail=!1),s.handshaking=!0,h=h||"";var p=null;h.length>0&&(s.sessionCache&&(p=s.sessionCache.getSession(h)),p===null&&(h="")),h.length===0&&s.sessionCache&&(p=s.sessionCache.getSession(),p!==null&&(h=p.id)),s.session={id:h,version:null,cipherSuite:null,compressionMethod:null,serverCertificate:null,certificateRequest:null,clientCertificate:null,sp:{},md5:ut.md.md5.create(),sha1:ut.md.sha1.create()},p&&(s.version=p.version,s.session.sp=p.sp),s.session.sp.client_random=ne.createRandom().getBytes(),s.open=!0,ne.queue(s,ne.createRecord(s,{type:ne.ContentType.handshake,data:ne.createClientHello(s)})),ne.flush(s)}},s.process=function(h){var p=0;return h&&s.input.putBytes(h),s.fail||(s.record!==null&&s.record.ready&&s.record.fragment.isEmpty()&&(s.record=null),s.record===null&&(p=l(s)),!s.fail&&s.record!==null&&!s.record.ready&&(p=c(s)),!s.fail&&s.record!==null&&s.record.ready&&o(s,s.record)),p},s.prepare=function(h){return ne.queue(s,ne.createRecord(s,{type:ne.ContentType.application_data,data:ut.util.createBuffer(h)})),ne.flush(s)},s.prepareHeartbeatRequest=function(h,p){return h instanceof ut.util.ByteBuffer&&(h=h.bytes()),typeof p>"u"&&(p=h.length),s.expectedHeartbeatPayload=h,ne.queue(s,ne.createRecord(s,{type:ne.ContentType.heartbeat,data:ne.createHeartbeat(ne.HeartbeatMessageType.heartbeat_request,h,p)})),ne.flush(s)},s.close=function(h){if(!s.fail&&s.sessionCache&&s.session){var p={id:s.session.id,version:s.session.version,sp:s.session.sp};p.sp.keys=null,s.sessionCache.setSession(p.id,p)}s.open&&(s.open=!1,s.input.clear(),(s.isConnected||s.handshaking)&&(s.isConnected=s.handshaking=!1,ne.queue(s,ne.createAlert(s,{level:ne.Alert.Level.warning,description:ne.Alert.Description.close_notify})),ne.flush(s)),s.closed(s)),s.reset(h)},s};f_.exports=ut.tls=ut.tls||{};for(Vf in ne)typeof ne[Vf]!="function"&&(ut.tls[Vf]=ne[Vf]);var Vf;ut.tls.prf_tls1=Hf;ut.tls.hmac_sha1=qA;ut.tls.createSessionCache=ne.createSessionCache;ut.tls.createConnection=ne.createConnection});var p_=$e((P6,d_)=>{var Oo=hn();ko();lp();var Wa=d_.exports=Oo.tls;Wa.CipherSuites.TLS_RSA_WITH_AES_128_CBC_SHA={id:[0,47],name:"TLS_RSA_WITH_AES_128_CBC_SHA",initSecurityParameters:function(e){e.bulk_cipher_algorithm=Wa.BulkCipherAlgorithm.aes,e.cipher_type=Wa.CipherType.block,e.enc_key_length=16,e.block_length=16,e.fixed_iv_length=16,e.record_iv_length=16,e.mac_algorithm=Wa.MACAlgorithm.hmac_sha1,e.mac_length=20,e.mac_key_length=20},initConnectionState:h_};Wa.CipherSuites.TLS_RSA_WITH_AES_256_CBC_SHA={id:[0,53],name:"TLS_RSA_WITH_AES_256_CBC_SHA",initSecurityParameters:function(e){e.bulk_cipher_algorithm=Wa.BulkCipherAlgorithm.aes,e.cipher_type=Wa.CipherType.block,e.enc_key_length=32,e.block_length=16,e.fixed_iv_length=16,e.record_iv_length=16,e.mac_algorithm=Wa.MACAlgorithm.hmac_sha1,e.mac_length=20,e.mac_key_length=20},initConnectionState:h_};function h_(e,t,n){var r=t.entity===Oo.tls.ConnectionEnd.client;e.read.cipherState={init:!1,cipher:Oo.cipher.createDecipher("AES-CBC",r?n.keys.server_write_key:n.keys.client_write_key),iv:r?n.keys.server_write_IV:n.keys.client_write_IV},e.write.cipherState={init:!1,cipher:Oo.cipher.createCipher("AES-CBC",r?n.keys.client_write_key:n.keys.server_write_key),iv:r?n.keys.client_write_IV:n.keys.server_write_IV},e.read.cipherFunction=uI,e.write.cipherFunction=aI,e.read.macLength=e.write.macLength=n.mac_length,e.read.macFunction=e.write.macFunction=Wa.hmac_sha1}function aI(e,t){var n=!1,r=t.macFunction(t.macKey,t.sequenceNumber,e);e.fragment.putBytes(r),t.updateSequenceNumber();var i;e.version.minor===Wa.Versions.TLS_1_0.minor?i=t.cipherState.init?null:t.cipherState.iv:i=Oo.random.getBytesSync(16),t.cipherState.init=!0;var a=t.cipherState.cipher;return a.start({iv:i}),e.version.minor>=Wa.Versions.TLS_1_1.minor&&a.output.putBytes(i),a.update(e.fragment),a.finish(sI)&&(e.fragment=a.output,e.length=e.fragment.length(),n=!0),n}function sI(e,t,n){if(!n){var r=e-t.length()%e;t.fillWithByte(r-1,r)}return!0}function oI(e,t,n){var r=!0;if(n){for(var i=t.length(),a=t.last(),s=i-1-a;s<i-1;++s)r=r&&t.at(s)==a;r&&t.truncate(a+1)}return r}function uI(e,t){var n=!1,r;e.version.minor===Wa.Versions.TLS_1_0.minor?r=t.cipherState.init?null:t.cipherState.iv:r=e.fragment.getBytes(16),t.cipherState.init=!0;var i=t.cipherState.cipher;i.start({iv:r}),i.update(e.fragment),n=i.finish(oI);var a=t.macLength,s=Oo.random.getBytesSync(a),o=i.output.length();o>=a?(e.fragment=i.output.getBytes(o-a),s=i.output.getBytes(a)):e.fragment=i.output.getBytes(),e.fragment=Oo.util.createBuffer(e.fragment),e.length=e.fragment.length();var l=t.macFunction(t.macKey,t.sequenceNumber,e);return t.updateSequenceNumber(),n=lI(t.macKey,s,l)&&n,n}function lI(e,t,n){var r=Oo.hmac.create();return r.start("SHA1",e),r.update(t),t=r.digest().getBytes(),r.start(null,null),r.update(n),n=r.digest().getBytes(),t===n}});var hp=$e((D6,y_)=>{var pr=hn();Es();Bn();var ic=y_.exports=pr.sha512=pr.sha512||{};pr.md.sha512=pr.md.algorithms.sha512=ic;var m_=pr.sha384=pr.sha512.sha384=pr.sha512.sha384||{};m_.create=function(){return ic.create("SHA-384")};pr.md.sha384=pr.md.algorithms.sha384=m_;pr.sha512.sha256=pr.sha512.sha256||{create:function(){return ic.create("SHA-512/256")}};pr.md["sha512/256"]=pr.md.algorithms["sha512/256"]=pr.sha512.sha256;pr.sha512.sha224=pr.sha512.sha224||{create:function(){return ic.create("SHA-512/224")}};pr.md["sha512/224"]=pr.md.algorithms["sha512/224"]=pr.sha512.sha224;ic.create=function(e){if(v_||cI(),typeof e>"u"&&(e="SHA-512"),!(e in gu))throw new Error("Invalid SHA-512 algorithm: "+e);for(var t=gu[e],n=null,r=pr.util.createBuffer(),i=new Array(80),a=0;a<80;++a)i[a]=new Array(2);var s=64;switch(e){case"SHA-384":s=48;break;case"SHA-512/256":s=32;break;case"SHA-512/224":s=28;break}var o={algorithm:e.replace("-","").toLowerCase(),blockLength:128,digestLength:s,messageLength:0,fullMessageLength:null,messageLengthSize:16};return o.start=function(){o.messageLength=0,o.fullMessageLength=o.messageLength128=[];for(var l=o.messageLengthSize/4,c=0;c<l;++c)o.fullMessageLength.push(0);r=pr.util.createBuffer(),n=new Array(t.length);for(var c=0;c<t.length;++c)n[c]=t[c].slice(0);return o},o.start(),o.update=function(l,c){c==="utf8"&&(l=pr.util.encodeUtf8(l));var h=l.length;o.messageLength+=h,h=[h/4294967296>>>0,h>>>0];for(var p=o.fullMessageLength.length-1;p>=0;--p)o.fullMessageLength[p]+=h[1],h[1]=h[0]+(o.fullMessageLength[p]/4294967296>>>0),o.fullMessageLength[p]=o.fullMessageLength[p]>>>0,h[0]=h[1]/4294967296>>>0;return r.putBytes(l),g_(n,i,r),(r.read>2048||r.length()===0)&&r.compact(),o},o.digest=function(){var l=pr.util.createBuffer();l.putBytes(r.bytes());var c=o.fullMessageLength[o.fullMessageLength.length-1]+o.messageLengthSize,h=c&o.blockLength-1;l.putBytes(cp.substr(0,o.blockLength-h));for(var p,E,b=o.fullMessageLength[0]*8,C=0;C<o.fullMessageLength.length-1;++C)p=o.fullMessageLength[C+1]*8,E=p/4294967296>>>0,b+=E,l.putInt32(b>>>0),b=p>>>0;l.putInt32(b);for(var N=new Array(n.length),C=0;C<n.length;++C)N[C]=n[C].slice(0);g_(N,i,l);var w=pr.util.createBuffer(),I;e==="SHA-512"?I=N.length:e==="SHA-384"?I=N.length-2:I=N.length-4;for(var C=0;C<I;++C)w.putInt32(N[C][0]),(C!==I-1||e!=="SHA-512/224")&&w.putInt32(N[C][1]);return w},o};var cp=null,v_=!1,fp=null,gu=null;function cI(){cp=String.fromCharCode(128),cp+=pr.util.fillString(String.fromCharCode(0),128),fp=[[1116352408,3609767458],[1899447441,602891725],[3049323471,3964484399],[3921009573,2173295548],[961987163,4081628472],[1508970993,3053834265],[2453635748,2937671579],[2870763221,3664609560],[3624381080,2734883394],[310598401,1164996542],[607225278,1323610764],[1426881987,3590304994],[1925078388,4068182383],[2162078206,991336113],[2614888103,633803317],[3248222580,3479774868],[3835390401,2666613458],[4022224774,944711139],[264347078,2341262773],[604807628,2007800933],[770255983,1495990901],[1249150122,1856431235],[1555081692,3175218132],[1996064986,2198950837],[2554220882,3999719339],[2821834349,766784016],[2952996808,2566594879],[3210313671,3203337956],[3336571891,1034457026],[3584528711,2466948901],[113926993,3758326383],[338241895,168717936],[666307205,1188179964],[773529912,1546045734],[1294757372,1522805485],[1396182291,2643833823],[1695183700,2343527390],[1986661051,1014477480],[2177026350,1206759142],[2456956037,344077627],[2730485921,1290863460],[2820302411,3158454273],[3259730800,3505952657],[3345764771,106217008],[3516065817,3606008344],[3600352804,1432725776],[4094571909,1467031594],[275423344,851169720],[430227734,3100823752],[506948616,1363258195],[659060556,3750685593],[883997877,3785050280],[958139571,3318307427],[1322822218,3812723403],[1537002063,2003034995],[1747873779,3602036899],[1955562222,1575990012],[2024104815,1125592928],[2227730452,2716904306],[2361852424,442776044],[2428436474,593698344],[2756734187,3733110249],[3204031479,2999351573],[3329325298,3815920427],[3391569614,3928383900],[3515267271,566280711],[3940187606,3454069534],[4118630271,4000239992],[116418474,1914138554],[174292421,2731055270],[289380356,3203993006],[460393269,320620315],[685471733,587496836],[852142971,1086792851],[1017036298,365543100],[1126000580,2618297676],[1288033470,3409855158],[1501505948,4234509866],[1607167915,987167468],[1816402316,1246189591]],gu={},gu["SHA-512"]=[[1779033703,4089235720],[3144134277,2227873595],[1013904242,4271175723],[2773480762,1595750129],[1359893119,2917565137],[2600822924,725511199],[528734635,4215389547],[1541459225,327033209]],gu["SHA-384"]=[[3418070365,3238371032],[1654270250,914150663],[2438529370,812702999],[355462360,4144912697],[1731405415,4290775857],[2394180231,1750603025],[3675008525,1694076839],[1203062813,3204075428]],gu["SHA-512/256"]=[[573645204,4230739756],[2673172387,3360449730],[596883563,1867755857],[2520282905,1497426621],[2519219938,2827943907],[3193839141,1401305490],[721525244,746961066],[246885852,2177182882]],gu["SHA-512/224"]=[[2352822216,424955298],[1944164710,2312950998],[502970286,855612546],[1738396948,1479516111],[258812777,2077511080],[2011393907,79989058],[1067287976,1780299464],[286451373,2446758561]],v_=!0}function g_(e,t,n){for(var r,i,a,s,o,l,c,h,p,E,b,C,N,w,I,S,_,P,v,y,$,Z,ce,q,W,O,re,le,ie,oe,Q,j,H,G,fe,pe=n.length();pe>=128;){for(ie=0;ie<16;++ie)t[ie][0]=n.getInt32()>>>0,t[ie][1]=n.getInt32()>>>0;for(;ie<80;++ie)j=t[ie-2],oe=j[0],Q=j[1],r=((oe>>>19|Q<<13)^(Q>>>29|oe<<3)^oe>>>6)>>>0,i=((oe<<13|Q>>>19)^(Q<<3|oe>>>29)^(oe<<26|Q>>>6))>>>0,G=t[ie-15],oe=G[0],Q=G[1],a=((oe>>>1|Q<<31)^(oe>>>8|Q<<24)^oe>>>7)>>>0,s=((oe<<31|Q>>>1)^(oe<<24|Q>>>8)^(oe<<25|Q>>>7))>>>0,H=t[ie-7],fe=t[ie-16],Q=i+H[1]+s+fe[1],t[ie][0]=r+H[0]+a+fe[0]+(Q/4294967296>>>0)>>>0,t[ie][1]=Q>>>0;for(N=e[0][0],w=e[0][1],I=e[1][0],S=e[1][1],_=e[2][0],P=e[2][1],v=e[3][0],y=e[3][1],$=e[4][0],Z=e[4][1],ce=e[5][0],q=e[5][1],W=e[6][0],O=e[6][1],re=e[7][0],le=e[7][1],ie=0;ie<80;++ie)c=(($>>>14|Z<<18)^($>>>18|Z<<14)^(Z>>>9|$<<23))>>>0,h=(($<<18|Z>>>14)^($<<14|Z>>>18)^(Z<<23|$>>>9))>>>0,p=(W^$&(ce^W))>>>0,E=(O^Z&(q^O))>>>0,o=((N>>>28|w<<4)^(w>>>2|N<<30)^(w>>>7|N<<25))>>>0,l=((N<<4|w>>>28)^(w<<30|N>>>2)^(w<<25|N>>>7))>>>0,b=(N&I|_&(N^I))>>>0,C=(w&S|P&(w^S))>>>0,Q=le+h+E+fp[ie][1]+t[ie][1],r=re+c+p+fp[ie][0]+t[ie][0]+(Q/4294967296>>>0)>>>0,i=Q>>>0,Q=l+C,a=o+b+(Q/4294967296>>>0)>>>0,s=Q>>>0,re=W,le=O,W=ce,O=q,ce=$,q=Z,Q=y+i,$=v+r+(Q/4294967296>>>0)>>>0,Z=Q>>>0,v=_,y=P,_=I,P=S,I=N,S=w,Q=i+s,N=r+a+(Q/4294967296>>>0)>>>0,w=Q>>>0;Q=e[0][1]+w,e[0][0]=e[0][0]+N+(Q/4294967296>>>0)>>>0,e[0][1]=Q>>>0,Q=e[1][1]+S,e[1][0]=e[1][0]+I+(Q/4294967296>>>0)>>>0,e[1][1]=Q>>>0,Q=e[2][1]+P,e[2][0]=e[2][0]+_+(Q/4294967296>>>0)>>>0,e[2][1]=Q>>>0,Q=e[3][1]+y,e[3][0]=e[3][0]+v+(Q/4294967296>>>0)>>>0,e[3][1]=Q>>>0,Q=e[4][1]+Z,e[4][0]=e[4][0]+$+(Q/4294967296>>>0)>>>0,e[4][1]=Q>>>0,Q=e[5][1]+q,e[5][0]=e[5][0]+ce+(Q/4294967296>>>0)>>>0,e[5][1]=Q>>>0,Q=e[6][1]+O,e[6][0]=e[6][0]+W+(Q/4294967296>>>0)>>>0,e[6][1]=Q>>>0,Q=e[7][1]+le,e[7][0]=e[7][0]+re+(Q/4294967296>>>0)>>>0,e[7][1]=Q>>>0,pe-=128}}});var __=$e(dp=>{var fI=hn();is();var yi=fI.asn1;dp.privateKeyValidator={name:"PrivateKeyInfo",tagClass:yi.Class.UNIVERSAL,type:yi.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:yi.Class.UNIVERSAL,type:yi.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:yi.Class.UNIVERSAL,type:yi.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:yi.Class.UNIVERSAL,type:yi.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:yi.Class.UNIVERSAL,type:yi.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]};dp.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:yi.Class.UNIVERSAL,type:yi.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:yi.Class.UNIVERSAL,type:yi.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:yi.Class.UNIVERSAL,type:yi.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{tagClass:yi.Class.UNIVERSAL,type:yi.Type.BITSTRING,constructed:!1,composed:!0,captureBitStringValue:"ed25519PublicKey"}]}});var P_=$e((O6,N_)=>{var ki=hn();ec();za();hp();Bn();var S_=__(),hI=S_.publicKeyValidator,dI=S_.privateKeyValidator;typeof b_>"u"&&(b_=ki.jsbn.BigInteger);var b_,mp=ki.util.ByteBuffer,ma=typeof Buffer>"u"?Uint8Array:Buffer;ki.pki=ki.pki||{};N_.exports=ki.pki.ed25519=ki.ed25519=ki.ed25519||{};var En=ki.ed25519;En.constants={};En.constants.PUBLIC_KEY_BYTE_LENGTH=32;En.constants.PRIVATE_KEY_BYTE_LENGTH=64;En.constants.SEED_BYTE_LENGTH=32;En.constants.SIGN_BYTE_LENGTH=64;En.constants.HASH_BYTE_LENGTH=64;En.generateKeyPair=function(e){e=e||{};var t=e.seed;if(t===void 0)t=ki.random.getBytesSync(En.constants.SEED_BYTE_LENGTH);else if(typeof t=="string"){if(t.length!==En.constants.SEED_BYTE_LENGTH)throw new TypeError('"seed" must be '+En.constants.SEED_BYTE_LENGTH+" bytes in length.")}else if(!(t instanceof Uint8Array))throw new TypeError('"seed" must be a node.js Buffer, Uint8Array, or a binary string.');t=no({message:t,encoding:"binary"});for(var n=new ma(En.constants.PUBLIC_KEY_BYTE_LENGTH),r=new ma(En.constants.PRIVATE_KEY_BYTE_LENGTH),i=0;i<32;++i)r[i]=t[i];return vI(n,r),{publicKey:n,privateKey:r}};En.privateKeyFromAsn1=function(e){var t={},n=[],r=ki.asn1.validate(e,dI,t,n);if(!r){var i=new Error("Invalid Key.");throw i.errors=n,i}var a=ki.asn1.derToOid(t.privateKeyOid),s=ki.oids.EdDSA25519;if(a!==s)throw new Error('Invalid OID "'+a+'"; OID must be "'+s+'".');var o=t.privateKey,l=no({message:ki.asn1.fromDer(o).value,encoding:"binary"});return{privateKeyBytes:l}};En.publicKeyFromAsn1=function(e){var t={},n=[],r=ki.asn1.validate(e,hI,t,n);if(!r){var i=new Error("Invalid Key.");throw i.errors=n,i}var a=ki.asn1.derToOid(t.publicKeyOid),s=ki.oids.EdDSA25519;if(a!==s)throw new Error('Invalid OID "'+a+'"; OID must be "'+s+'".');var o=t.ed25519PublicKey;if(o.length!==En.constants.PUBLIC_KEY_BYTE_LENGTH)throw new Error("Key length is invalid.");return no({message:o,encoding:"binary"})};En.publicKeyFromPrivateKey=function(e){e=e||{};var t=no({message:e.privateKey,encoding:"binary"});if(t.length!==En.constants.PRIVATE_KEY_BYTE_LENGTH)throw new TypeError('"options.privateKey" must have a byte length of '+En.constants.PRIVATE_KEY_BYTE_LENGTH);for(var n=new ma(En.constants.PUBLIC_KEY_BYTE_LENGTH),r=0;r<n.length;++r)n[r]=t[32+r];return n};En.sign=function(e){e=e||{};var t=no(e),n=no({message:e.privateKey,encoding:"binary"});if(n.length===En.constants.SEED_BYTE_LENGTH){var r=En.generateKeyPair({seed:n});n=r.privateKey}else if(n.length!==En.constants.PRIVATE_KEY_BYTE_LENGTH)throw new TypeError('"options.privateKey" must have a byte length of '+En.constants.SEED_BYTE_LENGTH+" or "+En.constants.PRIVATE_KEY_BYTE_LENGTH);var i=new ma(En.constants.SIGN_BYTE_LENGTH+t.length);yI(i,t,t.length,n);for(var a=new ma(En.constants.SIGN_BYTE_LENGTH),s=0;s<a.length;++s)a[s]=i[s];return a};En.verify=function(e){e=e||{};var t=no(e);if(e.signature===void 0)throw new TypeError('"options.signature" must be a node.js Buffer, a Uint8Array, a forge ByteBuffer, or a binary string.');var n=no({message:e.signature,encoding:"binary"});if(n.length!==En.constants.SIGN_BYTE_LENGTH)throw new TypeError('"options.signature" must have a byte length of '+En.constants.SIGN_BYTE_LENGTH);var r=no({message:e.publicKey,encoding:"binary"});if(r.length!==En.constants.PUBLIC_KEY_BYTE_LENGTH)throw new TypeError('"options.publicKey" must have a byte length of '+En.constants.PUBLIC_KEY_BYTE_LENGTH);var i=new ma(En.constants.SIGN_BYTE_LENGTH+t.length),a=new ma(En.constants.SIGN_BYTE_LENGTH+t.length),s;for(s=0;s<En.constants.SIGN_BYTE_LENGTH;++s)i[s]=n[s];for(s=0;s<t.length;++s)i[s+En.constants.SIGN_BYTE_LENGTH]=t[s];return _I(a,i,i.length,r)>=0};function no(e){var t=e.message;if(t instanceof Uint8Array||t instanceof ma)return t;var n=e.encoding;if(t===void 0)if(e.md)t=e.md.digest().getBytes(),n="binary";else throw new TypeError('"options.message" or "options.md" not specified.');if(typeof t=="string"&&!n)throw new TypeError('"options.encoding" must be "binary" or "utf8".');if(typeof t=="string"){if(typeof Buffer<"u")return Buffer.from(t,n);t=new mp(t,n)}else if(!(t instanceof mp))throw new TypeError('"options.message" must be a node.js Buffer, a Uint8Array, a forge ByteBuffer, or a string with "options.encoding" specifying its encoding.');for(var r=new ma(t.length()),i=0;i<r.length;++i)r[i]=t.at(i);return r}var vp=Kt(),$f=Kt([1]),pI=Kt([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),gI=Kt([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),w_=Kt([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),x_=Kt([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),pp=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]),mI=Kt([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function ac(e,t){var n=ki.md.sha512.create(),r=new mp(e);n.update(r.getBytes(t),"binary");var i=n.digest().getBytes();if(typeof Buffer<"u")return Buffer.from(i,"binary");for(var a=new ma(En.constants.HASH_BYTE_LENGTH),s=0;s<64;++s)a[s]=i.charCodeAt(s);return a}function vI(e,t){var n=[Kt(),Kt(),Kt(),Kt()],r,i=ac(t,32);for(i[0]&=248,i[31]&=127,i[31]|=64,wp(n,i),bp(e,n),r=0;r<32;++r)t[r+32]=e[r];return 0}function yI(e,t,n,r){var i,a,s=new Float64Array(64),o=[Kt(),Kt(),Kt(),Kt()],l=ac(r,32);l[0]&=248,l[31]&=127,l[31]|=64;var c=n+64;for(i=0;i<n;++i)e[64+i]=t[i];for(i=0;i<32;++i)e[32+i]=l[32+i];var h=ac(e.subarray(32),n+32);for(yp(h),wp(o,h),bp(e,o),i=32;i<64;++i)e[i]=r[i];var p=ac(e,n+64);for(yp(p),i=32;i<64;++i)s[i]=0;for(i=0;i<32;++i)s[i]=h[i];for(i=0;i<32;++i)for(a=0;a<32;a++)s[i+a]+=p[i]*l[a];return T_(e.subarray(32),s),c}function _I(e,t,n,r){var i,a,s=new ma(32),o=[Kt(),Kt(),Kt(),Kt()],l=[Kt(),Kt(),Kt(),Kt()];if(a=-1,n<64||bI(l,r))return-1;for(i=0;i<n;++i)e[i]=t[i];for(i=0;i<32;++i)e[i+32]=r[i];var c=ac(e,n);if(yp(c),A_(o,l,c),wp(l,t.subarray(32)),_p(o,l),bp(s,o),n-=64,L_(t,0,s,0)){for(i=0;i<n;++i)e[i]=0;return-1}for(i=0;i<n;++i)e[i]=t[i+64];return a=n,a}function T_(e,t){var n,r,i,a;for(r=63;r>=32;--r){for(n=0,i=r-32,a=r-12;i<a;++i)t[i]+=n-16*t[r]*pp[i-(r-32)],n=t[i]+128>>8,t[i]-=n*256;t[i]+=n,t[r]=0}for(n=0,i=0;i<32;++i)t[i]+=n-(t[31]>>4)*pp[i],n=t[i]>>8,t[i]&=255;for(i=0;i<32;++i)t[i]-=n*pp[i];for(r=0;r<32;++r)t[r+1]+=t[r]>>8,e[r]=t[r]&255}function yp(e){for(var t=new Float64Array(64),n=0;n<64;++n)t[n]=e[n],e[n]=0;T_(e,t)}function _p(e,t){var n=Kt(),r=Kt(),i=Kt(),a=Kt(),s=Kt(),o=Kt(),l=Kt(),c=Kt(),h=Kt();al(n,e[1],e[0]),al(h,t[1],t[0]),tr(n,n,h),il(r,e[0],e[1]),il(h,t[0],t[1]),tr(r,r,h),tr(i,e[3],t[3]),tr(i,i,gI),tr(a,e[2],t[2]),il(a,a,a),al(s,r,n),al(o,a,i),il(l,a,i),il(c,r,n),tr(e[0],s,o),tr(e[1],c,l),tr(e[2],l,o),tr(e[3],s,c)}function E_(e,t,n){for(var r=0;r<4;++r)I_(e[r],t[r],n)}function bp(e,t){var n=Kt(),r=Kt(),i=Kt();CI(i,t[2]),tr(n,t[0],i),tr(r,t[1],i),jf(e,r),e[31]^=k_(n)<<7}function jf(e,t){var n,r,i,a=Kt(),s=Kt();for(n=0;n<16;++n)s[n]=t[n];for(gp(s),gp(s),gp(s),r=0;r<2;++r){for(a[0]=s[0]-65517,n=1;n<15;++n)a[n]=s[n]-65535-(a[n-1]>>16&1),a[n-1]&=65535;a[15]=s[15]-32767-(a[14]>>16&1),i=a[15]>>16&1,a[14]&=65535,I_(s,a,1-i)}for(n=0;n<16;n++)e[2*n]=s[n]&255,e[2*n+1]=s[n]>>8}function bI(e,t){var n=Kt(),r=Kt(),i=Kt(),a=Kt(),s=Kt(),o=Kt(),l=Kt();return Bo(e[2],$f),wI(e[1],t),mu(i,e[1]),tr(a,i,pI),al(i,i,e[2]),il(a,e[2],a),mu(s,a),mu(o,s),tr(l,o,s),tr(n,l,i),tr(n,n,a),xI(n,n),tr(n,n,i),tr(n,n,a),tr(n,n,a),tr(e[0],n,a),mu(r,e[0]),tr(r,r,a),C_(r,i)&&tr(e[0],e[0],mI),mu(r,e[0]),tr(r,r,a),C_(r,i)?-1:(k_(e[0])===t[31]>>7&&al(e[0],vp,e[0]),tr(e[3],e[0],e[1]),0)}function wI(e,t){var n;for(n=0;n<16;++n)e[n]=t[2*n]+(t[2*n+1]<<8);e[15]&=32767}function xI(e,t){var n=Kt(),r;for(r=0;r<16;++r)n[r]=t[r];for(r=250;r>=0;--r)mu(n,n),r!==1&&tr(n,n,t);for(r=0;r<16;++r)e[r]=n[r]}function C_(e,t){var n=new ma(32),r=new ma(32);return jf(n,e),jf(r,t),L_(n,0,r,0)}function L_(e,t,n,r){return EI(e,t,n,r,32)}function EI(e,t,n,r,i){var a,s=0;for(a=0;a<i;++a)s|=e[t+a]^n[r+a];return(1&s-1>>>8)-1}function k_(e){var t=new ma(32);return jf(t,e),t[0]&1}function A_(e,t,n){var r,i;for(Bo(e[0],vp),Bo(e[1],$f),Bo(e[2],$f),Bo(e[3],vp),i=255;i>=0;--i)r=n[i/8|0]>>(i&7)&1,E_(e,t,r),_p(t,e),_p(e,e),E_(e,t,r)}function wp(e,t){var n=[Kt(),Kt(),Kt(),Kt()];Bo(n[0],w_),Bo(n[1],x_),Bo(n[2],$f),tr(n[3],w_,x_),A_(e,n,t)}function Bo(e,t){var n;for(n=0;n<16;n++)e[n]=t[n]|0}function CI(e,t){var n=Kt(),r;for(r=0;r<16;++r)n[r]=t[r];for(r=253;r>=0;--r)mu(n,n),r!==2&&r!==4&&tr(n,n,t);for(r=0;r<16;++r)e[r]=n[r]}function gp(e){var t,n,r=1;for(t=0;t<16;++t)n=e[t]+r+65535,r=Math.floor(n/65536),e[t]=n-r*65536;e[0]+=r-1+37*(r-1)}function I_(e,t,n){for(var r,i=~(n-1),a=0;a<16;++a)r=i&(e[a]^t[a]),e[a]^=r,t[a]^=r}function Kt(e){var t,n=new Float64Array(16);if(e)for(t=0;t<e.length;++t)n[t]=e[t];return n}function il(e,t,n){for(var r=0;r<16;++r)e[r]=t[r]+n[r]}function al(e,t,n){for(var r=0;r<16;++r)e[r]=t[r]-n[r]}function mu(e,t){tr(e,t,t)}function tr(e,t,n){var r,i,a=0,s=0,o=0,l=0,c=0,h=0,p=0,E=0,b=0,C=0,N=0,w=0,I=0,S=0,_=0,P=0,v=0,y=0,$=0,Z=0,ce=0,q=0,W=0,O=0,re=0,le=0,ie=0,oe=0,Q=0,j=0,H=0,G=n[0],fe=n[1],pe=n[2],de=n[3],Ae=n[4],Ie=n[5],ve=n[6],Te=n[7],Me=n[8],Ge=n[9],at=n[10],ft=n[11],V=n[12],Se=n[13],Ee=n[14],ae=n[15];r=t[0],a+=r*G,s+=r*fe,o+=r*pe,l+=r*de,c+=r*Ae,h+=r*Ie,p+=r*ve,E+=r*Te,b+=r*Me,C+=r*Ge,N+=r*at,w+=r*ft,I+=r*V,S+=r*Se,_+=r*Ee,P+=r*ae,r=t[1],s+=r*G,o+=r*fe,l+=r*pe,c+=r*de,h+=r*Ae,p+=r*Ie,E+=r*ve,b+=r*Te,C+=r*Me,N+=r*Ge,w+=r*at,I+=r*ft,S+=r*V,_+=r*Se,P+=r*Ee,v+=r*ae,r=t[2],o+=r*G,l+=r*fe,c+=r*pe,h+=r*de,p+=r*Ae,E+=r*Ie,b+=r*ve,C+=r*Te,N+=r*Me,w+=r*Ge,I+=r*at,S+=r*ft,_+=r*V,P+=r*Se,v+=r*Ee,y+=r*ae,r=t[3],l+=r*G,c+=r*fe,h+=r*pe,p+=r*de,E+=r*Ae,b+=r*Ie,C+=r*ve,N+=r*Te,w+=r*Me,I+=r*Ge,S+=r*at,_+=r*ft,P+=r*V,v+=r*Se,y+=r*Ee,$+=r*ae,r=t[4],c+=r*G,h+=r*fe,p+=r*pe,E+=r*de,b+=r*Ae,C+=r*Ie,N+=r*ve,w+=r*Te,I+=r*Me,S+=r*Ge,_+=r*at,P+=r*ft,v+=r*V,y+=r*Se,$+=r*Ee,Z+=r*ae,r=t[5],h+=r*G,p+=r*fe,E+=r*pe,b+=r*de,C+=r*Ae,N+=r*Ie,w+=r*ve,I+=r*Te,S+=r*Me,_+=r*Ge,P+=r*at,v+=r*ft,y+=r*V,$+=r*Se,Z+=r*Ee,ce+=r*ae,r=t[6],p+=r*G,E+=r*fe,b+=r*pe,C+=r*de,N+=r*Ae,w+=r*Ie,I+=r*ve,S+=r*Te,_+=r*Me,P+=r*Ge,v+=r*at,y+=r*ft,$+=r*V,Z+=r*Se,ce+=r*Ee,q+=r*ae,r=t[7],E+=r*G,b+=r*fe,C+=r*pe,N+=r*de,w+=r*Ae,I+=r*Ie,S+=r*ve,_+=r*Te,P+=r*Me,v+=r*Ge,y+=r*at,$+=r*ft,Z+=r*V,ce+=r*Se,q+=r*Ee,W+=r*ae,r=t[8],b+=r*G,C+=r*fe,N+=r*pe,w+=r*de,I+=r*Ae,S+=r*Ie,_+=r*ve,P+=r*Te,v+=r*Me,y+=r*Ge,$+=r*at,Z+=r*ft,ce+=r*V,q+=r*Se,W+=r*Ee,O+=r*ae,r=t[9],C+=r*G,N+=r*fe,w+=r*pe,I+=r*de,S+=r*Ae,_+=r*Ie,P+=r*ve,v+=r*Te,y+=r*Me,$+=r*Ge,Z+=r*at,ce+=r*ft,q+=r*V,W+=r*Se,O+=r*Ee,re+=r*ae,r=t[10],N+=r*G,w+=r*fe,I+=r*pe,S+=r*de,_+=r*Ae,P+=r*Ie,v+=r*ve,y+=r*Te,$+=r*Me,Z+=r*Ge,ce+=r*at,q+=r*ft,W+=r*V,O+=r*Se,re+=r*Ee,le+=r*ae,r=t[11],w+=r*G,I+=r*fe,S+=r*pe,_+=r*de,P+=r*Ae,v+=r*Ie,y+=r*ve,$+=r*Te,Z+=r*Me,ce+=r*Ge,q+=r*at,W+=r*ft,O+=r*V,re+=r*Se,le+=r*Ee,ie+=r*ae,r=t[12],I+=r*G,S+=r*fe,_+=r*pe,P+=r*de,v+=r*Ae,y+=r*Ie,$+=r*ve,Z+=r*Te,ce+=r*Me,q+=r*Ge,W+=r*at,O+=r*ft,re+=r*V,le+=r*Se,ie+=r*Ee,oe+=r*ae,r=t[13],S+=r*G,_+=r*fe,P+=r*pe,v+=r*de,y+=r*Ae,$+=r*Ie,Z+=r*ve,ce+=r*Te,q+=r*Me,W+=r*Ge,O+=r*at,re+=r*ft,le+=r*V,ie+=r*Se,oe+=r*Ee,Q+=r*ae,r=t[14],_+=r*G,P+=r*fe,v+=r*pe,y+=r*de,$+=r*Ae,Z+=r*Ie,ce+=r*ve,q+=r*Te,W+=r*Me,O+=r*Ge,re+=r*at,le+=r*ft,ie+=r*V,oe+=r*Se,Q+=r*Ee,j+=r*ae,r=t[15],P+=r*G,v+=r*fe,y+=r*pe,$+=r*de,Z+=r*Ae,ce+=r*Ie,q+=r*ve,W+=r*Te,O+=r*Me,re+=r*Ge,le+=r*at,ie+=r*ft,oe+=r*V,Q+=r*Se,j+=r*Ee,H+=r*ae,a+=38*v,s+=38*y,o+=38*$,l+=38*Z,c+=38*ce,h+=38*q,p+=38*W,E+=38*O,b+=38*re,C+=38*le,N+=38*ie,w+=38*oe,I+=38*Q,S+=38*j,_+=38*H,i=1,r=a+i+65535,i=Math.floor(r/65536),a=r-i*65536,r=s+i+65535,i=Math.floor(r/65536),s=r-i*65536,r=o+i+65535,i=Math.floor(r/65536),o=r-i*65536,r=l+i+65535,i=Math.floor(r/65536),l=r-i*65536,r=c+i+65535,i=Math.floor(r/65536),c=r-i*65536,r=h+i+65535,i=Math.floor(r/65536),h=r-i*65536,r=p+i+65535,i=Math.floor(r/65536),p=r-i*65536,r=E+i+65535,i=Math.floor(r/65536),E=r-i*65536,r=b+i+65535,i=Math.floor(r/65536),b=r-i*65536,r=C+i+65535,i=Math.floor(r/65536),C=r-i*65536,r=N+i+65535,i=Math.floor(r/65536),N=r-i*65536,r=w+i+65535,i=Math.floor(r/65536),w=r-i*65536,r=I+i+65535,i=Math.floor(r/65536),I=r-i*65536,r=S+i+65535,i=Math.floor(r/65536),S=r-i*65536,r=_+i+65535,i=Math.floor(r/65536),_=r-i*65536,r=P+i+65535,i=Math.floor(r/65536),P=r-i*65536,a+=i-1+37*(i-1),i=1,r=a+i+65535,i=Math.floor(r/65536),a=r-i*65536,r=s+i+65535,i=Math.floor(r/65536),s=r-i*65536,r=o+i+65535,i=Math.floor(r/65536),o=r-i*65536,r=l+i+65535,i=Math.floor(r/65536),l=r-i*65536,r=c+i+65535,i=Math.floor(r/65536),c=r-i*65536,r=h+i+65535,i=Math.floor(r/65536),h=r-i*65536,r=p+i+65535,i=Math.floor(r/65536),p=r-i*65536,r=E+i+65535,i=Math.floor(r/65536),E=r-i*65536,r=b+i+65535,i=Math.floor(r/65536),b=r-i*65536,r=C+i+65535,i=Math.floor(r/65536),C=r-i*65536,r=N+i+65535,i=Math.floor(r/65536),N=r-i*65536,r=w+i+65535,i=Math.floor(r/65536),w=r-i*65536,r=I+i+65535,i=Math.floor(r/65536),I=r-i*65536,r=S+i+65535,i=Math.floor(r/65536),S=r-i*65536,r=_+i+65535,i=Math.floor(r/65536),_=r-i*65536,r=P+i+65535,i=Math.floor(r/65536),P=r-i*65536,a+=i-1+37*(i-1),e[0]=a,e[1]=s,e[2]=o,e[3]=l,e[4]=c,e[5]=h,e[6]=p,e[7]=E,e[8]=b,e[9]=C,e[10]=N,e[11]=w,e[12]=I,e[13]=S,e[14]=_,e[15]=P}});var B_=$e((B6,O_)=>{var Ia=hn();Bn();za();ec();O_.exports=Ia.kem=Ia.kem||{};var D_=Ia.jsbn.BigInteger;Ia.kem.rsa={};Ia.kem.rsa.create=function(e,t){t=t||{};var n=t.prng||Ia.random,r={};return r.encrypt=function(i,a){var s=Math.ceil(i.n.bitLength()/8),o;do o=new D_(Ia.util.bytesToHex(n.getBytesSync(s)),16).mod(i.n);while(o.compareTo(D_.ONE)<=0);o=Ia.util.hexToBytes(o.toString(16));var l=s-o.length;l>0&&(o=Ia.util.fillString(String.fromCharCode(0),l)+o);var c=i.encrypt(o,"NONE"),h=e.generate(o,a);return{encapsulation:c,key:h}},r.decrypt=function(i,a,s){var o=i.decrypt(a,"NONE");return e.generate(o,s)},r};Ia.kem.kdf1=function(e,t){R_(this,e,0,t||e.digestLength)};Ia.kem.kdf2=function(e,t){R_(this,e,1,t||e.digestLength)};function R_(e,t,n,r){e.generate=function(i,a){for(var s=new Ia.util.ByteBuffer,o=Math.ceil(a/r)+n,l=new Ia.util.ByteBuffer,c=n;c<o;++c){l.putInt32(c),t.start(),t.update(i+l.getBytes());var h=t.digest();s.putBytes(h.getBytes(r))}return s.truncate(s.length()-a),s.getBytes()}}});var F_=$e((M6,q_)=>{var kn=hn();Bn();q_.exports=kn.log=kn.log||{};kn.log.levels=["none","error","warning","info","debug","verbose","max"];var Kf={},Cp=[],oc=null;kn.log.LEVEL_LOCKED=1<<1;kn.log.NO_LEVEL_CHECK=1<<2;kn.log.INTERPOLATE=1<<3;for(Ns=0;Ns<kn.log.levels.length;++Ns)xp=kn.log.levels[Ns],Kf[xp]={index:Ns,name:xp.toUpperCase()};var xp,Ns;kn.log.logMessage=function(e){for(var t=Kf[e.level].index,n=0;n<Cp.length;++n){var r=Cp[n];if(r.flags&kn.log.NO_LEVEL_CHECK)r.f(e);else{var i=Kf[r.level].index;t<=i&&r.f(r,e)}}};kn.log.prepareStandard=function(e){"standard"in e||(e.standard=Kf[e.level].name+" ["+e.category+"] "+e.message)};kn.log.prepareFull=function(e){if(!("full"in e)){var t=[e.message];t=t.concat([]),e.full=kn.util.format.apply(this,t)}};kn.log.prepareStandardFull=function(e){"standardFull"in e||(kn.log.prepareStandard(e),e.standardFull=e.standard)};for(Ep=["error","warning","info","debug","verbose"],Ns=0;Ns<Ep.length;++Ns)(function(t){kn.log[t]=function(n,r){var i=Array.prototype.slice.call(arguments).slice(2),a={timestamp:new Date,level:t,category:n,message:r,arguments:i};kn.log.logMessage(a)}})(Ep[Ns]);var Ep,Ns;kn.log.makeLogger=function(e){var t={flags:0,f:e};return kn.log.setLevel(t,"none"),t};kn.log.setLevel=function(e,t){var n=!1;if(e&&!(e.flags&kn.log.LEVEL_LOCKED))for(var r=0;r<kn.log.levels.length;++r){var i=kn.log.levels[r];if(t==i){e.level=t,n=!0;break}}return n};kn.log.lock=function(e,t){typeof t>"u"||t?e.flags|=kn.log.LEVEL_LOCKED:e.flags&=~kn.log.LEVEL_LOCKED};kn.log.addLogger=function(e){Cp.push(e)};typeof console<"u"&&"log"in console?(console.error&&console.warn&&console.info&&console.debug?(M_={error:console.error,warning:console.warn,info:console.info,debug:console.debug,verbose:console.debug},uc=function(e,t){kn.log.prepareStandard(t);var n=M_[t.level],r=[t.standard];r=r.concat(t.arguments.slice()),n.apply(console,r)},sl=kn.log.makeLogger(uc)):(uc=function(t,n){kn.log.prepareStandardFull(n),console.log(n.standardFull)},sl=kn.log.makeLogger(uc)),kn.log.setLevel(sl,"debug"),kn.log.addLogger(sl),oc=sl):console={log:function(){}};var sl,M_,uc;oc!==null&&typeof window<"u"&&window.location&&(sc=new URL(window.location.href).searchParams,sc.has("console.level")&&kn.log.setLevel(oc,sc.get("console.level").slice(-1)[0]),sc.has("console.lock")&&(U_=sc.get("console.lock").slice(-1)[0],U_=="true"&&kn.log.lock(oc)));var sc,U_;kn.log.consoleLogger=oc});var z_=$e((U6,V_)=>{V_.exports=Es();Sf();Ju();Md();hp()});var j_=$e((q6,$_)=>{var wt=hn();ko();is();Ql();Ao();lu();Yd();za();Bn();qf();var Ce=wt.asn1,ea=$_.exports=wt.pkcs7=wt.pkcs7||{};ea.messageFromPem=function(e){var t=wt.pem.decode(e)[0];if(t.type!=="PKCS7"){var n=new Error('Could not convert PKCS#7 message from PEM; PEM header type is not "PKCS#7".');throw n.headerType=t.type,n}if(t.procType&&t.procType.type==="ENCRYPTED")throw new Error("Could not convert PKCS#7 message from PEM; PEM is encrypted.");var r=Ce.fromDer(t.body);return ea.messageFromAsn1(r)};ea.messageToPem=function(e,t){var n={type:"PKCS7",body:Ce.toDer(e.toAsn1()).getBytes()};return wt.pem.encode(n,{maxline:t})};ea.messageFromAsn1=function(e){var t={},n=[];if(!Ce.validate(e,ea.asn1.contentInfoValidator,t,n)){var r=new Error("Cannot read PKCS#7 message. ASN.1 object is not an PKCS#7 ContentInfo.");throw r.errors=n,r}var i=Ce.derToOid(t.contentType),a;switch(i){case wt.pki.oids.envelopedData:a=ea.createEnvelopedData();break;case wt.pki.oids.encryptedData:a=ea.createEncryptedData();break;case wt.pki.oids.signedData:a=ea.createSignedData();break;default:throw new Error("Cannot read PKCS#7 message. ContentType with OID "+i+" is not (yet) supported.")}return a.fromAsn1(t.content.value[0]),a};ea.createSignedData=function(){var e=null;return e={type:wt.pki.oids.signedData,version:1,certificates:[],crls:[],signers:[],digestAlgorithmIdentifiers:[],contentInfo:null,signerInfos:[],fromAsn1:function(r){if(Tp(e,r,ea.asn1.signedDataValidator),e.certificates=[],e.crls=[],e.digestAlgorithmIdentifiers=[],e.contentInfo=null,e.signerInfos=[],e.rawCapture.certificates)for(var i=e.rawCapture.certificates.value,a=0;a<i.length;++a)e.certificates.push(wt.pki.certificateFromAsn1(i[a]))},toAsn1:function(){e.contentInfo||e.sign();for(var r=[],i=0;i<e.certificates.length;++i)r.push(wt.pki.certificateToAsn1(e.certificates[i]));var a=[],s=Ce.create(Ce.Class.CONTEXT_SPECIFIC,0,!0,[Ce.create(Ce.Class.UNIVERSAL,Ce.Type.SEQUENCE,!0,[Ce.create(Ce.Class.UNIVERSAL,Ce.Type.INTEGER,!1,Ce.integerToDer(e.version).getBytes()),Ce.create(Ce.Class.UNIVERSAL,Ce.Type.SET,!0,e.digestAlgorithmIdentifiers),e.contentInfo])]);return r.length>0&&s.value[0].value.push(Ce.create(Ce.Class.CONTEXT_SPECIFIC,0,!0,r)),a.length>0&&s.value[0].value.push(Ce.create(Ce.Class.CONTEXT_SPECIFIC,1,!0,a)),s.value[0].value.push(Ce.create(Ce.Class.UNIVERSAL,Ce.Type.SET,!0,e.signerInfos)),Ce.create(Ce.Class.UNIVERSAL,Ce.Type.SEQUENCE,!0,[Ce.create(Ce.Class.UNIVERSAL,Ce.Type.OID,!1,Ce.oidToDer(e.type).getBytes()),s])},addSigner:function(r){var i=r.issuer,a=r.serialNumber;if(r.certificate){var s=r.certificate;typeof s=="string"&&(s=wt.pki.certificateFromPem(s)),i=s.issuer.attributes,a=s.serialNumber}var o=r.key;if(!o)throw new Error("Could not add PKCS#7 signer; no private key specified.");typeof o=="string"&&(o=wt.pki.privateKeyFromPem(o));var l=r.digestAlgorithm||wt.pki.oids.sha1;switch(l){case wt.pki.oids.sha1:case wt.pki.oids.sha256:case wt.pki.oids.sha384:case wt.pki.oids.sha512:case wt.pki.oids.md5:break;default:throw new Error("Could not add PKCS#7 signer; unknown message digest algorithm: "+l)}var c=r.authenticatedAttributes||[];if(c.length>0){for(var h=!1,p=!1,E=0;E<c.length;++E){var b=c[E];if(!h&&b.type===wt.pki.oids.contentType){if(h=!0,p)break;continue}if(!p&&b.type===wt.pki.oids.messageDigest){if(p=!0,h)break;continue}}if(!h||!p)throw new Error("Invalid signer.authenticatedAttributes. If signer.authenticatedAttributes is specified, then it must contain at least two attributes, PKCS #9 content-type and PKCS #9 message-digest.")}e.signers.push({key:o,version:1,issuer:i,serialNumber:a,digestAlgorithm:l,signatureAlgorithm:wt.pki.oids.rsaEncryption,signature:null,authenticatedAttributes:c,unauthenticatedAttributes:[]})},sign:function(r){if(r=r||{},(typeof e.content!="object"||e.contentInfo===null)&&(e.contentInfo=Ce.create(Ce.Class.UNIVERSAL,Ce.Type.SEQUENCE,!0,[Ce.create(Ce.Class.UNIVERSAL,Ce.Type.OID,!1,Ce.oidToDer(wt.pki.oids.data).getBytes())]),"content"in e)){var i;e.content instanceof wt.util.ByteBuffer?i=e.content.bytes():typeof e.content=="string"&&(i=wt.util.encodeUtf8(e.content)),r.detached?e.detachedContent=Ce.create(Ce.Class.UNIVERSAL,Ce.Type.OCTETSTRING,!1,i):e.contentInfo.value.push(Ce.create(Ce.Class.CONTEXT_SPECIFIC,0,!0,[Ce.create(Ce.Class.UNIVERSAL,Ce.Type.OCTETSTRING,!1,i)]))}if(e.signers.length!==0){var a=t();n(a)}},verify:function(){throw new Error("PKCS#7 signature verification not yet implemented.")},addCertificate:function(r){typeof r=="string"&&(r=wt.pki.certificateFromPem(r)),e.certificates.push(r)},addCertificateRevokationList:function(r){throw new Error("PKCS#7 CRL support not yet implemented.")}},e;function t(){for(var r={},i=0;i<e.signers.length;++i){var a=e.signers[i],s=a.digestAlgorithm;s in r||(r[s]=wt.md[wt.pki.oids[s]].create()),a.authenticatedAttributes.length===0?a.md=r[s]:a.md=wt.md[wt.pki.oids[s]].create()}e.digestAlgorithmIdentifiers=[];for(var s in r)e.digestAlgorithmIdentifiers.push(Ce.create(Ce.Class.UNIVERSAL,Ce.Type.SEQUENCE,!0,[Ce.create(Ce.Class.UNIVERSAL,Ce.Type.OID,!1,Ce.oidToDer(s).getBytes()),Ce.create(Ce.Class.UNIVERSAL,Ce.Type.NULL,!1,"")]));return r}function n(r){var i;if(e.detachedContent?i=e.detachedContent:(i=e.contentInfo.value[1],i=i.value[0]),!i)throw new Error("Could not sign PKCS#7 message; there is no content to sign.");var a=Ce.derToOid(e.contentInfo.value[0].value),s=Ce.toDer(i);s.getByte(),Ce.getBerValueLength(s),s=s.getBytes();for(var o in r)r[o].start().update(s);for(var l=new Date,c=0;c<e.signers.length;++c){var h=e.signers[c];if(h.authenticatedAttributes.length===0){if(a!==wt.pki.oids.data)throw new Error("Invalid signer; authenticatedAttributes must be present when the ContentInfo content type is not PKCS#7 Data.")}else{h.authenticatedAttributesAsn1=Ce.create(Ce.Class.CONTEXT_SPECIFIC,0,!0,[]);for(var p=Ce.create(Ce.Class.UNIVERSAL,Ce.Type.SET,!0,[]),E=0;E<h.authenticatedAttributes.length;++E){var b=h.authenticatedAttributes[E];b.type===wt.pki.oids.messageDigest?b.value=r[h.digestAlgorithm].digest():b.type===wt.pki.oids.signingTime&&(b.value||(b.value=l)),p.value.push(Sp(b)),h.authenticatedAttributesAsn1.value.push(Sp(b))}s=Ce.toDer(p).getBytes(),h.md.start().update(s)}h.signature=h.key.sign(h.md,"RSASSA-PKCS1-V1_5")}e.signerInfos=II(e.signers)}};ea.createEncryptedData=function(){var e=null;return e={type:wt.pki.oids.encryptedData,version:0,encryptedContent:{algorithm:wt.pki.oids["aes256-CBC"]},fromAsn1:function(t){Tp(e,t,ea.asn1.encryptedDataValidator)},decrypt:function(t){t!==void 0&&(e.encryptedContent.key=t),H_(e)}},e};ea.createEnvelopedData=function(){var e=null;return e={type:wt.pki.oids.envelopedData,version:0,recipients:[],encryptedContent:{algorithm:wt.pki.oids["aes256-CBC"]},fromAsn1:function(t){var n=Tp(e,t,ea.asn1.envelopedDataValidator);e.recipients=LI(n.recipientInfos.value)},toAsn1:function(){return Ce.create(Ce.Class.UNIVERSAL,Ce.Type.SEQUENCE,!0,[Ce.create(Ce.Class.UNIVERSAL,Ce.Type.OID,!1,Ce.oidToDer(e.type).getBytes()),Ce.create(Ce.Class.CONTEXT_SPECIFIC,0,!0,[Ce.create(Ce.Class.UNIVERSAL,Ce.Type.SEQUENCE,!0,[Ce.create(Ce.Class.UNIVERSAL,Ce.Type.INTEGER,!1,Ce.integerToDer(e.version).getBytes()),Ce.create(Ce.Class.UNIVERSAL,Ce.Type.SET,!0,kI(e.recipients)),Ce.create(Ce.Class.UNIVERSAL,Ce.Type.SEQUENCE,!0,NI(e.encryptedContent))])])])},findRecipient:function(t){for(var n=t.issuer.attributes,r=0;r<e.recipients.length;++r){var i=e.recipients[r],a=i.issuer;if(i.serialNumber===t.serialNumber&&a.length===n.length){for(var s=!0,o=0;o<n.length;++o)if(a[o].type!==n[o].type||a[o].value!==n[o].value){s=!1;break}if(s)return i}}return null},decrypt:function(t,n){if(e.encryptedContent.key===void 0&&t!==void 0&&n!==void 0)switch(t.encryptedContent.algorithm){case wt.pki.oids.rsaEncryption:case wt.pki.oids.desCBC:var r=n.decrypt(t.encryptedContent.content);e.encryptedContent.key=wt.util.createBuffer(r);break;default:throw new Error("Unsupported asymmetric cipher, OID "+t.encryptedContent.algorithm)}H_(e)},addRecipient:function(t){e.recipients.push({version:0,issuer:t.issuer.attributes,serialNumber:t.serialNumber,encryptedContent:{algorithm:wt.pki.oids.rsaEncryption,key:t.publicKey}})},encrypt:function(t,n){if(e.encryptedContent.content===void 0){n=n||e.encryptedContent.algorithm,t=t||e.encryptedContent.key;var r,i,a;switch(n){case wt.pki.oids["aes128-CBC"]:r=16,i=16,a=wt.aes.createEncryptionCipher;break;case wt.pki.oids["aes192-CBC"]:r=24,i=16,a=wt.aes.createEncryptionCipher;break;case wt.pki.oids["aes256-CBC"]:r=32,i=16,a=wt.aes.createEncryptionCipher;break;case wt.pki.oids["des-EDE3-CBC"]:r=24,i=8,a=wt.des.createEncryptionCipher;break;default:throw new Error("Unsupported symmetric cipher, OID "+n)}if(t===void 0)t=wt.util.createBuffer(wt.random.getBytes(r));else if(t.length()!=r)throw new Error("Symmetric key has wrong length; got "+t.length()+" bytes, expected "+r+".");e.encryptedContent.algorithm=n,e.encryptedContent.key=t,e.encryptedContent.parameter=wt.util.createBuffer(wt.random.getBytes(i));var s=a(t);if(s.start(e.encryptedContent.parameter.copy()),s.update(e.content),!s.finish())throw new Error("Symmetric encryption failed.");e.encryptedContent.content=s.output}for(var o=0;o<e.recipients.length;++o){var l=e.recipients[o];if(l.encryptedContent.content===void 0)switch(l.encryptedContent.algorithm){case wt.pki.oids.rsaEncryption:l.encryptedContent.content=l.encryptedContent.key.encrypt(e.encryptedContent.key.data);break;default:throw new Error("Unsupported asymmetric cipher, OID "+l.encryptedContent.algorithm)}}}},e};function SI(e){var t={},n=[];if(!Ce.validate(e,ea.asn1.recipientInfoValidator,t,n)){var r=new Error("Cannot read PKCS#7 RecipientInfo. ASN.1 object is not an PKCS#7 RecipientInfo.");throw r.errors=n,r}return{version:t.version.charCodeAt(0),issuer:wt.pki.RDNAttributesAsArray(t.issuer),serialNumber:wt.util.createBuffer(t.serial).toHex(),encryptedContent:{algorithm:Ce.derToOid(t.encAlgorithm),parameter:t.encParameter?t.encParameter.value:void 0,content:t.encKey}}}function TI(e){return Ce.create(Ce.Class.UNIVERSAL,Ce.Type.SEQUENCE,!0,[Ce.create(Ce.Class.UNIVERSAL,Ce.Type.INTEGER,!1,Ce.integerToDer(e.version).getBytes()),Ce.create(Ce.Class.UNIVERSAL,Ce.Type.SEQUENCE,!0,[wt.pki.distinguishedNameToAsn1({attributes:e.issuer}),Ce.create(Ce.Class.UNIVERSAL,Ce.Type.INTEGER,!1,wt.util.hexToBytes(e.serialNumber))]),Ce.create(Ce.Class.UNIVERSAL,Ce.Type.SEQUENCE,!0,[Ce.create(Ce.Class.UNIVERSAL,Ce.Type.OID,!1,Ce.oidToDer(e.encryptedContent.algorithm).getBytes()),Ce.create(Ce.Class.UNIVERSAL,Ce.Type.NULL,!1,"")]),Ce.create(Ce.Class.UNIVERSAL,Ce.Type.OCTETSTRING,!1,e.encryptedContent.content)])}function LI(e){for(var t=[],n=0;n<e.length;++n)t.push(SI(e[n]));return t}function kI(e){for(var t=[],n=0;n<e.length;++n)t.push(TI(e[n]));return t}function AI(e){var t=Ce.create(Ce.Class.UNIVERSAL,Ce.Type.SEQUENCE,!0,[Ce.create(Ce.Class.UNIVERSAL,Ce.Type.INTEGER,!1,Ce.integerToDer(e.version).getBytes()),Ce.create(Ce.Class.UNIVERSAL,Ce.Type.SEQUENCE,!0,[wt.pki.distinguishedNameToAsn1({attributes:e.issuer}),Ce.create(Ce.Class.UNIVERSAL,Ce.Type.INTEGER,!1,wt.util.hexToBytes(e.serialNumber))]),Ce.create(Ce.Class.UNIVERSAL,Ce.Type.SEQUENCE,!0,[Ce.create(Ce.Class.UNIVERSAL,Ce.Type.OID,!1,Ce.oidToDer(e.digestAlgorithm).getBytes()),Ce.create(Ce.Class.UNIVERSAL,Ce.Type.NULL,!1,"")])]);if(e.authenticatedAttributesAsn1&&t.value.push(e.authenticatedAttributesAsn1),t.value.push(Ce.create(Ce.Class.UNIVERSAL,Ce.Type.SEQUENCE,!0,[Ce.create(Ce.Class.UNIVERSAL,Ce.Type.OID,!1,Ce.oidToDer(e.signatureAlgorithm).getBytes()),Ce.create(Ce.Class.UNIVERSAL,Ce.Type.NULL,!1,"")])),t.value.push(Ce.create(Ce.Class.UNIVERSAL,Ce.Type.OCTETSTRING,!1,e.signature)),e.unauthenticatedAttributes.length>0){for(var n=Ce.create(Ce.Class.CONTEXT_SPECIFIC,1,!0,[]),r=0;r<e.unauthenticatedAttributes.length;++r){var i=e.unauthenticatedAttributes[r];n.values.push(Sp(i))}t.value.push(n)}return t}function II(e){for(var t=[],n=0;n<e.length;++n)t.push(AI(e[n]));return t}function Sp(e){var t;if(e.type===wt.pki.oids.contentType)t=Ce.create(Ce.Class.UNIVERSAL,Ce.Type.OID,!1,Ce.oidToDer(e.value).getBytes());else if(e.type===wt.pki.oids.messageDigest)t=Ce.create(Ce.Class.UNIVERSAL,Ce.Type.OCTETSTRING,!1,e.value.bytes());else if(e.type===wt.pki.oids.signingTime){var n=new Date("1950-01-01T00:00:00Z"),r=new Date("2050-01-01T00:00:00Z"),i=e.value;if(typeof i=="string"){var a=Date.parse(i);isNaN(a)?i.length===13?i=Ce.utcTimeToDate(i):i=Ce.generalizedTimeToDate(i):i=new Date(a)}i>=n&&i<r?t=Ce.create(Ce.Class.UNIVERSAL,Ce.Type.UTCTIME,!1,Ce.dateToUtcTime(i)):t=Ce.create(Ce.Class.UNIVERSAL,Ce.Type.GENERALIZEDTIME,!1,Ce.dateToGeneralizedTime(i))}return Ce.create(Ce.Class.UNIVERSAL,Ce.Type.SEQUENCE,!0,[Ce.create(Ce.Class.UNIVERSAL,Ce.Type.OID,!1,Ce.oidToDer(e.type).getBytes()),Ce.create(Ce.Class.UNIVERSAL,Ce.Type.SET,!0,[t])])}function NI(e){return[Ce.create(Ce.Class.UNIVERSAL,Ce.Type.OID,!1,Ce.oidToDer(wt.pki.oids.data).getBytes()),Ce.create(Ce.Class.UNIVERSAL,Ce.Type.SEQUENCE,!0,[Ce.create(Ce.Class.UNIVERSAL,Ce.Type.OID,!1,Ce.oidToDer(e.algorithm).getBytes()),e.parameter?Ce.create(Ce.Class.UNIVERSAL,Ce.Type.OCTETSTRING,!1,e.parameter.getBytes()):void 0]),Ce.create(Ce.Class.CONTEXT_SPECIFIC,0,!0,[Ce.create(Ce.Class.UNIVERSAL,Ce.Type.OCTETSTRING,!1,e.content.getBytes())])]}function Tp(e,t,n){var r={},i=[];if(!Ce.validate(t,n,r,i)){var a=new Error("Cannot read PKCS#7 message. ASN.1 object is not a supported PKCS#7 message.");throw a.errors=a,a}var s=Ce.derToOid(r.contentType);if(s!==wt.pki.oids.data)throw new Error("Unsupported PKCS#7 message. Only wrapped ContentType Data supported.");if(r.encryptedContent){var o="";if(wt.util.isArray(r.encryptedContent))for(var l=0;l<r.encryptedContent.length;++l){if(r.encryptedContent[l].type!==Ce.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting encrypted content constructed of only OCTET STRING objects.");o+=r.encryptedContent[l].value}else o=r.encryptedContent;e.encryptedContent={algorithm:Ce.derToOid(r.encAlgorithm),parameter:wt.util.createBuffer(r.encParameter.value),content:wt.util.createBuffer(o)}}if(r.content){var o="";if(wt.util.isArray(r.content))for(var l=0;l<r.content.length;++l){if(r.content[l].type!==Ce.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting content constructed of only OCTET STRING objects.");o+=r.content[l].value}else o=r.content;e.content=wt.util.createBuffer(o)}return e.version=r.version.charCodeAt(0),e.rawCapture=r,r}function H_(e){if(e.encryptedContent.key===void 0)throw new Error("Symmetric key not available.");if(e.content===void 0){var t;switch(e.encryptedContent.algorithm){case wt.pki.oids["aes128-CBC"]:case wt.pki.oids["aes192-CBC"]:case wt.pki.oids["aes256-CBC"]:t=wt.aes.createDecryptionCipher(e.encryptedContent.key);break;case wt.pki.oids.desCBC:case wt.pki.oids["des-EDE3-CBC"]:t=wt.des.createDecryptionCipher(e.encryptedContent.key);break;default:throw new Error("Unsupported symmetric cipher, OID "+e.encryptedContent.algorithm)}if(t.start(e.encryptedContent.parameter),t.update(e.encryptedContent.content),!t.finish())throw new Error("Symmetric decryption failed.");e.content=t.output}}});var W_=$e((F6,K_)=>{var Zr=hn();ko();Zu();Sf();Ju();Bn();var Gf=K_.exports=Zr.ssh=Zr.ssh||{};Gf.privateKeyToPutty=function(e,t,n){n=n||"",t=t||"";var r="ssh-rsa",i=t===""?"none":"aes256-cbc",a="PuTTY-User-Key-File-2: "+r+`\r
`;a+="Encryption: "+i+`\r
`,a+="Comment: "+n+`\r
`;var s=Zr.util.createBuffer();ol(s,r),Ps(s,e.e),Ps(s,e.n);var o=Zr.util.encode64(s.bytes(),64),l=Math.floor(o.length/66)+1;a+="Public-Lines: "+l+`\r
`,a+=o;var c=Zr.util.createBuffer();Ps(c,e.d),Ps(c,e.p),Ps(c,e.q),Ps(c,e.qInv);var h;if(!t)h=Zr.util.encode64(c.bytes(),64);else{var p=c.length()+16-1;p-=p%16;var E=Wf(c.bytes());E.truncate(E.length()-p+c.length()),c.putBuffer(E);var b=Zr.util.createBuffer();b.putBuffer(Wf("\0\0\0\0",t)),b.putBuffer(Wf("\0\0\0",t));var C=Zr.aes.createEncryptionCipher(b.truncate(8),"CBC");C.start(Zr.util.createBuffer().fillWithByte(0,16)),C.update(c.copy()),C.finish();var N=C.output;N.truncate(16),h=Zr.util.encode64(N.bytes(),64)}l=Math.floor(h.length/66)+1,a+=`\r
Private-Lines: `+l+`\r
`,a+=h;var w=Wf("putty-private-key-file-mac-key",t),I=Zr.util.createBuffer();ol(I,r),ol(I,i),ol(I,n),I.putInt32(s.length()),I.putBuffer(s),I.putInt32(c.length()),I.putBuffer(c);var S=Zr.hmac.create();return S.start("sha1",w),S.update(I.bytes()),a+=`\r
Private-MAC: `+S.digest().toHex()+`\r
`,a};Gf.publicKeyToOpenSSH=function(e,t){var n="ssh-rsa";t=t||"";var r=Zr.util.createBuffer();return ol(r,n),Ps(r,e.e),Ps(r,e.n),n+" "+Zr.util.encode64(r.bytes())+" "+t};Gf.privateKeyToOpenSSH=function(e,t){return t?Zr.pki.encryptRsaPrivateKey(e,t,{legacy:!0,algorithm:"aes128"}):Zr.pki.privateKeyToPem(e)};Gf.getPublicKeyFingerprint=function(e,t){t=t||{};var n=t.md||Zr.md.md5.create(),r="ssh-rsa",i=Zr.util.createBuffer();ol(i,r),Ps(i,e.e),Ps(i,e.n),n.start(),n.update(i.getBytes());var a=n.digest();if(t.encoding==="hex"){var s=a.toHex();return t.delimiter?s.match(/.{2}/g).join(t.delimiter):s}else{if(t.encoding==="binary")return a.getBytes();if(t.encoding)throw new Error('Unknown encoding "'+t.encoding+'".')}return a};function Ps(e,t){var n=t.toString(16);n[0]>="8"&&(n="00"+n);var r=Zr.util.hexToBytes(n);e.putInt32(r.length),e.putBytes(r)}function ol(e,t){e.putInt32(t.length),e.putString(t)}function Wf(){for(var e=Zr.md.sha1.create(),t=arguments.length,n=0;n<t;++n)e.update(arguments[n]);return e.digest()}});var Lp=$e((V6,G_)=>{G_.exports=hn();ko();p_();is();yf();Ql();P_();Zu();B_();F_();z_();Qd();Af();lu();Kd();tp();j_();rp();Gd();Ud();Bf();za();Vd();W_();lp();Bn()});var X_=$e((z6,Z_)=>{Z_.exports=(e,t,n)=>{let r;try{r=Lp()}catch{throw new Error("Cannot find module 'node-forge'; this is required to use the digest() function.")}if(e=e.v,t=t&&t.v&&t.v.toLowerCase(),n=n&&n.v&&n.v.toLowerCase()||"base64",!t||!/^(md5|sha-1|sha-256|sha-384|sha-512)$/.test(t))throw new Error("Invalid algo.");if(!/^(base64|hex)$/.test(n))throw new Error("Invalid encoding.");let i=r.md[t.replace("-","")].create();i.update(e);let a=i.digest();return!n||n==="base64"?r.util.encode64(a.bytes()):i.digest().toHex()}});var Q_=$e((H6,Y_)=>{function PI(){return Math.random().toString(16).substring(2)}function DI(e){let t=Math.ceil(e/13);return new Array(t).fill(PI).reduce((n,r)=>n+r(),"").substring(0,e)}Y_.exports={randomToken:DI}});var eb=$e(($6,J_)=>{function RI(e,t){let n,r=[];if(typeof t<"u"){if(!Number.isInteger(t))throw new Error(`Invalid seed argument. Integer required, but got: ${t}`);let i=new kp(t);n=i.nextFloat.bind(i)}else n=Math.random;for(let i=0;i<e.length;++i){let a=Math.floor(n()*(i+1));a!==i&&(r[i]=r[a]),r[a]=e[i]}return r}function kp(e){this._seed=e%2147483647,this._seed<=0&&(this._seed+=2147483647-1)}kp.prototype.next=function(){return this._seed=this._seed*16807%2147483647,this._seed};kp.prototype.nextFloat=function(){return(this.next()-1)/(2147483647-1)};J_.exports=RI});var ob=$e((j6,sb)=>{var{BlankDate:OI,getTimezoneOffsetAsTime:BI}=su(),{asGeopoints:tb,area:MI,distance:UI}=D0(),qI=X_(),{randomToken:FI}=Q_(),{DATE_STRING:yu,dateStringToDays:vu,dateToDays:nb,isValidDate:VI}=md(),zI=eb(),{asBoolean:lc,asNumber:An,asString:Un}=ou(),HI=wd(),Et=hf(),$I=/^-?[0-9]+(\.[0-9]+)?$/,jI=8,KI=15,Ap=16,WI=17,GI=function(){let e=new Error("too many args"),t=new Error("too few args"),n=function(o){return o<0?-Math.round(-o):Math.round(o)},r=function(o,l){var I;if(o=Zf(o),l=Un(l),o.toString()===""||Number.isNaN(Number(o)))return"";let c,h,p="",E=1900+o.getYear(),b=1+o.getMonth(),C=o.getDate(),N=o.getHours(),w=(I=globalThis.window)==null?void 0:I.enketoFormLocale;for(h=0;h<l.length;++h)if(c=l.charAt(h),c==="%"){if(++h>=l.length)throw new Error("date format string ends with %");if(c=l.charAt(h),c==="%")p+="%";else if(c==="Y")p+=Na(E,4);else if(c==="y")p+=Na(E,4).substring(2);else if(c==="m")p+=Na(b,2);else if(c==="n")p+=b;else if(c==="b")p+=o.toLocaleDateString(w,{month:"short"});else if(c==="d")p+=Na(C,2);else if(c==="e")p+=C;else if(c==="H")p+=Na(N,2);else if(c==="h")p+=N;else if(c==="M")p+=Na(o.getMinutes(),2);else if(c==="S")p+=Na(o.getSeconds(),2);else if(c==="3")p+=Na(o.getMilliseconds(),3);else if(c==="a")p+=o.toLocaleDateString(w,{weekday:"short"});else throw c==="Z"||c==="A"||c==="B"?new Error(`unsupported escape in date format string [%${c}]`):new Error(`unrecognized escape in date format string [%${c}]`)}else p+=c;return p},i={},a={abs(o){return Et.number(Math.abs(An(o)))},acos(o){return Et.number(Math.acos(An(o)))},asin(o){return Et.number(Math.asin(An(o)))},atan(o){return Et.number(Math.atan(An(o)))},atan2(o,...l){if(l.length>0){let c=An(o),h=An(l[0]);return Et.number(Math.atan2(c,h))}return Et.number(Math.atan2(An(o)))},boolean(o){if(arguments.length===0)throw new Error("too few args");if(arguments.length>1)throw new Error("too few args");return Et.boolean(lc(o))},"boolean-from-string":function(o){return o.t==="num"&&o.v>0&&!o.decimal?Et.boolean(!0):(o=Un(o),Et.boolean(o==="1"||o==="true"))},area(o){if(arguments.length===0)throw t;return Et.number(MI(tb(o)))},checklist(o,l,...c){o=An(o),l=An(l);let h=Mo(lc,...c).reduce((p,E)=>E?p+1:p,0);return Et.boolean((o<0||h>=o)&&(l<0||h<=l))},coalesce(o,l){return Et.string(Un(o)||Un(l))},concat(...o){return Et.string(Mo(Un,...o).join(""))},cos(o){return Et.number(Math.cos(An(o)))},count(o){if(arguments.length===0)throw new Error("too few args");if(arguments.length>1)throw new Error("too few args");if(o.t!=="arr")throw new Error(`Unpexpected arg type: '${o.t}'`);return Et.number(o.v.length)},"count-non-empty":function(o){if(!arguments.length===0)throw new Error("too few args");if(arguments.length>1)throw new Error("too many args");if(o.t!=="arr")throw new Error(`wrong arg type:${JSON.stringify(o)}`);return Et.number(Mo(Un,o).reduce((l,c)=>c?l+1:l,0))},"count-selected":function(o){let l=Un(o).split(" "),c=l.length,h=0;for(;--c>=0;)l[c].length&&++h;return Et.number(h)},date(o){return Et.date(Zf(o))},"decimal-date-time":function(o){if(arguments.length>1)throw e;let l=o.t==="num"?An(o):vu(Un(o));return Et.number(l)},"decimal-time":function(o){if(arguments.length>1)throw e;if(o.t==="num")return Et.number(NaN);let l=Un(o),c=l.match(/^(\d\d):(\d\d):(\d\d)(\.\d\d?\d?)?(\+|-)(\d\d):(\d\d)$/),h;if(c&&c[1]<24&&c[1]>=0&&c[2]<60&&c[2]>=0&&c[3]<60&&c[3]>=0&&c[6]<24&&c[6]>=0&&c[7]<60&&c[7]>=0){let p=new Date,E=new Date(`${p.getFullYear()}-${Na(p.getMonth()+1)}-${Na(p.getDate())}T${l}`);E.toString()==="Invalid Date"?h=NaN:h=(E.getSeconds()/3600+E.getMinutes()/60+E.getHours())/24}else h=NaN;return Et.number(h)},digest(o,l,c){return Et.string(qI(o,l,c))},distance(...o){if(arguments.length===0)throw t;return Et.number(UI(tb(...o)))},exp(o){return Et.number(Math.exp(An(o)))},exp10(o){return Et.number(10**An(o))},false(){if(arguments.length)throw e;return Et.boolean(!1)},"format-date":function(o,l){if(arguments.length<2)throw new Error("format-date() :: not enough args");return Et.string(r(o,l))},if(o,l,c){return lc(o)?l:c},"ends-with":function(o,l){if(arguments.length>2)throw e;if(arguments.length<2)throw t;return Et.boolean(Un(o).endsWith(Un(l)))},int(o){return Et.number(Ip(o))},join(o,...l){return Et.string(Mo(Un,...l).join(Un(o)))},last(){if(arguments.length)throw new Error("last() does not take arguments");return Et.number(this.contextSize)},"local-name":function(o){let l=rb(this,o);return Et.string(l.match(/^(?:[^:]*:)?(.*)/)[1])},name(o){return Et.string(rb(this,o))},log(o){return Et.number(Math.log(An(o)))},log10(o){return Et.number(Math.log10(An(o)))},max(...o){let l=Mo(An,...o);return!l.length||l.some(c=>Number.isNaN(Number(c)))?Et.number(NaN):Et.number(Math.max(...l))},min(...o){let l=Mo(An,...o);return!l.length||l.some(c=>Number.isNaN(Number(c)))?Et.number(NaN):Et.number(Math.min(...l))},"namespace-uri":function(o){let l=ab(this,o);return Et.string(l&&l.namespaceURI||"")},"normalize-space":function(o){if(arguments.length>1)throw new Error("too many args");let l=Un(o||this.cN);return l=l.replace(/\f/g,"\\f"),l=l.replace(/\r\v/g,"\v"),l=l.replace(/\v/g,"\\v"),l=l.replace(/\s+/g," "),l=l.replace(/^\s+|\s+$/g,""),l=l.replace(/\\v/g,"\v"),l=l.replace(/\\f/g,"\f"),Et.string(l)},not(o){if(arguments.length===0)throw t;if(arguments.length>1)throw e;return Et.boolean(!lc(o))},now(){return Et.date(new Date)},number(o){if(arguments.length>1)throw new Error(`number() passed wrong arg count (expected 0 or 1, but got ${arguments.length})`);let l=arguments.length?o:this.cN,c=Un(l);return yu.test(c)?Et.number(vu(c)):Et.number(An(l))},today(){return Et.date(i._now())},once(o){let l=Un(this.cN);return Et.string(l||Un(o))},pi(){return Et.number(Math.PI)},position(o){if(arguments.length>1)throw new Error("too many args");if(o&&o.t!=="arr")throw new Error(`wrong arg type for position() - expected nodeset, but got: ${o.t}`);if(o&&!o.v.length)throw new Error("cannot call position() on an empty nodeset");if(!o)return Et.number(this.contextPosition);let l=1,c=o.v[0],h=c.tagName;for(;c.previousElementSibling&&c.previousElementSibling.tagName===h;)c=c.previousElementSibling,l++;return Et.number(l)},pow(o,l){return Et.number(An(o)**An(l))},random(){return Et.number(parseFloat(Math.random().toFixed(15)))},randomize(o,l){if(!arguments.length)throw t;if(arguments.length>2)throw e;if(!o||o.t!=="arr")throw new Error("randomize() must be called on a nodeset");return l=l&&An(l),{t:"arr",v:zI(o.v,l)}},regex(o,l){return Et.boolean(new RegExp(Un(l)).test(Un(o)))},round(o,l){if(arguments.length===0)throw t;if(arguments.length>2)throw e;if(o=An(o),!l)return Et.number(n(o));l=Ip(l);let c=10**Math.abs(l);return l>0?Et.number(n(o*c)/c):Et.number(c*n(o/c))},selected(o,l){return Et.boolean(Un(o).split(" ").indexOf(Un(l).trim())!==-1)},"selected-at":function(o,l){if(!l)throw new Error(`No index provided for selected-at() [index=${l}; list=${JSON.stringify(o)}`);return Et.string(Un(o).split(" ")[Ip(l)]||"")},sin(o){return Et.number(Math.sin(An(o)))},sqrt(o){return Et.number(Math.sqrt(An(o)))},string(o){if(arguments.length>1)throw new Error(`string() passed wrong arg count (expected 0 or 1, but got ${arguments.length})`);return Et.string(Un(o||this.cN))},"string-length":function(o){if(arguments.length>1)throw new Error("too many args");let l=Un(o||this.cN);return Et.number(l.length)},substr(o,l,c){return Et.string(Un(o).slice(An(l),c&&An(c)))},sum(o){if(!o||o.t!=="arr")throw new Error("sum() must be called on a nodeset");let l=0,c=o.v.length;for(;c--;)l+=An(o.v[c]);return Et.number(l)},tan(o){return Et.number(Math.tan(An(o)))},true(){if(arguments.length)throw e;return Et.boolean(!0)},uuid(o){return o?Et.string(FI(An(o))):Et.string(XI())},"weighted-checklist":function(o,l,...c){o=An(o),l=An(l);let h=[],p=[],E=0;for(let b=0;b<c.length;b+=2){let C=c[b],N=c[b+1];C&&N&&(h=h.concat(Mo(lc,C)),p=p.concat(Mo(An,N)))}for(let b=0;b<h.length;b++)h[b]&&(E+=p[b]||0);return Et.boolean((o<0||E>=o)&&(l<0||E<=l))}};a["date-time"]=a.date,a["format-date-time"]=a["format-date"];let s={toExternalResult(o,l){if(o.t==="arr"&&l===XPathResult.NUMBER_TYPE){let c=Un(o);if(yu.test(c))return{resultType:l,numberValue:vu(c)}}if(o.t==="date")switch(l){case XPathResult.BOOLEAN_TYPE:return{resultType:l,booleanValue:!Number.isNaN(Number(o.v))};case XPathResult.NUMBER_TYPE:return{resultType:l,numberValue:An(o)};case XPathResult.ANY_TYPE:case XPathResult.STRING_TYPE:return{resultType:l,stringValue:Un(o)};default:throw new Error(`toExternalResult() doesn't know how to convert a date to ${l}`)}},typefor(o){if(o instanceof Date)return"date"},handleInfix(o,l,c,h){if(l.t==="date"||h.t==="date")return l.t==="bool"||h.t==="bool"?void 0:((l.t==="arr"||l.t==="str")&&(l=Et.date(Zf(l))),(h.t==="arr"||h.t==="str")&&(h=Et.date(Zf(h))),l.t==="date"&&(l={t:"num",v:nb(l.v)}),h.t==="date"&&(h={t:"num",v:nb(h.v)}),{t:"continue",lhs:l,op:c,rhs:h});if(c===Ap||c===WI){let p=Un(l);if(yu.test(p)){let b=vu(p),C=An(h);return c===Ap?b+C:b-C}let E=Un(h);if(yu.test(E)){let b=vu(E),C=An(l);return c===Ap?C+b:C-b}}else if(c>=jI&&c<=KI){let p=Un(l);yu.test(p)&&(l=Et.number(vu(p)));let E=Un(h);return yu.test(E)&&(h=Et.number(vu(E))),{t:"continue",lhs:l,op:c,rhs:h}}}};return i.func=a,i.process=s,i.XPR=Et,i._now=function(){let o=new Date;return new Date(o.getFullYear(),o.getMonth(),o.getDate())},i};sb.exports=GI;function Mo(e,...t){let n=[];for(let r=0;r<t.length;++r)if(t[r].t==="arr")for(let i=0;i<t[r].v.length;++i)n.push(e(t[r].v[i]));else n.push(e(t[r]));return n}function Ip(e){let t=An(e);return t>0?Math.floor(t):Math.ceil(t)}function Zf(e){let t,n;switch(e.t){case"bool":return new Date(NaN);case"date":return e.v;case"num":return t=new Date(0),t.setTime(t.getTime()+e.v*24*60*60*1e3),t;case"arr":case"str":if(e=Un(e),e.length===0)return new OI;if($I.test(e))return t=new Date(0),t.setTime(t.getTime()+parseInt(e,10)*24*60*60*1e3),t;if(yu.test(e)&&(t=e.indexOf("T"),t!==-1&&(n=e.substring(t),e=e.substring(0,t)),t=e.split("-"),VI(t[0],t[1],t[2]))){n=n||`T00:00:00.000${BI(new Date(e))}`;let r=`${Na(t[0])}-${Na(t[1])}-${Na(t[2])}${n}`;return new Date(r)}return new Date(e);default:throw new Error(`asDate() can't handle ${e.t}s yet :-(`)}}function Na(e,t){for(t=t||2,e=e.toString();e.length<t;)e=`0${e}`;return e}function rb(e,t){let n=ab(e,t);return n?n.nodeName:""}function ab(e,t){if(arguments.length>2)throw new Error("too many args");if(!t)return ib(e.cN)?e.cN:null;if(t.t!=="arr")throw new Error("wrong arg type");if(t.v.length)return HI({t:"arr",v:t.v.filter(ib)}),t.v[0]}var ZI={[Node.ELEMENT_NODE]:!0,[Node.ATTRIBUTE_NODE]:!0,[Node.PROCESSING_INSTRUCTION_NODE]:!0,[Node.DOCUMENT_TYPE_NODE]:!0};function ib({nodeType:e}){return ZI[e]}function XI(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,e=>(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16))}});var fb=$e((K6,cb)=>{su();var YI=A0(),QI=ob(),ub=hf(),{asBoolean:JI,asNumber:eN,asString:tN}=ou(),lb={string:tN,boolean:JI,number:eN};cb.exports=function(){let e=QI(),t=new YI(new XPathEvaluator,e);return t.customXPathFunction={add:(n,{fn:r,args:i,ret:a})=>{if(Object.prototype.hasOwnProperty.call(e.func,n))throw new Error(`There is already a function with the name: '${n}'`);let s=i.map(h=>h.t),o=Object.keys(lb),l=s.filter(h=>!o.includes(h));if(l.length){let h=l.map(p=>`'${p}'`);throw new Error(`Unsupported arg type(s): ${h.join(",")}`)}if(!Object.keys(ub).includes(a))throw new Error(`Unsupported return type: '${a}'`);e.func[n]=(...h)=>{if(h.length!==s.length)throw new Error(`Function "${n}" expected ${s.length} arg(s), but got ${h.length}`);let p=s.map((E,b)=>lb[E](h[b]));return ub[a](r(...p))}}},t}});var gr=$e((Cb,eh)=>{(function(e,t){"use strict";typeof eh=="object"&&typeof eh.exports=="object"?eh.exports=e.document?t(e,!0):function(n){if(!n.document)throw new Error("jQuery requires a window with a document");return t(n)}:t(e)})(typeof window<"u"?window:Cb,function(e,t){"use strict";var n=[],r=Object.getPrototypeOf,i=n.slice,a=n.flat?function(f){return n.flat.call(f)}:function(f){return n.concat.apply([],f)},s=n.push,o=n.indexOf,l={},c=l.toString,h=l.hasOwnProperty,p=h.toString,E=p.call(Object),b={},C=function(g){return typeof g=="function"&&typeof g.nodeType!="number"&&typeof g.item!="function"},N=function(g){return g!=null&&g===g.window},w=e.document,I={type:!0,src:!0,nonce:!0,noModule:!0};function S(f,g,T){T=T||w;var A,B,U=T.createElement("script");if(U.text=f,g)for(A in I)B=g[A]||g.getAttribute&&g.getAttribute(A),B&&U.setAttribute(A,B);T.head.appendChild(U).parentNode.removeChild(U)}function _(f){return f==null?f+"":typeof f=="object"||typeof f=="function"?l[c.call(f)]||"object":typeof f}var P="3.7.1",v=/HTML$/i,y=function(f,g){return new y.fn.init(f,g)};y.fn=y.prototype={jquery:P,constructor:y,length:0,toArray:function(){return i.call(this)},get:function(f){return f==null?i.call(this):f<0?this[f+this.length]:this[f]},pushStack:function(f){var g=y.merge(this.constructor(),f);return g.prevObject=this,g},each:function(f){return y.each(this,f)},map:function(f){return this.pushStack(y.map(this,function(g,T){return f.call(g,T,g)}))},slice:function(){return this.pushStack(i.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(y.grep(this,function(f,g){return(g+1)%2}))},odd:function(){return this.pushStack(y.grep(this,function(f,g){return g%2}))},eq:function(f){var g=this.length,T=+f+(f<0?g:0);return this.pushStack(T>=0&&T<g?[this[T]]:[])},end:function(){return this.prevObject||this.constructor()},push:s,sort:n.sort,splice:n.splice},y.extend=y.fn.extend=function(){var f,g,T,A,B,U,z=arguments[0]||{},Y=1,X=arguments.length,me=!1;for(typeof z=="boolean"&&(me=z,z=arguments[Y]||{},Y++),typeof z!="object"&&!C(z)&&(z={}),Y===X&&(z=this,Y--);Y<X;Y++)if((f=arguments[Y])!=null)for(g in f)A=f[g],!(g==="__proto__"||z===A)&&(me&&A&&(y.isPlainObject(A)||(B=Array.isArray(A)))?(T=z[g],B&&!Array.isArray(T)?U=[]:!B&&!y.isPlainObject(T)?U={}:U=T,B=!1,z[g]=y.extend(me,U,A)):A!==void 0&&(z[g]=A));return z},y.extend({expando:"jQuery"+(P+Math.random()).replace(/\D/g,""),isReady:!0,error:function(f){throw new Error(f)},noop:function(){},isPlainObject:function(f){var g,T;return!f||c.call(f)!=="[object Object]"?!1:(g=r(f),g?(T=h.call(g,"constructor")&&g.constructor,typeof T=="function"&&p.call(T)===E):!0)},isEmptyObject:function(f){var g;for(g in f)return!1;return!0},globalEval:function(f,g,T){S(f,{nonce:g&&g.nonce},T)},each:function(f,g){var T,A=0;if($(f))for(T=f.length;A<T&&g.call(f[A],A,f[A])!==!1;A++);else for(A in f)if(g.call(f[A],A,f[A])===!1)break;return f},text:function(f){var g,T="",A=0,B=f.nodeType;if(!B)for(;g=f[A++];)T+=y.text(g);return B===1||B===11?f.textContent:B===9?f.documentElement.textContent:B===3||B===4?f.nodeValue:T},makeArray:function(f,g){var T=g||[];return f!=null&&($(Object(f))?y.merge(T,typeof f=="string"?[f]:f):s.call(T,f)),T},inArray:function(f,g,T){return g==null?-1:o.call(g,f,T)},isXMLDoc:function(f){var g=f&&f.namespaceURI,T=f&&(f.ownerDocument||f).documentElement;return!v.test(g||T&&T.nodeName||"HTML")},merge:function(f,g){for(var T=+g.length,A=0,B=f.length;A<T;A++)f[B++]=g[A];return f.length=B,f},grep:function(f,g,T){for(var A,B=[],U=0,z=f.length,Y=!T;U<z;U++)A=!g(f[U],U),A!==Y&&B.push(f[U]);return B},map:function(f,g,T){var A,B,U=0,z=[];if($(f))for(A=f.length;U<A;U++)B=g(f[U],U,T),B!=null&&z.push(B);else for(U in f)B=g(f[U],U,T),B!=null&&z.push(B);return a(z)},guid:1,support:b}),typeof Symbol=="function"&&(y.fn[Symbol.iterator]=n[Symbol.iterator]),y.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(f,g){l["[object "+g+"]"]=g.toLowerCase()});function $(f){var g=!!f&&"length"in f&&f.length,T=_(f);return C(f)||N(f)?!1:T==="array"||g===0||typeof g=="number"&&g>0&&g-1 in f}function Z(f,g){return f.nodeName&&f.nodeName.toLowerCase()===g.toLowerCase()}var ce=n.pop,q=n.sort,W=n.splice,O="[\\x20\\t\\r\\n\\f]",re=new RegExp("^"+O+"+|((?:^|[^\\\\])(?:\\\\.)*)"+O+"+$","g");y.contains=function(f,g){var T=g&&g.parentNode;return f===T||!!(T&&T.nodeType===1&&(f.contains?f.contains(T):f.compareDocumentPosition&&f.compareDocumentPosition(T)&16))};var le=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g;function ie(f,g){return g?f==="\0"?"\uFFFD":f.slice(0,-1)+"\\"+f.charCodeAt(f.length-1).toString(16)+" ":"\\"+f}y.escapeSelector=function(f){return(f+"").replace(le,ie)};var oe=w,Q=s;(function(){var f,g,T,A,B,U=Q,z,Y,X,me,Pe,De=y.expando,Oe=0,tt=0,Pt=La(),It=La(),pt=La(),Sn=La(),Ot=function(he,xe){return he===xe&&(B=!0),0},bn="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ii="(?:\\\\[\\da-fA-F]{1,6}"+O+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",Qt="\\["+O+"*("+ii+")(?:"+O+"*([*^$|!~]?=)"+O+`*(?:'((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)"|(`+ii+"))|)"+O+"*\\]",Wn=":("+ii+`)(?:\\((('((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)")|((?:\\\\.|[^\\\\()[\\]]|`+Qt+")*)|.*)\\)|)",rn=new RegExp(O+"+","g"),Tn=new RegExp("^"+O+"*,"+O+"*"),Rn=new RegExp("^"+O+"*([>+~]|"+O+")"+O+"*"),Gi=new RegExp(O+"|>"),sr=new RegExp(Wn),Bi=new RegExp("^"+ii+"$"),Ei={ID:new RegExp("^#("+ii+")"),CLASS:new RegExp("^\\.("+ii+")"),TAG:new RegExp("^("+ii+"|[*])"),ATTR:new RegExp("^"+Qt),PSEUDO:new RegExp("^"+Wn),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+O+"*(even|odd|(([+-]|)(\\d*)n|)"+O+"*(?:([+-]|)"+O+"*(\\d+)|))"+O+"*\\)|)","i"),bool:new RegExp("^(?:"+bn+")$","i"),needsContext:new RegExp("^"+O+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+O+"*((?:-\\d)?\\d*)"+O+"*\\)|)(?=[^-]|$)","i")},Wr=/^(?:input|select|textarea|button)$/i,ua=/^h\d$/i,Jt=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,la=/[+~]/,ca=new RegExp("\\\\[\\da-fA-F]{1,6}"+O+"?|\\\\([^\\r\\n\\f])","g"),hr=function(he,xe){var Ue="0x"+he.slice(1)-65536;return xe||(Ue<0?String.fromCharCode(Ue+65536):String.fromCharCode(Ue>>10|55296,Ue&1023|56320))},_s=function(){Fa()},xo=Ys(function(he){return he.disabled===!0&&Z(he,"fieldset")},{dir:"parentNode",next:"legend"});function Ta(){try{return z.activeElement}catch{}}try{U.apply(n=i.call(oe.childNodes),oe.childNodes),n[oe.childNodes.length].nodeType}catch{U={apply:function(xe,Ue){Q.apply(xe,i.call(Ue))},call:function(xe){Q.apply(xe,i.call(arguments,1))}}}function Nn(he,xe,Ue,ze){var We,dt,yt,At,_t,an,Ft,$t=xe&&xe.ownerDocument,jt=xe?xe.nodeType:9;if(Ue=Ue||[],typeof he!="string"||!he||jt!==1&&jt!==9&&jt!==11)return Ue;if(!ze&&(Fa(xe),xe=xe||z,X)){if(jt!==11&&(_t=Jt.exec(he)))if(We=_t[1]){if(jt===9)if(yt=xe.getElementById(We)){if(yt.id===We)return U.call(Ue,yt),Ue}else return Ue;else if($t&&(yt=$t.getElementById(We))&&Nn.contains(xe,yt)&&yt.id===We)return U.call(Ue,yt),Ue}else{if(_t[2])return U.apply(Ue,xe.getElementsByTagName(he)),Ue;if((We=_t[3])&&xe.getElementsByClassName)return U.apply(Ue,xe.getElementsByClassName(We)),Ue}if(!Sn[he+" "]&&(!me||!me.test(he))){if(Ft=he,$t=xe,jt===1&&(Gi.test(he)||Rn.test(he))){for($t=la.test(he)&&ha(xe.parentNode)||xe,($t!=xe||!b.scope)&&((At=xe.getAttribute("id"))?At=y.escapeSelector(At):xe.setAttribute("id",At=De)),an=Ci(he),dt=an.length;dt--;)an[dt]=(At?"#"+At:":scope")+" "+_r(an[dt]);Ft=an.join(",")}try{return U.apply(Ue,$t.querySelectorAll(Ft)),Ue}catch{Sn(he,!0)}finally{At===De&&xe.removeAttribute("id")}}}return ws(he.replace(re,"$1"),xe,Ue,ze)}function La(){var he=[];function xe(Ue,ze){return he.push(Ue+" ")>g.cacheLength&&delete xe[he.shift()],xe[Ue+" "]=ze}return xe}function Zi(he){return he[De]=!0,he}function fa(he){var xe=z.createElement("fieldset");try{return!!he(xe)}catch{return!1}finally{xe.parentNode&&xe.parentNode.removeChild(xe),xe=null}}function Xs(he){return function(xe){return Z(xe,"input")&&xe.type===he}}function Eo(he){return function(xe){return(Z(xe,"input")||Z(xe,"button"))&&xe.type===he}}function zu(he){return function(xe){return"form"in xe?xe.parentNode&&xe.disabled===!1?"label"in xe?"label"in xe.parentNode?xe.parentNode.disabled===he:xe.disabled===he:xe.isDisabled===he||xe.isDisabled!==!he&&xo(xe)===he:xe.disabled===he:"label"in xe?xe.disabled===he:!1}}function di(he){return Zi(function(xe){return xe=+xe,Zi(function(Ue,ze){for(var We,dt=he([],Ue.length,xe),yt=dt.length;yt--;)Ue[We=dt[yt]]&&(Ue[We]=!(ze[We]=Ue[We]))})})}function ha(he){return he&&typeof he.getElementsByTagName<"u"&&he}function Fa(he){var xe,Ue=he?he.ownerDocument||he:oe;return Ue==z||Ue.nodeType!==9||!Ue.documentElement||(z=Ue,Y=z.documentElement,X=!y.isXMLDoc(z),Pe=Y.matches||Y.webkitMatchesSelector||Y.msMatchesSelector,Y.msMatchesSelector&&oe!=z&&(xe=z.defaultView)&&xe.top!==xe&&xe.addEventListener("unload",_s),b.getById=fa(function(ze){return Y.appendChild(ze).id=y.expando,!z.getElementsByName||!z.getElementsByName(y.expando).length}),b.disconnectedMatch=fa(function(ze){return Pe.call(ze,"*")}),b.scope=fa(function(){return z.querySelectorAll(":scope")}),b.cssHas=fa(function(){try{return z.querySelector(":has(*,:jqfake)"),!1}catch{return!0}}),b.getById?(g.filter.ID=function(ze){var We=ze.replace(ca,hr);return function(dt){return dt.getAttribute("id")===We}},g.find.ID=function(ze,We){if(typeof We.getElementById<"u"&&X){var dt=We.getElementById(ze);return dt?[dt]:[]}}):(g.filter.ID=function(ze){var We=ze.replace(ca,hr);return function(dt){var yt=typeof dt.getAttributeNode<"u"&&dt.getAttributeNode("id");return yt&&yt.value===We}},g.find.ID=function(ze,We){if(typeof We.getElementById<"u"&&X){var dt,yt,At,_t=We.getElementById(ze);if(_t){if(dt=_t.getAttributeNode("id"),dt&&dt.value===ze)return[_t];for(At=We.getElementsByName(ze),yt=0;_t=At[yt++];)if(dt=_t.getAttributeNode("id"),dt&&dt.value===ze)return[_t]}return[]}}),g.find.TAG=function(ze,We){return typeof We.getElementsByTagName<"u"?We.getElementsByTagName(ze):We.querySelectorAll(ze)},g.find.CLASS=function(ze,We){if(typeof We.getElementsByClassName<"u"&&X)return We.getElementsByClassName(ze)},me=[],fa(function(ze){var We;Y.appendChild(ze).innerHTML="<a id='"+De+"' href='' disabled='disabled'></a><select id='"+De+"-\r\\' disabled='disabled'><option selected=''></option></select>",ze.querySelectorAll("[selected]").length||me.push("\\["+O+"*(?:value|"+bn+")"),ze.querySelectorAll("[id~="+De+"-]").length||me.push("~="),ze.querySelectorAll("a#"+De+"+*").length||me.push(".#.+[+~]"),ze.querySelectorAll(":checked").length||me.push(":checked"),We=z.createElement("input"),We.setAttribute("type","hidden"),ze.appendChild(We).setAttribute("name","D"),Y.appendChild(ze).disabled=!0,ze.querySelectorAll(":disabled").length!==2&&me.push(":enabled",":disabled"),We=z.createElement("input"),We.setAttribute("name",""),ze.appendChild(We),ze.querySelectorAll("[name='']").length||me.push("\\["+O+"*name"+O+"*="+O+`*(?:''|"")`)}),b.cssHas||me.push(":has"),me=me.length&&new RegExp(me.join("|")),Ot=function(ze,We){if(ze===We)return B=!0,0;var dt=!ze.compareDocumentPosition-!We.compareDocumentPosition;return dt||(dt=(ze.ownerDocument||ze)==(We.ownerDocument||We)?ze.compareDocumentPosition(We):1,dt&1||!b.sortDetached&&We.compareDocumentPosition(ze)===dt?ze===z||ze.ownerDocument==oe&&Nn.contains(oe,ze)?-1:We===z||We.ownerDocument==oe&&Nn.contains(oe,We)?1:A?o.call(A,ze)-o.call(A,We):0:dt&4?-1:1)}),z}Nn.matches=function(he,xe){return Nn(he,null,null,xe)},Nn.matchesSelector=function(he,xe){if(Fa(he),X&&!Sn[xe+" "]&&(!me||!me.test(xe)))try{var Ue=Pe.call(he,xe);if(Ue||b.disconnectedMatch||he.document&&he.document.nodeType!==11)return Ue}catch{Sn(xe,!0)}return Nn(xe,z,null,[he]).length>0},Nn.contains=function(he,xe){return(he.ownerDocument||he)!=z&&Fa(he),y.contains(he,xe)},Nn.attr=function(he,xe){(he.ownerDocument||he)!=z&&Fa(he);var Ue=g.attrHandle[xe.toLowerCase()],ze=Ue&&h.call(g.attrHandle,xe.toLowerCase())?Ue(he,xe,!X):void 0;return ze!==void 0?ze:he.getAttribute(xe)},Nn.error=function(he){throw new Error("Syntax error, unrecognized expression: "+he)},y.uniqueSort=function(he){var xe,Ue=[],ze=0,We=0;if(B=!b.sortStable,A=!b.sortStable&&i.call(he,0),q.call(he,Ot),B){for(;xe=he[We++];)xe===he[We]&&(ze=Ue.push(We));for(;ze--;)W.call(he,Ue[ze],1)}return A=null,he},y.fn.uniqueSort=function(){return this.pushStack(y.uniqueSort(i.apply(this)))},g=y.expr={cacheLength:50,createPseudo:Zi,match:Ei,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(he){return he[1]=he[1].replace(ca,hr),he[3]=(he[3]||he[4]||he[5]||"").replace(ca,hr),he[2]==="~="&&(he[3]=" "+he[3]+" "),he.slice(0,4)},CHILD:function(he){return he[1]=he[1].toLowerCase(),he[1].slice(0,3)==="nth"?(he[3]||Nn.error(he[0]),he[4]=+(he[4]?he[5]+(he[6]||1):2*(he[3]==="even"||he[3]==="odd")),he[5]=+(he[7]+he[8]||he[3]==="odd")):he[3]&&Nn.error(he[0]),he},PSEUDO:function(he){var xe,Ue=!he[6]&&he[2];return Ei.CHILD.test(he[0])?null:(he[3]?he[2]=he[4]||he[5]||"":Ue&&sr.test(Ue)&&(xe=Ci(Ue,!0))&&(xe=Ue.indexOf(")",Ue.length-xe)-Ue.length)&&(he[0]=he[0].slice(0,xe),he[2]=Ue.slice(0,xe)),he.slice(0,3))}},filter:{TAG:function(he){var xe=he.replace(ca,hr).toLowerCase();return he==="*"?function(){return!0}:function(Ue){return Z(Ue,xe)}},CLASS:function(he){var xe=Pt[he+" "];return xe||(xe=new RegExp("(^|"+O+")"+he+"("+O+"|$)"))&&Pt(he,function(Ue){return xe.test(typeof Ue.className=="string"&&Ue.className||typeof Ue.getAttribute<"u"&&Ue.getAttribute("class")||"")})},ATTR:function(he,xe,Ue){return function(ze){var We=Nn.attr(ze,he);return We==null?xe==="!=":xe?(We+="",xe==="="?We===Ue:xe==="!="?We!==Ue:xe==="^="?Ue&&We.indexOf(Ue)===0:xe==="*="?Ue&&We.indexOf(Ue)>-1:xe==="$="?Ue&&We.slice(-Ue.length)===Ue:xe==="~="?(" "+We.replace(rn," ")+" ").indexOf(Ue)>-1:xe==="|="?We===Ue||We.slice(0,Ue.length+1)===Ue+"-":!1):!0}},CHILD:function(he,xe,Ue,ze,We){var dt=he.slice(0,3)!=="nth",yt=he.slice(-4)!=="last",At=xe==="of-type";return ze===1&&We===0?function(_t){return!!_t.parentNode}:function(_t,an,Ft){var $t,jt,Rt,zn,se,ge=dt!==yt?"nextSibling":"previousSibling",we=_t.parentNode,je=At&&_t.nodeName.toLowerCase(),Ne=!Ft&&!At,Ke=!1;if(we){if(dt){for(;ge;){for(Rt=_t;Rt=Rt[ge];)if(At?Z(Rt,je):Rt.nodeType===1)return!1;se=ge=he==="only"&&!se&&"nextSibling"}return!0}if(se=[yt?we.firstChild:we.lastChild],yt&&Ne){for(jt=we[De]||(we[De]={}),$t=jt[he]||[],zn=$t[0]===Oe&&$t[1],Ke=zn&&$t[2],Rt=zn&&we.childNodes[zn];Rt=++zn&&Rt&&Rt[ge]||(Ke=zn=0)||se.pop();)if(Rt.nodeType===1&&++Ke&&Rt===_t){jt[he]=[Oe,zn,Ke];break}}else if(Ne&&(jt=_t[De]||(_t[De]={}),$t=jt[he]||[],zn=$t[0]===Oe&&$t[1],Ke=zn),Ke===!1)for(;(Rt=++zn&&Rt&&Rt[ge]||(Ke=zn=0)||se.pop())&&!((At?Z(Rt,je):Rt.nodeType===1)&&++Ke&&(Ne&&(jt=Rt[De]||(Rt[De]={}),jt[he]=[Oe,Ke]),Rt===_t)););return Ke-=We,Ke===ze||Ke%ze===0&&Ke/ze>=0}}},PSEUDO:function(he,xe){var Ue,ze=g.pseudos[he]||g.setFilters[he.toLowerCase()]||Nn.error("unsupported pseudo: "+he);return ze[De]?ze(xe):ze.length>1?(Ue=[he,he,"",xe],g.setFilters.hasOwnProperty(he.toLowerCase())?Zi(function(We,dt){for(var yt,At=ze(We,xe),_t=At.length;_t--;)yt=o.call(We,At[_t]),We[yt]=!(dt[yt]=At[_t])}):function(We){return ze(We,0,Ue)}):ze}},pseudos:{not:Zi(function(he){var xe=[],Ue=[],ze=Fr(he.replace(re,"$1"));return ze[De]?Zi(function(We,dt,yt,At){for(var _t,an=ze(We,null,At,[]),Ft=We.length;Ft--;)(_t=an[Ft])&&(We[Ft]=!(dt[Ft]=_t))}):function(We,dt,yt){return xe[0]=We,ze(xe,null,yt,Ue),xe[0]=null,!Ue.pop()}}),has:Zi(function(he){return function(xe){return Nn(he,xe).length>0}}),contains:Zi(function(he){return he=he.replace(ca,hr),function(xe){return(xe.textContent||y.text(xe)).indexOf(he)>-1}}),lang:Zi(function(he){return Bi.test(he||"")||Nn.error("unsupported lang: "+he),he=he.replace(ca,hr).toLowerCase(),function(xe){var Ue;do if(Ue=X?xe.lang:xe.getAttribute("xml:lang")||xe.getAttribute("lang"))return Ue=Ue.toLowerCase(),Ue===he||Ue.indexOf(he+"-")===0;while((xe=xe.parentNode)&&xe.nodeType===1);return!1}}),target:function(he){var xe=e.location&&e.location.hash;return xe&&xe.slice(1)===he.id},root:function(he){return he===Y},focus:function(he){return he===Ta()&&z.hasFocus()&&!!(he.type||he.href||~he.tabIndex)},enabled:zu(!1),disabled:zu(!0),checked:function(he){return Z(he,"input")&&!!he.checked||Z(he,"option")&&!!he.selected},selected:function(he){return he.parentNode&&he.parentNode.selectedIndex,he.selected===!0},empty:function(he){for(he=he.firstChild;he;he=he.nextSibling)if(he.nodeType<6)return!1;return!0},parent:function(he){return!g.pseudos.empty(he)},header:function(he){return ua.test(he.nodeName)},input:function(he){return Wr.test(he.nodeName)},button:function(he){return Z(he,"input")&&he.type==="button"||Z(he,"button")},text:function(he){var xe;return Z(he,"input")&&he.type==="text"&&((xe=he.getAttribute("type"))==null||xe.toLowerCase()==="text")},first:di(function(){return[0]}),last:di(function(he,xe){return[xe-1]}),eq:di(function(he,xe,Ue){return[Ue<0?Ue+xe:Ue]}),even:di(function(he,xe){for(var Ue=0;Ue<xe;Ue+=2)he.push(Ue);return he}),odd:di(function(he,xe){for(var Ue=1;Ue<xe;Ue+=2)he.push(Ue);return he}),lt:di(function(he,xe,Ue){var ze;for(Ue<0?ze=Ue+xe:Ue>xe?ze=xe:ze=Ue;--ze>=0;)he.push(ze);return he}),gt:di(function(he,xe,Ue){for(var ze=Ue<0?Ue+xe:Ue;++ze<xe;)he.push(ze);return he})}},g.pseudos.nth=g.pseudos.eq;for(f in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})g.pseudos[f]=Xs(f);for(f in{submit:!0,reset:!0})g.pseudos[f]=Eo(f);function bs(){}bs.prototype=g.filters=g.pseudos,g.setFilters=new bs;function Ci(he,xe){var Ue,ze,We,dt,yt,At,_t,an=It[he+" "];if(an)return xe?0:an.slice(0);for(yt=he,At=[],_t=g.preFilter;yt;){(!Ue||(ze=Tn.exec(yt)))&&(ze&&(yt=yt.slice(ze[0].length)||yt),At.push(We=[])),Ue=!1,(ze=Rn.exec(yt))&&(Ue=ze.shift(),We.push({value:Ue,type:ze[0].replace(re," ")}),yt=yt.slice(Ue.length));for(dt in g.filter)(ze=Ei[dt].exec(yt))&&(!_t[dt]||(ze=_t[dt](ze)))&&(Ue=ze.shift(),We.push({value:Ue,type:dt,matches:ze}),yt=yt.slice(Ue.length));if(!Ue)break}return xe?yt.length:yt?Nn.error(he):It(he,At).slice(0)}function _r(he){for(var xe=0,Ue=he.length,ze="";xe<Ue;xe++)ze+=he[xe].value;return ze}function Ys(he,xe,Ue){var ze=xe.dir,We=xe.next,dt=We||ze,yt=Ue&&dt==="parentNode",At=tt++;return xe.first?function(_t,an,Ft){for(;_t=_t[ze];)if(_t.nodeType===1||yt)return he(_t,an,Ft);return!1}:function(_t,an,Ft){var $t,jt,Rt=[Oe,At];if(Ft){for(;_t=_t[ze];)if((_t.nodeType===1||yt)&&he(_t,an,Ft))return!0}else for(;_t=_t[ze];)if(_t.nodeType===1||yt)if(jt=_t[De]||(_t[De]={}),We&&Z(_t,We))_t=_t[ze]||_t;else{if(($t=jt[dt])&&$t[0]===Oe&&$t[1]===At)return Rt[2]=$t[2];if(jt[dt]=Rt,Rt[2]=he(_t,an,Ft))return!0}return!1}}function ka(he){return he.length>1?function(xe,Ue,ze){for(var We=he.length;We--;)if(!he[We](xe,Ue,ze))return!1;return!0}:he[0]}function Hu(he,xe,Ue){for(var ze=0,We=xe.length;ze<We;ze++)Nn(he,xe[ze],Ue);return Ue}function Mi(he,xe,Ue,ze,We){for(var dt,yt=[],At=0,_t=he.length,an=xe!=null;At<_t;At++)(dt=he[At])&&(!Ue||Ue(dt,ze,We))&&(yt.push(dt),an&&xe.push(At));return yt}function Ln(he,xe,Ue,ze,We,dt){return ze&&!ze[De]&&(ze=Ln(ze)),We&&!We[De]&&(We=Ln(We,dt)),Zi(function(yt,At,_t,an){var Ft,$t,jt,Rt,zn=[],se=[],ge=At.length,we=yt||Hu(xe||"*",_t.nodeType?[_t]:_t,[]),je=he&&(yt||!xe)?Mi(we,zn,he,_t,an):we;if(Ue?(Rt=We||(yt?he:ge||ze)?[]:At,Ue(je,Rt,_t,an)):Rt=je,ze)for(Ft=Mi(Rt,se),ze(Ft,[],_t,an),$t=Ft.length;$t--;)(jt=Ft[$t])&&(Rt[se[$t]]=!(je[se[$t]]=jt));if(yt){if(We||he){if(We){for(Ft=[],$t=Rt.length;$t--;)(jt=Rt[$t])&&Ft.push(je[$t]=jt);We(null,Rt=[],Ft,an)}for($t=Rt.length;$t--;)(jt=Rt[$t])&&(Ft=We?o.call(yt,jt):zn[$t])>-1&&(yt[Ft]=!(At[Ft]=jt))}}else Rt=Mi(Rt===At?Rt.splice(ge,Rt.length):Rt),We?We(null,At,Rt,an):U.apply(At,Rt)})}function ns(he){for(var xe,Ue,ze,We=he.length,dt=g.relative[he[0].type],yt=dt||g.relative[" "],At=dt?1:0,_t=Ys(function($t){return $t===xe},yt,!0),an=Ys(function($t){return o.call(xe,$t)>-1},yt,!0),Ft=[function($t,jt,Rt){var zn=!dt&&(Rt||jt!=T)||((xe=jt).nodeType?_t($t,jt,Rt):an($t,jt,Rt));return xe=null,zn}];At<We;At++)if(Ue=g.relative[he[At].type])Ft=[Ys(ka(Ft),Ue)];else{if(Ue=g.filter[he[At].type].apply(null,he[At].matches),Ue[De]){for(ze=++At;ze<We&&!g.relative[he[ze].type];ze++);return Ln(At>1&&ka(Ft),At>1&&_r(he.slice(0,At-1).concat({value:he[At-2].type===" "?"*":""})).replace(re,"$1"),Ue,At<ze&&ns(he.slice(At,ze)),ze<We&&ns(he=he.slice(ze)),ze<We&&_r(he))}Ft.push(Ue)}return ka(Ft)}function Si(he,xe){var Ue=xe.length>0,ze=he.length>0,We=function(dt,yt,At,_t,an){var Ft,$t,jt,Rt=0,zn="0",se=dt&&[],ge=[],we=T,je=dt||ze&&g.find.TAG("*",an),Ne=Oe+=we==null?1:Math.random()||.1,Ke=je.length;for(an&&(T=yt==z||yt||an);zn!==Ke&&(Ft=je[zn])!=null;zn++){if(ze&&Ft){for($t=0,!yt&&Ft.ownerDocument!=z&&(Fa(Ft),At=!X);jt=he[$t++];)if(jt(Ft,yt||z,At)){U.call(_t,Ft);break}an&&(Oe=Ne)}Ue&&((Ft=!jt&&Ft)&&Rt--,dt&&se.push(Ft))}if(Rt+=zn,Ue&&zn!==Rt){for($t=0;jt=xe[$t++];)jt(se,ge,yt,At);if(dt){if(Rt>0)for(;zn--;)se[zn]||ge[zn]||(ge[zn]=ce.call(_t));ge=Mi(ge)}U.apply(_t,ge),an&&!dt&&ge.length>0&&Rt+xe.length>1&&y.uniqueSort(_t)}return an&&(Oe=Ne,T=we),se};return Ue?Zi(We):We}function Fr(he,xe){var Ue,ze=[],We=[],dt=pt[he+" "];if(!dt){for(xe||(xe=Ci(he)),Ue=xe.length;Ue--;)dt=ns(xe[Ue]),dt[De]?ze.push(dt):We.push(dt);dt=pt(he,Si(We,ze)),dt.selector=he}return dt}function ws(he,xe,Ue,ze){var We,dt,yt,At,_t,an=typeof he=="function"&&he,Ft=!ze&&Ci(he=an.selector||he);if(Ue=Ue||[],Ft.length===1){if(dt=Ft[0]=Ft[0].slice(0),dt.length>2&&(yt=dt[0]).type==="ID"&&xe.nodeType===9&&X&&g.relative[dt[1].type]){if(xe=(g.find.ID(yt.matches[0].replace(ca,hr),xe)||[])[0],xe)an&&(xe=xe.parentNode);else return Ue;he=he.slice(dt.shift().value.length)}for(We=Ei.needsContext.test(he)?0:dt.length;We--&&(yt=dt[We],!g.relative[At=yt.type]);)if((_t=g.find[At])&&(ze=_t(yt.matches[0].replace(ca,hr),la.test(dt[0].type)&&ha(xe.parentNode)||xe))){if(dt.splice(We,1),he=ze.length&&_r(dt),!he)return U.apply(Ue,ze),Ue;break}}return(an||Fr(he,Ft))(ze,xe,!X,Ue,!xe||la.test(he)&&ha(xe.parentNode)||xe),Ue}b.sortStable=De.split("").sort(Ot).join("")===De,Fa(),b.sortDetached=fa(function(he){return he.compareDocumentPosition(z.createElement("fieldset"))&1}),y.find=Nn,y.expr[":"]=y.expr.pseudos,y.unique=y.uniqueSort,Nn.compile=Fr,Nn.select=ws,Nn.setDocument=Fa,Nn.tokenize=Ci,Nn.escape=y.escapeSelector,Nn.getText=y.text,Nn.isXML=y.isXMLDoc,Nn.selectors=y.expr,Nn.support=y.support,Nn.uniqueSort=y.uniqueSort})();var j=function(f,g,T){for(var A=[],B=T!==void 0;(f=f[g])&&f.nodeType!==9;)if(f.nodeType===1){if(B&&y(f).is(T))break;A.push(f)}return A},H=function(f,g){for(var T=[];f;f=f.nextSibling)f.nodeType===1&&f!==g&&T.push(f);return T},G=y.expr.match.needsContext,fe=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function pe(f,g,T){return C(g)?y.grep(f,function(A,B){return!!g.call(A,B,A)!==T}):g.nodeType?y.grep(f,function(A){return A===g!==T}):typeof g!="string"?y.grep(f,function(A){return o.call(g,A)>-1!==T}):y.filter(g,f,T)}y.filter=function(f,g,T){var A=g[0];return T&&(f=":not("+f+")"),g.length===1&&A.nodeType===1?y.find.matchesSelector(A,f)?[A]:[]:y.find.matches(f,y.grep(g,function(B){return B.nodeType===1}))},y.fn.extend({find:function(f){var g,T,A=this.length,B=this;if(typeof f!="string")return this.pushStack(y(f).filter(function(){for(g=0;g<A;g++)if(y.contains(B[g],this))return!0}));for(T=this.pushStack([]),g=0;g<A;g++)y.find(f,B[g],T);return A>1?y.uniqueSort(T):T},filter:function(f){return this.pushStack(pe(this,f||[],!1))},not:function(f){return this.pushStack(pe(this,f||[],!0))},is:function(f){return!!pe(this,typeof f=="string"&&G.test(f)?y(f):f||[],!1).length}});var de,Ae=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,Ie=y.fn.init=function(f,g,T){var A,B;if(!f)return this;if(T=T||de,typeof f=="string")if(f[0]==="<"&&f[f.length-1]===">"&&f.length>=3?A=[null,f,null]:A=Ae.exec(f),A&&(A[1]||!g))if(A[1]){if(g=g instanceof y?g[0]:g,y.merge(this,y.parseHTML(A[1],g&&g.nodeType?g.ownerDocument||g:w,!0)),fe.test(A[1])&&y.isPlainObject(g))for(A in g)C(this[A])?this[A](g[A]):this.attr(A,g[A]);return this}else return B=w.getElementById(A[2]),B&&(this[0]=B,this.length=1),this;else return!g||g.jquery?(g||T).find(f):this.constructor(g).find(f);else{if(f.nodeType)return this[0]=f,this.length=1,this;if(C(f))return T.ready!==void 0?T.ready(f):f(y)}return y.makeArray(f,this)};Ie.prototype=y.fn,de=y(w);var ve=/^(?:parents|prev(?:Until|All))/,Te={children:!0,contents:!0,next:!0,prev:!0};y.fn.extend({has:function(f){var g=y(f,this),T=g.length;return this.filter(function(){for(var A=0;A<T;A++)if(y.contains(this,g[A]))return!0})},closest:function(f,g){var T,A=0,B=this.length,U=[],z=typeof f!="string"&&y(f);if(!G.test(f)){for(;A<B;A++)for(T=this[A];T&&T!==g;T=T.parentNode)if(T.nodeType<11&&(z?z.index(T)>-1:T.nodeType===1&&y.find.matchesSelector(T,f))){U.push(T);break}}return this.pushStack(U.length>1?y.uniqueSort(U):U)},index:function(f){return f?typeof f=="string"?o.call(y(f),this[0]):o.call(this,f.jquery?f[0]:f):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(f,g){return this.pushStack(y.uniqueSort(y.merge(this.get(),y(f,g))))},addBack:function(f){return this.add(f==null?this.prevObject:this.prevObject.filter(f))}});function Me(f,g){for(;(f=f[g])&&f.nodeType!==1;);return f}y.each({parent:function(f){var g=f.parentNode;return g&&g.nodeType!==11?g:null},parents:function(f){return j(f,"parentNode")},parentsUntil:function(f,g,T){return j(f,"parentNode",T)},next:function(f){return Me(f,"nextSibling")},prev:function(f){return Me(f,"previousSibling")},nextAll:function(f){return j(f,"nextSibling")},prevAll:function(f){return j(f,"previousSibling")},nextUntil:function(f,g,T){return j(f,"nextSibling",T)},prevUntil:function(f,g,T){return j(f,"previousSibling",T)},siblings:function(f){return H((f.parentNode||{}).firstChild,f)},children:function(f){return H(f.firstChild)},contents:function(f){return f.contentDocument!=null&&r(f.contentDocument)?f.contentDocument:(Z(f,"template")&&(f=f.content||f),y.merge([],f.childNodes))}},function(f,g){y.fn[f]=function(T,A){var B=y.map(this,g,T);return f.slice(-5)!=="Until"&&(A=T),A&&typeof A=="string"&&(B=y.filter(A,B)),this.length>1&&(Te[f]||y.uniqueSort(B),ve.test(f)&&B.reverse()),this.pushStack(B)}});var Ge=/[^\x20\t\r\n\f]+/g;function at(f){var g={};return y.each(f.match(Ge)||[],function(T,A){g[A]=!0}),g}y.Callbacks=function(f){f=typeof f=="string"?at(f):y.extend({},f);var g,T,A,B,U=[],z=[],Y=-1,X=function(){for(B=B||f.once,A=g=!0;z.length;Y=-1)for(T=z.shift();++Y<U.length;)U[Y].apply(T[0],T[1])===!1&&f.stopOnFalse&&(Y=U.length,T=!1);f.memory||(T=!1),g=!1,B&&(T?U=[]:U="")},me={add:function(){return U&&(T&&!g&&(Y=U.length-1,z.push(T)),function Pe(De){y.each(De,function(Oe,tt){C(tt)?(!f.unique||!me.has(tt))&&U.push(tt):tt&&tt.length&&_(tt)!=="string"&&Pe(tt)})}(arguments),T&&!g&&X()),this},remove:function(){return y.each(arguments,function(Pe,De){for(var Oe;(Oe=y.inArray(De,U,Oe))>-1;)U.splice(Oe,1),Oe<=Y&&Y--}),this},has:function(Pe){return Pe?y.inArray(Pe,U)>-1:U.length>0},empty:function(){return U&&(U=[]),this},disable:function(){return B=z=[],U=T="",this},disabled:function(){return!U},lock:function(){return B=z=[],!T&&!g&&(U=T=""),this},locked:function(){return!!B},fireWith:function(Pe,De){return B||(De=De||[],De=[Pe,De.slice?De.slice():De],z.push(De),g||X()),this},fire:function(){return me.fireWith(this,arguments),this},fired:function(){return!!A}};return me};function ft(f){return f}function V(f){throw f}function Se(f,g,T,A){var B;try{f&&C(B=f.promise)?B.call(f).done(g).fail(T):f&&C(B=f.then)?B.call(f,g,T):g.apply(void 0,[f].slice(A))}catch(U){T.apply(void 0,[U])}}y.extend({Deferred:function(f){var g=[["notify","progress",y.Callbacks("memory"),y.Callbacks("memory"),2],["resolve","done",y.Callbacks("once memory"),y.Callbacks("once memory"),0,"resolved"],["reject","fail",y.Callbacks("once memory"),y.Callbacks("once memory"),1,"rejected"]],T="pending",A={state:function(){return T},always:function(){return B.done(arguments).fail(arguments),this},catch:function(U){return A.then(null,U)},pipe:function(){var U=arguments;return y.Deferred(function(z){y.each(g,function(Y,X){var me=C(U[X[4]])&&U[X[4]];B[X[1]](function(){var Pe=me&&me.apply(this,arguments);Pe&&C(Pe.promise)?Pe.promise().progress(z.notify).done(z.resolve).fail(z.reject):z[X[0]+"With"](this,me?[Pe]:arguments)})}),U=null}).promise()},then:function(U,z,Y){var X=0;function me(Pe,De,Oe,tt){return function(){var Pt=this,It=arguments,pt=function(){var Ot,bn;if(!(Pe<X)){if(Ot=Oe.apply(Pt,It),Ot===De.promise())throw new TypeError("Thenable self-resolution");bn=Ot&&(typeof Ot=="object"||typeof Ot=="function")&&Ot.then,C(bn)?tt?bn.call(Ot,me(X,De,ft,tt),me(X,De,V,tt)):(X++,bn.call(Ot,me(X,De,ft,tt),me(X,De,V,tt),me(X,De,ft,De.notifyWith))):(Oe!==ft&&(Pt=void 0,It=[Ot]),(tt||De.resolveWith)(Pt,It))}},Sn=tt?pt:function(){try{pt()}catch(Ot){y.Deferred.exceptionHook&&y.Deferred.exceptionHook(Ot,Sn.error),Pe+1>=X&&(Oe!==V&&(Pt=void 0,It=[Ot]),De.rejectWith(Pt,It))}};Pe?Sn():(y.Deferred.getErrorHook?Sn.error=y.Deferred.getErrorHook():y.Deferred.getStackHook&&(Sn.error=y.Deferred.getStackHook()),e.setTimeout(Sn))}}return y.Deferred(function(Pe){g[0][3].add(me(0,Pe,C(Y)?Y:ft,Pe.notifyWith)),g[1][3].add(me(0,Pe,C(U)?U:ft)),g[2][3].add(me(0,Pe,C(z)?z:V))}).promise()},promise:function(U){return U!=null?y.extend(U,A):A}},B={};return y.each(g,function(U,z){var Y=z[2],X=z[5];A[z[1]]=Y.add,X&&Y.add(function(){T=X},g[3-U][2].disable,g[3-U][3].disable,g[0][2].lock,g[0][3].lock),Y.add(z[3].fire),B[z[0]]=function(){return B[z[0]+"With"](this===B?void 0:this,arguments),this},B[z[0]+"With"]=Y.fireWith}),A.promise(B),f&&f.call(B,B),B},when:function(f){var g=arguments.length,T=g,A=Array(T),B=i.call(arguments),U=y.Deferred(),z=function(Y){return function(X){A[Y]=this,B[Y]=arguments.length>1?i.call(arguments):X,--g||U.resolveWith(A,B)}};if(g<=1&&(Se(f,U.done(z(T)).resolve,U.reject,!g),U.state()==="pending"||C(B[T]&&B[T].then)))return U.then();for(;T--;)Se(B[T],z(T),U.reject);return U.promise()}});var Ee=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;y.Deferred.exceptionHook=function(f,g){e.console&&e.console.warn&&f&&Ee.test(f.name)&&e.console.warn("jQuery.Deferred exception: "+f.message,f.stack,g)},y.readyException=function(f){e.setTimeout(function(){throw f})};var ae=y.Deferred();y.fn.ready=function(f){return ae.then(f).catch(function(g){y.readyException(g)}),this},y.extend({isReady:!1,readyWait:1,ready:function(f){(f===!0?--y.readyWait:y.isReady)||(y.isReady=!0,!(f!==!0&&--y.readyWait>0)&&ae.resolveWith(w,[y]))}}),y.ready.then=ae.then;function ue(){w.removeEventListener("DOMContentLoaded",ue),e.removeEventListener("load",ue),y.ready()}w.readyState==="complete"||w.readyState!=="loading"&&!w.documentElement.doScroll?e.setTimeout(y.ready):(w.addEventListener("DOMContentLoaded",ue),e.addEventListener("load",ue));var ye=function(f,g,T,A,B,U,z){var Y=0,X=f.length,me=T==null;if(_(T)==="object"){B=!0;for(Y in T)ye(f,g,Y,T[Y],!0,U,z)}else if(A!==void 0&&(B=!0,C(A)||(z=!0),me&&(z?(g.call(f,A),g=null):(me=g,g=function(Pe,De,Oe){return me.call(y(Pe),Oe)})),g))for(;Y<X;Y++)g(f[Y],T,z?A:A.call(f[Y],Y,g(f[Y],T)));return B?f:me?g.call(f):X?g(f[0],T):U},Ve=/^-ms-/,et=/-([a-z])/g;function Re(f,g){return g.toUpperCase()}function Qe(f){return f.replace(Ve,"ms-").replace(et,Re)}var gt=function(f){return f.nodeType===1||f.nodeType===9||!+f.nodeType};function rt(){this.expando=y.expando+rt.uid++}rt.uid=1,rt.prototype={cache:function(f){var g=f[this.expando];return g||(g={},gt(f)&&(f.nodeType?f[this.expando]=g:Object.defineProperty(f,this.expando,{value:g,configurable:!0}))),g},set:function(f,g,T){var A,B=this.cache(f);if(typeof g=="string")B[Qe(g)]=T;else for(A in g)B[Qe(A)]=g[A];return B},get:function(f,g){return g===void 0?this.cache(f):f[this.expando]&&f[this.expando][Qe(g)]},access:function(f,g,T){return g===void 0||g&&typeof g=="string"&&T===void 0?this.get(f,g):(this.set(f,g,T),T!==void 0?T:g)},remove:function(f,g){var T,A=f[this.expando];if(A!==void 0){if(g!==void 0)for(Array.isArray(g)?g=g.map(Qe):(g=Qe(g),g=g in A?[g]:g.match(Ge)||[]),T=g.length;T--;)delete A[g[T]];(g===void 0||y.isEmptyObject(A))&&(f.nodeType?f[this.expando]=void 0:delete f[this.expando])}},hasData:function(f){var g=f[this.expando];return g!==void 0&&!y.isEmptyObject(g)}};var Je=new rt,qt=new rt,nn=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Er=/[A-Z]/g;function zi(f){return f==="true"?!0:f==="false"?!1:f==="null"?null:f===+f+""?+f:nn.test(f)?JSON.parse(f):f}function Lr(f,g,T){var A;if(T===void 0&&f.nodeType===1)if(A="data-"+g.replace(Er,"-$&").toLowerCase(),T=f.getAttribute(A),typeof T=="string"){try{T=zi(T)}catch{}qt.set(f,g,T)}else T=void 0;return T}y.extend({hasData:function(f){return qt.hasData(f)||Je.hasData(f)},data:function(f,g,T){return qt.access(f,g,T)},removeData:function(f,g){qt.remove(f,g)},_data:function(f,g,T){return Je.access(f,g,T)},_removeData:function(f,g){Je.remove(f,g)}}),y.fn.extend({data:function(f,g){var T,A,B,U=this[0],z=U&&U.attributes;if(f===void 0){if(this.length&&(B=qt.get(U),U.nodeType===1&&!Je.get(U,"hasDataAttrs"))){for(T=z.length;T--;)z[T]&&(A=z[T].name,A.indexOf("data-")===0&&(A=Qe(A.slice(5)),Lr(U,A,B[A])));Je.set(U,"hasDataAttrs",!0)}return B}return typeof f=="object"?this.each(function(){qt.set(this,f)}):ye(this,function(Y){var X;if(U&&Y===void 0)return X=qt.get(U,f),X!==void 0||(X=Lr(U,f),X!==void 0)?X:void 0;this.each(function(){qt.set(this,f,Y)})},null,g,arguments.length>1,null,!0)},removeData:function(f){return this.each(function(){qt.remove(this,f)})}}),y.extend({queue:function(f,g,T){var A;if(f)return g=(g||"fx")+"queue",A=Je.get(f,g),T&&(!A||Array.isArray(T)?A=Je.access(f,g,y.makeArray(T)):A.push(T)),A||[]},dequeue:function(f,g){g=g||"fx";var T=y.queue(f,g),A=T.length,B=T.shift(),U=y._queueHooks(f,g),z=function(){y.dequeue(f,g)};B==="inprogress"&&(B=T.shift(),A--),B&&(g==="fx"&&T.unshift("inprogress"),delete U.stop,B.call(f,z,U)),!A&&U&&U.empty.fire()},_queueHooks:function(f,g){var T=g+"queueHooks";return Je.get(f,T)||Je.access(f,T,{empty:y.Callbacks("once memory").add(function(){Je.remove(f,[g+"queue",T])})})}}),y.fn.extend({queue:function(f,g){var T=2;return typeof f!="string"&&(g=f,f="fx",T--),arguments.length<T?y.queue(this[0],f):g===void 0?this:this.each(function(){var A=y.queue(this,f,g);y._queueHooks(this,f),f==="fx"&&A[0]!=="inprogress"&&y.dequeue(this,f)})},dequeue:function(f){return this.each(function(){y.dequeue(this,f)})},clearQueue:function(f){return this.queue(f||"fx",[])},promise:function(f,g){var T,A=1,B=y.Deferred(),U=this,z=this.length,Y=function(){--A||B.resolveWith(U,[U])};for(typeof f!="string"&&(g=f,f=void 0),f=f||"fx";z--;)T=Je.get(U[z],f+"queueHooks"),T&&T.empty&&(A++,T.empty.add(Y));return Y(),B.promise(g)}});var bi=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,dn=new RegExp("^(?:([+-])=|)("+bi+")([a-z%]*)$","i"),Kn=["Top","Right","Bottom","Left"],kr=w.documentElement,yr=function(f){return y.contains(f.ownerDocument,f)},lr={composed:!0};kr.getRootNode&&(yr=function(f){return y.contains(f.ownerDocument,f)||f.getRootNode(lr)===f.ownerDocument});var cr=function(f,g){return f=g||f,f.style.display==="none"||f.style.display===""&&yr(f)&&y.css(f,"display")==="none"};function _a(f,g,T,A){var B,U,z=20,Y=A?function(){return A.cur()}:function(){return y.css(f,g,"")},X=Y(),me=T&&T[3]||(y.cssNumber[g]?"":"px"),Pe=f.nodeType&&(y.cssNumber[g]||me!=="px"&&+X)&&dn.exec(y.css(f,g));if(Pe&&Pe[3]!==me){for(X=X/2,me=me||Pe[3],Pe=+X||1;z--;)y.style(f,g,Pe+me),(1-U)*(1-(U=Y()/X||.5))<=0&&(z=0),Pe=Pe/U;Pe=Pe*2,y.style(f,g,Pe+me),T=T||[]}return T&&(Pe=+Pe||+X||0,B=T[1]?Pe+(T[1]+1)*T[2]:+T[2],A&&(A.unit=me,A.start=Pe,A.end=B)),B}var Qa={};function Hi(f){var g,T=f.ownerDocument,A=f.nodeName,B=Qa[A];return B||(g=T.body.appendChild(T.createElement(A)),B=y.css(g,"display"),g.parentNode.removeChild(g),B==="none"&&(B="block"),Qa[A]=B,B)}function Mr(f,g){for(var T,A,B=[],U=0,z=f.length;U<z;U++)A=f[U],A.style&&(T=A.style.display,g?(T==="none"&&(B[U]=Je.get(A,"display")||null,B[U]||(A.style.display="")),A.style.display===""&&cr(A)&&(B[U]=Hi(A))):T!=="none"&&(B[U]="none",Je.set(A,"display",T)));for(U=0;U<z;U++)B[U]!=null&&(f[U].style.display=B[U]);return f}y.fn.extend({show:function(){return Mr(this,!0)},hide:function(){return Mr(this)},toggle:function(f){return typeof f=="boolean"?f?this.show():this.hide():this.each(function(){cr(this)?y(this).show():y(this).hide()})}});var Cr=/^(?:checkbox|radio)$/i,ba=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,fo=/^$|^module$|\/(?:java|ecma)script/i;(function(){var f=w.createDocumentFragment(),g=f.appendChild(w.createElement("div")),T=w.createElement("input");T.setAttribute("type","radio"),T.setAttribute("checked","checked"),T.setAttribute("name","t"),g.appendChild(T),b.checkClone=g.cloneNode(!0).cloneNode(!0).lastChild.checked,g.innerHTML="<textarea>x</textarea>",b.noCloneChecked=!!g.cloneNode(!0).lastChild.defaultValue,g.innerHTML="<option></option>",b.option=!!g.lastChild})();var ci={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};ci.tbody=ci.tfoot=ci.colgroup=ci.caption=ci.thead,ci.th=ci.td,b.option||(ci.optgroup=ci.option=[1,"<select multiple='multiple'>","</select>"]);function Ar(f,g){var T;return typeof f.getElementsByTagName<"u"?T=f.getElementsByTagName(g||"*"):typeof f.querySelectorAll<"u"?T=f.querySelectorAll(g||"*"):T=[],g===void 0||g&&Z(f,g)?y.merge([f],T):T}function wa(f,g){for(var T=0,A=f.length;T<A;T++)Je.set(f[T],"globalEval",!g||Je.get(g[T],"globalEval"))}var $i=/<|&#?\w+;/;function ho(f,g,T,A,B){for(var U,z,Y,X,me,Pe,De=g.createDocumentFragment(),Oe=[],tt=0,Pt=f.length;tt<Pt;tt++)if(U=f[tt],U||U===0)if(_(U)==="object")y.merge(Oe,U.nodeType?[U]:U);else if(!$i.test(U))Oe.push(g.createTextNode(U));else{for(z=z||De.appendChild(g.createElement("div")),Y=(ba.exec(U)||["",""])[1].toLowerCase(),X=ci[Y]||ci._default,z.innerHTML=X[1]+y.htmlPrefilter(U)+X[2],Pe=X[0];Pe--;)z=z.lastChild;y.merge(Oe,z.childNodes),z=De.firstChild,z.textContent=""}for(De.textContent="",tt=0;U=Oe[tt++];){if(A&&y.inArray(U,A)>-1){B&&B.push(U);continue}if(me=yr(U),z=Ar(De.appendChild(U),"script"),me&&wa(z),T)for(Pe=0;U=z[Pe++];)fo.test(U.type||"")&&T.push(U)}return De}var po=/^([^.]*)(?:\.(.+)|)/;function xa(){return!0}function nt(){return!1}function Ur(f,g,T,A,B,U){var z,Y;if(typeof g=="object"){typeof T!="string"&&(A=A||T,T=void 0);for(Y in g)Ur(f,Y,T,A,g[Y],U);return f}if(A==null&&B==null?(B=T,A=T=void 0):B==null&&(typeof T=="string"?(B=A,A=void 0):(B=A,A=T,T=void 0)),B===!1)B=nt;else if(!B)return f;return U===1&&(z=B,B=function(X){return y().off(X),z.apply(this,arguments)},B.guid=z.guid||(z.guid=y.guid++)),f.each(function(){y.event.add(this,g,B,A,T)})}y.event={global:{},add:function(f,g,T,A,B){var U,z,Y,X,me,Pe,De,Oe,tt,Pt,It,pt=Je.get(f);if(gt(f))for(T.handler&&(U=T,T=U.handler,B=U.selector),B&&y.find.matchesSelector(kr,B),T.guid||(T.guid=y.guid++),(X=pt.events)||(X=pt.events=Object.create(null)),(z=pt.handle)||(z=pt.handle=function(Sn){return typeof y<"u"&&y.event.triggered!==Sn.type?y.event.dispatch.apply(f,arguments):void 0}),g=(g||"").match(Ge)||[""],me=g.length;me--;)Y=po.exec(g[me])||[],tt=It=Y[1],Pt=(Y[2]||"").split(".").sort(),tt&&(De=y.event.special[tt]||{},tt=(B?De.delegateType:De.bindType)||tt,De=y.event.special[tt]||{},Pe=y.extend({type:tt,origType:It,data:A,handler:T,guid:T.guid,selector:B,needsContext:B&&y.expr.match.needsContext.test(B),namespace:Pt.join(".")},U),(Oe=X[tt])||(Oe=X[tt]=[],Oe.delegateCount=0,(!De.setup||De.setup.call(f,A,Pt,z)===!1)&&f.addEventListener&&f.addEventListener(tt,z)),De.add&&(De.add.call(f,Pe),Pe.handler.guid||(Pe.handler.guid=T.guid)),B?Oe.splice(Oe.delegateCount++,0,Pe):Oe.push(Pe),y.event.global[tt]=!0)},remove:function(f,g,T,A,B){var U,z,Y,X,me,Pe,De,Oe,tt,Pt,It,pt=Je.hasData(f)&&Je.get(f);if(!(!pt||!(X=pt.events))){for(g=(g||"").match(Ge)||[""],me=g.length;me--;){if(Y=po.exec(g[me])||[],tt=It=Y[1],Pt=(Y[2]||"").split(".").sort(),!tt){for(tt in X)y.event.remove(f,tt+g[me],T,A,!0);continue}for(De=y.event.special[tt]||{},tt=(A?De.delegateType:De.bindType)||tt,Oe=X[tt]||[],Y=Y[2]&&new RegExp("(^|\\.)"+Pt.join("\\.(?:.*\\.|)")+"(\\.|$)"),z=U=Oe.length;U--;)Pe=Oe[U],(B||It===Pe.origType)&&(!T||T.guid===Pe.guid)&&(!Y||Y.test(Pe.namespace))&&(!A||A===Pe.selector||A==="**"&&Pe.selector)&&(Oe.splice(U,1),Pe.selector&&Oe.delegateCount--,De.remove&&De.remove.call(f,Pe));z&&!Oe.length&&((!De.teardown||De.teardown.call(f,Pt,pt.handle)===!1)&&y.removeEvent(f,tt,pt.handle),delete X[tt])}y.isEmptyObject(X)&&Je.remove(f,"handle events")}},dispatch:function(f){var g,T,A,B,U,z,Y=new Array(arguments.length),X=y.event.fix(f),me=(Je.get(this,"events")||Object.create(null))[X.type]||[],Pe=y.event.special[X.type]||{};for(Y[0]=X,g=1;g<arguments.length;g++)Y[g]=arguments[g];if(X.delegateTarget=this,!(Pe.preDispatch&&Pe.preDispatch.call(this,X)===!1)){for(z=y.event.handlers.call(this,X,me),g=0;(B=z[g++])&&!X.isPropagationStopped();)for(X.currentTarget=B.elem,T=0;(U=B.handlers[T++])&&!X.isImmediatePropagationStopped();)(!X.rnamespace||U.namespace===!1||X.rnamespace.test(U.namespace))&&(X.handleObj=U,X.data=U.data,A=((y.event.special[U.origType]||{}).handle||U.handler).apply(B.elem,Y),A!==void 0&&(X.result=A)===!1&&(X.preventDefault(),X.stopPropagation()));return Pe.postDispatch&&Pe.postDispatch.call(this,X),X.result}},handlers:function(f,g){var T,A,B,U,z,Y=[],X=g.delegateCount,me=f.target;if(X&&me.nodeType&&!(f.type==="click"&&f.button>=1)){for(;me!==this;me=me.parentNode||this)if(me.nodeType===1&&!(f.type==="click"&&me.disabled===!0)){for(U=[],z={},T=0;T<X;T++)A=g[T],B=A.selector+" ",z[B]===void 0&&(z[B]=A.needsContext?y(B,this).index(me)>-1:y.find(B,this,null,[me]).length),z[B]&&U.push(A);U.length&&Y.push({elem:me,handlers:U})}}return me=this,X<g.length&&Y.push({elem:me,handlers:g.slice(X)}),Y},addProp:function(f,g){Object.defineProperty(y.Event.prototype,f,{enumerable:!0,configurable:!0,get:C(g)?function(){if(this.originalEvent)return g(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[f]},set:function(T){Object.defineProperty(this,f,{enumerable:!0,configurable:!0,writable:!0,value:T})}})},fix:function(f){return f[y.expando]?f:new y.Event(f)},special:{load:{noBubble:!0},click:{setup:function(f){var g=this||f;return Cr.test(g.type)&&g.click&&Z(g,"input")&&kt(g,"click",!0),!1},trigger:function(f){var g=this||f;return Cr.test(g.type)&&g.click&&Z(g,"input")&&kt(g,"click"),!0},_default:function(f){var g=f.target;return Cr.test(g.type)&&g.click&&Z(g,"input")&&Je.get(g,"click")||Z(g,"a")}},beforeunload:{postDispatch:function(f){f.result!==void 0&&f.originalEvent&&(f.originalEvent.returnValue=f.result)}}}};function kt(f,g,T){if(!T){Je.get(f,g)===void 0&&y.event.add(f,g,xa);return}Je.set(f,g,!1),y.event.add(f,g,{namespace:!1,handler:function(A){var B,U=Je.get(this,g);if(A.isTrigger&1&&this[g]){if(U)(y.event.special[g]||{}).delegateType&&A.stopPropagation();else if(U=i.call(arguments),Je.set(this,g,U),this[g](),B=Je.get(this,g),Je.set(this,g,!1),U!==B)return A.stopImmediatePropagation(),A.preventDefault(),B}else U&&(Je.set(this,g,y.event.trigger(U[0],U.slice(1),this)),A.stopPropagation(),A.isImmediatePropagationStopped=xa)}})}y.removeEvent=function(f,g,T){f.removeEventListener&&f.removeEventListener(g,T)},y.Event=function(f,g){if(!(this instanceof y.Event))return new y.Event(f,g);f&&f.type?(this.originalEvent=f,this.type=f.type,this.isDefaultPrevented=f.defaultPrevented||f.defaultPrevented===void 0&&f.returnValue===!1?xa:nt,this.target=f.target&&f.target.nodeType===3?f.target.parentNode:f.target,this.currentTarget=f.currentTarget,this.relatedTarget=f.relatedTarget):this.type=f,g&&y.extend(this,g),this.timeStamp=f&&f.timeStamp||Date.now(),this[y.expando]=!0},y.Event.prototype={constructor:y.Event,isDefaultPrevented:nt,isPropagationStopped:nt,isImmediatePropagationStopped:nt,isSimulated:!1,preventDefault:function(){var f=this.originalEvent;this.isDefaultPrevented=xa,f&&!this.isSimulated&&f.preventDefault()},stopPropagation:function(){var f=this.originalEvent;this.isPropagationStopped=xa,f&&!this.isSimulated&&f.stopPropagation()},stopImmediatePropagation:function(){var f=this.originalEvent;this.isImmediatePropagationStopped=xa,f&&!this.isSimulated&&f.stopImmediatePropagation(),this.stopPropagation()}},y.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},y.event.addProp),y.each({focus:"focusin",blur:"focusout"},function(f,g){function T(A){if(w.documentMode){var B=Je.get(this,"handle"),U=y.event.fix(A);U.type=A.type==="focusin"?"focus":"blur",U.isSimulated=!0,B(A),U.target===U.currentTarget&&B(U)}else y.event.simulate(g,A.target,y.event.fix(A))}y.event.special[f]={setup:function(){var A;if(kt(this,f,!0),w.documentMode)A=Je.get(this,g),A||this.addEventListener(g,T),Je.set(this,g,(A||0)+1);else return!1},trigger:function(){return kt(this,f),!0},teardown:function(){var A;if(w.documentMode)A=Je.get(this,g)-1,A?Je.set(this,g,A):(this.removeEventListener(g,T),Je.remove(this,g));else return!1},_default:function(A){return Je.get(A.target,f)},delegateType:g},y.event.special[g]={setup:function(){var A=this.ownerDocument||this.document||this,B=w.documentMode?this:A,U=Je.get(B,g);U||(w.documentMode?this.addEventListener(g,T):A.addEventListener(f,T,!0)),Je.set(B,g,(U||0)+1)},teardown:function(){var A=this.ownerDocument||this.document||this,B=w.documentMode?this:A,U=Je.get(B,g)-1;U?Je.set(B,g,U):(w.documentMode?this.removeEventListener(g,T):A.removeEventListener(f,T,!0),Je.remove(B,g))}}}),y.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(f,g){y.event.special[f]={delegateType:g,bindType:g,handle:function(T){var A,B=this,U=T.relatedTarget,z=T.handleObj;return(!U||U!==B&&!y.contains(B,U))&&(T.type=z.origType,A=z.handler.apply(this,arguments),T.type=g),A}}}),y.fn.extend({on:function(f,g,T,A){return Ur(this,f,g,T,A)},one:function(f,g,T,A){return Ur(this,f,g,T,A,1)},off:function(f,g,T){var A,B;if(f&&f.preventDefault&&f.handleObj)return A=f.handleObj,y(f.delegateTarget).off(A.namespace?A.origType+"."+A.namespace:A.origType,A.selector,A.handler),this;if(typeof f=="object"){for(B in f)this.off(B,g,f[B]);return this}return(g===!1||typeof g=="function")&&(T=g,g=void 0),T===!1&&(T=nt),this.each(function(){y.event.remove(this,f,T,g)})}});var fs=/<script|<style|<link/i,ji=/checked\s*(?:[^=]|=\s*.checked.)/i,ia=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function aa(f,g){return Z(f,"table")&&Z(g.nodeType!==11?g:g.firstChild,"tr")&&y(f).children("tbody")[0]||f}function qn(f){return f.type=(f.getAttribute("type")!==null)+"/"+f.type,f}function Zn(f){return(f.type||"").slice(0,5)==="true/"?f.type=f.type.slice(5):f.removeAttribute("type"),f}function Xn(f,g){var T,A,B,U,z,Y,X;if(g.nodeType===1){if(Je.hasData(f)&&(U=Je.get(f),X=U.events,X)){Je.remove(g,"handle events");for(B in X)for(T=0,A=X[B].length;T<A;T++)y.event.add(g,B,X[B][T])}qt.hasData(f)&&(z=qt.access(f),Y=y.extend({},z),qt.set(g,Y))}}function Fn(f,g){var T=g.nodeName.toLowerCase();T==="input"&&Cr.test(f.type)?g.checked=f.checked:(T==="input"||T==="textarea")&&(g.defaultValue=f.defaultValue)}function ti(f,g,T,A){g=a(g);var B,U,z,Y,X,me,Pe=0,De=f.length,Oe=De-1,tt=g[0],Pt=C(tt);if(Pt||De>1&&typeof tt=="string"&&!b.checkClone&&ji.test(tt))return f.each(function(It){var pt=f.eq(It);Pt&&(g[0]=tt.call(this,It,pt.html())),ti(pt,g,T,A)});if(De&&(B=ho(g,f[0].ownerDocument,!1,f,A),U=B.firstChild,B.childNodes.length===1&&(B=U),U||A)){for(z=y.map(Ar(B,"script"),qn),Y=z.length;Pe<De;Pe++)X=B,Pe!==Oe&&(X=y.clone(X,!0,!0),Y&&y.merge(z,Ar(X,"script"))),T.call(f[Pe],X,Pe);if(Y)for(me=z[z.length-1].ownerDocument,y.map(z,Zn),Pe=0;Pe<Y;Pe++)X=z[Pe],fo.test(X.type||"")&&!Je.access(X,"globalEval")&&y.contains(me,X)&&(X.src&&(X.type||"").toLowerCase()!=="module"?y._evalUrl&&!X.noModule&&y._evalUrl(X.src,{nonce:X.nonce||X.getAttribute("nonce")},me):S(X.textContent.replace(ia,""),X,me))}return f}function sa(f,g,T){for(var A,B=g?y.filter(g,f):f,U=0;(A=B[U])!=null;U++)!T&&A.nodeType===1&&y.cleanData(Ar(A)),A.parentNode&&(T&&yr(A)&&wa(Ar(A,"script")),A.parentNode.removeChild(A));return f}y.extend({htmlPrefilter:function(f){return f},clone:function(f,g,T){var A,B,U,z,Y=f.cloneNode(!0),X=yr(f);if(!b.noCloneChecked&&(f.nodeType===1||f.nodeType===11)&&!y.isXMLDoc(f))for(z=Ar(Y),U=Ar(f),A=0,B=U.length;A<B;A++)Fn(U[A],z[A]);if(g)if(T)for(U=U||Ar(f),z=z||Ar(Y),A=0,B=U.length;A<B;A++)Xn(U[A],z[A]);else Xn(f,Y);return z=Ar(Y,"script"),z.length>0&&wa(z,!X&&Ar(f,"script")),Y},cleanData:function(f){for(var g,T,A,B=y.event.special,U=0;(T=f[U])!==void 0;U++)if(gt(T)){if(g=T[Je.expando]){if(g.events)for(A in g.events)B[A]?y.event.remove(T,A):y.removeEvent(T,A,g.handle);T[Je.expando]=void 0}T[qt.expando]&&(T[qt.expando]=void 0)}}}),y.fn.extend({detach:function(f){return sa(this,f,!0)},remove:function(f){return sa(this,f)},text:function(f){return ye(this,function(g){return g===void 0?y.text(this):this.empty().each(function(){(this.nodeType===1||this.nodeType===11||this.nodeType===9)&&(this.textContent=g)})},null,f,arguments.length)},append:function(){return ti(this,arguments,function(f){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var g=aa(this,f);g.appendChild(f)}})},prepend:function(){return ti(this,arguments,function(f){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var g=aa(this,f);g.insertBefore(f,g.firstChild)}})},before:function(){return ti(this,arguments,function(f){this.parentNode&&this.parentNode.insertBefore(f,this)})},after:function(){return ti(this,arguments,function(f){this.parentNode&&this.parentNode.insertBefore(f,this.nextSibling)})},empty:function(){for(var f,g=0;(f=this[g])!=null;g++)f.nodeType===1&&(y.cleanData(Ar(f,!1)),f.textContent="");return this},clone:function(f,g){return f=f==null?!1:f,g=g==null?f:g,this.map(function(){return y.clone(this,f,g)})},html:function(f){return ye(this,function(g){var T=this[0]||{},A=0,B=this.length;if(g===void 0&&T.nodeType===1)return T.innerHTML;if(typeof g=="string"&&!fs.test(g)&&!ci[(ba.exec(g)||["",""])[1].toLowerCase()]){g=y.htmlPrefilter(g);try{for(;A<B;A++)T=this[A]||{},T.nodeType===1&&(y.cleanData(Ar(T,!1)),T.innerHTML=g);T=0}catch{}}T&&this.empty().append(g)},null,f,arguments.length)},replaceWith:function(){var f=[];return ti(this,arguments,function(g){var T=this.parentNode;y.inArray(this,f)<0&&(y.cleanData(Ar(this)),T&&T.replaceChild(g,this))},f)}}),y.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(f,g){y.fn[f]=function(T){for(var A,B=[],U=y(T),z=U.length-1,Y=0;Y<=z;Y++)A=Y===z?this:this.clone(!0),y(U[Y])[g](A),s.apply(B,A.get());return this.pushStack(B)}});var Ir=new RegExp("^("+bi+")(?!px)[a-z%]+$","i"),fi=/^--/,jr=function(f){var g=f.ownerDocument.defaultView;return(!g||!g.opener)&&(g=e),g.getComputedStyle(f)},Ma=function(f,g,T){var A,B,U={};for(B in g)U[B]=f.style[B],f.style[B]=g[B];A=T.call(f);for(B in g)f.style[B]=U[B];return A},Dt=new RegExp(Kn.join("|"),"i");(function(){function f(){if(me){X.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",me.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",kr.appendChild(X).appendChild(me);var Pe=e.getComputedStyle(me);T=Pe.top!=="1%",Y=g(Pe.marginLeft)===12,me.style.right="60%",U=g(Pe.right)===36,A=g(Pe.width)===36,me.style.position="absolute",B=g(me.offsetWidth/3)===12,kr.removeChild(X),me=null}}function g(Pe){return Math.round(parseFloat(Pe))}var T,A,B,U,z,Y,X=w.createElement("div"),me=w.createElement("div");me.style&&(me.style.backgroundClip="content-box",me.cloneNode(!0).style.backgroundClip="",b.clearCloneStyle=me.style.backgroundClip==="content-box",y.extend(b,{boxSizingReliable:function(){return f(),A},pixelBoxStyles:function(){return f(),U},pixelPosition:function(){return f(),T},reliableMarginLeft:function(){return f(),Y},scrollboxSize:function(){return f(),B},reliableTrDimensions:function(){var Pe,De,Oe,tt;return z==null&&(Pe=w.createElement("table"),De=w.createElement("tr"),Oe=w.createElement("div"),Pe.style.cssText="position:absolute;left:-11111px;border-collapse:separate",De.style.cssText="box-sizing:content-box;border:1px solid",De.style.height="1px",Oe.style.height="9px",Oe.style.display="block",kr.appendChild(Pe).appendChild(De).appendChild(Oe),tt=e.getComputedStyle(De),z=parseInt(tt.height,10)+parseInt(tt.borderTopWidth,10)+parseInt(tt.borderBottomWidth,10)===De.offsetHeight,kr.removeChild(Pe)),z}}))})();function pn(f,g,T){var A,B,U,z,Y=fi.test(g),X=f.style;return T=T||jr(f),T&&(z=T.getPropertyValue(g)||T[g],Y&&z&&(z=z.replace(re,"$1")||void 0),z===""&&!yr(f)&&(z=y.style(f,g)),!b.pixelBoxStyles()&&Ir.test(z)&&Dt.test(g)&&(A=X.width,B=X.minWidth,U=X.maxWidth,X.minWidth=X.maxWidth=X.width=z,z=T.width,X.width=A,X.minWidth=B,X.maxWidth=U)),z!==void 0?z+"":z}function _n(f,g){return{get:function(){if(f()){delete this.get;return}return(this.get=g).apply(this,arguments)}}}var Cn=["Webkit","Moz","ms"],hs=w.createElement("div").style,Ua={};function Ea(f){for(var g=f[0].toUpperCase()+f.slice(1),T=Cn.length;T--;)if(f=Cn[T]+g,f in hs)return f}function wi(f){var g=y.cssProps[f]||Ua[f];return g||(f in hs?f:Ua[f]=Ea(f)||f)}var Ki=/^(none|table(?!-c[ea]).+)/,fr={position:"absolute",visibility:"hidden",display:"block"},qr={letterSpacing:"0",fontWeight:"400"};function ke(f,g,T){var A=dn.exec(g);return A?Math.max(0,A[2]-(T||0))+(A[3]||"px"):g}function Ze(f,g,T,A,B,U){var z=g==="width"?1:0,Y=0,X=0,me=0;if(T===(A?"border":"content"))return 0;for(;z<4;z+=2)T==="margin"&&(me+=y.css(f,T+Kn[z],!0,B)),A?(T==="content"&&(X-=y.css(f,"padding"+Kn[z],!0,B)),T!=="margin"&&(X-=y.css(f,"border"+Kn[z]+"Width",!0,B))):(X+=y.css(f,"padding"+Kn[z],!0,B),T!=="padding"?X+=y.css(f,"border"+Kn[z]+"Width",!0,B):Y+=y.css(f,"border"+Kn[z]+"Width",!0,B));return!A&&U>=0&&(X+=Math.max(0,Math.ceil(f["offset"+g[0].toUpperCase()+g.slice(1)]-U-X-Y-.5))||0),X+me}function ht(f,g,T){var A=jr(f),B=!b.boxSizingReliable()||T,U=B&&y.css(f,"boxSizing",!1,A)==="border-box",z=U,Y=pn(f,g,A),X="offset"+g[0].toUpperCase()+g.slice(1);if(Ir.test(Y)){if(!T)return Y;Y="auto"}return(!b.boxSizingReliable()&&U||!b.reliableTrDimensions()&&Z(f,"tr")||Y==="auto"||!parseFloat(Y)&&y.css(f,"display",!1,A)==="inline")&&f.getClientRects().length&&(U=y.css(f,"boxSizing",!1,A)==="border-box",z=X in f,z&&(Y=f[X])),Y=parseFloat(Y)||0,Y+Ze(f,g,T||(U?"border":"content"),z,A,Y)+"px"}y.extend({cssHooks:{opacity:{get:function(f,g){if(g){var T=pn(f,"opacity");return T===""?"1":T}}}},cssNumber:{animationIterationCount:!0,aspectRatio:!0,borderImageSlice:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,scale:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeMiterlimit:!0,strokeOpacity:!0},cssProps:{},style:function(f,g,T,A){if(!(!f||f.nodeType===3||f.nodeType===8||!f.style)){var B,U,z,Y=Qe(g),X=fi.test(g),me=f.style;if(X||(g=wi(Y)),z=y.cssHooks[g]||y.cssHooks[Y],T!==void 0){if(U=typeof T,U==="string"&&(B=dn.exec(T))&&B[1]&&(T=_a(f,g,B),U="number"),T==null||T!==T)return;U==="number"&&!X&&(T+=B&&B[3]||(y.cssNumber[Y]?"":"px")),!b.clearCloneStyle&&T===""&&g.indexOf("background")===0&&(me[g]="inherit"),(!z||!("set"in z)||(T=z.set(f,T,A))!==void 0)&&(X?me.setProperty(g,T):me[g]=T)}else return z&&"get"in z&&(B=z.get(f,!1,A))!==void 0?B:me[g]}},css:function(f,g,T,A){var B,U,z,Y=Qe(g),X=fi.test(g);return X||(g=wi(Y)),z=y.cssHooks[g]||y.cssHooks[Y],z&&"get"in z&&(B=z.get(f,!0,T)),B===void 0&&(B=pn(f,g,A)),B==="normal"&&g in qr&&(B=qr[g]),T===""||T?(U=parseFloat(B),T===!0||isFinite(U)?U||0:B):B}}),y.each(["height","width"],function(f,g){y.cssHooks[g]={get:function(T,A,B){if(A)return Ki.test(y.css(T,"display"))&&(!T.getClientRects().length||!T.getBoundingClientRect().width)?Ma(T,fr,function(){return ht(T,g,B)}):ht(T,g,B)},set:function(T,A,B){var U,z=jr(T),Y=!b.scrollboxSize()&&z.position==="absolute",X=Y||B,me=X&&y.css(T,"boxSizing",!1,z)==="border-box",Pe=B?Ze(T,g,B,me,z):0;return me&&Y&&(Pe-=Math.ceil(T["offset"+g[0].toUpperCase()+g.slice(1)]-parseFloat(z[g])-Ze(T,g,"border",!1,z)-.5)),Pe&&(U=dn.exec(A))&&(U[3]||"px")!=="px"&&(T.style[g]=A,A=y.css(T,g)),ke(T,A,Pe)}}}),y.cssHooks.marginLeft=_n(b.reliableMarginLeft,function(f,g){if(g)return(parseFloat(pn(f,"marginLeft"))||f.getBoundingClientRect().left-Ma(f,{marginLeft:0},function(){return f.getBoundingClientRect().left}))+"px"}),y.each({margin:"",padding:"",border:"Width"},function(f,g){y.cssHooks[f+g]={expand:function(T){for(var A=0,B={},U=typeof T=="string"?T.split(" "):[T];A<4;A++)B[f+Kn[A]+g]=U[A]||U[A-2]||U[0];return B}},f!=="margin"&&(y.cssHooks[f+g].set=ke)}),y.fn.extend({css:function(f,g){return ye(this,function(T,A,B){var U,z,Y={},X=0;if(Array.isArray(A)){for(U=jr(T),z=A.length;X<z;X++)Y[A[X]]=y.css(T,A[X],!1,U);return Y}return B!==void 0?y.style(T,A,B):y.css(T,A)},f,g,arguments.length>1)}});function St(f,g,T,A,B){return new St.prototype.init(f,g,T,A,B)}y.Tween=St,St.prototype={constructor:St,init:function(f,g,T,A,B,U){this.elem=f,this.prop=T,this.easing=B||y.easing._default,this.options=g,this.start=this.now=this.cur(),this.end=A,this.unit=U||(y.cssNumber[T]?"":"px")},cur:function(){var f=St.propHooks[this.prop];return f&&f.get?f.get(this):St.propHooks._default.get(this)},run:function(f){var g,T=St.propHooks[this.prop];return this.options.duration?this.pos=g=y.easing[this.easing](f,this.options.duration*f,0,1,this.options.duration):this.pos=g=f,this.now=(this.end-this.start)*g+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),T&&T.set?T.set(this):St.propHooks._default.set(this),this}},St.prototype.init.prototype=St.prototype,St.propHooks={_default:{get:function(f){var g;return f.elem.nodeType!==1||f.elem[f.prop]!=null&&f.elem.style[f.prop]==null?f.elem[f.prop]:(g=y.css(f.elem,f.prop,""),!g||g==="auto"?0:g)},set:function(f){y.fx.step[f.prop]?y.fx.step[f.prop](f):f.elem.nodeType===1&&(y.cssHooks[f.prop]||f.elem.style[wi(f.prop)]!=null)?y.style(f.elem,f.prop,f.now+f.unit):f.elem[f.prop]=f.now}}},St.propHooks.scrollTop=St.propHooks.scrollLeft={set:function(f){f.elem.nodeType&&f.elem.parentNode&&(f.elem[f.prop]=f.now)}},y.easing={linear:function(f){return f},swing:function(f){return .5-Math.cos(f*Math.PI)/2},_default:"swing"},y.fx=St.prototype.init,y.fx.step={};var ar,Yn,Gt=/^(?:toggle|show|hide)$/,Jn=/queueHooks$/;function Ws(){Yn&&(w.hidden===!1&&e.requestAnimationFrame?e.requestAnimationFrame(Ws):e.setTimeout(Ws,y.fx.interval),y.fx.tick())}function ni(){return e.setTimeout(function(){ar=void 0}),ar=Date.now()}function Kr(f,g){var T,A=0,B={height:f};for(g=g?1:0;A<4;A+=2-g)T=Kn[A],B["margin"+T]=B["padding"+T]=f;return g&&(B.opacity=B.width=f),B}function ds(f,g,T){for(var A,B=(fn.tweeners[g]||[]).concat(fn.tweeners["*"]),U=0,z=B.length;U<z;U++)if(A=B[U].call(T,g,f))return A}function go(f,g,T){var A,B,U,z,Y,X,me,Pe,De="width"in g||"height"in g,Oe=this,tt={},Pt=f.style,It=f.nodeType&&cr(f),pt=Je.get(f,"fxshow");T.queue||(z=y._queueHooks(f,"fx"),z.unqueued==null&&(z.unqueued=0,Y=z.empty.fire,z.empty.fire=function(){z.unqueued||Y()}),z.unqueued++,Oe.always(function(){Oe.always(function(){z.unqueued--,y.queue(f,"fx").length||z.empty.fire()})}));for(A in g)if(B=g[A],Gt.test(B)){if(delete g[A],U=U||B==="toggle",B===(It?"hide":"show"))if(B==="show"&&pt&&pt[A]!==void 0)It=!0;else continue;tt[A]=pt&&pt[A]||y.style(f,A)}if(X=!y.isEmptyObject(g),!(!X&&y.isEmptyObject(tt))){De&&f.nodeType===1&&(T.overflow=[Pt.overflow,Pt.overflowX,Pt.overflowY],me=pt&&pt.display,me==null&&(me=Je.get(f,"display")),Pe=y.css(f,"display"),Pe==="none"&&(me?Pe=me:(Mr([f],!0),me=f.style.display||me,Pe=y.css(f,"display"),Mr([f]))),(Pe==="inline"||Pe==="inline-block"&&me!=null)&&y.css(f,"float")==="none"&&(X||(Oe.done(function(){Pt.display=me}),me==null&&(Pe=Pt.display,me=Pe==="none"?"":Pe)),Pt.display="inline-block")),T.overflow&&(Pt.overflow="hidden",Oe.always(function(){Pt.overflow=T.overflow[0],Pt.overflowX=T.overflow[1],Pt.overflowY=T.overflow[2]})),X=!1;for(A in tt)X||(pt?"hidden"in pt&&(It=pt.hidden):pt=Je.access(f,"fxshow",{display:me}),U&&(pt.hidden=!It),It&&Mr([f],!0),Oe.done(function(){It||Mr([f]),Je.remove(f,"fxshow");for(A in tt)y.style(f,A,tt[A])})),X=ds(It?pt[A]:0,A,Oe),A in pt||(pt[A]=X.start,It&&(X.end=X.start,X.start=0))}}function Ja(f,g){var T,A,B,U,z;for(T in f)if(A=Qe(T),B=g[A],U=f[T],Array.isArray(U)&&(B=U[1],U=f[T]=U[0]),T!==A&&(f[A]=U,delete f[T]),z=y.cssHooks[A],z&&"expand"in z){U=z.expand(U),delete f[A];for(T in U)T in f||(f[T]=U[T],g[T]=B)}else g[A]=B}function fn(f,g,T){var A,B,U=0,z=fn.prefilters.length,Y=y.Deferred().always(function(){delete X.elem}),X=function(){if(B)return!1;for(var De=ar||ni(),Oe=Math.max(0,me.startTime+me.duration-De),tt=Oe/me.duration||0,Pt=1-tt,It=0,pt=me.tweens.length;It<pt;It++)me.tweens[It].run(Pt);return Y.notifyWith(f,[me,Pt,Oe]),Pt<1&&pt?Oe:(pt||Y.notifyWith(f,[me,1,0]),Y.resolveWith(f,[me]),!1)},me=Y.promise({elem:f,props:y.extend({},g),opts:y.extend(!0,{specialEasing:{},easing:y.easing._default},T),originalProperties:g,originalOptions:T,startTime:ar||ni(),duration:T.duration,tweens:[],createTween:function(De,Oe){var tt=y.Tween(f,me.opts,De,Oe,me.opts.specialEasing[De]||me.opts.easing);return me.tweens.push(tt),tt},stop:function(De){var Oe=0,tt=De?me.tweens.length:0;if(B)return this;for(B=!0;Oe<tt;Oe++)me.tweens[Oe].run(1);return De?(Y.notifyWith(f,[me,1,0]),Y.resolveWith(f,[me,De])):Y.rejectWith(f,[me,De]),this}}),Pe=me.props;for(Ja(Pe,me.opts.specialEasing);U<z;U++)if(A=fn.prefilters[U].call(me,f,Pe,me.opts),A)return C(A.stop)&&(y._queueHooks(me.elem,me.opts.queue).stop=A.stop.bind(A)),A;return y.map(Pe,ds,me),C(me.opts.start)&&me.opts.start.call(f,me),me.progress(me.opts.progress).done(me.opts.done,me.opts.complete).fail(me.opts.fail).always(me.opts.always),y.fx.timer(y.extend(X,{elem:f,anim:me,queue:me.opts.queue})),me}y.Animation=y.extend(fn,{tweeners:{"*":[function(f,g){var T=this.createTween(f,g);return _a(T.elem,f,dn.exec(g),T),T}]},tweener:function(f,g){C(f)?(g=f,f=["*"]):f=f.match(Ge);for(var T,A=0,B=f.length;A<B;A++)T=f[A],fn.tweeners[T]=fn.tweeners[T]||[],fn.tweeners[T].unshift(g)},prefilters:[go],prefilter:function(f,g){g?fn.prefilters.unshift(f):fn.prefilters.push(f)}}),y.speed=function(f,g,T){var A=f&&typeof f=="object"?y.extend({},f):{complete:T||!T&&g||C(f)&&f,duration:f,easing:T&&g||g&&!C(g)&&g};return y.fx.off?A.duration=0:typeof A.duration!="number"&&(A.duration in y.fx.speeds?A.duration=y.fx.speeds[A.duration]:A.duration=y.fx.speeds._default),(A.queue==null||A.queue===!0)&&(A.queue="fx"),A.old=A.complete,A.complete=function(){C(A.old)&&A.old.call(this),A.queue&&y.dequeue(this,A.queue)},A},y.fn.extend({fadeTo:function(f,g,T,A){return this.filter(cr).css("opacity",0).show().end().animate({opacity:g},f,T,A)},animate:function(f,g,T,A){var B=y.isEmptyObject(f),U=y.speed(g,T,A),z=function(){var Y=fn(this,y.extend({},f),U);(B||Je.get(this,"finish"))&&Y.stop(!0)};return z.finish=z,B||U.queue===!1?this.each(z):this.queue(U.queue,z)},stop:function(f,g,T){var A=function(B){var U=B.stop;delete B.stop,U(T)};return typeof f!="string"&&(T=g,g=f,f=void 0),g&&this.queue(f||"fx",[]),this.each(function(){var B=!0,U=f!=null&&f+"queueHooks",z=y.timers,Y=Je.get(this);if(U)Y[U]&&Y[U].stop&&A(Y[U]);else for(U in Y)Y[U]&&Y[U].stop&&Jn.test(U)&&A(Y[U]);for(U=z.length;U--;)z[U].elem===this&&(f==null||z[U].queue===f)&&(z[U].anim.stop(T),B=!1,z.splice(U,1));(B||!T)&&y.dequeue(this,f)})},finish:function(f){return f!==!1&&(f=f||"fx"),this.each(function(){var g,T=Je.get(this),A=T[f+"queue"],B=T[f+"queueHooks"],U=y.timers,z=A?A.length:0;for(T.finish=!0,y.queue(this,f,[]),B&&B.stop&&B.stop.call(this,!0),g=U.length;g--;)U[g].elem===this&&U[g].queue===f&&(U[g].anim.stop(!0),U.splice(g,1));for(g=0;g<z;g++)A[g]&&A[g].finish&&A[g].finish.call(this);delete T.finish})}}),y.each(["toggle","show","hide"],function(f,g){var T=y.fn[g];y.fn[g]=function(A,B,U){return A==null||typeof A=="boolean"?T.apply(this,arguments):this.animate(Kr(g,!0),A,B,U)}}),y.each({slideDown:Kr("show"),slideUp:Kr("hide"),slideToggle:Kr("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(f,g){y.fn[f]=function(T,A,B){return this.animate(g,T,A,B)}}),y.timers=[],y.fx.tick=function(){var f,g=0,T=y.timers;for(ar=Date.now();g<T.length;g++)f=T[g],!f()&&T[g]===f&&T.splice(g--,1);T.length||y.fx.stop(),ar=void 0},y.fx.timer=function(f){y.timers.push(f),y.fx.start()},y.fx.interval=13,y.fx.start=function(){Yn||(Yn=!0,Ws())},y.fx.stop=function(){Yn=null},y.fx.speeds={slow:600,fast:200,_default:400},y.fn.delay=function(f,g){return f=y.fx&&y.fx.speeds[f]||f,g=g||"fx",this.queue(g,function(T,A){var B=e.setTimeout(T,f);A.stop=function(){e.clearTimeout(B)}})},function(){var f=w.createElement("input"),g=w.createElement("select"),T=g.appendChild(w.createElement("option"));f.type="checkbox",b.checkOn=f.value!=="",b.optSelected=T.selected,f=w.createElement("input"),f.value="t",f.type="radio",b.radioValue=f.value==="t"}();var hi,Wi=y.expr.attrHandle;y.fn.extend({attr:function(f,g){return ye(this,y.attr,f,g,arguments.length>1)},removeAttr:function(f){return this.each(function(){y.removeAttr(this,f)})}}),y.extend({attr:function(f,g,T){var A,B,U=f.nodeType;if(!(U===3||U===8||U===2)){if(typeof f.getAttribute>"u")return y.prop(f,g,T);if((U!==1||!y.isXMLDoc(f))&&(B=y.attrHooks[g.toLowerCase()]||(y.expr.match.bool.test(g)?hi:void 0)),T!==void 0){if(T===null){y.removeAttr(f,g);return}return B&&"set"in B&&(A=B.set(f,T,g))!==void 0?A:(f.setAttribute(g,T+""),T)}return B&&"get"in B&&(A=B.get(f,g))!==null?A:(A=y.find.attr(f,g),A==null?void 0:A)}},attrHooks:{type:{set:function(f,g){if(!b.radioValue&&g==="radio"&&Z(f,"input")){var T=f.value;return f.setAttribute("type",g),T&&(f.value=T),g}}}},removeAttr:function(f,g){var T,A=0,B=g&&g.match(Ge);if(B&&f.nodeType===1)for(;T=B[A++];)f.removeAttribute(T)}}),hi={set:function(f,g,T){return g===!1?y.removeAttr(f,T):f.setAttribute(T,T),T}},y.each(y.expr.match.bool.source.match(/\w+/g),function(f,g){var T=Wi[g]||y.find.attr;Wi[g]=function(A,B,U){var z,Y,X=B.toLowerCase();return U||(Y=Wi[X],Wi[X]=z,z=T(A,B,U)!=null?X:null,Wi[X]=Y),z}});var Gs=/^(?:input|select|textarea|button)$/i,mo=/^(?:a|area)$/i;y.fn.extend({prop:function(f,g){return ye(this,y.prop,f,g,arguments.length>1)},removeProp:function(f){return this.each(function(){delete this[y.propFix[f]||f]})}}),y.extend({prop:function(f,g,T){var A,B,U=f.nodeType;if(!(U===3||U===8||U===2))return(U!==1||!y.isXMLDoc(f))&&(g=y.propFix[g]||g,B=y.propHooks[g]),T!==void 0?B&&"set"in B&&(A=B.set(f,T,g))!==void 0?A:f[g]=T:B&&"get"in B&&(A=B.get(f,g))!==null?A:f[g]},propHooks:{tabIndex:{get:function(f){var g=y.find.attr(f,"tabindex");return g?parseInt(g,10):Gs.test(f.nodeName)||mo.test(f.nodeName)&&f.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),b.optSelected||(y.propHooks.selected={get:function(f){var g=f.parentNode;return g&&g.parentNode&&g.parentNode.selectedIndex,null},set:function(f){var g=f.parentNode;g&&(g.selectedIndex,g.parentNode&&g.parentNode.selectedIndex)}}),y.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){y.propFix[this.toLowerCase()]=this});function Oi(f){var g=f.match(Ge)||[];return g.join(" ")}function xi(f){return f.getAttribute&&f.getAttribute("class")||""}function ps(f){return Array.isArray(f)?f:typeof f=="string"?f.match(Ge)||[]:[]}y.fn.extend({addClass:function(f){var g,T,A,B,U,z;return C(f)?this.each(function(Y){y(this).addClass(f.call(this,Y,xi(this)))}):(g=ps(f),g.length?this.each(function(){if(A=xi(this),T=this.nodeType===1&&" "+Oi(A)+" ",T){for(U=0;U<g.length;U++)B=g[U],T.indexOf(" "+B+" ")<0&&(T+=B+" ");z=Oi(T),A!==z&&this.setAttribute("class",z)}}):this)},removeClass:function(f){var g,T,A,B,U,z;return C(f)?this.each(function(Y){y(this).removeClass(f.call(this,Y,xi(this)))}):arguments.length?(g=ps(f),g.length?this.each(function(){if(A=xi(this),T=this.nodeType===1&&" "+Oi(A)+" ",T){for(U=0;U<g.length;U++)for(B=g[U];T.indexOf(" "+B+" ")>-1;)T=T.replace(" "+B+" "," ");z=Oi(T),A!==z&&this.setAttribute("class",z)}}):this):this.attr("class","")},toggleClass:function(f,g){var T,A,B,U,z=typeof f,Y=z==="string"||Array.isArray(f);return C(f)?this.each(function(X){y(this).toggleClass(f.call(this,X,xi(this),g),g)}):typeof g=="boolean"&&Y?g?this.addClass(f):this.removeClass(f):(T=ps(f),this.each(function(){if(Y)for(U=y(this),B=0;B<T.length;B++)A=T[B],U.hasClass(A)?U.removeClass(A):U.addClass(A);else(f===void 0||z==="boolean")&&(A=xi(this),A&&Je.set(this,"__className__",A),this.setAttribute&&this.setAttribute("class",A||f===!1?"":Je.get(this,"__className__")||""))}))},hasClass:function(f){var g,T,A=0;for(g=" "+f+" ";T=this[A++];)if(T.nodeType===1&&(" "+Oi(xi(T))+" ").indexOf(g)>-1)return!0;return!1}});var gs=/\r/g;y.fn.extend({val:function(f){var g,T,A,B=this[0];return arguments.length?(A=C(f),this.each(function(U){var z;this.nodeType===1&&(A?z=f.call(this,U,y(this).val()):z=f,z==null?z="":typeof z=="number"?z+="":Array.isArray(z)&&(z=y.map(z,function(Y){return Y==null?"":Y+""})),g=y.valHooks[this.type]||y.valHooks[this.nodeName.toLowerCase()],(!g||!("set"in g)||g.set(this,z,"value")===void 0)&&(this.value=z))})):B?(g=y.valHooks[B.type]||y.valHooks[B.nodeName.toLowerCase()],g&&"get"in g&&(T=g.get(B,"value"))!==void 0?T:(T=B.value,typeof T=="string"?T.replace(gs,""):T==null?"":T)):void 0}}),y.extend({valHooks:{option:{get:function(f){var g=y.find.attr(f,"value");return g!=null?g:Oi(y.text(f))}},select:{get:function(f){var g,T,A,B=f.options,U=f.selectedIndex,z=f.type==="select-one",Y=z?null:[],X=z?U+1:B.length;for(U<0?A=X:A=z?U:0;A<X;A++)if(T=B[A],(T.selected||A===U)&&!T.disabled&&(!T.parentNode.disabled||!Z(T.parentNode,"optgroup"))){if(g=y(T).val(),z)return g;Y.push(g)}return Y},set:function(f,g){for(var T,A,B=f.options,U=y.makeArray(g),z=B.length;z--;)A=B[z],(A.selected=y.inArray(y.valHooks.option.get(A),U)>-1)&&(T=!0);return T||(f.selectedIndex=-1),U}}}}),y.each(["radio","checkbox"],function(){y.valHooks[this]={set:function(f,g){if(Array.isArray(g))return f.checked=y.inArray(y(f).val(),g)>-1}},b.checkOn||(y.valHooks[this].get=function(f){return f.getAttribute("value")===null?"on":f.value})});var es=e.location,Zs={guid:Date.now()},ms=/\?/;y.parseXML=function(f){var g,T;if(!f||typeof f!="string")return null;try{g=new e.DOMParser().parseFromString(f,"text/xml")}catch{}return T=g&&g.getElementsByTagName("parsererror")[0],(!g||T)&&y.error("Invalid XML: "+(T?y.map(T.childNodes,function(A){return A.textContent}).join(`
`):f)),g};var Qo=/^(?:focusinfocus|focusoutblur)$/,vs=function(f){f.stopPropagation()};y.extend(y.event,{trigger:function(f,g,T,A){var B,U,z,Y,X,me,Pe,De,Oe=[T||w],tt=h.call(f,"type")?f.type:f,Pt=h.call(f,"namespace")?f.namespace.split("."):[];if(U=De=z=T=T||w,!(T.nodeType===3||T.nodeType===8)&&!Qo.test(tt+y.event.triggered)&&(tt.indexOf(".")>-1&&(Pt=tt.split("."),tt=Pt.shift(),Pt.sort()),X=tt.indexOf(":")<0&&"on"+tt,f=f[y.expando]?f:new y.Event(tt,typeof f=="object"&&f),f.isTrigger=A?2:3,f.namespace=Pt.join("."),f.rnamespace=f.namespace?new RegExp("(^|\\.)"+Pt.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,f.result=void 0,f.target||(f.target=T),g=g==null?[f]:y.makeArray(g,[f]),Pe=y.event.special[tt]||{},!(!A&&Pe.trigger&&Pe.trigger.apply(T,g)===!1))){if(!A&&!Pe.noBubble&&!N(T)){for(Y=Pe.delegateType||tt,Qo.test(Y+tt)||(U=U.parentNode);U;U=U.parentNode)Oe.push(U),z=U;z===(T.ownerDocument||w)&&Oe.push(z.defaultView||z.parentWindow||e)}for(B=0;(U=Oe[B++])&&!f.isPropagationStopped();)De=U,f.type=B>1?Y:Pe.bindType||tt,me=(Je.get(U,"events")||Object.create(null))[f.type]&&Je.get(U,"handle"),me&&me.apply(U,g),me=X&&U[X],me&&me.apply&&gt(U)&&(f.result=me.apply(U,g),f.result===!1&&f.preventDefault());return f.type=tt,!A&&!f.isDefaultPrevented()&&(!Pe._default||Pe._default.apply(Oe.pop(),g)===!1)&&gt(T)&&X&&C(T[tt])&&!N(T)&&(z=T[X],z&&(T[X]=null),y.event.triggered=tt,f.isPropagationStopped()&&De.addEventListener(tt,vs),T[tt](),f.isPropagationStopped()&&De.removeEventListener(tt,vs),y.event.triggered=void 0,z&&(T[X]=z)),f.result}},simulate:function(f,g,T){var A=y.extend(new y.Event,T,{type:f,isSimulated:!0});y.event.trigger(A,null,g)}}),y.fn.extend({trigger:function(f,g){return this.each(function(){y.event.trigger(f,g,this)})},triggerHandler:function(f,g){var T=this[0];if(T)return y.event.trigger(f,g,T,!0)}});var $l=/\[\]$/,Xt=/\r?\n/g,oa=/^(?:submit|button|image|reset|file)$/i,Vn=/^(?:input|select|textarea|keygen)/i;function vo(f,g,T,A){var B;if(Array.isArray(g))y.each(g,function(U,z){T||$l.test(f)?A(f,z):vo(f+"["+(typeof z=="object"&&z!=null?U:"")+"]",z,T,A)});else if(!T&&_(g)==="object")for(B in g)vo(f+"["+B+"]",g[B],T,A);else A(f,g)}y.param=function(f,g){var T,A=[],B=function(U,z){var Y=C(z)?z():z;A[A.length]=encodeURIComponent(U)+"="+encodeURIComponent(Y==null?"":Y)};if(f==null)return"";if(Array.isArray(f)||f.jquery&&!y.isPlainObject(f))y.each(f,function(){B(this.name,this.value)});else for(T in f)vo(T,f[T],g,B);return A.join("&")},y.fn.extend({serialize:function(){return y.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var f=y.prop(this,"elements");return f?y.makeArray(f):this}).filter(function(){var f=this.type;return this.name&&!y(this).is(":disabled")&&Vn.test(this.nodeName)&&!oa.test(f)&&(this.checked||!Cr.test(f))}).map(function(f,g){var T=y(this).val();return T==null?null:Array.isArray(T)?y.map(T,function(A){return{name:g.name,value:A.replace(Xt,`\r
`)}}):{name:g.name,value:T.replace(Xt,`\r
`)}}).get()}});var Jo=/%20/g,eu=/#.*$/,yo=/([?&])_=[^&]*/,Ca=/^(.*?):[ \t]*([^\r\n]*)$/mg,_o=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,ts=/^(?:GET|HEAD)$/,Nr=/^\/\//,Sa={},ys={},tu="*/".concat("*"),nu=w.createElement("a");nu.href=es.href;function ru(f){return function(g,T){typeof g!="string"&&(T=g,g="*");var A,B=0,U=g.toLowerCase().match(Ge)||[];if(C(T))for(;A=U[B++];)A[0]==="+"?(A=A.slice(1)||"*",(f[A]=f[A]||[]).unshift(T)):(f[A]=f[A]||[]).push(T)}}function qa(f,g,T,A){var B={},U=f===ys;function z(Y){var X;return B[Y]=!0,y.each(f[Y]||[],function(me,Pe){var De=Pe(g,T,A);if(typeof De=="string"&&!U&&!B[De])return g.dataTypes.unshift(De),z(De),!1;if(U)return!(X=De)}),X}return z(g.dataTypes[0])||!B["*"]&&z("*")}function bo(f,g){var T,A,B=y.ajaxSettings.flatOptions||{};for(T in g)g[T]!==void 0&&((B[T]?f:A||(A={}))[T]=g[T]);return A&&y.extend(!0,f,A),f}function wo(f,g,T){for(var A,B,U,z,Y=f.contents,X=f.dataTypes;X[0]==="*";)X.shift(),A===void 0&&(A=f.mimeType||g.getResponseHeader("Content-Type"));if(A){for(B in Y)if(Y[B]&&Y[B].test(A)){X.unshift(B);break}}if(X[0]in T)U=X[0];else{for(B in T){if(!X[0]||f.converters[B+" "+X[0]]){U=B;break}z||(z=B)}U=U||z}if(U)return U!==X[0]&&X.unshift(U),T[U]}function vn(f,g,T,A){var B,U,z,Y,X,me={},Pe=f.dataTypes.slice();if(Pe[1])for(z in f.converters)me[z.toLowerCase()]=f.converters[z];for(U=Pe.shift();U;)if(f.responseFields[U]&&(T[f.responseFields[U]]=g),!X&&A&&f.dataFilter&&(g=f.dataFilter(g,f.dataType)),X=U,U=Pe.shift(),U){if(U==="*")U=X;else if(X!=="*"&&X!==U){if(z=me[X+" "+U]||me["* "+U],!z){for(B in me)if(Y=B.split(" "),Y[1]===U&&(z=me[X+" "+Y[0]]||me["* "+Y[0]],z)){z===!0?z=me[B]:me[B]!==!0&&(U=Y[0],Pe.unshift(Y[1]));break}}if(z!==!0)if(z&&f.throws)g=z(g);else try{g=z(g)}catch(De){return{state:"parsererror",error:z?De:"No conversion from "+X+" to "+U}}}}return{state:"success",data:g}}y.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:es.href,type:"GET",isLocal:_o.test(es.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":tu,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":y.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(f,g){return g?bo(bo(f,y.ajaxSettings),g):bo(y.ajaxSettings,f)},ajaxPrefilter:ru(Sa),ajaxTransport:ru(ys),ajax:function(f,g){typeof f=="object"&&(g=f,f=void 0),g=g||{};var T,A,B,U,z,Y,X,me,Pe,De,Oe=y.ajaxSetup({},g),tt=Oe.context||Oe,Pt=Oe.context&&(tt.nodeType||tt.jquery)?y(tt):y.event,It=y.Deferred(),pt=y.Callbacks("once memory"),Sn=Oe.statusCode||{},Ot={},bn={},ii="canceled",Qt={readyState:0,getResponseHeader:function(rn){var Tn;if(X){if(!U)for(U={};Tn=Ca.exec(B);)U[Tn[1].toLowerCase()+" "]=(U[Tn[1].toLowerCase()+" "]||[]).concat(Tn[2]);Tn=U[rn.toLowerCase()+" "]}return Tn==null?null:Tn.join(", ")},getAllResponseHeaders:function(){return X?B:null},setRequestHeader:function(rn,Tn){return X==null&&(rn=bn[rn.toLowerCase()]=bn[rn.toLowerCase()]||rn,Ot[rn]=Tn),this},overrideMimeType:function(rn){return X==null&&(Oe.mimeType=rn),this},statusCode:function(rn){var Tn;if(rn)if(X)Qt.always(rn[Qt.status]);else for(Tn in rn)Sn[Tn]=[Sn[Tn],rn[Tn]];return this},abort:function(rn){var Tn=rn||ii;return T&&T.abort(Tn),Wn(0,Tn),this}};if(It.promise(Qt),Oe.url=((f||Oe.url||es.href)+"").replace(Nr,es.protocol+"//"),Oe.type=g.method||g.type||Oe.method||Oe.type,Oe.dataTypes=(Oe.dataType||"*").toLowerCase().match(Ge)||[""],Oe.crossDomain==null){Y=w.createElement("a");try{Y.href=Oe.url,Y.href=Y.href,Oe.crossDomain=nu.protocol+"//"+nu.host!=Y.protocol+"//"+Y.host}catch{Oe.crossDomain=!0}}if(Oe.data&&Oe.processData&&typeof Oe.data!="string"&&(Oe.data=y.param(Oe.data,Oe.traditional)),qa(Sa,Oe,g,Qt),X)return Qt;me=y.event&&Oe.global,me&&y.active++===0&&y.event.trigger("ajaxStart"),Oe.type=Oe.type.toUpperCase(),Oe.hasContent=!ts.test(Oe.type),A=Oe.url.replace(eu,""),Oe.hasContent?Oe.data&&Oe.processData&&(Oe.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&(Oe.data=Oe.data.replace(Jo,"+")):(De=Oe.url.slice(A.length),Oe.data&&(Oe.processData||typeof Oe.data=="string")&&(A+=(ms.test(A)?"&":"?")+Oe.data,delete Oe.data),Oe.cache===!1&&(A=A.replace(yo,"$1"),De=(ms.test(A)?"&":"?")+"_="+Zs.guid+++De),Oe.url=A+De),Oe.ifModified&&(y.lastModified[A]&&Qt.setRequestHeader("If-Modified-Since",y.lastModified[A]),y.etag[A]&&Qt.setRequestHeader("If-None-Match",y.etag[A])),(Oe.data&&Oe.hasContent&&Oe.contentType!==!1||g.contentType)&&Qt.setRequestHeader("Content-Type",Oe.contentType),Qt.setRequestHeader("Accept",Oe.dataTypes[0]&&Oe.accepts[Oe.dataTypes[0]]?Oe.accepts[Oe.dataTypes[0]]+(Oe.dataTypes[0]!=="*"?", "+tu+"; q=0.01":""):Oe.accepts["*"]);for(Pe in Oe.headers)Qt.setRequestHeader(Pe,Oe.headers[Pe]);if(Oe.beforeSend&&(Oe.beforeSend.call(tt,Qt,Oe)===!1||X))return Qt.abort();if(ii="abort",pt.add(Oe.complete),Qt.done(Oe.success),Qt.fail(Oe.error),T=qa(ys,Oe,g,Qt),!T)Wn(-1,"No Transport");else{if(Qt.readyState=1,me&&Pt.trigger("ajaxSend",[Qt,Oe]),X)return Qt;Oe.async&&Oe.timeout>0&&(z=e.setTimeout(function(){Qt.abort("timeout")},Oe.timeout));try{X=!1,T.send(Ot,Wn)}catch(rn){if(X)throw rn;Wn(-1,rn)}}function Wn(rn,Tn,Rn,Gi){var sr,Bi,Ei,Wr,ua,Jt=Tn;X||(X=!0,z&&e.clearTimeout(z),T=void 0,B=Gi||"",Qt.readyState=rn>0?4:0,sr=rn>=200&&rn<300||rn===304,Rn&&(Wr=wo(Oe,Qt,Rn)),!sr&&y.inArray("script",Oe.dataTypes)>-1&&y.inArray("json",Oe.dataTypes)<0&&(Oe.converters["text script"]=function(){}),Wr=vn(Oe,Wr,Qt,sr),sr?(Oe.ifModified&&(ua=Qt.getResponseHeader("Last-Modified"),ua&&(y.lastModified[A]=ua),ua=Qt.getResponseHeader("etag"),ua&&(y.etag[A]=ua)),rn===204||Oe.type==="HEAD"?Jt="nocontent":rn===304?Jt="notmodified":(Jt=Wr.state,Bi=Wr.data,Ei=Wr.error,sr=!Ei)):(Ei=Jt,(rn||!Jt)&&(Jt="error",rn<0&&(rn=0))),Qt.status=rn,Qt.statusText=(Tn||Jt)+"",sr?It.resolveWith(tt,[Bi,Jt,Qt]):It.rejectWith(tt,[Qt,Jt,Ei]),Qt.statusCode(Sn),Sn=void 0,me&&Pt.trigger(sr?"ajaxSuccess":"ajaxError",[Qt,Oe,sr?Bi:Ei]),pt.fireWith(tt,[Qt,Jt]),me&&(Pt.trigger("ajaxComplete",[Qt,Oe]),--y.active||y.event.trigger("ajaxStop")))}return Qt},getJSON:function(f,g,T){return y.get(f,g,T,"json")},getScript:function(f,g){return y.get(f,void 0,g,"script")}}),y.each(["get","post"],function(f,g){y[g]=function(T,A,B,U){return C(A)&&(U=U||B,B=A,A=void 0),y.ajax(y.extend({url:T,type:g,dataType:U,data:A,success:B},y.isPlainObject(T)&&T))}}),y.ajaxPrefilter(function(f){var g;for(g in f.headers)g.toLowerCase()==="content-type"&&(f.contentType=f.headers[g]||"")}),y._evalUrl=function(f,g,T){return y.ajax({url:f,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(A){y.globalEval(A,g,T)}})},y.fn.extend({wrapAll:function(f){var g;return this[0]&&(C(f)&&(f=f.call(this[0])),g=y(f,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&g.insertBefore(this[0]),g.map(function(){for(var T=this;T.firstElementChild;)T=T.firstElementChild;return T}).append(this)),this},wrapInner:function(f){return C(f)?this.each(function(g){y(this).wrapInner(f.call(this,g))}):this.each(function(){var g=y(this),T=g.contents();T.length?T.wrapAll(f):g.append(f)})},wrap:function(f){var g=C(f);return this.each(function(T){y(this).wrapAll(g?f.call(this,T):f)})},unwrap:function(f){return this.parent(f).not("body").each(function(){y(this).replaceWith(this.childNodes)}),this}}),y.expr.pseudos.hidden=function(f){return!y.expr.pseudos.visible(f)},y.expr.pseudos.visible=function(f){return!!(f.offsetWidth||f.offsetHeight||f.getClientRects().length)},y.ajaxSettings.xhr=function(){try{return new e.XMLHttpRequest}catch{}};var jl={0:200,1223:204},ri=y.ajaxSettings.xhr();b.cors=!!ri&&"withCredentials"in ri,b.ajax=ri=!!ri,y.ajaxTransport(function(f){var g,T;if(b.cors||ri&&!f.crossDomain)return{send:function(A,B){var U,z=f.xhr();if(z.open(f.type,f.url,f.async,f.username,f.password),f.xhrFields)for(U in f.xhrFields)z[U]=f.xhrFields[U];f.mimeType&&z.overrideMimeType&&z.overrideMimeType(f.mimeType),!f.crossDomain&&!A["X-Requested-With"]&&(A["X-Requested-With"]="XMLHttpRequest");for(U in A)z.setRequestHeader(U,A[U]);g=function(Y){return function(){g&&(g=T=z.onload=z.onerror=z.onabort=z.ontimeout=z.onreadystatechange=null,Y==="abort"?z.abort():Y==="error"?typeof z.status!="number"?B(0,"error"):B(z.status,z.statusText):B(jl[z.status]||z.status,z.statusText,(z.responseType||"text")!=="text"||typeof z.responseText!="string"?{binary:z.response}:{text:z.responseText},z.getAllResponseHeaders()))}},z.onload=g(),T=z.onerror=z.ontimeout=g("error"),z.onabort!==void 0?z.onabort=T:z.onreadystatechange=function(){z.readyState===4&&e.setTimeout(function(){g&&T()})},g=g("abort");try{z.send(f.hasContent&&f.data||null)}catch(Y){if(g)throw Y}},abort:function(){g&&g()}}}),y.ajaxPrefilter(function(f){f.crossDomain&&(f.contents.script=!1)}),y.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(f){return y.globalEval(f),f}}}),y.ajaxPrefilter("script",function(f){f.cache===void 0&&(f.cache=!1),f.crossDomain&&(f.type="GET")}),y.ajaxTransport("script",function(f){if(f.crossDomain||f.scriptAttrs){var g,T;return{send:function(A,B){g=y("<script>").attr(f.scriptAttrs||{}).prop({charset:f.scriptCharset,src:f.url}).on("load error",T=function(U){g.remove(),T=null,U&&B(U.type==="error"?404:200,U.type)}),w.head.appendChild(g[0])},abort:function(){T&&T()}}}});var m=[],k=/(=)\?(?=&|$)|\?\?/;y.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var f=m.pop()||y.expando+"_"+Zs.guid++;return this[f]=!0,f}}),y.ajaxPrefilter("json jsonp",function(f,g,T){var A,B,U,z=f.jsonp!==!1&&(k.test(f.url)?"url":typeof f.data=="string"&&(f.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&k.test(f.data)&&"data");if(z||f.dataTypes[0]==="jsonp")return A=f.jsonpCallback=C(f.jsonpCallback)?f.jsonpCallback():f.jsonpCallback,z?f[z]=f[z].replace(k,"$1"+A):f.jsonp!==!1&&(f.url+=(ms.test(f.url)?"&":"?")+f.jsonp+"="+A),f.converters["script json"]=function(){return U||y.error(A+" was not called"),U[0]},f.dataTypes[0]="json",B=e[A],e[A]=function(){U=arguments},T.always(function(){B===void 0?y(e).removeProp(A):e[A]=B,f[A]&&(f.jsonpCallback=g.jsonpCallback,m.push(A)),U&&C(B)&&B(U[0]),U=B=void 0}),"script"}),b.createHTMLDocument=function(){var f=w.implementation.createHTMLDocument("").body;return f.innerHTML="<form></form><form></form>",f.childNodes.length===2}(),y.parseHTML=function(f,g,T){if(typeof f!="string")return[];typeof g=="boolean"&&(T=g,g=!1);var A,B,U;return g||(b.createHTMLDocument?(g=w.implementation.createHTMLDocument(""),A=g.createElement("base"),A.href=w.location.href,g.head.appendChild(A)):g=w),B=fe.exec(f),U=!T&&[],B?[g.createElement(B[1])]:(B=ho([f],g,U),U&&U.length&&y(U).remove(),y.merge([],B.childNodes))},y.fn.load=function(f,g,T){var A,B,U,z=this,Y=f.indexOf(" ");return Y>-1&&(A=Oi(f.slice(Y)),f=f.slice(0,Y)),C(g)?(T=g,g=void 0):g&&typeof g=="object"&&(B="POST"),z.length>0&&y.ajax({url:f,type:B||"GET",dataType:"html",data:g}).done(function(X){U=arguments,z.html(A?y("<div>").append(y.parseHTML(X)).find(A):X)}).always(T&&function(X,me){z.each(function(){T.apply(this,U||[X.responseText,me,X])})}),this},y.expr.pseudos.animated=function(f){return y.grep(y.timers,function(g){return f===g.elem}).length},y.offset={setOffset:function(f,g,T){var A,B,U,z,Y,X,me,Pe=y.css(f,"position"),De=y(f),Oe={};Pe==="static"&&(f.style.position="relative"),Y=De.offset(),U=y.css(f,"top"),X=y.css(f,"left"),me=(Pe==="absolute"||Pe==="fixed")&&(U+X).indexOf("auto")>-1,me?(A=De.position(),z=A.top,B=A.left):(z=parseFloat(U)||0,B=parseFloat(X)||0),C(g)&&(g=g.call(f,T,y.extend({},Y))),g.top!=null&&(Oe.top=g.top-Y.top+z),g.left!=null&&(Oe.left=g.left-Y.left+B),"using"in g?g.using.call(f,Oe):De.css(Oe)}},y.fn.extend({offset:function(f){if(arguments.length)return f===void 0?this:this.each(function(B){y.offset.setOffset(this,f,B)});var g,T,A=this[0];if(A)return A.getClientRects().length?(g=A.getBoundingClientRect(),T=A.ownerDocument.defaultView,{top:g.top+T.pageYOffset,left:g.left+T.pageXOffset}):{top:0,left:0}},position:function(){if(this[0]){var f,g,T,A=this[0],B={top:0,left:0};if(y.css(A,"position")==="fixed")g=A.getBoundingClientRect();else{for(g=this.offset(),T=A.ownerDocument,f=A.offsetParent||T.documentElement;f&&(f===T.body||f===T.documentElement)&&y.css(f,"position")==="static";)f=f.parentNode;f&&f!==A&&f.nodeType===1&&(B=y(f).offset(),B.top+=y.css(f,"borderTopWidth",!0),B.left+=y.css(f,"borderLeftWidth",!0))}return{top:g.top-B.top-y.css(A,"marginTop",!0),left:g.left-B.left-y.css(A,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var f=this.offsetParent;f&&y.css(f,"position")==="static";)f=f.offsetParent;return f||kr})}}),y.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(f,g){var T=g==="pageYOffset";y.fn[f]=function(A){return ye(this,function(B,U,z){var Y;if(N(B)?Y=B:B.nodeType===9&&(Y=B.defaultView),z===void 0)return Y?Y[g]:B[U];Y?Y.scrollTo(T?Y.pageXOffset:z,T?z:Y.pageYOffset):B[U]=z},f,A,arguments.length)}}),y.each(["top","left"],function(f,g){y.cssHooks[g]=_n(b.pixelPosition,function(T,A){if(A)return A=pn(T,g),Ir.test(A)?y(T).position()[g]+"px":A})}),y.each({Height:"height",Width:"width"},function(f,g){y.each({padding:"inner"+f,content:g,"":"outer"+f},function(T,A){y.fn[A]=function(B,U){var z=arguments.length&&(T||typeof B!="boolean"),Y=T||(B===!0||U===!0?"margin":"border");return ye(this,function(X,me,Pe){var De;return N(X)?A.indexOf("outer")===0?X["inner"+f]:X.document.documentElement["client"+f]:X.nodeType===9?(De=X.documentElement,Math.max(X.body["scroll"+f],De["scroll"+f],X.body["offset"+f],De["offset"+f],De["client"+f])):Pe===void 0?y.css(X,me,Y):y.style(X,me,Pe,Y)},g,z?B:void 0,z)}})}),y.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(f,g){y.fn[g]=function(T){return this.on(g,T)}}),y.fn.extend({bind:function(f,g,T){return this.on(f,null,g,T)},unbind:function(f,g){return this.off(f,null,g)},delegate:function(f,g,T,A){return this.on(g,f,T,A)},undelegate:function(f,g,T){return arguments.length===1?this.off(f,"**"):this.off(g,f||"**",T)},hover:function(f,g){return this.on("mouseenter",f).on("mouseleave",g||f)}}),y.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(f,g){y.fn[g]=function(T,A){return arguments.length>0?this.on(g,null,T,A):this.trigger(g)}});var R=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;y.proxy=function(f,g){var T,A,B;if(typeof g=="string"&&(T=f[g],g=f,f=T),!!C(f))return A=i.call(arguments,2),B=function(){return f.apply(g||this,A.concat(i.call(arguments)))},B.guid=f.guid=f.guid||y.guid++,B},y.holdReady=function(f){f?y.readyWait++:y.ready(!0)},y.isArray=Array.isArray,y.parseJSON=JSON.parse,y.nodeName=Z,y.isFunction=C,y.isWindow=N,y.camelCase=Qe,y.type=_,y.now=Date.now,y.isNumeric=function(f){var g=y.type(f);return(g==="number"||g==="string")&&!isNaN(f-parseFloat(f))},y.trim=function(f){return f==null?"":(f+"").replace(R,"$1")},typeof define=="function"&&define.amd&&define("jquery",[],function(){return y});var M=e.jQuery,K=e.$;return y.noConflict=function(f){return e.$===y&&(e.$=K),f&&e.jQuery===y&&(e.jQuery=M),y},typeof t>"u"&&(e.jQuery=e.$=y),y})});var Kb=$e((ao,jb)=>{var $b=typeof self<"u"?self:ao,ih=function(){function e(){this.fetch=!1,this.DOMException=$b.DOMException}return e.prototype=$b,new e}();(function(e){var t=function(n){var r={searchParams:"URLSearchParams"in e,iterable:"Symbol"in e&&"iterator"in Symbol,blob:"FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in e,arrayBuffer:"ArrayBuffer"in e};function i(q){return q&&DataView.prototype.isPrototypeOf(q)}if(r.arrayBuffer)var a=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],s=ArrayBuffer.isView||function(q){return q&&a.indexOf(Object.prototype.toString.call(q))>-1};function o(q){if(typeof q!="string"&&(q=String(q)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(q))throw new TypeError("Invalid character in header field name");return q.toLowerCase()}function l(q){return typeof q!="string"&&(q=String(q)),q}function c(q){var W={next:function(){var O=q.shift();return{done:O===void 0,value:O}}};return r.iterable&&(W[Symbol.iterator]=function(){return W}),W}function h(q){this.map={},q instanceof h?q.forEach(function(W,O){this.append(O,W)},this):Array.isArray(q)?q.forEach(function(W){this.append(W[0],W[1])},this):q&&Object.getOwnPropertyNames(q).forEach(function(W){this.append(W,q[W])},this)}h.prototype.append=function(q,W){q=o(q),W=l(W);var O=this.map[q];this.map[q]=O?O+", "+W:W},h.prototype.delete=function(q){delete this.map[o(q)]},h.prototype.get=function(q){return q=o(q),this.has(q)?this.map[q]:null},h.prototype.has=function(q){return this.map.hasOwnProperty(o(q))},h.prototype.set=function(q,W){this.map[o(q)]=l(W)},h.prototype.forEach=function(q,W){for(var O in this.map)this.map.hasOwnProperty(O)&&q.call(W,this.map[O],O,this)},h.prototype.keys=function(){var q=[];return this.forEach(function(W,O){q.push(O)}),c(q)},h.prototype.values=function(){var q=[];return this.forEach(function(W){q.push(W)}),c(q)},h.prototype.entries=function(){var q=[];return this.forEach(function(W,O){q.push([O,W])}),c(q)},r.iterable&&(h.prototype[Symbol.iterator]=h.prototype.entries);function p(q){if(q.bodyUsed)return Promise.reject(new TypeError("Already read"));q.bodyUsed=!0}function E(q){return new Promise(function(W,O){q.onload=function(){W(q.result)},q.onerror=function(){O(q.error)}})}function b(q){var W=new FileReader,O=E(W);return W.readAsArrayBuffer(q),O}function C(q){var W=new FileReader,O=E(W);return W.readAsText(q),O}function N(q){for(var W=new Uint8Array(q),O=new Array(W.length),re=0;re<W.length;re++)O[re]=String.fromCharCode(W[re]);return O.join("")}function w(q){if(q.slice)return q.slice(0);var W=new Uint8Array(q.byteLength);return W.set(new Uint8Array(q)),W.buffer}function I(){return this.bodyUsed=!1,this._initBody=function(q){this._bodyInit=q,q?typeof q=="string"?this._bodyText=q:r.blob&&Blob.prototype.isPrototypeOf(q)?this._bodyBlob=q:r.formData&&FormData.prototype.isPrototypeOf(q)?this._bodyFormData=q:r.searchParams&&URLSearchParams.prototype.isPrototypeOf(q)?this._bodyText=q.toString():r.arrayBuffer&&r.blob&&i(q)?(this._bodyArrayBuffer=w(q.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):r.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(q)||s(q))?this._bodyArrayBuffer=w(q):this._bodyText=q=Object.prototype.toString.call(q):this._bodyText="",this.headers.get("content-type")||(typeof q=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):r.searchParams&&URLSearchParams.prototype.isPrototypeOf(q)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},r.blob&&(this.blob=function(){var q=p(this);if(q)return q;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?p(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(b)}),this.text=function(){var q=p(this);if(q)return q;if(this._bodyBlob)return C(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(N(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},r.formData&&(this.formData=function(){return this.text().then(v)}),this.json=function(){return this.text().then(JSON.parse)},this}var S=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function _(q){var W=q.toUpperCase();return S.indexOf(W)>-1?W:q}function P(q,W){W=W||{};var O=W.body;if(q instanceof P){if(q.bodyUsed)throw new TypeError("Already read");this.url=q.url,this.credentials=q.credentials,W.headers||(this.headers=new h(q.headers)),this.method=q.method,this.mode=q.mode,this.signal=q.signal,!O&&q._bodyInit!=null&&(O=q._bodyInit,q.bodyUsed=!0)}else this.url=String(q);if(this.credentials=W.credentials||this.credentials||"same-origin",(W.headers||!this.headers)&&(this.headers=new h(W.headers)),this.method=_(W.method||this.method||"GET"),this.mode=W.mode||this.mode||null,this.signal=W.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&O)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(O)}P.prototype.clone=function(){return new P(this,{body:this._bodyInit})};function v(q){var W=new FormData;return q.trim().split("&").forEach(function(O){if(O){var re=O.split("="),le=re.shift().replace(/\+/g," "),ie=re.join("=").replace(/\+/g," ");W.append(decodeURIComponent(le),decodeURIComponent(ie))}}),W}function y(q){var W=new h,O=q.replace(/\r?\n[\t ]+/g," ");return O.split(/\r?\n/).forEach(function(re){var le=re.split(":"),ie=le.shift().trim();if(ie){var oe=le.join(":").trim();W.append(ie,oe)}}),W}I.call(P.prototype);function $(q,W){W||(W={}),this.type="default",this.status=W.status===void 0?200:W.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in W?W.statusText:"OK",this.headers=new h(W.headers),this.url=W.url||"",this._initBody(q)}I.call($.prototype),$.prototype.clone=function(){return new $(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new h(this.headers),url:this.url})},$.error=function(){var q=new $(null,{status:0,statusText:""});return q.type="error",q};var Z=[301,302,303,307,308];$.redirect=function(q,W){if(Z.indexOf(W)===-1)throw new RangeError("Invalid status code");return new $(null,{status:W,headers:{location:q}})},n.DOMException=e.DOMException;try{new n.DOMException}catch{n.DOMException=function(W,O){this.message=W,this.name=O;var re=Error(W);this.stack=re.stack},n.DOMException.prototype=Object.create(Error.prototype),n.DOMException.prototype.constructor=n.DOMException}function ce(q,W){return new Promise(function(O,re){var le=new P(q,W);if(le.signal&&le.signal.aborted)return re(new n.DOMException("Aborted","AbortError"));var ie=new XMLHttpRequest;function oe(){ie.abort()}ie.onload=function(){var Q={status:ie.status,statusText:ie.statusText,headers:y(ie.getAllResponseHeaders()||"")};Q.url="responseURL"in ie?ie.responseURL:Q.headers.get("X-Request-URL");var j="response"in ie?ie.response:ie.responseText;O(new $(j,Q))},ie.onerror=function(){re(new TypeError("Network request failed"))},ie.ontimeout=function(){re(new TypeError("Network request failed"))},ie.onabort=function(){re(new n.DOMException("Aborted","AbortError"))},ie.open(le.method,le.url,!0),le.credentials==="include"?ie.withCredentials=!0:le.credentials==="omit"&&(ie.withCredentials=!1),"responseType"in ie&&r.blob&&(ie.responseType="blob"),le.headers.forEach(function(Q,j){ie.setRequestHeader(j,Q)}),le.signal&&(le.signal.addEventListener("abort",oe),ie.onreadystatechange=function(){ie.readyState===4&&le.signal.removeEventListener("abort",oe)}),ie.send(typeof le._bodyInit>"u"?null:le._bodyInit)})}return ce.polyfill=!0,e.fetch||(e.fetch=ce,e.Headers=h,e.Request=P,e.Response=$),n.Headers=h,n.Request=P,n.Response=$,n.fetch=ce,Object.defineProperty(n,"__esModule",{value:!0}),n}({})})(ih);ih.fetch.ponyfill=!0;delete ih.fetch.polyfill;var pl=ih;ao=pl.fetch;ao.default=pl.fetch;ao.fetch=pl.fetch;ao.Headers=pl.Headers;ao.Request=pl.Request;ao.Response=pl.Response;jb.exports=ao});var Gb=$e((Wp,Wb)=>{var ah;typeof fetch=="function"&&(typeof global<"u"&&global.fetch?ah=global.fetch:typeof window<"u"&&window.fetch?ah=window.fetch:ah=fetch);typeof wr<"u"&&(typeof window>"u"||typeof window.document>"u")&&(mc=ah||Kb(),mc.default&&(mc=mc.default),Wp.default=mc,Wb.exports=Wp.default);var mc});var y1=$e((v1,rg)=>{(function(e){if(typeof v1=="object"&&typeof rg<"u")rg.exports=e();else if(typeof define=="function"&&define.amd)define([],e);else{var t;typeof window<"u"?t=window:typeof global<"u"?t=global:typeof self<"u"?t=self:t=this,t.vex=e()}})(function(){var e,t,n;return function(){function r(i,a,s){function o(h,p){if(!a[h]){if(!i[h]){var E=typeof wr=="function"&&wr;if(!p&&E)return E(h,!0);if(l)return l(h,!0);var b=new Error("Cannot find module '"+h+"'");throw b.code="MODULE_NOT_FOUND",b}var C=a[h]={exports:{}};i[h][0].call(C.exports,function(N){var w=i[h][1][N];return o(w||N)},C,C.exports,r,i,a,s)}return a[h].exports}for(var l=typeof wr=="function"&&wr,c=0;c<s.length;c++)o(s[c]);return o}return r}()({1:[function(r,i,a){"document"in window.self&&((!("classList"in document.createElement("_"))||document.createElementNS&&!("classList"in document.createElementNS("http://www.w3.org/2000/svg","g")))&&function(s){"use strict";if("Element"in s){var o="classList",l="prototype",c=s.Element[l],h=Object,p=String[l].trim||function(){return this.replace(/^\s+|\s+$/g,"")},E=Array[l].indexOf||function(_){for(var P=0,v=this.length;P<v;P++)if(P in this&&this[P]===_)return P;return-1},b=function(_,P){this.name=_,this.code=DOMException[_],this.message=P},C=function(_,P){if(P==="")throw new b("SYNTAX_ERR","An invalid or illegal string was specified");if(/\s/.test(P))throw new b("INVALID_CHARACTER_ERR","String contains an invalid character");return E.call(_,P)},N=function(_){for(var P=p.call(_.getAttribute("class")||""),v=P?P.split(/\s+/):[],y=0,$=v.length;y<$;y++)this.push(v[y]);this._updateClassName=function(){_.setAttribute("class",this.toString())}},w=N[l]=[],I=function(){return new N(this)};if(b[l]=Error[l],w.item=function(_){return this[_]||null},w.contains=function(_){return _+="",C(this,_)!==-1},w.add=function(){var _=arguments,P=0,v=_.length,y,$=!1;do y=_[P]+"",C(this,y)===-1&&(this.push(y),$=!0);while(++P<v);$&&this._updateClassName()},w.remove=function(){var _=arguments,P=0,v=_.length,y,$=!1,Z;do for(y=_[P]+"",Z=C(this,y);Z!==-1;)this.splice(Z,1),$=!0,Z=C(this,y);while(++P<v);$&&this._updateClassName()},w.toggle=function(_,P){_+="";var v=this.contains(_),y=v?P!==!0&&"remove":P!==!1&&"add";return y&&this[y](_),P===!0||P===!1?P:!v},w.toString=function(){return this.join(" ")},h.defineProperty){var S={get:I,enumerable:!0,configurable:!0};try{h.defineProperty(c,o,S)}catch(_){(_.number===void 0||_.number===-2146823252)&&(S.enumerable=!1,h.defineProperty(c,o,S))}}else h[l].__defineGetter__&&c.__defineGetter__(o,I)}}(window.self),function(){"use strict";var s=document.createElement("_");if(s.classList.add("c1","c2"),!s.classList.contains("c2")){var o=function(c){var h=DOMTokenList.prototype[c];DOMTokenList.prototype[c]=function(p){var E,b=arguments.length;for(E=0;E<b;E++)p=arguments[E],h.call(this,p)}};o("add"),o("remove")}if(s.classList.toggle("c3",!1),s.classList.contains("c3")){var l=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(c,h){return 1 in arguments&&!this.contains(c)==!h?h:l.call(this,c)}}s=null}())},{}],2:[function(r,i,a){i.exports=c;var s=!1,o;typeof document<"u"&&(o=document.createElement("div"),o.innerHTML='  <link/><table></table><a href="/a">a</a><input type="checkbox"/>',s=!o.getElementsByTagName("link").length,o=void 0);var l={legend:[1,"<fieldset>","</fieldset>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],_default:s?[1,"X<div>","</div>"]:[0,"",""]};l.td=l.th=[3,"<table><tbody><tr>","</tr></tbody></table>"],l.option=l.optgroup=[1,'<select multiple="multiple">',"</select>"],l.thead=l.tbody=l.colgroup=l.caption=l.tfoot=[1,"<table>","</table>"],l.polyline=l.ellipse=l.polygon=l.circle=l.text=l.line=l.path=l.rect=l.g=[1,'<svg xmlns="http://www.w3.org/2000/svg" version="1.1">',"</svg>"];function c(h,p){if(typeof h!="string")throw new TypeError("String expected");p||(p=document);var E=/<([\w:]+)/.exec(h);if(!E)return p.createTextNode(h);h=h.replace(/^\s+|\s+$/g,"");var b=E[1];if(b=="body"){var S=p.createElement("html");return S.innerHTML=h,S.removeChild(S.lastChild)}var C=l[b]||l._default,N=C[0],w=C[1],I=C[2],S=p.createElement("div");for(S.innerHTML=w+h+I;N--;)S=S.lastChild;if(S.firstChild==S.lastChild)return S.removeChild(S.firstChild);for(var _=p.createDocumentFragment();S.firstChild;)_.appendChild(S.removeChild(S.firstChild));return _}},{}],3:[function(r,i,a){"use strict";function s(l,c){if(l==null)throw new TypeError("Cannot convert first argument to object");for(var h=Object(l),p=1;p<arguments.length;p++){var E=arguments[p];if(E!=null)for(var b=Object.keys(Object(E)),C=0,N=b.length;C<N;C++){var w=b[C],I=Object.getOwnPropertyDescriptor(E,w);I!==void 0&&I.enumerable&&(h[w]=E[w])}}return h}function o(){Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:s})}i.exports={assign:s,polyfill:o}},{}],4:[function(r,i,a){r("classlist-polyfill"),r("es6-object-assign").polyfill();var s=r("domify"),o=function(w){if(typeof w<"u"){var I=document.createElement("div");return I.appendChild(document.createTextNode(w)),I.innerHTML}else return""},l=function(w,I){if(!(typeof I!="string"||I.length===0))for(var S=I.split(" "),_=0;_<S.length;_++){var P=S[_];P.length&&w.classList.add(P)}},c=function(){var w=document.createElement("div"),I={animation:"animationend",WebkitAnimation:"webkitAnimationEnd",MozAnimation:"animationend",OAnimation:"oanimationend",msAnimation:"MSAnimationEnd"};for(var S in I)if(w.style[S]!==void 0)return I[S];return!1}(),h={vex:"vex",content:"vex-content",overlay:"vex-overlay",close:"vex-close",closing:"vex-closing",open:"vex-open"},p={},E=1,b=!1,C={open:function(w){var I=function(q){console.warn('The "'+q+'" property is deprecated in vex 3. Use CSS classes and the appropriate "ClassName" options, instead.'),console.warn("See http://github.hubspot.com/vex/api/advanced/#options")};w.css&&I("css"),w.overlayCSS&&I("overlayCSS"),w.contentCSS&&I("contentCSS"),w.closeCSS&&I("closeCSS");var S={};S.id=E++,p[S.id]=S,S.isOpen=!0,S.close=function(){if(!this.isOpen)return!0;var q=this.options;if(b&&!q.escapeButtonCloses)return!1;var W=function(){return q.beforeClose?q.beforeClose.call(this):!0}.bind(this)();if(W===!1)return!1;this.isOpen=!1;var O=window.getComputedStyle(this.contentEl);function re(oe){return O.getPropertyValue(oe+"animation-name")!=="none"&&O.getPropertyValue(oe+"animation-duration")!=="0s"}var le=re("")||re("-webkit-")||re("-moz-")||re("-o-"),ie=function oe(){this.rootEl.parentNode&&(this.rootEl.removeEventListener(c,oe),this.overlayEl.removeEventListener(c,oe),delete p[this.id],this.rootEl.parentNode.removeChild(this.rootEl),this.bodyEl.removeChild(this.overlayEl),q.afterClose&&q.afterClose.call(this),Object.keys(p).length===0&&document.body.classList.remove(h.open))}.bind(this);return c&&le?(this.rootEl.addEventListener(c,ie),this.overlayEl.addEventListener(c,ie),this.rootEl.classList.add(h.closing),this.overlayEl.classList.add(h.closing)):ie(),!0},typeof w=="string"&&(w={content:w}),w.unsafeContent&&!w.content?w.content=w.unsafeContent:w.content&&(w.content=o(w.content));var _=S.options=Object.assign({},C.defaultOptions,w),P=S.bodyEl=document.getElementsByTagName("body")[0],v=S.rootEl=document.createElement("div");v.classList.add(h.vex),l(v,_.className);var y=S.overlayEl=document.createElement("div");y.classList.add(h.overlay),l(y,_.overlayClassName),_.overlayClosesOnClick&&v.addEventListener("click",function(q){q.target===v&&S.close()}),P.appendChild(y);var $=S.contentEl=document.createElement("div");if($.classList.add(h.content),l($,_.contentClassName),$.appendChild(_.content instanceof window.Node?_.content:s(_.content)),v.appendChild($),_.showCloseButton){var Z=S.closeEl=document.createElement("div");Z.classList.add(h.close),l(Z,_.closeClassName),Z.addEventListener("click",S.close.bind(S)),$.appendChild(Z)}return document.querySelector(_.appendLocation).appendChild(v),_.afterOpen&&_.afterOpen.call(S),document.body.classList.add(h.open),S},close:function(w){var I;if(w.id)I=w.id;else if(typeof w=="string")I=w;else throw new TypeError("close requires a vex object or id string");return p[I]?p[I].close():!1},closeTop:function(){var w=Object.keys(p);return w.length?p[w[w.length-1]].close():!1},closeAll:function(){for(var w in p)this.close(w);return!0},getAll:function(){return p},getById:function(w){return p[w]}};window.addEventListener("keyup",function(w){w.keyCode===27&&(b=!0,C.closeTop(),b=!1)}),window.addEventListener("popstate",function(){C.defaultOptions.closeAllOnPopState&&C.closeAll()}),C.defaultOptions={content:"",showCloseButton:!0,escapeButtonCloses:!0,overlayClosesOnClick:!0,appendLocation:"body",className:"",overlayClassName:"",contentClassName:"",closeClassName:"",closeAllOnPopState:!0},Object.defineProperty(C,"_escapeHtml",{configurable:!1,enumerable:!1,writable:!1,value:o}),C.registerPlugin=function(w,I){var S=w(C),_=I||S.name;if(C[_])throw new Error("Plugin "+I+" is already registered.");C[_]=S},i.exports=C},{"classlist-polyfill":1,domify:2,"es6-object-assign":3}]},{},[4])(4)})});var xc=$e((_1,fh)=>{(function(e,t){"use strict";typeof fh=="object"&&typeof fh.exports=="object"?fh.exports=e.document?t(e,!0):function(n){if(!n.document)throw new Error("jQuery requires a window with a document");return t(n)}:t(e)})(typeof window<"u"?window:_1,function(e,t){"use strict";var n=[],r=Object.getPrototypeOf,i=n.slice,a=n.flat?function(m){return n.flat.call(m)}:function(m){return n.concat.apply([],m)},s=n.push,o=n.indexOf,l={},c=l.toString,h=l.hasOwnProperty,p=h.toString,E=p.call(Object),b={},C=function(k){return typeof k=="function"&&typeof k.nodeType!="number"&&typeof k.item!="function"},N=function(k){return k!=null&&k===k.window},w=e.document,I={type:!0,src:!0,nonce:!0,noModule:!0};function S(m,k,R){R=R||w;var M,K,f=R.createElement("script");if(f.text=m,k)for(M in I)K=k[M]||k.getAttribute&&k.getAttribute(M),K&&f.setAttribute(M,K);R.head.appendChild(f).parentNode.removeChild(f)}function _(m){return m==null?m+"":typeof m=="object"||typeof m=="function"?l[c.call(m)]||"object":typeof m}var P="3.6.3",v=function(m,k){return new v.fn.init(m,k)};v.fn=v.prototype={jquery:P,constructor:v,length:0,toArray:function(){return i.call(this)},get:function(m){return m==null?i.call(this):m<0?this[m+this.length]:this[m]},pushStack:function(m){var k=v.merge(this.constructor(),m);return k.prevObject=this,k},each:function(m){return v.each(this,m)},map:function(m){return this.pushStack(v.map(this,function(k,R){return m.call(k,R,k)}))},slice:function(){return this.pushStack(i.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(v.grep(this,function(m,k){return(k+1)%2}))},odd:function(){return this.pushStack(v.grep(this,function(m,k){return k%2}))},eq:function(m){var k=this.length,R=+m+(m<0?k:0);return this.pushStack(R>=0&&R<k?[this[R]]:[])},end:function(){return this.prevObject||this.constructor()},push:s,sort:n.sort,splice:n.splice},v.extend=v.fn.extend=function(){var m,k,R,M,K,f,g=arguments[0]||{},T=1,A=arguments.length,B=!1;for(typeof g=="boolean"&&(B=g,g=arguments[T]||{},T++),typeof g!="object"&&!C(g)&&(g={}),T===A&&(g=this,T--);T<A;T++)if((m=arguments[T])!=null)for(k in m)M=m[k],!(k==="__proto__"||g===M)&&(B&&M&&(v.isPlainObject(M)||(K=Array.isArray(M)))?(R=g[k],K&&!Array.isArray(R)?f=[]:!K&&!v.isPlainObject(R)?f={}:f=R,K=!1,g[k]=v.extend(B,f,M)):M!==void 0&&(g[k]=M));return g},v.extend({expando:"jQuery"+(P+Math.random()).replace(/\D/g,""),isReady:!0,error:function(m){throw new Error(m)},noop:function(){},isPlainObject:function(m){var k,R;return!m||c.call(m)!=="[object Object]"?!1:(k=r(m),k?(R=h.call(k,"constructor")&&k.constructor,typeof R=="function"&&p.call(R)===E):!0)},isEmptyObject:function(m){var k;for(k in m)return!1;return!0},globalEval:function(m,k,R){S(m,{nonce:k&&k.nonce},R)},each:function(m,k){var R,M=0;if(y(m))for(R=m.length;M<R&&k.call(m[M],M,m[M])!==!1;M++);else for(M in m)if(k.call(m[M],M,m[M])===!1)break;return m},makeArray:function(m,k){var R=k||[];return m!=null&&(y(Object(m))?v.merge(R,typeof m=="string"?[m]:m):s.call(R,m)),R},inArray:function(m,k,R){return k==null?-1:o.call(k,m,R)},merge:function(m,k){for(var R=+k.length,M=0,K=m.length;M<R;M++)m[K++]=k[M];return m.length=K,m},grep:function(m,k,R){for(var M,K=[],f=0,g=m.length,T=!R;f<g;f++)M=!k(m[f],f),M!==T&&K.push(m[f]);return K},map:function(m,k,R){var M,K,f=0,g=[];if(y(m))for(M=m.length;f<M;f++)K=k(m[f],f,R),K!=null&&g.push(K);else for(f in m)K=k(m[f],f,R),K!=null&&g.push(K);return a(g)},guid:1,support:b}),typeof Symbol=="function"&&(v.fn[Symbol.iterator]=n[Symbol.iterator]),v.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(m,k){l["[object "+k+"]"]=k.toLowerCase()});function y(m){var k=!!m&&"length"in m&&m.length,R=_(m);return C(m)||N(m)?!1:R==="array"||k===0||typeof k=="number"&&k>0&&k-1 in m}var $=function(m){var k,R,M,K,f,g,T,A,B,U,z,Y,X,me,Pe,De,Oe,tt,Pt,It="sizzle"+1*new Date,pt=m.document,Sn=0,Ot=0,bn=ns(),ii=ns(),Qt=ns(),Wn=ns(),rn=function(se,ge){return se===ge&&(z=!0),0},Tn={}.hasOwnProperty,Rn=[],Gi=Rn.pop,sr=Rn.push,Bi=Rn.push,Ei=Rn.slice,Wr=function(se,ge){for(var we=0,je=se.length;we<je;we++)if(se[we]===ge)return we;return-1},ua="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",Jt="[\\x20\\t\\r\\n\\f]",la="(?:\\\\[\\da-fA-F]{1,6}"+Jt+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",ca="\\["+Jt+"*("+la+")(?:"+Jt+"*([*^$|!~]?=)"+Jt+`*(?:'((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)"|(`+la+"))|)"+Jt+"*\\]",hr=":("+la+`)(?:\\((('((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)")|((?:\\\\.|[^\\\\()[\\]]|`+ca+")*)|.*)\\)|)",_s=new RegExp(Jt+"+","g"),xo=new RegExp("^"+Jt+"+|((?:^|[^\\\\])(?:\\\\.)*)"+Jt+"+$","g"),Ta=new RegExp("^"+Jt+"*,"+Jt+"*"),Nn=new RegExp("^"+Jt+"*([>+~]|"+Jt+")"+Jt+"*"),La=new RegExp(Jt+"|>"),Zi=new RegExp(hr),fa=new RegExp("^"+la+"$"),Xs={ID:new RegExp("^#("+la+")"),CLASS:new RegExp("^\\.("+la+")"),TAG:new RegExp("^("+la+"|[*])"),ATTR:new RegExp("^"+ca),PSEUDO:new RegExp("^"+hr),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+Jt+"*(even|odd|(([+-]|)(\\d*)n|)"+Jt+"*(?:([+-]|)"+Jt+"*(\\d+)|))"+Jt+"*\\)|)","i"),bool:new RegExp("^(?:"+ua+")$","i"),needsContext:new RegExp("^"+Jt+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+Jt+"*((?:-\\d)?\\d*)"+Jt+"*\\)|)(?=[^-]|$)","i")},Eo=/HTML$/i,zu=/^(?:input|select|textarea|button)$/i,di=/^h\d$/i,ha=/^[^{]+\{\s*\[native \w/,Fa=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,bs=/[+~]/,Ci=new RegExp("\\\\[\\da-fA-F]{1,6}"+Jt+"?|\\\\([^\\r\\n\\f])","g"),_r=function(se,ge){var we="0x"+se.slice(1)-65536;return ge||(we<0?String.fromCharCode(we+65536):String.fromCharCode(we>>10|55296,we&1023|56320))},Ys=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,ka=function(se,ge){return ge?se==="\0"?"\uFFFD":se.slice(0,-1)+"\\"+se.charCodeAt(se.length-1).toString(16)+" ":"\\"+se},Hu=function(){Y()},Mi=_t(function(se){return se.disabled===!0&&se.nodeName.toLowerCase()==="fieldset"},{dir:"parentNode",next:"legend"});try{Bi.apply(Rn=Ei.call(pt.childNodes),pt.childNodes),Rn[pt.childNodes.length].nodeType}catch{Bi={apply:Rn.length?function(ge,we){sr.apply(ge,Ei.call(we))}:function(ge,we){for(var je=ge.length,Ne=0;ge[je++]=we[Ne++];);ge.length=je-1}}}function Ln(se,ge,we,je){var Ne,Ke,it,mt,bt,Vt,Nt,zt=ge&&ge.ownerDocument,un=ge?ge.nodeType:9;if(we=we||[],typeof se!="string"||!se||un!==1&&un!==9&&un!==11)return we;if(!je&&(Y(ge),ge=ge||X,Pe)){if(un!==11&&(bt=Fa.exec(se)))if(Ne=bt[1]){if(un===9)if(it=ge.getElementById(Ne)){if(it.id===Ne)return we.push(it),we}else return we;else if(zt&&(it=zt.getElementById(Ne))&&Pt(ge,it)&&it.id===Ne)return we.push(it),we}else{if(bt[2])return Bi.apply(we,ge.getElementsByTagName(se)),we;if((Ne=bt[3])&&R.getElementsByClassName&&ge.getElementsByClassName)return Bi.apply(we,ge.getElementsByClassName(Ne)),we}if(R.qsa&&!Wn[se+" "]&&(!De||!De.test(se))&&(un!==1||ge.nodeName.toLowerCase()!=="object")){if(Nt=se,zt=ge,un===1&&(La.test(se)||Nn.test(se))){for(zt=bs.test(se)&&dt(ge.parentNode)||ge,(zt!==ge||!R.scope)&&((mt=ge.getAttribute("id"))?mt=mt.replace(Ys,ka):ge.setAttribute("id",mt=It)),Vt=g(se),Ke=Vt.length;Ke--;)Vt[Ke]=(mt?"#"+mt:":scope")+" "+At(Vt[Ke]);Nt=Vt.join(",")}try{if(R.cssSupportsSelector&&!CSS.supports("selector(:is("+Nt+"))"))throw new Error;return Bi.apply(we,zt.querySelectorAll(Nt)),we}catch{Wn(se,!0)}finally{mt===It&&ge.removeAttribute("id")}}}return A(se.replace(xo,"$1"),ge,we,je)}function ns(){var se=[];function ge(we,je){return se.push(we+" ")>M.cacheLength&&delete ge[se.shift()],ge[we+" "]=je}return ge}function Si(se){return se[It]=!0,se}function Fr(se){var ge=X.createElement("fieldset");try{return!!se(ge)}catch{return!1}finally{ge.parentNode&&ge.parentNode.removeChild(ge),ge=null}}function ws(se,ge){for(var we=se.split("|"),je=we.length;je--;)M.attrHandle[we[je]]=ge}function he(se,ge){var we=ge&&se,je=we&&se.nodeType===1&&ge.nodeType===1&&se.sourceIndex-ge.sourceIndex;if(je)return je;if(we){for(;we=we.nextSibling;)if(we===ge)return-1}return se?1:-1}function xe(se){return function(ge){var we=ge.nodeName.toLowerCase();return we==="input"&&ge.type===se}}function Ue(se){return function(ge){var we=ge.nodeName.toLowerCase();return(we==="input"||we==="button")&&ge.type===se}}function ze(se){return function(ge){return"form"in ge?ge.parentNode&&ge.disabled===!1?"label"in ge?"label"in ge.parentNode?ge.parentNode.disabled===se:ge.disabled===se:ge.isDisabled===se||ge.isDisabled!==!se&&Mi(ge)===se:ge.disabled===se:"label"in ge?ge.disabled===se:!1}}function We(se){return Si(function(ge){return ge=+ge,Si(function(we,je){for(var Ne,Ke=se([],we.length,ge),it=Ke.length;it--;)we[Ne=Ke[it]]&&(we[Ne]=!(je[Ne]=we[Ne]))})})}function dt(se){return se&&typeof se.getElementsByTagName<"u"&&se}R=Ln.support={},f=Ln.isXML=function(se){var ge=se&&se.namespaceURI,we=se&&(se.ownerDocument||se).documentElement;return!Eo.test(ge||we&&we.nodeName||"HTML")},Y=Ln.setDocument=function(se){var ge,we,je=se?se.ownerDocument||se:pt;return je==X||je.nodeType!==9||!je.documentElement||(X=je,me=X.documentElement,Pe=!f(X),pt!=X&&(we=X.defaultView)&&we.top!==we&&(we.addEventListener?we.addEventListener("unload",Hu,!1):we.attachEvent&&we.attachEvent("onunload",Hu)),R.scope=Fr(function(Ne){return me.appendChild(Ne).appendChild(X.createElement("div")),typeof Ne.querySelectorAll<"u"&&!Ne.querySelectorAll(":scope fieldset div").length}),R.cssSupportsSelector=Fr(function(){return CSS.supports("selector(*)")&&X.querySelectorAll(":is(:jqfake)")&&!CSS.supports("selector(:is(*,:jqfake))")}),R.attributes=Fr(function(Ne){return Ne.className="i",!Ne.getAttribute("className")}),R.getElementsByTagName=Fr(function(Ne){return Ne.appendChild(X.createComment("")),!Ne.getElementsByTagName("*").length}),R.getElementsByClassName=ha.test(X.getElementsByClassName),R.getById=Fr(function(Ne){return me.appendChild(Ne).id=It,!X.getElementsByName||!X.getElementsByName(It).length}),R.getById?(M.filter.ID=function(Ne){var Ke=Ne.replace(Ci,_r);return function(it){return it.getAttribute("id")===Ke}},M.find.ID=function(Ne,Ke){if(typeof Ke.getElementById<"u"&&Pe){var it=Ke.getElementById(Ne);return it?[it]:[]}}):(M.filter.ID=function(Ne){var Ke=Ne.replace(Ci,_r);return function(it){var mt=typeof it.getAttributeNode<"u"&&it.getAttributeNode("id");return mt&&mt.value===Ke}},M.find.ID=function(Ne,Ke){if(typeof Ke.getElementById<"u"&&Pe){var it,mt,bt,Vt=Ke.getElementById(Ne);if(Vt){if(it=Vt.getAttributeNode("id"),it&&it.value===Ne)return[Vt];for(bt=Ke.getElementsByName(Ne),mt=0;Vt=bt[mt++];)if(it=Vt.getAttributeNode("id"),it&&it.value===Ne)return[Vt]}return[]}}),M.find.TAG=R.getElementsByTagName?function(Ne,Ke){if(typeof Ke.getElementsByTagName<"u")return Ke.getElementsByTagName(Ne);if(R.qsa)return Ke.querySelectorAll(Ne)}:function(Ne,Ke){var it,mt=[],bt=0,Vt=Ke.getElementsByTagName(Ne);if(Ne==="*"){for(;it=Vt[bt++];)it.nodeType===1&&mt.push(it);return mt}return Vt},M.find.CLASS=R.getElementsByClassName&&function(Ne,Ke){if(typeof Ke.getElementsByClassName<"u"&&Pe)return Ke.getElementsByClassName(Ne)},Oe=[],De=[],(R.qsa=ha.test(X.querySelectorAll))&&(Fr(function(Ne){var Ke;me.appendChild(Ne).innerHTML="<a id='"+It+"'></a><select id='"+It+"-\r\\' msallowcapture=''><option selected=''></option></select>",Ne.querySelectorAll("[msallowcapture^='']").length&&De.push("[*^$]="+Jt+`*(?:''|"")`),Ne.querySelectorAll("[selected]").length||De.push("\\["+Jt+"*(?:value|"+ua+")"),Ne.querySelectorAll("[id~="+It+"-]").length||De.push("~="),Ke=X.createElement("input"),Ke.setAttribute("name",""),Ne.appendChild(Ke),Ne.querySelectorAll("[name='']").length||De.push("\\["+Jt+"*name"+Jt+"*="+Jt+`*(?:''|"")`),Ne.querySelectorAll(":checked").length||De.push(":checked"),Ne.querySelectorAll("a#"+It+"+*").length||De.push(".#.+[+~]"),Ne.querySelectorAll("\\\f"),De.push("[\\r\\n\\f]")}),Fr(function(Ne){Ne.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var Ke=X.createElement("input");Ke.setAttribute("type","hidden"),Ne.appendChild(Ke).setAttribute("name","D"),Ne.querySelectorAll("[name=d]").length&&De.push("name"+Jt+"*[*^$|!~]?="),Ne.querySelectorAll(":enabled").length!==2&&De.push(":enabled",":disabled"),me.appendChild(Ne).disabled=!0,Ne.querySelectorAll(":disabled").length!==2&&De.push(":enabled",":disabled"),Ne.querySelectorAll("*,:x"),De.push(",.*:")})),(R.matchesSelector=ha.test(tt=me.matches||me.webkitMatchesSelector||me.mozMatchesSelector||me.oMatchesSelector||me.msMatchesSelector))&&Fr(function(Ne){R.disconnectedMatch=tt.call(Ne,"*"),tt.call(Ne,"[s!='']:x"),Oe.push("!=",hr)}),R.cssSupportsSelector||De.push(":has"),De=De.length&&new RegExp(De.join("|")),Oe=Oe.length&&new RegExp(Oe.join("|")),ge=ha.test(me.compareDocumentPosition),Pt=ge||ha.test(me.contains)?function(Ne,Ke){var it=Ne.nodeType===9&&Ne.documentElement||Ne,mt=Ke&&Ke.parentNode;return Ne===mt||!!(mt&&mt.nodeType===1&&(it.contains?it.contains(mt):Ne.compareDocumentPosition&&Ne.compareDocumentPosition(mt)&16))}:function(Ne,Ke){if(Ke){for(;Ke=Ke.parentNode;)if(Ke===Ne)return!0}return!1},rn=ge?function(Ne,Ke){if(Ne===Ke)return z=!0,0;var it=!Ne.compareDocumentPosition-!Ke.compareDocumentPosition;return it||(it=(Ne.ownerDocument||Ne)==(Ke.ownerDocument||Ke)?Ne.compareDocumentPosition(Ke):1,it&1||!R.sortDetached&&Ke.compareDocumentPosition(Ne)===it?Ne==X||Ne.ownerDocument==pt&&Pt(pt,Ne)?-1:Ke==X||Ke.ownerDocument==pt&&Pt(pt,Ke)?1:U?Wr(U,Ne)-Wr(U,Ke):0:it&4?-1:1)}:function(Ne,Ke){if(Ne===Ke)return z=!0,0;var it,mt=0,bt=Ne.parentNode,Vt=Ke.parentNode,Nt=[Ne],zt=[Ke];if(!bt||!Vt)return Ne==X?-1:Ke==X?1:bt?-1:Vt?1:U?Wr(U,Ne)-Wr(U,Ke):0;if(bt===Vt)return he(Ne,Ke);for(it=Ne;it=it.parentNode;)Nt.unshift(it);for(it=Ke;it=it.parentNode;)zt.unshift(it);for(;Nt[mt]===zt[mt];)mt++;return mt?he(Nt[mt],zt[mt]):Nt[mt]==pt?-1:zt[mt]==pt?1:0}),X},Ln.matches=function(se,ge){return Ln(se,null,null,ge)},Ln.matchesSelector=function(se,ge){if(Y(se),R.matchesSelector&&Pe&&!Wn[ge+" "]&&(!Oe||!Oe.test(ge))&&(!De||!De.test(ge)))try{var we=tt.call(se,ge);if(we||R.disconnectedMatch||se.document&&se.document.nodeType!==11)return we}catch{Wn(ge,!0)}return Ln(ge,X,null,[se]).length>0},Ln.contains=function(se,ge){return(se.ownerDocument||se)!=X&&Y(se),Pt(se,ge)},Ln.attr=function(se,ge){(se.ownerDocument||se)!=X&&Y(se);var we=M.attrHandle[ge.toLowerCase()],je=we&&Tn.call(M.attrHandle,ge.toLowerCase())?we(se,ge,!Pe):void 0;return je!==void 0?je:R.attributes||!Pe?se.getAttribute(ge):(je=se.getAttributeNode(ge))&&je.specified?je.value:null},Ln.escape=function(se){return(se+"").replace(Ys,ka)},Ln.error=function(se){throw new Error("Syntax error, unrecognized expression: "+se)},Ln.uniqueSort=function(se){var ge,we=[],je=0,Ne=0;if(z=!R.detectDuplicates,U=!R.sortStable&&se.slice(0),se.sort(rn),z){for(;ge=se[Ne++];)ge===se[Ne]&&(je=we.push(Ne));for(;je--;)se.splice(we[je],1)}return U=null,se},K=Ln.getText=function(se){var ge,we="",je=0,Ne=se.nodeType;if(Ne){if(Ne===1||Ne===9||Ne===11){if(typeof se.textContent=="string")return se.textContent;for(se=se.firstChild;se;se=se.nextSibling)we+=K(se)}else if(Ne===3||Ne===4)return se.nodeValue}else for(;ge=se[je++];)we+=K(ge);return we},M=Ln.selectors={cacheLength:50,createPseudo:Si,match:Xs,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(se){return se[1]=se[1].replace(Ci,_r),se[3]=(se[3]||se[4]||se[5]||"").replace(Ci,_r),se[2]==="~="&&(se[3]=" "+se[3]+" "),se.slice(0,4)},CHILD:function(se){return se[1]=se[1].toLowerCase(),se[1].slice(0,3)==="nth"?(se[3]||Ln.error(se[0]),se[4]=+(se[4]?se[5]+(se[6]||1):2*(se[3]==="even"||se[3]==="odd")),se[5]=+(se[7]+se[8]||se[3]==="odd")):se[3]&&Ln.error(se[0]),se},PSEUDO:function(se){var ge,we=!se[6]&&se[2];return Xs.CHILD.test(se[0])?null:(se[3]?se[2]=se[4]||se[5]||"":we&&Zi.test(we)&&(ge=g(we,!0))&&(ge=we.indexOf(")",we.length-ge)-we.length)&&(se[0]=se[0].slice(0,ge),se[2]=we.slice(0,ge)),se.slice(0,3))}},filter:{TAG:function(se){var ge=se.replace(Ci,_r).toLowerCase();return se==="*"?function(){return!0}:function(we){return we.nodeName&&we.nodeName.toLowerCase()===ge}},CLASS:function(se){var ge=bn[se+" "];return ge||(ge=new RegExp("(^|"+Jt+")"+se+"("+Jt+"|$)"))&&bn(se,function(we){return ge.test(typeof we.className=="string"&&we.className||typeof we.getAttribute<"u"&&we.getAttribute("class")||"")})},ATTR:function(se,ge,we){return function(je){var Ne=Ln.attr(je,se);return Ne==null?ge==="!=":ge?(Ne+="",ge==="="?Ne===we:ge==="!="?Ne!==we:ge==="^="?we&&Ne.indexOf(we)===0:ge==="*="?we&&Ne.indexOf(we)>-1:ge==="$="?we&&Ne.slice(-we.length)===we:ge==="~="?(" "+Ne.replace(_s," ")+" ").indexOf(we)>-1:ge==="|="?Ne===we||Ne.slice(0,we.length+1)===we+"-":!1):!0}},CHILD:function(se,ge,we,je,Ne){var Ke=se.slice(0,3)!=="nth",it=se.slice(-4)!=="last",mt=ge==="of-type";return je===1&&Ne===0?function(bt){return!!bt.parentNode}:function(bt,Vt,Nt){var zt,un,On,Ht,br,Pr,Ui=Ke!==it?"nextSibling":"previousSibling",er=bt.parentNode,iu=mt&&bt.nodeName.toLowerCase(),Co=!Nt&&!mt,qi=!1;if(er){if(Ke){for(;Ui;){for(Ht=bt;Ht=Ht[Ui];)if(mt?Ht.nodeName.toLowerCase()===iu:Ht.nodeType===1)return!1;Pr=Ui=se==="only"&&!Pr&&"nextSibling"}return!0}if(Pr=[it?er.firstChild:er.lastChild],it&&Co){for(Ht=er,On=Ht[It]||(Ht[It]={}),un=On[Ht.uniqueID]||(On[Ht.uniqueID]={}),zt=un[se]||[],br=zt[0]===Sn&&zt[1],qi=br&&zt[2],Ht=br&&er.childNodes[br];Ht=++br&&Ht&&Ht[Ui]||(qi=br=0)||Pr.pop();)if(Ht.nodeType===1&&++qi&&Ht===bt){un[se]=[Sn,br,qi];break}}else if(Co&&(Ht=bt,On=Ht[It]||(Ht[It]={}),un=On[Ht.uniqueID]||(On[Ht.uniqueID]={}),zt=un[se]||[],br=zt[0]===Sn&&zt[1],qi=br),qi===!1)for(;(Ht=++br&&Ht&&Ht[Ui]||(qi=br=0)||Pr.pop())&&!((mt?Ht.nodeName.toLowerCase()===iu:Ht.nodeType===1)&&++qi&&(Co&&(On=Ht[It]||(Ht[It]={}),un=On[Ht.uniqueID]||(On[Ht.uniqueID]={}),un[se]=[Sn,qi]),Ht===bt)););return qi-=Ne,qi===je||qi%je===0&&qi/je>=0}}},PSEUDO:function(se,ge){var we,je=M.pseudos[se]||M.setFilters[se.toLowerCase()]||Ln.error("unsupported pseudo: "+se);return je[It]?je(ge):je.length>1?(we=[se,se,"",ge],M.setFilters.hasOwnProperty(se.toLowerCase())?Si(function(Ne,Ke){for(var it,mt=je(Ne,ge),bt=mt.length;bt--;)it=Wr(Ne,mt[bt]),Ne[it]=!(Ke[it]=mt[bt])}):function(Ne){return je(Ne,0,we)}):je}},pseudos:{not:Si(function(se){var ge=[],we=[],je=T(se.replace(xo,"$1"));return je[It]?Si(function(Ne,Ke,it,mt){for(var bt,Vt=je(Ne,null,mt,[]),Nt=Ne.length;Nt--;)(bt=Vt[Nt])&&(Ne[Nt]=!(Ke[Nt]=bt))}):function(Ne,Ke,it){return ge[0]=Ne,je(ge,null,it,we),ge[0]=null,!we.pop()}}),has:Si(function(se){return function(ge){return Ln(se,ge).length>0}}),contains:Si(function(se){return se=se.replace(Ci,_r),function(ge){return(ge.textContent||K(ge)).indexOf(se)>-1}}),lang:Si(function(se){return fa.test(se||"")||Ln.error("unsupported lang: "+se),se=se.replace(Ci,_r).toLowerCase(),function(ge){var we;do if(we=Pe?ge.lang:ge.getAttribute("xml:lang")||ge.getAttribute("lang"))return we=we.toLowerCase(),we===se||we.indexOf(se+"-")===0;while((ge=ge.parentNode)&&ge.nodeType===1);return!1}}),target:function(se){var ge=m.location&&m.location.hash;return ge&&ge.slice(1)===se.id},root:function(se){return se===me},focus:function(se){return se===X.activeElement&&(!X.hasFocus||X.hasFocus())&&!!(se.type||se.href||~se.tabIndex)},enabled:ze(!1),disabled:ze(!0),checked:function(se){var ge=se.nodeName.toLowerCase();return ge==="input"&&!!se.checked||ge==="option"&&!!se.selected},selected:function(se){return se.parentNode&&se.parentNode.selectedIndex,se.selected===!0},empty:function(se){for(se=se.firstChild;se;se=se.nextSibling)if(se.nodeType<6)return!1;return!0},parent:function(se){return!M.pseudos.empty(se)},header:function(se){return di.test(se.nodeName)},input:function(se){return zu.test(se.nodeName)},button:function(se){var ge=se.nodeName.toLowerCase();return ge==="input"&&se.type==="button"||ge==="button"},text:function(se){var ge;return se.nodeName.toLowerCase()==="input"&&se.type==="text"&&((ge=se.getAttribute("type"))==null||ge.toLowerCase()==="text")},first:We(function(){return[0]}),last:We(function(se,ge){return[ge-1]}),eq:We(function(se,ge,we){return[we<0?we+ge:we]}),even:We(function(se,ge){for(var we=0;we<ge;we+=2)se.push(we);return se}),odd:We(function(se,ge){for(var we=1;we<ge;we+=2)se.push(we);return se}),lt:We(function(se,ge,we){for(var je=we<0?we+ge:we>ge?ge:we;--je>=0;)se.push(je);return se}),gt:We(function(se,ge,we){for(var je=we<0?we+ge:we;++je<ge;)se.push(je);return se})}},M.pseudos.nth=M.pseudos.eq;for(k in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})M.pseudos[k]=xe(k);for(k in{submit:!0,reset:!0})M.pseudos[k]=Ue(k);function yt(){}yt.prototype=M.filters=M.pseudos,M.setFilters=new yt,g=Ln.tokenize=function(se,ge){var we,je,Ne,Ke,it,mt,bt,Vt=ii[se+" "];if(Vt)return ge?0:Vt.slice(0);for(it=se,mt=[],bt=M.preFilter;it;){(!we||(je=Ta.exec(it)))&&(je&&(it=it.slice(je[0].length)||it),mt.push(Ne=[])),we=!1,(je=Nn.exec(it))&&(we=je.shift(),Ne.push({value:we,type:je[0].replace(xo," ")}),it=it.slice(we.length));for(Ke in M.filter)(je=Xs[Ke].exec(it))&&(!bt[Ke]||(je=bt[Ke](je)))&&(we=je.shift(),Ne.push({value:we,type:Ke,matches:je}),it=it.slice(we.length));if(!we)break}return ge?it.length:it?Ln.error(se):ii(se,mt).slice(0)};function At(se){for(var ge=0,we=se.length,je="";ge<we;ge++)je+=se[ge].value;return je}function _t(se,ge,we){var je=ge.dir,Ne=ge.next,Ke=Ne||je,it=we&&Ke==="parentNode",mt=Ot++;return ge.first?function(bt,Vt,Nt){for(;bt=bt[je];)if(bt.nodeType===1||it)return se(bt,Vt,Nt);return!1}:function(bt,Vt,Nt){var zt,un,On,Ht=[Sn,mt];if(Nt){for(;bt=bt[je];)if((bt.nodeType===1||it)&&se(bt,Vt,Nt))return!0}else for(;bt=bt[je];)if(bt.nodeType===1||it)if(On=bt[It]||(bt[It]={}),un=On[bt.uniqueID]||(On[bt.uniqueID]={}),Ne&&Ne===bt.nodeName.toLowerCase())bt=bt[je]||bt;else{if((zt=un[Ke])&&zt[0]===Sn&&zt[1]===mt)return Ht[2]=zt[2];if(un[Ke]=Ht,Ht[2]=se(bt,Vt,Nt))return!0}return!1}}function an(se){return se.length>1?function(ge,we,je){for(var Ne=se.length;Ne--;)if(!se[Ne](ge,we,je))return!1;return!0}:se[0]}function Ft(se,ge,we){for(var je=0,Ne=ge.length;je<Ne;je++)Ln(se,ge[je],we);return we}function $t(se,ge,we,je,Ne){for(var Ke,it=[],mt=0,bt=se.length,Vt=ge!=null;mt<bt;mt++)(Ke=se[mt])&&(!we||we(Ke,je,Ne))&&(it.push(Ke),Vt&&ge.push(mt));return it}function jt(se,ge,we,je,Ne,Ke){return je&&!je[It]&&(je=jt(je)),Ne&&!Ne[It]&&(Ne=jt(Ne,Ke)),Si(function(it,mt,bt,Vt){var Nt,zt,un,On=[],Ht=[],br=mt.length,Pr=it||Ft(ge||"*",bt.nodeType?[bt]:bt,[]),Ui=se&&(it||!ge)?$t(Pr,On,se,bt,Vt):Pr,er=we?Ne||(it?se:br||je)?[]:mt:Ui;if(we&&we(Ui,er,bt,Vt),je)for(Nt=$t(er,Ht),je(Nt,[],bt,Vt),zt=Nt.length;zt--;)(un=Nt[zt])&&(er[Ht[zt]]=!(Ui[Ht[zt]]=un));if(it){if(Ne||se){if(Ne){for(Nt=[],zt=er.length;zt--;)(un=er[zt])&&Nt.push(Ui[zt]=un);Ne(null,er=[],Nt,Vt)}for(zt=er.length;zt--;)(un=er[zt])&&(Nt=Ne?Wr(it,un):On[zt])>-1&&(it[Nt]=!(mt[Nt]=un))}}else er=$t(er===mt?er.splice(br,er.length):er),Ne?Ne(null,mt,er,Vt):Bi.apply(mt,er)})}function Rt(se){for(var ge,we,je,Ne=se.length,Ke=M.relative[se[0].type],it=Ke||M.relative[" "],mt=Ke?1:0,bt=_t(function(zt){return zt===ge},it,!0),Vt=_t(function(zt){return Wr(ge,zt)>-1},it,!0),Nt=[function(zt,un,On){var Ht=!Ke&&(On||un!==B)||((ge=un).nodeType?bt(zt,un,On):Vt(zt,un,On));return ge=null,Ht}];mt<Ne;mt++)if(we=M.relative[se[mt].type])Nt=[_t(an(Nt),we)];else{if(we=M.filter[se[mt].type].apply(null,se[mt].matches),we[It]){for(je=++mt;je<Ne&&!M.relative[se[je].type];je++);return jt(mt>1&&an(Nt),mt>1&&At(se.slice(0,mt-1).concat({value:se[mt-2].type===" "?"*":""})).replace(xo,"$1"),we,mt<je&&Rt(se.slice(mt,je)),je<Ne&&Rt(se=se.slice(je)),je<Ne&&At(se))}Nt.push(we)}return an(Nt)}function zn(se,ge){var we=ge.length>0,je=se.length>0,Ne=function(Ke,it,mt,bt,Vt){var Nt,zt,un,On=0,Ht="0",br=Ke&&[],Pr=[],Ui=B,er=Ke||je&&M.find.TAG("*",Vt),iu=Sn+=Ui==null?1:Math.random()||.1,Co=er.length;for(Vt&&(B=it==X||it||Vt);Ht!==Co&&(Nt=er[Ht])!=null;Ht++){if(je&&Nt){for(zt=0,!it&&Nt.ownerDocument!=X&&(Y(Nt),mt=!Pe);un=se[zt++];)if(un(Nt,it||X,mt)){bt.push(Nt);break}Vt&&(Sn=iu)}we&&((Nt=!un&&Nt)&&On--,Ke&&br.push(Nt))}if(On+=Ht,we&&Ht!==On){for(zt=0;un=ge[zt++];)un(br,Pr,it,mt);if(Ke){if(On>0)for(;Ht--;)br[Ht]||Pr[Ht]||(Pr[Ht]=Gi.call(bt));Pr=$t(Pr)}Bi.apply(bt,Pr),Vt&&!Ke&&Pr.length>0&&On+ge.length>1&&Ln.uniqueSort(bt)}return Vt&&(Sn=iu,B=Ui),br};return we?Si(Ne):Ne}return T=Ln.compile=function(se,ge){var we,je=[],Ne=[],Ke=Qt[se+" "];if(!Ke){for(ge||(ge=g(se)),we=ge.length;we--;)Ke=Rt(ge[we]),Ke[It]?je.push(Ke):Ne.push(Ke);Ke=Qt(se,zn(Ne,je)),Ke.selector=se}return Ke},A=Ln.select=function(se,ge,we,je){var Ne,Ke,it,mt,bt,Vt=typeof se=="function"&&se,Nt=!je&&g(se=Vt.selector||se);if(we=we||[],Nt.length===1){if(Ke=Nt[0]=Nt[0].slice(0),Ke.length>2&&(it=Ke[0]).type==="ID"&&ge.nodeType===9&&Pe&&M.relative[Ke[1].type]){if(ge=(M.find.ID(it.matches[0].replace(Ci,_r),ge)||[])[0],ge)Vt&&(ge=ge.parentNode);else return we;se=se.slice(Ke.shift().value.length)}for(Ne=Xs.needsContext.test(se)?0:Ke.length;Ne--&&(it=Ke[Ne],!M.relative[mt=it.type]);)if((bt=M.find[mt])&&(je=bt(it.matches[0].replace(Ci,_r),bs.test(Ke[0].type)&&dt(ge.parentNode)||ge))){if(Ke.splice(Ne,1),se=je.length&&At(Ke),!se)return Bi.apply(we,je),we;break}}return(Vt||T(se,Nt))(je,ge,!Pe,we,!ge||bs.test(se)&&dt(ge.parentNode)||ge),we},R.sortStable=It.split("").sort(rn).join("")===It,R.detectDuplicates=!!z,Y(),R.sortDetached=Fr(function(se){return se.compareDocumentPosition(X.createElement("fieldset"))&1}),Fr(function(se){return se.innerHTML="<a href='#'></a>",se.firstChild.getAttribute("href")==="#"})||ws("type|href|height|width",function(se,ge,we){if(!we)return se.getAttribute(ge,ge.toLowerCase()==="type"?1:2)}),(!R.attributes||!Fr(function(se){return se.innerHTML="<input/>",se.firstChild.setAttribute("value",""),se.firstChild.getAttribute("value")===""}))&&ws("value",function(se,ge,we){if(!we&&se.nodeName.toLowerCase()==="input")return se.defaultValue}),Fr(function(se){return se.getAttribute("disabled")==null})||ws(ua,function(se,ge,we){var je;if(!we)return se[ge]===!0?ge.toLowerCase():(je=se.getAttributeNode(ge))&&je.specified?je.value:null}),Ln}(e);v.find=$,v.expr=$.selectors,v.expr[":"]=v.expr.pseudos,v.uniqueSort=v.unique=$.uniqueSort,v.text=$.getText,v.isXMLDoc=$.isXML,v.contains=$.contains,v.escapeSelector=$.escape;var Z=function(m,k,R){for(var M=[],K=R!==void 0;(m=m[k])&&m.nodeType!==9;)if(m.nodeType===1){if(K&&v(m).is(R))break;M.push(m)}return M},ce=function(m,k){for(var R=[];m;m=m.nextSibling)m.nodeType===1&&m!==k&&R.push(m);return R},q=v.expr.match.needsContext;function W(m,k){return m.nodeName&&m.nodeName.toLowerCase()===k.toLowerCase()}var O=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function re(m,k,R){return C(k)?v.grep(m,function(M,K){return!!k.call(M,K,M)!==R}):k.nodeType?v.grep(m,function(M){return M===k!==R}):typeof k!="string"?v.grep(m,function(M){return o.call(k,M)>-1!==R}):v.filter(k,m,R)}v.filter=function(m,k,R){var M=k[0];return R&&(m=":not("+m+")"),k.length===1&&M.nodeType===1?v.find.matchesSelector(M,m)?[M]:[]:v.find.matches(m,v.grep(k,function(K){return K.nodeType===1}))},v.fn.extend({find:function(m){var k,R,M=this.length,K=this;if(typeof m!="string")return this.pushStack(v(m).filter(function(){for(k=0;k<M;k++)if(v.contains(K[k],this))return!0}));for(R=this.pushStack([]),k=0;k<M;k++)v.find(m,K[k],R);return M>1?v.uniqueSort(R):R},filter:function(m){return this.pushStack(re(this,m||[],!1))},not:function(m){return this.pushStack(re(this,m||[],!0))},is:function(m){return!!re(this,typeof m=="string"&&q.test(m)?v(m):m||[],!1).length}});var le,ie=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,oe=v.fn.init=function(m,k,R){var M,K;if(!m)return this;if(R=R||le,typeof m=="string")if(m[0]==="<"&&m[m.length-1]===">"&&m.length>=3?M=[null,m,null]:M=ie.exec(m),M&&(M[1]||!k))if(M[1]){if(k=k instanceof v?k[0]:k,v.merge(this,v.parseHTML(M[1],k&&k.nodeType?k.ownerDocument||k:w,!0)),O.test(M[1])&&v.isPlainObject(k))for(M in k)C(this[M])?this[M](k[M]):this.attr(M,k[M]);return this}else return K=w.getElementById(M[2]),K&&(this[0]=K,this.length=1),this;else return!k||k.jquery?(k||R).find(m):this.constructor(k).find(m);else{if(m.nodeType)return this[0]=m,this.length=1,this;if(C(m))return R.ready!==void 0?R.ready(m):m(v)}return v.makeArray(m,this)};oe.prototype=v.fn,le=v(w);var Q=/^(?:parents|prev(?:Until|All))/,j={children:!0,contents:!0,next:!0,prev:!0};v.fn.extend({has:function(m){var k=v(m,this),R=k.length;return this.filter(function(){for(var M=0;M<R;M++)if(v.contains(this,k[M]))return!0})},closest:function(m,k){var R,M=0,K=this.length,f=[],g=typeof m!="string"&&v(m);if(!q.test(m)){for(;M<K;M++)for(R=this[M];R&&R!==k;R=R.parentNode)if(R.nodeType<11&&(g?g.index(R)>-1:R.nodeType===1&&v.find.matchesSelector(R,m))){f.push(R);break}}return this.pushStack(f.length>1?v.uniqueSort(f):f)},index:function(m){return m?typeof m=="string"?o.call(v(m),this[0]):o.call(this,m.jquery?m[0]:m):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(m,k){return this.pushStack(v.uniqueSort(v.merge(this.get(),v(m,k))))},addBack:function(m){return this.add(m==null?this.prevObject:this.prevObject.filter(m))}});function H(m,k){for(;(m=m[k])&&m.nodeType!==1;);return m}v.each({parent:function(m){var k=m.parentNode;return k&&k.nodeType!==11?k:null},parents:function(m){return Z(m,"parentNode")},parentsUntil:function(m,k,R){return Z(m,"parentNode",R)},next:function(m){return H(m,"nextSibling")},prev:function(m){return H(m,"previousSibling")},nextAll:function(m){return Z(m,"nextSibling")},prevAll:function(m){return Z(m,"previousSibling")},nextUntil:function(m,k,R){return Z(m,"nextSibling",R)},prevUntil:function(m,k,R){return Z(m,"previousSibling",R)},siblings:function(m){return ce((m.parentNode||{}).firstChild,m)},children:function(m){return ce(m.firstChild)},contents:function(m){return m.contentDocument!=null&&r(m.contentDocument)?m.contentDocument:(W(m,"template")&&(m=m.content||m),v.merge([],m.childNodes))}},function(m,k){v.fn[m]=function(R,M){var K=v.map(this,k,R);return m.slice(-5)!=="Until"&&(M=R),M&&typeof M=="string"&&(K=v.filter(M,K)),this.length>1&&(j[m]||v.uniqueSort(K),Q.test(m)&&K.reverse()),this.pushStack(K)}});var G=/[^\x20\t\r\n\f]+/g;function fe(m){var k={};return v.each(m.match(G)||[],function(R,M){k[M]=!0}),k}v.Callbacks=function(m){m=typeof m=="string"?fe(m):v.extend({},m);var k,R,M,K,f=[],g=[],T=-1,A=function(){for(K=K||m.once,M=k=!0;g.length;T=-1)for(R=g.shift();++T<f.length;)f[T].apply(R[0],R[1])===!1&&m.stopOnFalse&&(T=f.length,R=!1);m.memory||(R=!1),k=!1,K&&(R?f=[]:f="")},B={add:function(){return f&&(R&&!k&&(T=f.length-1,g.push(R)),function U(z){v.each(z,function(Y,X){C(X)?(!m.unique||!B.has(X))&&f.push(X):X&&X.length&&_(X)!=="string"&&U(X)})}(arguments),R&&!k&&A()),this},remove:function(){return v.each(arguments,function(U,z){for(var Y;(Y=v.inArray(z,f,Y))>-1;)f.splice(Y,1),Y<=T&&T--}),this},has:function(U){return U?v.inArray(U,f)>-1:f.length>0},empty:function(){return f&&(f=[]),this},disable:function(){return K=g=[],f=R="",this},disabled:function(){return!f},lock:function(){return K=g=[],!R&&!k&&(f=R=""),this},locked:function(){return!!K},fireWith:function(U,z){return K||(z=z||[],z=[U,z.slice?z.slice():z],g.push(z),k||A()),this},fire:function(){return B.fireWith(this,arguments),this},fired:function(){return!!M}};return B};function pe(m){return m}function de(m){throw m}function Ae(m,k,R,M){var K;try{m&&C(K=m.promise)?K.call(m).done(k).fail(R):m&&C(K=m.then)?K.call(m,k,R):k.apply(void 0,[m].slice(M))}catch(f){R.apply(void 0,[f])}}v.extend({Deferred:function(m){var k=[["notify","progress",v.Callbacks("memory"),v.Callbacks("memory"),2],["resolve","done",v.Callbacks("once memory"),v.Callbacks("once memory"),0,"resolved"],["reject","fail",v.Callbacks("once memory"),v.Callbacks("once memory"),1,"rejected"]],R="pending",M={state:function(){return R},always:function(){return K.done(arguments).fail(arguments),this},catch:function(f){return M.then(null,f)},pipe:function(){var f=arguments;return v.Deferred(function(g){v.each(k,function(T,A){var B=C(f[A[4]])&&f[A[4]];K[A[1]](function(){var U=B&&B.apply(this,arguments);U&&C(U.promise)?U.promise().progress(g.notify).done(g.resolve).fail(g.reject):g[A[0]+"With"](this,B?[U]:arguments)})}),f=null}).promise()},then:function(f,g,T){var A=0;function B(U,z,Y,X){return function(){var me=this,Pe=arguments,De=function(){var tt,Pt;if(!(U<A)){if(tt=Y.apply(me,Pe),tt===z.promise())throw new TypeError("Thenable self-resolution");Pt=tt&&(typeof tt=="object"||typeof tt=="function")&&tt.then,C(Pt)?X?Pt.call(tt,B(A,z,pe,X),B(A,z,de,X)):(A++,Pt.call(tt,B(A,z,pe,X),B(A,z,de,X),B(A,z,pe,z.notifyWith))):(Y!==pe&&(me=void 0,Pe=[tt]),(X||z.resolveWith)(me,Pe))}},Oe=X?De:function(){try{De()}catch(tt){v.Deferred.exceptionHook&&v.Deferred.exceptionHook(tt,Oe.stackTrace),U+1>=A&&(Y!==de&&(me=void 0,Pe=[tt]),z.rejectWith(me,Pe))}};U?Oe():(v.Deferred.getStackHook&&(Oe.stackTrace=v.Deferred.getStackHook()),e.setTimeout(Oe))}}return v.Deferred(function(U){k[0][3].add(B(0,U,C(T)?T:pe,U.notifyWith)),k[1][3].add(B(0,U,C(f)?f:pe)),k[2][3].add(B(0,U,C(g)?g:de))}).promise()},promise:function(f){return f!=null?v.extend(f,M):M}},K={};return v.each(k,function(f,g){var T=g[2],A=g[5];M[g[1]]=T.add,A&&T.add(function(){R=A},k[3-f][2].disable,k[3-f][3].disable,k[0][2].lock,k[0][3].lock),T.add(g[3].fire),K[g[0]]=function(){return K[g[0]+"With"](this===K?void 0:this,arguments),this},K[g[0]+"With"]=T.fireWith}),M.promise(K),m&&m.call(K,K),K},when:function(m){var k=arguments.length,R=k,M=Array(R),K=i.call(arguments),f=v.Deferred(),g=function(T){return function(A){M[T]=this,K[T]=arguments.length>1?i.call(arguments):A,--k||f.resolveWith(M,K)}};if(k<=1&&(Ae(m,f.done(g(R)).resolve,f.reject,!k),f.state()==="pending"||C(K[R]&&K[R].then)))return f.then();for(;R--;)Ae(K[R],g(R),f.reject);return f.promise()}});var Ie=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;v.Deferred.exceptionHook=function(m,k){e.console&&e.console.warn&&m&&Ie.test(m.name)&&e.console.warn("jQuery.Deferred exception: "+m.message,m.stack,k)},v.readyException=function(m){e.setTimeout(function(){throw m})};var ve=v.Deferred();v.fn.ready=function(m){return ve.then(m).catch(function(k){v.readyException(k)}),this},v.extend({isReady:!1,readyWait:1,ready:function(m){(m===!0?--v.readyWait:v.isReady)||(v.isReady=!0,!(m!==!0&&--v.readyWait>0)&&ve.resolveWith(w,[v]))}}),v.ready.then=ve.then;function Te(){w.removeEventListener("DOMContentLoaded",Te),e.removeEventListener("load",Te),v.ready()}w.readyState==="complete"||w.readyState!=="loading"&&!w.documentElement.doScroll?e.setTimeout(v.ready):(w.addEventListener("DOMContentLoaded",Te),e.addEventListener("load",Te));var Me=function(m,k,R,M,K,f,g){var T=0,A=m.length,B=R==null;if(_(R)==="object"){K=!0;for(T in R)Me(m,k,T,R[T],!0,f,g)}else if(M!==void 0&&(K=!0,C(M)||(g=!0),B&&(g?(k.call(m,M),k=null):(B=k,k=function(U,z,Y){return B.call(v(U),Y)})),k))for(;T<A;T++)k(m[T],R,g?M:M.call(m[T],T,k(m[T],R)));return K?m:B?k.call(m):A?k(m[0],R):f},Ge=/^-ms-/,at=/-([a-z])/g;function ft(m,k){return k.toUpperCase()}function V(m){return m.replace(Ge,"ms-").replace(at,ft)}var Se=function(m){return m.nodeType===1||m.nodeType===9||!+m.nodeType};function Ee(){this.expando=v.expando+Ee.uid++}Ee.uid=1,Ee.prototype={cache:function(m){var k=m[this.expando];return k||(k={},Se(m)&&(m.nodeType?m[this.expando]=k:Object.defineProperty(m,this.expando,{value:k,configurable:!0}))),k},set:function(m,k,R){var M,K=this.cache(m);if(typeof k=="string")K[V(k)]=R;else for(M in k)K[V(M)]=k[M];return K},get:function(m,k){return k===void 0?this.cache(m):m[this.expando]&&m[this.expando][V(k)]},access:function(m,k,R){return k===void 0||k&&typeof k=="string"&&R===void 0?this.get(m,k):(this.set(m,k,R),R!==void 0?R:k)},remove:function(m,k){var R,M=m[this.expando];if(M!==void 0){if(k!==void 0)for(Array.isArray(k)?k=k.map(V):(k=V(k),k=k in M?[k]:k.match(G)||[]),R=k.length;R--;)delete M[k[R]];(k===void 0||v.isEmptyObject(M))&&(m.nodeType?m[this.expando]=void 0:delete m[this.expando])}},hasData:function(m){var k=m[this.expando];return k!==void 0&&!v.isEmptyObject(k)}};var ae=new Ee,ue=new Ee,ye=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Ve=/[A-Z]/g;function et(m){return m==="true"?!0:m==="false"?!1:m==="null"?null:m===+m+""?+m:ye.test(m)?JSON.parse(m):m}function Re(m,k,R){var M;if(R===void 0&&m.nodeType===1)if(M="data-"+k.replace(Ve,"-$&").toLowerCase(),R=m.getAttribute(M),typeof R=="string"){try{R=et(R)}catch{}ue.set(m,k,R)}else R=void 0;return R}v.extend({hasData:function(m){return ue.hasData(m)||ae.hasData(m)},data:function(m,k,R){return ue.access(m,k,R)},removeData:function(m,k){ue.remove(m,k)},_data:function(m,k,R){return ae.access(m,k,R)},_removeData:function(m,k){ae.remove(m,k)}}),v.fn.extend({data:function(m,k){var R,M,K,f=this[0],g=f&&f.attributes;if(m===void 0){if(this.length&&(K=ue.get(f),f.nodeType===1&&!ae.get(f,"hasDataAttrs"))){for(R=g.length;R--;)g[R]&&(M=g[R].name,M.indexOf("data-")===0&&(M=V(M.slice(5)),Re(f,M,K[M])));ae.set(f,"hasDataAttrs",!0)}return K}return typeof m=="object"?this.each(function(){ue.set(this,m)}):Me(this,function(T){var A;if(f&&T===void 0)return A=ue.get(f,m),A!==void 0||(A=Re(f,m),A!==void 0)?A:void 0;this.each(function(){ue.set(this,m,T)})},null,k,arguments.length>1,null,!0)},removeData:function(m){return this.each(function(){ue.remove(this,m)})}}),v.extend({queue:function(m,k,R){var M;if(m)return k=(k||"fx")+"queue",M=ae.get(m,k),R&&(!M||Array.isArray(R)?M=ae.access(m,k,v.makeArray(R)):M.push(R)),M||[]},dequeue:function(m,k){k=k||"fx";var R=v.queue(m,k),M=R.length,K=R.shift(),f=v._queueHooks(m,k),g=function(){v.dequeue(m,k)};K==="inprogress"&&(K=R.shift(),M--),K&&(k==="fx"&&R.unshift("inprogress"),delete f.stop,K.call(m,g,f)),!M&&f&&f.empty.fire()},_queueHooks:function(m,k){var R=k+"queueHooks";return ae.get(m,R)||ae.access(m,R,{empty:v.Callbacks("once memory").add(function(){ae.remove(m,[k+"queue",R])})})}}),v.fn.extend({queue:function(m,k){var R=2;return typeof m!="string"&&(k=m,m="fx",R--),arguments.length<R?v.queue(this[0],m):k===void 0?this:this.each(function(){var M=v.queue(this,m,k);v._queueHooks(this,m),m==="fx"&&M[0]!=="inprogress"&&v.dequeue(this,m)})},dequeue:function(m){return this.each(function(){v.dequeue(this,m)})},clearQueue:function(m){return this.queue(m||"fx",[])},promise:function(m,k){var R,M=1,K=v.Deferred(),f=this,g=this.length,T=function(){--M||K.resolveWith(f,[f])};for(typeof m!="string"&&(k=m,m=void 0),m=m||"fx";g--;)R=ae.get(f[g],m+"queueHooks"),R&&R.empty&&(M++,R.empty.add(T));return T(),K.promise(k)}});var Qe=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,gt=new RegExp("^(?:([+-])=|)("+Qe+")([a-z%]*)$","i"),rt=["Top","Right","Bottom","Left"],Je=w.documentElement,qt=function(m){return v.contains(m.ownerDocument,m)},nn={composed:!0};Je.getRootNode&&(qt=function(m){return v.contains(m.ownerDocument,m)||m.getRootNode(nn)===m.ownerDocument});var Er=function(m,k){return m=k||m,m.style.display==="none"||m.style.display===""&&qt(m)&&v.css(m,"display")==="none"};function zi(m,k,R,M){var K,f,g=20,T=M?function(){return M.cur()}:function(){return v.css(m,k,"")},A=T(),B=R&&R[3]||(v.cssNumber[k]?"":"px"),U=m.nodeType&&(v.cssNumber[k]||B!=="px"&&+A)&&gt.exec(v.css(m,k));if(U&&U[3]!==B){for(A=A/2,B=B||U[3],U=+A||1;g--;)v.style(m,k,U+B),(1-f)*(1-(f=T()/A||.5))<=0&&(g=0),U=U/f;U=U*2,v.style(m,k,U+B),R=R||[]}return R&&(U=+U||+A||0,K=R[1]?U+(R[1]+1)*R[2]:+R[2],M&&(M.unit=B,M.start=U,M.end=K)),K}var Lr={};function bi(m){var k,R=m.ownerDocument,M=m.nodeName,K=Lr[M];return K||(k=R.body.appendChild(R.createElement(M)),K=v.css(k,"display"),k.parentNode.removeChild(k),K==="none"&&(K="block"),Lr[M]=K,K)}function dn(m,k){for(var R,M,K=[],f=0,g=m.length;f<g;f++)M=m[f],M.style&&(R=M.style.display,k?(R==="none"&&(K[f]=ae.get(M,"display")||null,K[f]||(M.style.display="")),M.style.display===""&&Er(M)&&(K[f]=bi(M))):R!=="none"&&(K[f]="none",ae.set(M,"display",R)));for(f=0;f<g;f++)K[f]!=null&&(m[f].style.display=K[f]);return m}v.fn.extend({show:function(){return dn(this,!0)},hide:function(){return dn(this)},toggle:function(m){return typeof m=="boolean"?m?this.show():this.hide():this.each(function(){Er(this)?v(this).show():v(this).hide()})}});var Kn=/^(?:checkbox|radio)$/i,kr=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,yr=/^$|^module$|\/(?:java|ecma)script/i;(function(){var m=w.createDocumentFragment(),k=m.appendChild(w.createElement("div")),R=w.createElement("input");R.setAttribute("type","radio"),R.setAttribute("checked","checked"),R.setAttribute("name","t"),k.appendChild(R),b.checkClone=k.cloneNode(!0).cloneNode(!0).lastChild.checked,k.innerHTML="<textarea>x</textarea>",b.noCloneChecked=!!k.cloneNode(!0).lastChild.defaultValue,k.innerHTML="<option></option>",b.option=!!k.lastChild})();var lr={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};lr.tbody=lr.tfoot=lr.colgroup=lr.caption=lr.thead,lr.th=lr.td,b.option||(lr.optgroup=lr.option=[1,"<select multiple='multiple'>","</select>"]);function cr(m,k){var R;return typeof m.getElementsByTagName<"u"?R=m.getElementsByTagName(k||"*"):typeof m.querySelectorAll<"u"?R=m.querySelectorAll(k||"*"):R=[],k===void 0||k&&W(m,k)?v.merge([m],R):R}function _a(m,k){for(var R=0,M=m.length;R<M;R++)ae.set(m[R],"globalEval",!k||ae.get(k[R],"globalEval"))}var Qa=/<|&#?\w+;/;function Hi(m,k,R,M,K){for(var f,g,T,A,B,U,z=k.createDocumentFragment(),Y=[],X=0,me=m.length;X<me;X++)if(f=m[X],f||f===0)if(_(f)==="object")v.merge(Y,f.nodeType?[f]:f);else if(!Qa.test(f))Y.push(k.createTextNode(f));else{for(g=g||z.appendChild(k.createElement("div")),T=(kr.exec(f)||["",""])[1].toLowerCase(),A=lr[T]||lr._default,g.innerHTML=A[1]+v.htmlPrefilter(f)+A[2],U=A[0];U--;)g=g.lastChild;v.merge(Y,g.childNodes),g=z.firstChild,g.textContent=""}for(z.textContent="",X=0;f=Y[X++];){if(M&&v.inArray(f,M)>-1){K&&K.push(f);continue}if(B=qt(f),g=cr(z.appendChild(f),"script"),B&&_a(g),R)for(U=0;f=g[U++];)yr.test(f.type||"")&&R.push(f)}return z}var Mr=/^([^.]*)(?:\.(.+)|)/;function Cr(){return!0}function ba(){return!1}function fo(m,k){return m===ci()==(k==="focus")}function ci(){try{return w.activeElement}catch{}}function Ar(m,k,R,M,K,f){var g,T;if(typeof k=="object"){typeof R!="string"&&(M=M||R,R=void 0);for(T in k)Ar(m,T,R,M,k[T],f);return m}if(M==null&&K==null?(K=R,M=R=void 0):K==null&&(typeof R=="string"?(K=M,M=void 0):(K=M,M=R,R=void 0)),K===!1)K=ba;else if(!K)return m;return f===1&&(g=K,K=function(A){return v().off(A),g.apply(this,arguments)},K.guid=g.guid||(g.guid=v.guid++)),m.each(function(){v.event.add(this,k,K,M,R)})}v.event={global:{},add:function(m,k,R,M,K){var f,g,T,A,B,U,z,Y,X,me,Pe,De=ae.get(m);if(Se(m))for(R.handler&&(f=R,R=f.handler,K=f.selector),K&&v.find.matchesSelector(Je,K),R.guid||(R.guid=v.guid++),(A=De.events)||(A=De.events=Object.create(null)),(g=De.handle)||(g=De.handle=function(Oe){return typeof v<"u"&&v.event.triggered!==Oe.type?v.event.dispatch.apply(m,arguments):void 0}),k=(k||"").match(G)||[""],B=k.length;B--;)T=Mr.exec(k[B])||[],X=Pe=T[1],me=(T[2]||"").split(".").sort(),X&&(z=v.event.special[X]||{},X=(K?z.delegateType:z.bindType)||X,z=v.event.special[X]||{},U=v.extend({type:X,origType:Pe,data:M,handler:R,guid:R.guid,selector:K,needsContext:K&&v.expr.match.needsContext.test(K),namespace:me.join(".")},f),(Y=A[X])||(Y=A[X]=[],Y.delegateCount=0,(!z.setup||z.setup.call(m,M,me,g)===!1)&&m.addEventListener&&m.addEventListener(X,g)),z.add&&(z.add.call(m,U),U.handler.guid||(U.handler.guid=R.guid)),K?Y.splice(Y.delegateCount++,0,U):Y.push(U),v.event.global[X]=!0)},remove:function(m,k,R,M,K){var f,g,T,A,B,U,z,Y,X,me,Pe,De=ae.hasData(m)&&ae.get(m);if(!(!De||!(A=De.events))){for(k=(k||"").match(G)||[""],B=k.length;B--;){if(T=Mr.exec(k[B])||[],X=Pe=T[1],me=(T[2]||"").split(".").sort(),!X){for(X in A)v.event.remove(m,X+k[B],R,M,!0);continue}for(z=v.event.special[X]||{},X=(M?z.delegateType:z.bindType)||X,Y=A[X]||[],T=T[2]&&new RegExp("(^|\\.)"+me.join("\\.(?:.*\\.|)")+"(\\.|$)"),g=f=Y.length;f--;)U=Y[f],(K||Pe===U.origType)&&(!R||R.guid===U.guid)&&(!T||T.test(U.namespace))&&(!M||M===U.selector||M==="**"&&U.selector)&&(Y.splice(f,1),U.selector&&Y.delegateCount--,z.remove&&z.remove.call(m,U));g&&!Y.length&&((!z.teardown||z.teardown.call(m,me,De.handle)===!1)&&v.removeEvent(m,X,De.handle),delete A[X])}v.isEmptyObject(A)&&ae.remove(m,"handle events")}},dispatch:function(m){var k,R,M,K,f,g,T=new Array(arguments.length),A=v.event.fix(m),B=(ae.get(this,"events")||Object.create(null))[A.type]||[],U=v.event.special[A.type]||{};for(T[0]=A,k=1;k<arguments.length;k++)T[k]=arguments[k];if(A.delegateTarget=this,!(U.preDispatch&&U.preDispatch.call(this,A)===!1)){for(g=v.event.handlers.call(this,A,B),k=0;(K=g[k++])&&!A.isPropagationStopped();)for(A.currentTarget=K.elem,R=0;(f=K.handlers[R++])&&!A.isImmediatePropagationStopped();)(!A.rnamespace||f.namespace===!1||A.rnamespace.test(f.namespace))&&(A.handleObj=f,A.data=f.data,M=((v.event.special[f.origType]||{}).handle||f.handler).apply(K.elem,T),M!==void 0&&(A.result=M)===!1&&(A.preventDefault(),A.stopPropagation()));return U.postDispatch&&U.postDispatch.call(this,A),A.result}},handlers:function(m,k){var R,M,K,f,g,T=[],A=k.delegateCount,B=m.target;if(A&&B.nodeType&&!(m.type==="click"&&m.button>=1)){for(;B!==this;B=B.parentNode||this)if(B.nodeType===1&&!(m.type==="click"&&B.disabled===!0)){for(f=[],g={},R=0;R<A;R++)M=k[R],K=M.selector+" ",g[K]===void 0&&(g[K]=M.needsContext?v(K,this).index(B)>-1:v.find(K,this,null,[B]).length),g[K]&&f.push(M);f.length&&T.push({elem:B,handlers:f})}}return B=this,A<k.length&&T.push({elem:B,handlers:k.slice(A)}),T},addProp:function(m,k){Object.defineProperty(v.Event.prototype,m,{enumerable:!0,configurable:!0,get:C(k)?function(){if(this.originalEvent)return k(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[m]},set:function(R){Object.defineProperty(this,m,{enumerable:!0,configurable:!0,writable:!0,value:R})}})},fix:function(m){return m[v.expando]?m:new v.Event(m)},special:{load:{noBubble:!0},click:{setup:function(m){var k=this||m;return Kn.test(k.type)&&k.click&&W(k,"input")&&wa(k,"click",Cr),!1},trigger:function(m){var k=this||m;return Kn.test(k.type)&&k.click&&W(k,"input")&&wa(k,"click"),!0},_default:function(m){var k=m.target;return Kn.test(k.type)&&k.click&&W(k,"input")&&ae.get(k,"click")||W(k,"a")}},beforeunload:{postDispatch:function(m){m.result!==void 0&&m.originalEvent&&(m.originalEvent.returnValue=m.result)}}}};function wa(m,k,R){if(!R){ae.get(m,k)===void 0&&v.event.add(m,k,Cr);return}ae.set(m,k,!1),v.event.add(m,k,{namespace:!1,handler:function(M){var K,f,g=ae.get(this,k);if(M.isTrigger&1&&this[k]){if(g.length)(v.event.special[k]||{}).delegateType&&M.stopPropagation();else if(g=i.call(arguments),ae.set(this,k,g),K=R(this,k),this[k](),f=ae.get(this,k),g!==f||K?ae.set(this,k,!1):f={},g!==f)return M.stopImmediatePropagation(),M.preventDefault(),f&&f.value}else g.length&&(ae.set(this,k,{value:v.event.trigger(v.extend(g[0],v.Event.prototype),g.slice(1),this)}),M.stopImmediatePropagation())}})}v.removeEvent=function(m,k,R){m.removeEventListener&&m.removeEventListener(k,R)},v.Event=function(m,k){if(!(this instanceof v.Event))return new v.Event(m,k);m&&m.type?(this.originalEvent=m,this.type=m.type,this.isDefaultPrevented=m.defaultPrevented||m.defaultPrevented===void 0&&m.returnValue===!1?Cr:ba,this.target=m.target&&m.target.nodeType===3?m.target.parentNode:m.target,this.currentTarget=m.currentTarget,this.relatedTarget=m.relatedTarget):this.type=m,k&&v.extend(this,k),this.timeStamp=m&&m.timeStamp||Date.now(),this[v.expando]=!0},v.Event.prototype={constructor:v.Event,isDefaultPrevented:ba,isPropagationStopped:ba,isImmediatePropagationStopped:ba,isSimulated:!1,preventDefault:function(){var m=this.originalEvent;this.isDefaultPrevented=Cr,m&&!this.isSimulated&&m.preventDefault()},stopPropagation:function(){var m=this.originalEvent;this.isPropagationStopped=Cr,m&&!this.isSimulated&&m.stopPropagation()},stopImmediatePropagation:function(){var m=this.originalEvent;this.isImmediatePropagationStopped=Cr,m&&!this.isSimulated&&m.stopImmediatePropagation(),this.stopPropagation()}},v.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},v.event.addProp),v.each({focus:"focusin",blur:"focusout"},function(m,k){v.event.special[m]={setup:function(){return wa(this,m,fo),!1},trigger:function(){return wa(this,m),!0},_default:function(R){return ae.get(R.target,m)},delegateType:k}}),v.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(m,k){v.event.special[m]={delegateType:k,bindType:k,handle:function(R){var M,K=this,f=R.relatedTarget,g=R.handleObj;return(!f||f!==K&&!v.contains(K,f))&&(R.type=g.origType,M=g.handler.apply(this,arguments),R.type=k),M}}}),v.fn.extend({on:function(m,k,R,M){return Ar(this,m,k,R,M)},one:function(m,k,R,M){return Ar(this,m,k,R,M,1)},off:function(m,k,R){var M,K;if(m&&m.preventDefault&&m.handleObj)return M=m.handleObj,v(m.delegateTarget).off(M.namespace?M.origType+"."+M.namespace:M.origType,M.selector,M.handler),this;if(typeof m=="object"){for(K in m)this.off(K,k,m[K]);return this}return(k===!1||typeof k=="function")&&(R=k,k=void 0),R===!1&&(R=ba),this.each(function(){v.event.remove(this,m,R,k)})}});var $i=/<script|<style|<link/i,ho=/checked\s*(?:[^=]|=\s*.checked.)/i,po=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function xa(m,k){return W(m,"table")&&W(k.nodeType!==11?k:k.firstChild,"tr")&&v(m).children("tbody")[0]||m}function nt(m){return m.type=(m.getAttribute("type")!==null)+"/"+m.type,m}function Ur(m){return(m.type||"").slice(0,5)==="true/"?m.type=m.type.slice(5):m.removeAttribute("type"),m}function kt(m,k){var R,M,K,f,g,T,A;if(k.nodeType===1){if(ae.hasData(m)&&(f=ae.get(m),A=f.events,A)){ae.remove(k,"handle events");for(K in A)for(R=0,M=A[K].length;R<M;R++)v.event.add(k,K,A[K][R])}ue.hasData(m)&&(g=ue.access(m),T=v.extend({},g),ue.set(k,T))}}function fs(m,k){var R=k.nodeName.toLowerCase();R==="input"&&Kn.test(m.type)?k.checked=m.checked:(R==="input"||R==="textarea")&&(k.defaultValue=m.defaultValue)}function ji(m,k,R,M){k=a(k);var K,f,g,T,A,B,U=0,z=m.length,Y=z-1,X=k[0],me=C(X);if(me||z>1&&typeof X=="string"&&!b.checkClone&&ho.test(X))return m.each(function(Pe){var De=m.eq(Pe);me&&(k[0]=X.call(this,Pe,De.html())),ji(De,k,R,M)});if(z&&(K=Hi(k,m[0].ownerDocument,!1,m,M),f=K.firstChild,K.childNodes.length===1&&(K=f),f||M)){for(g=v.map(cr(K,"script"),nt),T=g.length;U<z;U++)A=K,U!==Y&&(A=v.clone(A,!0,!0),T&&v.merge(g,cr(A,"script"))),R.call(m[U],A,U);if(T)for(B=g[g.length-1].ownerDocument,v.map(g,Ur),U=0;U<T;U++)A=g[U],yr.test(A.type||"")&&!ae.access(A,"globalEval")&&v.contains(B,A)&&(A.src&&(A.type||"").toLowerCase()!=="module"?v._evalUrl&&!A.noModule&&v._evalUrl(A.src,{nonce:A.nonce||A.getAttribute("nonce")},B):S(A.textContent.replace(po,""),A,B))}return m}function ia(m,k,R){for(var M,K=k?v.filter(k,m):m,f=0;(M=K[f])!=null;f++)!R&&M.nodeType===1&&v.cleanData(cr(M)),M.parentNode&&(R&&qt(M)&&_a(cr(M,"script")),M.parentNode.removeChild(M));return m}v.extend({htmlPrefilter:function(m){return m},clone:function(m,k,R){var M,K,f,g,T=m.cloneNode(!0),A=qt(m);if(!b.noCloneChecked&&(m.nodeType===1||m.nodeType===11)&&!v.isXMLDoc(m))for(g=cr(T),f=cr(m),M=0,K=f.length;M<K;M++)fs(f[M],g[M]);if(k)if(R)for(f=f||cr(m),g=g||cr(T),M=0,K=f.length;M<K;M++)kt(f[M],g[M]);else kt(m,T);return g=cr(T,"script"),g.length>0&&_a(g,!A&&cr(m,"script")),T},cleanData:function(m){for(var k,R,M,K=v.event.special,f=0;(R=m[f])!==void 0;f++)if(Se(R)){if(k=R[ae.expando]){if(k.events)for(M in k.events)K[M]?v.event.remove(R,M):v.removeEvent(R,M,k.handle);R[ae.expando]=void 0}R[ue.expando]&&(R[ue.expando]=void 0)}}}),v.fn.extend({detach:function(m){return ia(this,m,!0)},remove:function(m){return ia(this,m)},text:function(m){return Me(this,function(k){return k===void 0?v.text(this):this.empty().each(function(){(this.nodeType===1||this.nodeType===11||this.nodeType===9)&&(this.textContent=k)})},null,m,arguments.length)},append:function(){return ji(this,arguments,function(m){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var k=xa(this,m);k.appendChild(m)}})},prepend:function(){return ji(this,arguments,function(m){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var k=xa(this,m);k.insertBefore(m,k.firstChild)}})},before:function(){return ji(this,arguments,function(m){this.parentNode&&this.parentNode.insertBefore(m,this)})},after:function(){return ji(this,arguments,function(m){this.parentNode&&this.parentNode.insertBefore(m,this.nextSibling)})},empty:function(){for(var m,k=0;(m=this[k])!=null;k++)m.nodeType===1&&(v.cleanData(cr(m,!1)),m.textContent="");return this},clone:function(m,k){return m=m==null?!1:m,k=k==null?m:k,this.map(function(){return v.clone(this,m,k)})},html:function(m){return Me(this,function(k){var R=this[0]||{},M=0,K=this.length;if(k===void 0&&R.nodeType===1)return R.innerHTML;if(typeof k=="string"&&!$i.test(k)&&!lr[(kr.exec(k)||["",""])[1].toLowerCase()]){k=v.htmlPrefilter(k);try{for(;M<K;M++)R=this[M]||{},R.nodeType===1&&(v.cleanData(cr(R,!1)),R.innerHTML=k);R=0}catch{}}R&&this.empty().append(k)},null,m,arguments.length)},replaceWith:function(){var m=[];return ji(this,arguments,function(k){var R=this.parentNode;v.inArray(this,m)<0&&(v.cleanData(cr(this)),R&&R.replaceChild(k,this))},m)}}),v.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(m,k){v.fn[m]=function(R){for(var M,K=[],f=v(R),g=f.length-1,T=0;T<=g;T++)M=T===g?this:this.clone(!0),v(f[T])[k](M),s.apply(K,M.get());return this.pushStack(K)}});var aa=new RegExp("^("+Qe+")(?!px)[a-z%]+$","i"),qn=/^--/,Zn=function(m){var k=m.ownerDocument.defaultView;return(!k||!k.opener)&&(k=e),k.getComputedStyle(m)},Xn=function(m,k,R){var M,K,f={};for(K in k)f[K]=m.style[K],m.style[K]=k[K];M=R.call(m);for(K in k)m.style[K]=f[K];return M},Fn=new RegExp(rt.join("|"),"i"),ti="[\\x20\\t\\r\\n\\f]",sa=new RegExp("^"+ti+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ti+"+$","g");(function(){function m(){if(B){A.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",B.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",Je.appendChild(A).appendChild(B);var U=e.getComputedStyle(B);R=U.top!=="1%",T=k(U.marginLeft)===12,B.style.right="60%",f=k(U.right)===36,M=k(U.width)===36,B.style.position="absolute",K=k(B.offsetWidth/3)===12,Je.removeChild(A),B=null}}function k(U){return Math.round(parseFloat(U))}var R,M,K,f,g,T,A=w.createElement("div"),B=w.createElement("div");B.style&&(B.style.backgroundClip="content-box",B.cloneNode(!0).style.backgroundClip="",b.clearCloneStyle=B.style.backgroundClip==="content-box",v.extend(b,{boxSizingReliable:function(){return m(),M},pixelBoxStyles:function(){return m(),f},pixelPosition:function(){return m(),R},reliableMarginLeft:function(){return m(),T},scrollboxSize:function(){return m(),K},reliableTrDimensions:function(){var U,z,Y,X;return g==null&&(U=w.createElement("table"),z=w.createElement("tr"),Y=w.createElement("div"),U.style.cssText="position:absolute;left:-11111px;border-collapse:separate",z.style.cssText="border:1px solid",z.style.height="1px",Y.style.height="9px",Y.style.display="block",Je.appendChild(U).appendChild(z).appendChild(Y),X=e.getComputedStyle(z),g=parseInt(X.height,10)+parseInt(X.borderTopWidth,10)+parseInt(X.borderBottomWidth,10)===z.offsetHeight,Je.removeChild(U)),g}}))})();function Ir(m,k,R){var M,K,f,g,T=qn.test(k),A=m.style;return R=R||Zn(m),R&&(g=R.getPropertyValue(k)||R[k],T&&g&&(g=g.replace(sa,"$1")||void 0),g===""&&!qt(m)&&(g=v.style(m,k)),!b.pixelBoxStyles()&&aa.test(g)&&Fn.test(k)&&(M=A.width,K=A.minWidth,f=A.maxWidth,A.minWidth=A.maxWidth=A.width=g,g=R.width,A.width=M,A.minWidth=K,A.maxWidth=f)),g!==void 0?g+"":g}function fi(m,k){return{get:function(){if(m()){delete this.get;return}return(this.get=k).apply(this,arguments)}}}var jr=["Webkit","Moz","ms"],Ma=w.createElement("div").style,Dt={};function pn(m){for(var k=m[0].toUpperCase()+m.slice(1),R=jr.length;R--;)if(m=jr[R]+k,m in Ma)return m}function _n(m){var k=v.cssProps[m]||Dt[m];return k||(m in Ma?m:Dt[m]=pn(m)||m)}var Cn=/^(none|table(?!-c[ea]).+)/,hs={position:"absolute",visibility:"hidden",display:"block"},Ua={letterSpacing:"0",fontWeight:"400"};function Ea(m,k,R){var M=gt.exec(k);return M?Math.max(0,M[2]-(R||0))+(M[3]||"px"):k}function wi(m,k,R,M,K,f){var g=k==="width"?1:0,T=0,A=0;if(R===(M?"border":"content"))return 0;for(;g<4;g+=2)R==="margin"&&(A+=v.css(m,R+rt[g],!0,K)),M?(R==="content"&&(A-=v.css(m,"padding"+rt[g],!0,K)),R!=="margin"&&(A-=v.css(m,"border"+rt[g]+"Width",!0,K))):(A+=v.css(m,"padding"+rt[g],!0,K),R!=="padding"?A+=v.css(m,"border"+rt[g]+"Width",!0,K):T+=v.css(m,"border"+rt[g]+"Width",!0,K));return!M&&f>=0&&(A+=Math.max(0,Math.ceil(m["offset"+k[0].toUpperCase()+k.slice(1)]-f-A-T-.5))||0),A}function Ki(m,k,R){var M=Zn(m),K=!b.boxSizingReliable()||R,f=K&&v.css(m,"boxSizing",!1,M)==="border-box",g=f,T=Ir(m,k,M),A="offset"+k[0].toUpperCase()+k.slice(1);if(aa.test(T)){if(!R)return T;T="auto"}return(!b.boxSizingReliable()&&f||!b.reliableTrDimensions()&&W(m,"tr")||T==="auto"||!parseFloat(T)&&v.css(m,"display",!1,M)==="inline")&&m.getClientRects().length&&(f=v.css(m,"boxSizing",!1,M)==="border-box",g=A in m,g&&(T=m[A])),T=parseFloat(T)||0,T+wi(m,k,R||(f?"border":"content"),g,M,T)+"px"}v.extend({cssHooks:{opacity:{get:function(m,k){if(k){var R=Ir(m,"opacity");return R===""?"1":R}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(m,k,R,M){if(!(!m||m.nodeType===3||m.nodeType===8||!m.style)){var K,f,g,T=V(k),A=qn.test(k),B=m.style;if(A||(k=_n(T)),g=v.cssHooks[k]||v.cssHooks[T],R!==void 0){if(f=typeof R,f==="string"&&(K=gt.exec(R))&&K[1]&&(R=zi(m,k,K),f="number"),R==null||R!==R)return;f==="number"&&!A&&(R+=K&&K[3]||(v.cssNumber[T]?"":"px")),!b.clearCloneStyle&&R===""&&k.indexOf("background")===0&&(B[k]="inherit"),(!g||!("set"in g)||(R=g.set(m,R,M))!==void 0)&&(A?B.setProperty(k,R):B[k]=R)}else return g&&"get"in g&&(K=g.get(m,!1,M))!==void 0?K:B[k]}},css:function(m,k,R,M){var K,f,g,T=V(k),A=qn.test(k);return A||(k=_n(T)),g=v.cssHooks[k]||v.cssHooks[T],g&&"get"in g&&(K=g.get(m,!0,R)),K===void 0&&(K=Ir(m,k,M)),K==="normal"&&k in Ua&&(K=Ua[k]),R===""||R?(f=parseFloat(K),R===!0||isFinite(f)?f||0:K):K}}),v.each(["height","width"],function(m,k){v.cssHooks[k]={get:function(R,M,K){if(M)return Cn.test(v.css(R,"display"))&&(!R.getClientRects().length||!R.getBoundingClientRect().width)?Xn(R,hs,function(){return Ki(R,k,K)}):Ki(R,k,K)},set:function(R,M,K){var f,g=Zn(R),T=!b.scrollboxSize()&&g.position==="absolute",A=T||K,B=A&&v.css(R,"boxSizing",!1,g)==="border-box",U=K?wi(R,k,K,B,g):0;return B&&T&&(U-=Math.ceil(R["offset"+k[0].toUpperCase()+k.slice(1)]-parseFloat(g[k])-wi(R,k,"border",!1,g)-.5)),U&&(f=gt.exec(M))&&(f[3]||"px")!=="px"&&(R.style[k]=M,M=v.css(R,k)),Ea(R,M,U)}}}),v.cssHooks.marginLeft=fi(b.reliableMarginLeft,function(m,k){if(k)return(parseFloat(Ir(m,"marginLeft"))||m.getBoundingClientRect().left-Xn(m,{marginLeft:0},function(){return m.getBoundingClientRect().left}))+"px"}),v.each({margin:"",padding:"",border:"Width"},function(m,k){v.cssHooks[m+k]={expand:function(R){for(var M=0,K={},f=typeof R=="string"?R.split(" "):[R];M<4;M++)K[m+rt[M]+k]=f[M]||f[M-2]||f[0];return K}},m!=="margin"&&(v.cssHooks[m+k].set=Ea)}),v.fn.extend({css:function(m,k){return Me(this,function(R,M,K){var f,g,T={},A=0;if(Array.isArray(M)){for(f=Zn(R),g=M.length;A<g;A++)T[M[A]]=v.css(R,M[A],!1,f);return T}return K!==void 0?v.style(R,M,K):v.css(R,M)},m,k,arguments.length>1)}});function fr(m,k,R,M,K){return new fr.prototype.init(m,k,R,M,K)}v.Tween=fr,fr.prototype={constructor:fr,init:function(m,k,R,M,K,f){this.elem=m,this.prop=R,this.easing=K||v.easing._default,this.options=k,this.start=this.now=this.cur(),this.end=M,this.unit=f||(v.cssNumber[R]?"":"px")},cur:function(){var m=fr.propHooks[this.prop];return m&&m.get?m.get(this):fr.propHooks._default.get(this)},run:function(m){var k,R=fr.propHooks[this.prop];return this.options.duration?this.pos=k=v.easing[this.easing](m,this.options.duration*m,0,1,this.options.duration):this.pos=k=m,this.now=(this.end-this.start)*k+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),R&&R.set?R.set(this):fr.propHooks._default.set(this),this}},fr.prototype.init.prototype=fr.prototype,fr.propHooks={_default:{get:function(m){var k;return m.elem.nodeType!==1||m.elem[m.prop]!=null&&m.elem.style[m.prop]==null?m.elem[m.prop]:(k=v.css(m.elem,m.prop,""),!k||k==="auto"?0:k)},set:function(m){v.fx.step[m.prop]?v.fx.step[m.prop](m):m.elem.nodeType===1&&(v.cssHooks[m.prop]||m.elem.style[_n(m.prop)]!=null)?v.style(m.elem,m.prop,m.now+m.unit):m.elem[m.prop]=m.now}}},fr.propHooks.scrollTop=fr.propHooks.scrollLeft={set:function(m){m.elem.nodeType&&m.elem.parentNode&&(m.elem[m.prop]=m.now)}},v.easing={linear:function(m){return m},swing:function(m){return .5-Math.cos(m*Math.PI)/2},_default:"swing"},v.fx=fr.prototype.init,v.fx.step={};var qr,ke,Ze=/^(?:toggle|show|hide)$/,ht=/queueHooks$/;function St(){ke&&(w.hidden===!1&&e.requestAnimationFrame?e.requestAnimationFrame(St):e.setTimeout(St,v.fx.interval),v.fx.tick())}function ar(){return e.setTimeout(function(){qr=void 0}),qr=Date.now()}function Yn(m,k){var R,M=0,K={height:m};for(k=k?1:0;M<4;M+=2-k)R=rt[M],K["margin"+R]=K["padding"+R]=m;return k&&(K.opacity=K.width=m),K}function Gt(m,k,R){for(var M,K=(ni.tweeners[k]||[]).concat(ni.tweeners["*"]),f=0,g=K.length;f<g;f++)if(M=K[f].call(R,k,m))return M}function Jn(m,k,R){var M,K,f,g,T,A,B,U,z="width"in k||"height"in k,Y=this,X={},me=m.style,Pe=m.nodeType&&Er(m),De=ae.get(m,"fxshow");R.queue||(g=v._queueHooks(m,"fx"),g.unqueued==null&&(g.unqueued=0,T=g.empty.fire,g.empty.fire=function(){g.unqueued||T()}),g.unqueued++,Y.always(function(){Y.always(function(){g.unqueued--,v.queue(m,"fx").length||g.empty.fire()})}));for(M in k)if(K=k[M],Ze.test(K)){if(delete k[M],f=f||K==="toggle",K===(Pe?"hide":"show"))if(K==="show"&&De&&De[M]!==void 0)Pe=!0;else continue;X[M]=De&&De[M]||v.style(m,M)}if(A=!v.isEmptyObject(k),!(!A&&v.isEmptyObject(X))){z&&m.nodeType===1&&(R.overflow=[me.overflow,me.overflowX,me.overflowY],B=De&&De.display,B==null&&(B=ae.get(m,"display")),U=v.css(m,"display"),U==="none"&&(B?U=B:(dn([m],!0),B=m.style.display||B,U=v.css(m,"display"),dn([m]))),(U==="inline"||U==="inline-block"&&B!=null)&&v.css(m,"float")==="none"&&(A||(Y.done(function(){me.display=B}),B==null&&(U=me.display,B=U==="none"?"":U)),me.display="inline-block")),R.overflow&&(me.overflow="hidden",Y.always(function(){me.overflow=R.overflow[0],me.overflowX=R.overflow[1],me.overflowY=R.overflow[2]})),A=!1;for(M in X)A||(De?"hidden"in De&&(Pe=De.hidden):De=ae.access(m,"fxshow",{display:B}),f&&(De.hidden=!Pe),Pe&&dn([m],!0),Y.done(function(){Pe||dn([m]),ae.remove(m,"fxshow");for(M in X)v.style(m,M,X[M])})),A=Gt(Pe?De[M]:0,M,Y),M in De||(De[M]=A.start,Pe&&(A.end=A.start,A.start=0))}}function Ws(m,k){var R,M,K,f,g;for(R in m)if(M=V(R),K=k[M],f=m[R],Array.isArray(f)&&(K=f[1],f=m[R]=f[0]),R!==M&&(m[M]=f,delete m[R]),g=v.cssHooks[M],g&&"expand"in g){f=g.expand(f),delete m[M];for(R in f)R in m||(m[R]=f[R],k[R]=K)}else k[M]=K}function ni(m,k,R){var M,K,f=0,g=ni.prefilters.length,T=v.Deferred().always(function(){delete A.elem}),A=function(){if(K)return!1;for(var z=qr||ar(),Y=Math.max(0,B.startTime+B.duration-z),X=Y/B.duration||0,me=1-X,Pe=0,De=B.tweens.length;Pe<De;Pe++)B.tweens[Pe].run(me);return T.notifyWith(m,[B,me,Y]),me<1&&De?Y:(De||T.notifyWith(m,[B,1,0]),T.resolveWith(m,[B]),!1)},B=T.promise({elem:m,props:v.extend({},k),opts:v.extend(!0,{specialEasing:{},easing:v.easing._default},R),originalProperties:k,originalOptions:R,startTime:qr||ar(),duration:R.duration,tweens:[],createTween:function(z,Y){var X=v.Tween(m,B.opts,z,Y,B.opts.specialEasing[z]||B.opts.easing);return B.tweens.push(X),X},stop:function(z){var Y=0,X=z?B.tweens.length:0;if(K)return this;for(K=!0;Y<X;Y++)B.tweens[Y].run(1);return z?(T.notifyWith(m,[B,1,0]),T.resolveWith(m,[B,z])):T.rejectWith(m,[B,z]),this}}),U=B.props;for(Ws(U,B.opts.specialEasing);f<g;f++)if(M=ni.prefilters[f].call(B,m,U,B.opts),M)return C(M.stop)&&(v._queueHooks(B.elem,B.opts.queue).stop=M.stop.bind(M)),M;return v.map(U,Gt,B),C(B.opts.start)&&B.opts.start.call(m,B),B.progress(B.opts.progress).done(B.opts.done,B.opts.complete).fail(B.opts.fail).always(B.opts.always),v.fx.timer(v.extend(A,{elem:m,anim:B,queue:B.opts.queue})),B}v.Animation=v.extend(ni,{tweeners:{"*":[function(m,k){var R=this.createTween(m,k);return zi(R.elem,m,gt.exec(k),R),R}]},tweener:function(m,k){C(m)?(k=m,m=["*"]):m=m.match(G);for(var R,M=0,K=m.length;M<K;M++)R=m[M],ni.tweeners[R]=ni.tweeners[R]||[],ni.tweeners[R].unshift(k)},prefilters:[Jn],prefilter:function(m,k){k?ni.prefilters.unshift(m):ni.prefilters.push(m)}}),v.speed=function(m,k,R){var M=m&&typeof m=="object"?v.extend({},m):{complete:R||!R&&k||C(m)&&m,duration:m,easing:R&&k||k&&!C(k)&&k};return v.fx.off?M.duration=0:typeof M.duration!="number"&&(M.duration in v.fx.speeds?M.duration=v.fx.speeds[M.duration]:M.duration=v.fx.speeds._default),(M.queue==null||M.queue===!0)&&(M.queue="fx"),M.old=M.complete,M.complete=function(){C(M.old)&&M.old.call(this),M.queue&&v.dequeue(this,M.queue)},M},v.fn.extend({fadeTo:function(m,k,R,M){return this.filter(Er).css("opacity",0).show().end().animate({opacity:k},m,R,M)},animate:function(m,k,R,M){var K=v.isEmptyObject(m),f=v.speed(k,R,M),g=function(){var T=ni(this,v.extend({},m),f);(K||ae.get(this,"finish"))&&T.stop(!0)};return g.finish=g,K||f.queue===!1?this.each(g):this.queue(f.queue,g)},stop:function(m,k,R){var M=function(K){var f=K.stop;delete K.stop,f(R)};return typeof m!="string"&&(R=k,k=m,m=void 0),k&&this.queue(m||"fx",[]),this.each(function(){var K=!0,f=m!=null&&m+"queueHooks",g=v.timers,T=ae.get(this);if(f)T[f]&&T[f].stop&&M(T[f]);else for(f in T)T[f]&&T[f].stop&&ht.test(f)&&M(T[f]);for(f=g.length;f--;)g[f].elem===this&&(m==null||g[f].queue===m)&&(g[f].anim.stop(R),K=!1,g.splice(f,1));(K||!R)&&v.dequeue(this,m)})},finish:function(m){return m!==!1&&(m=m||"fx"),this.each(function(){var k,R=ae.get(this),M=R[m+"queue"],K=R[m+"queueHooks"],f=v.timers,g=M?M.length:0;for(R.finish=!0,v.queue(this,m,[]),K&&K.stop&&K.stop.call(this,!0),k=f.length;k--;)f[k].elem===this&&f[k].queue===m&&(f[k].anim.stop(!0),f.splice(k,1));for(k=0;k<g;k++)M[k]&&M[k].finish&&M[k].finish.call(this);delete R.finish})}}),v.each(["toggle","show","hide"],function(m,k){var R=v.fn[k];v.fn[k]=function(M,K,f){return M==null||typeof M=="boolean"?R.apply(this,arguments):this.animate(Yn(k,!0),M,K,f)}}),v.each({slideDown:Yn("show"),slideUp:Yn("hide"),slideToggle:Yn("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(m,k){v.fn[m]=function(R,M,K){return this.animate(k,R,M,K)}}),v.timers=[],v.fx.tick=function(){var m,k=0,R=v.timers;for(qr=Date.now();k<R.length;k++)m=R[k],!m()&&R[k]===m&&R.splice(k--,1);R.length||v.fx.stop(),qr=void 0},v.fx.timer=function(m){v.timers.push(m),v.fx.start()},v.fx.interval=13,v.fx.start=function(){ke||(ke=!0,St())},v.fx.stop=function(){ke=null},v.fx.speeds={slow:600,fast:200,_default:400},v.fn.delay=function(m,k){return m=v.fx&&v.fx.speeds[m]||m,k=k||"fx",this.queue(k,function(R,M){var K=e.setTimeout(R,m);M.stop=function(){e.clearTimeout(K)}})},function(){var m=w.createElement("input"),k=w.createElement("select"),R=k.appendChild(w.createElement("option"));m.type="checkbox",b.checkOn=m.value!=="",b.optSelected=R.selected,m=w.createElement("input"),m.value="t",m.type="radio",b.radioValue=m.value==="t"}();var Kr,ds=v.expr.attrHandle;v.fn.extend({attr:function(m,k){return Me(this,v.attr,m,k,arguments.length>1)},removeAttr:function(m){return this.each(function(){v.removeAttr(this,m)})}}),v.extend({attr:function(m,k,R){var M,K,f=m.nodeType;if(!(f===3||f===8||f===2)){if(typeof m.getAttribute>"u")return v.prop(m,k,R);if((f!==1||!v.isXMLDoc(m))&&(K=v.attrHooks[k.toLowerCase()]||(v.expr.match.bool.test(k)?Kr:void 0)),R!==void 0){if(R===null){v.removeAttr(m,k);return}return K&&"set"in K&&(M=K.set(m,R,k))!==void 0?M:(m.setAttribute(k,R+""),R)}return K&&"get"in K&&(M=K.get(m,k))!==null?M:(M=v.find.attr(m,k),M==null?void 0:M)}},attrHooks:{type:{set:function(m,k){if(!b.radioValue&&k==="radio"&&W(m,"input")){var R=m.value;return m.setAttribute("type",k),R&&(m.value=R),k}}}},removeAttr:function(m,k){var R,M=0,K=k&&k.match(G);if(K&&m.nodeType===1)for(;R=K[M++];)m.removeAttribute(R)}}),Kr={set:function(m,k,R){return k===!1?v.removeAttr(m,R):m.setAttribute(R,R),R}},v.each(v.expr.match.bool.source.match(/\w+/g),function(m,k){var R=ds[k]||v.find.attr;ds[k]=function(M,K,f){var g,T,A=K.toLowerCase();return f||(T=ds[A],ds[A]=g,g=R(M,K,f)!=null?A:null,ds[A]=T),g}});var go=/^(?:input|select|textarea|button)$/i,Ja=/^(?:a|area)$/i;v.fn.extend({prop:function(m,k){return Me(this,v.prop,m,k,arguments.length>1)},removeProp:function(m){return this.each(function(){delete this[v.propFix[m]||m]})}}),v.extend({prop:function(m,k,R){var M,K,f=m.nodeType;if(!(f===3||f===8||f===2))return(f!==1||!v.isXMLDoc(m))&&(k=v.propFix[k]||k,K=v.propHooks[k]),R!==void 0?K&&"set"in K&&(M=K.set(m,R,k))!==void 0?M:m[k]=R:K&&"get"in K&&(M=K.get(m,k))!==null?M:m[k]},propHooks:{tabIndex:{get:function(m){var k=v.find.attr(m,"tabindex");return k?parseInt(k,10):go.test(m.nodeName)||Ja.test(m.nodeName)&&m.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),b.optSelected||(v.propHooks.selected={get:function(m){var k=m.parentNode;return k&&k.parentNode&&k.parentNode.selectedIndex,null},set:function(m){var k=m.parentNode;k&&(k.selectedIndex,k.parentNode&&k.parentNode.selectedIndex)}}),v.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){v.propFix[this.toLowerCase()]=this});function fn(m){var k=m.match(G)||[];return k.join(" ")}function hi(m){return m.getAttribute&&m.getAttribute("class")||""}function Wi(m){return Array.isArray(m)?m:typeof m=="string"?m.match(G)||[]:[]}v.fn.extend({addClass:function(m){var k,R,M,K,f,g;return C(m)?this.each(function(T){v(this).addClass(m.call(this,T,hi(this)))}):(k=Wi(m),k.length?this.each(function(){if(M=hi(this),R=this.nodeType===1&&" "+fn(M)+" ",R){for(f=0;f<k.length;f++)K=k[f],R.indexOf(" "+K+" ")<0&&(R+=K+" ");g=fn(R),M!==g&&this.setAttribute("class",g)}}):this)},removeClass:function(m){var k,R,M,K,f,g;return C(m)?this.each(function(T){v(this).removeClass(m.call(this,T,hi(this)))}):arguments.length?(k=Wi(m),k.length?this.each(function(){if(M=hi(this),R=this.nodeType===1&&" "+fn(M)+" ",R){for(f=0;f<k.length;f++)for(K=k[f];R.indexOf(" "+K+" ")>-1;)R=R.replace(" "+K+" "," ");g=fn(R),M!==g&&this.setAttribute("class",g)}}):this):this.attr("class","")},toggleClass:function(m,k){var R,M,K,f,g=typeof m,T=g==="string"||Array.isArray(m);return C(m)?this.each(function(A){v(this).toggleClass(m.call(this,A,hi(this),k),k)}):typeof k=="boolean"&&T?k?this.addClass(m):this.removeClass(m):(R=Wi(m),this.each(function(){if(T)for(f=v(this),K=0;K<R.length;K++)M=R[K],f.hasClass(M)?f.removeClass(M):f.addClass(M);else(m===void 0||g==="boolean")&&(M=hi(this),M&&ae.set(this,"__className__",M),this.setAttribute&&this.setAttribute("class",M||m===!1?"":ae.get(this,"__className__")||""))}))},hasClass:function(m){var k,R,M=0;for(k=" "+m+" ";R=this[M++];)if(R.nodeType===1&&(" "+fn(hi(R))+" ").indexOf(k)>-1)return!0;return!1}});var Gs=/\r/g;v.fn.extend({val:function(m){var k,R,M,K=this[0];return arguments.length?(M=C(m),this.each(function(f){var g;this.nodeType===1&&(M?g=m.call(this,f,v(this).val()):g=m,g==null?g="":typeof g=="number"?g+="":Array.isArray(g)&&(g=v.map(g,function(T){return T==null?"":T+""})),k=v.valHooks[this.type]||v.valHooks[this.nodeName.toLowerCase()],(!k||!("set"in k)||k.set(this,g,"value")===void 0)&&(this.value=g))})):K?(k=v.valHooks[K.type]||v.valHooks[K.nodeName.toLowerCase()],k&&"get"in k&&(R=k.get(K,"value"))!==void 0?R:(R=K.value,typeof R=="string"?R.replace(Gs,""):R==null?"":R)):void 0}}),v.extend({valHooks:{option:{get:function(m){var k=v.find.attr(m,"value");return k!=null?k:fn(v.text(m))}},select:{get:function(m){var k,R,M,K=m.options,f=m.selectedIndex,g=m.type==="select-one",T=g?null:[],A=g?f+1:K.length;for(f<0?M=A:M=g?f:0;M<A;M++)if(R=K[M],(R.selected||M===f)&&!R.disabled&&(!R.parentNode.disabled||!W(R.parentNode,"optgroup"))){if(k=v(R).val(),g)return k;T.push(k)}return T},set:function(m,k){for(var R,M,K=m.options,f=v.makeArray(k),g=K.length;g--;)M=K[g],(M.selected=v.inArray(v.valHooks.option.get(M),f)>-1)&&(R=!0);return R||(m.selectedIndex=-1),f}}}}),v.each(["radio","checkbox"],function(){v.valHooks[this]={set:function(m,k){if(Array.isArray(k))return m.checked=v.inArray(v(m).val(),k)>-1}},b.checkOn||(v.valHooks[this].get=function(m){return m.getAttribute("value")===null?"on":m.value})}),b.focusin="onfocusin"in e;var mo=/^(?:focusinfocus|focusoutblur)$/,Oi=function(m){m.stopPropagation()};v.extend(v.event,{trigger:function(m,k,R,M){var K,f,g,T,A,B,U,z,Y=[R||w],X=h.call(m,"type")?m.type:m,me=h.call(m,"namespace")?m.namespace.split("."):[];if(f=z=g=R=R||w,!(R.nodeType===3||R.nodeType===8)&&!mo.test(X+v.event.triggered)&&(X.indexOf(".")>-1&&(me=X.split("."),X=me.shift(),me.sort()),A=X.indexOf(":")<0&&"on"+X,m=m[v.expando]?m:new v.Event(X,typeof m=="object"&&m),m.isTrigger=M?2:3,m.namespace=me.join("."),m.rnamespace=m.namespace?new RegExp("(^|\\.)"+me.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,m.result=void 0,m.target||(m.target=R),k=k==null?[m]:v.makeArray(k,[m]),U=v.event.special[X]||{},!(!M&&U.trigger&&U.trigger.apply(R,k)===!1))){if(!M&&!U.noBubble&&!N(R)){for(T=U.delegateType||X,mo.test(T+X)||(f=f.parentNode);f;f=f.parentNode)Y.push(f),g=f;g===(R.ownerDocument||w)&&Y.push(g.defaultView||g.parentWindow||e)}for(K=0;(f=Y[K++])&&!m.isPropagationStopped();)z=f,m.type=K>1?T:U.bindType||X,B=(ae.get(f,"events")||Object.create(null))[m.type]&&ae.get(f,"handle"),B&&B.apply(f,k),B=A&&f[A],B&&B.apply&&Se(f)&&(m.result=B.apply(f,k),m.result===!1&&m.preventDefault());return m.type=X,!M&&!m.isDefaultPrevented()&&(!U._default||U._default.apply(Y.pop(),k)===!1)&&Se(R)&&A&&C(R[X])&&!N(R)&&(g=R[A],g&&(R[A]=null),v.event.triggered=X,m.isPropagationStopped()&&z.addEventListener(X,Oi),R[X](),m.isPropagationStopped()&&z.removeEventListener(X,Oi),v.event.triggered=void 0,g&&(R[A]=g)),m.result}},simulate:function(m,k,R){var M=v.extend(new v.Event,R,{type:m,isSimulated:!0});v.event.trigger(M,null,k)}}),v.fn.extend({trigger:function(m,k){return this.each(function(){v.event.trigger(m,k,this)})},triggerHandler:function(m,k){var R=this[0];if(R)return v.event.trigger(m,k,R,!0)}}),b.focusin||v.each({focus:"focusin",blur:"focusout"},function(m,k){var R=function(M){v.event.simulate(k,M.target,v.event.fix(M))};v.event.special[k]={setup:function(){var M=this.ownerDocument||this.document||this,K=ae.access(M,k);K||M.addEventListener(m,R,!0),ae.access(M,k,(K||0)+1)},teardown:function(){var M=this.ownerDocument||this.document||this,K=ae.access(M,k)-1;K?ae.access(M,k,K):(M.removeEventListener(m,R,!0),ae.remove(M,k))}}});var xi=e.location,ps={guid:Date.now()},gs=/\?/;v.parseXML=function(m){var k,R;if(!m||typeof m!="string")return null;try{k=new e.DOMParser().parseFromString(m,"text/xml")}catch{}return R=k&&k.getElementsByTagName("parsererror")[0],(!k||R)&&v.error("Invalid XML: "+(R?v.map(R.childNodes,function(M){return M.textContent}).join(`
`):m)),k};var es=/\[\]$/,Zs=/\r?\n/g,ms=/^(?:submit|button|image|reset|file)$/i,Qo=/^(?:input|select|textarea|keygen)/i;function vs(m,k,R,M){var K;if(Array.isArray(k))v.each(k,function(f,g){R||es.test(m)?M(m,g):vs(m+"["+(typeof g=="object"&&g!=null?f:"")+"]",g,R,M)});else if(!R&&_(k)==="object")for(K in k)vs(m+"["+K+"]",k[K],R,M);else M(m,k)}v.param=function(m,k){var R,M=[],K=function(f,g){var T=C(g)?g():g;M[M.length]=encodeURIComponent(f)+"="+encodeURIComponent(T==null?"":T)};if(m==null)return"";if(Array.isArray(m)||m.jquery&&!v.isPlainObject(m))v.each(m,function(){K(this.name,this.value)});else for(R in m)vs(R,m[R],k,K);return M.join("&")},v.fn.extend({serialize:function(){return v.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var m=v.prop(this,"elements");return m?v.makeArray(m):this}).filter(function(){var m=this.type;return this.name&&!v(this).is(":disabled")&&Qo.test(this.nodeName)&&!ms.test(m)&&(this.checked||!Kn.test(m))}).map(function(m,k){var R=v(this).val();return R==null?null:Array.isArray(R)?v.map(R,function(M){return{name:k.name,value:M.replace(Zs,`\r
`)}}):{name:k.name,value:R.replace(Zs,`\r
`)}}).get()}});var $l=/%20/g,Xt=/#.*$/,oa=/([?&])_=[^&]*/,Vn=/^(.*?):[ \t]*([^\r\n]*)$/mg,vo=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Jo=/^(?:GET|HEAD)$/,eu=/^\/\//,yo={},Ca={},_o="*/".concat("*"),ts=w.createElement("a");ts.href=xi.href;function Nr(m){return function(k,R){typeof k!="string"&&(R=k,k="*");var M,K=0,f=k.toLowerCase().match(G)||[];if(C(R))for(;M=f[K++];)M[0]==="+"?(M=M.slice(1)||"*",(m[M]=m[M]||[]).unshift(R)):(m[M]=m[M]||[]).push(R)}}function Sa(m,k,R,M){var K={},f=m===Ca;function g(T){var A;return K[T]=!0,v.each(m[T]||[],function(B,U){var z=U(k,R,M);if(typeof z=="string"&&!f&&!K[z])return k.dataTypes.unshift(z),g(z),!1;if(f)return!(A=z)}),A}return g(k.dataTypes[0])||!K["*"]&&g("*")}function ys(m,k){var R,M,K=v.ajaxSettings.flatOptions||{};for(R in k)k[R]!==void 0&&((K[R]?m:M||(M={}))[R]=k[R]);return M&&v.extend(!0,m,M),m}function tu(m,k,R){for(var M,K,f,g,T=m.contents,A=m.dataTypes;A[0]==="*";)A.shift(),M===void 0&&(M=m.mimeType||k.getResponseHeader("Content-Type"));if(M){for(K in T)if(T[K]&&T[K].test(M)){A.unshift(K);break}}if(A[0]in R)f=A[0];else{for(K in R){if(!A[0]||m.converters[K+" "+A[0]]){f=K;break}g||(g=K)}f=f||g}if(f)return f!==A[0]&&A.unshift(f),R[f]}function nu(m,k,R,M){var K,f,g,T,A,B={},U=m.dataTypes.slice();if(U[1])for(g in m.converters)B[g.toLowerCase()]=m.converters[g];for(f=U.shift();f;)if(m.responseFields[f]&&(R[m.responseFields[f]]=k),!A&&M&&m.dataFilter&&(k=m.dataFilter(k,m.dataType)),A=f,f=U.shift(),f){if(f==="*")f=A;else if(A!=="*"&&A!==f){if(g=B[A+" "+f]||B["* "+f],!g){for(K in B)if(T=K.split(" "),T[1]===f&&(g=B[A+" "+T[0]]||B["* "+T[0]],g)){g===!0?g=B[K]:B[K]!==!0&&(f=T[0],U.unshift(T[1]));break}}if(g!==!0)if(g&&m.throws)k=g(k);else try{k=g(k)}catch(z){return{state:"parsererror",error:g?z:"No conversion from "+A+" to "+f}}}}return{state:"success",data:k}}v.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:xi.href,type:"GET",isLocal:vo.test(xi.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":_o,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":v.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(m,k){return k?ys(ys(m,v.ajaxSettings),k):ys(v.ajaxSettings,m)},ajaxPrefilter:Nr(yo),ajaxTransport:Nr(Ca),ajax:function(m,k){typeof m=="object"&&(k=m,m=void 0),k=k||{};var R,M,K,f,g,T,A,B,U,z,Y=v.ajaxSetup({},k),X=Y.context||Y,me=Y.context&&(X.nodeType||X.jquery)?v(X):v.event,Pe=v.Deferred(),De=v.Callbacks("once memory"),Oe=Y.statusCode||{},tt={},Pt={},It="canceled",pt={readyState:0,getResponseHeader:function(Ot){var bn;if(A){if(!f)for(f={};bn=Vn.exec(K);)f[bn[1].toLowerCase()+" "]=(f[bn[1].toLowerCase()+" "]||[]).concat(bn[2]);bn=f[Ot.toLowerCase()+" "]}return bn==null?null:bn.join(", ")},getAllResponseHeaders:function(){return A?K:null},setRequestHeader:function(Ot,bn){return A==null&&(Ot=Pt[Ot.toLowerCase()]=Pt[Ot.toLowerCase()]||Ot,tt[Ot]=bn),this},overrideMimeType:function(Ot){return A==null&&(Y.mimeType=Ot),this},statusCode:function(Ot){var bn;if(Ot)if(A)pt.always(Ot[pt.status]);else for(bn in Ot)Oe[bn]=[Oe[bn],Ot[bn]];return this},abort:function(Ot){var bn=Ot||It;return R&&R.abort(bn),Sn(0,bn),this}};if(Pe.promise(pt),Y.url=((m||Y.url||xi.href)+"").replace(eu,xi.protocol+"//"),Y.type=k.method||k.type||Y.method||Y.type,Y.dataTypes=(Y.dataType||"*").toLowerCase().match(G)||[""],Y.crossDomain==null){T=w.createElement("a");try{T.href=Y.url,T.href=T.href,Y.crossDomain=ts.protocol+"//"+ts.host!=T.protocol+"//"+T.host}catch{Y.crossDomain=!0}}if(Y.data&&Y.processData&&typeof Y.data!="string"&&(Y.data=v.param(Y.data,Y.traditional)),Sa(yo,Y,k,pt),A)return pt;B=v.event&&Y.global,B&&v.active++===0&&v.event.trigger("ajaxStart"),Y.type=Y.type.toUpperCase(),Y.hasContent=!Jo.test(Y.type),M=Y.url.replace(Xt,""),Y.hasContent?Y.data&&Y.processData&&(Y.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&(Y.data=Y.data.replace($l,"+")):(z=Y.url.slice(M.length),Y.data&&(Y.processData||typeof Y.data=="string")&&(M+=(gs.test(M)?"&":"?")+Y.data,delete Y.data),Y.cache===!1&&(M=M.replace(oa,"$1"),z=(gs.test(M)?"&":"?")+"_="+ps.guid+++z),Y.url=M+z),Y.ifModified&&(v.lastModified[M]&&pt.setRequestHeader("If-Modified-Since",v.lastModified[M]),v.etag[M]&&pt.setRequestHeader("If-None-Match",v.etag[M])),(Y.data&&Y.hasContent&&Y.contentType!==!1||k.contentType)&&pt.setRequestHeader("Content-Type",Y.contentType),pt.setRequestHeader("Accept",Y.dataTypes[0]&&Y.accepts[Y.dataTypes[0]]?Y.accepts[Y.dataTypes[0]]+(Y.dataTypes[0]!=="*"?", "+_o+"; q=0.01":""):Y.accepts["*"]);for(U in Y.headers)pt.setRequestHeader(U,Y.headers[U]);if(Y.beforeSend&&(Y.beforeSend.call(X,pt,Y)===!1||A))return pt.abort();if(It="abort",De.add(Y.complete),pt.done(Y.success),pt.fail(Y.error),R=Sa(Ca,Y,k,pt),!R)Sn(-1,"No Transport");else{if(pt.readyState=1,B&&me.trigger("ajaxSend",[pt,Y]),A)return pt;Y.async&&Y.timeout>0&&(g=e.setTimeout(function(){pt.abort("timeout")},Y.timeout));try{A=!1,R.send(tt,Sn)}catch(Ot){if(A)throw Ot;Sn(-1,Ot)}}function Sn(Ot,bn,ii,Qt){var Wn,rn,Tn,Rn,Gi,sr=bn;A||(A=!0,g&&e.clearTimeout(g),R=void 0,K=Qt||"",pt.readyState=Ot>0?4:0,Wn=Ot>=200&&Ot<300||Ot===304,ii&&(Rn=tu(Y,pt,ii)),!Wn&&v.inArray("script",Y.dataTypes)>-1&&v.inArray("json",Y.dataTypes)<0&&(Y.converters["text script"]=function(){}),Rn=nu(Y,Rn,pt,Wn),Wn?(Y.ifModified&&(Gi=pt.getResponseHeader("Last-Modified"),Gi&&(v.lastModified[M]=Gi),Gi=pt.getResponseHeader("etag"),Gi&&(v.etag[M]=Gi)),Ot===204||Y.type==="HEAD"?sr="nocontent":Ot===304?sr="notmodified":(sr=Rn.state,rn=Rn.data,Tn=Rn.error,Wn=!Tn)):(Tn=sr,(Ot||!sr)&&(sr="error",Ot<0&&(Ot=0))),pt.status=Ot,pt.statusText=(bn||sr)+"",Wn?Pe.resolveWith(X,[rn,sr,pt]):Pe.rejectWith(X,[pt,sr,Tn]),pt.statusCode(Oe),Oe=void 0,B&&me.trigger(Wn?"ajaxSuccess":"ajaxError",[pt,Y,Wn?rn:Tn]),De.fireWith(X,[pt,sr]),B&&(me.trigger("ajaxComplete",[pt,Y]),--v.active||v.event.trigger("ajaxStop")))}return pt},getJSON:function(m,k,R){return v.get(m,k,R,"json")},getScript:function(m,k){return v.get(m,void 0,k,"script")}}),v.each(["get","post"],function(m,k){v[k]=function(R,M,K,f){return C(M)&&(f=f||K,K=M,M=void 0),v.ajax(v.extend({url:R,type:k,dataType:f,data:M,success:K},v.isPlainObject(R)&&R))}}),v.ajaxPrefilter(function(m){var k;for(k in m.headers)k.toLowerCase()==="content-type"&&(m.contentType=m.headers[k]||"")}),v._evalUrl=function(m,k,R){return v.ajax({url:m,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(M){v.globalEval(M,k,R)}})},v.fn.extend({wrapAll:function(m){var k;return this[0]&&(C(m)&&(m=m.call(this[0])),k=v(m,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&k.insertBefore(this[0]),k.map(function(){for(var R=this;R.firstElementChild;)R=R.firstElementChild;return R}).append(this)),this},wrapInner:function(m){return C(m)?this.each(function(k){v(this).wrapInner(m.call(this,k))}):this.each(function(){var k=v(this),R=k.contents();R.length?R.wrapAll(m):k.append(m)})},wrap:function(m){var k=C(m);return this.each(function(R){v(this).wrapAll(k?m.call(this,R):m)})},unwrap:function(m){return this.parent(m).not("body").each(function(){v(this).replaceWith(this.childNodes)}),this}}),v.expr.pseudos.hidden=function(m){return!v.expr.pseudos.visible(m)},v.expr.pseudos.visible=function(m){return!!(m.offsetWidth||m.offsetHeight||m.getClientRects().length)},v.ajaxSettings.xhr=function(){try{return new e.XMLHttpRequest}catch{}};var ru={0:200,1223:204},qa=v.ajaxSettings.xhr();b.cors=!!qa&&"withCredentials"in qa,b.ajax=qa=!!qa,v.ajaxTransport(function(m){var k,R;if(b.cors||qa&&!m.crossDomain)return{send:function(M,K){var f,g=m.xhr();if(g.open(m.type,m.url,m.async,m.username,m.password),m.xhrFields)for(f in m.xhrFields)g[f]=m.xhrFields[f];m.mimeType&&g.overrideMimeType&&g.overrideMimeType(m.mimeType),!m.crossDomain&&!M["X-Requested-With"]&&(M["X-Requested-With"]="XMLHttpRequest");for(f in M)g.setRequestHeader(f,M[f]);k=function(T){return function(){k&&(k=R=g.onload=g.onerror=g.onabort=g.ontimeout=g.onreadystatechange=null,T==="abort"?g.abort():T==="error"?typeof g.status!="number"?K(0,"error"):K(g.status,g.statusText):K(ru[g.status]||g.status,g.statusText,(g.responseType||"text")!=="text"||typeof g.responseText!="string"?{binary:g.response}:{text:g.responseText},g.getAllResponseHeaders()))}},g.onload=k(),R=g.onerror=g.ontimeout=k("error"),g.onabort!==void 0?g.onabort=R:g.onreadystatechange=function(){g.readyState===4&&e.setTimeout(function(){k&&R()})},k=k("abort");try{g.send(m.hasContent&&m.data||null)}catch(T){if(k)throw T}},abort:function(){k&&k()}}}),v.ajaxPrefilter(function(m){m.crossDomain&&(m.contents.script=!1)}),v.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(m){return v.globalEval(m),m}}}),v.ajaxPrefilter("script",function(m){m.cache===void 0&&(m.cache=!1),m.crossDomain&&(m.type="GET")}),v.ajaxTransport("script",function(m){if(m.crossDomain||m.scriptAttrs){var k,R;return{send:function(M,K){k=v("<script>").attr(m.scriptAttrs||{}).prop({charset:m.scriptCharset,src:m.url}).on("load error",R=function(f){k.remove(),R=null,f&&K(f.type==="error"?404:200,f.type)}),w.head.appendChild(k[0])},abort:function(){R&&R()}}}});var bo=[],wo=/(=)\?(?=&|$)|\?\?/;v.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var m=bo.pop()||v.expando+"_"+ps.guid++;return this[m]=!0,m}}),v.ajaxPrefilter("json jsonp",function(m,k,R){var M,K,f,g=m.jsonp!==!1&&(wo.test(m.url)?"url":typeof m.data=="string"&&(m.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&wo.test(m.data)&&"data");if(g||m.dataTypes[0]==="jsonp")return M=m.jsonpCallback=C(m.jsonpCallback)?m.jsonpCallback():m.jsonpCallback,g?m[g]=m[g].replace(wo,"$1"+M):m.jsonp!==!1&&(m.url+=(gs.test(m.url)?"&":"?")+m.jsonp+"="+M),m.converters["script json"]=function(){return f||v.error(M+" was not called"),f[0]},m.dataTypes[0]="json",K=e[M],e[M]=function(){f=arguments},R.always(function(){K===void 0?v(e).removeProp(M):e[M]=K,m[M]&&(m.jsonpCallback=k.jsonpCallback,bo.push(M)),f&&C(K)&&K(f[0]),f=K=void 0}),"script"}),b.createHTMLDocument=function(){var m=w.implementation.createHTMLDocument("").body;return m.innerHTML="<form></form><form></form>",m.childNodes.length===2}(),v.parseHTML=function(m,k,R){if(typeof m!="string")return[];typeof k=="boolean"&&(R=k,k=!1);var M,K,f;return k||(b.createHTMLDocument?(k=w.implementation.createHTMLDocument(""),M=k.createElement("base"),M.href=w.location.href,k.head.appendChild(M)):k=w),K=O.exec(m),f=!R&&[],K?[k.createElement(K[1])]:(K=Hi([m],k,f),f&&f.length&&v(f).remove(),v.merge([],K.childNodes))},v.fn.load=function(m,k,R){var M,K,f,g=this,T=m.indexOf(" ");return T>-1&&(M=fn(m.slice(T)),m=m.slice(0,T)),C(k)?(R=k,k=void 0):k&&typeof k=="object"&&(K="POST"),g.length>0&&v.ajax({url:m,type:K||"GET",dataType:"html",data:k}).done(function(A){f=arguments,g.html(M?v("<div>").append(v.parseHTML(A)).find(M):A)}).always(R&&function(A,B){g.each(function(){R.apply(this,f||[A.responseText,B,A])})}),this},v.expr.pseudos.animated=function(m){return v.grep(v.timers,function(k){return m===k.elem}).length},v.offset={setOffset:function(m,k,R){var M,K,f,g,T,A,B,U=v.css(m,"position"),z=v(m),Y={};U==="static"&&(m.style.position="relative"),T=z.offset(),f=v.css(m,"top"),A=v.css(m,"left"),B=(U==="absolute"||U==="fixed")&&(f+A).indexOf("auto")>-1,B?(M=z.position(),g=M.top,K=M.left):(g=parseFloat(f)||0,K=parseFloat(A)||0),C(k)&&(k=k.call(m,R,v.extend({},T))),k.top!=null&&(Y.top=k.top-T.top+g),k.left!=null&&(Y.left=k.left-T.left+K),"using"in k?k.using.call(m,Y):z.css(Y)}},v.fn.extend({offset:function(m){if(arguments.length)return m===void 0?this:this.each(function(K){v.offset.setOffset(this,m,K)});var k,R,M=this[0];if(M)return M.getClientRects().length?(k=M.getBoundingClientRect(),R=M.ownerDocument.defaultView,{top:k.top+R.pageYOffset,left:k.left+R.pageXOffset}):{top:0,left:0}},position:function(){if(this[0]){var m,k,R,M=this[0],K={top:0,left:0};if(v.css(M,"position")==="fixed")k=M.getBoundingClientRect();else{for(k=this.offset(),R=M.ownerDocument,m=M.offsetParent||R.documentElement;m&&(m===R.body||m===R.documentElement)&&v.css(m,"position")==="static";)m=m.parentNode;m&&m!==M&&m.nodeType===1&&(K=v(m).offset(),K.top+=v.css(m,"borderTopWidth",!0),K.left+=v.css(m,"borderLeftWidth",!0))}return{top:k.top-K.top-v.css(M,"marginTop",!0),left:k.left-K.left-v.css(M,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var m=this.offsetParent;m&&v.css(m,"position")==="static";)m=m.offsetParent;return m||Je})}}),v.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(m,k){var R=k==="pageYOffset";v.fn[m]=function(M){return Me(this,function(K,f,g){var T;if(N(K)?T=K:K.nodeType===9&&(T=K.defaultView),g===void 0)return T?T[k]:K[f];T?T.scrollTo(R?T.pageXOffset:g,R?g:T.pageYOffset):K[f]=g},m,M,arguments.length)}}),v.each(["top","left"],function(m,k){v.cssHooks[k]=fi(b.pixelPosition,function(R,M){if(M)return M=Ir(R,k),aa.test(M)?v(R).position()[k]+"px":M})}),v.each({Height:"height",Width:"width"},function(m,k){v.each({padding:"inner"+m,content:k,"":"outer"+m},function(R,M){v.fn[M]=function(K,f){var g=arguments.length&&(R||typeof K!="boolean"),T=R||(K===!0||f===!0?"margin":"border");return Me(this,function(A,B,U){var z;return N(A)?M.indexOf("outer")===0?A["inner"+m]:A.document.documentElement["client"+m]:A.nodeType===9?(z=A.documentElement,Math.max(A.body["scroll"+m],z["scroll"+m],A.body["offset"+m],z["offset"+m],z["client"+m])):U===void 0?v.css(A,B,T):v.style(A,B,U,T)},k,g?K:void 0,g)}})}),v.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(m,k){v.fn[k]=function(R){return this.on(k,R)}}),v.fn.extend({bind:function(m,k,R){return this.on(m,null,k,R)},unbind:function(m,k){return this.off(m,null,k)},delegate:function(m,k,R,M){return this.on(k,m,R,M)},undelegate:function(m,k,R){return arguments.length===1?this.off(m,"**"):this.off(k,m||"**",R)},hover:function(m,k){return this.mouseenter(m).mouseleave(k||m)}}),v.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(m,k){v.fn[k]=function(R,M){return arguments.length>0?this.on(k,null,R,M):this.trigger(k)}});var vn=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;v.proxy=function(m,k){var R,M,K;if(typeof k=="string"&&(R=m[k],k=m,m=R),!!C(m))return M=i.call(arguments,2),K=function(){return m.apply(k||this,M.concat(i.call(arguments)))},K.guid=m.guid=m.guid||v.guid++,K},v.holdReady=function(m){m?v.readyWait++:v.ready(!0)},v.isArray=Array.isArray,v.parseJSON=JSON.parse,v.nodeName=W,v.isFunction=C,v.isWindow=N,v.camelCase=V,v.type=_,v.now=Date.now,v.isNumeric=function(m){var k=v.type(m);return(k==="number"||k==="string")&&!isNaN(m-parseFloat(m))},v.trim=function(m){return m==null?"":(m+"").replace(vn,"$1")},typeof define=="function"&&define.amd&&define("jquery",[],function(){return v});var jl=e.jQuery,ri=e.$;return v.noConflict=function(m){return e.$===v&&(e.$=ri),m&&e.jQuery===v&&(e.jQuery=jl),v},typeof t>"u"&&(e.jQuery=e.$=v),v})});var x1=$e((PF,w1)=>{w1.exports=TP;var b1=!1,hh;typeof document<"u"&&(hh=document.createElement("div"),hh.innerHTML='  <link/><table></table><a href="/a">a</a><input type="checkbox"/>',b1=!hh.getElementsByTagName("link").length,hh=void 0);var Yr={legend:[1,"<fieldset>","</fieldset>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],_default:b1?[1,"X<div>","</div>"]:[0,"",""]};Yr.td=Yr.th=[3,"<table><tbody><tr>","</tr></tbody></table>"];Yr.option=Yr.optgroup=[1,'<select multiple="multiple">',"</select>"];Yr.thead=Yr.tbody=Yr.colgroup=Yr.caption=Yr.tfoot=[1,"<table>","</table>"];Yr.polyline=Yr.ellipse=Yr.polygon=Yr.circle=Yr.text=Yr.line=Yr.path=Yr.rect=Yr.g=[1,'<svg xmlns="http://www.w3.org/2000/svg" version="1.1">',"</svg>"];function TP(e,t){if(typeof e!="string")throw new TypeError("String expected");t||(t=document);var n=/<([\w:]+)/.exec(e);if(!n)return t.createTextNode(e);e=e.replace(/^\s+|\s+$/g,"");var r=n[1];if(r=="body"){var l=t.createElement("html");return l.innerHTML=e,l.removeChild(l.lastChild)}var i=Yr[r]||Yr._default,a=i[0],s=i[1],o=i[2],l=t.createElement("div");for(l.innerHTML=s+e+o;a--;)l=l.lastChild;if(l.firstChild==l.lastChild)return l.removeChild(l.firstChild);for(var c=t.createDocumentFragment();l.firstChild;)c.appendChild(l.removeChild(l.firstChild));return c}});var S1=$e((DF,C1)=>{var LP=/^(?:submit|button|image|reset|file)$/i,kP=/^(?:input|select|textarea|keygen)/i,E1=/(\[[^\[\]]*\])/g;function AP(e,t){typeof t!="object"?t={hash:!!t}:t.hash===void 0&&(t.hash=!0);for(var n=t.hash?{}:"",r=t.serializer||(t.hash?NP:PP),i=e&&e.elements?e.elements:[],a=Object.create(null),s=0;s<i.length;++s){var o=i[s];if(!(!t.disabled&&o.disabled||!o.name)&&!(!kP.test(o.nodeName)||LP.test(o.type))){var l=o.name,c=o.value;if((o.type==="checkbox"||o.type==="radio")&&!o.checked&&(c=void 0),t.empty){if(o.type==="checkbox"&&!o.checked&&(c=""),o.type==="radio"&&(!a[o.name]&&!o.checked?a[o.name]=!1:o.checked&&(a[o.name]=!0)),!c&&o.type=="radio")continue}else if(!c)continue;if(o.type==="select-multiple"){c=[];for(var h=o.options,p=!1,E=0;E<h.length;++E){var b=h[E],C=t.empty&&!b.value,N=b.value||C;b.selected&&N&&(p=!0,t.hash&&l.slice(l.length-2)!=="[]"?n=r(n,l+"[]",b.value):n=r(n,l,b.value))}!p&&t.empty&&(n=r(n,l,""));continue}n=r(n,l,c)}}if(t.empty)for(var l in a)a[l]||(n=r(n,l,""));return n}function IP(e){var t=[],n=/^([^\[\]]*)/,r=new RegExp(E1),i=n.exec(e);for(i[1]&&t.push(i[1]);(i=r.exec(e))!==null;)t.push(i[1]);return t}function gl(e,t,n){if(t.length===0)return e=n,e;var r=t.shift(),i=r.match(/^\[(.+?)\]$/);if(r==="[]")return e=e||[],Array.isArray(e)?e.push(gl(null,t,n)):(e._values=e._values||[],e._values.push(gl(null,t,n))),e;if(!i)e[r]=gl(e[r],t,n);else{var a=i[1],s=+a;isNaN(s)?(e=e||{},e[a]=gl(e[a],t,n)):(e=e||[],e[s]=gl(e[s],t,n))}return e}function NP(e,t,n){var r=t.match(E1);if(r){var i=IP(t);gl(e,i,n)}else{var a=e[t];a?(Array.isArray(a)||(e[t]=[a]),e[t].push(n)):e[t]=n}return e}function PP(e,t,n){return n=n.replace(/(\r)?\n/g,`\r
`),n=encodeURIComponent(n),n=n.replace(/%20/g,"+"),e+(e?"&":"")+encodeURIComponent(t)+"="+n}C1.exports=AP});var L1=$e((RF,T1)=>{"use strict";function ig(e){if(!(e&&typeof e=="object"))return e;if(Object.prototype.toString.call(e)=="[object Date]")return new Date(e.getTime());if(Array.isArray(e))return e.map(ig);var t={};return Object.keys(e).forEach(function(n){t[n]=ig(e[n])}),t}T1.exports=ig});var A1=$e((OF,k1)=>{var ag=x1(),DP=S1(),Cu=L1(),RP=function(t){var n=document.createElement("form");n.classList.add("vex-dialog-form");var r=document.createElement("h3");r.classList.add("vex-dialog-title"),r.appendChild(t.title instanceof window.Node?t.title:ag(t.title));var i=document.createElement("div");i.classList.add("vex-dialog-message"),typeof t.messageClassName=="string"&&t.messageClassName.split(/\s+/).forEach(function(o){o&&i.classList.add(o)}),i.appendChild(t.message instanceof window.Node?t.message:ag(t.message));var a=document.createElement("div");a.classList.add("vex-dialog-input"),a.appendChild(t.input instanceof window.Node?t.input:ag(t.input));var s=document.createElement("div");return s.classList.add("vex-auto-close-timer"),n.appendChild(r),n.appendChild(i),n.appendChild(a),n.appendChild(s),n},OP=function(t){var n=document.createElement("div");n.classList.add("vex-dialog-buttons");for(var r=0;r<t.length;r++){var i=t[r],a=document.createElement("button");a.type=i.type,a.textContent=i.text,a.className=i.className,a.classList.add("vex-dialog-button"),r===0?a.classList.add("vex-first"):r===t.length-1&&a.classList.add("vex-last"),function(s){a.addEventListener("click",function(o){s.click&&s.click.call(this,o)}.bind(this))}.bind(this)(i),n.appendChild(a)}return n},BP=function(t){var n={name:"dialog",open:function(i){var a=Object.assign({},Cu(this.defaultOptions),i);a.unsafeMessage&&!a.message?a.message=a.unsafeMessage:a.message&&(a.message=t._escapeHtml(a.message));var s=a.unsafeContent=RP(a),o=t.open(a);a.yesText!==""&&(a.buttons[0].text=a.yesText),a.noText!==""&&(a.buttons[1].text=a.noText);var l=a.beforeClose&&a.beforeClose.bind(o);if(o.options.beforeClose=function(){var p=l?l():!0;return p&&a.callback(this.value||!1),p}.bind(o),s.appendChild(OP.call(o,a.buttons)),o.form=s,s.addEventListener("submit",a.onSubmit.bind(o)),this.addAutoCloseTimer(o,a),a.focusFirstInput){var c=o.contentEl.querySelector("button, input, select, textarea");c&&c.focus()}return o},alert:function(r){return typeof r=="string"&&(r={message:r}),r=Object.assign({},Cu(this.defaultOptions),Cu(this.defaultAlertOptions),r),this.open(r)},confirm:function(r){if(typeof r!="object"||typeof r.callback!="function")throw new Error("dialog.confirm(options) requires options.callback.");return r=Object.assign({},Cu(this.defaultOptions),Cu(this.defaultConfirmOptions),r),this.open(r)},prompt:function(r){if(typeof r!="object"||typeof r.callback!="function")throw new Error("dialog.prompt(options) requires options.callback.");var i=Object.assign({},Cu(this.defaultOptions),Cu(this.defaultPromptOptions)),a={unsafeMessage:'<label for="vex">'+t._escapeHtml(r.label||i.label)+"</label>",input:'<input name="vex" type="text" class="vex-dialog-prompt-input" placeholder="'+t._escapeHtml(r.placeholder||i.placeholder)+'" value="'+t._escapeHtml(r.value||i.value)+'" />'};r=Object.assign(i,a,r);var s=r.callback;return r.callback=function(l){s(l)},this.open(r)},addAutoCloseTimer:function(r,i){if(i.autoClose&&typeof i.autoClose=="number"){var a=r.form.querySelector(".vex-auto-close-timer"),s=i.autoClose;a.textContent=s--;var o=window.setInterval(function(){s||(r.close(),clearInterval(o)),a.textContent=s--},1e3)}}};return n.buttons={YES:{text:"OK",type:"submit",className:"vex-dialog-button-primary",click:function(){this.value=!0}},NO:{text:"Cancel",type:"button",className:"vex-dialog-button-secondary",click:function(){this.value=!1,this.close()}}},n.defaultOptions={callback:function(){},afterOpen:function(){},title:"",message:"",messageClassName:"",input:"",yesText:"",noText:"",buttons:[n.buttons.YES,n.buttons.NO],showCloseButton:!1,onSubmit:function(i){return i.preventDefault(),this.options.input&&(this.value=DP(this.form,{hash:!0})),this.close()},focusFirstInput:!0},n.defaultAlertOptions={buttons:[n.buttons.YES]},n.defaultPromptOptions={label:"Prompt:",placeholder:"",value:""},n.defaultConfirmOptions={},n};k1.exports=BP});var M1=$e((B1,lg)=>{(function(e){if(typeof B1=="object"&&typeof lg<"u")lg.exports=e();else if(typeof define=="function"&&define.amd)define([],e);else{var t;t=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this,t.db=e()}})(function(){var e;return function t(n,r,i){function a(l,c){if(!r[l]){if(!n[l]){var h=typeof wr=="function"&&wr;if(!c&&h)return h(l,!0);if(s)return s(l,!0);var p=new Error("Cannot find module '"+l+"'");throw p.code="MODULE_NOT_FOUND",p}var E=r[l]={exports:{}};n[l][0].call(E.exports,function(b){var C=n[l][1][b];return a(C||b)},E,E.exports,t,n,r,i)}return r[l].exports}for(var s=typeof wr=="function"&&wr,o=0;o<i.length;o++)a(i[o]);return a}({1:[function(t,n,r){"use strict";function i(o){if(Array.isArray(o)){for(var l=0,c=Array(o.length);l<o.length;l++)c[l]=o[l];return c}return Array.from(o)}var a=function(){function o(l,c){var h=[],p=!0,E=!1,b=void 0;try{for(var C,N=l[Symbol.iterator]();!(p=(C=N.next()).done)&&(h.push(C.value),!c||h.length!==c);p=!0);}catch(w){E=!0,b=w}finally{try{!p&&N.return&&N.return()}finally{if(E)throw b}}return h}return function(l,c){if(Array.isArray(l))return l;if(Symbol.iterator in Object(l))return o(l,c);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol?"symbol":typeof o};(function(o){function l($){return $&&(typeof $>"u"?"undefined":s($))==="object"}function c($){var Z=Object.keys($).sort();if(Z.length===1){var ce=Z[0],q=$[ce],W=void 0,O=void 0;switch(ce){case"eq":W="only";break;case"gt":W="lowerBound",O=!0;break;case"lt":W="upperBound",O=!0;break;case"gte":W="lowerBound";break;case"lte":W="upperBound";break;default:throw new TypeError("`"+ce+"` is not a valid key")}return[W,[q,O]]}var re=$[Z[0]],le=$[Z[1]],ie=Z.join("-");switch(ie){case"gt-lt":case"gt-lte":case"gte-lt":case"gte-lte":return["bound",[re,le,Z[0]==="gt",Z[1]==="lt"]];default:throw new TypeError("`"+ie+"` are conflicted keys")}}function h($){if($&&(typeof $>"u"?"undefined":s($))==="object"&&!($ instanceof p)){var Z=c($),ce=a(Z,2),q=ce[0],W=ce[1];return p[q].apply(p,i(W))}return $}var p=o.IDBKeyRange||o.webkitIDBKeyRange,E={readonly:"readonly",readwrite:"readwrite"},b=Object.prototype.hasOwnProperty,C=function($){return $},N=o.indexedDB||o.webkitIndexedDB||o.mozIndexedDB||o.oIndexedDB||o.msIndexedDB||o.shimIndexedDB||function(){throw new Error("IndexedDB required")}(),w={},I=["abort","error","versionchange"],S=function($,Z,ce,q){var W=this,O=null,re=function(ie,oe,Q,j,H,G,fe){return new Promise(function(pe,de){var Ae=void 0;try{Ae=ie?p[ie].apply(p,i(oe)):null}catch(Se){return void de(Se)}G=G||[],H=H||null;var Ie=[],ve=0,Te=[Ae],Me=Z.transaction($,O?E.readwrite:E.readonly);Me.onerror=function(Se){return de(Se)},Me.onabort=function(Se){return de(Se)},Me.oncomplete=function(){return pe(Ie)};var Ge=Me.objectStore($),at=typeof ce=="string"?Ge.index(ce):Ge;Q!=="count"&&Te.push(j||"next");var ft=O?Object.keys(O):[],V=function(Se){return ft.forEach(function(Ee){var ae=O[Ee];typeof ae=="function"&&(ae=ae(Se)),Se[Ee]=ae}),Se};at[Q].apply(at,Te).onsuccess=function(Se){var Ee=Se.target.result;if(typeof Ee=="number")Ie=Ee;else if(Ee){if(H!==null&&H[0]>ve)ve=H[0],Ee.advance(H[0]);else if(!(H!==null&&ve>=H[0]+H[1])){var ae=function(){var ue=!0,ye="value"in Ee?Ee.value:Ee.key;try{G.forEach(function(Ve){ue=typeof Ve[0]=="function"?ue&&Ve[0](ye):ue&&ye[Ve[0]]===Ve[1]})}catch(Ve){return de(Ve),{v:void 0}}if(ue){if(ve++,O)try{ye=V(ye),Ee.update(ye)}catch(Ve){return de(Ve),{v:void 0}}try{Ie.push(fe(ye))}catch(Ve){return de(Ve),{v:void 0}}}Ee.continue()}();if((typeof ae>"u"?"undefined":s(ae))==="object")return ae.v}}}})},le=function(ie,oe,Q){var j=[],H="next",G="openCursor",fe=null,pe=C,de=!1,Ae=q||Q,Ie=function(){return Ae?Promise.reject(Ae):re(ie,oe,G,de?H+"unique":H,fe,j,pe)},ve=function(){return H=null,G="count",{execute:Ie}},Te=function(){return G="openKeyCursor",{desc:at,distinct:ft,execute:Ie,filter:Ge,limit:Me,map:Se}},Me=function(Ee,ae){return fe=ae?[Ee,ae]:[0,Ee],Ae=fe.some(function(ue){return typeof ue!="number"})?new Error("limit() arguments must be numeric"):Ae,{desc:at,distinct:ft,filter:Ge,keys:Te,execute:Ie,map:Se,modify:V}},Ge=function Ee(ae,ue){return j.push([ae,ue]),{desc:at,distinct:ft,execute:Ie,filter:Ee,keys:Te,limit:Me,map:Se,modify:V}},at=function(){return H="prev",{distinct:ft,execute:Ie,filter:Ge,keys:Te,limit:Me,map:Se,modify:V}},ft=function(){return de=!0,{count:ve,desc:at,execute:Ie,filter:Ge,keys:Te,limit:Me,map:Se,modify:V}},V=function(Ee){return O=Ee&&(typeof Ee>"u"?"undefined":s(Ee))==="object"?Ee:null,{execute:Ie}},Se=function(Ee){return pe=Ee,{count:ve,desc:at,distinct:ft,execute:Ie,filter:Ge,keys:Te,limit:Me,modify:V}};return{count:ve,desc:at,distinct:ft,execute:Ie,filter:Ge,keys:Te,limit:Me,map:Se,modify:V}};["only","bound","upperBound","lowerBound"].forEach(function(ie){W[ie]=function(){return le(ie,arguments)}}),this.range=function(ie){var oe=void 0,Q=[null,null];try{Q=c(ie)}catch(j){oe=j}return le.apply(void 0,i(Q).concat([oe]))},this.filter=function(){var ie=le(null,null);return ie.filter.apply(ie,arguments)},this.all=function(){return this.filter()}},_=function($,Z,ce,q){var W=this,O=!1;if(this.getIndexedDB=function(){return $},this.isClosed=function(){return O},this.query=function(le,ie){var oe=O?new Error("Database has been closed"):null;return new S(le,$,ie,oe)},this.add=function(le){for(var ie=arguments.length,oe=Array(ie>1?ie-1:0),Q=1;ie>Q;Q++)oe[Q-1]=arguments[Q];return new Promise(function(j,H){if(O)return void H(new Error("Database has been closed"));var G=oe.reduce(function(de,Ae){return de.concat(Ae)},[]),fe=$.transaction(le,E.readwrite);fe.onerror=function(de){de.preventDefault(),H(de)},fe.onabort=function(de){return H(de)},fe.oncomplete=function(){return j(G)};var pe=fe.objectStore(le);G.some(function(de){var Ae=void 0,Ie=void 0;if(l(de)&&b.call(de,"item")&&(Ie=de.key,de=de.item,Ie!=null))try{Ie=h(Ie)}catch(ve){return H(ve),!0}try{Ae=Ie!=null?pe.add(de,Ie):pe.add(de)}catch(ve){return H(ve),!0}Ae.onsuccess=function(ve){if(l(de)){var Te=ve.target,Me=Te.source.keyPath;Me===null&&(Me="__id__"),b.call(de,Me)||Object.defineProperty(de,Me,{value:Te.result,enumerable:!0})}}})})},this.update=function(le){for(var ie=arguments.length,oe=Array(ie>1?ie-1:0),Q=1;ie>Q;Q++)oe[Q-1]=arguments[Q];return new Promise(function(j,H){if(O)return void H(new Error("Database has been closed"));var G=oe.reduce(function(de,Ae){return de.concat(Ae)},[]),fe=$.transaction(le,E.readwrite);fe.onerror=function(de){de.preventDefault(),H(de)},fe.onabort=function(de){return H(de)},fe.oncomplete=function(){return j(G)};var pe=fe.objectStore(le);G.some(function(de){var Ae=void 0,Ie=void 0;if(l(de)&&b.call(de,"item")&&(Ie=de.key,de=de.item,Ie!=null))try{Ie=h(Ie)}catch(ve){return H(ve),!0}try{Ae=Ie!=null?pe.put(de,Ie):pe.put(de)}catch(ve){return H(ve),!0}Ae.onsuccess=function(ve){if(l(de)){var Te=ve.target,Me=Te.source.keyPath;Me===null&&(Me="__id__"),b.call(de,Me)||Object.defineProperty(de,Me,{value:Te.result,enumerable:!0})}}})})},this.put=function(){return this.update.apply(this,arguments)},this.remove=function(le,ie){return new Promise(function(oe,Q){if(O)return void Q(new Error("Database has been closed"));try{ie=h(ie)}catch(G){return void Q(G)}var j=$.transaction(le,E.readwrite);j.onerror=function(G){G.preventDefault(),Q(G)},j.onabort=function(G){return Q(G)},j.oncomplete=function(){return oe(ie)};var H=j.objectStore(le);try{H.delete(ie)}catch(G){Q(G)}})},this.delete=function(){return this.remove.apply(this,arguments)},this.clear=function(le){return new Promise(function(ie,oe){if(O)return void oe(new Error("Database has been closed"));var Q=$.transaction(le,E.readwrite);Q.onerror=function(H){return oe(H)},Q.onabort=function(H){return oe(H)},Q.oncomplete=function(){return ie()};var j=Q.objectStore(le);j.clear()})},this.close=function(){return new Promise(function(le,ie){return O?void ie(new Error("Database has been closed")):($.close(),O=!0,delete w[Z][ce],void le())})},this.get=function(le,ie){return new Promise(function(oe,Q){if(O)return void Q(new Error("Database has been closed"));try{ie=h(ie)}catch(fe){return void Q(fe)}var j=$.transaction(le);j.onerror=function(fe){fe.preventDefault(),Q(fe)},j.onabort=function(fe){return Q(fe)};var H=j.objectStore(le),G=void 0;try{G=H.get(ie)}catch(fe){Q(fe)}G.onsuccess=function(fe){return oe(fe.target.result)}})},this.count=function(le,ie){return new Promise(function(oe,Q){if(O)return void Q(new Error("Database has been closed"));try{ie=h(ie)}catch(fe){return void Q(fe)}var j=$.transaction(le);j.onerror=function(fe){fe.preventDefault(),Q(fe)},j.onabort=function(fe){return Q(fe)};var H=j.objectStore(le),G=void 0;try{G=ie==null?H.count():H.count(ie)}catch(fe){Q(fe)}G.onsuccess=function(fe){return oe(fe.target.result)}})},this.addEventListener=function(le,ie){if(!I.includes(le))throw new Error("Unrecognized event type "+le);return le==="error"?void $.addEventListener(le,function(oe){oe.preventDefault(),ie(oe)}):void $.addEventListener(le,ie)},this.removeEventListener=function(le,ie){if(!I.includes(le))throw new Error("Unrecognized event type "+le);$.removeEventListener(le,ie)},I.forEach(function(le){this[le]=function(ie){return this.addEventListener(le,ie),this}},this),!q){var re=void 0;return[].some.call($.objectStoreNames,function(le){if(W[le])return re=new Error('The store name, "'+le+'", which you have attempted to load, conflicts with db.js method names."'),W.close(),!0;W[le]={};var ie=Object.keys(W);ie.filter(function(oe){return![].concat(I,["close","addEventListener","removeEventListener"]).includes(oe)}).map(function(oe){return W[le][oe]=function(){for(var Q=arguments.length,j=Array(Q),H=0;Q>H;H++)j[H]=arguments[H];return W[oe].apply(W,[le].concat(j))}})}),re}},P=function($,Z,ce,q,W,O){if(ce&&ce.length!==0){for(var re=0;re<q.objectStoreNames.length;re++){var le=q.objectStoreNames[re];b.call(ce,le)||q.deleteObjectStore(le)}var ie=void 0;return Object.keys(ce).some(function(oe){var Q=ce[oe],j=void 0;if(q.objectStoreNames.contains(oe))j=Z.transaction.objectStore(oe);else try{j=q.createObjectStore(oe,Q.key)}catch(H){return ie=H,!0}Object.keys(Q.indexes||{}).some(function(H){try{j.index(H)}catch{var G=Q.indexes[H];G=G&&(typeof G>"u"?"undefined":s(G))==="object"?G:{};try{j.createIndex(H,G.keyPath||G.key||H,G)}catch(pe){return ie=pe,!0}}})}),ie}},v=function($,Z,ce,q){var W=$.target.result;w[Z][ce]=W;var O=new _(W,Z,ce,q);return O instanceof Error?Promise.reject(O):Promise.resolve(O)},y={version:"0.15.0",open:function($){var Z=$.server,ce=$.version||1,q=$.schema,W=$.noServerMethods;return w[Z]||(w[Z]={}),new Promise(function(O,re){if(w[Z][ce])v({target:{result:w[Z][ce]}},Z,ce,W).then(O,re);else{var le=function(){if(typeof q=="function")try{q=q()}catch(oe){return re(oe),{v:void 0}}var ie=N.open(Z,ce);ie.onsuccess=function(oe){return v(oe,Z,ce,W).then(O,re)},ie.onerror=function(oe){oe.preventDefault(),re(oe)},ie.onupgradeneeded=function(oe){var Q=P(oe,ie,q,oe.target.result,Z,ce);Q&&re(Q)},ie.onblocked=function(oe){var Q=new Promise(function(j,H){ie.onsuccess=function(G){v(G,Z,ce,W).then(j,H)},ie.onerror=function(G){return H(G)}});oe.resume=Q,re(oe)}}();if((typeof le>"u"?"undefined":s(le))==="object")return le.v}})},delete:function($){return new Promise(function(Z,ce){var q=N.deleteDatabase($);q.onsuccess=function(W){return Z(W)},q.onerror=function(W){return ce(W)},q.onblocked=function(W){W=W.newVersion===null||typeof Proxy>"u"?W:new Proxy(W,{get:function(re,le){return le==="newVersion"?null:re[le]}});var O=new Promise(function(re,le){q.onsuccess=function(ie){"newVersion"in ie||(ie.newVersion=W.newVersion),"oldVersion"in ie||(ie.oldVersion=W.oldVersion),re(ie)},q.onerror=function(ie){return le(ie)}});W.resume=O,ce(W)}})},cmp:function($,Z){return new Promise(function(ce,q){try{ce(N.cmp($,Z))}catch(W){q(W)}})}};typeof n<"u"&&typeof n.exports<"u"?n.exports=y:typeof e=="function"&&e.amd?e(function(){return y}):o.db=y})(self)},{}]},{},[1])(1)})});var K1=$e(($1,j1)=>{(function(e){if(typeof $1=="object")j1.exports=e();else if(typeof define=="function"&&define.amd)define(e);else{var t;try{t=window}catch{t=self}t.SparkMD5=e()}})(function(e){"use strict";var t=function(I,S){return I+S&4294967295},n=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function r(I,S,_,P,v,y){return S=t(t(S,I),t(P,y)),t(S<<v|S>>>32-v,_)}function i(I,S){var _=I[0],P=I[1],v=I[2],y=I[3];_+=(P&v|~P&y)+S[0]-680876936|0,_=(_<<7|_>>>25)+P|0,y+=(_&P|~_&v)+S[1]-389564586|0,y=(y<<12|y>>>20)+_|0,v+=(y&_|~y&P)+S[2]+606105819|0,v=(v<<17|v>>>15)+y|0,P+=(v&y|~v&_)+S[3]-1044525330|0,P=(P<<22|P>>>10)+v|0,_+=(P&v|~P&y)+S[4]-176418897|0,_=(_<<7|_>>>25)+P|0,y+=(_&P|~_&v)+S[5]+1200080426|0,y=(y<<12|y>>>20)+_|0,v+=(y&_|~y&P)+S[6]-1473231341|0,v=(v<<17|v>>>15)+y|0,P+=(v&y|~v&_)+S[7]-45705983|0,P=(P<<22|P>>>10)+v|0,_+=(P&v|~P&y)+S[8]+1770035416|0,_=(_<<7|_>>>25)+P|0,y+=(_&P|~_&v)+S[9]-1958414417|0,y=(y<<12|y>>>20)+_|0,v+=(y&_|~y&P)+S[10]-42063|0,v=(v<<17|v>>>15)+y|0,P+=(v&y|~v&_)+S[11]-1990404162|0,P=(P<<22|P>>>10)+v|0,_+=(P&v|~P&y)+S[12]+1804603682|0,_=(_<<7|_>>>25)+P|0,y+=(_&P|~_&v)+S[13]-40341101|0,y=(y<<12|y>>>20)+_|0,v+=(y&_|~y&P)+S[14]-1502002290|0,v=(v<<17|v>>>15)+y|0,P+=(v&y|~v&_)+S[15]+1236535329|0,P=(P<<22|P>>>10)+v|0,_+=(P&y|v&~y)+S[1]-165796510|0,_=(_<<5|_>>>27)+P|0,y+=(_&v|P&~v)+S[6]-1069501632|0,y=(y<<9|y>>>23)+_|0,v+=(y&P|_&~P)+S[11]+643717713|0,v=(v<<14|v>>>18)+y|0,P+=(v&_|y&~_)+S[0]-373897302|0,P=(P<<20|P>>>12)+v|0,_+=(P&y|v&~y)+S[5]-701558691|0,_=(_<<5|_>>>27)+P|0,y+=(_&v|P&~v)+S[10]+38016083|0,y=(y<<9|y>>>23)+_|0,v+=(y&P|_&~P)+S[15]-660478335|0,v=(v<<14|v>>>18)+y|0,P+=(v&_|y&~_)+S[4]-405537848|0,P=(P<<20|P>>>12)+v|0,_+=(P&y|v&~y)+S[9]+568446438|0,_=(_<<5|_>>>27)+P|0,y+=(_&v|P&~v)+S[14]-1019803690|0,y=(y<<9|y>>>23)+_|0,v+=(y&P|_&~P)+S[3]-187363961|0,v=(v<<14|v>>>18)+y|0,P+=(v&_|y&~_)+S[8]+1163531501|0,P=(P<<20|P>>>12)+v|0,_+=(P&y|v&~y)+S[13]-1444681467|0,_=(_<<5|_>>>27)+P|0,y+=(_&v|P&~v)+S[2]-51403784|0,y=(y<<9|y>>>23)+_|0,v+=(y&P|_&~P)+S[7]+1735328473|0,v=(v<<14|v>>>18)+y|0,P+=(v&_|y&~_)+S[12]-1926607734|0,P=(P<<20|P>>>12)+v|0,_+=(P^v^y)+S[5]-378558|0,_=(_<<4|_>>>28)+P|0,y+=(_^P^v)+S[8]-2022574463|0,y=(y<<11|y>>>21)+_|0,v+=(y^_^P)+S[11]+1839030562|0,v=(v<<16|v>>>16)+y|0,P+=(v^y^_)+S[14]-35309556|0,P=(P<<23|P>>>9)+v|0,_+=(P^v^y)+S[1]-1530992060|0,_=(_<<4|_>>>28)+P|0,y+=(_^P^v)+S[4]+1272893353|0,y=(y<<11|y>>>21)+_|0,v+=(y^_^P)+S[7]-155497632|0,v=(v<<16|v>>>16)+y|0,P+=(v^y^_)+S[10]-1094730640|0,P=(P<<23|P>>>9)+v|0,_+=(P^v^y)+S[13]+681279174|0,_=(_<<4|_>>>28)+P|0,y+=(_^P^v)+S[0]-358537222|0,y=(y<<11|y>>>21)+_|0,v+=(y^_^P)+S[3]-722521979|0,v=(v<<16|v>>>16)+y|0,P+=(v^y^_)+S[6]+76029189|0,P=(P<<23|P>>>9)+v|0,_+=(P^v^y)+S[9]-640364487|0,_=(_<<4|_>>>28)+P|0,y+=(_^P^v)+S[12]-421815835|0,y=(y<<11|y>>>21)+_|0,v+=(y^_^P)+S[15]+530742520|0,v=(v<<16|v>>>16)+y|0,P+=(v^y^_)+S[2]-995338651|0,P=(P<<23|P>>>9)+v|0,_+=(v^(P|~y))+S[0]-198630844|0,_=(_<<6|_>>>26)+P|0,y+=(P^(_|~v))+S[7]+1126891415|0,y=(y<<10|y>>>22)+_|0,v+=(_^(y|~P))+S[14]-1416354905|0,v=(v<<15|v>>>17)+y|0,P+=(y^(v|~_))+S[5]-57434055|0,P=(P<<21|P>>>11)+v|0,_+=(v^(P|~y))+S[12]+1700485571|0,_=(_<<6|_>>>26)+P|0,y+=(P^(_|~v))+S[3]-1894986606|0,y=(y<<10|y>>>22)+_|0,v+=(_^(y|~P))+S[10]-1051523|0,v=(v<<15|v>>>17)+y|0,P+=(y^(v|~_))+S[1]-2054922799|0,P=(P<<21|P>>>11)+v|0,_+=(v^(P|~y))+S[8]+1873313359|0,_=(_<<6|_>>>26)+P|0,y+=(P^(_|~v))+S[15]-30611744|0,y=(y<<10|y>>>22)+_|0,v+=(_^(y|~P))+S[6]-1560198380|0,v=(v<<15|v>>>17)+y|0,P+=(y^(v|~_))+S[13]+1309151649|0,P=(P<<21|P>>>11)+v|0,_+=(v^(P|~y))+S[4]-145523070|0,_=(_<<6|_>>>26)+P|0,y+=(P^(_|~v))+S[11]-1120210379|0,y=(y<<10|y>>>22)+_|0,v+=(_^(y|~P))+S[2]+718787259|0,v=(v<<15|v>>>17)+y|0,P+=(y^(v|~_))+S[9]-343485551|0,P=(P<<21|P>>>11)+v|0,I[0]=_+I[0]|0,I[1]=P+I[1]|0,I[2]=v+I[2]|0,I[3]=y+I[3]|0}function a(I){var S=[],_;for(_=0;_<64;_+=4)S[_>>2]=I.charCodeAt(_)+(I.charCodeAt(_+1)<<8)+(I.charCodeAt(_+2)<<16)+(I.charCodeAt(_+3)<<24);return S}function s(I){var S=[],_;for(_=0;_<64;_+=4)S[_>>2]=I[_]+(I[_+1]<<8)+(I[_+2]<<16)+(I[_+3]<<24);return S}function o(I){var S=I.length,_=[1732584193,-271733879,-1732584194,271733878],P,v,y,$,Z,ce;for(P=64;P<=S;P+=64)i(_,a(I.substring(P-64,P)));for(I=I.substring(P-64),v=I.length,y=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],P=0;P<v;P+=1)y[P>>2]|=I.charCodeAt(P)<<(P%4<<3);if(y[P>>2]|=128<<(P%4<<3),P>55)for(i(_,y),P=0;P<16;P+=1)y[P]=0;return $=S*8,$=$.toString(16).match(/(.*?)(.{0,8})$/),Z=parseInt($[2],16),ce=parseInt($[1],16)||0,y[14]=Z,y[15]=ce,i(_,y),_}function l(I){var S=I.length,_=[1732584193,-271733879,-1732584194,271733878],P,v,y,$,Z,ce;for(P=64;P<=S;P+=64)i(_,s(I.subarray(P-64,P)));for(I=P-64<S?I.subarray(P-64):new Uint8Array(0),v=I.length,y=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],P=0;P<v;P+=1)y[P>>2]|=I[P]<<(P%4<<3);if(y[P>>2]|=128<<(P%4<<3),P>55)for(i(_,y),P=0;P<16;P+=1)y[P]=0;return $=S*8,$=$.toString(16).match(/(.*?)(.{0,8})$/),Z=parseInt($[2],16),ce=parseInt($[1],16)||0,y[14]=Z,y[15]=ce,i(_,y),_}function c(I){var S="",_;for(_=0;_<4;_+=1)S+=n[I>>_*8+4&15]+n[I>>_*8&15];return S}function h(I){var S;for(S=0;S<I.length;S+=1)I[S]=c(I[S]);return I.join("")}h(o("hello"))!=="5d41402abc4b2a76b9719d911017c592"&&(t=function(I,S){var _=(I&65535)+(S&65535),P=(I>>16)+(S>>16)+(_>>16);return P<<16|_&65535}),typeof ArrayBuffer<"u"&&!ArrayBuffer.prototype.slice&&function(){function I(S,_){return S=S|0||0,S<0?Math.max(S+_,0):Math.min(S,_)}ArrayBuffer.prototype.slice=function(S,_){var P=this.byteLength,v=I(S,P),y=P,$,Z,ce,q;return _!==e&&(y=I(_,P)),v>y?new ArrayBuffer(0):($=y-v,Z=new ArrayBuffer($),ce=new Uint8Array(Z),q=new Uint8Array(this,v,$),ce.set(q),Z)}}();function p(I){return/[\u0080-\uFFFF]/.test(I)&&(I=unescape(encodeURIComponent(I))),I}function E(I,S){var _=I.length,P=new ArrayBuffer(_),v=new Uint8Array(P),y;for(y=0;y<_;y+=1)v[y]=I.charCodeAt(y);return S?v:P}function b(I){return String.fromCharCode.apply(null,new Uint8Array(I))}function C(I,S,_){var P=new Uint8Array(I.byteLength+S.byteLength);return P.set(new Uint8Array(I)),P.set(new Uint8Array(S),I.byteLength),_?P:P.buffer}function N(I){var S=[],_=I.length,P;for(P=0;P<_-1;P+=2)S.push(parseInt(I.substr(P,2),16));return String.fromCharCode.apply(String,S)}function w(){this.reset()}return w.prototype.append=function(I){return this.appendBinary(p(I)),this},w.prototype.appendBinary=function(I){this._buff+=I,this._length+=I.length;var S=this._buff.length,_;for(_=64;_<=S;_+=64)i(this._hash,a(this._buff.substring(_-64,_)));return this._buff=this._buff.substring(_-64),this},w.prototype.end=function(I){var S=this._buff,_=S.length,P,v=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],y;for(P=0;P<_;P+=1)v[P>>2]|=S.charCodeAt(P)<<(P%4<<3);return this._finish(v,_),y=h(this._hash),I&&(y=N(y)),this.reset(),y},w.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},w.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash.slice()}},w.prototype.setState=function(I){return this._buff=I.buff,this._length=I.length,this._hash=I.hash,this},w.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},w.prototype._finish=function(I,S){var _=S,P,v,y;if(I[_>>2]|=128<<(_%4<<3),_>55)for(i(this._hash,I),_=0;_<16;_+=1)I[_]=0;P=this._length*8,P=P.toString(16).match(/(.*?)(.{0,8})$/),v=parseInt(P[2],16),y=parseInt(P[1],16)||0,I[14]=v,I[15]=y,i(this._hash,I)},w.hash=function(I,S){return w.hashBinary(p(I),S)},w.hashBinary=function(I,S){var _=o(I),P=h(_);return S?N(P):P},w.ArrayBuffer=function(){this.reset()},w.ArrayBuffer.prototype.append=function(I){var S=C(this._buff.buffer,I,!0),_=S.length,P;for(this._length+=I.byteLength,P=64;P<=_;P+=64)i(this._hash,s(S.subarray(P-64,P)));return this._buff=P-64<_?new Uint8Array(S.buffer.slice(P-64)):new Uint8Array(0),this},w.ArrayBuffer.prototype.end=function(I){var S=this._buff,_=S.length,P=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],v,y;for(v=0;v<_;v+=1)P[v>>2]|=S[v]<<(v%4<<3);return this._finish(P,_),y=h(this._hash),I&&(y=N(y)),this.reset(),y},w.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},w.ArrayBuffer.prototype.getState=function(){var I=w.prototype.getState.call(this);return I.buff=b(I.buff),I},w.ArrayBuffer.prototype.setState=function(I){return I.buff=E(I.buff,!0),w.prototype.setState.call(this,I)},w.ArrayBuffer.prototype.destroy=w.prototype.destroy,w.ArrayBuffer.prototype._finish=w.prototype._finish,w.ArrayBuffer.hash=function(I,S){var _=l(new Uint8Array(I)),P=h(_);return S?N(P):P},w})});var X1=$e(fg=>{"use strict";fg.stringify=function(t){var n=[];n.push({obj:t});for(var r="",i,a,s,o,l,c,h,p,E,b,C;i=n.pop();)if(a=i.obj,s=i.prefix||"",o=i.val||"",r+=s,o)r+=o;else if(typeof a!="object")r+=typeof a>"u"?null:JSON.stringify(a);else if(a===null)r+="null";else if(Array.isArray(a)){for(n.push({val:"]"}),l=a.length-1;l>=0;l--)c=l===0?"":",",n.push({obj:a[l],prefix:c});n.push({val:"["})}else{h=[];for(p in a)a.hasOwnProperty(p)&&h.push(p);for(n.push({val:"}"}),l=h.length-1;l>=0;l--)E=h[l],b=a[E],C=l>0?",":"",C+=JSON.stringify(E)+":",n.push({obj:b,prefix:C});n.push({val:"{"})}return r};function ml(e,t,n){var r=n[n.length-1];e===r.element&&(n.pop(),r=n[n.length-1]);var i=r.element,a=r.index;if(Array.isArray(i))i.push(e);else if(a===t.length-2){var s=t.pop();i[s]=e}else t.push(e)}fg.parse=function(e){for(var t=[],n=[],r=0,i,a,s,o,l,c,h,p,E;;){if(i=e[r++],i==="}"||i==="]"||typeof i>"u"){if(t.length===1)return t.pop();ml(t.pop(),t,n);continue}switch(i){case" ":case"	":case`
`:case":":case",":break;case"n":r+=3,ml(null,t,n);break;case"t":r+=3,ml(!0,t,n);break;case"f":r+=4,ml(!1,t,n);break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"-":for(a="",r--;;)if(s=e[r++],/[\d\.\-e\+]/.test(s))a+=s;else{r--;break}ml(parseFloat(a),t,n);break;case'"':for(o="",l=void 0,c=0;h=e[r++],h!=='"'||l==="\\"&&c%2===1;)o+=h,l=h,l==="\\"?c++:c=0;ml(JSON.parse('"'+o+'"'),t,n);break;case"[":p={element:[],index:t.length},t.push(p.element),n.push(p);break;case"{":E={element:{},index:t.length},t.push(E.element),n.push(E);break;default:throw new Error("unexpectedly reached end of input: "+i)}}}});var ow=$e((uV,hg)=>{"use strict";var vl=typeof Reflect=="object"?Reflect:null,Y1=vl&&typeof vl.apply=="function"?vl.apply:function(t,n,r){return Function.prototype.apply.call(t,n,r)},vh;vl&&typeof vl.ownKeys=="function"?vh=vl.ownKeys:Object.getOwnPropertySymbols?vh=function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:vh=function(t){return Object.getOwnPropertyNames(t)};function hD(e){console&&console.warn&&console.warn(e)}var J1=Number.isNaN||function(t){return t!==t};function Qn(){Qn.init.call(this)}hg.exports=Qn;hg.exports.once=mD;Qn.EventEmitter=Qn;Qn.prototype._events=void 0;Qn.prototype._eventsCount=0;Qn.prototype._maxListeners=void 0;var Q1=10;function yh(e){if(typeof e!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}Object.defineProperty(Qn,"defaultMaxListeners",{enumerable:!0,get:function(){return Q1},set:function(e){if(typeof e!="number"||e<0||J1(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");Q1=e}});Qn.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};Qn.prototype.setMaxListeners=function(t){if(typeof t!="number"||t<0||J1(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this};function ew(e){return e._maxListeners===void 0?Qn.defaultMaxListeners:e._maxListeners}Qn.prototype.getMaxListeners=function(){return ew(this)};Qn.prototype.emit=function(t){for(var n=[],r=1;r<arguments.length;r++)n.push(arguments[r]);var i=t==="error",a=this._events;if(a!==void 0)i=i&&a.error===void 0;else if(!i)return!1;if(i){var s;if(n.length>0&&(s=n[0]),s instanceof Error)throw s;var o=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw o.context=s,o}var l=a[t];if(l===void 0)return!1;if(typeof l=="function")Y1(l,this,n);else for(var c=l.length,h=aw(l,c),r=0;r<c;++r)Y1(h[r],this,n);return!0};function tw(e,t,n,r){var i,a,s;if(yh(n),a=e._events,a===void 0?(a=e._events=Object.create(null),e._eventsCount=0):(a.newListener!==void 0&&(e.emit("newListener",t,n.listener?n.listener:n),a=e._events),s=a[t]),s===void 0)s=a[t]=n,++e._eventsCount;else if(typeof s=="function"?s=a[t]=r?[n,s]:[s,n]:r?s.unshift(n):s.push(n),i=ew(e),i>0&&s.length>i&&!s.warned){s.warned=!0;var o=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");o.name="MaxListenersExceededWarning",o.emitter=e,o.type=t,o.count=s.length,hD(o)}return e}Qn.prototype.addListener=function(t,n){return tw(this,t,n,!1)};Qn.prototype.on=Qn.prototype.addListener;Qn.prototype.prependListener=function(t,n){return tw(this,t,n,!0)};function dD(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function nw(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=dD.bind(r);return i.listener=n,r.wrapFn=i,i}Qn.prototype.once=function(t,n){return yh(n),this.on(t,nw(this,t,n)),this};Qn.prototype.prependOnceListener=function(t,n){return yh(n),this.prependListener(t,nw(this,t,n)),this};Qn.prototype.removeListener=function(t,n){var r,i,a,s,o;if(yh(n),i=this._events,i===void 0)return this;if(r=i[t],r===void 0)return this;if(r===n||r.listener===n)--this._eventsCount===0?this._events=Object.create(null):(delete i[t],i.removeListener&&this.emit("removeListener",t,r.listener||n));else if(typeof r!="function"){for(a=-1,s=r.length-1;s>=0;s--)if(r[s]===n||r[s].listener===n){o=r[s].listener,a=s;break}if(a<0)return this;a===0?r.shift():pD(r,a),r.length===1&&(i[t]=r[0]),i.removeListener!==void 0&&this.emit("removeListener",t,o||n)}return this};Qn.prototype.off=Qn.prototype.removeListener;Qn.prototype.removeAllListeners=function(t){var n,r,i;if(r=this._events,r===void 0)return this;if(r.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):r[t]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete r[t]),this;if(arguments.length===0){var a=Object.keys(r),s;for(i=0;i<a.length;++i)s=a[i],s!=="removeListener"&&this.removeAllListeners(s);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(n=r[t],typeof n=="function")this.removeListener(t,n);else if(n!==void 0)for(i=n.length-1;i>=0;i--)this.removeListener(t,n[i]);return this};function rw(e,t,n){var r=e._events;if(r===void 0)return[];var i=r[t];return i===void 0?[]:typeof i=="function"?n?[i.listener||i]:[i]:n?gD(i):aw(i,i.length)}Qn.prototype.listeners=function(t){return rw(this,t,!0)};Qn.prototype.rawListeners=function(t){return rw(this,t,!1)};Qn.listenerCount=function(e,t){return typeof e.listenerCount=="function"?e.listenerCount(t):iw.call(e,t)};Qn.prototype.listenerCount=iw;function iw(e){var t=this._events;if(t!==void 0){var n=t[e];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}Qn.prototype.eventNames=function(){return this._eventsCount>0?vh(this._events):[]};function aw(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}function pD(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function gD(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}function mD(e,t){return new Promise(function(n,r){function i(s){e.removeListener(t,a),r(s)}function a(){typeof e.removeListener=="function"&&e.removeListener("error",i),n([].slice.call(arguments))}sw(e,t,a,{once:!0}),t!=="error"&&vD(e,i,{once:!0})})}function vD(e,t,n){typeof e.on=="function"&&sw(e,"error",t,n)}function sw(e,t,n,r){if(typeof e.on=="function")r.once?e.once(t,n):e.on(t,n);else if(typeof e.addEventListener=="function")e.addEventListener(t,function i(a){r.once&&e.removeEventListener(t,i),n(a)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e)}});var Rh=$e(co=>{"use strict";var yx=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",aB=yx+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040",_x="["+yx+"]["+aB+"]*",sB=new RegExp("^"+_x+"$"),oB=function(e,t){let n=[],r=t.exec(e);for(;r;){let i=[];i.startIndex=t.lastIndex-r[0].length;let a=r.length;for(let s=0;s<a;s++)i.push(r[s]);n.push(i),r=t.exec(e)}return n},uB=function(e){let t=sB.exec(e);return!(t===null||typeof t>"u")};co.isExist=function(e){return typeof e<"u"};co.isEmptyObject=function(e){return Object.keys(e).length===0};co.merge=function(e,t,n){if(t){let r=Object.keys(t),i=r.length;for(let a=0;a<i;a++)n==="strict"?e[r[a]]=[t[r[a]]]:e[r[a]]=t[r[a]]}};co.getValue=function(e){return co.isExist(e)?e:""};co.isName=uB;co.getAllMatches=oB;co.nameRegexp=_x});var cm=$e(Cx=>{"use strict";var lm=Rh(),lB={allowBooleanAttributes:!1,unpairedTags:[]};Cx.validate=function(e,t){t=Object.assign({},lB,t);let n=[],r=!1,i=!1;e[0]==="\uFEFF"&&(e=e.substr(1));for(let a=0;a<e.length;a++)if(e[a]==="<"&&e[a+1]==="?"){if(a+=2,a=wx(e,a),a.err)return a}else if(e[a]==="<"){let s=a;if(a++,e[a]==="!"){a=xx(e,a);continue}else{let o=!1;e[a]==="/"&&(o=!0,a++);let l="";for(;a<e.length&&e[a]!==">"&&e[a]!==" "&&e[a]!=="	"&&e[a]!==`
`&&e[a]!=="\r";a++)l+=e[a];if(l=l.trim(),l[l.length-1]==="/"&&(l=l.substring(0,l.length-1),a--),!vB(l)){let p;return l.trim().length===0?p="Invalid space after '<'.":p="Tag '"+l+"' is an invalid name.",$r("InvalidTag",p,na(e,a))}let c=hB(e,a);if(c===!1)return $r("InvalidAttr","Attributes for '"+l+"' have open quote.",na(e,a));let h=c.value;if(a=c.index,h[h.length-1]==="/"){let p=a-h.length;h=h.substring(0,h.length-1);let E=Ex(h,t);if(E===!0)r=!0;else return $r(E.err.code,E.err.msg,na(e,p+E.err.line))}else if(o)if(c.tagClosed){if(h.trim().length>0)return $r("InvalidTag","Closing tag '"+l+"' can't have attributes or invalid starting.",na(e,s));if(n.length===0)return $r("InvalidTag","Closing tag '"+l+"' has not been opened.",na(e,s));{let p=n.pop();if(l!==p.tagName){let E=na(e,p.tagStartPos);return $r("InvalidTag","Expected closing tag '"+p.tagName+"' (opened in line "+E.line+", col "+E.col+") instead of closing tag '"+l+"'.",na(e,s))}n.length==0&&(i=!0)}}else return $r("InvalidTag","Closing tag '"+l+"' doesn't have proper closing.",na(e,a));else{let p=Ex(h,t);if(p!==!0)return $r(p.err.code,p.err.msg,na(e,a-h.length+p.err.line));if(i===!0)return $r("InvalidXml","Multiple possible root nodes found.",na(e,a));t.unpairedTags.indexOf(l)!==-1||n.push({tagName:l,tagStartPos:s}),r=!0}for(a++;a<e.length;a++)if(e[a]==="<")if(e[a+1]==="!"){a++,a=xx(e,a);continue}else if(e[a+1]==="?"){if(a=wx(e,++a),a.err)return a}else break;else if(e[a]==="&"){let p=gB(e,a);if(p==-1)return $r("InvalidChar","char '&' is not expected.",na(e,a));a=p}else if(i===!0&&!bx(e[a]))return $r("InvalidXml","Extra text at the end",na(e,a));e[a]==="<"&&a--}}else{if(bx(e[a]))continue;return $r("InvalidChar","char '"+e[a]+"' is not expected.",na(e,a))}if(r){if(n.length==1)return $r("InvalidTag","Unclosed tag '"+n[0].tagName+"'.",na(e,n[0].tagStartPos));if(n.length>0)return $r("InvalidXml","Invalid '"+JSON.stringify(n.map(a=>a.tagName),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1})}else return $r("InvalidXml","Start tag expected.",1);return!0};function bx(e){return e===" "||e==="	"||e===`
`||e==="\r"}function wx(e,t){let n=t;for(;t<e.length;t++)if(e[t]=="?"||e[t]==" "){let r=e.substr(n,t-n);if(t>5&&r==="xml")return $r("InvalidXml","XML declaration allowed only at the start of the document.",na(e,t));if(e[t]=="?"&&e[t+1]==">"){t++;break}else continue}return t}function xx(e,t){if(e.length>t+5&&e[t+1]==="-"&&e[t+2]==="-"){for(t+=3;t<e.length;t++)if(e[t]==="-"&&e[t+1]==="-"&&e[t+2]===">"){t+=2;break}}else if(e.length>t+8&&e[t+1]==="D"&&e[t+2]==="O"&&e[t+3]==="C"&&e[t+4]==="T"&&e[t+5]==="Y"&&e[t+6]==="P"&&e[t+7]==="E"){let n=1;for(t+=8;t<e.length;t++)if(e[t]==="<")n++;else if(e[t]===">"&&(n--,n===0))break}else if(e.length>t+9&&e[t+1]==="["&&e[t+2]==="C"&&e[t+3]==="D"&&e[t+4]==="A"&&e[t+5]==="T"&&e[t+6]==="A"&&e[t+7]==="["){for(t+=8;t<e.length;t++)if(e[t]==="]"&&e[t+1]==="]"&&e[t+2]===">"){t+=2;break}}return t}var cB='"',fB="'";function hB(e,t){let n="",r="",i=!1;for(;t<e.length;t++){if(e[t]===cB||e[t]===fB)r===""?r=e[t]:r!==e[t]||(r="");else if(e[t]===">"&&r===""){i=!0;break}n+=e[t]}return r!==""?!1:{value:n,index:t,tagClosed:i}}var dB=new RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`,"g");function Ex(e,t){let n=lm.getAllMatches(e,dB),r={};for(let i=0;i<n.length;i++){if(n[i][1].length===0)return $r("InvalidAttr","Attribute '"+n[i][2]+"' has no space in starting.",Pc(n[i]));if(n[i][3]!==void 0&&n[i][4]===void 0)return $r("InvalidAttr","Attribute '"+n[i][2]+"' is without value.",Pc(n[i]));if(n[i][3]===void 0&&!t.allowBooleanAttributes)return $r("InvalidAttr","boolean attribute '"+n[i][2]+"' is not allowed.",Pc(n[i]));let a=n[i][2];if(!mB(a))return $r("InvalidAttr","Attribute '"+a+"' is an invalid name.",Pc(n[i]));if(!r.hasOwnProperty(a))r[a]=1;else return $r("InvalidAttr","Attribute '"+a+"' is repeated.",Pc(n[i]))}return!0}function pB(e,t){let n=/\d/;for(e[t]==="x"&&(t++,n=/[\da-fA-F]/);t<e.length;t++){if(e[t]===";")return t;if(!e[t].match(n))break}return-1}function gB(e,t){if(t++,e[t]===";")return-1;if(e[t]==="#")return t++,pB(e,t);let n=0;for(;t<e.length;t++,n++)if(!(e[t].match(/\w/)&&n<20)){if(e[t]===";")break;return-1}return t}function $r(e,t,n){return{err:{code:e,msg:t,line:n.line||n,col:n.col}}}function mB(e){return lm.isName(e)}function vB(e){return lm.isName(e)}function na(e,t){let n=e.substring(0,t).split(/\r?\n/);return{line:n.length,col:n[n.length-1].length+1}}function Pc(e){return e.startIndex+e[1].length}});var Tx=$e(fm=>{var Sx={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(e,t){return t},attributeValueProcessor:function(e,t){return t},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1,updateTag:function(e,t,n){return e}},yB=function(e){return Object.assign({},Sx,e)};fm.buildOptions=yB;fm.defaultOptions=Sx});var kx=$e((EV,Lx)=>{"use strict";var hm=class{constructor(t){this.tagname=t,this.child=[],this[":@"]={}}add(t,n){t==="__proto__"&&(t="#__proto__"),this.child.push({[t]:n})}addChild(t){t.tagname==="__proto__"&&(t.tagname="#__proto__"),t[":@"]&&Object.keys(t[":@"]).length>0?this.child.push({[t.tagname]:t.child,[":@"]:t[":@"]}):this.child.push({[t.tagname]:t.child})}};Lx.exports=hm});var Ix=$e((CV,Ax)=>{var _B=Rh();function bB(e,t){let n={};if(e[t+3]==="O"&&e[t+4]==="C"&&e[t+5]==="T"&&e[t+6]==="Y"&&e[t+7]==="P"&&e[t+8]==="E"){t=t+9;let r=1,i=!1,a=!1,s="";for(;t<e.length;t++)if(e[t]==="<"&&!a){if(i&&EB(e,t))t+=7,[entityName,val,t]=wB(e,t+1),val.indexOf("&")===-1&&(n[LB(entityName)]={regx:RegExp(`&${entityName};`,"g"),val});else if(i&&CB(e,t))t+=8;else if(i&&SB(e,t))t+=8;else if(i&&TB(e,t))t+=9;else if(xB)a=!0;else throw new Error("Invalid DOCTYPE");r++,s=""}else if(e[t]===">"){if(a?e[t-1]==="-"&&e[t-2]==="-"&&(a=!1,r--):r--,r===0)break}else e[t]==="["?i=!0:s+=e[t];if(r!==0)throw new Error("Unclosed DOCTYPE")}else throw new Error("Invalid Tag instead of DOCTYPE");return{entities:n,i:t}}function wB(e,t){let n="";for(;t<e.length&&e[t]!=="'"&&e[t]!=='"';t++)n+=e[t];if(n=n.trim(),n.indexOf(" ")!==-1)throw new Error("External entites are not supported");let r=e[t++],i="";for(;t<e.length&&e[t]!==r;t++)i+=e[t];return[n,i,t]}function xB(e,t){return e[t+1]==="!"&&e[t+2]==="-"&&e[t+3]==="-"}function EB(e,t){return e[t+1]==="!"&&e[t+2]==="E"&&e[t+3]==="N"&&e[t+4]==="T"&&e[t+5]==="I"&&e[t+6]==="T"&&e[t+7]==="Y"}function CB(e,t){return e[t+1]==="!"&&e[t+2]==="E"&&e[t+3]==="L"&&e[t+4]==="E"&&e[t+5]==="M"&&e[t+6]==="E"&&e[t+7]==="N"&&e[t+8]==="T"}function SB(e,t){return e[t+1]==="!"&&e[t+2]==="A"&&e[t+3]==="T"&&e[t+4]==="T"&&e[t+5]==="L"&&e[t+6]==="I"&&e[t+7]==="S"&&e[t+8]==="T"}function TB(e,t){return e[t+1]==="!"&&e[t+2]==="N"&&e[t+3]==="O"&&e[t+4]==="T"&&e[t+5]==="A"&&e[t+6]==="T"&&e[t+7]==="I"&&e[t+8]==="O"&&e[t+9]==="N"}function LB(e){if(_B.isName(e))return e;throw new Error(`Invalid entity name ${e}`)}Ax.exports=bB});var Px=$e((SV,Nx)=>{var kB=/^[-+]?0x[a-fA-F0-9]+$/,AB=/^([\-\+])?(0*)(\.[0-9]+([eE]\-?[0-9]+)?|[0-9]+(\.[0-9]+([eE]\-?[0-9]+)?)?)$/;!Number.parseInt&&window.parseInt&&(Number.parseInt=window.parseInt);!Number.parseFloat&&window.parseFloat&&(Number.parseFloat=window.parseFloat);var IB={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0};function NB(e,t={}){if(t=Object.assign({},IB,t),!e||typeof e!="string")return e;let n=e.trim();if(t.skipLike!==void 0&&t.skipLike.test(n))return e;if(t.hex&&kB.test(n))return Number.parseInt(n,16);{let r=AB.exec(n);if(r){let i=r[1],a=r[2],s=PB(r[3]),o=r[4]||r[6];if(!t.leadingZeros&&a.length>0&&i&&n[2]!==".")return e;if(!t.leadingZeros&&a.length>0&&!i&&n[1]!==".")return e;{let l=Number(n),c=""+l;return c.search(/[eE]/)!==-1||o?t.eNotation?l:e:n.indexOf(".")!==-1?c==="0"&&s===""||c===s||i&&c==="-"+s?l:e:a?s===c||i+s===c?l:e:n===c||n===i+c?l:e}}else return e}}function PB(e){return e&&e.indexOf(".")!==-1&&(e=e.replace(/0+$/,""),e==="."?e="0":e[0]==="."?e="0"+e:e[e.length-1]==="."&&(e=e.substr(0,e.length-1))),e}Nx.exports=NB});var Ox=$e((TV,Rx)=>{"use strict";var Dx=Rh(),Dc=kx(),DB=Ix(),RB=Px(),dm=class{constructor(t){this.options=t,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:"&"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:"\xA2"},pound:{regex:/&(pound|#163);/g,val:"\xA3"},yen:{regex:/&(yen|#165);/g,val:"\xA5"},euro:{regex:/&(euro|#8364);/g,val:"\u20AC"},copyright:{regex:/&(copy|#169);/g,val:"\xA9"},reg:{regex:/&(reg|#174);/g,val:"\xAE"},inr:{regex:/&(inr|#8377);/g,val:"\u20B9"},num_dec:{regex:/&#([0-9]{1,7});/g,val:(n,r)=>String.fromCharCode(Number.parseInt(r,10))},num_hex:{regex:/&#x([0-9a-fA-F]{1,6});/g,val:(n,r)=>String.fromCharCode(Number.parseInt(r,16))}},this.addExternalEntities=OB,this.parseXml=FB,this.parseTextData=BB,this.resolveNameSpace=MB,this.buildAttributesMap=qB,this.isItStopNode=$B,this.replaceEntitiesValue=zB,this.readStopNodeData=KB,this.saveTextToParentTag=HB,this.addChild=VB}};function OB(e){let t=Object.keys(e);for(let n=0;n<t.length;n++){let r=t[n];this.lastEntities[r]={regex:new RegExp("&"+r+";","g"),val:e[r]}}}function BB(e,t,n,r,i,a,s){if(e!==void 0&&(this.options.trimValues&&!r&&(e=e.trim()),e.length>0)){s||(e=this.replaceEntitiesValue(e));let o=this.options.tagValueProcessor(t,e,n,i,a);return o==null?e:typeof o!=typeof e||o!==e?o:this.options.trimValues?gm(e,this.options.parseTagValue,this.options.numberParseOptions):e.trim()===e?gm(e,this.options.parseTagValue,this.options.numberParseOptions):e}}function MB(e){if(this.options.removeNSPrefix){let t=e.split(":"),n=e.charAt(0)==="/"?"/":"";if(t[0]==="xmlns")return"";t.length===2&&(e=n+t[1])}return e}var UB=new RegExp(`([^\\s=]+)\\s*(=\\s*(['"])([\\s\\S]*?)\\3)?`,"gm");function qB(e,t,n){if(!this.options.ignoreAttributes&&typeof e=="string"){let r=Dx.getAllMatches(e,UB),i=r.length,a={};for(let s=0;s<i;s++){let o=this.resolveNameSpace(r[s][1]),l=r[s][4],c=this.options.attributeNamePrefix+o;if(o.length)if(this.options.transformAttributeName&&(c=this.options.transformAttributeName(c)),c==="__proto__"&&(c="#__proto__"),l!==void 0){this.options.trimValues&&(l=l.trim()),l=this.replaceEntitiesValue(l);let h=this.options.attributeValueProcessor(o,l,t);h==null?a[c]=l:typeof h!=typeof l||h!==l?a[c]=h:a[c]=gm(l,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(a[c]=!0)}if(!Object.keys(a).length)return;if(this.options.attributesGroupName){let s={};return s[this.options.attributesGroupName]=a,s}return a}}var FB=function(e){e=e.replace(/\r\n?/g,`
`);let t=new Dc("!xml"),n=t,r="",i="";for(let a=0;a<e.length;a++)if(e[a]==="<")if(e[a+1]==="/"){let o=Ou(e,">",a,"Closing Tag is not closed."),l=e.substring(a+2,o).trim();if(this.options.removeNSPrefix){let p=l.indexOf(":");p!==-1&&(l=l.substr(p+1))}this.options.transformTagName&&(l=this.options.transformTagName(l)),n&&(r=this.saveTextToParentTag(r,n,i));let c=i.substring(i.lastIndexOf(".")+1);if(l&&this.options.unpairedTags.indexOf(l)!==-1)throw new Error(`Unpaired tag can not be used as closing tag: </${l}>`);let h=0;c&&this.options.unpairedTags.indexOf(c)!==-1?(h=i.lastIndexOf(".",i.lastIndexOf(".")-1),this.tagsNodeStack.pop()):h=i.lastIndexOf("."),i=i.substring(0,h),n=this.tagsNodeStack.pop(),r="",a=o}else if(e[a+1]==="?"){let o=pm(e,a,!1,"?>");if(!o)throw new Error("Pi Tag is not closed.");if(r=this.saveTextToParentTag(r,n,i),!(this.options.ignoreDeclaration&&o.tagName==="?xml"||this.options.ignorePiTags)){let l=new Dc(o.tagName);l.add(this.options.textNodeName,""),o.tagName!==o.tagExp&&o.attrExpPresent&&(l[":@"]=this.buildAttributesMap(o.tagExp,i,o.tagName)),this.addChild(n,l,i)}a=o.closeIndex+1}else if(e.substr(a+1,3)==="!--"){let o=Ou(e,"-->",a+4,"Comment is not closed.");if(this.options.commentPropName){let l=e.substring(a+4,o-2);r=this.saveTextToParentTag(r,n,i),n.add(this.options.commentPropName,[{[this.options.textNodeName]:l}])}a=o}else if(e.substr(a+1,2)==="!D"){let o=DB(e,a);this.docTypeEntities=o.entities,a=o.i}else if(e.substr(a+1,2)==="!["){let o=Ou(e,"]]>",a,"CDATA is not closed.")-2,l=e.substring(a+9,o);r=this.saveTextToParentTag(r,n,i);let c=this.parseTextData(l,n.tagname,i,!0,!1,!0,!0);c==null&&(c=""),this.options.cdataPropName?n.add(this.options.cdataPropName,[{[this.options.textNodeName]:l}]):n.add(this.options.textNodeName,c),a=o+2}else{let o=pm(e,a,this.options.removeNSPrefix),l=o.tagName,c=o.rawTagName,h=o.tagExp,p=o.attrExpPresent,E=o.closeIndex;this.options.transformTagName&&(l=this.options.transformTagName(l)),n&&r&&n.tagname!=="!xml"&&(r=this.saveTextToParentTag(r,n,i,!1));let b=n;if(b&&this.options.unpairedTags.indexOf(b.tagname)!==-1&&(n=this.tagsNodeStack.pop(),i=i.substring(0,i.lastIndexOf("."))),l!==t.tagname&&(i+=i?"."+l:l),this.isItStopNode(this.options.stopNodes,i,l)){let C="";if(h.length>0&&h.lastIndexOf("/")===h.length-1)l[l.length-1]==="/"?(l=l.substr(0,l.length-1),i=i.substr(0,i.length-1),h=l):h=h.substr(0,h.length-1),a=o.closeIndex;else if(this.options.unpairedTags.indexOf(l)!==-1)a=o.closeIndex;else{let w=this.readStopNodeData(e,c,E+1);if(!w)throw new Error(`Unexpected end of ${c}`);a=w.i,C=w.tagContent}let N=new Dc(l);l!==h&&p&&(N[":@"]=this.buildAttributesMap(h,i,l)),C&&(C=this.parseTextData(C,l,i,!0,p,!0,!0)),i=i.substr(0,i.lastIndexOf(".")),N.add(this.options.textNodeName,C),this.addChild(n,N,i)}else{if(h.length>0&&h.lastIndexOf("/")===h.length-1){l[l.length-1]==="/"?(l=l.substr(0,l.length-1),i=i.substr(0,i.length-1),h=l):h=h.substr(0,h.length-1),this.options.transformTagName&&(l=this.options.transformTagName(l));let C=new Dc(l);l!==h&&p&&(C[":@"]=this.buildAttributesMap(h,i,l)),this.addChild(n,C,i),i=i.substr(0,i.lastIndexOf("."))}else{let C=new Dc(l);this.tagsNodeStack.push(n),l!==h&&p&&(C[":@"]=this.buildAttributesMap(h,i,l)),this.addChild(n,C,i),n=C}r="",a=E}}else r+=e[a];return t.child};function VB(e,t,n){let r=this.options.updateTag(t.tagname,n,t[":@"]);r===!1||(typeof r=="string"&&(t.tagname=r),e.addChild(t))}var zB=function(e){if(this.options.processEntities){for(let t in this.docTypeEntities){let n=this.docTypeEntities[t];e=e.replace(n.regx,n.val)}for(let t in this.lastEntities){let n=this.lastEntities[t];e=e.replace(n.regex,n.val)}if(this.options.htmlEntities)for(let t in this.htmlEntities){let n=this.htmlEntities[t];e=e.replace(n.regex,n.val)}e=e.replace(this.ampEntity.regex,this.ampEntity.val)}return e};function HB(e,t,n,r){return e&&(r===void 0&&(r=Object.keys(t.child).length===0),e=this.parseTextData(e,t.tagname,n,!1,t[":@"]?Object.keys(t[":@"]).length!==0:!1,r),e!==void 0&&e!==""&&t.add(this.options.textNodeName,e),e=""),e}function $B(e,t,n){let r="*."+n;for(let i in e){let a=e[i];if(r===a||t===a)return!0}return!1}function jB(e,t,n=">"){let r,i="";for(let a=t;a<e.length;a++){let s=e[a];if(r)s===r&&(r="");else if(s==='"'||s==="'")r=s;else if(s===n[0])if(n[1]){if(e[a+1]===n[1])return{data:i,index:a}}else return{data:i,index:a};else s==="	"&&(s=" ");i+=s}}function Ou(e,t,n,r){let i=e.indexOf(t,n);if(i===-1)throw new Error(r);return i+t.length-1}function pm(e,t,n,r=">"){let i=jB(e,t+1,r);if(!i)return;let a=i.data,s=i.index,o=a.search(/\s/),l=a,c=!0;o!==-1&&(l=a.substring(0,o),a=a.substring(o+1).trimStart());let h=l;if(n){let p=l.indexOf(":");p!==-1&&(l=l.substr(p+1),c=l!==i.data.substr(p+1))}return{tagName:l,tagExp:a,closeIndex:s,attrExpPresent:c,rawTagName:h}}function KB(e,t,n){let r=n,i=1;for(;n<e.length;n++)if(e[n]==="<")if(e[n+1]==="/"){let a=Ou(e,">",n,`${t} is not closed`);if(e.substring(n+2,a).trim()===t&&(i--,i===0))return{tagContent:e.substring(r,n),i:a};n=a}else if(e[n+1]==="?")n=Ou(e,"?>",n+1,"StopNode is not closed.");else if(e.substr(n+1,3)==="!--")n=Ou(e,"-->",n+3,"StopNode is not closed.");else if(e.substr(n+1,2)==="![")n=Ou(e,"]]>",n,"StopNode is not closed.")-2;else{let a=pm(e,n,">");a&&((a&&a.tagName)===t&&a.tagExp[a.tagExp.length-1]!=="/"&&i++,n=a.closeIndex)}}function gm(e,t,n){if(t&&typeof e=="string"){let r=e.trim();return r==="true"?!0:r==="false"?!1:RB(e,n)}else return Dx.isExist(e)?e:""}Rx.exports=dm});var Ux=$e(Mx=>{"use strict";function WB(e,t){return Bx(e,t)}function Bx(e,t,n){let r,i={};for(let a=0;a<e.length;a++){let s=e[a],o=GB(s),l="";if(n===void 0?l=o:l=n+"."+o,o===t.textNodeName)r===void 0?r=s[o]:r+=""+s[o];else{if(o===void 0)continue;if(s[o]){let c=Bx(s[o],t,l),h=XB(c,t);s[":@"]?ZB(c,s[":@"],l,t):Object.keys(c).length===1&&c[t.textNodeName]!==void 0&&!t.alwaysCreateTextNode?c=c[t.textNodeName]:Object.keys(c).length===0&&(t.alwaysCreateTextNode?c[t.textNodeName]="":c=""),i[o]!==void 0&&i.hasOwnProperty(o)?(Array.isArray(i[o])||(i[o]=[i[o]]),i[o].push(c)):t.isArray(o,l,h)?i[o]=[c]:i[o]=c}}}return typeof r=="string"?r.length>0&&(i[t.textNodeName]=r):r!==void 0&&(i[t.textNodeName]=r),i}function GB(e){let t=Object.keys(e);for(let n=0;n<t.length;n++){let r=t[n];if(r!==":@")return r}}function ZB(e,t,n,r){if(t){let i=Object.keys(t),a=i.length;for(let s=0;s<a;s++){let o=i[s];r.isArray(o,n+"."+o,!0,!0)?e[o]=[t[o]]:e[o]=t[o]}}}function XB(e,t){let{textNodeName:n}=t,r=Object.keys(e).length;return!!(r===0||r===1&&(e[n]||typeof e[n]=="boolean"||e[n]===0))}Mx.prettify=WB});var Fx=$e((kV,qx)=>{var{buildOptions:YB}=Tx(),QB=Ox(),{prettify:JB}=Ux(),eM=cm(),mm=class{constructor(t){this.externalEntities={},this.options=YB(t)}parse(t,n){if(typeof t!="string")if(t.toString)t=t.toString();else throw new Error("XML data is accepted in String or Bytes[] form.");if(n){n===!0&&(n={});let a=eM.validate(t,n);if(a!==!0)throw Error(`${a.err.msg}:${a.err.line}:${a.err.col}`)}let r=new QB(this.options);r.addExternalEntities(this.externalEntities);let i=r.parseXml(t);return this.options.preserveOrder||i===void 0?i:JB(i,this.options)}addEntity(t,n){if(n.indexOf("&")!==-1)throw new Error("Entity value can't have '&'");if(t.indexOf("&")!==-1||t.indexOf(";")!==-1)throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");if(n==="&")throw new Error("An entity with value '&' is not permitted");this.externalEntities[t]=n}};qx.exports=mm});var jx=$e((AV,$x)=>{var tM=`
`;function nM(e,t){let n="";return t.format&&t.indentBy.length>0&&(n=tM),zx(e,t,"",n)}function zx(e,t,n,r){let i="",a=!1;for(let s=0;s<e.length;s++){let o=e[s],l=rM(o);if(l===void 0)continue;let c="";if(n.length===0?c=l:c=`${n}.${l}`,l===t.textNodeName){let C=o[l];iM(c,t)||(C=t.tagValueProcessor(l,C),C=Hx(C,t)),a&&(i+=r),i+=C,a=!1;continue}else if(l===t.cdataPropName){a&&(i+=r),i+=`<![CDATA[${o[l][0][t.textNodeName]}]]>`,a=!1;continue}else if(l===t.commentPropName){i+=r+`<!--${o[l][0][t.textNodeName]}-->`,a=!0;continue}else if(l[0]==="?"){let C=Vx(o[":@"],t),N=l==="?xml"?"":r,w=o[l][0][t.textNodeName];w=w.length!==0?" "+w:"",i+=N+`<${l}${w}${C}?>`,a=!0;continue}let h=r;h!==""&&(h+=t.indentBy);let p=Vx(o[":@"],t),E=r+`<${l}${p}`,b=zx(o[l],t,c,h);t.unpairedTags.indexOf(l)!==-1?t.suppressUnpairedNode?i+=E+">":i+=E+"/>":(!b||b.length===0)&&t.suppressEmptyNode?i+=E+"/>":b&&b.endsWith(">")?i+=E+`>${b}${r}</${l}>`:(i+=E+">",b&&r!==""&&(b.includes("/>")||b.includes("</"))?i+=r+t.indentBy+b+r:i+=b,i+=`</${l}>`),a=!0}return i}function rM(e){let t=Object.keys(e);for(let n=0;n<t.length;n++){let r=t[n];if(e.hasOwnProperty(r)&&r!==":@")return r}}function Vx(e,t){let n="";if(e&&!t.ignoreAttributes)for(let r in e){if(!e.hasOwnProperty(r))continue;let i=t.attributeValueProcessor(r,e[r]);i=Hx(i,t),i===!0&&t.suppressBooleanAttributes?n+=` ${r.substr(t.attributeNamePrefix.length)}`:n+=` ${r.substr(t.attributeNamePrefix.length)}="${i}"`}return n}function iM(e,t){e=e.substr(0,e.length-t.textNodeName.length-1);let n=e.substr(e.lastIndexOf(".")+1);for(let r in t.stopNodes)if(t.stopNodes[r]===e||t.stopNodes[r]==="*."+n)return!0;return!1}function Hx(e,t){if(e&&e.length>0&&t.processEntities)for(let n=0;n<t.entities.length;n++){let r=t.entities[n];e=e.replace(r.regex,r.val)}return e}$x.exports=nM});var Wx=$e((IV,Kx)=>{"use strict";var aM=jx(),sM={attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataPropName:!1,format:!1,indentBy:"  ",suppressEmptyNode:!1,suppressUnpairedNode:!0,suppressBooleanAttributes:!0,tagValueProcessor:function(e,t){return t},attributeValueProcessor:function(e,t){return t},preserveOrder:!1,commentPropName:!1,unpairedTags:[],entities:[{regex:new RegExp("&","g"),val:"&amp;"},{regex:new RegExp(">","g"),val:"&gt;"},{regex:new RegExp("<","g"),val:"&lt;"},{regex:new RegExp("'","g"),val:"&apos;"},{regex:new RegExp('"',"g"),val:"&quot;"}],processEntities:!0,stopNodes:[],oneListGroup:!1};function Ho(e){this.options=Object.assign({},sM,e),this.options.ignoreAttributes||this.options.attributesGroupName?this.isAttribute=function(){return!1}:(this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=lM),this.processTextOrObjNode=oM,this.options.format?(this.indentate=uM,this.tagEndChar=`>
`,this.newLine=`
`):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine="")}Ho.prototype.build=function(e){return this.options.preserveOrder?aM(e,this.options):(Array.isArray(e)&&this.options.arrayNodeName&&this.options.arrayNodeName.length>1&&(e={[this.options.arrayNodeName]:e}),this.j2x(e,0).val)};Ho.prototype.j2x=function(e,t){let n="",r="";for(let i in e)if(Object.prototype.hasOwnProperty.call(e,i))if(typeof e[i]>"u")this.isAttribute(i)&&(r+="");else if(e[i]===null)this.isAttribute(i)?r+="":i[0]==="?"?r+=this.indentate(t)+"<"+i+"?"+this.tagEndChar:r+=this.indentate(t)+"<"+i+"/"+this.tagEndChar;else if(e[i]instanceof Date)r+=this.buildTextValNode(e[i],i,"",t);else if(typeof e[i]!="object"){let a=this.isAttribute(i);if(a)n+=this.buildAttrPairStr(a,""+e[i]);else if(i===this.options.textNodeName){let s=this.options.tagValueProcessor(i,""+e[i]);r+=this.replaceEntitiesValue(s)}else r+=this.buildTextValNode(e[i],i,"",t)}else if(Array.isArray(e[i])){let a=e[i].length,s="",o="";for(let l=0;l<a;l++){let c=e[i][l];if(!(typeof c>"u"))if(c===null)i[0]==="?"?r+=this.indentate(t)+"<"+i+"?"+this.tagEndChar:r+=this.indentate(t)+"<"+i+"/"+this.tagEndChar;else if(typeof c=="object")if(this.options.oneListGroup){let h=this.j2x(c,t+1);s+=h.val,this.options.attributesGroupName&&c.hasOwnProperty(this.options.attributesGroupName)&&(o+=h.attrStr)}else s+=this.processTextOrObjNode(c,i,t);else if(this.options.oneListGroup){let h=this.options.tagValueProcessor(i,c);h=this.replaceEntitiesValue(h),s+=h}else s+=this.buildTextValNode(c,i,"",t)}this.options.oneListGroup&&(s=this.buildObjectNode(s,i,o,t)),r+=s}else if(this.options.attributesGroupName&&i===this.options.attributesGroupName){let a=Object.keys(e[i]),s=a.length;for(let o=0;o<s;o++)n+=this.buildAttrPairStr(a[o],""+e[i][a[o]])}else r+=this.processTextOrObjNode(e[i],i,t);return{attrStr:n,val:r}};Ho.prototype.buildAttrPairStr=function(e,t){return t=this.options.attributeValueProcessor(e,""+t),t=this.replaceEntitiesValue(t),this.options.suppressBooleanAttributes&&t==="true"?" "+e:" "+e+'="'+t+'"'};function oM(e,t,n){let r=this.j2x(e,n+1);return e[this.options.textNodeName]!==void 0&&Object.keys(e).length===1?this.buildTextValNode(e[this.options.textNodeName],t,r.attrStr,n):this.buildObjectNode(r.val,t,r.attrStr,n)}Ho.prototype.buildObjectNode=function(e,t,n,r){if(e==="")return t[0]==="?"?this.indentate(r)+"<"+t+n+"?"+this.tagEndChar:this.indentate(r)+"<"+t+n+this.closeTag(t)+this.tagEndChar;{let i="</"+t+this.tagEndChar,a="";return t[0]==="?"&&(a="?",i=""),(n||n==="")&&e.indexOf("<")===-1?this.indentate(r)+"<"+t+n+a+">"+e+i:this.options.commentPropName!==!1&&t===this.options.commentPropName&&a.length===0?this.indentate(r)+`<!--${e}-->`+this.newLine:this.indentate(r)+"<"+t+n+a+this.tagEndChar+e+this.indentate(r)+i}};Ho.prototype.closeTag=function(e){let t="";return this.options.unpairedTags.indexOf(e)!==-1?this.options.suppressUnpairedNode||(t="/"):this.options.suppressEmptyNode?t="/":t=`></${e}`,t};Ho.prototype.buildTextValNode=function(e,t,n,r){if(this.options.cdataPropName!==!1&&t===this.options.cdataPropName)return this.indentate(r)+`<![CDATA[${e}]]>`+this.newLine;if(this.options.commentPropName!==!1&&t===this.options.commentPropName)return this.indentate(r)+`<!--${e}-->`+this.newLine;if(t[0]==="?")return this.indentate(r)+"<"+t+n+"?"+this.tagEndChar;{let i=this.options.tagValueProcessor(t,e);return i=this.replaceEntitiesValue(i),i===""?this.indentate(r)+"<"+t+n+this.closeTag(t)+this.tagEndChar:this.indentate(r)+"<"+t+n+">"+i+"</"+t+this.tagEndChar}};Ho.prototype.replaceEntitiesValue=function(e){if(e&&e.length>0&&this.options.processEntities)for(let t=0;t<this.options.entities.length;t++){let n=this.options.entities[t];e=e.replace(n.regex,n.val)}return e};function uM(e){return this.options.indentBy.repeat(e)}function lM(e){return e.startsWith(this.options.attributeNamePrefix)&&e!==this.options.textNodeName?e.substr(this.attrPrefixLen):!1}Kx.exports=Ho});var Zx=$e((NV,Gx)=>{"use strict";var cM=cm(),fM=Fx(),hM=Wx();Gx.exports={XMLParser:fM,XMLValidator:cM,XMLBuilder:hM}});var Lm=$e((sz,pE)=>{var s3=typeof global=="object"&&global&&global.Object===Object&&global;pE.exports=s3});var Fh=$e((oz,gE)=>{var o3=Lm(),u3=typeof self=="object"&&self&&self.Object===Object&&self,l3=o3||u3||Function("return this")();gE.exports=l3});var km=$e((uz,mE)=>{var c3=Fh(),f3=c3.Symbol;mE.exports=f3});var bE=$e((lz,_E)=>{var vE=km(),yE=Object.prototype,h3=yE.hasOwnProperty,d3=yE.toString,Mc=vE?vE.toStringTag:void 0;function p3(e){var t=h3.call(e,Mc),n=e[Mc];try{e[Mc]=void 0;var r=!0}catch{}var i=d3.call(e);return r&&(t?e[Mc]=n:delete e[Mc]),i}_E.exports=p3});var xE=$e((cz,wE)=>{var g3=Object.prototype,m3=g3.toString;function v3(e){return m3.call(e)}wE.exports=v3});var Vh=$e((fz,SE)=>{var EE=km(),y3=bE(),_3=xE(),b3="[object Null]",w3="[object Undefined]",CE=EE?EE.toStringTag:void 0;function x3(e){return e==null?e===void 0?w3:b3:CE&&CE in Object(e)?y3(e):_3(e)}SE.exports=x3});var zh=$e((hz,TE)=>{function E3(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}TE.exports=E3});var Am=$e((dz,LE)=>{var C3=Vh(),S3=zh(),T3="[object AsyncFunction]",L3="[object Function]",k3="[object GeneratorFunction]",A3="[object Proxy]";function I3(e){if(!S3(e))return!1;var t=C3(e);return t==L3||t==k3||t==T3||t==A3}LE.exports=I3});var AE=$e((pz,kE)=>{var N3=Fh(),P3=N3["__core-js_shared__"];kE.exports=P3});var PE=$e((gz,NE)=>{var Im=AE(),IE=function(){var e=/[^.]+$/.exec(Im&&Im.keys&&Im.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function D3(e){return!!IE&&IE in e}NE.exports=D3});var RE=$e((mz,DE)=>{var R3=Function.prototype,O3=R3.toString;function B3(e){if(e!=null){try{return O3.call(e)}catch{}try{return e+""}catch{}}return""}DE.exports=B3});var BE=$e((vz,OE)=>{var M3=Am(),U3=PE(),q3=zh(),F3=RE(),V3=/[\\^$.*+?()[\]{}|]/g,z3=/^\[object .+?Constructor\]$/,H3=Function.prototype,$3=Object.prototype,j3=H3.toString,K3=$3.hasOwnProperty,W3=RegExp("^"+j3.call(K3).replace(V3,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function G3(e){if(!q3(e)||U3(e))return!1;var t=M3(e)?W3:z3;return t.test(F3(e))}OE.exports=G3});var UE=$e((yz,ME)=>{function Z3(e,t){return e==null?void 0:e[t]}ME.exports=Z3});var FE=$e((_z,qE)=>{var X3=BE(),Y3=UE();function Q3(e,t){var n=Y3(e,t);return X3(n)?n:void 0}qE.exports=Q3});var Nm=$e((bz,VE)=>{var J3=FE(),e4=function(){try{var e=J3(Object,"defineProperty");return e({},"",{}),e}catch{}}();VE.exports=e4});var Pm=$e((wz,HE)=>{var zE=Nm();function t4(e,t,n){t=="__proto__"&&zE?zE(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}HE.exports=t4});var Dm=$e((xz,$E)=>{function n4(e,t){return e===t||e!==e&&t!==t}$E.exports=n4});var Rm=$e((Ez,jE)=>{var r4=Pm(),i4=Dm(),a4=Object.prototype,s4=a4.hasOwnProperty;function o4(e,t,n){var r=e[t];(!(s4.call(e,t)&&i4(r,n))||n===void 0&&!(t in e))&&r4(e,t,n)}jE.exports=o4});var WE=$e((Cz,KE)=>{var u4=Rm(),l4=Pm();function c4(e,t,n,r){var i=!n;n||(n={});for(var a=-1,s=t.length;++a<s;){var o=t[a],l=r?r(n[o],e[o],o,n,e):void 0;l===void 0&&(l=e[o]),i?l4(n,o,l):u4(n,o,l)}return n}KE.exports=c4});var Om=$e((Sz,GE)=>{function f4(e){return e}GE.exports=f4});var XE=$e((Tz,ZE)=>{function h4(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}ZE.exports=h4});var JE=$e((Lz,QE)=>{var d4=XE(),YE=Math.max;function p4(e,t,n){return t=YE(t===void 0?e.length-1:t,0),function(){for(var r=arguments,i=-1,a=YE(r.length-t,0),s=Array(a);++i<a;)s[i]=r[t+i];i=-1;for(var o=Array(t+1);++i<t;)o[i]=r[i];return o[t]=n(s),d4(e,this,o)}}QE.exports=p4});var tC=$e((kz,eC)=>{function g4(e){return function(){return e}}eC.exports=g4});var iC=$e((Az,rC)=>{var m4=tC(),nC=Nm(),v4=Om(),y4=nC?function(e,t){return nC(e,"toString",{configurable:!0,enumerable:!1,value:m4(t),writable:!0})}:v4;rC.exports=y4});var sC=$e((Iz,aC)=>{var _4=800,b4=16,w4=Date.now;function x4(e){var t=0,n=0;return function(){var r=w4(),i=b4-(r-n);if(n=r,i>0){if(++t>=_4)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}aC.exports=x4});var uC=$e((Nz,oC)=>{var E4=iC(),C4=sC(),S4=C4(E4);oC.exports=S4});var cC=$e((Pz,lC)=>{var T4=Om(),L4=JE(),k4=uC();function A4(e,t){return k4(L4(e,t,T4),e+"")}lC.exports=A4});var Bm=$e((Dz,fC)=>{var I4=9007199254740991;function N4(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=I4}fC.exports=N4});var Hh=$e((Rz,hC)=>{var P4=Am(),D4=Bm();function R4(e){return e!=null&&D4(e.length)&&!P4(e)}hC.exports=R4});var Mm=$e((Oz,dC)=>{var O4=9007199254740991,B4=/^(?:0|[1-9]\d*)$/;function M4(e,t){var n=typeof e;return t=t==null?O4:t,!!t&&(n=="number"||n!="symbol"&&B4.test(e))&&e>-1&&e%1==0&&e<t}dC.exports=M4});var gC=$e((Bz,pC)=>{var U4=Dm(),q4=Hh(),F4=Mm(),V4=zh();function z4(e,t,n){if(!V4(n))return!1;var r=typeof t;return(r=="number"?q4(n)&&F4(t,n.length):r=="string"&&t in n)?U4(n[t],e):!1}pC.exports=z4});var vC=$e((Mz,mC)=>{var H4=cC(),$4=gC();function j4(e){return H4(function(t,n){var r=-1,i=n.length,a=i>1?n[i-1]:void 0,s=i>2?n[2]:void 0;for(a=e.length>3&&typeof a=="function"?(i--,a):void 0,s&&$4(n[0],n[1],s)&&(a=i<3?void 0:a,i=1),t=Object(t);++r<i;){var o=n[r];o&&e(t,o,r,a)}return t})}mC.exports=j4});var Um=$e((Uz,yC)=>{var K4=Object.prototype;function W4(e){var t=e&&e.constructor,n=typeof t=="function"&&t.prototype||K4;return e===n}yC.exports=W4});var bC=$e((qz,_C)=>{function G4(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}_C.exports=G4});var $h=$e((Fz,wC)=>{function Z4(e){return e!=null&&typeof e=="object"}wC.exports=Z4});var EC=$e((Vz,xC)=>{var X4=Vh(),Y4=$h(),Q4="[object Arguments]";function J4(e){return Y4(e)&&X4(e)==Q4}xC.exports=J4});var LC=$e((zz,TC)=>{var CC=EC(),e5=$h(),SC=Object.prototype,t5=SC.hasOwnProperty,n5=SC.propertyIsEnumerable,r5=CC(function(){return arguments}())?CC:function(e){return e5(e)&&t5.call(e,"callee")&&!n5.call(e,"callee")};TC.exports=r5});var AC=$e((Hz,kC)=>{var i5=Array.isArray;kC.exports=i5});var NC=$e(($z,IC)=>{function a5(){return!1}IC.exports=a5});var OC=$e((Uc,Al)=>{var s5=Fh(),o5=NC(),RC=typeof Uc=="object"&&Uc&&!Uc.nodeType&&Uc,PC=RC&&typeof Al=="object"&&Al&&!Al.nodeType&&Al,u5=PC&&PC.exports===RC,DC=u5?s5.Buffer:void 0,l5=DC?DC.isBuffer:void 0,c5=l5||o5;Al.exports=c5});var MC=$e((jz,BC)=>{var f5=Vh(),h5=Bm(),d5=$h(),p5="[object Arguments]",g5="[object Array]",m5="[object Boolean]",v5="[object Date]",y5="[object Error]",_5="[object Function]",b5="[object Map]",w5="[object Number]",x5="[object Object]",E5="[object RegExp]",C5="[object Set]",S5="[object String]",T5="[object WeakMap]",L5="[object ArrayBuffer]",k5="[object DataView]",A5="[object Float32Array]",I5="[object Float64Array]",N5="[object Int8Array]",P5="[object Int16Array]",D5="[object Int32Array]",R5="[object Uint8Array]",O5="[object Uint8ClampedArray]",B5="[object Uint16Array]",M5="[object Uint32Array]",vr={};vr[A5]=vr[I5]=vr[N5]=vr[P5]=vr[D5]=vr[R5]=vr[O5]=vr[B5]=vr[M5]=!0;vr[p5]=vr[g5]=vr[L5]=vr[m5]=vr[k5]=vr[v5]=vr[y5]=vr[_5]=vr[b5]=vr[w5]=vr[x5]=vr[E5]=vr[C5]=vr[S5]=vr[T5]=!1;function U5(e){return d5(e)&&h5(e.length)&&!!vr[f5(e)]}BC.exports=U5});var qC=$e((Kz,UC)=>{function q5(e){return function(t){return e(t)}}UC.exports=q5});var VC=$e((qc,Il)=>{var F5=Lm(),FC=typeof qc=="object"&&qc&&!qc.nodeType&&qc,Fc=FC&&typeof Il=="object"&&Il&&!Il.nodeType&&Il,V5=Fc&&Fc.exports===FC,qm=V5&&F5.process,z5=function(){try{var e=Fc&&Fc.require&&Fc.require("util").types;return e||qm&&qm.binding&&qm.binding("util")}catch{}}();Il.exports=z5});var jC=$e((Wz,$C)=>{var H5=MC(),$5=qC(),zC=VC(),HC=zC&&zC.isTypedArray,j5=HC?$5(HC):H5;$C.exports=j5});var WC=$e((Gz,KC)=>{var K5=bC(),W5=LC(),G5=AC(),Z5=OC(),X5=Mm(),Y5=jC(),Q5=Object.prototype,J5=Q5.hasOwnProperty;function e8(e,t){var n=G5(e),r=!n&&W5(e),i=!n&&!r&&Z5(e),a=!n&&!r&&!i&&Y5(e),s=n||r||i||a,o=s?K5(e.length,String):[],l=o.length;for(var c in e)(t||J5.call(e,c))&&!(s&&(c=="length"||i&&(c=="offset"||c=="parent")||a&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||X5(c,l)))&&o.push(c);return o}KC.exports=e8});var ZC=$e((Zz,GC)=>{function t8(e,t){return function(n){return e(t(n))}}GC.exports=t8});var YC=$e((Xz,XC)=>{var n8=ZC(),r8=n8(Object.keys,Object);XC.exports=r8});var JC=$e((Yz,QC)=>{var i8=Um(),a8=YC(),s8=Object.prototype,o8=s8.hasOwnProperty;function u8(e){if(!i8(e))return a8(e);var t=[];for(var n in Object(e))o8.call(e,n)&&n!="constructor"&&t.push(n);return t}QC.exports=u8});var tS=$e((Qz,eS)=>{var l8=WC(),c8=JC(),f8=Hh();function h8(e){return f8(e)?l8(e):c8(e)}eS.exports=h8});var rS=$e((Jz,nS)=>{var d8=Rm(),p8=WE(),g8=vC(),m8=Hh(),v8=Um(),y8=tS(),_8=Object.prototype,b8=_8.hasOwnProperty,w8=g8(function(e,t){if(v8(t)||m8(t)){p8(t,y8(t),e);return}for(var n in t)b8.call(t,n)&&d8(e,n,t[n])});nS.exports=w8});var gS=$e((LH,Hm)=>{(function(e){typeof define=="function"&&define.amd&&define.amd.jQuery?define(["jquery"],e):e(typeof Hm<"u"&&Hm.exports?gr():jQuery)})(function(e){"use strict";function t(le){return!le||le.allowPageScroll!==void 0||le.swipe===void 0&&le.swipeStatus===void 0||(le.allowPageScroll=h),le.click!==void 0&&le.tap===void 0&&(le.tap=le.click),le||(le={}),le=e.extend({},e.fn.swipe.defaults,le),this.each(function(){var ie=e(this),oe=ie.data(O);oe||(oe=new n(this,le),ie.data(O,oe))})}function n(le,nt){function oe(ke){if(!(dn()||e(ke.target).closest(nt.excludedElements,Dt).length>0)){var Ze=ke.originalEvent?ke.originalEvent:ke;if(!Ze.pointerType||Ze.pointerType!="mouse"||nt.fallbackToMouseEvents!=0){var ht,St=Ze.touches,ar=St?St[0]:Ze;return pn=v,St?_n=St.length:nt.preventDefaultEvents!==!1&&ke.preventDefault(),qn=0,Zn=null,Xn=null,jr=null,Fn=0,ti=0,sa=0,Ir=1,fi=0,Ma=Qa(),Lr(),kr(0,ar),!St||_n===nt.fingers||nt.fingers===_||ft()?(hs=$i(),_n==2&&(kr(1,St[1]),ti=sa=Cr(Cn[0].start,Cn[1].start)),(nt.swipeStatus||nt.pinchStatus)&&(ht=de(Ze,pn))):ht=!1,ht===!1?(pn=Z,de(Ze,pn),ht):(nt.hold&&(qr=setTimeout(e.proxy(function(){Dt.trigger("hold",[Ze.target]),nt.hold&&(ht=nt.hold.call(Dt,Ze,Ze.target))},this),nt.longTapThreshold)),Kn(!0),null)}}}function Q(ke){var Ze=ke.originalEvent?ke.originalEvent:ke;if(pn!==$&&pn!==Z&&!bi()){var ht,St=Ze.touches,ar=St?St[0]:Ze,Yn=yr(ar);if(Ua=$i(),St&&(_n=St.length),nt.hold&&clearTimeout(qr),pn=y,_n==2&&(ti==0?(kr(1,St[1]),ti=sa=Cr(Cn[0].start,Cn[1].start)):(yr(St[1]),sa=Cr(Cn[0].end,Cn[1].end),jr=fo(Cn[0].end,Cn[1].end)),Ir=ba(ti,sa),fi=Math.abs(ti-sa)),_n===nt.fingers||nt.fingers===_||!St||ft()){if(Zn=wa(Yn.start,Yn.end),Xn=wa(Yn.last,Yn.end),Ge(ke,Xn),qn=ci(Yn.start,Yn.end),Fn=Mr(),cr(Zn,qn),ht=de(Ze,pn),!nt.triggerOnTouchEnd||nt.triggerOnTouchLeave){var Gt=!0;if(nt.triggerOnTouchLeave){var Jn=ho(this);Gt=po(Yn.end,Jn)}!nt.triggerOnTouchEnd&&Gt?pn=pe(y):nt.triggerOnTouchLeave&&!Gt&&(pn=pe($)),pn!=Z&&pn!=$||de(Ze,pn)}}else pn=Z,de(Ze,pn);ht===!1&&(pn=Z,de(Ze,pn))}}function j(ke){var Ze=ke.originalEvent?ke.originalEvent:ke,ht=Ze.touches;if(ht){if(ht.length&&!bi())return zi(Ze),!0;if(ht.length&&bi())return!0}return bi()&&(_n=wi),Ua=$i(),Fn=Mr(),ve()||!Ie()?(pn=Z,de(Ze,pn)):nt.triggerOnTouchEnd||nt.triggerOnTouchEnd===!1&&pn===y?(nt.preventDefaultEvents!==!1&&ke.cancelable!==!1&&ke.preventDefault(),pn=$,de(Ze,pn)):!nt.triggerOnTouchEnd&&Ve()?(pn=$,Ae(Ze,pn,C)):pn===y&&(pn=Z,de(Ze,pn)),Kn(!1),null}function H(){_n=0,Ua=0,hs=0,ti=0,sa=0,Ir=1,Lr(),Kn(!1)}function G(ke){var Ze=ke.originalEvent?ke.originalEvent:ke;nt.triggerOnTouchLeave&&(pn=pe($),de(Ze,pn))}function fe(){Dt.off(kt,oe),Dt.off(aa,H),Dt.off(fs,Q),Dt.off(ji,j),ia&&Dt.off(ia,G),Kn(!1)}function pe(ke){var Ze=ke,ht=Me(),St=Ie(),ar=ve();return!ht||ar?Ze=Z:!St||ke!=y||nt.triggerOnTouchEnd&&!nt.triggerOnTouchLeave?!St&&ke==$&&nt.triggerOnTouchLeave&&(Ze=Z):Ze=$,Ze}function de(ke,Ze){var ht,St=ke.touches;return(ae()||Ee())&&(ht=Ae(ke,Ze,E)),(V()||ft())&&ht!==!1&&(ht=Ae(ke,Ze,b)),nn()&&ht!==!1?ht=Ae(ke,Ze,N):Er()&&ht!==!1?ht=Ae(ke,Ze,w):qt()&&ht!==!1&&(ht=Ae(ke,Ze,C)),Ze===Z&&H(ke),Ze===$&&(St&&St.length||H(ke)),ht}function Ae(ke,Ze,ht){var St;if(ht==E){if(Dt.trigger("swipeStatus",[Ze,Zn||null,qn||0,Fn||0,_n,Cn,Xn]),nt.swipeStatus&&(St=nt.swipeStatus.call(Dt,ke,Ze,Zn||null,qn||0,Fn||0,_n,Cn,Xn),St===!1))return!1;if(Ze==$&&Se()){if(clearTimeout(fr),clearTimeout(qr),Dt.trigger("swipe",[Zn,qn,Fn,_n,Cn,Xn]),nt.swipe&&(St=nt.swipe.call(Dt,ke,Zn,qn,Fn,_n,Cn,Xn),St===!1))return!1;switch(Zn){case i:Dt.trigger("swipeLeft",[Zn,qn,Fn,_n,Cn,Xn]),nt.swipeLeft&&(St=nt.swipeLeft.call(Dt,ke,Zn,qn,Fn,_n,Cn,Xn));break;case a:Dt.trigger("swipeRight",[Zn,qn,Fn,_n,Cn,Xn]),nt.swipeRight&&(St=nt.swipeRight.call(Dt,ke,Zn,qn,Fn,_n,Cn,Xn));break;case s:Dt.trigger("swipeUp",[Zn,qn,Fn,_n,Cn,Xn]),nt.swipeUp&&(St=nt.swipeUp.call(Dt,ke,Zn,qn,Fn,_n,Cn,Xn));break;case o:Dt.trigger("swipeDown",[Zn,qn,Fn,_n,Cn,Xn]),nt.swipeDown&&(St=nt.swipeDown.call(Dt,ke,Zn,qn,Fn,_n,Cn,Xn))}}}if(ht==b){if(Dt.trigger("pinchStatus",[Ze,jr||null,fi||0,Fn||0,_n,Ir,Cn]),nt.pinchStatus&&(St=nt.pinchStatus.call(Dt,ke,Ze,jr||null,fi||0,Fn||0,_n,Ir,Cn),St===!1))return!1;if(Ze==$&&at())switch(jr){case l:Dt.trigger("pinchIn",[jr||null,fi||0,Fn||0,_n,Ir,Cn]),nt.pinchIn&&(St=nt.pinchIn.call(Dt,ke,jr||null,fi||0,Fn||0,_n,Ir,Cn));break;case c:Dt.trigger("pinchOut",[jr||null,fi||0,Fn||0,_n,Ir,Cn]),nt.pinchOut&&(St=nt.pinchOut.call(Dt,ke,jr||null,fi||0,Fn||0,_n,Ir,Cn))}}return ht==C?Ze!==Z&&Ze!==$||(clearTimeout(fr),clearTimeout(qr),et()&&!gt()?(Ki=$i(),fr=setTimeout(e.proxy(function(){Ki=null,Dt.trigger("tap",[ke.target]),nt.tap&&(St=nt.tap.call(Dt,ke,ke.target))},this),nt.doubleTapThreshold)):(Ki=null,Dt.trigger("tap",[ke.target]),nt.tap&&(St=nt.tap.call(Dt,ke,ke.target)))):ht==N?Ze!==Z&&Ze!==$||(clearTimeout(fr),clearTimeout(qr),Ki=null,Dt.trigger("doubletap",[ke.target]),nt.doubleTap&&(St=nt.doubleTap.call(Dt,ke,ke.target))):ht==w&&(Ze!==Z&&Ze!==$||(clearTimeout(fr),Ki=null,Dt.trigger("longtap",[ke.target]),nt.longTap&&(St=nt.longTap.call(Dt,ke,ke.target)))),St}function Ie(){var ke=!0;return nt.threshold!==null&&(ke=qn>=nt.threshold),ke}function ve(){var ke=!1;return nt.cancelThreshold!==null&&Zn!==null&&(ke=_a(Zn)-qn>=nt.cancelThreshold),ke}function Te(){return nt.pinchThreshold!==null?fi>=nt.pinchThreshold:!0}function Me(){var ke;return ke=nt.maxTimeThreshold?!(Fn>=nt.maxTimeThreshold):!0}function Ge(ke,Ze){if(nt.preventDefaultEvents!==!1)if(nt.allowPageScroll===h)ke.preventDefault();else{var ht=nt.allowPageScroll===p;switch(Ze){case i:(nt.swipeLeft&&ht||!ht&&nt.allowPageScroll!=I)&&ke.preventDefault();break;case a:(nt.swipeRight&&ht||!ht&&nt.allowPageScroll!=I)&&ke.preventDefault();break;case s:(nt.swipeUp&&ht||!ht&&nt.allowPageScroll!=S)&&ke.preventDefault();break;case o:(nt.swipeDown&&ht||!ht&&nt.allowPageScroll!=S)&&ke.preventDefault();break;case h:}}}function at(){var ke=ue(),Ze=ye(),ht=Te();return ke&&Ze&&ht}function ft(){return!!(nt.pinchStatus||nt.pinchIn||nt.pinchOut)}function V(){return!(!at()||!ft())}function Se(){var ke=Me(),Ze=Ie(),ht=ue(),St=ye(),ar=ve(),Yn=!ar&&St&&ht&&Ze&&ke;return Yn}function Ee(){return!!(nt.swipe||nt.swipeStatus||nt.swipeLeft||nt.swipeRight||nt.swipeUp||nt.swipeDown)}function ae(){return!(!Se()||!Ee())}function ue(){return _n===nt.fingers||nt.fingers===_||!ce}function ye(){return Cn[0].end.x!==0}function Ve(){return!!nt.tap}function et(){return!!nt.doubleTap}function Re(){return!!nt.longTap}function Qe(){if(Ki==null)return!1;var ke=$i();return et()&&ke-Ki<=nt.doubleTapThreshold}function gt(){return Qe()}function rt(){return(_n===1||!ce)&&(isNaN(qn)||qn<nt.threshold)}function Je(){return Fn>nt.longTapThreshold&&P>qn}function qt(){return!(!rt()||!Ve())}function nn(){return!(!Qe()||!et())}function Er(){return!(!Je()||!Re())}function zi(ke){Ea=$i(),wi=ke.touches.length+1}function Lr(){Ea=0,wi=0}function bi(){var ke=!1;if(Ea){var Ze=$i()-Ea;Ze<=nt.fingerReleaseThreshold&&(ke=!0)}return ke}function dn(){return Dt.data(O+"_intouch")===!0}function Kn(ke){Dt&&(ke===!0?(Dt.on(fs,Q),Dt.on(ji,j),ia&&Dt.on(ia,G)):(Dt.off(fs,Q,!1),Dt.off(ji,j,!1),ia&&Dt.off(ia,G,!1)),Dt.data(O+"_intouch",ke===!0))}function kr(ke,Ze){var ht={start:{x:0,y:0},last:{x:0,y:0},end:{x:0,y:0}};return ht.start.x=ht.last.x=ht.end.x=Ze.pageX||Ze.clientX,ht.start.y=ht.last.y=ht.end.y=Ze.pageY||Ze.clientY,Cn[ke]=ht,ht}function yr(ke){var Ze=ke.identifier!==void 0?ke.identifier:0,ht=lr(Ze);return ht===null&&(ht=kr(Ze,ke)),ht.last.x=ht.end.x,ht.last.y=ht.end.y,ht.end.x=ke.pageX||ke.clientX,ht.end.y=ke.pageY||ke.clientY,ht}function lr(ke){return Cn[ke]||null}function cr(ke,Ze){ke!=h&&(Ze=Math.max(Ze,_a(ke)),Ma[ke].distance=Ze)}function _a(ke){return Ma[ke]?Ma[ke].distance:void 0}function Qa(){var ke={};return ke[i]=Hi(i),ke[a]=Hi(a),ke[s]=Hi(s),ke[o]=Hi(o),ke}function Hi(ke){return{direction:ke,distance:0}}function Mr(){return Ua-hs}function Cr(ke,Ze){var ht=Math.abs(ke.x-Ze.x),St=Math.abs(ke.y-Ze.y);return Math.round(Math.sqrt(ht*ht+St*St))}function ba(ke,Ze){var ht=Ze/ke*1;return ht.toFixed(2)}function fo(){return 1>Ir?c:l}function ci(ke,Ze){return Math.round(Math.sqrt(Math.pow(Ze.x-ke.x,2)+Math.pow(Ze.y-ke.y,2)))}function Ar(ke,Ze){var ht=ke.x-Ze.x,St=Ze.y-ke.y,ar=Math.atan2(St,ht),Yn=Math.round(180*ar/Math.PI);return 0>Yn&&(Yn=360-Math.abs(Yn)),Yn}function wa(ke,Ze){if(xa(ke,Ze))return h;var ht=Ar(ke,Ze);return 45>=ht&&ht>=0||360>=ht&&ht>=315?i:ht>=135&&225>=ht?a:ht>45&&135>ht?o:s}function $i(){var ke=new Date;return ke.getTime()}function ho(ke){ke=e(ke);var Ze=ke.offset(),ht={left:Ze.left,right:Ze.left+ke.outerWidth(),top:Ze.top,bottom:Ze.top+ke.outerHeight()};return ht}function po(ke,Ze){return ke.x>Ze.left&&ke.x<Ze.right&&ke.y>Ze.top&&ke.y<Ze.bottom}function xa(ke,Ze){return ke.x==Ze.x&&ke.y==Ze.y}var nt=e.extend({},nt),Ur=ce||W||!nt.fallbackToMouseEvents,kt=Ur?W?q?"MSPointerDown":"pointerdown":"touchstart":"mousedown",fs=Ur?W?q?"MSPointerMove":"pointermove":"touchmove":"mousemove",ji=Ur?W?q?"MSPointerUp":"pointerup":"touchend":"mouseup",ia=Ur?W?"mouseleave":null:"mouseleave",aa=W?q?"MSPointerCancel":"pointercancel":"touchcancel",qn=0,Zn=null,Xn=null,Fn=0,ti=0,sa=0,Ir=1,fi=0,jr=0,Ma=null,Dt=e(le),pn="start",_n=0,Cn={},hs=0,Ua=0,Ea=0,wi=0,Ki=0,fr=null,qr=null;try{Dt.on(kt,oe),Dt.on(aa,H)}catch{e.error("events not supported "+kt+","+aa+" on jQuery.swipe")}this.enable=function(){return this.disable(),Dt.on(kt,oe),Dt.on(aa,H),Dt},this.disable=function(){return fe(),Dt},this.destroy=function(){fe(),Dt.data(O,null),Dt=null},this.option=function(ke,Ze){if(typeof ke=="object")nt=e.extend(nt,ke);else if(nt[ke]!==void 0){if(Ze===void 0)return nt[ke];nt[ke]=Ze}else{if(!ke)return nt;e.error("Option "+ke+" does not exist on jQuery.swipe.options")}return null}}var r="1.6.18",i="left",a="right",s="up",o="down",l="in",c="out",h="none",p="auto",E="swipe",b="pinch",C="tap",N="doubletap",w="longtap",I="horizontal",S="vertical",_="all",P=10,v="start",y="move",$="end",Z="cancel",ce="ontouchstart"in window,q=window.navigator.msPointerEnabled&&!window.PointerEvent&&!ce,W=(window.PointerEvent||window.navigator.msPointerEnabled)&&!ce,O="TouchSwipe",re={fingers:1,threshold:75,cancelThreshold:null,pinchThreshold:20,maxTimeThreshold:null,fingerReleaseThreshold:250,longTapThreshold:500,doubleTapThreshold:200,swipe:null,swipeLeft:null,swipeRight:null,swipeUp:null,swipeDown:null,swipeStatus:null,pinchIn:null,pinchOut:null,pinchStatus:null,click:null,tap:null,doubleTap:null,longTap:null,hold:null,triggerOnTouchEnd:!0,triggerOnTouchLeave:!1,allowPageScroll:"auto",fallbackToMouseEvents:!0,excludedElements:".noSwipe",preventDefaultEvents:!0};e.fn.swipe=function(le){var ie=e(this),oe=ie.data(O);if(oe&&typeof le=="string"){if(oe[le])return oe[le].apply(oe,Array.prototype.slice.call(arguments,1));e.error("Method "+le+" does not exist on jQuery.swipe")}else if(oe&&typeof le=="object")oe.option.apply(oe,arguments);else if(!(oe||typeof le!="object"&&le))return t.apply(this,arguments);return ie},e.fn.swipe.version=r,e.fn.swipe.defaults=re,e.fn.swipe.phases={PHASE_START:v,PHASE_MOVE:y,PHASE_END:$,PHASE_CANCEL:Z},e.fn.swipe.directions={LEFT:i,RIGHT:a,UP:s,DOWN:o,IN:l,OUT:c},e.fn.swipe.pageScroll={NONE:h,HORIZONTAL:I,VERTICAL:S,AUTO:p},e.fn.swipe.fingers={ONE:1,TWO:2,THREE:3,FOUR:4,FIVE:5,ALL:_}})});var ES=$e((Gh,xS)=>{(function(e,t){typeof Gh=="object"&&typeof xS<"u"?t(Gh):typeof define=="function"&&define.amd?define(["exports"],t):(e=typeof globalThis<"u"?globalThis:e||self,t(e.leaflet={}))})(Gh,function(e){"use strict";var t="1.9.4";function n(u){var d,x,D,F;for(x=1,D=arguments.length;x<D;x++){F=arguments[x];for(d in F)u[d]=F[d]}return u}var r=Object.create||function(){function u(){}return function(d){return u.prototype=d,new u}}();function i(u,d){var x=Array.prototype.slice;if(u.bind)return u.bind.apply(u,x.call(arguments,1));var D=x.call(arguments,2);return function(){return u.apply(d,D.length?D.concat(x.call(arguments)):arguments)}}var a=0;function s(u){return"_leaflet_id"in u||(u._leaflet_id=++a),u._leaflet_id}function o(u,d,x){var D,F,te,_e;return _e=function(){D=!1,F&&(te.apply(x,F),F=!1)},te=function(){D?F=arguments:(u.apply(x,arguments),setTimeout(_e,d),D=!0)},te}function l(u,d,x){var D=d[1],F=d[0],te=D-F;return u===D&&x?u:((u-F)%te+te)%te+F}function c(){return!1}function h(u,d){if(d===!1)return u;var x=Math.pow(10,d===void 0?6:d);return Math.round(u*x)/x}function p(u){return u.trim?u.trim():u.replace(/^\s+|\s+$/g,"")}function E(u){return p(u).split(/\s+/)}function b(u,d){Object.prototype.hasOwnProperty.call(u,"options")||(u.options=u.options?r(u.options):{});for(var x in d)u.options[x]=d[x];return u.options}function C(u,d,x){var D=[];for(var F in u)D.push(encodeURIComponent(x?F.toUpperCase():F)+"="+encodeURIComponent(u[F]));return(!d||d.indexOf("?")===-1?"?":"&")+D.join("&")}var N=/\{ *([\w_ -]+) *\}/g;function w(u,d){return u.replace(N,function(x,D){var F=d[D];if(F===void 0)throw new Error("No value provided for variable "+x);return typeof F=="function"&&(F=F(d)),F})}var I=Array.isArray||function(u){return Object.prototype.toString.call(u)==="[object Array]"};function S(u,d){for(var x=0;x<u.length;x++)if(u[x]===d)return x;return-1}var _="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function P(u){return window["webkit"+u]||window["moz"+u]||window["ms"+u]}var v=0;function y(u){var d=+new Date,x=Math.max(0,16-(d-v));return v=d+x,window.setTimeout(u,x)}var $=window.requestAnimationFrame||P("RequestAnimationFrame")||y,Z=window.cancelAnimationFrame||P("CancelAnimationFrame")||P("CancelRequestAnimationFrame")||function(u){window.clearTimeout(u)};function ce(u,d,x){if(x&&$===y)u.call(d);else return $.call(window,i(u,d))}function q(u){u&&Z.call(window,u)}var W={__proto__:null,extend:n,create:r,bind:i,get lastId(){return a},stamp:s,throttle:o,wrapNum:l,falseFn:c,formatNum:h,trim:p,splitWords:E,setOptions:b,getParamString:C,template:w,isArray:I,indexOf:S,emptyImageUrl:_,requestFn:$,cancelFn:Z,requestAnimFrame:ce,cancelAnimFrame:q};function O(){}O.extend=function(u){var d=function(){b(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},x=d.__super__=this.prototype,D=r(x);D.constructor=d,d.prototype=D;for(var F in this)Object.prototype.hasOwnProperty.call(this,F)&&F!=="prototype"&&F!=="__super__"&&(d[F]=this[F]);return u.statics&&n(d,u.statics),u.includes&&(re(u.includes),n.apply(null,[D].concat(u.includes))),n(D,u),delete D.statics,delete D.includes,D.options&&(D.options=x.options?r(x.options):{},n(D.options,u.options)),D._initHooks=[],D.callInitHooks=function(){if(!this._initHooksCalled){x.callInitHooks&&x.callInitHooks.call(this),this._initHooksCalled=!0;for(var te=0,_e=D._initHooks.length;te<_e;te++)D._initHooks[te].call(this)}},d},O.include=function(u){var d=this.prototype.options;return n(this.prototype,u),u.options&&(this.prototype.options=d,this.mergeOptions(u.options)),this},O.mergeOptions=function(u){return n(this.prototype.options,u),this},O.addInitHook=function(u){var d=Array.prototype.slice.call(arguments,1),x=typeof u=="function"?u:function(){this[u].apply(this,d)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(x),this};function re(u){if(!(typeof L>"u"||!L||!L.Mixin)){u=I(u)?u:[u];for(var d=0;d<u.length;d++)u[d]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var le={on:function(u,d,x){if(typeof u=="object")for(var D in u)this._on(D,u[D],d);else{u=E(u);for(var F=0,te=u.length;F<te;F++)this._on(u[F],d,x)}return this},off:function(u,d,x){if(!arguments.length)delete this._events;else if(typeof u=="object")for(var D in u)this._off(D,u[D],d);else{u=E(u);for(var F=arguments.length===1,te=0,_e=u.length;te<_e;te++)F?this._off(u[te]):this._off(u[te],d,x)}return this},_on:function(u,d,x,D){if(typeof d!="function"){console.warn("wrong listener type: "+typeof d);return}if(this._listens(u,d,x)===!1){x===this&&(x=void 0);var F={fn:d,ctx:x};D&&(F.once=!0),this._events=this._events||{},this._events[u]=this._events[u]||[],this._events[u].push(F)}},_off:function(u,d,x){var D,F,te;if(this._events&&(D=this._events[u],!!D)){if(arguments.length===1){if(this._firingCount)for(F=0,te=D.length;F<te;F++)D[F].fn=c;delete this._events[u];return}if(typeof d!="function"){console.warn("wrong listener type: "+typeof d);return}var _e=this._listens(u,d,x);if(_e!==!1){var qe=D[_e];this._firingCount&&(qe.fn=c,this._events[u]=D=D.slice()),D.splice(_e,1)}}},fire:function(u,d,x){if(!this.listens(u,x))return this;var D=n({},d,{type:u,target:this,sourceTarget:d&&d.sourceTarget||this});if(this._events){var F=this._events[u];if(F){this._firingCount=this._firingCount+1||1;for(var te=0,_e=F.length;te<_e;te++){var qe=F[te],He=qe.fn;qe.once&&this.off(u,He,qe.ctx),He.call(qe.ctx||this,D)}this._firingCount--}}return x&&this._propagateEvent(D),this},listens:function(u,d,x,D){typeof u!="string"&&console.warn('"string" type argument expected');var F=d;typeof d!="function"&&(D=!!d,F=void 0,x=void 0);var te=this._events&&this._events[u];if(te&&te.length&&this._listens(u,F,x)!==!1)return!0;if(D){for(var _e in this._eventParents)if(this._eventParents[_e].listens(u,d,x,D))return!0}return!1},_listens:function(u,d,x){if(!this._events)return!1;var D=this._events[u]||[];if(!d)return!!D.length;x===this&&(x=void 0);for(var F=0,te=D.length;F<te;F++)if(D[F].fn===d&&D[F].ctx===x)return F;return!1},once:function(u,d,x){if(typeof u=="object")for(var D in u)this._on(D,u[D],d,!0);else{u=E(u);for(var F=0,te=u.length;F<te;F++)this._on(u[F],d,x,!0)}return this},addEventParent:function(u){return this._eventParents=this._eventParents||{},this._eventParents[s(u)]=u,this},removeEventParent:function(u){return this._eventParents&&delete this._eventParents[s(u)],this},_propagateEvent:function(u){for(var d in this._eventParents)this._eventParents[d].fire(u.type,n({layer:u.target,propagatedFrom:u.target},u),!0)}};le.addEventListener=le.on,le.removeEventListener=le.clearAllEventListeners=le.off,le.addOneTimeEventListener=le.once,le.fireEvent=le.fire,le.hasEventListeners=le.listens;var ie=O.extend(le);function oe(u,d,x){this.x=x?Math.round(u):u,this.y=x?Math.round(d):d}var Q=Math.trunc||function(u){return u>0?Math.floor(u):Math.ceil(u)};oe.prototype={clone:function(){return new oe(this.x,this.y)},add:function(u){return this.clone()._add(j(u))},_add:function(u){return this.x+=u.x,this.y+=u.y,this},subtract:function(u){return this.clone()._subtract(j(u))},_subtract:function(u){return this.x-=u.x,this.y-=u.y,this},divideBy:function(u){return this.clone()._divideBy(u)},_divideBy:function(u){return this.x/=u,this.y/=u,this},multiplyBy:function(u){return this.clone()._multiplyBy(u)},_multiplyBy:function(u){return this.x*=u,this.y*=u,this},scaleBy:function(u){return new oe(this.x*u.x,this.y*u.y)},unscaleBy:function(u){return new oe(this.x/u.x,this.y/u.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=Q(this.x),this.y=Q(this.y),this},distanceTo:function(u){u=j(u);var d=u.x-this.x,x=u.y-this.y;return Math.sqrt(d*d+x*x)},equals:function(u){return u=j(u),u.x===this.x&&u.y===this.y},contains:function(u){return u=j(u),Math.abs(u.x)<=Math.abs(this.x)&&Math.abs(u.y)<=Math.abs(this.y)},toString:function(){return"Point("+h(this.x)+", "+h(this.y)+")"}};function j(u,d,x){return u instanceof oe?u:I(u)?new oe(u[0],u[1]):u==null?u:typeof u=="object"&&"x"in u&&"y"in u?new oe(u.x,u.y):new oe(u,d,x)}function H(u,d){if(u)for(var x=d?[u,d]:u,D=0,F=x.length;D<F;D++)this.extend(x[D])}H.prototype={extend:function(u){var d,x;if(!u)return this;if(u instanceof oe||typeof u[0]=="number"||"x"in u)d=x=j(u);else if(u=G(u),d=u.min,x=u.max,!d||!x)return this;return!this.min&&!this.max?(this.min=d.clone(),this.max=x.clone()):(this.min.x=Math.min(d.x,this.min.x),this.max.x=Math.max(x.x,this.max.x),this.min.y=Math.min(d.y,this.min.y),this.max.y=Math.max(x.y,this.max.y)),this},getCenter:function(u){return j((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,u)},getBottomLeft:function(){return j(this.min.x,this.max.y)},getTopRight:function(){return j(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(u){var d,x;return typeof u[0]=="number"||u instanceof oe?u=j(u):u=G(u),u instanceof H?(d=u.min,x=u.max):d=x=u,d.x>=this.min.x&&x.x<=this.max.x&&d.y>=this.min.y&&x.y<=this.max.y},intersects:function(u){u=G(u);var d=this.min,x=this.max,D=u.min,F=u.max,te=F.x>=d.x&&D.x<=x.x,_e=F.y>=d.y&&D.y<=x.y;return te&&_e},overlaps:function(u){u=G(u);var d=this.min,x=this.max,D=u.min,F=u.max,te=F.x>d.x&&D.x<x.x,_e=F.y>d.y&&D.y<x.y;return te&&_e},isValid:function(){return!!(this.min&&this.max)},pad:function(u){var d=this.min,x=this.max,D=Math.abs(d.x-x.x)*u,F=Math.abs(d.y-x.y)*u;return G(j(d.x-D,d.y-F),j(x.x+D,x.y+F))},equals:function(u){return u?(u=G(u),this.min.equals(u.getTopLeft())&&this.max.equals(u.getBottomRight())):!1}};function G(u,d){return!u||u instanceof H?u:new H(u,d)}function fe(u,d){if(u)for(var x=d?[u,d]:u,D=0,F=x.length;D<F;D++)this.extend(x[D])}fe.prototype={extend:function(u){var d=this._southWest,x=this._northEast,D,F;if(u instanceof de)D=u,F=u;else if(u instanceof fe){if(D=u._southWest,F=u._northEast,!D||!F)return this}else return u?this.extend(Ae(u)||pe(u)):this;return!d&&!x?(this._southWest=new de(D.lat,D.lng),this._northEast=new de(F.lat,F.lng)):(d.lat=Math.min(D.lat,d.lat),d.lng=Math.min(D.lng,d.lng),x.lat=Math.max(F.lat,x.lat),x.lng=Math.max(F.lng,x.lng)),this},pad:function(u){var d=this._southWest,x=this._northEast,D=Math.abs(d.lat-x.lat)*u,F=Math.abs(d.lng-x.lng)*u;return new fe(new de(d.lat-D,d.lng-F),new de(x.lat+D,x.lng+F))},getCenter:function(){return new de((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new de(this.getNorth(),this.getWest())},getSouthEast:function(){return new de(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(u){typeof u[0]=="number"||u instanceof de||"lat"in u?u=Ae(u):u=pe(u);var d=this._southWest,x=this._northEast,D,F;return u instanceof fe?(D=u.getSouthWest(),F=u.getNorthEast()):D=F=u,D.lat>=d.lat&&F.lat<=x.lat&&D.lng>=d.lng&&F.lng<=x.lng},intersects:function(u){u=pe(u);var d=this._southWest,x=this._northEast,D=u.getSouthWest(),F=u.getNorthEast(),te=F.lat>=d.lat&&D.lat<=x.lat,_e=F.lng>=d.lng&&D.lng<=x.lng;return te&&_e},overlaps:function(u){u=pe(u);var d=this._southWest,x=this._northEast,D=u.getSouthWest(),F=u.getNorthEast(),te=F.lat>d.lat&&D.lat<x.lat,_e=F.lng>d.lng&&D.lng<x.lng;return te&&_e},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(u,d){return u?(u=pe(u),this._southWest.equals(u.getSouthWest(),d)&&this._northEast.equals(u.getNorthEast(),d)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function pe(u,d){return u instanceof fe?u:new fe(u,d)}function de(u,d,x){if(isNaN(u)||isNaN(d))throw new Error("Invalid LatLng object: ("+u+", "+d+")");this.lat=+u,this.lng=+d,x!==void 0&&(this.alt=+x)}de.prototype={equals:function(u,d){if(!u)return!1;u=Ae(u);var x=Math.max(Math.abs(this.lat-u.lat),Math.abs(this.lng-u.lng));return x<=(d===void 0?1e-9:d)},toString:function(u){return"LatLng("+h(this.lat,u)+", "+h(this.lng,u)+")"},distanceTo:function(u){return ve.distance(this,Ae(u))},wrap:function(){return ve.wrapLatLng(this)},toBounds:function(u){var d=180*u/40075017,x=d/Math.cos(Math.PI/180*this.lat);return pe([this.lat-d,this.lng-x],[this.lat+d,this.lng+x])},clone:function(){return new de(this.lat,this.lng,this.alt)}};function Ae(u,d,x){return u instanceof de?u:I(u)&&typeof u[0]!="object"?u.length===3?new de(u[0],u[1],u[2]):u.length===2?new de(u[0],u[1]):null:u==null?u:typeof u=="object"&&"lat"in u?new de(u.lat,"lng"in u?u.lng:u.lon,u.alt):d===void 0?null:new de(u,d,x)}var Ie={latLngToPoint:function(u,d){var x=this.projection.project(u),D=this.scale(d);return this.transformation._transform(x,D)},pointToLatLng:function(u,d){var x=this.scale(d),D=this.transformation.untransform(u,x);return this.projection.unproject(D)},project:function(u){return this.projection.project(u)},unproject:function(u){return this.projection.unproject(u)},scale:function(u){return 256*Math.pow(2,u)},zoom:function(u){return Math.log(u/256)/Math.LN2},getProjectedBounds:function(u){if(this.infinite)return null;var d=this.projection.bounds,x=this.scale(u),D=this.transformation.transform(d.min,x),F=this.transformation.transform(d.max,x);return new H(D,F)},infinite:!1,wrapLatLng:function(u){var d=this.wrapLng?l(u.lng,this.wrapLng,!0):u.lng,x=this.wrapLat?l(u.lat,this.wrapLat,!0):u.lat,D=u.alt;return new de(x,d,D)},wrapLatLngBounds:function(u){var d=u.getCenter(),x=this.wrapLatLng(d),D=d.lat-x.lat,F=d.lng-x.lng;if(D===0&&F===0)return u;var te=u.getSouthWest(),_e=u.getNorthEast(),qe=new de(te.lat-D,te.lng-F),He=new de(_e.lat-D,_e.lng-F);return new fe(qe,He)}},ve=n({},Ie,{wrapLng:[-180,180],R:6371e3,distance:function(u,d){var x=Math.PI/180,D=u.lat*x,F=d.lat*x,te=Math.sin((d.lat-u.lat)*x/2),_e=Math.sin((d.lng-u.lng)*x/2),qe=te*te+Math.cos(D)*Math.cos(F)*_e*_e,He=2*Math.atan2(Math.sqrt(qe),Math.sqrt(1-qe));return this.R*He}}),Te=6378137,Me={R:Te,MAX_LATITUDE:85.0511287798,project:function(u){var d=Math.PI/180,x=this.MAX_LATITUDE,D=Math.max(Math.min(x,u.lat),-x),F=Math.sin(D*d);return new oe(this.R*u.lng*d,this.R*Math.log((1+F)/(1-F))/2)},unproject:function(u){var d=180/Math.PI;return new de((2*Math.atan(Math.exp(u.y/this.R))-Math.PI/2)*d,u.x*d/this.R)},bounds:function(){var u=Te*Math.PI;return new H([-u,-u],[u,u])}()};function Ge(u,d,x,D){if(I(u)){this._a=u[0],this._b=u[1],this._c=u[2],this._d=u[3];return}this._a=u,this._b=d,this._c=x,this._d=D}Ge.prototype={transform:function(u,d){return this._transform(u.clone(),d)},_transform:function(u,d){return d=d||1,u.x=d*(this._a*u.x+this._b),u.y=d*(this._c*u.y+this._d),u},untransform:function(u,d){return d=d||1,new oe((u.x/d-this._b)/this._a,(u.y/d-this._d)/this._c)}};function at(u,d,x,D){return new Ge(u,d,x,D)}var ft=n({},ve,{code:"EPSG:3857",projection:Me,transformation:function(){var u=.5/(Math.PI*Me.R);return at(u,.5,-u,.5)}()}),V=n({},ft,{code:"EPSG:900913"});function Se(u){return document.createElementNS("http://www.w3.org/2000/svg",u)}function Ee(u,d){var x="",D,F,te,_e,qe,He;for(D=0,te=u.length;D<te;D++){for(qe=u[D],F=0,_e=qe.length;F<_e;F++)He=qe[F],x+=(F?"L":"M")+He.x+" "+He.y;x+=d?kt.svg?"z":"x":""}return x||"M0 0"}var ae=document.documentElement.style,ue="ActiveXObject"in window,ye=ue&&!document.addEventListener,Ve="msLaunchUri"in navigator&&!("documentMode"in document),et=Ur("webkit"),Re=Ur("android"),Qe=Ur("android 2")||Ur("android 3"),gt=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),rt=Re&&Ur("Google")&&gt<537&&!("AudioNode"in window),Je=!!window.opera,qt=!Ve&&Ur("chrome"),nn=Ur("gecko")&&!et&&!Je&&!ue,Er=!qt&&Ur("safari"),zi=Ur("phantom"),Lr="OTransition"in ae,bi=navigator.platform.indexOf("Win")===0,dn=ue&&"transition"in ae,Kn="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Qe,kr="MozPerspective"in ae,yr=!window.L_DISABLE_3D&&(dn||Kn||kr)&&!Lr&&!zi,lr=typeof orientation<"u"||Ur("mobile"),cr=lr&&et,_a=lr&&Kn,Qa=!window.PointerEvent&&window.MSPointerEvent,Hi=!!(window.PointerEvent||Qa),Mr="ontouchstart"in window||!!window.TouchEvent,Cr=!window.L_NO_TOUCH&&(Mr||Hi),ba=lr&&Je,fo=lr&&nn,ci=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Ar=function(){var u=!1;try{var d=Object.defineProperty({},"passive",{get:function(){u=!0}});window.addEventListener("testPassiveEventSupport",c,d),window.removeEventListener("testPassiveEventSupport",c,d)}catch{}return u}(),wa=function(){return!!document.createElement("canvas").getContext}(),$i=!!(document.createElementNS&&Se("svg").createSVGRect),ho=!!$i&&function(){var u=document.createElement("div");return u.innerHTML="<svg/>",(u.firstChild&&u.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),po=!$i&&function(){try{var u=document.createElement("div");u.innerHTML='<v:shape adj="1"/>';var d=u.firstChild;return d.style.behavior="url(#default#VML)",d&&typeof d.adj=="object"}catch{return!1}}(),xa=navigator.platform.indexOf("Mac")===0,nt=navigator.platform.indexOf("Linux")===0;function Ur(u){return navigator.userAgent.toLowerCase().indexOf(u)>=0}var kt={ie:ue,ielt9:ye,edge:Ve,webkit:et,android:Re,android23:Qe,androidStock:rt,opera:Je,chrome:qt,gecko:nn,safari:Er,phantom:zi,opera12:Lr,win:bi,ie3d:dn,webkit3d:Kn,gecko3d:kr,any3d:yr,mobile:lr,mobileWebkit:cr,mobileWebkit3d:_a,msPointer:Qa,pointer:Hi,touch:Cr,touchNative:Mr,mobileOpera:ba,mobileGecko:fo,retina:ci,passiveEvents:Ar,canvas:wa,svg:$i,vml:po,inlineSvg:ho,mac:xa,linux:nt},fs=kt.msPointer?"MSPointerDown":"pointerdown",ji=kt.msPointer?"MSPointerMove":"pointermove",ia=kt.msPointer?"MSPointerUp":"pointerup",aa=kt.msPointer?"MSPointerCancel":"pointercancel",qn={touchstart:fs,touchmove:ji,touchend:ia,touchcancel:aa},Zn={touchstart:pn,touchmove:Dt,touchend:Dt,touchcancel:Dt},Xn={},Fn=!1;function ti(u,d,x){return d==="touchstart"&&Ma(),Zn[d]?(x=Zn[d].bind(this,x),u.addEventListener(qn[d],x,!1),x):(console.warn("wrong event specified:",d),c)}function sa(u,d,x){if(!qn[d]){console.warn("wrong event specified:",d);return}u.removeEventListener(qn[d],x,!1)}function Ir(u){Xn[u.pointerId]=u}function fi(u){Xn[u.pointerId]&&(Xn[u.pointerId]=u)}function jr(u){delete Xn[u.pointerId]}function Ma(){Fn||(document.addEventListener(fs,Ir,!0),document.addEventListener(ji,fi,!0),document.addEventListener(ia,jr,!0),document.addEventListener(aa,jr,!0),Fn=!0)}function Dt(u,d){if(d.pointerType!==(d.MSPOINTER_TYPE_MOUSE||"mouse")){d.touches=[];for(var x in Xn)d.touches.push(Xn[x]);d.changedTouches=[d],u(d)}}function pn(u,d){d.MSPOINTER_TYPE_TOUCH&&d.pointerType===d.MSPOINTER_TYPE_TOUCH&&Nr(d),Dt(u,d)}function _n(u){var d={},x,D;for(D in u)x=u[D],d[D]=x&&x.bind?x.bind(u):x;return u=d,d.type="dblclick",d.detail=2,d.isTrusted=!1,d._simulated=!0,d}var Cn=200;function hs(u,d){u.addEventListener("dblclick",d);var x=0,D;function F(te){if(te.detail!==1){D=te.detail;return}if(!(te.pointerType==="mouse"||te.sourceCapabilities&&!te.sourceCapabilities.firesTouchEvents)){var _e=ys(te);if(!(_e.some(function(He){return He instanceof HTMLLabelElement&&He.attributes.for})&&!_e.some(function(He){return He instanceof HTMLInputElement||He instanceof HTMLSelectElement}))){var qe=Date.now();qe-x<=Cn?(D++,D===2&&d(_n(te))):D=1,x=qe}}}return u.addEventListener("click",F),{dblclick:d,simDblclick:F}}function Ua(u,d){u.removeEventListener("dblclick",d.dblclick),u.removeEventListener("click",d.simDblclick)}var Ea=go(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),wi=go(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Ki=wi==="webkitTransition"||wi==="OTransition"?wi+"End":"transitionend";function fr(u){return typeof u=="string"?document.getElementById(u):u}function qr(u,d){var x=u.style[d]||u.currentStyle&&u.currentStyle[d];if((!x||x==="auto")&&document.defaultView){var D=document.defaultView.getComputedStyle(u,null);x=D?D[d]:null}return x==="auto"?null:x}function ke(u,d,x){var D=document.createElement(u);return D.className=d||"",x&&x.appendChild(D),D}function Ze(u){var d=u.parentNode;d&&d.removeChild(u)}function ht(u){for(;u.firstChild;)u.removeChild(u.firstChild)}function St(u){var d=u.parentNode;d&&d.lastChild!==u&&d.appendChild(u)}function ar(u){var d=u.parentNode;d&&d.firstChild!==u&&d.insertBefore(u,d.firstChild)}function Yn(u,d){if(u.classList!==void 0)return u.classList.contains(d);var x=ni(u);return x.length>0&&new RegExp("(^|\\s)"+d+"(\\s|$)").test(x)}function Gt(u,d){if(u.classList!==void 0)for(var x=E(d),D=0,F=x.length;D<F;D++)u.classList.add(x[D]);else if(!Yn(u,d)){var te=ni(u);Ws(u,(te?te+" ":"")+d)}}function Jn(u,d){u.classList!==void 0?u.classList.remove(d):Ws(u,p((" "+ni(u)+" ").replace(" "+d+" "," ")))}function Ws(u,d){u.className.baseVal===void 0?u.className=d:u.className.baseVal=d}function ni(u){return u.correspondingElement&&(u=u.correspondingElement),u.className.baseVal===void 0?u.className:u.className.baseVal}function Kr(u,d){"opacity"in u.style?u.style.opacity=d:"filter"in u.style&&ds(u,d)}function ds(u,d){var x=!1,D="DXImageTransform.Microsoft.Alpha";try{x=u.filters.item(D)}catch{if(d===1)return}d=Math.round(d*100),x?(x.Enabled=d!==100,x.Opacity=d):u.style.filter+=" progid:"+D+"(opacity="+d+")"}function go(u){for(var d=document.documentElement.style,x=0;x<u.length;x++)if(u[x]in d)return u[x];return!1}function Ja(u,d,x){var D=d||new oe(0,0);u.style[Ea]=(kt.ie3d?"translate("+D.x+"px,"+D.y+"px)":"translate3d("+D.x+"px,"+D.y+"px,0)")+(x?" scale("+x+")":"")}function fn(u,d){u._leaflet_pos=d,kt.any3d?Ja(u,d):(u.style.left=d.x+"px",u.style.top=d.y+"px")}function hi(u){return u._leaflet_pos||new oe(0,0)}var Wi,Gs,mo;if("onselectstart"in document)Wi=function(){Xt(window,"selectstart",Nr)},Gs=function(){Vn(window,"selectstart",Nr)};else{var Oi=go(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Wi=function(){if(Oi){var u=document.documentElement.style;mo=u[Oi],u[Oi]="none"}},Gs=function(){Oi&&(document.documentElement.style[Oi]=mo,mo=void 0)}}function xi(){Xt(window,"dragstart",Nr)}function ps(){Vn(window,"dragstart",Nr)}var gs,es;function Zs(u){for(;u.tabIndex===-1;)u=u.parentNode;u.style&&(ms(),gs=u,es=u.style.outlineStyle,u.style.outlineStyle="none",Xt(window,"keydown",ms))}function ms(){gs&&(gs.style.outlineStyle=es,gs=void 0,es=void 0,Vn(window,"keydown",ms))}function Qo(u){do u=u.parentNode;while((!u.offsetWidth||!u.offsetHeight)&&u!==document.body);return u}function vs(u){var d=u.getBoundingClientRect();return{x:d.width/u.offsetWidth||1,y:d.height/u.offsetHeight||1,boundingClientRect:d}}var $l={__proto__:null,TRANSFORM:Ea,TRANSITION:wi,TRANSITION_END:Ki,get:fr,getStyle:qr,create:ke,remove:Ze,empty:ht,toFront:St,toBack:ar,hasClass:Yn,addClass:Gt,removeClass:Jn,setClass:Ws,getClass:ni,setOpacity:Kr,testProp:go,setTransform:Ja,setPosition:fn,getPosition:hi,get disableTextSelection(){return Wi},get enableTextSelection(){return Gs},disableImageDrag:xi,enableImageDrag:ps,preventOutline:Zs,restoreOutline:ms,getSizedParentNode:Qo,getScale:vs};function Xt(u,d,x,D){if(d&&typeof d=="object")for(var F in d)eu(u,F,d[F],x);else{d=E(d);for(var te=0,_e=d.length;te<_e;te++)eu(u,d[te],x,D)}return this}var oa="_leaflet_events";function Vn(u,d,x,D){if(arguments.length===1)vo(u),delete u[oa];else if(d&&typeof d=="object")for(var F in d)yo(u,F,d[F],x);else if(d=E(d),arguments.length===2)vo(u,function(qe){return S(d,qe)!==-1});else for(var te=0,_e=d.length;te<_e;te++)yo(u,d[te],x,D);return this}function vo(u,d){for(var x in u[oa]){var D=x.split(/\d/)[0];(!d||d(D))&&yo(u,D,null,null,x)}}var Jo={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function eu(u,d,x,D){var F=d+s(x)+(D?"_"+s(D):"");if(u[oa]&&u[oa][F])return this;var te=function(qe){return x.call(D||u,qe||window.event)},_e=te;!kt.touchNative&&kt.pointer&&d.indexOf("touch")===0?te=ti(u,d,te):kt.touch&&d==="dblclick"?te=hs(u,te):"addEventListener"in u?d==="touchstart"||d==="touchmove"||d==="wheel"||d==="mousewheel"?u.addEventListener(Jo[d]||d,te,kt.passiveEvents?{passive:!1}:!1):d==="mouseenter"||d==="mouseleave"?(te=function(qe){qe=qe||window.event,qa(u,qe)&&_e(qe)},u.addEventListener(Jo[d],te,!1)):u.addEventListener(d,_e,!1):u.attachEvent("on"+d,te),u[oa]=u[oa]||{},u[oa][F]=te}function yo(u,d,x,D,F){F=F||d+s(x)+(D?"_"+s(D):"");var te=u[oa]&&u[oa][F];if(!te)return this;!kt.touchNative&&kt.pointer&&d.indexOf("touch")===0?sa(u,d,te):kt.touch&&d==="dblclick"?Ua(u,te):"removeEventListener"in u?u.removeEventListener(Jo[d]||d,te,!1):u.detachEvent("on"+d,te),u[oa][F]=null}function Ca(u){return u.stopPropagation?u.stopPropagation():u.originalEvent?u.originalEvent._stopped=!0:u.cancelBubble=!0,this}function _o(u){return eu(u,"wheel",Ca),this}function ts(u){return Xt(u,"mousedown touchstart dblclick contextmenu",Ca),u._leaflet_disable_click=!0,this}function Nr(u){return u.preventDefault?u.preventDefault():u.returnValue=!1,this}function Sa(u){return Nr(u),Ca(u),this}function ys(u){if(u.composedPath)return u.composedPath();for(var d=[],x=u.target;x;)d.push(x),x=x.parentNode;return d}function tu(u,d){if(!d)return new oe(u.clientX,u.clientY);var x=vs(d),D=x.boundingClientRect;return new oe((u.clientX-D.left)/x.x-d.clientLeft,(u.clientY-D.top)/x.y-d.clientTop)}var nu=kt.linux&&kt.chrome?window.devicePixelRatio:kt.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function ru(u){return kt.edge?u.wheelDeltaY/2:u.deltaY&&u.deltaMode===0?-u.deltaY/nu:u.deltaY&&u.deltaMode===1?-u.deltaY*20:u.deltaY&&u.deltaMode===2?-u.deltaY*60:u.deltaX||u.deltaZ?0:u.wheelDelta?(u.wheelDeltaY||u.wheelDelta)/2:u.detail&&Math.abs(u.detail)<32765?-u.detail*20:u.detail?u.detail/-32765*60:0}function qa(u,d){var x=d.relatedTarget;if(!x)return!0;try{for(;x&&x!==u;)x=x.parentNode}catch{return!1}return x!==u}var bo={__proto__:null,on:Xt,off:Vn,stopPropagation:Ca,disableScrollPropagation:_o,disableClickPropagation:ts,preventDefault:Nr,stop:Sa,getPropagationPath:ys,getMousePosition:tu,getWheelDelta:ru,isExternalTarget:qa,addListener:Xt,removeListener:Vn},wo=ie.extend({run:function(u,d,x,D){this.stop(),this._el=u,this._inProgress=!0,this._duration=x||.25,this._easeOutPower=1/Math.max(D||.5,.2),this._startPos=hi(u),this._offset=d.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=ce(this._animate,this),this._step()},_step:function(u){var d=+new Date-this._startTime,x=this._duration*1e3;d<x?this._runFrame(this._easeOut(d/x),u):(this._runFrame(1),this._complete())},_runFrame:function(u,d){var x=this._startPos.add(this._offset.multiplyBy(u));d&&x._round(),fn(this._el,x),this.fire("step")},_complete:function(){q(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(u){return 1-Math.pow(1-u,this._easeOutPower)}}),vn=ie.extend({options:{crs:ft,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(u,d){d=b(this,d),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(u),this._initLayout(),this._onResize=i(this._onResize,this),this._initEvents(),d.maxBounds&&this.setMaxBounds(d.maxBounds),d.zoom!==void 0&&(this._zoom=this._limitZoom(d.zoom)),d.center&&d.zoom!==void 0&&this.setView(Ae(d.center),d.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=wi&&kt.any3d&&!kt.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Xt(this._proxy,Ki,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(u,d,x){if(d=d===void 0?this._zoom:this._limitZoom(d),u=this._limitCenter(Ae(u),d,this.options.maxBounds),x=x||{},this._stop(),this._loaded&&!x.reset&&x!==!0){x.animate!==void 0&&(x.zoom=n({animate:x.animate},x.zoom),x.pan=n({animate:x.animate,duration:x.duration},x.pan));var D=this._zoom!==d?this._tryAnimatedZoom&&this._tryAnimatedZoom(u,d,x.zoom):this._tryAnimatedPan(u,x.pan);if(D)return clearTimeout(this._sizeTimer),this}return this._resetView(u,d,x.pan&&x.pan.noMoveStart),this},setZoom:function(u,d){return this._loaded?this.setView(this.getCenter(),u,{zoom:d}):(this._zoom=u,this)},zoomIn:function(u,d){return u=u||(kt.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+u,d)},zoomOut:function(u,d){return u=u||(kt.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-u,d)},setZoomAround:function(u,d,x){var D=this.getZoomScale(d),F=this.getSize().divideBy(2),te=u instanceof oe?u:this.latLngToContainerPoint(u),_e=te.subtract(F).multiplyBy(1-1/D),qe=this.containerPointToLatLng(F.add(_e));return this.setView(qe,d,{zoom:x})},_getBoundsCenterZoom:function(u,d){d=d||{},u=u.getBounds?u.getBounds():pe(u);var x=j(d.paddingTopLeft||d.padding||[0,0]),D=j(d.paddingBottomRight||d.padding||[0,0]),F=this.getBoundsZoom(u,!1,x.add(D));if(F=typeof d.maxZoom=="number"?Math.min(d.maxZoom,F):F,F===1/0)return{center:u.getCenter(),zoom:F};var te=D.subtract(x).divideBy(2),_e=this.project(u.getSouthWest(),F),qe=this.project(u.getNorthEast(),F),He=this.unproject(_e.add(qe).divideBy(2).add(te),F);return{center:He,zoom:F}},fitBounds:function(u,d){if(u=pe(u),!u.isValid())throw new Error("Bounds are not valid.");var x=this._getBoundsCenterZoom(u,d);return this.setView(x.center,x.zoom,d)},fitWorld:function(u){return this.fitBounds([[-90,-180],[90,180]],u)},panTo:function(u,d){return this.setView(u,this._zoom,{pan:d})},panBy:function(u,d){if(u=j(u).round(),d=d||{},!u.x&&!u.y)return this.fire("moveend");if(d.animate!==!0&&!this.getSize().contains(u))return this._resetView(this.unproject(this.project(this.getCenter()).add(u)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new wo,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),d.noMoveStart||this.fire("movestart"),d.animate!==!1){Gt(this._mapPane,"leaflet-pan-anim");var x=this._getMapPanePos().subtract(u).round();this._panAnim.run(this._mapPane,x,d.duration||.25,d.easeLinearity)}else this._rawPanBy(u),this.fire("move").fire("moveend");return this},flyTo:function(u,d,x){if(x=x||{},x.animate===!1||!kt.any3d)return this.setView(u,d,x);this._stop();var D=this.project(this.getCenter()),F=this.project(u),te=this.getSize(),_e=this._zoom;u=Ae(u),d=d===void 0?_e:d;var qe=Math.max(te.x,te.y),He=qe*this.getZoomScale(_e,d),st=F.distanceTo(D)||1,Tt=1.42,Zt=Tt*Tt;function yn(Gr){var cf=Gr?-1:1,GT=Gr?He:qe,ZT=He*He-qe*qe+cf*Zt*Zt*st*st,XT=2*GT*Zt*st,fd=ZT/XT,e0=Math.sqrt(fd*fd+1)-fd,YT=e0<1e-9?-18:Math.log(e0);return YT}function Xi(Gr){return(Math.exp(Gr)-Math.exp(-Gr))/2}function pi(Gr){return(Math.exp(Gr)+Math.exp(-Gr))/2}function Va(Gr){return Xi(Gr)/pi(Gr)}var da=yn(0);function $u(Gr){return qe*(pi(da)/pi(da+Tt*Gr))}function $T(Gr){return qe*(pi(da)*Va(da+Tt*Gr)-Xi(da))/Zt}function jT(Gr){return 1-Math.pow(1-Gr,1.5)}var KT=Date.now(),Qv=(yn(1)-da)/Tt,WT=x.duration?1e3*x.duration:1e3*Qv*.8;function Jv(){var Gr=(Date.now()-KT)/WT,cf=jT(Gr)*Qv;Gr<=1?(this._flyToFrame=ce(Jv,this),this._move(this.unproject(D.add(F.subtract(D).multiplyBy($T(cf)/st)),_e),this.getScaleZoom(qe/$u(cf),_e),{flyTo:!0})):this._move(u,d)._moveEnd(!0)}return this._moveStart(!0,x.noMoveStart),Jv.call(this),this},flyToBounds:function(u,d){var x=this._getBoundsCenterZoom(u,d);return this.flyTo(x.center,x.zoom,d)},setMaxBounds:function(u){return u=pe(u),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),u.isValid()?(this.options.maxBounds=u,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(u){var d=this.options.minZoom;return this.options.minZoom=u,this._loaded&&d!==u&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(u):this},setMaxZoom:function(u){var d=this.options.maxZoom;return this.options.maxZoom=u,this._loaded&&d!==u&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(u):this},panInsideBounds:function(u,d){this._enforcingBounds=!0;var x=this.getCenter(),D=this._limitCenter(x,this._zoom,pe(u));return x.equals(D)||this.panTo(D,d),this._enforcingBounds=!1,this},panInside:function(u,d){d=d||{};var x=j(d.paddingTopLeft||d.padding||[0,0]),D=j(d.paddingBottomRight||d.padding||[0,0]),F=this.project(this.getCenter()),te=this.project(u),_e=this.getPixelBounds(),qe=G([_e.min.add(x),_e.max.subtract(D)]),He=qe.getSize();if(!qe.contains(te)){this._enforcingBounds=!0;var st=te.subtract(qe.getCenter()),Tt=qe.extend(te).getSize().subtract(He);F.x+=st.x<0?-Tt.x:Tt.x,F.y+=st.y<0?-Tt.y:Tt.y,this.panTo(this.unproject(F),d),this._enforcingBounds=!1}return this},invalidateSize:function(u){if(!this._loaded)return this;u=n({animate:!1,pan:!0},u===!0?{animate:!0}:u);var d=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var x=this.getSize(),D=d.divideBy(2).round(),F=x.divideBy(2).round(),te=D.subtract(F);return!te.x&&!te.y?this:(u.animate&&u.pan?this.panBy(te):(u.pan&&this._rawPanBy(te),this.fire("move"),u.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(i(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:d,newSize:x}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(u){if(u=this._locateOptions=n({timeout:1e4,watch:!1},u),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var d=i(this._handleGeolocationResponse,this),x=i(this._handleGeolocationError,this);return u.watch?this._locationWatchId=navigator.geolocation.watchPosition(d,x,u):navigator.geolocation.getCurrentPosition(d,x,u),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(u){if(this._container._leaflet_id){var d=u.code,x=u.message||(d===1?"permission denied":d===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:d,message:"Geolocation error: "+x+"."})}},_handleGeolocationResponse:function(u){if(this._container._leaflet_id){var d=u.coords.latitude,x=u.coords.longitude,D=new de(d,x),F=D.toBounds(u.coords.accuracy*2),te=this._locateOptions;if(te.setView){var _e=this.getBoundsZoom(F);this.setView(D,te.maxZoom?Math.min(_e,te.maxZoom):_e)}var qe={latlng:D,bounds:F,timestamp:u.timestamp};for(var He in u.coords)typeof u.coords[He]=="number"&&(qe[He]=u.coords[He]);this.fire("locationfound",qe)}},addHandler:function(u,d){if(!d)return this;var x=this[u]=new d(this);return this._handlers.push(x),this.options[u]&&x.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Ze(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(q(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var u;for(u in this._layers)this._layers[u].remove();for(u in this._panes)Ze(this._panes[u]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(u,d){var x="leaflet-pane"+(u?" leaflet-"+u.replace("Pane","")+"-pane":""),D=ke("div",x,d||this._mapPane);return u&&(this._panes[u]=D),D},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var u=this.getPixelBounds(),d=this.unproject(u.getBottomLeft()),x=this.unproject(u.getTopRight());return new fe(d,x)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(u,d,x){u=pe(u),x=j(x||[0,0]);var D=this.getZoom()||0,F=this.getMinZoom(),te=this.getMaxZoom(),_e=u.getNorthWest(),qe=u.getSouthEast(),He=this.getSize().subtract(x),st=G(this.project(qe,D),this.project(_e,D)).getSize(),Tt=kt.any3d?this.options.zoomSnap:1,Zt=He.x/st.x,yn=He.y/st.y,Xi=d?Math.max(Zt,yn):Math.min(Zt,yn);return D=this.getScaleZoom(Xi,D),Tt&&(D=Math.round(D/(Tt/100))*(Tt/100),D=d?Math.ceil(D/Tt)*Tt:Math.floor(D/Tt)*Tt),Math.max(F,Math.min(te,D))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new oe(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(u,d){var x=this._getTopLeftPoint(u,d);return new H(x,x.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(u){return this.options.crs.getProjectedBounds(u===void 0?this.getZoom():u)},getPane:function(u){return typeof u=="string"?this._panes[u]:u},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(u,d){var x=this.options.crs;return d=d===void 0?this._zoom:d,x.scale(u)/x.scale(d)},getScaleZoom:function(u,d){var x=this.options.crs;d=d===void 0?this._zoom:d;var D=x.zoom(u*x.scale(d));return isNaN(D)?1/0:D},project:function(u,d){return d=d===void 0?this._zoom:d,this.options.crs.latLngToPoint(Ae(u),d)},unproject:function(u,d){return d=d===void 0?this._zoom:d,this.options.crs.pointToLatLng(j(u),d)},layerPointToLatLng:function(u){var d=j(u).add(this.getPixelOrigin());return this.unproject(d)},latLngToLayerPoint:function(u){var d=this.project(Ae(u))._round();return d._subtract(this.getPixelOrigin())},wrapLatLng:function(u){return this.options.crs.wrapLatLng(Ae(u))},wrapLatLngBounds:function(u){return this.options.crs.wrapLatLngBounds(pe(u))},distance:function(u,d){return this.options.crs.distance(Ae(u),Ae(d))},containerPointToLayerPoint:function(u){return j(u).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(u){return j(u).add(this._getMapPanePos())},containerPointToLatLng:function(u){var d=this.containerPointToLayerPoint(j(u));return this.layerPointToLatLng(d)},latLngToContainerPoint:function(u){return this.layerPointToContainerPoint(this.latLngToLayerPoint(Ae(u)))},mouseEventToContainerPoint:function(u){return tu(u,this._container)},mouseEventToLayerPoint:function(u){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(u))},mouseEventToLatLng:function(u){return this.layerPointToLatLng(this.mouseEventToLayerPoint(u))},_initContainer:function(u){var d=this._container=fr(u);if(d){if(d._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");Xt(d,"scroll",this._onScroll,this),this._containerId=s(d)},_initLayout:function(){var u=this._container;this._fadeAnimated=this.options.fadeAnimation&&kt.any3d,Gt(u,"leaflet-container"+(kt.touch?" leaflet-touch":"")+(kt.retina?" leaflet-retina":"")+(kt.ielt9?" leaflet-oldie":"")+(kt.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var d=qr(u,"position");d!=="absolute"&&d!=="relative"&&d!=="fixed"&&d!=="sticky"&&(u.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var u=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),fn(this._mapPane,new oe(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Gt(u.markerPane,"leaflet-zoom-hide"),Gt(u.shadowPane,"leaflet-zoom-hide"))},_resetView:function(u,d,x){fn(this._mapPane,new oe(0,0));var D=!this._loaded;this._loaded=!0,d=this._limitZoom(d),this.fire("viewprereset");var F=this._zoom!==d;this._moveStart(F,x)._move(u,d)._moveEnd(F),this.fire("viewreset"),D&&this.fire("load")},_moveStart:function(u,d){return u&&this.fire("zoomstart"),d||this.fire("movestart"),this},_move:function(u,d,x,D){d===void 0&&(d=this._zoom);var F=this._zoom!==d;return this._zoom=d,this._lastCenter=u,this._pixelOrigin=this._getNewPixelOrigin(u),D?x&&x.pinch&&this.fire("zoom",x):((F||x&&x.pinch)&&this.fire("zoom",x),this.fire("move",x)),this},_moveEnd:function(u){return u&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return q(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(u){fn(this._mapPane,this._getMapPanePos().subtract(u))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(u){this._targets={},this._targets[s(this._container)]=this;var d=u?Vn:Xt;d(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&d(window,"resize",this._onResize,this),kt.any3d&&this.options.transform3DLimit&&(u?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){q(this._resizeRequest),this._resizeRequest=ce(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var u=this._getMapPanePos();Math.max(Math.abs(u.x),Math.abs(u.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(u,d){for(var x=[],D,F=d==="mouseout"||d==="mouseover",te=u.target||u.srcElement,_e=!1;te;){if(D=this._targets[s(te)],D&&(d==="click"||d==="preclick")&&this._draggableMoved(D)){_e=!0;break}if(D&&D.listens(d,!0)&&(F&&!qa(te,u)||(x.push(D),F))||te===this._container)break;te=te.parentNode}return!x.length&&!_e&&!F&&this.listens(d,!0)&&(x=[this]),x},_isClickDisabled:function(u){for(;u&&u!==this._container;){if(u._leaflet_disable_click)return!0;u=u.parentNode}},_handleDOMEvent:function(u){var d=u.target||u.srcElement;if(!(!this._loaded||d._leaflet_disable_events||u.type==="click"&&this._isClickDisabled(d))){var x=u.type;x==="mousedown"&&Zs(d),this._fireDOMEvent(u,x)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(u,d,x){if(u.type==="click"){var D=n({},u);D.type="preclick",this._fireDOMEvent(D,D.type,x)}var F=this._findEventTargets(u,d);if(x){for(var te=[],_e=0;_e<x.length;_e++)x[_e].listens(d,!0)&&te.push(x[_e]);F=te.concat(F)}if(F.length){d==="contextmenu"&&Nr(u);var qe=F[0],He={originalEvent:u};if(u.type!=="keypress"&&u.type!=="keydown"&&u.type!=="keyup"){var st=qe.getLatLng&&(!qe._radius||qe._radius<=10);He.containerPoint=st?this.latLngToContainerPoint(qe.getLatLng()):this.mouseEventToContainerPoint(u),He.layerPoint=this.containerPointToLayerPoint(He.containerPoint),He.latlng=st?qe.getLatLng():this.layerPointToLatLng(He.layerPoint)}for(_e=0;_e<F.length;_e++)if(F[_e].fire(d,He,!0),He.originalEvent._stopped||F[_e].options.bubblingMouseEvents===!1&&S(this._mouseEvents,d)!==-1)return}},_draggableMoved:function(u){return u=u.dragging&&u.dragging.enabled()?u:this,u.dragging&&u.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var u=0,d=this._handlers.length;u<d;u++)this._handlers[u].disable()},whenReady:function(u,d){return this._loaded?u.call(d||this,{target:this}):this.on("load",u,d),this},_getMapPanePos:function(){return hi(this._mapPane)||new oe(0,0)},_moved:function(){var u=this._getMapPanePos();return u&&!u.equals([0,0])},_getTopLeftPoint:function(u,d){var x=u&&d!==void 0?this._getNewPixelOrigin(u,d):this.getPixelOrigin();return x.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(u,d){var x=this.getSize()._divideBy(2);return this.project(u,d)._subtract(x)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(u,d,x){var D=this._getNewPixelOrigin(x,d);return this.project(u,d)._subtract(D)},_latLngBoundsToNewLayerBounds:function(u,d,x){var D=this._getNewPixelOrigin(x,d);return G([this.project(u.getSouthWest(),d)._subtract(D),this.project(u.getNorthWest(),d)._subtract(D),this.project(u.getSouthEast(),d)._subtract(D),this.project(u.getNorthEast(),d)._subtract(D)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(u){return this.latLngToLayerPoint(u).subtract(this._getCenterLayerPoint())},_limitCenter:function(u,d,x){if(!x)return u;var D=this.project(u,d),F=this.getSize().divideBy(2),te=new H(D.subtract(F),D.add(F)),_e=this._getBoundsOffset(te,x,d);return Math.abs(_e.x)<=1&&Math.abs(_e.y)<=1?u:this.unproject(D.add(_e),d)},_limitOffset:function(u,d){if(!d)return u;var x=this.getPixelBounds(),D=new H(x.min.add(u),x.max.add(u));return u.add(this._getBoundsOffset(D,d))},_getBoundsOffset:function(u,d,x){var D=G(this.project(d.getNorthEast(),x),this.project(d.getSouthWest(),x)),F=D.min.subtract(u.min),te=D.max.subtract(u.max),_e=this._rebound(F.x,-te.x),qe=this._rebound(F.y,-te.y);return new oe(_e,qe)},_rebound:function(u,d){return u+d>0?Math.round(u-d)/2:Math.max(0,Math.ceil(u))-Math.max(0,Math.floor(d))},_limitZoom:function(u){var d=this.getMinZoom(),x=this.getMaxZoom(),D=kt.any3d?this.options.zoomSnap:1;return D&&(u=Math.round(u/D)*D),Math.max(d,Math.min(x,u))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Jn(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(u,d){var x=this._getCenterOffset(u)._trunc();return(d&&d.animate)!==!0&&!this.getSize().contains(x)?!1:(this.panBy(x,d),!0)},_createAnimProxy:function(){var u=this._proxy=ke("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(u),this.on("zoomanim",function(d){var x=Ea,D=this._proxy.style[x];Ja(this._proxy,this.project(d.center,d.zoom),this.getZoomScale(d.zoom,1)),D===this._proxy.style[x]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Ze(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var u=this.getCenter(),d=this.getZoom();Ja(this._proxy,this.project(u,d),this.getZoomScale(d,1))},_catchTransitionEnd:function(u){this._animatingZoom&&u.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(u,d,x){if(this._animatingZoom)return!0;if(x=x||{},!this._zoomAnimated||x.animate===!1||this._nothingToAnimate()||Math.abs(d-this._zoom)>this.options.zoomAnimationThreshold)return!1;var D=this.getZoomScale(d),F=this._getCenterOffset(u)._divideBy(1-1/D);return x.animate!==!0&&!this.getSize().contains(F)?!1:(ce(function(){this._moveStart(!0,x.noMoveStart||!1)._animateZoom(u,d,!0)},this),!0)},_animateZoom:function(u,d,x,D){this._mapPane&&(x&&(this._animatingZoom=!0,this._animateToCenter=u,this._animateToZoom=d,Gt(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:u,zoom:d,noUpdate:D}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(i(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Jn(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function jl(u,d){return new vn(u,d)}var ri=O.extend({options:{position:"topright"},initialize:function(u){b(this,u)},getPosition:function(){return this.options.position},setPosition:function(u){var d=this._map;return d&&d.removeControl(this),this.options.position=u,d&&d.addControl(this),this},getContainer:function(){return this._container},addTo:function(u){this.remove(),this._map=u;var d=this._container=this.onAdd(u),x=this.getPosition(),D=u._controlCorners[x];return Gt(d,"leaflet-control"),x.indexOf("bottom")!==-1?D.insertBefore(d,D.firstChild):D.appendChild(d),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Ze(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(u){this._map&&u&&u.screenX>0&&u.screenY>0&&this._map.getContainer().focus()}}),m=function(u){return new ri(u)};vn.include({addControl:function(u){return u.addTo(this),this},removeControl:function(u){return u.remove(),this},_initControlPos:function(){var u=this._controlCorners={},d="leaflet-",x=this._controlContainer=ke("div",d+"control-container",this._container);function D(F,te){var _e=d+F+" "+d+te;u[F+te]=ke("div",_e,x)}D("top","left"),D("top","right"),D("bottom","left"),D("bottom","right")},_clearControlPos:function(){for(var u in this._controlCorners)Ze(this._controlCorners[u]);Ze(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var k=ri.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(u,d,x,D){return x<D?-1:D<x?1:0}},initialize:function(u,d,x){b(this,x),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var D in u)this._addLayer(u[D],D);for(D in d)this._addLayer(d[D],D,!0)},onAdd:function(u){this._initLayout(),this._update(),this._map=u,u.on("zoomend",this._checkDisabledLayers,this);for(var d=0;d<this._layers.length;d++)this._layers[d].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(u){return ri.prototype.addTo.call(this,u),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var u=0;u<this._layers.length;u++)this._layers[u].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(u,d){return this._addLayer(u,d),this._map?this._update():this},addOverlay:function(u,d){return this._addLayer(u,d,!0),this._map?this._update():this},removeLayer:function(u){u.off("add remove",this._onLayerChange,this);var d=this._getLayer(s(u));return d&&this._layers.splice(this._layers.indexOf(d),1),this._map?this._update():this},expand:function(){Gt(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var u=this._map.getSize().y-(this._container.offsetTop+50);return u<this._section.clientHeight?(Gt(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=u+"px"):Jn(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Jn(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var u="leaflet-control-layers",d=this._container=ke("div",u),x=this.options.collapsed;d.setAttribute("aria-haspopup",!0),ts(d),_o(d);var D=this._section=ke("section",u+"-list");x&&(this._map.on("click",this.collapse,this),Xt(d,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var F=this._layersLink=ke("a",u+"-toggle",d);F.href="#",F.title="Layers",F.setAttribute("role","button"),Xt(F,{keydown:function(te){te.keyCode===13&&this._expandSafely()},click:function(te){Nr(te),this._expandSafely()}},this),x||this.expand(),this._baseLayersList=ke("div",u+"-base",D),this._separator=ke("div",u+"-separator",D),this._overlaysList=ke("div",u+"-overlays",D),d.appendChild(D)},_getLayer:function(u){for(var d=0;d<this._layers.length;d++)if(this._layers[d]&&s(this._layers[d].layer)===u)return this._layers[d]},_addLayer:function(u,d,x){this._map&&u.on("add remove",this._onLayerChange,this),this._layers.push({layer:u,name:d,overlay:x}),this.options.sortLayers&&this._layers.sort(i(function(D,F){return this.options.sortFunction(D.layer,F.layer,D.name,F.name)},this)),this.options.autoZIndex&&u.setZIndex&&(this._lastZIndex++,u.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;ht(this._baseLayersList),ht(this._overlaysList),this._layerControlInputs=[];var u,d,x,D,F=0;for(x=0;x<this._layers.length;x++)D=this._layers[x],this._addItem(D),d=d||D.overlay,u=u||!D.overlay,F+=D.overlay?0:1;return this.options.hideSingleBase&&(u=u&&F>1,this._baseLayersList.style.display=u?"":"none"),this._separator.style.display=d&&u?"":"none",this},_onLayerChange:function(u){this._handlingClick||this._update();var d=this._getLayer(s(u.target)),x=d.overlay?u.type==="add"?"overlayadd":"overlayremove":u.type==="add"?"baselayerchange":null;x&&this._map.fire(x,d)},_createRadioElement:function(u,d){var x='<input type="radio" class="leaflet-control-layers-selector" name="'+u+'"'+(d?' checked="checked"':"")+"/>",D=document.createElement("div");return D.innerHTML=x,D.firstChild},_addItem:function(u){var d=document.createElement("label"),x=this._map.hasLayer(u.layer),D;u.overlay?(D=document.createElement("input"),D.type="checkbox",D.className="leaflet-control-layers-selector",D.defaultChecked=x):D=this._createRadioElement("leaflet-base-layers_"+s(this),x),this._layerControlInputs.push(D),D.layerId=s(u.layer),Xt(D,"click",this._onInputClick,this);var F=document.createElement("span");F.innerHTML=" "+u.name;var te=document.createElement("span");d.appendChild(te),te.appendChild(D),te.appendChild(F);var _e=u.overlay?this._overlaysList:this._baseLayersList;return _e.appendChild(d),this._checkDisabledLayers(),d},_onInputClick:function(){if(!this._preventClick){var u=this._layerControlInputs,d,x,D=[],F=[];this._handlingClick=!0;for(var te=u.length-1;te>=0;te--)d=u[te],x=this._getLayer(d.layerId).layer,d.checked?D.push(x):d.checked||F.push(x);for(te=0;te<F.length;te++)this._map.hasLayer(F[te])&&this._map.removeLayer(F[te]);for(te=0;te<D.length;te++)this._map.hasLayer(D[te])||this._map.addLayer(D[te]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var u=this._layerControlInputs,d,x,D=this._map.getZoom(),F=u.length-1;F>=0;F--)d=u[F],x=this._getLayer(d.layerId).layer,d.disabled=x.options.minZoom!==void 0&&D<x.options.minZoom||x.options.maxZoom!==void 0&&D>x.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var u=this._section;this._preventClick=!0,Xt(u,"click",Nr),this.expand();var d=this;setTimeout(function(){Vn(u,"click",Nr),d._preventClick=!1})}}),R=function(u,d,x){return new k(u,d,x)},M=ri.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(u){var d="leaflet-control-zoom",x=ke("div",d+" leaflet-bar"),D=this.options;return this._zoomInButton=this._createButton(D.zoomInText,D.zoomInTitle,d+"-in",x,this._zoomIn),this._zoomOutButton=this._createButton(D.zoomOutText,D.zoomOutTitle,d+"-out",x,this._zoomOut),this._updateDisabled(),u.on("zoomend zoomlevelschange",this._updateDisabled,this),x},onRemove:function(u){u.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(u){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(u.shiftKey?3:1))},_zoomOut:function(u){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(u.shiftKey?3:1))},_createButton:function(u,d,x,D,F){var te=ke("a",x,D);return te.innerHTML=u,te.href="#",te.title=d,te.setAttribute("role","button"),te.setAttribute("aria-label",d),ts(te),Xt(te,"click",Sa),Xt(te,"click",F,this),Xt(te,"click",this._refocusOnMap,this),te},_updateDisabled:function(){var u=this._map,d="leaflet-disabled";Jn(this._zoomInButton,d),Jn(this._zoomOutButton,d),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||u._zoom===u.getMinZoom())&&(Gt(this._zoomOutButton,d),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||u._zoom===u.getMaxZoom())&&(Gt(this._zoomInButton,d),this._zoomInButton.setAttribute("aria-disabled","true"))}});vn.mergeOptions({zoomControl:!0}),vn.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new M,this.addControl(this.zoomControl))});var K=function(u){return new M(u)},f=ri.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(u){var d="leaflet-control-scale",x=ke("div",d),D=this.options;return this._addScales(D,d+"-line",x),u.on(D.updateWhenIdle?"moveend":"move",this._update,this),u.whenReady(this._update,this),x},onRemove:function(u){u.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(u,d,x){u.metric&&(this._mScale=ke("div",d,x)),u.imperial&&(this._iScale=ke("div",d,x))},_update:function(){var u=this._map,d=u.getSize().y/2,x=u.distance(u.containerPointToLatLng([0,d]),u.containerPointToLatLng([this.options.maxWidth,d]));this._updateScales(x)},_updateScales:function(u){this.options.metric&&u&&this._updateMetric(u),this.options.imperial&&u&&this._updateImperial(u)},_updateMetric:function(u){var d=this._getRoundNum(u),x=d<1e3?d+" m":d/1e3+" km";this._updateScale(this._mScale,x,d/u)},_updateImperial:function(u){var d=u*3.2808399,x,D,F;d>5280?(x=d/5280,D=this._getRoundNum(x),this._updateScale(this._iScale,D+" mi",D/x)):(F=this._getRoundNum(d),this._updateScale(this._iScale,F+" ft",F/d))},_updateScale:function(u,d,x){u.style.width=Math.round(this.options.maxWidth*x)+"px",u.innerHTML=d},_getRoundNum:function(u){var d=Math.pow(10,(Math.floor(u)+"").length-1),x=u/d;return x=x>=10?10:x>=5?5:x>=3?3:x>=2?2:1,d*x}}),g=function(u){return new f(u)},T='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',A=ri.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(kt.inlineSvg?T+" ":"")+"Leaflet</a>"},initialize:function(u){b(this,u),this._attributions={}},onAdd:function(u){u.attributionControl=this,this._container=ke("div","leaflet-control-attribution"),ts(this._container);for(var d in u._layers)u._layers[d].getAttribution&&this.addAttribution(u._layers[d].getAttribution());return this._update(),u.on("layeradd",this._addAttribution,this),this._container},onRemove:function(u){u.off("layeradd",this._addAttribution,this)},_addAttribution:function(u){u.layer.getAttribution&&(this.addAttribution(u.layer.getAttribution()),u.layer.once("remove",function(){this.removeAttribution(u.layer.getAttribution())},this))},setPrefix:function(u){return this.options.prefix=u,this._update(),this},addAttribution:function(u){return u?(this._attributions[u]||(this._attributions[u]=0),this._attributions[u]++,this._update(),this):this},removeAttribution:function(u){return u?(this._attributions[u]&&(this._attributions[u]--,this._update()),this):this},_update:function(){if(this._map){var u=[];for(var d in this._attributions)this._attributions[d]&&u.push(d);var x=[];this.options.prefix&&x.push(this.options.prefix),u.length&&x.push(u.join(", ")),this._container.innerHTML=x.join(' <span aria-hidden="true">|</span> ')}}});vn.mergeOptions({attributionControl:!0}),vn.addInitHook(function(){this.options.attributionControl&&new A().addTo(this)});var B=function(u){return new A(u)};ri.Layers=k,ri.Zoom=M,ri.Scale=f,ri.Attribution=A,m.layers=R,m.zoom=K,m.scale=g,m.attribution=B;var U=O.extend({initialize:function(u){this._map=u},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});U.addTo=function(u,d){return u.addHandler(d,this),this};var z={Events:le},Y=kt.touch?"touchstart mousedown":"mousedown",X=ie.extend({options:{clickTolerance:3},initialize:function(u,d,x,D){b(this,D),this._element=u,this._dragStartTarget=d||u,this._preventOutline=x},enable:function(){this._enabled||(Xt(this._dragStartTarget,Y,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(X._dragging===this&&this.finishDrag(!0),Vn(this._dragStartTarget,Y,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(u){if(this._enabled&&(this._moved=!1,!Yn(this._element,"leaflet-zoom-anim"))){if(u.touches&&u.touches.length!==1){X._dragging===this&&this.finishDrag();return}if(!(X._dragging||u.shiftKey||u.which!==1&&u.button!==1&&!u.touches)&&(X._dragging=this,this._preventOutline&&Zs(this._element),xi(),Wi(),!this._moving)){this.fire("down");var d=u.touches?u.touches[0]:u,x=Qo(this._element);this._startPoint=new oe(d.clientX,d.clientY),this._startPos=hi(this._element),this._parentScale=vs(x);var D=u.type==="mousedown";Xt(document,D?"mousemove":"touchmove",this._onMove,this),Xt(document,D?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(u){if(this._enabled){if(u.touches&&u.touches.length>1){this._moved=!0;return}var d=u.touches&&u.touches.length===1?u.touches[0]:u,x=new oe(d.clientX,d.clientY)._subtract(this._startPoint);!x.x&&!x.y||Math.abs(x.x)+Math.abs(x.y)<this.options.clickTolerance||(x.x/=this._parentScale.x,x.y/=this._parentScale.y,Nr(u),this._moved||(this.fire("dragstart"),this._moved=!0,Gt(document.body,"leaflet-dragging"),this._lastTarget=u.target||u.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Gt(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(x),this._moving=!0,this._lastEvent=u,this._updatePosition())}},_updatePosition:function(){var u={originalEvent:this._lastEvent};this.fire("predrag",u),fn(this._element,this._newPos),this.fire("drag",u)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(u){Jn(document.body,"leaflet-dragging"),this._lastTarget&&(Jn(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Vn(document,"mousemove touchmove",this._onMove,this),Vn(document,"mouseup touchend touchcancel",this._onUp,this),ps(),Gs();var d=this._moved&&this._moving;this._moving=!1,X._dragging=!1,d&&this.fire("dragend",{noInertia:u,distance:this._newPos.distanceTo(this._startPos)})}});function me(u,d,x){var D,F=[1,4,2,8],te,_e,qe,He,st,Tt,Zt,yn;for(te=0,Tt=u.length;te<Tt;te++)u[te]._code=Wn(u[te],d);for(qe=0;qe<4;qe++){for(Zt=F[qe],D=[],te=0,Tt=u.length,_e=Tt-1;te<Tt;_e=te++)He=u[te],st=u[_e],He._code&Zt?st._code&Zt||(yn=Qt(st,He,Zt,d,x),yn._code=Wn(yn,d),D.push(yn)):(st._code&Zt&&(yn=Qt(st,He,Zt,d,x),yn._code=Wn(yn,d),D.push(yn)),D.push(He));u=D}return u}function Pe(u,d){var x,D,F,te,_e,qe,He,st,Tt;if(!u||u.length===0)throw new Error("latlngs not passed");Rn(u)||(console.warn("latlngs are not flat! Only the first ring will be used"),u=u[0]);var Zt=Ae([0,0]),yn=pe(u),Xi=yn.getNorthWest().distanceTo(yn.getSouthWest())*yn.getNorthEast().distanceTo(yn.getNorthWest());Xi<1700&&(Zt=De(u));var pi=u.length,Va=[];for(x=0;x<pi;x++){var da=Ae(u[x]);Va.push(d.project(Ae([da.lat-Zt.lat,da.lng-Zt.lng])))}for(qe=He=st=0,x=0,D=pi-1;x<pi;D=x++)F=Va[x],te=Va[D],_e=F.y*te.x-te.y*F.x,He+=(F.x+te.x)*_e,st+=(F.y+te.y)*_e,qe+=_e*3;qe===0?Tt=Va[0]:Tt=[He/qe,st/qe];var $u=d.unproject(j(Tt));return Ae([$u.lat+Zt.lat,$u.lng+Zt.lng])}function De(u){for(var d=0,x=0,D=0,F=0;F<u.length;F++){var te=Ae(u[F]);d+=te.lat,x+=te.lng,D++}return Ae([d/D,x/D])}var Oe={__proto__:null,clipPolygon:me,polygonCenter:Pe,centroid:De};function tt(u,d){if(!d||!u.length)return u.slice();var x=d*d;return u=Ot(u,x),u=pt(u,x),u}function Pt(u,d,x){return Math.sqrt(Tn(u,d,x,!0))}function It(u,d,x){return Tn(u,d,x)}function pt(u,d){var x=u.length,D=typeof Uint8Array!=void 0+""?Uint8Array:Array,F=new D(x);F[0]=F[x-1]=1,Sn(u,F,d,0,x-1);var te,_e=[];for(te=0;te<x;te++)F[te]&&_e.push(u[te]);return _e}function Sn(u,d,x,D,F){var te=0,_e,qe,He;for(qe=D+1;qe<=F-1;qe++)He=Tn(u[qe],u[D],u[F],!0),He>te&&(_e=qe,te=He);te>x&&(d[_e]=1,Sn(u,d,x,D,_e),Sn(u,d,x,_e,F))}function Ot(u,d){for(var x=[u[0]],D=1,F=0,te=u.length;D<te;D++)rn(u[D],u[F])>d&&(x.push(u[D]),F=D);return F<te-1&&x.push(u[te-1]),x}var bn;function ii(u,d,x,D,F){var te=D?bn:Wn(u,x),_e=Wn(d,x),qe,He,st;for(bn=_e;;){if(!(te|_e))return[u,d];if(te&_e)return!1;qe=te||_e,He=Qt(u,d,qe,x,F),st=Wn(He,x),qe===te?(u=He,te=st):(d=He,_e=st)}}function Qt(u,d,x,D,F){var te=d.x-u.x,_e=d.y-u.y,qe=D.min,He=D.max,st,Tt;return x&8?(st=u.x+te*(He.y-u.y)/_e,Tt=He.y):x&4?(st=u.x+te*(qe.y-u.y)/_e,Tt=qe.y):x&2?(st=He.x,Tt=u.y+_e*(He.x-u.x)/te):x&1&&(st=qe.x,Tt=u.y+_e*(qe.x-u.x)/te),new oe(st,Tt,F)}function Wn(u,d){var x=0;return u.x<d.min.x?x|=1:u.x>d.max.x&&(x|=2),u.y<d.min.y?x|=4:u.y>d.max.y&&(x|=8),x}function rn(u,d){var x=d.x-u.x,D=d.y-u.y;return x*x+D*D}function Tn(u,d,x,D){var F=d.x,te=d.y,_e=x.x-F,qe=x.y-te,He=_e*_e+qe*qe,st;return He>0&&(st=((u.x-F)*_e+(u.y-te)*qe)/He,st>1?(F=x.x,te=x.y):st>0&&(F+=_e*st,te+=qe*st)),_e=u.x-F,qe=u.y-te,D?_e*_e+qe*qe:new oe(F,te)}function Rn(u){return!I(u[0])||typeof u[0][0]!="object"&&typeof u[0][0]<"u"}function Gi(u){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Rn(u)}function sr(u,d){var x,D,F,te,_e,qe,He,st;if(!u||u.length===0)throw new Error("latlngs not passed");Rn(u)||(console.warn("latlngs are not flat! Only the first ring will be used"),u=u[0]);var Tt=Ae([0,0]),Zt=pe(u),yn=Zt.getNorthWest().distanceTo(Zt.getSouthWest())*Zt.getNorthEast().distanceTo(Zt.getNorthWest());yn<1700&&(Tt=De(u));var Xi=u.length,pi=[];for(x=0;x<Xi;x++){var Va=Ae(u[x]);pi.push(d.project(Ae([Va.lat-Tt.lat,Va.lng-Tt.lng])))}for(x=0,D=0;x<Xi-1;x++)D+=pi[x].distanceTo(pi[x+1])/2;if(D===0)st=pi[0];else for(x=0,te=0;x<Xi-1;x++)if(_e=pi[x],qe=pi[x+1],F=_e.distanceTo(qe),te+=F,te>D){He=(te-D)/F,st=[qe.x-He*(qe.x-_e.x),qe.y-He*(qe.y-_e.y)];break}var da=d.unproject(j(st));return Ae([da.lat+Tt.lat,da.lng+Tt.lng])}var Bi={__proto__:null,simplify:tt,pointToSegmentDistance:Pt,closestPointOnSegment:It,clipSegment:ii,_getEdgeIntersection:Qt,_getBitCode:Wn,_sqClosestPointOnSegment:Tn,isFlat:Rn,_flat:Gi,polylineCenter:sr},Ei={project:function(u){return new oe(u.lng,u.lat)},unproject:function(u){return new de(u.y,u.x)},bounds:new H([-180,-90],[180,90])},Wr={R:6378137,R_MINOR:6356752314245179e-9,bounds:new H([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(u){var d=Math.PI/180,x=this.R,D=u.lat*d,F=this.R_MINOR/x,te=Math.sqrt(1-F*F),_e=te*Math.sin(D),qe=Math.tan(Math.PI/4-D/2)/Math.pow((1-_e)/(1+_e),te/2);return D=-x*Math.log(Math.max(qe,1e-10)),new oe(u.lng*d*x,D)},unproject:function(u){for(var d=180/Math.PI,x=this.R,D=this.R_MINOR/x,F=Math.sqrt(1-D*D),te=Math.exp(-u.y/x),_e=Math.PI/2-2*Math.atan(te),qe=0,He=.1,st;qe<15&&Math.abs(He)>1e-7;qe++)st=F*Math.sin(_e),st=Math.pow((1-st)/(1+st),F/2),He=Math.PI/2-2*Math.atan(te*st)-_e,_e+=He;return new de(_e*d,u.x*d/x)}},ua={__proto__:null,LonLat:Ei,Mercator:Wr,SphericalMercator:Me},Jt=n({},ve,{code:"EPSG:3395",projection:Wr,transformation:function(){var u=.5/(Math.PI*Wr.R);return at(u,.5,-u,.5)}()}),la=n({},ve,{code:"EPSG:4326",projection:Ei,transformation:at(1/180,1,-1/180,.5)}),ca=n({},Ie,{projection:Ei,transformation:at(1,0,-1,0),scale:function(u){return Math.pow(2,u)},zoom:function(u){return Math.log(u)/Math.LN2},distance:function(u,d){var x=d.lng-u.lng,D=d.lat-u.lat;return Math.sqrt(x*x+D*D)},infinite:!0});Ie.Earth=ve,Ie.EPSG3395=Jt,Ie.EPSG3857=ft,Ie.EPSG900913=V,Ie.EPSG4326=la,Ie.Simple=ca;var hr=ie.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(u){return u.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(u){return u&&u.removeLayer(this),this},getPane:function(u){return this._map.getPane(u?this.options[u]||u:this.options.pane)},addInteractiveTarget:function(u){return this._map._targets[s(u)]=this,this},removeInteractiveTarget:function(u){return delete this._map._targets[s(u)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(u){var d=u.target;if(d.hasLayer(this)){if(this._map=d,this._zoomAnimated=d._zoomAnimated,this.getEvents){var x=this.getEvents();d.on(x,this),this.once("remove",function(){d.off(x,this)},this)}this.onAdd(d),this.fire("add"),d.fire("layeradd",{layer:this})}}});vn.include({addLayer:function(u){if(!u._layerAdd)throw new Error("The provided object is not a Layer.");var d=s(u);return this._layers[d]?this:(this._layers[d]=u,u._mapToAdd=this,u.beforeAdd&&u.beforeAdd(this),this.whenReady(u._layerAdd,u),this)},removeLayer:function(u){var d=s(u);return this._layers[d]?(this._loaded&&u.onRemove(this),delete this._layers[d],this._loaded&&(this.fire("layerremove",{layer:u}),u.fire("remove")),u._map=u._mapToAdd=null,this):this},hasLayer:function(u){return s(u)in this._layers},eachLayer:function(u,d){for(var x in this._layers)u.call(d,this._layers[x]);return this},_addLayers:function(u){u=u?I(u)?u:[u]:[];for(var d=0,x=u.length;d<x;d++)this.addLayer(u[d])},_addZoomLimit:function(u){(!isNaN(u.options.maxZoom)||!isNaN(u.options.minZoom))&&(this._zoomBoundLayers[s(u)]=u,this._updateZoomLevels())},_removeZoomLimit:function(u){var d=s(u);this._zoomBoundLayers[d]&&(delete this._zoomBoundLayers[d],this._updateZoomLevels())},_updateZoomLevels:function(){var u=1/0,d=-1/0,x=this._getZoomSpan();for(var D in this._zoomBoundLayers){var F=this._zoomBoundLayers[D].options;u=F.minZoom===void 0?u:Math.min(u,F.minZoom),d=F.maxZoom===void 0?d:Math.max(d,F.maxZoom)}this._layersMaxZoom=d===-1/0?void 0:d,this._layersMinZoom=u===1/0?void 0:u,x!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var _s=hr.extend({initialize:function(u,d){b(this,d),this._layers={};var x,D;if(u)for(x=0,D=u.length;x<D;x++)this.addLayer(u[x])},addLayer:function(u){var d=this.getLayerId(u);return this._layers[d]=u,this._map&&this._map.addLayer(u),this},removeLayer:function(u){var d=u in this._layers?u:this.getLayerId(u);return this._map&&this._layers[d]&&this._map.removeLayer(this._layers[d]),delete this._layers[d],this},hasLayer:function(u){var d=typeof u=="number"?u:this.getLayerId(u);return d in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(u){var d=Array.prototype.slice.call(arguments,1),x,D;for(x in this._layers)D=this._layers[x],D[u]&&D[u].apply(D,d);return this},onAdd:function(u){this.eachLayer(u.addLayer,u)},onRemove:function(u){this.eachLayer(u.removeLayer,u)},eachLayer:function(u,d){for(var x in this._layers)u.call(d,this._layers[x]);return this},getLayer:function(u){return this._layers[u]},getLayers:function(){var u=[];return this.eachLayer(u.push,u),u},setZIndex:function(u){return this.invoke("setZIndex",u)},getLayerId:function(u){return s(u)}}),xo=function(u,d){return new _s(u,d)},Ta=_s.extend({addLayer:function(u){return this.hasLayer(u)?this:(u.addEventParent(this),_s.prototype.addLayer.call(this,u),this.fire("layeradd",{layer:u}))},removeLayer:function(u){return this.hasLayer(u)?(u in this._layers&&(u=this._layers[u]),u.removeEventParent(this),_s.prototype.removeLayer.call(this,u),this.fire("layerremove",{layer:u})):this},setStyle:function(u){return this.invoke("setStyle",u)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var u=new fe;for(var d in this._layers){var x=this._layers[d];u.extend(x.getBounds?x.getBounds():x.getLatLng())}return u}}),Nn=function(u,d){return new Ta(u,d)},La=O.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(u){b(this,u)},createIcon:function(u){return this._createIcon("icon",u)},createShadow:function(u){return this._createIcon("shadow",u)},_createIcon:function(u,d){var x=this._getIconUrl(u);if(!x){if(u==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var D=this._createImg(x,d&&d.tagName==="IMG"?d:null);return this._setIconStyles(D,u),(this.options.crossOrigin||this.options.crossOrigin==="")&&(D.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),D},_setIconStyles:function(u,d){var x=this.options,D=x[d+"Size"];typeof D=="number"&&(D=[D,D]);var F=j(D),te=j(d==="shadow"&&x.shadowAnchor||x.iconAnchor||F&&F.divideBy(2,!0));u.className="leaflet-marker-"+d+" "+(x.className||""),te&&(u.style.marginLeft=-te.x+"px",u.style.marginTop=-te.y+"px"),F&&(u.style.width=F.x+"px",u.style.height=F.y+"px")},_createImg:function(u,d){return d=d||document.createElement("img"),d.src=u,d},_getIconUrl:function(u){return kt.retina&&this.options[u+"RetinaUrl"]||this.options[u+"Url"]}});function Zi(u){return new La(u)}var fa=La.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(u){return typeof fa.imagePath!="string"&&(fa.imagePath=this._detectIconPath()),(this.options.imagePath||fa.imagePath)+La.prototype._getIconUrl.call(this,u)},_stripUrl:function(u){var d=function(x,D,F){var te=D.exec(x);return te&&te[F]};return u=d(u,/^url\((['"])?(.+)\1\)$/,2),u&&d(u,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var u=ke("div","leaflet-default-icon-path",document.body),d=qr(u,"background-image")||qr(u,"backgroundImage");if(document.body.removeChild(u),d=this._stripUrl(d),d)return d;var x=document.querySelector('link[href$="leaflet.css"]');return x?x.href.substring(0,x.href.length-11-1):""}}),Xs=U.extend({initialize:function(u){this._marker=u},addHooks:function(){var u=this._marker._icon;this._draggable||(this._draggable=new X(u,u,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Gt(u,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Jn(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(u){var d=this._marker,x=d._map,D=this._marker.options.autoPanSpeed,F=this._marker.options.autoPanPadding,te=hi(d._icon),_e=x.getPixelBounds(),qe=x.getPixelOrigin(),He=G(_e.min._subtract(qe).add(F),_e.max._subtract(qe).subtract(F));if(!He.contains(te)){var st=j((Math.max(He.max.x,te.x)-He.max.x)/(_e.max.x-He.max.x)-(Math.min(He.min.x,te.x)-He.min.x)/(_e.min.x-He.min.x),(Math.max(He.max.y,te.y)-He.max.y)/(_e.max.y-He.max.y)-(Math.min(He.min.y,te.y)-He.min.y)/(_e.min.y-He.min.y)).multiplyBy(D);x.panBy(st,{animate:!1}),this._draggable._newPos._add(st),this._draggable._startPos._add(st),fn(d._icon,this._draggable._newPos),this._onDrag(u),this._panRequest=ce(this._adjustPan.bind(this,u))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(u){this._marker.options.autoPan&&(q(this._panRequest),this._panRequest=ce(this._adjustPan.bind(this,u)))},_onDrag:function(u){var d=this._marker,x=d._shadow,D=hi(d._icon),F=d._map.layerPointToLatLng(D);x&&fn(x,D),d._latlng=F,u.latlng=F,u.oldLatLng=this._oldLatLng,d.fire("move",u).fire("drag",u)},_onDragEnd:function(u){q(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",u)}}),Eo=hr.extend({options:{icon:new fa,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(u,d){b(this,d),this._latlng=Ae(u)},onAdd:function(u){this._zoomAnimated=this._zoomAnimated&&u.options.markerZoomAnimation,this._zoomAnimated&&u.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(u){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&u.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(u){var d=this._latlng;return this._latlng=Ae(u),this.update(),this.fire("move",{oldLatLng:d,latlng:this._latlng})},setZIndexOffset:function(u){return this.options.zIndexOffset=u,this.update()},getIcon:function(){return this.options.icon},setIcon:function(u){return this.options.icon=u,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var u=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(u)}return this},_initIcon:function(){var u=this.options,d="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),x=u.icon.createIcon(this._icon),D=!1;x!==this._icon&&(this._icon&&this._removeIcon(),D=!0,u.title&&(x.title=u.title),x.tagName==="IMG"&&(x.alt=u.alt||"")),Gt(x,d),u.keyboard&&(x.tabIndex="0",x.setAttribute("role","button")),this._icon=x,u.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Xt(x,"focus",this._panOnFocus,this);var F=u.icon.createShadow(this._shadow),te=!1;F!==this._shadow&&(this._removeShadow(),te=!0),F&&(Gt(F,d),F.alt=""),this._shadow=F,u.opacity<1&&this._updateOpacity(),D&&this.getPane().appendChild(this._icon),this._initInteraction(),F&&te&&this.getPane(u.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Vn(this._icon,"focus",this._panOnFocus,this),Ze(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Ze(this._shadow),this._shadow=null},_setPos:function(u){this._icon&&fn(this._icon,u),this._shadow&&fn(this._shadow,u),this._zIndex=u.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(u){this._icon&&(this._icon.style.zIndex=this._zIndex+u)},_animateZoom:function(u){var d=this._map._latLngToNewLayerPoint(this._latlng,u.zoom,u.center).round();this._setPos(d)},_initInteraction:function(){if(this.options.interactive&&(Gt(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Xs)){var u=this.options.draggable;this.dragging&&(u=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Xs(this),u&&this.dragging.enable()}},setOpacity:function(u){return this.options.opacity=u,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var u=this.options.opacity;this._icon&&Kr(this._icon,u),this._shadow&&Kr(this._shadow,u)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var u=this._map;if(u){var d=this.options.icon.options,x=d.iconSize?j(d.iconSize):j(0,0),D=d.iconAnchor?j(d.iconAnchor):j(0,0);u.panInside(this._latlng,{paddingTopLeft:D,paddingBottomRight:x.subtract(D)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function zu(u,d){return new Eo(u,d)}var di=hr.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(u){this._renderer=u.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(u){return b(this,u),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&u&&Object.prototype.hasOwnProperty.call(u,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),ha=di.extend({options:{fill:!0,radius:10},initialize:function(u,d){b(this,d),this._latlng=Ae(u),this._radius=this.options.radius},setLatLng:function(u){var d=this._latlng;return this._latlng=Ae(u),this.redraw(),this.fire("move",{oldLatLng:d,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(u){return this.options.radius=this._radius=u,this.redraw()},getRadius:function(){return this._radius},setStyle:function(u){var d=u&&u.radius||this._radius;return di.prototype.setStyle.call(this,u),this.setRadius(d),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var u=this._radius,d=this._radiusY||u,x=this._clickTolerance(),D=[u+x,d+x];this._pxBounds=new H(this._point.subtract(D),this._point.add(D))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(u){return u.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function Fa(u,d){return new ha(u,d)}var bs=ha.extend({initialize:function(u,d,x){if(typeof d=="number"&&(d=n({},x,{radius:d})),b(this,d),this._latlng=Ae(u),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(u){return this._mRadius=u,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var u=[this._radius,this._radiusY||this._radius];return new fe(this._map.layerPointToLatLng(this._point.subtract(u)),this._map.layerPointToLatLng(this._point.add(u)))},setStyle:di.prototype.setStyle,_project:function(){var u=this._latlng.lng,d=this._latlng.lat,x=this._map,D=x.options.crs;if(D.distance===ve.distance){var F=Math.PI/180,te=this._mRadius/ve.R/F,_e=x.project([d+te,u]),qe=x.project([d-te,u]),He=_e.add(qe).divideBy(2),st=x.unproject(He).lat,Tt=Math.acos((Math.cos(te*F)-Math.sin(d*F)*Math.sin(st*F))/(Math.cos(d*F)*Math.cos(st*F)))/F;(isNaN(Tt)||Tt===0)&&(Tt=te/Math.cos(Math.PI/180*d)),this._point=He.subtract(x.getPixelOrigin()),this._radius=isNaN(Tt)?0:He.x-x.project([st,u-Tt]).x,this._radiusY=He.y-_e.y}else{var Zt=D.unproject(D.project(this._latlng).subtract([this._mRadius,0]));this._point=x.latLngToLayerPoint(this._latlng),this._radius=this._point.x-x.latLngToLayerPoint(Zt).x}this._updateBounds()}});function Ci(u,d,x){return new bs(u,d,x)}var _r=di.extend({options:{smoothFactor:1,noClip:!1},initialize:function(u,d){b(this,d),this._setLatLngs(u)},getLatLngs:function(){return this._latlngs},setLatLngs:function(u){return this._setLatLngs(u),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(u){for(var d=1/0,x=null,D=Tn,F,te,_e=0,qe=this._parts.length;_e<qe;_e++)for(var He=this._parts[_e],st=1,Tt=He.length;st<Tt;st++){F=He[st-1],te=He[st];var Zt=D(u,F,te,!0);Zt<d&&(d=Zt,x=D(u,F,te))}return x&&(x.distance=Math.sqrt(d)),x},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return sr(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(u,d){return d=d||this._defaultShape(),u=Ae(u),d.push(u),this._bounds.extend(u),this.redraw()},_setLatLngs:function(u){this._bounds=new fe,this._latlngs=this._convertLatLngs(u)},_defaultShape:function(){return Rn(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(u){for(var d=[],x=Rn(u),D=0,F=u.length;D<F;D++)x?(d[D]=Ae(u[D]),this._bounds.extend(d[D])):d[D]=this._convertLatLngs(u[D]);return d},_project:function(){var u=new H;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,u),this._bounds.isValid()&&u.isValid()&&(this._rawPxBounds=u,this._updateBounds())},_updateBounds:function(){var u=this._clickTolerance(),d=new oe(u,u);this._rawPxBounds&&(this._pxBounds=new H([this._rawPxBounds.min.subtract(d),this._rawPxBounds.max.add(d)]))},_projectLatlngs:function(u,d,x){var D=u[0]instanceof de,F=u.length,te,_e;if(D){for(_e=[],te=0;te<F;te++)_e[te]=this._map.latLngToLayerPoint(u[te]),x.extend(_e[te]);d.push(_e)}else for(te=0;te<F;te++)this._projectLatlngs(u[te],d,x)},_clipPoints:function(){var u=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(u))){if(this.options.noClip){this._parts=this._rings;return}var d=this._parts,x,D,F,te,_e,qe,He;for(x=0,F=0,te=this._rings.length;x<te;x++)for(He=this._rings[x],D=0,_e=He.length;D<_e-1;D++)qe=ii(He[D],He[D+1],u,D,!0),qe&&(d[F]=d[F]||[],d[F].push(qe[0]),(qe[1]!==He[D+1]||D===_e-2)&&(d[F].push(qe[1]),F++))}},_simplifyPoints:function(){for(var u=this._parts,d=this.options.smoothFactor,x=0,D=u.length;x<D;x++)u[x]=tt(u[x],d)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(u,d){var x,D,F,te,_e,qe,He=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(u))return!1;for(x=0,te=this._parts.length;x<te;x++)for(qe=this._parts[x],D=0,_e=qe.length,F=_e-1;D<_e;F=D++)if(!(!d&&D===0)&&Pt(u,qe[F],qe[D])<=He)return!0;return!1}});function Ys(u,d){return new _r(u,d)}_r._flat=Gi;var ka=_r.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Pe(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(u){var d=_r.prototype._convertLatLngs.call(this,u),x=d.length;return x>=2&&d[0]instanceof de&&d[0].equals(d[x-1])&&d.pop(),d},_setLatLngs:function(u){_r.prototype._setLatLngs.call(this,u),Rn(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Rn(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var u=this._renderer._bounds,d=this.options.weight,x=new oe(d,d);if(u=new H(u.min.subtract(x),u.max.add(x)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(u))){if(this.options.noClip){this._parts=this._rings;return}for(var D=0,F=this._rings.length,te;D<F;D++)te=me(this._rings[D],u,!0),te.length&&this._parts.push(te)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(u){var d=!1,x,D,F,te,_e,qe,He,st;if(!this._pxBounds||!this._pxBounds.contains(u))return!1;for(te=0,He=this._parts.length;te<He;te++)for(x=this._parts[te],_e=0,st=x.length,qe=st-1;_e<st;qe=_e++)D=x[_e],F=x[qe],D.y>u.y!=F.y>u.y&&u.x<(F.x-D.x)*(u.y-D.y)/(F.y-D.y)+D.x&&(d=!d);return d||_r.prototype._containsPoint.call(this,u,!0)}});function Hu(u,d){return new ka(u,d)}var Mi=Ta.extend({initialize:function(u,d){b(this,d),this._layers={},u&&this.addData(u)},addData:function(u){var d=I(u)?u:u.features,x,D,F;if(d){for(x=0,D=d.length;x<D;x++)F=d[x],(F.geometries||F.geometry||F.features||F.coordinates)&&this.addData(F);return this}var te=this.options;if(te.filter&&!te.filter(u))return this;var _e=Ln(u,te);return _e?(_e.feature=Ue(u),_e.defaultOptions=_e.options,this.resetStyle(_e),te.onEachFeature&&te.onEachFeature(u,_e),this.addLayer(_e)):this},resetStyle:function(u){return u===void 0?this.eachLayer(this.resetStyle,this):(u.options=n({},u.defaultOptions),this._setLayerStyle(u,this.options.style),this)},setStyle:function(u){return this.eachLayer(function(d){this._setLayerStyle(d,u)},this)},_setLayerStyle:function(u,d){u.setStyle&&(typeof d=="function"&&(d=d(u.feature)),u.setStyle(d))}});function Ln(u,d){var x=u.type==="Feature"?u.geometry:u,D=x?x.coordinates:null,F=[],te=d&&d.pointToLayer,_e=d&&d.coordsToLatLng||Si,qe,He,st,Tt;if(!D&&!x)return null;switch(x.type){case"Point":return qe=_e(D),ns(te,u,qe,d);case"MultiPoint":for(st=0,Tt=D.length;st<Tt;st++)qe=_e(D[st]),F.push(ns(te,u,qe,d));return new Ta(F);case"LineString":case"MultiLineString":return He=Fr(D,x.type==="LineString"?0:1,_e),new _r(He,d);case"Polygon":case"MultiPolygon":return He=Fr(D,x.type==="Polygon"?1:2,_e),new ka(He,d);case"GeometryCollection":for(st=0,Tt=x.geometries.length;st<Tt;st++){var Zt=Ln({geometry:x.geometries[st],type:"Feature",properties:u.properties},d);Zt&&F.push(Zt)}return new Ta(F);case"FeatureCollection":for(st=0,Tt=x.features.length;st<Tt;st++){var yn=Ln(x.features[st],d);yn&&F.push(yn)}return new Ta(F);default:throw new Error("Invalid GeoJSON object.")}}function ns(u,d,x,D){return u?u(d,x):new Eo(x,D&&D.markersInheritOptions&&D)}function Si(u){return new de(u[1],u[0],u[2])}function Fr(u,d,x){for(var D=[],F=0,te=u.length,_e;F<te;F++)_e=d?Fr(u[F],d-1,x):(x||Si)(u[F]),D.push(_e);return D}function ws(u,d){return u=Ae(u),u.alt!==void 0?[h(u.lng,d),h(u.lat,d),h(u.alt,d)]:[h(u.lng,d),h(u.lat,d)]}function he(u,d,x,D){for(var F=[],te=0,_e=u.length;te<_e;te++)F.push(d?he(u[te],Rn(u[te])?0:d-1,x,D):ws(u[te],D));return!d&&x&&F.length>0&&F.push(F[0].slice()),F}function xe(u,d){return u.feature?n({},u.feature,{geometry:d}):Ue(d)}function Ue(u){return u.type==="Feature"||u.type==="FeatureCollection"?u:{type:"Feature",properties:{},geometry:u}}var ze={toGeoJSON:function(u){return xe(this,{type:"Point",coordinates:ws(this.getLatLng(),u)})}};Eo.include(ze),bs.include(ze),ha.include(ze),_r.include({toGeoJSON:function(u){var d=!Rn(this._latlngs),x=he(this._latlngs,d?1:0,!1,u);return xe(this,{type:(d?"Multi":"")+"LineString",coordinates:x})}}),ka.include({toGeoJSON:function(u){var d=!Rn(this._latlngs),x=d&&!Rn(this._latlngs[0]),D=he(this._latlngs,x?2:d?1:0,!0,u);return d||(D=[D]),xe(this,{type:(x?"Multi":"")+"Polygon",coordinates:D})}}),_s.include({toMultiPoint:function(u){var d=[];return this.eachLayer(function(x){d.push(x.toGeoJSON(u).geometry.coordinates)}),xe(this,{type:"MultiPoint",coordinates:d})},toGeoJSON:function(u){var d=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(d==="MultiPoint")return this.toMultiPoint(u);var x=d==="GeometryCollection",D=[];return this.eachLayer(function(F){if(F.toGeoJSON){var te=F.toGeoJSON(u);if(x)D.push(te.geometry);else{var _e=Ue(te);_e.type==="FeatureCollection"?D.push.apply(D,_e.features):D.push(_e)}}}),x?xe(this,{geometries:D,type:"GeometryCollection"}):{type:"FeatureCollection",features:D}}});function We(u,d){return new Mi(u,d)}var dt=We,yt=hr.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(u,d,x){this._url=u,this._bounds=pe(d),b(this,x)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Gt(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Ze(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(u){return this.options.opacity=u,this._image&&this._updateOpacity(),this},setStyle:function(u){return u.opacity&&this.setOpacity(u.opacity),this},bringToFront:function(){return this._map&&St(this._image),this},bringToBack:function(){return this._map&&ar(this._image),this},setUrl:function(u){return this._url=u,this._image&&(this._image.src=u),this},setBounds:function(u){return this._bounds=pe(u),this._map&&this._reset(),this},getEvents:function(){var u={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(u.zoomanim=this._animateZoom),u},setZIndex:function(u){return this.options.zIndex=u,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var u=this._url.tagName==="IMG",d=this._image=u?this._url:ke("img");if(Gt(d,"leaflet-image-layer"),this._zoomAnimated&&Gt(d,"leaflet-zoom-animated"),this.options.className&&Gt(d,this.options.className),d.onselectstart=c,d.onmousemove=c,d.onload=i(this.fire,this,"load"),d.onerror=i(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(d.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),u){this._url=d.src;return}d.src=this._url,d.alt=this.options.alt},_animateZoom:function(u){var d=this._map.getZoomScale(u.zoom),x=this._map._latLngBoundsToNewLayerBounds(this._bounds,u.zoom,u.center).min;Ja(this._image,x,d)},_reset:function(){var u=this._image,d=new H(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),x=d.getSize();fn(u,d.min),u.style.width=x.x+"px",u.style.height=x.y+"px"},_updateOpacity:function(){Kr(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var u=this.options.errorOverlayUrl;u&&this._url!==u&&(this._url=u,this._image.src=u)},getCenter:function(){return this._bounds.getCenter()}}),At=function(u,d,x){return new yt(u,d,x)},_t=yt.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var u=this._url.tagName==="VIDEO",d=this._image=u?this._url:ke("video");if(Gt(d,"leaflet-image-layer"),this._zoomAnimated&&Gt(d,"leaflet-zoom-animated"),this.options.className&&Gt(d,this.options.className),d.onselectstart=c,d.onmousemove=c,d.onloadeddata=i(this.fire,this,"load"),u){for(var x=d.getElementsByTagName("source"),D=[],F=0;F<x.length;F++)D.push(x[F].src);this._url=x.length>0?D:[d.src];return}I(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(d.style,"objectFit")&&(d.style.objectFit="fill"),d.autoplay=!!this.options.autoplay,d.loop=!!this.options.loop,d.muted=!!this.options.muted,d.playsInline=!!this.options.playsInline;for(var te=0;te<this._url.length;te++){var _e=ke("source");_e.src=this._url[te],d.appendChild(_e)}}});function an(u,d,x){return new _t(u,d,x)}var Ft=yt.extend({_initImage:function(){var u=this._image=this._url;Gt(u,"leaflet-image-layer"),this._zoomAnimated&&Gt(u,"leaflet-zoom-animated"),this.options.className&&Gt(u,this.options.className),u.onselectstart=c,u.onmousemove=c}});function $t(u,d,x){return new Ft(u,d,x)}var jt=hr.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(u,d){u&&(u instanceof de||I(u))?(this._latlng=Ae(u),b(this,d)):(b(this,u),this._source=d),this.options.content&&(this._content=this.options.content)},openOn:function(u){return u=arguments.length?u:this._source._map,u.hasLayer(this)||u.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(u){return this._map?this.close():(arguments.length?this._source=u:u=this._source,this._prepareOpen(),this.openOn(u._map)),this},onAdd:function(u){this._zoomAnimated=u._zoomAnimated,this._container||this._initLayout(),u._fadeAnimated&&Kr(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),u._fadeAnimated&&Kr(this._container,1),this.bringToFront(),this.options.interactive&&(Gt(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(u){u._fadeAnimated?(Kr(this._container,0),this._removeTimeout=setTimeout(i(Ze,void 0,this._container),200)):Ze(this._container),this.options.interactive&&(Jn(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(u){return this._latlng=Ae(u),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(u){return this._content=u,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var u={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(u.zoomanim=this._animateZoom),u},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&St(this._container),this},bringToBack:function(){return this._map&&ar(this._container),this},_prepareOpen:function(u){var d=this._source;if(!d._map)return!1;if(d instanceof Ta){d=null;var x=this._source._layers;for(var D in x)if(x[D]._map){d=x[D];break}if(!d)return!1;this._source=d}if(!u)if(d.getCenter)u=d.getCenter();else if(d.getLatLng)u=d.getLatLng();else if(d.getBounds)u=d.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(u),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var u=this._contentNode,d=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof d=="string")u.innerHTML=d;else{for(;u.hasChildNodes();)u.removeChild(u.firstChild);u.appendChild(d)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var u=this._map.latLngToLayerPoint(this._latlng),d=j(this.options.offset),x=this._getAnchor();this._zoomAnimated?fn(this._container,u.add(x)):d=d.add(u).add(x);var D=this._containerBottom=-d.y,F=this._containerLeft=-Math.round(this._containerWidth/2)+d.x;this._container.style.bottom=D+"px",this._container.style.left=F+"px"}},_getAnchor:function(){return[0,0]}});vn.include({_initOverlay:function(u,d,x,D){var F=d;return F instanceof u||(F=new u(D).setContent(d)),x&&F.setLatLng(x),F}}),hr.include({_initOverlay:function(u,d,x,D){var F=x;return F instanceof u?(b(F,D),F._source=this):(F=d&&!D?d:new u(D,this),F.setContent(x)),F}});var Rt=jt.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(u){return u=arguments.length?u:this._source._map,!u.hasLayer(this)&&u._popup&&u._popup.options.autoClose&&u.removeLayer(u._popup),u._popup=this,jt.prototype.openOn.call(this,u)},onAdd:function(u){jt.prototype.onAdd.call(this,u),u.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof di||this._source.on("preclick",Ca))},onRemove:function(u){jt.prototype.onRemove.call(this,u),u.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof di||this._source.off("preclick",Ca))},getEvents:function(){var u=jt.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(u.preclick=this.close),this.options.keepInView&&(u.moveend=this._adjustPan),u},_initLayout:function(){var u="leaflet-popup",d=this._container=ke("div",u+" "+(this.options.className||"")+" leaflet-zoom-animated"),x=this._wrapper=ke("div",u+"-content-wrapper",d);if(this._contentNode=ke("div",u+"-content",x),ts(d),_o(this._contentNode),Xt(d,"contextmenu",Ca),this._tipContainer=ke("div",u+"-tip-container",d),this._tip=ke("div",u+"-tip",this._tipContainer),this.options.closeButton){var D=this._closeButton=ke("a",u+"-close-button",d);D.setAttribute("role","button"),D.setAttribute("aria-label","Close popup"),D.href="#close",D.innerHTML='<span aria-hidden="true">&#215;</span>',Xt(D,"click",function(F){Nr(F),this.close()},this)}},_updateLayout:function(){var u=this._contentNode,d=u.style;d.width="",d.whiteSpace="nowrap";var x=u.offsetWidth;x=Math.min(x,this.options.maxWidth),x=Math.max(x,this.options.minWidth),d.width=x+1+"px",d.whiteSpace="",d.height="";var D=u.offsetHeight,F=this.options.maxHeight,te="leaflet-popup-scrolled";F&&D>F?(d.height=F+"px",Gt(u,te)):Jn(u,te),this._containerWidth=this._container.offsetWidth},_animateZoom:function(u){var d=this._map._latLngToNewLayerPoint(this._latlng,u.zoom,u.center),x=this._getAnchor();fn(this._container,d.add(x))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var u=this._map,d=parseInt(qr(this._container,"marginBottom"),10)||0,x=this._container.offsetHeight+d,D=this._containerWidth,F=new oe(this._containerLeft,-x-this._containerBottom);F._add(hi(this._container));var te=u.layerPointToContainerPoint(F),_e=j(this.options.autoPanPadding),qe=j(this.options.autoPanPaddingTopLeft||_e),He=j(this.options.autoPanPaddingBottomRight||_e),st=u.getSize(),Tt=0,Zt=0;te.x+D+He.x>st.x&&(Tt=te.x+D-st.x+He.x),te.x-Tt-qe.x<0&&(Tt=te.x-qe.x),te.y+x+He.y>st.y&&(Zt=te.y+x-st.y+He.y),te.y-Zt-qe.y<0&&(Zt=te.y-qe.y),(Tt||Zt)&&(this.options.keepInView&&(this._autopanning=!0),u.fire("autopanstart").panBy([Tt,Zt]))}},_getAnchor:function(){return j(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),zn=function(u,d){return new Rt(u,d)};vn.mergeOptions({closePopupOnClick:!0}),vn.include({openPopup:function(u,d,x){return this._initOverlay(Rt,u,d,x).openOn(this),this},closePopup:function(u){return u=arguments.length?u:this._popup,u&&u.close(),this}}),hr.include({bindPopup:function(u,d){return this._popup=this._initOverlay(Rt,this._popup,u,d),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(u){return this._popup&&(this instanceof Ta||(this._popup._source=this),this._popup._prepareOpen(u||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(u){return this._popup&&this._popup.setContent(u),this},getPopup:function(){return this._popup},_openPopup:function(u){if(!(!this._popup||!this._map)){Sa(u);var d=u.layer||u.target;if(this._popup._source===d&&!(d instanceof di)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(u.latlng);return}this._popup._source=d,this.openPopup(u.latlng)}},_movePopup:function(u){this._popup.setLatLng(u.latlng)},_onKeyPress:function(u){u.originalEvent.keyCode===13&&this._openPopup(u)}});var se=jt.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(u){jt.prototype.onAdd.call(this,u),this.setOpacity(this.options.opacity),u.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(u){jt.prototype.onRemove.call(this,u),u.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var u=jt.prototype.getEvents.call(this);return this.options.permanent||(u.preclick=this.close),u},_initLayout:function(){var u="leaflet-tooltip",d=u+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=ke("div",d),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+s(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(u){var d,x,D=this._map,F=this._container,te=D.latLngToContainerPoint(D.getCenter()),_e=D.layerPointToContainerPoint(u),qe=this.options.direction,He=F.offsetWidth,st=F.offsetHeight,Tt=j(this.options.offset),Zt=this._getAnchor();qe==="top"?(d=He/2,x=st):qe==="bottom"?(d=He/2,x=0):qe==="center"?(d=He/2,x=st/2):qe==="right"?(d=0,x=st/2):qe==="left"?(d=He,x=st/2):_e.x<te.x?(qe="right",d=0,x=st/2):(qe="left",d=He+(Tt.x+Zt.x)*2,x=st/2),u=u.subtract(j(d,x,!0)).add(Tt).add(Zt),Jn(F,"leaflet-tooltip-right"),Jn(F,"leaflet-tooltip-left"),Jn(F,"leaflet-tooltip-top"),Jn(F,"leaflet-tooltip-bottom"),Gt(F,"leaflet-tooltip-"+qe),fn(F,u)},_updatePosition:function(){var u=this._map.latLngToLayerPoint(this._latlng);this._setPosition(u)},setOpacity:function(u){this.options.opacity=u,this._container&&Kr(this._container,u)},_animateZoom:function(u){var d=this._map._latLngToNewLayerPoint(this._latlng,u.zoom,u.center);this._setPosition(d)},_getAnchor:function(){return j(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),ge=function(u,d){return new se(u,d)};vn.include({openTooltip:function(u,d,x){return this._initOverlay(se,u,d,x).openOn(this),this},closeTooltip:function(u){return u.close(),this}}),hr.include({bindTooltip:function(u,d){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(se,this._tooltip,u,d),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(u){if(!(!u&&this._tooltipHandlersAdded)){var d=u?"off":"on",x={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?x.add=this._openTooltip:(x.mouseover=this._openTooltip,x.mouseout=this.closeTooltip,x.click=this._openTooltip,this._map?this._addFocusListeners():x.add=this._addFocusListeners),this._tooltip.options.sticky&&(x.mousemove=this._moveTooltip),this[d](x),this._tooltipHandlersAdded=!u}},openTooltip:function(u){return this._tooltip&&(this instanceof Ta||(this._tooltip._source=this),this._tooltip._prepareOpen(u)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(u){return this._tooltip&&this._tooltip.setContent(u),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(u){var d=typeof u.getElement=="function"&&u.getElement();d&&(Xt(d,"focus",function(){this._tooltip._source=u,this.openTooltip()},this),Xt(d,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(u){var d=typeof u.getElement=="function"&&u.getElement();d&&d.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(u){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var d=this;this._map.once("moveend",function(){d._openOnceFlag=!1,d._openTooltip(u)});return}this._tooltip._source=u.layer||u.target,this.openTooltip(this._tooltip.options.sticky?u.latlng:void 0)}},_moveTooltip:function(u){var d=u.latlng,x,D;this._tooltip.options.sticky&&u.originalEvent&&(x=this._map.mouseEventToContainerPoint(u.originalEvent),D=this._map.containerPointToLayerPoint(x),d=this._map.layerPointToLatLng(D)),this._tooltip.setLatLng(d)}});var we=La.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(u){var d=u&&u.tagName==="DIV"?u:document.createElement("div"),x=this.options;if(x.html instanceof Element?(ht(d),d.appendChild(x.html)):d.innerHTML=x.html!==!1?x.html:"",x.bgPos){var D=j(x.bgPos);d.style.backgroundPosition=-D.x+"px "+-D.y+"px"}return this._setIconStyles(d,"icon"),d},createShadow:function(){return null}});function je(u){return new we(u)}La.Default=fa;var Ne=hr.extend({options:{tileSize:256,opacity:1,updateWhenIdle:kt.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(u){b(this,u)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(u){u._addZoomLimit(this)},onRemove:function(u){this._removeAllTiles(),Ze(this._container),u._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(St(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(ar(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(u){return this.options.opacity=u,this._updateOpacity(),this},setZIndex:function(u){return this.options.zIndex=u,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var u=this._clampZoom(this._map.getZoom());u!==this._tileZoom&&(this._tileZoom=u,this._updateLevels()),this._update()}return this},getEvents:function(){var u={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=o(this._onMoveEnd,this.options.updateInterval,this)),u.move=this._onMove),this._zoomAnimated&&(u.zoomanim=this._animateZoom),u},createTile:function(){return document.createElement("div")},getTileSize:function(){var u=this.options.tileSize;return u instanceof oe?u:new oe(u,u)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(u){for(var d=this.getPane().children,x=-u(-1/0,1/0),D=0,F=d.length,te;D<F;D++)te=d[D].style.zIndex,d[D]!==this._container&&te&&(x=u(x,+te));isFinite(x)&&(this.options.zIndex=x+u(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!kt.ielt9){Kr(this._container,this.options.opacity);var u=+new Date,d=!1,x=!1;for(var D in this._tiles){var F=this._tiles[D];if(!(!F.current||!F.loaded)){var te=Math.min(1,(u-F.loaded)/200);Kr(F.el,te),te<1?d=!0:(F.active?x=!0:this._onOpaqueTile(F),F.active=!0)}}x&&!this._noPrune&&this._pruneTiles(),d&&(q(this._fadeFrame),this._fadeFrame=ce(this._updateOpacity,this))}},_onOpaqueTile:c,_initContainer:function(){this._container||(this._container=ke("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var u=this._tileZoom,d=this.options.maxZoom;if(u!==void 0){for(var x in this._levels)x=Number(x),this._levels[x].el.children.length||x===u?(this._levels[x].el.style.zIndex=d-Math.abs(u-x),this._onUpdateLevel(x)):(Ze(this._levels[x].el),this._removeTilesAtZoom(x),this._onRemoveLevel(x),delete this._levels[x]);var D=this._levels[u],F=this._map;return D||(D=this._levels[u]={},D.el=ke("div","leaflet-tile-container leaflet-zoom-animated",this._container),D.el.style.zIndex=d,D.origin=F.project(F.unproject(F.getPixelOrigin()),u).round(),D.zoom=u,this._setZoomTransform(D,F.getCenter(),F.getZoom()),c(D.el.offsetWidth),this._onCreateLevel(D)),this._level=D,D}},_onUpdateLevel:c,_onRemoveLevel:c,_onCreateLevel:c,_pruneTiles:function(){if(this._map){var u,d,x=this._map.getZoom();if(x>this.options.maxZoom||x<this.options.minZoom){this._removeAllTiles();return}for(u in this._tiles)d=this._tiles[u],d.retain=d.current;for(u in this._tiles)if(d=this._tiles[u],d.current&&!d.active){var D=d.coords;this._retainParent(D.x,D.y,D.z,D.z-5)||this._retainChildren(D.x,D.y,D.z,D.z+2)}for(u in this._tiles)this._tiles[u].retain||this._removeTile(u)}},_removeTilesAtZoom:function(u){for(var d in this._tiles)this._tiles[d].coords.z===u&&this._removeTile(d)},_removeAllTiles:function(){for(var u in this._tiles)this._removeTile(u)},_invalidateAll:function(){for(var u in this._levels)Ze(this._levels[u].el),this._onRemoveLevel(Number(u)),delete this._levels[u];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(u,d,x,D){var F=Math.floor(u/2),te=Math.floor(d/2),_e=x-1,qe=new oe(+F,+te);qe.z=+_e;var He=this._tileCoordsToKey(qe),st=this._tiles[He];return st&&st.active?(st.retain=!0,!0):(st&&st.loaded&&(st.retain=!0),_e>D?this._retainParent(F,te,_e,D):!1)},_retainChildren:function(u,d,x,D){for(var F=2*u;F<2*u+2;F++)for(var te=2*d;te<2*d+2;te++){var _e=new oe(F,te);_e.z=x+1;var qe=this._tileCoordsToKey(_e),He=this._tiles[qe];if(He&&He.active){He.retain=!0;continue}else He&&He.loaded&&(He.retain=!0);x+1<D&&this._retainChildren(F,te,x+1,D)}},_resetView:function(u){var d=u&&(u.pinch||u.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),d,d)},_animateZoom:function(u){this._setView(u.center,u.zoom,!0,u.noUpdate)},_clampZoom:function(u){var d=this.options;return d.minNativeZoom!==void 0&&u<d.minNativeZoom?d.minNativeZoom:d.maxNativeZoom!==void 0&&d.maxNativeZoom<u?d.maxNativeZoom:u},_setView:function(u,d,x,D){var F=Math.round(d);this.options.maxZoom!==void 0&&F>this.options.maxZoom||this.options.minZoom!==void 0&&F<this.options.minZoom?F=void 0:F=this._clampZoom(F);var te=this.options.updateWhenZooming&&F!==this._tileZoom;(!D||te)&&(this._tileZoom=F,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),F!==void 0&&this._update(u),x||this._pruneTiles(),this._noPrune=!!x),this._setZoomTransforms(u,d)},_setZoomTransforms:function(u,d){for(var x in this._levels)this._setZoomTransform(this._levels[x],u,d)},_setZoomTransform:function(u,d,x){var D=this._map.getZoomScale(x,u.zoom),F=u.origin.multiplyBy(D).subtract(this._map._getNewPixelOrigin(d,x)).round();kt.any3d?Ja(u.el,F,D):fn(u.el,F)},_resetGrid:function(){var u=this._map,d=u.options.crs,x=this._tileSize=this.getTileSize(),D=this._tileZoom,F=this._map.getPixelWorldBounds(this._tileZoom);F&&(this._globalTileRange=this._pxBoundsToTileRange(F)),this._wrapX=d.wrapLng&&!this.options.noWrap&&[Math.floor(u.project([0,d.wrapLng[0]],D).x/x.x),Math.ceil(u.project([0,d.wrapLng[1]],D).x/x.y)],this._wrapY=d.wrapLat&&!this.options.noWrap&&[Math.floor(u.project([d.wrapLat[0],0],D).y/x.x),Math.ceil(u.project([d.wrapLat[1],0],D).y/x.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(u){var d=this._map,x=d._animatingZoom?Math.max(d._animateToZoom,d.getZoom()):d.getZoom(),D=d.getZoomScale(x,this._tileZoom),F=d.project(u,this._tileZoom).floor(),te=d.getSize().divideBy(D*2);return new H(F.subtract(te),F.add(te))},_update:function(u){var d=this._map;if(d){var x=this._clampZoom(d.getZoom());if(u===void 0&&(u=d.getCenter()),this._tileZoom!==void 0){var D=this._getTiledPixelBounds(u),F=this._pxBoundsToTileRange(D),te=F.getCenter(),_e=[],qe=this.options.keepBuffer,He=new H(F.getBottomLeft().subtract([qe,-qe]),F.getTopRight().add([qe,-qe]));if(!(isFinite(F.min.x)&&isFinite(F.min.y)&&isFinite(F.max.x)&&isFinite(F.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var st in this._tiles){var Tt=this._tiles[st].coords;(Tt.z!==this._tileZoom||!He.contains(new oe(Tt.x,Tt.y)))&&(this._tiles[st].current=!1)}if(Math.abs(x-this._tileZoom)>1){this._setView(u,x);return}for(var Zt=F.min.y;Zt<=F.max.y;Zt++)for(var yn=F.min.x;yn<=F.max.x;yn++){var Xi=new oe(yn,Zt);if(Xi.z=this._tileZoom,!!this._isValidTile(Xi)){var pi=this._tiles[this._tileCoordsToKey(Xi)];pi?pi.current=!0:_e.push(Xi)}}if(_e.sort(function(da,$u){return da.distanceTo(te)-$u.distanceTo(te)}),_e.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Va=document.createDocumentFragment();for(yn=0;yn<_e.length;yn++)this._addTile(_e[yn],Va);this._level.el.appendChild(Va)}}}},_isValidTile:function(u){var d=this._map.options.crs;if(!d.infinite){var x=this._globalTileRange;if(!d.wrapLng&&(u.x<x.min.x||u.x>x.max.x)||!d.wrapLat&&(u.y<x.min.y||u.y>x.max.y))return!1}if(!this.options.bounds)return!0;var D=this._tileCoordsToBounds(u);return pe(this.options.bounds).overlaps(D)},_keyToBounds:function(u){return this._tileCoordsToBounds(this._keyToTileCoords(u))},_tileCoordsToNwSe:function(u){var d=this._map,x=this.getTileSize(),D=u.scaleBy(x),F=D.add(x),te=d.unproject(D,u.z),_e=d.unproject(F,u.z);return[te,_e]},_tileCoordsToBounds:function(u){var d=this._tileCoordsToNwSe(u),x=new fe(d[0],d[1]);return this.options.noWrap||(x=this._map.wrapLatLngBounds(x)),x},_tileCoordsToKey:function(u){return u.x+":"+u.y+":"+u.z},_keyToTileCoords:function(u){var d=u.split(":"),x=new oe(+d[0],+d[1]);return x.z=+d[2],x},_removeTile:function(u){var d=this._tiles[u];d&&(Ze(d.el),delete this._tiles[u],this.fire("tileunload",{tile:d.el,coords:this._keyToTileCoords(u)}))},_initTile:function(u){Gt(u,"leaflet-tile");var d=this.getTileSize();u.style.width=d.x+"px",u.style.height=d.y+"px",u.onselectstart=c,u.onmousemove=c,kt.ielt9&&this.options.opacity<1&&Kr(u,this.options.opacity)},_addTile:function(u,d){var x=this._getTilePos(u),D=this._tileCoordsToKey(u),F=this.createTile(this._wrapCoords(u),i(this._tileReady,this,u));this._initTile(F),this.createTile.length<2&&ce(i(this._tileReady,this,u,null,F)),fn(F,x),this._tiles[D]={el:F,coords:u,current:!0},d.appendChild(F),this.fire("tileloadstart",{tile:F,coords:u})},_tileReady:function(u,d,x){d&&this.fire("tileerror",{error:d,tile:x,coords:u});var D=this._tileCoordsToKey(u);x=this._tiles[D],x&&(x.loaded=+new Date,this._map._fadeAnimated?(Kr(x.el,0),q(this._fadeFrame),this._fadeFrame=ce(this._updateOpacity,this)):(x.active=!0,this._pruneTiles()),d||(Gt(x.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:x.el,coords:u})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),kt.ielt9||!this._map._fadeAnimated?ce(this._pruneTiles,this):setTimeout(i(this._pruneTiles,this),250)))},_getTilePos:function(u){return u.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(u){var d=new oe(this._wrapX?l(u.x,this._wrapX):u.x,this._wrapY?l(u.y,this._wrapY):u.y);return d.z=u.z,d},_pxBoundsToTileRange:function(u){var d=this.getTileSize();return new H(u.min.unscaleBy(d).floor(),u.max.unscaleBy(d).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var u in this._tiles)if(!this._tiles[u].loaded)return!1;return!0}});function Ke(u){return new Ne(u)}var it=Ne.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(u,d){this._url=u,d=b(this,d),d.detectRetina&&kt.retina&&d.maxZoom>0?(d.tileSize=Math.floor(d.tileSize/2),d.zoomReverse?(d.zoomOffset--,d.minZoom=Math.min(d.maxZoom,d.minZoom+1)):(d.zoomOffset++,d.maxZoom=Math.max(d.minZoom,d.maxZoom-1)),d.minZoom=Math.max(0,d.minZoom)):d.zoomReverse?d.minZoom=Math.min(d.maxZoom,d.minZoom):d.maxZoom=Math.max(d.minZoom,d.maxZoom),typeof d.subdomains=="string"&&(d.subdomains=d.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(u,d){return this._url===u&&d===void 0&&(d=!0),this._url=u,d||this.redraw(),this},createTile:function(u,d){var x=document.createElement("img");return Xt(x,"load",i(this._tileOnLoad,this,d,x)),Xt(x,"error",i(this._tileOnError,this,d,x)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(x.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(x.referrerPolicy=this.options.referrerPolicy),x.alt="",x.src=this.getTileUrl(u),x},getTileUrl:function(u){var d={r:kt.retina?"@2x":"",s:this._getSubdomain(u),x:u.x,y:u.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var x=this._globalTileRange.max.y-u.y;this.options.tms&&(d.y=x),d["-y"]=x}return w(this._url,n(d,this.options))},_tileOnLoad:function(u,d){kt.ielt9?setTimeout(i(u,this,null,d),0):u(null,d)},_tileOnError:function(u,d,x){var D=this.options.errorTileUrl;D&&d.getAttribute("src")!==D&&(d.src=D),u(x,d)},_onTileRemove:function(u){u.tile.onload=null},_getZoomForUrl:function(){var u=this._tileZoom,d=this.options.maxZoom,x=this.options.zoomReverse,D=this.options.zoomOffset;return x&&(u=d-u),u+D},_getSubdomain:function(u){var d=Math.abs(u.x+u.y)%this.options.subdomains.length;return this.options.subdomains[d]},_abortLoading:function(){var u,d;for(u in this._tiles)if(this._tiles[u].coords.z!==this._tileZoom&&(d=this._tiles[u].el,d.onload=c,d.onerror=c,!d.complete)){d.src=_;var x=this._tiles[u].coords;Ze(d),delete this._tiles[u],this.fire("tileabort",{tile:d,coords:x})}},_removeTile:function(u){var d=this._tiles[u];if(d)return d.el.setAttribute("src",_),Ne.prototype._removeTile.call(this,u)},_tileReady:function(u,d,x){if(!(!this._map||x&&x.getAttribute("src")===_))return Ne.prototype._tileReady.call(this,u,d,x)}});function mt(u,d){return new it(u,d)}var bt=it.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(u,d){this._url=u;var x=n({},this.defaultWmsParams);for(var D in d)D in this.options||(x[D]=d[D]);d=b(this,d);var F=d.detectRetina&&kt.retina?2:1,te=this.getTileSize();x.width=te.x*F,x.height=te.y*F,this.wmsParams=x},onAdd:function(u){this._crs=this.options.crs||u.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var d=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[d]=this._crs.code,it.prototype.onAdd.call(this,u)},getTileUrl:function(u){var d=this._tileCoordsToNwSe(u),x=this._crs,D=G(x.project(d[0]),x.project(d[1])),F=D.min,te=D.max,_e=(this._wmsVersion>=1.3&&this._crs===la?[F.y,F.x,te.y,te.x]:[F.x,F.y,te.x,te.y]).join(","),qe=it.prototype.getTileUrl.call(this,u);return qe+C(this.wmsParams,qe,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+_e},setParams:function(u,d){return n(this.wmsParams,u),d||this.redraw(),this}});function Vt(u,d){return new bt(u,d)}it.WMS=bt,mt.wms=Vt;var Nt=hr.extend({options:{padding:.1},initialize:function(u){b(this,u),s(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),Gt(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var u={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(u.zoomanim=this._onAnimZoom),u},_onAnimZoom:function(u){this._updateTransform(u.center,u.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(u,d){var x=this._map.getZoomScale(d,this._zoom),D=this._map.getSize().multiplyBy(.5+this.options.padding),F=this._map.project(this._center,d),te=D.multiplyBy(-x).add(F).subtract(this._map._getNewPixelOrigin(u,d));kt.any3d?Ja(this._container,te,x):fn(this._container,te)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var u in this._layers)this._layers[u]._reset()},_onZoomEnd:function(){for(var u in this._layers)this._layers[u]._project()},_updatePaths:function(){for(var u in this._layers)this._layers[u]._update()},_update:function(){var u=this.options.padding,d=this._map.getSize(),x=this._map.containerPointToLayerPoint(d.multiplyBy(-u)).round();this._bounds=new H(x,x.add(d.multiplyBy(1+u*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),zt=Nt.extend({options:{tolerance:0},getEvents:function(){var u=Nt.prototype.getEvents.call(this);return u.viewprereset=this._onViewPreReset,u},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Nt.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var u=this._container=document.createElement("canvas");Xt(u,"mousemove",this._onMouseMove,this),Xt(u,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Xt(u,"mouseout",this._handleMouseOut,this),u._leaflet_disable_events=!0,this._ctx=u.getContext("2d")},_destroyContainer:function(){q(this._redrawRequest),delete this._ctx,Ze(this._container),Vn(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var u;this._redrawBounds=null;for(var d in this._layers)u=this._layers[d],u._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Nt.prototype._update.call(this);var u=this._bounds,d=this._container,x=u.getSize(),D=kt.retina?2:1;fn(d,u.min),d.width=D*x.x,d.height=D*x.y,d.style.width=x.x+"px",d.style.height=x.y+"px",kt.retina&&this._ctx.scale(2,2),this._ctx.translate(-u.min.x,-u.min.y),this.fire("update")}},_reset:function(){Nt.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(u){this._updateDashArray(u),this._layers[s(u)]=u;var d=u._order={layer:u,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=d),this._drawLast=d,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(u){this._requestRedraw(u)},_removePath:function(u){var d=u._order,x=d.next,D=d.prev;x?x.prev=D:this._drawLast=D,D?D.next=x:this._drawFirst=x,delete u._order,delete this._layers[s(u)],this._requestRedraw(u)},_updatePath:function(u){this._extendRedrawBounds(u),u._project(),u._update(),this._requestRedraw(u)},_updateStyle:function(u){this._updateDashArray(u),this._requestRedraw(u)},_updateDashArray:function(u){if(typeof u.options.dashArray=="string"){var d=u.options.dashArray.split(/[, ]+/),x=[],D,F;for(F=0;F<d.length;F++){if(D=Number(d[F]),isNaN(D))return;x.push(D)}u.options._dashArray=x}else u.options._dashArray=u.options.dashArray},_requestRedraw:function(u){this._map&&(this._extendRedrawBounds(u),this._redrawRequest=this._redrawRequest||ce(this._redraw,this))},_extendRedrawBounds:function(u){if(u._pxBounds){var d=(u.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new H,this._redrawBounds.extend(u._pxBounds.min.subtract([d,d])),this._redrawBounds.extend(u._pxBounds.max.add([d,d]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var u=this._redrawBounds;if(u){var d=u.getSize();this._ctx.clearRect(u.min.x,u.min.y,d.x,d.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var u,d=this._redrawBounds;if(this._ctx.save(),d){var x=d.getSize();this._ctx.beginPath(),this._ctx.rect(d.min.x,d.min.y,x.x,x.y),this._ctx.clip()}this._drawing=!0;for(var D=this._drawFirst;D;D=D.next)u=D.layer,(!d||u._pxBounds&&u._pxBounds.intersects(d))&&u._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(u,d){if(this._drawing){var x,D,F,te,_e=u._parts,qe=_e.length,He=this._ctx;if(qe){for(He.beginPath(),x=0;x<qe;x++){for(D=0,F=_e[x].length;D<F;D++)te=_e[x][D],He[D?"lineTo":"moveTo"](te.x,te.y);d&&He.closePath()}this._fillStroke(He,u)}}},_updateCircle:function(u){if(!(!this._drawing||u._empty())){var d=u._point,x=this._ctx,D=Math.max(Math.round(u._radius),1),F=(Math.max(Math.round(u._radiusY),1)||D)/D;F!==1&&(x.save(),x.scale(1,F)),x.beginPath(),x.arc(d.x,d.y/F,D,0,Math.PI*2,!1),F!==1&&x.restore(),this._fillStroke(x,u)}},_fillStroke:function(u,d){var x=d.options;x.fill&&(u.globalAlpha=x.fillOpacity,u.fillStyle=x.fillColor||x.color,u.fill(x.fillRule||"evenodd")),x.stroke&&x.weight!==0&&(u.setLineDash&&u.setLineDash(d.options&&d.options._dashArray||[]),u.globalAlpha=x.opacity,u.lineWidth=x.weight,u.strokeStyle=x.color,u.lineCap=x.lineCap,u.lineJoin=x.lineJoin,u.stroke())},_onClick:function(u){for(var d=this._map.mouseEventToLayerPoint(u),x,D,F=this._drawFirst;F;F=F.next)x=F.layer,x.options.interactive&&x._containsPoint(d)&&(!(u.type==="click"||u.type==="preclick")||!this._map._draggableMoved(x))&&(D=x);this._fireEvent(D?[D]:!1,u)},_onMouseMove:function(u){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var d=this._map.mouseEventToLayerPoint(u);this._handleMouseHover(u,d)}},_handleMouseOut:function(u){var d=this._hoveredLayer;d&&(Jn(this._container,"leaflet-interactive"),this._fireEvent([d],u,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(u,d){if(!this._mouseHoverThrottled){for(var x,D,F=this._drawFirst;F;F=F.next)x=F.layer,x.options.interactive&&x._containsPoint(d)&&(D=x);D!==this._hoveredLayer&&(this._handleMouseOut(u),D&&(Gt(this._container,"leaflet-interactive"),this._fireEvent([D],u,"mouseover"),this._hoveredLayer=D)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,u),this._mouseHoverThrottled=!0,setTimeout(i(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(u,d,x){this._map._fireDOMEvent(d,x||d.type,u)},_bringToFront:function(u){var d=u._order;if(d){var x=d.next,D=d.prev;if(x)x.prev=D;else return;D?D.next=x:x&&(this._drawFirst=x),d.prev=this._drawLast,this._drawLast.next=d,d.next=null,this._drawLast=d,this._requestRedraw(u)}},_bringToBack:function(u){var d=u._order;if(d){var x=d.next,D=d.prev;if(D)D.next=x;else return;x?x.prev=D:D&&(this._drawLast=D),d.prev=null,d.next=this._drawFirst,this._drawFirst.prev=d,this._drawFirst=d,this._requestRedraw(u)}}});function un(u){return kt.canvas?new zt(u):null}var On=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(u){return document.createElement("<lvml:"+u+' class="lvml">')}}catch{}return function(u){return document.createElement("<"+u+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),Ht={_initContainer:function(){this._container=ke("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Nt.prototype._update.call(this),this.fire("update"))},_initPath:function(u){var d=u._container=On("shape");Gt(d,"leaflet-vml-shape "+(this.options.className||"")),d.coordsize="1 1",u._path=On("path"),d.appendChild(u._path),this._updateStyle(u),this._layers[s(u)]=u},_addPath:function(u){var d=u._container;this._container.appendChild(d),u.options.interactive&&u.addInteractiveTarget(d)},_removePath:function(u){var d=u._container;Ze(d),u.removeInteractiveTarget(d),delete this._layers[s(u)]},_updateStyle:function(u){var d=u._stroke,x=u._fill,D=u.options,F=u._container;F.stroked=!!D.stroke,F.filled=!!D.fill,D.stroke?(d||(d=u._stroke=On("stroke")),F.appendChild(d),d.weight=D.weight+"px",d.color=D.color,d.opacity=D.opacity,D.dashArray?d.dashStyle=I(D.dashArray)?D.dashArray.join(" "):D.dashArray.replace(/( *, *)/g," "):d.dashStyle="",d.endcap=D.lineCap.replace("butt","flat"),d.joinstyle=D.lineJoin):d&&(F.removeChild(d),u._stroke=null),D.fill?(x||(x=u._fill=On("fill")),F.appendChild(x),x.color=D.fillColor||D.color,x.opacity=D.fillOpacity):x&&(F.removeChild(x),u._fill=null)},_updateCircle:function(u){var d=u._point.round(),x=Math.round(u._radius),D=Math.round(u._radiusY||x);this._setPath(u,u._empty()?"M0 0":"AL "+d.x+","+d.y+" "+x+","+D+" 0,"+65535*360)},_setPath:function(u,d){u._path.v=d},_bringToFront:function(u){St(u._container)},_bringToBack:function(u){ar(u._container)}},br=kt.vml?On:Se,Pr=Nt.extend({_initContainer:function(){this._container=br("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=br("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Ze(this._container),Vn(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Nt.prototype._update.call(this);var u=this._bounds,d=u.getSize(),x=this._container;(!this._svgSize||!this._svgSize.equals(d))&&(this._svgSize=d,x.setAttribute("width",d.x),x.setAttribute("height",d.y)),fn(x,u.min),x.setAttribute("viewBox",[u.min.x,u.min.y,d.x,d.y].join(" ")),this.fire("update")}},_initPath:function(u){var d=u._path=br("path");u.options.className&&Gt(d,u.options.className),u.options.interactive&&Gt(d,"leaflet-interactive"),this._updateStyle(u),this._layers[s(u)]=u},_addPath:function(u){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(u._path),u.addInteractiveTarget(u._path)},_removePath:function(u){Ze(u._path),u.removeInteractiveTarget(u._path),delete this._layers[s(u)]},_updatePath:function(u){u._project(),u._update()},_updateStyle:function(u){var d=u._path,x=u.options;d&&(x.stroke?(d.setAttribute("stroke",x.color),d.setAttribute("stroke-opacity",x.opacity),d.setAttribute("stroke-width",x.weight),d.setAttribute("stroke-linecap",x.lineCap),d.setAttribute("stroke-linejoin",x.lineJoin),x.dashArray?d.setAttribute("stroke-dasharray",x.dashArray):d.removeAttribute("stroke-dasharray"),x.dashOffset?d.setAttribute("stroke-dashoffset",x.dashOffset):d.removeAttribute("stroke-dashoffset")):d.setAttribute("stroke","none"),x.fill?(d.setAttribute("fill",x.fillColor||x.color),d.setAttribute("fill-opacity",x.fillOpacity),d.setAttribute("fill-rule",x.fillRule||"evenodd")):d.setAttribute("fill","none"))},_updatePoly:function(u,d){this._setPath(u,Ee(u._parts,d))},_updateCircle:function(u){var d=u._point,x=Math.max(Math.round(u._radius),1),D=Math.max(Math.round(u._radiusY),1)||x,F="a"+x+","+D+" 0 1,0 ",te=u._empty()?"M0 0":"M"+(d.x-x)+","+d.y+F+x*2+",0 "+F+-x*2+",0 ";this._setPath(u,te)},_setPath:function(u,d){u._path.setAttribute("d",d)},_bringToFront:function(u){St(u._path)},_bringToBack:function(u){ar(u._path)}});kt.vml&&Pr.include(Ht);function Ui(u){return kt.svg||kt.vml?new Pr(u):null}vn.include({getRenderer:function(u){var d=u.options.renderer||this._getPaneRenderer(u.options.pane)||this.options.renderer||this._renderer;return d||(d=this._renderer=this._createRenderer()),this.hasLayer(d)||this.addLayer(d),d},_getPaneRenderer:function(u){if(u==="overlayPane"||u===void 0)return!1;var d=this._paneRenderers[u];return d===void 0&&(d=this._createRenderer({pane:u}),this._paneRenderers[u]=d),d},_createRenderer:function(u){return this.options.preferCanvas&&un(u)||Ui(u)}});var er=ka.extend({initialize:function(u,d){ka.prototype.initialize.call(this,this._boundsToLatLngs(u),d)},setBounds:function(u){return this.setLatLngs(this._boundsToLatLngs(u))},_boundsToLatLngs:function(u){return u=pe(u),[u.getSouthWest(),u.getNorthWest(),u.getNorthEast(),u.getSouthEast()]}});function iu(u,d){return new er(u,d)}Pr.create=br,Pr.pointsToPath=Ee,Mi.geometryToLayer=Ln,Mi.coordsToLatLng=Si,Mi.coordsToLatLngs=Fr,Mi.latLngToCoords=ws,Mi.latLngsToCoords=he,Mi.getFeature=xe,Mi.asFeature=Ue,vn.mergeOptions({boxZoom:!0});var Co=U.extend({initialize:function(u){this._map=u,this._container=u._container,this._pane=u._panes.overlayPane,this._resetStateTimeout=0,u.on("unload",this._destroy,this)},addHooks:function(){Xt(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Vn(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Ze(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(u){if(!u.shiftKey||u.which!==1&&u.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Wi(),xi(),this._startPoint=this._map.mouseEventToContainerPoint(u),Xt(document,{contextmenu:Sa,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(u){this._moved||(this._moved=!0,this._box=ke("div","leaflet-zoom-box",this._container),Gt(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(u);var d=new H(this._point,this._startPoint),x=d.getSize();fn(this._box,d.min),this._box.style.width=x.x+"px",this._box.style.height=x.y+"px"},_finish:function(){this._moved&&(Ze(this._box),Jn(this._container,"leaflet-crosshair")),Gs(),ps(),Vn(document,{contextmenu:Sa,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(u){if(!(u.which!==1&&u.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(i(this._resetState,this),0);var d=new fe(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(d).fire("boxzoomend",{boxZoomBounds:d})}},_onKeyDown:function(u){u.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});vn.addInitHook("addHandler","boxZoom",Co),vn.mergeOptions({doubleClickZoom:!0});var qi=U.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(u){var d=this._map,x=d.getZoom(),D=d.options.zoomDelta,F=u.originalEvent.shiftKey?x-D:x+D;d.options.doubleClickZoom==="center"?d.setZoom(F):d.setZoomAround(u.containerPoint,F)}});vn.addInitHook("addHandler","doubleClickZoom",qi),vn.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Wv=U.extend({addHooks:function(){if(!this._draggable){var u=this._map;this._draggable=new X(u._mapPane,u._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),u.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),u.on("zoomend",this._onZoomEnd,this),u.whenReady(this._onZoomEnd,this))}Gt(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Jn(this._map._container,"leaflet-grab"),Jn(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var u=this._map;if(u._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var d=pe(this._map.options.maxBounds);this._offsetLimit=G(this._map.latLngToContainerPoint(d.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(d.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;u.fire("movestart").fire("dragstart"),u.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(u){if(this._map.options.inertia){var d=this._lastTime=+new Date,x=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(x),this._times.push(d),this._prunePositions(d)}this._map.fire("move",u).fire("drag",u)},_prunePositions:function(u){for(;this._positions.length>1&&u-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var u=this._map.getSize().divideBy(2),d=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=d.subtract(u).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(u,d){return u-(u-d)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var u=this._draggable._newPos.subtract(this._draggable._startPos),d=this._offsetLimit;u.x<d.min.x&&(u.x=this._viscousLimit(u.x,d.min.x)),u.y<d.min.y&&(u.y=this._viscousLimit(u.y,d.min.y)),u.x>d.max.x&&(u.x=this._viscousLimit(u.x,d.max.x)),u.y>d.max.y&&(u.y=this._viscousLimit(u.y,d.max.y)),this._draggable._newPos=this._draggable._startPos.add(u)}},_onPreDragWrap:function(){var u=this._worldWidth,d=Math.round(u/2),x=this._initialWorldOffset,D=this._draggable._newPos.x,F=(D-d+x)%u+d-x,te=(D+d+x)%u-d-x,_e=Math.abs(F+x)<Math.abs(te+x)?F:te;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=_e},_onDragEnd:function(u){var d=this._map,x=d.options,D=!x.inertia||u.noInertia||this._times.length<2;if(d.fire("dragend",u),D)d.fire("moveend");else{this._prunePositions(+new Date);var F=this._lastPos.subtract(this._positions[0]),te=(this._lastTime-this._times[0])/1e3,_e=x.easeLinearity,qe=F.multiplyBy(_e/te),He=qe.distanceTo([0,0]),st=Math.min(x.inertiaMaxSpeed,He),Tt=qe.multiplyBy(st/He),Zt=st/(x.inertiaDeceleration*_e),yn=Tt.multiplyBy(-Zt/2).round();!yn.x&&!yn.y?d.fire("moveend"):(yn=d._limitOffset(yn,d.options.maxBounds),ce(function(){d.panBy(yn,{duration:Zt,easeLinearity:_e,noMoveStart:!0,animate:!0})}))}}});vn.addInitHook("addHandler","dragging",Wv),vn.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Gv=U.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(u){this._map=u,this._setPanDelta(u.options.keyboardPanDelta),this._setZoomDelta(u.options.zoomDelta)},addHooks:function(){var u=this._map._container;u.tabIndex<=0&&(u.tabIndex="0"),Xt(u,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Vn(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var u=document.body,d=document.documentElement,x=u.scrollTop||d.scrollTop,D=u.scrollLeft||d.scrollLeft;this._map._container.focus(),window.scrollTo(D,x)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(u){var d=this._panKeys={},x=this.keyCodes,D,F;for(D=0,F=x.left.length;D<F;D++)d[x.left[D]]=[-1*u,0];for(D=0,F=x.right.length;D<F;D++)d[x.right[D]]=[u,0];for(D=0,F=x.down.length;D<F;D++)d[x.down[D]]=[0,u];for(D=0,F=x.up.length;D<F;D++)d[x.up[D]]=[0,-1*u]},_setZoomDelta:function(u){var d=this._zoomKeys={},x=this.keyCodes,D,F;for(D=0,F=x.zoomIn.length;D<F;D++)d[x.zoomIn[D]]=u;for(D=0,F=x.zoomOut.length;D<F;D++)d[x.zoomOut[D]]=-u},_addHooks:function(){Xt(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Vn(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(u){if(!(u.altKey||u.ctrlKey||u.metaKey)){var d=u.keyCode,x=this._map,D;if(d in this._panKeys){if(!x._panAnim||!x._panAnim._inProgress)if(D=this._panKeys[d],u.shiftKey&&(D=j(D).multiplyBy(3)),x.options.maxBounds&&(D=x._limitOffset(j(D),x.options.maxBounds)),x.options.worldCopyJump){var F=x.wrapLatLng(x.unproject(x.project(x.getCenter()).add(D)));x.panTo(F)}else x.panBy(D)}else if(d in this._zoomKeys)x.setZoom(x.getZoom()+(u.shiftKey?3:1)*this._zoomKeys[d]);else if(d===27&&x._popup&&x._popup.options.closeOnEscapeKey)x.closePopup();else return;Sa(u)}}});vn.addInitHook("addHandler","keyboard",Gv),vn.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Zv=U.extend({addHooks:function(){Xt(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Vn(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(u){var d=ru(u),x=this._map.options.wheelDebounceTime;this._delta+=d,this._lastMousePos=this._map.mouseEventToContainerPoint(u),this._startTime||(this._startTime=+new Date);var D=Math.max(x-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(i(this._performZoom,this),D),Sa(u)},_performZoom:function(){var u=this._map,d=u.getZoom(),x=this._map.options.zoomSnap||0;u._stop();var D=this._delta/(this._map.options.wheelPxPerZoomLevel*4),F=4*Math.log(2/(1+Math.exp(-Math.abs(D))))/Math.LN2,te=x?Math.ceil(F/x)*x:F,_e=u._limitZoom(d+(this._delta>0?te:-te))-d;this._delta=0,this._startTime=null,_e&&(u.options.scrollWheelZoom==="center"?u.setZoom(d+_e):u.setZoomAround(this._lastMousePos,d+_e))}});vn.addInitHook("addHandler","scrollWheelZoom",Zv);var zT=600;vn.mergeOptions({tapHold:kt.touchNative&&kt.safari&&kt.mobile,tapTolerance:15});var Xv=U.extend({addHooks:function(){Xt(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Vn(this._map._container,"touchstart",this._onDown,this)},_onDown:function(u){if(clearTimeout(this._holdTimeout),u.touches.length===1){var d=u.touches[0];this._startPos=this._newPos=new oe(d.clientX,d.clientY),this._holdTimeout=setTimeout(i(function(){this._cancel(),this._isTapValid()&&(Xt(document,"touchend",Nr),Xt(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",d))},this),zT),Xt(document,"touchend touchcancel contextmenu",this._cancel,this),Xt(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function u(){Vn(document,"touchend",Nr),Vn(document,"touchend touchcancel",u)},_cancel:function(){clearTimeout(this._holdTimeout),Vn(document,"touchend touchcancel contextmenu",this._cancel,this),Vn(document,"touchmove",this._onMove,this)},_onMove:function(u){var d=u.touches[0];this._newPos=new oe(d.clientX,d.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(u,d){var x=new MouseEvent(u,{bubbles:!0,cancelable:!0,view:window,screenX:d.screenX,screenY:d.screenY,clientX:d.clientX,clientY:d.clientY});x._simulated=!0,d.target.dispatchEvent(x)}});vn.addInitHook("addHandler","tapHold",Xv),vn.mergeOptions({touchZoom:kt.touch,bounceAtZoomLimits:!0});var Yv=U.extend({addHooks:function(){Gt(this._map._container,"leaflet-touch-zoom"),Xt(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Jn(this._map._container,"leaflet-touch-zoom"),Vn(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(u){var d=this._map;if(!(!u.touches||u.touches.length!==2||d._animatingZoom||this._zooming)){var x=d.mouseEventToContainerPoint(u.touches[0]),D=d.mouseEventToContainerPoint(u.touches[1]);this._centerPoint=d.getSize()._divideBy(2),this._startLatLng=d.containerPointToLatLng(this._centerPoint),d.options.touchZoom!=="center"&&(this._pinchStartLatLng=d.containerPointToLatLng(x.add(D)._divideBy(2))),this._startDist=x.distanceTo(D),this._startZoom=d.getZoom(),this._moved=!1,this._zooming=!0,d._stop(),Xt(document,"touchmove",this._onTouchMove,this),Xt(document,"touchend touchcancel",this._onTouchEnd,this),Nr(u)}},_onTouchMove:function(u){if(!(!u.touches||u.touches.length!==2||!this._zooming)){var d=this._map,x=d.mouseEventToContainerPoint(u.touches[0]),D=d.mouseEventToContainerPoint(u.touches[1]),F=x.distanceTo(D)/this._startDist;if(this._zoom=d.getScaleZoom(F,this._startZoom),!d.options.bounceAtZoomLimits&&(this._zoom<d.getMinZoom()&&F<1||this._zoom>d.getMaxZoom()&&F>1)&&(this._zoom=d._limitZoom(this._zoom)),d.options.touchZoom==="center"){if(this._center=this._startLatLng,F===1)return}else{var te=x._add(D)._divideBy(2)._subtract(this._centerPoint);if(F===1&&te.x===0&&te.y===0)return;this._center=d.unproject(d.project(this._pinchStartLatLng,this._zoom).subtract(te),this._zoom)}this._moved||(d._moveStart(!0,!1),this._moved=!0),q(this._animRequest);var _e=i(d._move,d,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=ce(_e,this,!0),Nr(u)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,q(this._animRequest),Vn(document,"touchmove",this._onTouchMove,this),Vn(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});vn.addInitHook("addHandler","touchZoom",Yv),vn.BoxZoom=Co,vn.DoubleClickZoom=qi,vn.Drag=Wv,vn.Keyboard=Gv,vn.ScrollWheelZoom=Zv,vn.TapHold=Xv,vn.TouchZoom=Yv,e.Bounds=H,e.Browser=kt,e.CRS=Ie,e.Canvas=zt,e.Circle=bs,e.CircleMarker=ha,e.Class=O,e.Control=ri,e.DivIcon=we,e.DivOverlay=jt,e.DomEvent=bo,e.DomUtil=$l,e.Draggable=X,e.Evented=ie,e.FeatureGroup=Ta,e.GeoJSON=Mi,e.GridLayer=Ne,e.Handler=U,e.Icon=La,e.ImageOverlay=yt,e.LatLng=de,e.LatLngBounds=fe,e.Layer=hr,e.LayerGroup=_s,e.LineUtil=Bi,e.Map=vn,e.Marker=Eo,e.Mixin=z,e.Path=di,e.Point=oe,e.PolyUtil=Oe,e.Polygon=ka,e.Polyline=_r,e.Popup=Rt,e.PosAnimation=wo,e.Projection=ua,e.Rectangle=er,e.Renderer=Nt,e.SVG=Pr,e.SVGOverlay=Ft,e.TileLayer=it,e.Tooltip=se,e.Transformation=Ge,e.Util=W,e.VideoOverlay=_t,e.bind=i,e.bounds=G,e.canvas=un,e.circle=Ci,e.circleMarker=Fa,e.control=m,e.divIcon=je,e.extend=n,e.featureGroup=Nn,e.geoJSON=We,e.geoJson=dt,e.gridLayer=Ke,e.icon=Zi,e.imageOverlay=At,e.latLng=Ae,e.latLngBounds=pe,e.layerGroup=xo,e.map=jl,e.marker=zu,e.point=j,e.polygon=Hu,e.polyline=Ys,e.popup=zn,e.rectangle=iu,e.setOptions=b,e.stamp=s,e.svg=Ui,e.svgOverlay=$t,e.tileLayer=mt,e.tooltip=ge,e.transformation=at,e.version=t,e.videoOverlay=an;var HT=window.L;e.noConflict=function(){return window.L=HT,this},window.L=e})});var nv=$e(kS=>{(function(e){typeof define=="function"&&define.amd?define(["jquery"],e):e(typeof kS=="object"?gr():jQuery)})(function(e,t){function n(){return new Date(Date.UTC.apply(Date,arguments))}function r(){var S=new Date;return n(S.getFullYear(),S.getMonth(),S.getDate())}function i(S,_){return S.getUTCFullYear()===_.getUTCFullYear()&&S.getUTCMonth()===_.getUTCMonth()&&S.getUTCDate()===_.getUTCDate()}function a(S,_){return function(){return _!==t&&e.fn.datepicker.deprecated(_),this[S].apply(this,arguments)}}function s(S){return S&&!isNaN(S.getTime())}var o=function(){var S={get:function(_){return this.slice(_)[0]},contains:function(_){for(var P=_&&_.valueOf(),v=0,y=this.length;v<y;v++)if(0<=this[v].valueOf()-P&&this[v].valueOf()-P<864e5)return v;return-1},remove:function(_){this.splice(_,1)},replace:function(_){_&&(Array.isArray(_)||(_=[_]),this.clear(),this.push.apply(this,_))},clear:function(){this.length=0},copy:function(){var _=new o;return _.replace(this),_}};return function(){var _=[];return _.push.apply(_,arguments),e.extend(_,S),_}}(),l=function(S,_){e.data(S,"datepicker",this),this._events=[],this._secondaryEvents=[],this._process_options(_),this.dates=new o,this.viewDate=this.o.defaultViewDate,this.focusDate=null,this.element=e(S),this.isInput=this.element.is("input"),this.inputField=this.isInput?this.element:this.element.find("input"),this.component=this.element.hasClass("date")?this.element.find(".add-on, .input-group-addon, .input-group-append, .input-group-prepend, .btn"):!1,this.component&&this.component.length===0&&(this.component=!1),this.o.isInline===null?this.isInline=!this.component&&!this.isInput:this.isInline=this.o.isInline,this.picker=e(I.template),this._check_template(this.o.templates.leftArrow)&&this.picker.find(".prev").html(this.o.templates.leftArrow),this._check_template(this.o.templates.rightArrow)&&this.picker.find(".next").html(this.o.templates.rightArrow),this._buildEvents(),this._attachEvents(),this.isInline?this.picker.addClass("datepicker-inline").appendTo(this.element):this.picker.addClass("datepicker-dropdown dropdown-menu"),this.o.rtl&&this.picker.addClass("datepicker-rtl"),this.o.calendarWeeks&&this.picker.find(".datepicker-days .datepicker-switch, thead .datepicker-title, tfoot .today, tfoot .clear").attr("colspan",function(P,v){return Number(v)+1}),this._process_options({startDate:this._o.startDate,endDate:this._o.endDate,daysOfWeekDisabled:this.o.daysOfWeekDisabled,daysOfWeekHighlighted:this.o.daysOfWeekHighlighted,datesDisabled:this.o.datesDisabled}),this._allow_update=!1,this.setViewMode(this.o.startView),this._allow_update=!0,this.fillDow(),this.fillMonths(),this.update(),this.isInline&&this.show()};l.prototype={constructor:l,_resolveViewName:function(S){return e.each(I.viewModes,function(_,P){if(S===_||e.inArray(S,P.names)!==-1)return S=_,!1}),S},_resolveDaysOfWeek:function(S){return Array.isArray(S)||(S=S.split(/[,\s]*/)),e.map(S,Number)},_check_template:function(S){try{if(S===t||S==="")return!1;if((S.match(/[<>]/g)||[]).length<=0)return!0;var _=e(S);return _.length>0}catch{return!1}},_process_options:function(S){this._o=e.extend({},this._o,S);var _=this.o=e.extend({},this._o),P=_.language;w[P]||(P=P.split("-")[0],w[P]||(P=C.language)),_.language=P,_.startView=this._resolveViewName(_.startView),_.minViewMode=this._resolveViewName(_.minViewMode),_.maxViewMode=this._resolveViewName(_.maxViewMode),_.startView=Math.max(this.o.minViewMode,Math.min(this.o.maxViewMode,_.startView)),_.multidate!==!0&&(_.multidate=Number(_.multidate)||!1,_.multidate!==!1&&(_.multidate=Math.max(0,_.multidate))),_.multidateSeparator=String(_.multidateSeparator),_.weekStart%=7,_.weekEnd=(_.weekStart+6)%7;var v=I.parseFormat(_.format);_.startDate!==-1/0&&(_.startDate?_.startDate instanceof Date?_.startDate=this._local_to_utc(this._zero_time(_.startDate)):_.startDate=I.parseDate(_.startDate,v,_.language,_.assumeNearbyYear):_.startDate=-1/0),_.endDate!==1/0&&(_.endDate?_.endDate instanceof Date?_.endDate=this._local_to_utc(this._zero_time(_.endDate)):_.endDate=I.parseDate(_.endDate,v,_.language,_.assumeNearbyYear):_.endDate=1/0),_.daysOfWeekDisabled=this._resolveDaysOfWeek(_.daysOfWeekDisabled||[]),_.daysOfWeekHighlighted=this._resolveDaysOfWeek(_.daysOfWeekHighlighted||[]),_.datesDisabled=_.datesDisabled||[],Array.isArray(_.datesDisabled)||(_.datesDisabled=_.datesDisabled.split(",")),_.datesDisabled=e.map(_.datesDisabled,function(W){return I.parseDate(W,v,_.language,_.assumeNearbyYear)});var y=String(_.orientation).toLowerCase().split(/\s+/g),$=_.orientation.toLowerCase();if(y=e.grep(y,function(W){return/^auto|left|right|top|bottom$/.test(W)}),_.orientation={x:"auto",y:"auto"},!(!$||$==="auto"))if(y.length===1)switch(y[0]){case"top":case"bottom":_.orientation.y=y[0];break;case"left":case"right":_.orientation.x=y[0];break}else $=e.grep(y,function(W){return/^left|right$/.test(W)}),_.orientation.x=$[0]||"auto",$=e.grep(y,function(W){return/^top|bottom$/.test(W)}),_.orientation.y=$[0]||"auto";if(_.defaultViewDate instanceof Date||typeof _.defaultViewDate=="string")_.defaultViewDate=I.parseDate(_.defaultViewDate,v,_.language,_.assumeNearbyYear);else if(_.defaultViewDate){var Z=_.defaultViewDate.year||new Date().getFullYear(),ce=_.defaultViewDate.month||0,q=_.defaultViewDate.day||1;_.defaultViewDate=n(Z,ce,q)}else _.defaultViewDate=r()},_applyEvents:function(S){for(var _=0,P,v,y;_<S.length;_++)P=S[_][0],S[_].length===2?(v=t,y=S[_][1]):S[_].length===3&&(v=S[_][1],y=S[_][2]),P.on(y,v)},_unapplyEvents:function(S){for(var _=0,P,v,y;_<S.length;_++)P=S[_][0],S[_].length===2?(y=t,v=S[_][1]):S[_].length===3&&(y=S[_][1],v=S[_][2]),P.off(v,y)},_buildEvents:function(){var S={keyup:e.proxy(function(_){e.inArray(_.keyCode,[27,37,39,38,40,32,13,9])===-1&&this.update()},this),keydown:e.proxy(this.keydown,this),paste:e.proxy(this.paste,this)};this.o.showOnFocus===!0&&(S.focus=e.proxy(this.show,this)),this.isInput?this._events=[[this.element,S]]:this.component&&this.inputField.length?this._events=[[this.inputField,S],[this.component,{click:e.proxy(this.show,this)}]]:this._events=[[this.element,{click:e.proxy(this.show,this),keydown:e.proxy(this.keydown,this)}]],this._events.push([this.element,"*",{blur:e.proxy(function(_){this._focused_from=_.target},this)}],[this.element,{blur:e.proxy(function(_){this._focused_from=_.target},this)}]),this.o.immediateUpdates&&this._events.push([this.element,{"changeYear changeMonth":e.proxy(function(_){this.update(_.date)},this)}]),this._secondaryEvents=[[this.picker,{click:e.proxy(this.click,this)}],[this.picker,".prev, .next",{click:e.proxy(this.navArrowsClick,this)}],[this.picker,".day:not(.disabled)",{click:e.proxy(this.dayCellClick,this)}],[e(window),{resize:e.proxy(this.place,this)}],[e(document),{"mousedown touchstart":e.proxy(function(_){this.element.is(_.target)||this.element.find(_.target).length||this.picker.is(_.target)||this.picker.find(_.target).length||this.isInline||this.hide()},this)}]]},_attachEvents:function(){this._detachEvents(),this._applyEvents(this._events)},_detachEvents:function(){this._unapplyEvents(this._events)},_attachSecondaryEvents:function(){this._detachSecondaryEvents(),this._applyEvents(this._secondaryEvents)},_detachSecondaryEvents:function(){this._unapplyEvents(this._secondaryEvents)},_trigger:function(S,_){var P=_||this.dates.get(-1),v=this._utc_to_local(P);this.element.trigger({type:S,date:v,viewMode:this.viewMode,dates:e.map(this.dates,this._utc_to_local),format:e.proxy(function(y,$){arguments.length===0?(y=this.dates.length-1,$=this.o.format):typeof y=="string"&&($=y,y=this.dates.length-1),$=$||this.o.format;var Z=this.dates.get(y);return I.formatDate(Z,$,this.o.language)},this)})},show:function(){if(!(this.inputField.is(":disabled")||this.inputField.prop("readonly")&&this.o.enableOnReadonly===!1))return this.isInline||this.picker.appendTo(this.o.container),this.place(),this.picker.show(),this._attachSecondaryEvents(),this._trigger("show"),(window.navigator.msMaxTouchPoints||"ontouchstart"in document)&&this.o.disableTouchKeyboard&&e(this.element).blur(),this},hide:function(){return this.isInline||!this.picker.is(":visible")?this:(this.focusDate=null,this.picker.hide().detach(),this._detachSecondaryEvents(),this.setViewMode(this.o.startView),this.o.forceParse&&this.inputField.val()&&this.setValue(),this._trigger("hide"),this)},destroy:function(){return this.hide(),this._detachEvents(),this._detachSecondaryEvents(),this.picker.remove(),delete this.element.data().datepicker,this.isInput||delete this.element.data().date,this},paste:function(S){var _;if(S.originalEvent.clipboardData&&S.originalEvent.clipboardData.types&&e.inArray("text/plain",S.originalEvent.clipboardData.types)!==-1)_=S.originalEvent.clipboardData.getData("text/plain");else if(window.clipboardData)_=window.clipboardData.getData("Text");else return;this.setDate(_),this.update(),S.preventDefault()},_utc_to_local:function(S){if(!S)return S;var _=new Date(S.getTime()+S.getTimezoneOffset()*6e4);return _.getTimezoneOffset()!==S.getTimezoneOffset()&&(_=new Date(S.getTime()+_.getTimezoneOffset()*6e4)),_},_local_to_utc:function(S){return S&&new Date(S.getTime()-S.getTimezoneOffset()*6e4)},_zero_time:function(S){return S&&new Date(S.getFullYear(),S.getMonth(),S.getDate())},_zero_utc_time:function(S){return S&&n(S.getUTCFullYear(),S.getUTCMonth(),S.getUTCDate())},getDates:function(){return e.map(this.dates,this._utc_to_local)},getUTCDates:function(){return e.map(this.dates,function(S){return new Date(S)})},getDate:function(){return this._utc_to_local(this.getUTCDate())},getUTCDate:function(){var S=this.dates.get(-1);return S!==t?new Date(S):null},clearDates:function(){this.inputField.val(""),this._trigger("changeDate"),this.update(),this.o.autoclose&&this.hide()},setDates:function(){var S=Array.isArray(arguments[0])?arguments[0]:arguments;return this.update.apply(this,S),this._trigger("changeDate"),this.setValue(),this},setUTCDates:function(){var S=Array.isArray(arguments[0])?arguments[0]:arguments;return this.setDates.apply(this,e.map(S,this._utc_to_local)),this},setDate:a("setDates"),setUTCDate:a("setUTCDates"),remove:a("destroy","Method `remove` is deprecated and will be removed in version 2.0. Use `destroy` instead"),setValue:function(){var S=this.getFormattedDate();return this.inputField.val(S),this},getFormattedDate:function(S){S===t&&(S=this.o.format);var _=this.o.language;return e.map(this.dates,function(P){return I.formatDate(P,S,_)}).join(this.o.multidateSeparator)},getStartDate:function(){return this.o.startDate},setStartDate:function(S){return this._process_options({startDate:S}),this.update(),this.updateNavArrows(),this},getEndDate:function(){return this.o.endDate},setEndDate:function(S){return this._process_options({endDate:S}),this.update(),this.updateNavArrows(),this},setDaysOfWeekDisabled:function(S){return this._process_options({daysOfWeekDisabled:S}),this.update(),this},setDaysOfWeekHighlighted:function(S){return this._process_options({daysOfWeekHighlighted:S}),this.update(),this},setDatesDisabled:function(S){return this._process_options({datesDisabled:S}),this.update(),this},place:function(){if(this.isInline)return this;var S=this.picker.outerWidth(),_=this.picker.outerHeight(),P=10,v=e(this.o.container),y=v.width(),$=this.o.container==="body"?e(document).scrollTop():v.scrollTop(),Z=v.offset(),ce=[0];this.element.parents().each(function(){var H=e(this).css("z-index");H!=="auto"&&Number(H)!==0&&ce.push(Number(H))});var q=Math.max.apply(Math,ce)+this.o.zIndexOffset,W=this.component?this.component.parent().offset():this.element.offset(),O=this.component?this.component.outerHeight(!0):this.element.outerHeight(!1),re=this.component?this.component.outerWidth(!0):this.element.outerWidth(!1),le=W.left-Z.left,ie=W.top-Z.top;this.o.container!=="body"&&(ie+=$),this.picker.removeClass("datepicker-orient-top datepicker-orient-bottom datepicker-orient-right datepicker-orient-left"),this.o.orientation.x!=="auto"?(this.picker.addClass("datepicker-orient-"+this.o.orientation.x),this.o.orientation.x==="right"&&(le-=S-re)):W.left<0?(this.picker.addClass("datepicker-orient-left"),le-=W.left-P):le+S>y?(this.picker.addClass("datepicker-orient-right"),le+=re-S):this.o.rtl?this.picker.addClass("datepicker-orient-right"):this.picker.addClass("datepicker-orient-left");var oe=this.o.orientation.y,Q;if(oe==="auto"&&(Q=-$+ie-_,oe=Q<0?"bottom":"top"),this.picker.addClass("datepicker-orient-"+oe),oe==="top"?ie-=_+parseInt(this.picker.css("padding-top")):ie+=O,this.o.rtl){var j=y-(le+re);this.picker.css({top:ie,right:j,zIndex:q})}else this.picker.css({top:ie,left:le,zIndex:q});return this},_allow_update:!0,update:function(){if(!this._allow_update)return this;var S=this.dates.copy(),_=[],P=!1;return arguments.length?(e.each(arguments,e.proxy(function(v,y){y instanceof Date&&(y=this._local_to_utc(y)),_.push(y)},this)),P=!0):(_=this.isInput?this.element.val():this.element.data("date")||this.inputField.val(),_&&this.o.multidate?_=_.split(this.o.multidateSeparator):_=[_],delete this.element.data().date),_=e.map(_,e.proxy(function(v){return I.parseDate(v,this.o.format,this.o.language,this.o.assumeNearbyYear)},this)),_=e.grep(_,e.proxy(function(v){return!this.dateWithinRange(v)||!v},this),!0),this.dates.replace(_),this.o.updateViewDate&&(this.dates.length?this.viewDate=new Date(this.dates.get(-1)):this.viewDate<this.o.startDate?this.viewDate=new Date(this.o.startDate):this.viewDate>this.o.endDate?this.viewDate=new Date(this.o.endDate):this.viewDate=this.o.defaultViewDate),P?(this.setValue(),this.element.change()):this.dates.length&&String(S)!==String(this.dates)&&P&&(this._trigger("changeDate"),this.element.change()),!this.dates.length&&S.length&&(this._trigger("clearDate"),this.element.change()),this.fill(),this},fillDow:function(){if(this.o.showWeekDays){var S=this.o.weekStart,_="<tr>";for(this.o.calendarWeeks&&(_+='<th class="cw">&#160;</th>');S<this.o.weekStart+7;)_+='<th class="dow',e.inArray(S,this.o.daysOfWeekDisabled)!==-1&&(_+=" disabled"),_+='">'+w[this.o.language].daysMin[S++%7]+"</th>";_+="</tr>",this.picker.find(".datepicker-days thead").append(_)}},fillMonths:function(){for(var S=this._utc_to_local(this.viewDate),_="",P,v=0;v<12;v++)P=S&&S.getMonth()===v?" focused":"",_+='<span class="month'+P+'">'+w[this.o.language].monthsShort[v]+"</span>";this.picker.find(".datepicker-months td").html(_)},setRange:function(S){!S||!S.length?delete this.range:this.range=e.map(S,function(_){return _.valueOf()}),this.fill()},getClassNames:function(S){var _=[],P=this.viewDate.getUTCFullYear(),v=this.viewDate.getUTCMonth(),y=r();return S.getUTCFullYear()<P||S.getUTCFullYear()===P&&S.getUTCMonth()<v?_.push("old"):(S.getUTCFullYear()>P||S.getUTCFullYear()===P&&S.getUTCMonth()>v)&&_.push("new"),this.focusDate&&S.valueOf()===this.focusDate.valueOf()&&_.push("focused"),this.o.todayHighlight&&i(S,y)&&_.push("today"),this.dates.contains(S)!==-1&&_.push("active"),this.dateWithinRange(S)||_.push("disabled"),this.dateIsDisabled(S)&&_.push("disabled","disabled-date"),e.inArray(S.getUTCDay(),this.o.daysOfWeekHighlighted)!==-1&&_.push("highlighted"),this.range&&(S>this.range[0]&&S<this.range[this.range.length-1]&&_.push("range"),e.inArray(S.valueOf(),this.range)!==-1&&_.push("selected"),S.valueOf()===this.range[0]&&_.push("range-start"),S.valueOf()===this.range[this.range.length-1]&&_.push("range-end")),_},_fill_yearsView:function(S,_,P,v,y,$,Z){for(var ce="",q=P/10,W=this.picker.find(S),O=Math.floor(v/P)*P,re=O+q*9,le=Math.floor(this.viewDate.getFullYear()/q)*q,ie=e.map(this.dates,function(G){return Math.floor(G.getUTCFullYear()/q)*q}),oe,Q,j,H=O-q;H<=re+q;H+=q)oe=[_],Q=null,H===O-q?oe.push("old"):H===re+q&&oe.push("new"),e.inArray(H,ie)!==-1&&oe.push("active"),(H<y||H>$)&&oe.push("disabled"),H===le&&oe.push("focused"),Z!==e.noop&&(j=Z(new Date(H,0,1)),j===t?j={}:typeof j=="boolean"?j={enabled:j}:typeof j=="string"&&(j={classes:j}),j.enabled===!1&&oe.push("disabled"),j.classes&&(oe=oe.concat(j.classes.split(/\s+/))),j.tooltip&&(Q=j.tooltip)),ce+='<span class="'+oe.join(" ")+'"'+(Q?' title="'+Q+'"':"")+">"+H+"</span>";W.find(".datepicker-switch").text(O+"-"+re),W.find("td").html(ce)},fill:function(){var S=new Date(this.viewDate),_=S.getUTCFullYear(),P=S.getUTCMonth(),v=this.o.startDate!==-1/0?this.o.startDate.getUTCFullYear():-1/0,y=this.o.startDate!==-1/0?this.o.startDate.getUTCMonth():-1/0,$=this.o.endDate!==1/0?this.o.endDate.getUTCFullYear():1/0,Z=this.o.endDate!==1/0?this.o.endDate.getUTCMonth():1/0,ce=w[this.o.language].today||w.en.today||"",q=w[this.o.language].clear||w.en.clear||"",W=w[this.o.language].titleFormat||w.en.titleFormat,O=r(),re=(this.o.todayBtn===!0||this.o.todayBtn==="linked")&&O>=this.o.startDate&&O<=this.o.endDate&&!this.weekOfDateIsDisabled(O),le,ie;if(!(isNaN(_)||isNaN(P))){this.picker.find(".datepicker-days .datepicker-switch").text(I.formatDate(S,W,this.o.language)),this.picker.find("tfoot .today").text(ce).css("display",re?"table-cell":"none"),this.picker.find("tfoot .clear").text(q).css("display",this.o.clearBtn===!0?"table-cell":"none"),this.picker.find("thead .datepicker-title").text(this.o.title).css("display",typeof this.o.title=="string"&&this.o.title!==""?"table-cell":"none"),this.updateNavArrows(),this.fillMonths();var oe=n(_,P,0),Q=oe.getUTCDate();oe.setUTCDate(Q-(oe.getUTCDay()-this.o.weekStart+7)%7);var j=new Date(oe);oe.getUTCFullYear()<100&&j.setUTCFullYear(oe.getUTCFullYear()),j.setUTCDate(j.getUTCDate()+42),j=j.valueOf();for(var H=[],G,fe;oe.valueOf()<j;){if(G=oe.getUTCDay(),G===this.o.weekStart&&(H.push("<tr>"),this.o.calendarWeeks)){var pe=new Date(+oe+(this.o.weekStart-G-7)%7*864e5),de=new Date(Number(pe)+(7+4-pe.getUTCDay())%7*864e5),Ae=new Date(Number(Ae=n(de.getUTCFullYear(),0,1))+(7+4-Ae.getUTCDay())%7*864e5),Ie=(de-Ae)/864e5/7+1;H.push('<td class="cw">'+Ie+"</td>")}fe=this.getClassNames(oe),fe.push("day");var ve=oe.getUTCDate();this.o.beforeShowDay!==e.noop&&(ie=this.o.beforeShowDay(this._utc_to_local(oe)),ie===t?ie={}:typeof ie=="boolean"?ie={enabled:ie}:typeof ie=="string"&&(ie={classes:ie}),ie.enabled===!1&&fe.push("disabled"),ie.classes&&(fe=fe.concat(ie.classes.split(/\s+/))),ie.tooltip&&(le=ie.tooltip),ie.content&&(ve=ie.content)),typeof e.uniqueSort=="function"?fe=e.uniqueSort(fe):fe=e.unique(fe),H.push('<td class="'+fe.join(" ")+'"'+(le?' title="'+le+'"':"")+' data-date="'+oe.getTime().toString()+'">'+ve+"</td>"),le=null,G===this.o.weekEnd&&H.push("</tr>"),oe.setUTCDate(oe.getUTCDate()+1)}this.picker.find(".datepicker-days tbody").html(H.join(""));var Te=w[this.o.language].monthsTitle||w.en.monthsTitle||"Months",Me=this.picker.find(".datepicker-months").find(".datepicker-switch").text(this.o.maxViewMode<2?Te:_).end().find("tbody span").removeClass("active");if(e.each(this.dates,function(at,ft){ft.getUTCFullYear()===_&&Me.eq(ft.getUTCMonth()).addClass("active")}),(_<v||_>$)&&Me.addClass("disabled"),_===v&&Me.slice(0,y).addClass("disabled"),_===$&&Me.slice(Z+1).addClass("disabled"),this.o.beforeShowMonth!==e.noop){var Ge=this;e.each(Me,function(at,ft){var V=new Date(_,at,1),Se=Ge.o.beforeShowMonth(V);Se===t?Se={}:typeof Se=="boolean"?Se={enabled:Se}:typeof Se=="string"&&(Se={classes:Se}),Se.enabled===!1&&!e(ft).hasClass("disabled")&&e(ft).addClass("disabled"),Se.classes&&e(ft).addClass(Se.classes),Se.tooltip&&e(ft).prop("title",Se.tooltip)})}this._fill_yearsView(".datepicker-years","year",10,_,v,$,this.o.beforeShowYear),this._fill_yearsView(".datepicker-decades","decade",100,_,v,$,this.o.beforeShowDecade),this._fill_yearsView(".datepicker-centuries","century",1e3,_,v,$,this.o.beforeShowCentury)}},updateNavArrows:function(){if(this._allow_update){var S=new Date(this.viewDate),_=S.getUTCFullYear(),P=S.getUTCMonth(),v=this.o.startDate!==-1/0?this.o.startDate.getUTCFullYear():-1/0,y=this.o.startDate!==-1/0?this.o.startDate.getUTCMonth():-1/0,$=this.o.endDate!==1/0?this.o.endDate.getUTCFullYear():1/0,Z=this.o.endDate!==1/0?this.o.endDate.getUTCMonth():1/0,ce,q,W=1;switch(this.viewMode){case 4:W*=10;case 3:W*=10;case 2:W*=10;case 1:ce=Math.floor(_/W)*W<=v,q=Math.floor(_/W)*W+W>$;break;case 0:ce=_<=v&&P<=y,q=_>=$&&P>=Z;break}this.picker.find(".prev").toggleClass("disabled",ce),this.picker.find(".next").toggleClass("disabled",q)}},click:function(S){S.preventDefault(),S.stopPropagation();var _,P,v,y,$;_=e(S.target),_.hasClass("datepicker-switch")&&this.viewMode!==this.o.maxViewMode&&this.setViewMode(this.viewMode+1),_.hasClass("today")&&!_.hasClass("day")&&(this.setViewMode(0),this._setDate(r(),this.o.todayBtn==="linked"?null:"view")),_.hasClass("clear")&&this.clearDates(),_.hasClass("disabled")||(_.hasClass("month")||_.hasClass("year")||_.hasClass("decade")||_.hasClass("century"))&&(this.viewDate.setUTCDate(1),v=1,this.viewMode===1?($=_.parent().find("span").index(_),y=this.viewDate.getUTCFullYear(),this.viewDate.setUTCMonth($)):($=0,y=Number(_.text()),this.viewDate.setUTCFullYear(y)),this._trigger(I.viewModes[this.viewMode-1].e,this.viewDate),this.viewMode===this.o.minViewMode?this._setDate(n(y,$,v)):(this.setViewMode(this.viewMode-1),this.fill())),this.picker.is(":visible")&&this._focused_from&&this._focused_from.focus(),delete this._focused_from},dayCellClick:function(S){var _=e(S.currentTarget),P=_.data("date"),v=new Date(P);this.o.updateViewDate&&(v.getUTCFullYear()!==this.viewDate.getUTCFullYear()&&this._trigger("changeYear",this.viewDate),v.getUTCMonth()!==this.viewDate.getUTCMonth()&&this._trigger("changeMonth",this.viewDate)),this._setDate(v)},navArrowsClick:function(S){var _=e(S.currentTarget),P=_.hasClass("prev")?-1:1;this.viewMode!==0&&(P*=I.viewModes[this.viewMode].navStep*12),this.viewDate=this.moveMonth(this.viewDate,P),this._trigger(I.viewModes[this.viewMode].e,this.viewDate),this.fill()},_toggle_multidate:function(S){var _=this.dates.contains(S);if(S||this.dates.clear(),_!==-1?(this.o.multidate===!0||this.o.multidate>1||this.o.toggleActive)&&this.dates.remove(_):this.o.multidate===!1?(this.dates.clear(),this.dates.push(S)):this.dates.push(S),typeof this.o.multidate=="number")for(;this.dates.length>this.o.multidate;)this.dates.remove(0)},_setDate:function(S,_){(!_||_==="date")&&this._toggle_multidate(S&&new Date(S)),(!_&&this.o.updateViewDate||_==="view")&&(this.viewDate=S&&new Date(S)),this.fill(),this.setValue(),(!_||_!=="view")&&this._trigger("changeDate"),this.inputField.trigger("change"),this.o.autoclose&&(!_||_==="date")&&this.hide()},moveDay:function(S,_){var P=new Date(S);return P.setUTCDate(S.getUTCDate()+_),P},moveWeek:function(S,_){return this.moveDay(S,_*7)},moveMonth:function(S,_){if(!s(S))return this.o.defaultViewDate;if(!_)return S;var P=new Date(S.valueOf()),v=P.getUTCDate(),y=P.getUTCMonth(),$=Math.abs(_),Z,ce;if(_=_>0?1:-1,$===1)ce=_===-1?function(){return P.getUTCMonth()===y}:function(){return P.getUTCMonth()!==Z},Z=y+_,P.setUTCMonth(Z),Z=(Z+12)%12;else{for(var q=0;q<$;q++)P=this.moveMonth(P,_);Z=P.getUTCMonth(),P.setUTCDate(v),ce=function(){return Z!==P.getUTCMonth()}}for(;ce();)P.setUTCDate(--v),P.setUTCMonth(Z);return P},moveYear:function(S,_){return this.moveMonth(S,_*12)},moveAvailableDate:function(S,_,P){do{if(S=this[P](S,_),!this.dateWithinRange(S))return!1;P="moveDay"}while(this.dateIsDisabled(S));return S},weekOfDateIsDisabled:function(S){return e.inArray(S.getUTCDay(),this.o.daysOfWeekDisabled)!==-1},dateIsDisabled:function(S){return this.weekOfDateIsDisabled(S)||e.grep(this.o.datesDisabled,function(_){return i(S,_)}).length>0},dateWithinRange:function(S){return S>=this.o.startDate&&S<=this.o.endDate},keydown:function(S){if(!this.picker.is(":visible")){(S.keyCode===40||S.keyCode===27)&&(this.show(),S.stopPropagation());return}var _=!1,P,v,y=this.focusDate||this.viewDate;switch(S.keyCode){case 27:this.focusDate?(this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.fill()):this.hide(),S.preventDefault(),S.stopPropagation();break;case 37:case 38:case 39:case 40:if(!this.o.keyboardNavigation||this.o.daysOfWeekDisabled.length===7)break;P=S.keyCode===37||S.keyCode===38?-1:1,this.viewMode===0?S.ctrlKey?(v=this.moveAvailableDate(y,P,"moveYear"),v&&this._trigger("changeYear",this.viewDate)):S.shiftKey?(v=this.moveAvailableDate(y,P,"moveMonth"),v&&this._trigger("changeMonth",this.viewDate)):S.keyCode===37||S.keyCode===39?v=this.moveAvailableDate(y,P,"moveDay"):this.weekOfDateIsDisabled(y)||(v=this.moveAvailableDate(y,P,"moveWeek")):this.viewMode===1?((S.keyCode===38||S.keyCode===40)&&(P=P*4),v=this.moveAvailableDate(y,P,"moveMonth")):this.viewMode===2&&((S.keyCode===38||S.keyCode===40)&&(P=P*4),v=this.moveAvailableDate(y,P,"moveYear")),v&&(this.focusDate=this.viewDate=v,this.setValue(),this.fill(),S.preventDefault());break;case 13:if(!this.o.forceParse)break;y=this.focusDate||this.dates.get(-1)||this.viewDate,this.o.keyboardNavigation&&(this._toggle_multidate(y),_=!0),this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.setValue(),this.fill(),this.picker.is(":visible")&&(S.preventDefault(),S.stopPropagation(),this.o.autoclose&&this.hide());break;case 9:this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.fill(),this.hide();break}_&&(this.dates.length?this._trigger("changeDate"):this._trigger("clearDate"),this.inputField.trigger("change"))},setViewMode:function(S){this.viewMode=S,this.picker.children("div").hide().filter(".datepicker-"+I.viewModes[this.viewMode].clsName).show(),this.updateNavArrows(),this._trigger("changeViewMode",new Date(this.viewDate))}};var c=function(S,_){e.data(S,"datepicker",this),this.element=e(S),this.inputs=e.map(_.inputs,function(P){return P.jquery?P[0]:P}),delete _.inputs,this.keepEmptyValues=_.keepEmptyValues,delete _.keepEmptyValues,b.call(e(this.inputs),_).on("changeDate",e.proxy(this.dateUpdated,this)),this.pickers=e.map(this.inputs,function(P){return e.data(P,"datepicker")}),this.updateDates()};c.prototype={updateDates:function(){this.dates=e.map(this.pickers,function(S){return S.getUTCDate()}),this.updateRanges()},updateRanges:function(){var S=e.map(this.dates,function(_){return _.valueOf()});e.each(this.pickers,function(_,P){P.setRange(S)})},clearDates:function(){e.each(this.pickers,function(S,_){_.clearDates()})},dateUpdated:function(S){if(!this.updating){this.updating=!0;var _=e.data(S.target,"datepicker");if(_!==t){var P=_.getUTCDate(),v=this.keepEmptyValues,y=e.inArray(S.target,this.inputs),$=y-1,Z=y+1,ce=this.inputs.length;if(y!==-1){if(e.each(this.pickers,function(q,W){!W.getUTCDate()&&(W===_||!v)&&W.setUTCDate(P)}),P<this.dates[$])for(;$>=0&&P<this.dates[$]&&(this.pickers[$].element.val()||"").length>0;)this.pickers[$--].setUTCDate(P);else if(P>this.dates[Z])for(;Z<ce&&P>this.dates[Z]&&(this.pickers[Z].element.val()||"").length>0;)this.pickers[Z++].setUTCDate(P);this.updateDates(),delete this.updating}}}},destroy:function(){e.map(this.pickers,function(S){S.destroy()}),e(this.inputs).off("changeDate",this.dateUpdated),delete this.element.data().datepicker},remove:a("destroy","Method `remove` is deprecated and will be removed in version 2.0. Use `destroy` instead")};function h(S,_){var P=e(S).data(),v={},y,$=new RegExp("^"+_.toLowerCase()+"([A-Z])");_=new RegExp("^"+_.toLowerCase());function Z(q,W){return W.toLowerCase()}for(var ce in P)_.test(ce)&&(y=ce.replace($,Z),v[y]=P[ce]);return v}function p(S){var _={};if(!(!w[S]&&(S=S.split("-")[0],!w[S]))){var P=w[S];return e.each(N,function(v,y){y in P&&(_[y]=P[y])}),_}}var E=e.fn.datepicker,b=function(S){var _=Array.apply(null,arguments);_.shift();var P;if(this.each(function(){var v=e(this),y=v.data("datepicker"),$=typeof S=="object"&&S;if(!y){var Z=h(this,"date"),ce=e.extend({},C,Z,$),q=p(ce.language),W=e.extend({},C,q,Z,$);v.hasClass("input-daterange")||W.inputs?(e.extend(W,{inputs:W.inputs||v.find("input").toArray()}),y=new c(this,W)):y=new l(this,W),v.data("datepicker",y)}typeof S=="string"&&typeof y[S]=="function"&&(P=y[S].apply(y,_))}),P===t||P instanceof l||P instanceof c)return this;if(this.length>1)throw new Error("Using only allowed for the collection of a single element ("+S+" function)");return P};e.fn.datepicker=b;var C=e.fn.datepicker.defaults={assumeNearbyYear:!1,autoclose:!1,beforeShowDay:e.noop,beforeShowMonth:e.noop,beforeShowYear:e.noop,beforeShowDecade:e.noop,beforeShowCentury:e.noop,calendarWeeks:!1,clearBtn:!1,toggleActive:!1,daysOfWeekDisabled:[],daysOfWeekHighlighted:[],datesDisabled:[],endDate:1/0,forceParse:!0,format:"mm/dd/yyyy",isInline:null,keepEmptyValues:!1,keyboardNavigation:!0,language:"en",minViewMode:0,maxViewMode:4,multidate:!1,multidateSeparator:",",orientation:"auto",rtl:!1,startDate:-1/0,startView:0,todayBtn:!1,todayHighlight:!1,updateViewDate:!0,weekStart:0,disableTouchKeyboard:!1,enableOnReadonly:!0,showOnFocus:!0,zIndexOffset:10,container:"body",immediateUpdates:!1,title:"",templates:{leftArrow:"&#x00AB;",rightArrow:"&#x00BB;"},showWeekDays:!0},N=e.fn.datepicker.locale_opts=["format","rtl","weekStart"];e.fn.datepicker.Constructor=l;var w=e.fn.datepicker.dates={en:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",clear:"Clear",titleFormat:"MM yyyy"}},I={viewModes:[{names:["days","month"],clsName:"days",e:"changeMonth"},{names:["months","year"],clsName:"months",e:"changeYear",navStep:1},{names:["years","decade"],clsName:"years",e:"changeDecade",navStep:10},{names:["decades","century"],clsName:"decades",e:"changeCentury",navStep:100},{names:["centuries","millennium"],clsName:"centuries",e:"changeMillennium",navStep:1e3}],validParts:/dd?|DD?|mm?|MM?|yy(?:yy)?/g,nonpunctuation:/[^ -\/:-@\u5e74\u6708\u65e5\[-`{-~\t\n\r]+/g,parseFormat:function(S){if(typeof S.toValue=="function"&&typeof S.toDisplay=="function")return S;var _=S.replace(this.validParts,"\0").split("\0"),P=S.match(this.validParts);if(!_||!_.length||!P||P.length===0)throw new Error("Invalid date format.");return{separators:_,parts:P}},parseDate:function(S,_,P,v){if(!S)return t;if(S instanceof Date)return S;if(typeof _=="string"&&(_=I.parseFormat(_)),_.toValue)return _.toValue(S,_,P);var y={d:"moveDay",m:"moveMonth",w:"moveWeek",y:"moveYear"},$={yesterday:"-1d",today:"+0d",tomorrow:"+1d"},Z,ce,q,W,O;if(S in $&&(S=$[S]),/^[\-+]\d+[dmwy]([\s,]+[\-+]\d+[dmwy])*$/i.test(S)){for(Z=S.match(/([\-+]\d+)([dmwy])/gi),S=new Date,W=0;W<Z.length;W++)ce=Z[W].match(/([\-+]\d+)([dmwy])/i),q=Number(ce[1]),O=y[ce[2].toLowerCase()],S=l.prototype[O](S,q);return l.prototype._zero_utc_time(S)}Z=S&&S.match(this.nonpunctuation)||[];function re(Ae,Ie){return Ie===!0&&(Ie=10),Ae<100&&(Ae+=2e3,Ae>new Date().getFullYear()+Ie&&(Ae-=100)),Ae}var le={},ie=["yyyy","yy","M","MM","m","mm","d","dd"],oe={yyyy:function(Ae,Ie){return Ae.setUTCFullYear(v?re(Ie,v):Ie)},m:function(Ae,Ie){if(isNaN(Ae))return Ae;for(Ie-=1;Ie<0;)Ie+=12;for(Ie%=12,Ae.setUTCMonth(Ie);Ae.getUTCMonth()!==Ie;)Ae.setUTCDate(Ae.getUTCDate()-1);return Ae},d:function(Ae,Ie){return Ae.setUTCDate(Ie)}},Q,j;oe.yy=oe.yyyy,oe.M=oe.MM=oe.mm=oe.m,oe.dd=oe.d,S=r();var H=_.parts.slice();Z.length!==H.length&&(H=e(H).filter(function(Ae,Ie){return e.inArray(Ie,ie)!==-1}).toArray());function G(){var Ae=this.slice(0,Z[W].length),Ie=Z[W].slice(0,Ae.length);return Ae.toLowerCase()===Ie.toLowerCase()}if(Z.length===H.length){var fe;for(W=0,fe=H.length;W<fe;W++){if(Q=parseInt(Z[W],10),ce=H[W],isNaN(Q))switch(ce){case"MM":j=e(w[P].months).filter(G),Q=e.inArray(j[0],w[P].months)+1;break;case"M":j=e(w[P].monthsShort).filter(G),Q=e.inArray(j[0],w[P].monthsShort)+1;break}le[ce]=Q}var pe,de;for(W=0;W<ie.length;W++)de=ie[W],de in le&&!isNaN(le[de])&&(pe=new Date(S),oe[de](pe,le[de]),isNaN(pe)||(S=pe))}return S},formatDate:function(S,_,P){if(!S)return"";if(typeof _=="string"&&(_=I.parseFormat(_)),_.toDisplay)return _.toDisplay(S,_,P);var v={d:S.getUTCDate(),D:w[P].daysShort[S.getUTCDay()],DD:w[P].days[S.getUTCDay()],m:S.getUTCMonth()+1,M:w[P].monthsShort[S.getUTCMonth()],MM:w[P].months[S.getUTCMonth()],yy:S.getUTCFullYear().toString().substring(2),yyyy:S.getUTCFullYear()};v.dd=(v.d<10?"0":"")+v.d,v.mm=(v.m<10?"0":"")+v.m,S=[];for(var y=e.extend([],_.separators),$=0,Z=_.parts.length;$<=Z;$++)y.length&&S.push(y.shift()),S.push(v[_.parts[$]]);return S.join("")},headTemplate:'<thead><tr><th colspan="7" class="datepicker-title"></th></tr><tr><th class="prev">'+C.templates.leftArrow+'</th><th colspan="5" class="datepicker-switch"></th><th class="next">'+C.templates.rightArrow+"</th></tr></thead>",contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>',footTemplate:'<tfoot><tr><th colspan="7" class="today"></th></tr><tr><th colspan="7" class="clear"></th></tr></tfoot>'};I.template='<div class="datepicker"><div class="datepicker-days"><table class="table-condensed">'+I.headTemplate+"<tbody></tbody>"+I.footTemplate+'</table></div><div class="datepicker-months"><table class="table-condensed">'+I.headTemplate+I.contTemplate+I.footTemplate+'</table></div><div class="datepicker-years"><table class="table-condensed">'+I.headTemplate+I.contTemplate+I.footTemplate+'</table></div><div class="datepicker-decades"><table class="table-condensed">'+I.headTemplate+I.contTemplate+I.footTemplate+'</table></div><div class="datepicker-centuries"><table class="table-condensed">'+I.headTemplate+I.contTemplate+I.footTemplate+"</table></div></div>",e.fn.datepicker.DPGlobal=I,e.fn.datepicker.noConflict=function(){return e.fn.datepicker=E,this},e.fn.datepicker.version="1.10.0",e.fn.datepicker.deprecated=function(S){var _=window.console;_&&_.warn&&_.warn("DEPRECATED: "+S)},e(document).on("focus.datepicker.data-api click.datepicker.data-api",'[data-provide="datepicker"]',function(S){var _=e(this);_.data("datepicker")||(S.preventDefault(),b.call(_,"show"))}),e(function(){b.call(e('[data-provide="datepicker-inline"]'))})})});var eT=$e((Nj,JS)=>{"use strict";function Sr(e,t,n){if(n===void 0)return e&&e.h5s&&e.h5s.data&&e.h5s.data[t];e.h5s=e.h5s||{},e.h5s.data=e.h5s.data||{},e.h5s.data[t]=n}function X8(e){e.h5s&&delete e.h5s.data}var ra=function(e,t){if(!(e instanceof NodeList||e instanceof HTMLCollection||e instanceof Array))throw new Error("You must provide a nodeList/HTMLCollection/Array of elements to be filtered.");return typeof t!="string"?Array.from(e):Array.from(e).filter(function(n){return n.nodeType===1&&n.matches(t)})},qu=new Map,Y8=function(){function e(){this._config=new Map,this._placeholder=void 0,this._data=new Map}return Object.defineProperty(e.prototype,"config",{get:function(){var t={};return this._config.forEach(function(n,r){t[r]=n}),t},set:function(t){if(typeof t!="object")throw new Error("You must provide a valid configuration object to the config setter.");var n=Object.assign({},t);this._config=new Map(Object.entries(n))},enumerable:!1,configurable:!0}),e.prototype.setConfig=function(t,n){if(!this._config.has(t))throw new Error("Trying to set invalid configuration item: "+t);this._config.set(t,n)},e.prototype.getConfig=function(t){if(!this._config.has(t))throw new Error("Invalid configuration item requested: "+t);return this._config.get(t)},Object.defineProperty(e.prototype,"placeholder",{get:function(){return this._placeholder},set:function(t){if(!(t instanceof HTMLElement)&&t!==null)throw new Error("A placeholder must be an html element or null.");this._placeholder=t},enumerable:!1,configurable:!0}),e.prototype.setData=function(t,n){if(typeof t!="string")throw new Error("The key must be a string.");this._data.set(t,n)},e.prototype.getData=function(t){if(typeof t!="string")throw new Error("The key must be a string.");return this._data.get(t)},e.prototype.deleteData=function(t){if(typeof t!="string")throw new Error("The key must be a string.");return this._data.delete(t)},e}(),ir=function(e){if(!(e instanceof HTMLElement))throw new Error("Please provide a sortable to the store function.");return qu.has(e)||qu.set(e,new Y8),qu.get(e)};function cs(e,t,n){if(e instanceof Array){for(var r=0;r<e.length;++r)cs(e[r],t,n);return}e.addEventListener(t,n),ir(e).setData("event"+t,n)}function Tr(e,t){if(e instanceof Array){for(var n=0;n<e.length;++n)Tr(e[n],t);return}e.removeEventListener(t,ir(e).getData("event"+t)),ir(e).deleteData("event"+t)}function Ks(e,t,n){if(e instanceof Array){for(var r=0;r<e.length;++r)Ks(e[r],t,n);return}e.setAttribute(t,n)}function Ol(e,t){if(e instanceof Array){for(var n=0;n<e.length;++n)Ol(e[n],t);return}e.removeAttribute(t)}var Xc=function(e){if(!e.parentElement||e.getClientRects().length===0)throw new Error("target element must be part of the dom");var t=e.getClientRects()[0];return{left:t.left+window.pageXOffset,right:t.right+window.pageXOffset,top:t.top+window.pageYOffset,bottom:t.bottom+window.pageYOffset}},Q8=function(e,t){t===void 0&&(t=0);var n;return function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];clearTimeout(n),n=setTimeout(function(){e.apply(void 0,r)},t)}},Rl=function(e,t){if(!(e instanceof HTMLElement)||!(t instanceof NodeList||t instanceof HTMLCollection||t instanceof Array))throw new Error("You must provide an element and a list of elements.");return Array.from(t).indexOf(e)},$S=function(e){if(!(e instanceof HTMLElement))throw new Error("Element is not a node element.");return e.parentNode!==null},ZS=function(e,t,n){if(!(e instanceof HTMLElement)||!(e.parentElement instanceof HTMLElement))throw new Error("target and element must be a node");e.parentElement.insertBefore(t,n==="before"?e:e.nextElementSibling)},J8=function(e,t){return ZS(e,t,"before")},eU=function(e,t){return ZS(e,t,"after")},tU=function(e,t,n){if(t===void 0&&(t=function(l,c){return l}),n===void 0&&(n=function(l){return l}),!(e instanceof HTMLElement)||!e.isSortable)throw new Error("You need to provide a sortableContainer to be serialized.");if(typeof t!="function"||typeof n!="function")throw new Error("You need to provide a valid serializer for items and the container.");var r=Sr(e,"opts"),i=r.items,a=ra(e.children,i),s=a.map(function(l){return{parent:e,node:l,html:l.outerHTML,index:Rl(l,a)}}),o={node:e,itemCount:s.length};return{container:n(o),items:s.map(function(l){return t(l,e)})}},nU=function(e,t,n){var r;if(n===void 0&&(n="sortable-placeholder"),!(e instanceof HTMLElement))throw new Error("You must provide a valid element as a sortable.");if(!(t instanceof HTMLElement)&&t!==void 0)throw new Error("You must provide a valid element as a placeholder or set ot to undefined.");return t===void 0&&(["UL","OL"].includes(e.tagName)?t=document.createElement("li"):["TABLE","TBODY"].includes(e.tagName)?(t=document.createElement("tr"),t.innerHTML='<td colspan="100"></td>'):t=document.createElement("div")),typeof n=="string"&&(r=t.classList).add.apply(r,n.split(" ")),t},jS=function(e){if(!(e instanceof HTMLElement))throw new Error("You must provide a valid dom element");var t=window.getComputedStyle(e);return t.getPropertyValue("box-sizing")==="border-box"?parseInt(t.getPropertyValue("height"),10):["height","padding-top","padding-bottom"].map(function(n){var r=parseInt(t.getPropertyValue(n),10);return isNaN(r)?0:r}).reduce(function(n,r){return n+r})},KS=function(e){if(!(e instanceof HTMLElement))throw new Error("You must provide a valid dom element");var t=window.getComputedStyle(e);return["width","padding-left","padding-right"].map(function(n){var r=parseInt(t.getPropertyValue(n),10);return isNaN(r)?0:r}).reduce(function(n,r){return n+r})},td=function(e,t){if(!(e instanceof Array))throw new Error("You must provide a Array of HTMLElements to be filtered.");return typeof t!="string"?e:e.filter(function(n){return n.querySelector(t)instanceof HTMLElement||n.shadowRoot&&n.shadowRoot.querySelector(t)instanceof HTMLElement}).map(function(n){return n.querySelector(t)||n.shadowRoot&&n.shadowRoot.querySelector(t)})},gv=function(e){return e.composedPath&&e.composedPath()[0]||e.target},rU=function(e,t,n){return{element:e,posX:n.pageX-t.left,posY:n.pageY-t.top}},iU=function(e,t,n){if(!(e instanceof Event))throw new Error("setDragImage requires a DragEvent as the first argument.");if(!(t instanceof HTMLElement))throw new Error("setDragImage requires the dragged element as the second argument.");if(n||(n=rU),e.dataTransfer&&e.dataTransfer.setDragImage){var r=Xc(t),i=n(t,r,e);if(!(i.element instanceof HTMLElement)||typeof i.posX!="number"||typeof i.posY!="number")throw new Error("The customDragImage function you provided must return and object with the properties element[string], posX[integer], posY[integer].");e.dataTransfer.effectAllowed="copyMove",e.dataTransfer.setData("text/plain",gv(e).id),e.dataTransfer.setDragImage(i.element,i.posX,i.posY)}},WS=function(e,t){if(e.isSortable===!0){var n=ir(e).getConfig("acceptFrom");if(n!==null&&n!==!1&&typeof n!="string")throw new Error('HTML5Sortable: Wrong argument, "acceptFrom" must be "null", "false", or a valid selector string.');if(n!==null)return n!==!1&&n.split(",").filter(function(r){return r.length>0&&t.matches(r)}).length>0;if(e===t)return!0;if(ir(e).getConfig("connectWith")!==void 0&&ir(e).getConfig("connectWith")!==null)return ir(e).getConfig("connectWith")===ir(t).getConfig("connectWith")}return!1},aU={items:null,connectWith:null,disableIEFix:null,acceptFrom:null,copy:!1,placeholder:null,placeholderClass:"sortable-placeholder",draggingClass:"sortable-dragging",hoverClass:!1,dropTargetContainerClass:!1,debounce:0,throttleTime:100,maxItems:0,itemSerializer:void 0,containerSerializer:void 0,customDragImage:null,orientation:"vertical"};function sU(e,t){var n=this;if(t===void 0&&(t=250),typeof e!="function")throw new Error("You must provide a function as the first argument for throttle.");if(typeof t!="number")throw new Error("You must provide a number as the second argument for throttle.");var r=null;return function(){for(var i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];var s=Date.now();(r===null||s-r>=t)&&(r=s,e.apply(n,i))}}var mv=function(e,t){if(typeof ir(e).getConfig("hoverClass")=="string"){var n=ir(e).getConfig("hoverClass").split(" ");t===!0?(cs(e,"mousemove",sU(function(r){r.buttons===0&&ra(e.children,ir(e).getConfig("items")).forEach(function(i){var a,s;i===r.target||i.contains(r.target)?(a=i.classList).add.apply(a,n):(s=i.classList).remove.apply(s,n)})},ir(e).getConfig("throttleTime"))),cs(e,"mouseleave",function(){ra(e.children,ir(e).getConfig("items")).forEach(function(r){var i;(i=r.classList).remove.apply(i,n)})})):(Tr(e,"mousemove"),Tr(e,"mouseleave"))}},mn,Gc,Zc,js,Uu,Zo,hv,Yc,dv,vv=function(e){Tr(e,"dragstart"),Tr(e,"dragend"),Tr(e,"dragover"),Tr(e,"dragenter"),Tr(e,"drop"),Tr(e,"mouseenter"),Tr(e,"mouseleave")},yv=function(e,t){e&&Tr(e,"dragleave"),t&&t!==e&&Tr(t,"dragleave")},oU=function(e,t){var n=e;return ir(t).getConfig("copy")===!0&&(n=e.cloneNode(!0),Ks(n,"aria-copied","true"),e.parentElement.appendChild(n),n.style.display="none",n.oldDisplay=e.style.display),n},XS=function(e){X8(e),Ol(e,"aria-dropeffect")},YS=function(e){Ol(e,"aria-grabbed"),Ol(e,"aria-copied"),Ol(e,"draggable"),Ol(e,"role")};function pv(e,t){if(t.composedPath)return t.composedPath().find(function(n){return n.isSortable});for(;e.isSortable!==!0;)e=e.parentElement;return e}function GS(e,t){var n=Sr(e,"opts"),r=ra(e.children,n.items),i=r.filter(function(a){return a.contains(t)||a.shadowRoot&&a.shadowRoot.contains(t)});return i.length>0?i[0]:t}var uU=function(e){var t=Sr(e,"opts")||{},n=ra(e.children,t.items),r=td(n,t.handle);mv(e,!1),Tr(e,"dragover"),Tr(e,"dragenter"),Tr(e,"dragstart"),Tr(e,"dragend"),Tr(e,"drop"),XS(e),Tr(r,"mousedown"),vv(n),YS(n),yv(js,Yc),e.isSortable=!1},QS=function(e){var t=Sr(e,"opts"),n=ra(e.children,t.items),r=td(n,t.handle);if(Ks(e,"aria-dropeffect","move"),Sr(e,"_disabled","false"),Ks(r,"draggable","true"),mv(e,!0),t.disableIEFix===!1){var i=(document||window.document).createElement("span");typeof i.dragDrop=="function"&&cs(r,"mousedown",function(){if(n.indexOf(this)!==-1)this.dragDrop();else{for(var a=this.parentElement;n.indexOf(a)===-1;)a=a.parentElement;a.dragDrop()}})}},lU=function(e){var t=Sr(e,"opts"),n=ra(e.children,t.items),r=td(n,t.handle);Ks(e,"aria-dropeffect","none"),Sr(e,"_disabled","true"),Ks(r,"draggable","false"),Tr(r,"mousedown"),mv(e,!1)},cU=function(e){var t=Sr(e,"opts"),n=ra(e.children,t.items),r=td(n,t.handle);Sr(e,"_disabled","false"),vv(n),yv(js,Yc),Tr(r,"mousedown"),Tr(e,"dragover"),Tr(e,"dragenter"),Tr(e,"drop")};function Bl(e,t){var n=String(t);return t=t||{},typeof e=="string"&&(e=document.querySelectorAll(e)),e instanceof HTMLElement&&(e=[e]),e=Array.prototype.slice.call(e),/serialize/.test(n)?e.map(function(r){var i=Sr(r,"opts");return tU(r,i.itemSerializer,i.containerSerializer)}):(e.forEach(function(r){if(/enable|disable|destroy/.test(n))return Bl[n](r);["connectWith","disableIEFix"].forEach(function(c){Object.prototype.hasOwnProperty.call(t,c)&&t[c]!==null&&console.warn('HTML5Sortable: You are using the deprecated configuration "'+c+'". This will be removed in an upcoming version, make sure to migrate to the new options when updating.')}),t=Object.assign({},aU,ir(r).config,t),ir(r).config=t,Sr(r,"opts",t),r.isSortable=!0,cU(r);var i=ra(r.children,t.items),a;if(t.placeholder!==null&&t.placeholder!==void 0){var s=document.createElement(r.tagName);t.placeholder instanceof HTMLElement?s.appendChild(t.placeholder):s.innerHTML=t.placeholder,a=s.children[0]}ir(r).placeholder=nU(r,a,t.placeholderClass),Sr(r,"items",t.items),t.acceptFrom?Sr(r,"acceptFrom",t.acceptFrom):t.connectWith&&Sr(r,"connectWith",t.connectWith),QS(r),Ks(i,"role","option"),Ks(i,"aria-grabbed","false"),cs(r,"dragstart",function(c){var h=gv(c);if(h.isSortable!==!0&&(c.stopImmediatePropagation(),!(t.handle&&!h.matches(t.handle)||h.getAttribute("draggable")==="false"))){var p=pv(h,c),E=GS(p,h);hv=ra(p.children,t.items),Uu=hv.indexOf(E),Zo=Rl(E,p.children),js=p,iU(c,E,t.customDragImage),Gc=jS(E),Zc=KS(E),E.classList.add(t.draggingClass),mn=oU(E,p),Ks(mn,"aria-grabbed","true"),p.dispatchEvent(new CustomEvent("sortstart",{detail:{origin:{elementIndex:Zo,index:Uu,container:js},item:mn,originalTarget:h}}))}}),cs(r,"dragenter",function(c){var h=gv(c),p=pv(h,c);p&&p!==Yc&&(dv=ra(p.children,Sr(p,"items")).filter(function(E){return E!==ir(r).placeholder}),t.dropTargetContainerClass&&p.classList.add(t.dropTargetContainerClass),p.dispatchEvent(new CustomEvent("sortenter",{detail:{origin:{elementIndex:Zo,index:Uu,container:js},destination:{container:p,itemsBeforeUpdate:dv},item:mn,originalTarget:h}})),cs(p,"dragleave",function(E){var b=E.relatedTarget||E.fromElement;E.currentTarget.contains(b)||(t.dropTargetContainerClass&&p.classList.remove(t.dropTargetContainerClass),p.dispatchEvent(new CustomEvent("sortleave",{detail:{origin:{elementIndex:Zo,index:Uu,container:p},item:mn,originalTarget:h}})))})),Yc=p}),cs(r,"dragend",function(c){if(mn){mn.classList.remove(t.draggingClass),Ks(mn,"aria-grabbed","false"),mn.getAttribute("aria-copied")==="true"&&Sr(mn,"dropped")!=="true"&&mn.remove(),mn.oldDisplay!==void 0&&(mn.style.display=mn.oldDisplay,delete mn.oldDisplay);var h=Array.from(qu.values()).map(function(p){return p.placeholder}).filter(function(p){return p instanceof HTMLElement}).filter($S)[0];h&&h.remove(),r.dispatchEvent(new CustomEvent("sortstop",{detail:{origin:{elementIndex:Zo,index:Uu,container:js},item:mn}})),Yc=null,mn=null,Gc=null,Zc=null}}),cs(r,"drop",function(c){if(WS(r,mn.parentElement)){c.preventDefault(),c.stopPropagation(),Sr(mn,"dropped","true");var h=Array.from(qu.values()).map(function(I){return I.placeholder}).filter(function(I){return I instanceof HTMLElement}).filter($S)[0];if(h)h.replaceWith(mn),mn.oldDisplay!==void 0&&(mn.style.display=mn.oldDisplay,delete mn.oldDisplay);else{Sr(mn,"dropped","false");return}r.dispatchEvent(new CustomEvent("sortstop",{detail:{origin:{elementIndex:Zo,index:Uu,container:js},item:mn}}));var p=ir(r).placeholder,E=ra(js.children,t.items).filter(function(I){return I!==p}),b=this.isSortable===!0?this:this.parentElement,C=ra(b.children,Sr(b,"items")).filter(function(I){return I!==p}),N=Rl(mn,Array.from(mn.parentElement.children).filter(function(I){return I!==p})),w=Rl(mn,C);t.dropTargetContainerClass&&b.classList.remove(t.dropTargetContainerClass),(Zo!==N||js!==b)&&r.dispatchEvent(new CustomEvent("sortupdate",{detail:{origin:{elementIndex:Zo,index:Uu,container:js,itemsBeforeUpdate:hv,items:E},destination:{index:w,elementIndex:N,container:b,itemsBeforeUpdate:dv,items:C},item:mn}}))}});var o=Q8(function(c,h,p,E){if(mn)if(t.forcePlaceholderSize&&(ir(c).placeholder.style.height=Gc+"px",ir(c).placeholder.style.width=Zc+"px"),Array.from(c.children).indexOf(h)>-1){var b=jS(h),C=KS(h),N=Rl(ir(c).placeholder,h.parentElement.children),w=Rl(h,h.parentElement.children);if(b>Gc||C>Zc){var I=b-Gc,S=C-Zc,_=Xc(h).top,P=Xc(h).left;if(N<w&&(t.orientation==="vertical"&&E<_||t.orientation==="horizontal"&&p<P)||N>w&&(t.orientation==="vertical"&&E>_+b-I||t.orientation==="horizontal"&&p>P+C-S))return}mn.oldDisplay===void 0&&(mn.oldDisplay=mn.style.display),mn.style.display!=="none"&&(mn.style.display="none");var v=!1;try{var y=Xc(h).top+h.offsetHeight/2,$=Xc(h).left+h.offsetWidth/2;v=t.orientation==="vertical"&&E>=y||t.orientation==="horizontal"&&p>=$}catch{v=N<w}v?eU(h,ir(c).placeholder):J8(h,ir(c).placeholder),Array.from(qu.values()).filter(function(ce){return ce.placeholder!==void 0}).forEach(function(ce){ce.placeholder!==ir(c).placeholder&&ce.placeholder.remove()})}else{var Z=Array.from(qu.values()).filter(function(ce){return ce.placeholder!==void 0}).map(function(ce){return ce.placeholder});Z.indexOf(h)===-1&&c===h&&!ra(h.children,t.items).length&&(Z.forEach(function(ce){return ce.remove()}),h.appendChild(ir(c).placeholder))}},t.debounce),l=function(c){var h=c.target,p=h.isSortable===!0?h:pv(h,c);if(h=GS(p,h),!(!mn||!WS(p,mn.parentElement)||Sr(p,"_disabled")==="true")){var E=Sr(p,"opts");parseInt(E.maxItems)&&ra(p.children,Sr(p,"items")).length>parseInt(E.maxItems)&&mn.parentElement!==p||(c.preventDefault(),c.stopPropagation(),c.dataTransfer.dropEffect=ir(p).getConfig("copy")===!0?"copy":"move",o(p,h,c.pageX,c.pageY))}};cs(i.concat(r),"dragover",l),cs(i.concat(r),"dragenter",l)}),e)}Bl.destroy=function(e){uU(e)};Bl.enable=function(e){QS(e)};Bl.disable=function(e){lU(e)};Bl.__testing={data:Sr,removeItemEvents:vv,removeItemData:YS,removeSortableData:XS,removeContainerEvents:yv};JS.exports=Bl});var AT=$e((kT,Hv)=>{(function(e){typeof kT=="object"&&typeof Hv<"u"?Hv.exports=e():typeof define=="function"&&define.amd?define([],e):(typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this).JSZip=e()})(function(){return function e(t,n,r){function i(o,l){if(!n[o]){if(!t[o]){var c=typeof wr=="function"&&wr;if(!l&&c)return c(o,!0);if(a)return a(o,!0);var h=new Error("Cannot find module '"+o+"'");throw h.code="MODULE_NOT_FOUND",h}var p=n[o]={exports:{}};t[o][0].call(p.exports,function(E){var b=t[o][1][E];return i(b||E)},p,p.exports,e,t,n,r)}return n[o].exports}for(var a=typeof wr=="function"&&wr,s=0;s<r.length;s++)i(r[s]);return i}({1:[function(e,t,n){"use strict";var r=e("./utils"),i=e("./support"),a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";n.encode=function(s){for(var o,l,c,h,p,E,b,C=[],N=0,w=s.length,I=w,S=r.getTypeOf(s)!=="string";N<s.length;)I=w-N,c=S?(o=s[N++],l=N<w?s[N++]:0,N<w?s[N++]:0):(o=s.charCodeAt(N++),l=N<w?s.charCodeAt(N++):0,N<w?s.charCodeAt(N++):0),h=o>>2,p=(3&o)<<4|l>>4,E=1<I?(15&l)<<2|c>>6:64,b=2<I?63&c:64,C.push(a.charAt(h)+a.charAt(p)+a.charAt(E)+a.charAt(b));return C.join("")},n.decode=function(s){var o,l,c,h,p,E,b=0,C=0,N="data:";if(s.substr(0,N.length)===N)throw new Error("Invalid base64 input, it looks like a data url.");var w,I=3*(s=s.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(s.charAt(s.length-1)===a.charAt(64)&&I--,s.charAt(s.length-2)===a.charAt(64)&&I--,I%1!=0)throw new Error("Invalid base64 input, bad content length.");for(w=i.uint8array?new Uint8Array(0|I):new Array(0|I);b<s.length;)o=a.indexOf(s.charAt(b++))<<2|(h=a.indexOf(s.charAt(b++)))>>4,l=(15&h)<<4|(p=a.indexOf(s.charAt(b++)))>>2,c=(3&p)<<6|(E=a.indexOf(s.charAt(b++))),w[C++]=o,p!==64&&(w[C++]=l),E!==64&&(w[C++]=c);return w}},{"./support":30,"./utils":32}],2:[function(e,t,n){"use strict";var r=e("./external"),i=e("./stream/DataWorker"),a=e("./stream/Crc32Probe"),s=e("./stream/DataLengthProbe");function o(l,c,h,p,E){this.compressedSize=l,this.uncompressedSize=c,this.crc32=h,this.compression=p,this.compressedContent=E}o.prototype={getContentWorker:function(){var l=new i(r.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new s("data_length")),c=this;return l.on("end",function(){if(this.streamInfo.data_length!==c.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),l},getCompressedWorker:function(){return new i(r.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},o.createWorkerFrom=function(l,c,h){return l.pipe(new a).pipe(new s("uncompressedSize")).pipe(c.compressWorker(h)).pipe(new s("compressedSize")).withStreamInfo("compression",c)},t.exports=o},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(e,t,n){"use strict";var r=e("./stream/GenericWorker");n.STORE={magic:"\0\0",compressWorker:function(){return new r("STORE compression")},uncompressWorker:function(){return new r("STORE decompression")}},n.DEFLATE=e("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(e,t,n){"use strict";var r=e("./utils"),i=function(){for(var a,s=[],o=0;o<256;o++){a=o;for(var l=0;l<8;l++)a=1&a?3988292384^a>>>1:a>>>1;s[o]=a}return s}();t.exports=function(a,s){return a!==void 0&&a.length?r.getTypeOf(a)!=="string"?function(o,l,c,h){var p=i,E=h+c;o^=-1;for(var b=h;b<E;b++)o=o>>>8^p[255&(o^l[b])];return-1^o}(0|s,a,a.length,0):function(o,l,c,h){var p=i,E=h+c;o^=-1;for(var b=h;b<E;b++)o=o>>>8^p[255&(o^l.charCodeAt(b))];return-1^o}(0|s,a,a.length,0):0}},{"./utils":32}],5:[function(e,t,n){"use strict";n.base64=!1,n.binary=!1,n.dir=!1,n.createFolders=!0,n.date=null,n.compression=null,n.compressionOptions=null,n.comment=null,n.unixPermissions=null,n.dosPermissions=null},{}],6:[function(e,t,n){"use strict";var r=null;r=typeof Promise<"u"?Promise:e("lie"),t.exports={Promise:r}},{lie:37}],7:[function(e,t,n){"use strict";var r=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",i=e("pako"),a=e("./utils"),s=e("./stream/GenericWorker"),o=r?"uint8array":"array";function l(c,h){s.call(this,"FlateWorker/"+c),this._pako=null,this._pakoAction=c,this._pakoOptions=h,this.meta={}}n.magic="\b\0",a.inherits(l,s),l.prototype.processChunk=function(c){this.meta=c.meta,this._pako===null&&this._createPako(),this._pako.push(a.transformTo(o,c.data),!1)},l.prototype.flush=function(){s.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},l.prototype.cleanUp=function(){s.prototype.cleanUp.call(this),this._pako=null},l.prototype._createPako=function(){this._pako=new i[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var c=this;this._pako.onData=function(h){c.push({data:h,meta:c.meta})}},n.compressWorker=function(c){return new l("Deflate",c)},n.uncompressWorker=function(){return new l("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(e,t,n){"use strict";function r(p,E){var b,C="";for(b=0;b<E;b++)C+=String.fromCharCode(255&p),p>>>=8;return C}function i(p,E,b,C,N,w){var I,S,_=p.file,P=p.compression,v=w!==o.utf8encode,y=a.transformTo("string",w(_.name)),$=a.transformTo("string",o.utf8encode(_.name)),Z=_.comment,ce=a.transformTo("string",w(Z)),q=a.transformTo("string",o.utf8encode(Z)),W=$.length!==_.name.length,O=q.length!==Z.length,re="",le="",ie="",oe=_.dir,Q=_.date,j={crc32:0,compressedSize:0,uncompressedSize:0};E&&!b||(j.crc32=p.crc32,j.compressedSize=p.compressedSize,j.uncompressedSize=p.uncompressedSize);var H=0;E&&(H|=8),v||!W&&!O||(H|=2048);var G=0,fe=0;oe&&(G|=16),N==="UNIX"?(fe=798,G|=function(de,Ae){var Ie=de;return de||(Ie=Ae?16893:33204),(65535&Ie)<<16}(_.unixPermissions,oe)):(fe=20,G|=function(de){return 63&(de||0)}(_.dosPermissions)),I=Q.getUTCHours(),I<<=6,I|=Q.getUTCMinutes(),I<<=5,I|=Q.getUTCSeconds()/2,S=Q.getUTCFullYear()-1980,S<<=4,S|=Q.getUTCMonth()+1,S<<=5,S|=Q.getUTCDate(),W&&(le=r(1,1)+r(l(y),4)+$,re+="up"+r(le.length,2)+le),O&&(ie=r(1,1)+r(l(ce),4)+q,re+="uc"+r(ie.length,2)+ie);var pe="";return pe+=`
\0`,pe+=r(H,2),pe+=P.magic,pe+=r(I,2),pe+=r(S,2),pe+=r(j.crc32,4),pe+=r(j.compressedSize,4),pe+=r(j.uncompressedSize,4),pe+=r(y.length,2),pe+=r(re.length,2),{fileRecord:c.LOCAL_FILE_HEADER+pe+y+re,dirRecord:c.CENTRAL_FILE_HEADER+r(fe,2)+pe+r(ce.length,2)+"\0\0\0\0"+r(G,4)+r(C,4)+y+re+ce}}var a=e("../utils"),s=e("../stream/GenericWorker"),o=e("../utf8"),l=e("../crc32"),c=e("../signature");function h(p,E,b,C){s.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=E,this.zipPlatform=b,this.encodeFileName=C,this.streamFiles=p,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}a.inherits(h,s),h.prototype.push=function(p){var E=p.meta.percent||0,b=this.entriesCount,C=this._sources.length;this.accumulate?this.contentBuffer.push(p):(this.bytesWritten+=p.data.length,s.prototype.push.call(this,{data:p.data,meta:{currentFile:this.currentFile,percent:b?(E+100*(b-C-1))/b:100}}))},h.prototype.openedSource=function(p){this.currentSourceOffset=this.bytesWritten,this.currentFile=p.file.name;var E=this.streamFiles&&!p.file.dir;if(E){var b=i(p,E,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:b.fileRecord,meta:{percent:0}})}else this.accumulate=!0},h.prototype.closedSource=function(p){this.accumulate=!1;var E=this.streamFiles&&!p.file.dir,b=i(p,E,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(b.dirRecord),E)this.push({data:function(C){return c.DATA_DESCRIPTOR+r(C.crc32,4)+r(C.compressedSize,4)+r(C.uncompressedSize,4)}(p),meta:{percent:100}});else for(this.push({data:b.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},h.prototype.flush=function(){for(var p=this.bytesWritten,E=0;E<this.dirRecords.length;E++)this.push({data:this.dirRecords[E],meta:{percent:100}});var b=this.bytesWritten-p,C=function(N,w,I,S,_){var P=a.transformTo("string",_(S));return c.CENTRAL_DIRECTORY_END+"\0\0\0\0"+r(N,2)+r(N,2)+r(w,4)+r(I,4)+r(P.length,2)+P}(this.dirRecords.length,b,p,this.zipComment,this.encodeFileName);this.push({data:C,meta:{percent:100}})},h.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},h.prototype.registerPrevious=function(p){this._sources.push(p);var E=this;return p.on("data",function(b){E.processChunk(b)}),p.on("end",function(){E.closedSource(E.previous.streamInfo),E._sources.length?E.prepareNextSource():E.end()}),p.on("error",function(b){E.error(b)}),this},h.prototype.resume=function(){return!!s.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},h.prototype.error=function(p){var E=this._sources;if(!s.prototype.error.call(this,p))return!1;for(var b=0;b<E.length;b++)try{E[b].error(p)}catch{}return!0},h.prototype.lock=function(){s.prototype.lock.call(this);for(var p=this._sources,E=0;E<p.length;E++)p[E].lock()},t.exports=h},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(e,t,n){"use strict";var r=e("../compressions"),i=e("./ZipFileWorker");n.generateWorker=function(a,s,o){var l=new i(s.streamFiles,o,s.platform,s.encodeFileName),c=0;try{a.forEach(function(h,p){c++;var E=function(w,I){var S=w||I,_=r[S];if(!_)throw new Error(S+" is not a valid compression method !");return _}(p.options.compression,s.compression),b=p.options.compressionOptions||s.compressionOptions||{},C=p.dir,N=p.date;p._compressWorker(E,b).withStreamInfo("file",{name:h,dir:C,date:N,comment:p.comment||"",unixPermissions:p.unixPermissions,dosPermissions:p.dosPermissions}).pipe(l)}),l.entriesCount=c}catch(h){l.error(h)}return l}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(e,t,n){"use strict";function r(){if(!(this instanceof r))return new r;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var i=new r;for(var a in this)typeof this[a]!="function"&&(i[a]=this[a]);return i}}(r.prototype=e("./object")).loadAsync=e("./load"),r.support=e("./support"),r.defaults=e("./defaults"),r.version="3.10.1",r.loadAsync=function(i,a){return new r().loadAsync(i,a)},r.external=e("./external"),t.exports=r},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(e,t,n){"use strict";var r=e("./utils"),i=e("./external"),a=e("./utf8"),s=e("./zipEntries"),o=e("./stream/Crc32Probe"),l=e("./nodejsUtils");function c(h){return new i.Promise(function(p,E){var b=h.decompressed.getContentWorker().pipe(new o);b.on("error",function(C){E(C)}).on("end",function(){b.streamInfo.crc32!==h.decompressed.crc32?E(new Error("Corrupted zip : CRC32 mismatch")):p()}).resume()})}t.exports=function(h,p){var E=this;return p=r.extend(p||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:a.utf8decode}),l.isNode&&l.isStream(h)?i.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):r.prepareContent("the loaded zip file",h,!0,p.optimizedBinaryString,p.base64).then(function(b){var C=new s(p);return C.load(b),C}).then(function(b){var C=[i.Promise.resolve(b)],N=b.files;if(p.checkCRC32)for(var w=0;w<N.length;w++)C.push(c(N[w]));return i.Promise.all(C)}).then(function(b){for(var C=b.shift(),N=C.files,w=0;w<N.length;w++){var I=N[w],S=I.fileNameStr,_=r.resolve(I.fileNameStr);E.file(_,I.decompressed,{binary:!0,optimizedBinaryString:!0,date:I.date,dir:I.dir,comment:I.fileCommentStr.length?I.fileCommentStr:null,unixPermissions:I.unixPermissions,dosPermissions:I.dosPermissions,createFolders:p.createFolders}),I.dir||(E.file(_).unsafeOriginalName=S)}return C.zipComment.length&&(E.comment=C.zipComment),E})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(e,t,n){"use strict";var r=e("../utils"),i=e("../stream/GenericWorker");function a(s,o){i.call(this,"Nodejs stream input adapter for "+s),this._upstreamEnded=!1,this._bindStream(o)}r.inherits(a,i),a.prototype._bindStream=function(s){var o=this;(this._stream=s).pause(),s.on("data",function(l){o.push({data:l,meta:{percent:0}})}).on("error",function(l){o.isPaused?this.generatedError=l:o.error(l)}).on("end",function(){o.isPaused?o._upstreamEnded=!0:o.end()})},a.prototype.pause=function(){return!!i.prototype.pause.call(this)&&(this._stream.pause(),!0)},a.prototype.resume=function(){return!!i.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},t.exports=a},{"../stream/GenericWorker":28,"../utils":32}],13:[function(e,t,n){"use strict";var r=e("readable-stream").Readable;function i(a,s,o){r.call(this,s),this._helper=a;var l=this;a.on("data",function(c,h){l.push(c)||l._helper.pause(),o&&o(h)}).on("error",function(c){l.emit("error",c)}).on("end",function(){l.push(null)})}e("../utils").inherits(i,r),i.prototype._read=function(){this._helper.resume()},t.exports=i},{"../utils":32,"readable-stream":16}],14:[function(e,t,n){"use strict";t.exports={isNode:typeof Buffer<"u",newBufferFrom:function(r,i){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(r,i);if(typeof r=="number")throw new Error('The "data" argument must not be a number');return new Buffer(r,i)},allocBuffer:function(r){if(Buffer.alloc)return Buffer.alloc(r);var i=new Buffer(r);return i.fill(0),i},isBuffer:function(r){return Buffer.isBuffer(r)},isStream:function(r){return r&&typeof r.on=="function"&&typeof r.pause=="function"&&typeof r.resume=="function"}}},{}],15:[function(e,t,n){"use strict";function r(_,P,v){var y,$=a.getTypeOf(P),Z=a.extend(v||{},l);Z.date=Z.date||new Date,Z.compression!==null&&(Z.compression=Z.compression.toUpperCase()),typeof Z.unixPermissions=="string"&&(Z.unixPermissions=parseInt(Z.unixPermissions,8)),Z.unixPermissions&&16384&Z.unixPermissions&&(Z.dir=!0),Z.dosPermissions&&16&Z.dosPermissions&&(Z.dir=!0),Z.dir&&(_=N(_)),Z.createFolders&&(y=C(_))&&w.call(this,y,!0);var ce=$==="string"&&Z.binary===!1&&Z.base64===!1;v&&v.binary!==void 0||(Z.binary=!ce),(P instanceof c&&P.uncompressedSize===0||Z.dir||!P||P.length===0)&&(Z.base64=!1,Z.binary=!0,P="",Z.compression="STORE",$="string");var q=null;q=P instanceof c||P instanceof s?P:E.isNode&&E.isStream(P)?new b(_,P):a.prepareContent(_,P,Z.binary,Z.optimizedBinaryString,Z.base64);var W=new h(_,q,Z);this.files[_]=W}var i=e("./utf8"),a=e("./utils"),s=e("./stream/GenericWorker"),o=e("./stream/StreamHelper"),l=e("./defaults"),c=e("./compressedObject"),h=e("./zipObject"),p=e("./generate"),E=e("./nodejsUtils"),b=e("./nodejs/NodejsStreamInputAdapter"),C=function(_){_.slice(-1)==="/"&&(_=_.substring(0,_.length-1));var P=_.lastIndexOf("/");return 0<P?_.substring(0,P):""},N=function(_){return _.slice(-1)!=="/"&&(_+="/"),_},w=function(_,P){return P=P!==void 0?P:l.createFolders,_=N(_),this.files[_]||r.call(this,_,null,{dir:!0,createFolders:P}),this.files[_]};function I(_){return Object.prototype.toString.call(_)==="[object RegExp]"}var S={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(_){var P,v,y;for(P in this.files)y=this.files[P],(v=P.slice(this.root.length,P.length))&&P.slice(0,this.root.length)===this.root&&_(v,y)},filter:function(_){var P=[];return this.forEach(function(v,y){_(v,y)&&P.push(y)}),P},file:function(_,P,v){if(arguments.length!==1)return _=this.root+_,r.call(this,_,P,v),this;if(I(_)){var y=_;return this.filter(function(Z,ce){return!ce.dir&&y.test(Z)})}var $=this.files[this.root+_];return $&&!$.dir?$:null},folder:function(_){if(!_)return this;if(I(_))return this.filter(function($,Z){return Z.dir&&_.test($)});var P=this.root+_,v=w.call(this,P),y=this.clone();return y.root=v.name,y},remove:function(_){_=this.root+_;var P=this.files[_];if(P||(_.slice(-1)!=="/"&&(_+="/"),P=this.files[_]),P&&!P.dir)delete this.files[_];else for(var v=this.filter(function($,Z){return Z.name.slice(0,_.length)===_}),y=0;y<v.length;y++)delete this.files[v[y].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(_){var P,v={};try{if((v=a.extend(_||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:i.utf8encode})).type=v.type.toLowerCase(),v.compression=v.compression.toUpperCase(),v.type==="binarystring"&&(v.type="string"),!v.type)throw new Error("No output type specified.");a.checkSupport(v.type),v.platform!=="darwin"&&v.platform!=="freebsd"&&v.platform!=="linux"&&v.platform!=="sunos"||(v.platform="UNIX"),v.platform==="win32"&&(v.platform="DOS");var y=v.comment||this.comment||"";P=p.generateWorker(this,v,y)}catch($){(P=new s("error")).error($)}return new o(P,v.type||"string",v.mimeType)},generateAsync:function(_,P){return this.generateInternalStream(_).accumulate(P)},generateNodeStream:function(_,P){return(_=_||{}).type||(_.type="nodebuffer"),this.generateInternalStream(_).toNodejsStream(P)}};t.exports=S},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(e,t,n){"use strict";t.exports=e("stream")},{stream:void 0}],17:[function(e,t,n){"use strict";var r=e("./DataReader");function i(a){r.call(this,a);for(var s=0;s<this.data.length;s++)a[s]=255&a[s]}e("../utils").inherits(i,r),i.prototype.byteAt=function(a){return this.data[this.zero+a]},i.prototype.lastIndexOfSignature=function(a){for(var s=a.charCodeAt(0),o=a.charCodeAt(1),l=a.charCodeAt(2),c=a.charCodeAt(3),h=this.length-4;0<=h;--h)if(this.data[h]===s&&this.data[h+1]===o&&this.data[h+2]===l&&this.data[h+3]===c)return h-this.zero;return-1},i.prototype.readAndCheckSignature=function(a){var s=a.charCodeAt(0),o=a.charCodeAt(1),l=a.charCodeAt(2),c=a.charCodeAt(3),h=this.readData(4);return s===h[0]&&o===h[1]&&l===h[2]&&c===h[3]},i.prototype.readData=function(a){if(this.checkOffset(a),a===0)return[];var s=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,s},t.exports=i},{"../utils":32,"./DataReader":18}],18:[function(e,t,n){"use strict";var r=e("../utils");function i(a){this.data=a,this.length=a.length,this.index=0,this.zero=0}i.prototype={checkOffset:function(a){this.checkIndex(this.index+a)},checkIndex:function(a){if(this.length<this.zero+a||a<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+a+"). Corrupted zip ?")},setIndex:function(a){this.checkIndex(a),this.index=a},skip:function(a){this.setIndex(this.index+a)},byteAt:function(){},readInt:function(a){var s,o=0;for(this.checkOffset(a),s=this.index+a-1;s>=this.index;s--)o=(o<<8)+this.byteAt(s);return this.index+=a,o},readString:function(a){return r.transformTo("string",this.readData(a))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var a=this.readInt(4);return new Date(Date.UTC(1980+(a>>25&127),(a>>21&15)-1,a>>16&31,a>>11&31,a>>5&63,(31&a)<<1))}},t.exports=i},{"../utils":32}],19:[function(e,t,n){"use strict";var r=e("./Uint8ArrayReader");function i(a){r.call(this,a)}e("../utils").inherits(i,r),i.prototype.readData=function(a){this.checkOffset(a);var s=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,s},t.exports=i},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(e,t,n){"use strict";var r=e("./DataReader");function i(a){r.call(this,a)}e("../utils").inherits(i,r),i.prototype.byteAt=function(a){return this.data.charCodeAt(this.zero+a)},i.prototype.lastIndexOfSignature=function(a){return this.data.lastIndexOf(a)-this.zero},i.prototype.readAndCheckSignature=function(a){return a===this.readData(4)},i.prototype.readData=function(a){this.checkOffset(a);var s=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,s},t.exports=i},{"../utils":32,"./DataReader":18}],21:[function(e,t,n){"use strict";var r=e("./ArrayReader");function i(a){r.call(this,a)}e("../utils").inherits(i,r),i.prototype.readData=function(a){if(this.checkOffset(a),a===0)return new Uint8Array(0);var s=this.data.subarray(this.zero+this.index,this.zero+this.index+a);return this.index+=a,s},t.exports=i},{"../utils":32,"./ArrayReader":17}],22:[function(e,t,n){"use strict";var r=e("../utils"),i=e("../support"),a=e("./ArrayReader"),s=e("./StringReader"),o=e("./NodeBufferReader"),l=e("./Uint8ArrayReader");t.exports=function(c){var h=r.getTypeOf(c);return r.checkSupport(h),h!=="string"||i.uint8array?h==="nodebuffer"?new o(c):i.uint8array?new l(r.transformTo("uint8array",c)):new a(r.transformTo("array",c)):new s(c)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(e,t,n){"use strict";n.LOCAL_FILE_HEADER="PK",n.CENTRAL_FILE_HEADER="PK",n.CENTRAL_DIRECTORY_END="PK",n.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",n.ZIP64_CENTRAL_DIRECTORY_END="PK",n.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(e,t,n){"use strict";var r=e("./GenericWorker"),i=e("../utils");function a(s){r.call(this,"ConvertWorker to "+s),this.destType=s}i.inherits(a,r),a.prototype.processChunk=function(s){this.push({data:i.transformTo(this.destType,s.data),meta:s.meta})},t.exports=a},{"../utils":32,"./GenericWorker":28}],25:[function(e,t,n){"use strict";var r=e("./GenericWorker"),i=e("../crc32");function a(){r.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}e("../utils").inherits(a,r),a.prototype.processChunk=function(s){this.streamInfo.crc32=i(s.data,this.streamInfo.crc32||0),this.push(s)},t.exports=a},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(e,t,n){"use strict";var r=e("../utils"),i=e("./GenericWorker");function a(s){i.call(this,"DataLengthProbe for "+s),this.propName=s,this.withStreamInfo(s,0)}r.inherits(a,i),a.prototype.processChunk=function(s){if(s){var o=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=o+s.data.length}i.prototype.processChunk.call(this,s)},t.exports=a},{"../utils":32,"./GenericWorker":28}],27:[function(e,t,n){"use strict";var r=e("../utils"),i=e("./GenericWorker");function a(s){i.call(this,"DataWorker");var o=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,s.then(function(l){o.dataIsReady=!0,o.data=l,o.max=l&&l.length||0,o.type=r.getTypeOf(l),o.isPaused||o._tickAndRepeat()},function(l){o.error(l)})}r.inherits(a,i),a.prototype.cleanUp=function(){i.prototype.cleanUp.call(this),this.data=null},a.prototype.resume=function(){return!!i.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,r.delay(this._tickAndRepeat,[],this)),!0)},a.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(r.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},a.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var s=null,o=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":s=this.data.substring(this.index,o);break;case"uint8array":s=this.data.subarray(this.index,o);break;case"array":case"nodebuffer":s=this.data.slice(this.index,o)}return this.index=o,this.push({data:s,meta:{percent:this.max?this.index/this.max*100:0}})},t.exports=a},{"../utils":32,"./GenericWorker":28}],28:[function(e,t,n){"use strict";function r(i){this.name=i||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}r.prototype={push:function(i){this.emit("data",i)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(i){this.emit("error",i)}return!0},error:function(i){return!this.isFinished&&(this.isPaused?this.generatedError=i:(this.isFinished=!0,this.emit("error",i),this.previous&&this.previous.error(i),this.cleanUp()),!0)},on:function(i,a){return this._listeners[i].push(a),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(i,a){if(this._listeners[i])for(var s=0;s<this._listeners[i].length;s++)this._listeners[i][s].call(this,a)},pipe:function(i){return i.registerPrevious(this)},registerPrevious:function(i){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=i.streamInfo,this.mergeStreamInfo(),this.previous=i;var a=this;return i.on("data",function(s){a.processChunk(s)}),i.on("end",function(){a.end()}),i.on("error",function(s){a.error(s)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var i=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),i=!0),this.previous&&this.previous.resume(),!i},flush:function(){},processChunk:function(i){this.push(i)},withStreamInfo:function(i,a){return this.extraStreamInfo[i]=a,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var i in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,i)&&(this.streamInfo[i]=this.extraStreamInfo[i])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var i="Worker "+this.name;return this.previous?this.previous+" -> "+i:i}},t.exports=r},{}],29:[function(e,t,n){"use strict";var r=e("../utils"),i=e("./ConvertWorker"),a=e("./GenericWorker"),s=e("../base64"),o=e("../support"),l=e("../external"),c=null;if(o.nodestream)try{c=e("../nodejs/NodejsStreamOutputAdapter")}catch{}function h(E,b){return new l.Promise(function(C,N){var w=[],I=E._internalType,S=E._outputType,_=E._mimeType;E.on("data",function(P,v){w.push(P),b&&b(v)}).on("error",function(P){w=[],N(P)}).on("end",function(){try{var P=function(v,y,$){switch(v){case"blob":return r.newBlob(r.transformTo("arraybuffer",y),$);case"base64":return s.encode(y);default:return r.transformTo(v,y)}}(S,function(v,y){var $,Z=0,ce=null,q=0;for($=0;$<y.length;$++)q+=y[$].length;switch(v){case"string":return y.join("");case"array":return Array.prototype.concat.apply([],y);case"uint8array":for(ce=new Uint8Array(q),$=0;$<y.length;$++)ce.set(y[$],Z),Z+=y[$].length;return ce;case"nodebuffer":return Buffer.concat(y);default:throw new Error("concat : unsupported type '"+v+"'")}}(I,w),_);C(P)}catch(v){N(v)}w=[]}).resume()})}function p(E,b,C){var N=b;switch(b){case"blob":case"arraybuffer":N="uint8array";break;case"base64":N="string"}try{this._internalType=N,this._outputType=b,this._mimeType=C,r.checkSupport(N),this._worker=E.pipe(new i(N)),E.lock()}catch(w){this._worker=new a("error"),this._worker.error(w)}}p.prototype={accumulate:function(E){return h(this,E)},on:function(E,b){var C=this;return E==="data"?this._worker.on(E,function(N){b.call(C,N.data,N.meta)}):this._worker.on(E,function(){r.delay(b,arguments,C)}),this},resume:function(){return r.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(E){if(r.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new c(this,{objectMode:this._outputType!=="nodebuffer"},E)}},t.exports=p},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(e,t,n){"use strict";if(n.base64=!0,n.array=!0,n.string=!0,n.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",n.nodebuffer=typeof Buffer<"u",n.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")n.blob=!1;else{var r=new ArrayBuffer(0);try{n.blob=new Blob([r],{type:"application/zip"}).size===0}catch{try{var i=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);i.append(r),n.blob=i.getBlob("application/zip").size===0}catch{n.blob=!1}}}try{n.nodestream=!!e("readable-stream").Readable}catch{n.nodestream=!1}},{"readable-stream":16}],31:[function(e,t,n){"use strict";for(var r=e("./utils"),i=e("./support"),a=e("./nodejsUtils"),s=e("./stream/GenericWorker"),o=new Array(256),l=0;l<256;l++)o[l]=252<=l?6:248<=l?5:240<=l?4:224<=l?3:192<=l?2:1;o[254]=o[254]=1;function c(){s.call(this,"utf-8 decode"),this.leftOver=null}function h(){s.call(this,"utf-8 encode")}n.utf8encode=function(p){return i.nodebuffer?a.newBufferFrom(p,"utf-8"):function(E){var b,C,N,w,I,S=E.length,_=0;for(w=0;w<S;w++)(64512&(C=E.charCodeAt(w)))==55296&&w+1<S&&(64512&(N=E.charCodeAt(w+1)))==56320&&(C=65536+(C-55296<<10)+(N-56320),w++),_+=C<128?1:C<2048?2:C<65536?3:4;for(b=i.uint8array?new Uint8Array(_):new Array(_),w=I=0;I<_;w++)(64512&(C=E.charCodeAt(w)))==55296&&w+1<S&&(64512&(N=E.charCodeAt(w+1)))==56320&&(C=65536+(C-55296<<10)+(N-56320),w++),C<128?b[I++]=C:(C<2048?b[I++]=192|C>>>6:(C<65536?b[I++]=224|C>>>12:(b[I++]=240|C>>>18,b[I++]=128|C>>>12&63),b[I++]=128|C>>>6&63),b[I++]=128|63&C);return b}(p)},n.utf8decode=function(p){return i.nodebuffer?r.transformTo("nodebuffer",p).toString("utf-8"):function(E){var b,C,N,w,I=E.length,S=new Array(2*I);for(b=C=0;b<I;)if((N=E[b++])<128)S[C++]=N;else if(4<(w=o[N]))S[C++]=65533,b+=w-1;else{for(N&=w===2?31:w===3?15:7;1<w&&b<I;)N=N<<6|63&E[b++],w--;1<w?S[C++]=65533:N<65536?S[C++]=N:(N-=65536,S[C++]=55296|N>>10&1023,S[C++]=56320|1023&N)}return S.length!==C&&(S.subarray?S=S.subarray(0,C):S.length=C),r.applyFromCharCode(S)}(p=r.transformTo(i.uint8array?"uint8array":"array",p))},r.inherits(c,s),c.prototype.processChunk=function(p){var E=r.transformTo(i.uint8array?"uint8array":"array",p.data);if(this.leftOver&&this.leftOver.length){if(i.uint8array){var b=E;(E=new Uint8Array(b.length+this.leftOver.length)).set(this.leftOver,0),E.set(b,this.leftOver.length)}else E=this.leftOver.concat(E);this.leftOver=null}var C=function(w,I){var S;for((I=I||w.length)>w.length&&(I=w.length),S=I-1;0<=S&&(192&w[S])==128;)S--;return S<0||S===0?I:S+o[w[S]]>I?S:I}(E),N=E;C!==E.length&&(i.uint8array?(N=E.subarray(0,C),this.leftOver=E.subarray(C,E.length)):(N=E.slice(0,C),this.leftOver=E.slice(C,E.length))),this.push({data:n.utf8decode(N),meta:p.meta})},c.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:n.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},n.Utf8DecodeWorker=c,r.inherits(h,s),h.prototype.processChunk=function(p){this.push({data:n.utf8encode(p.data),meta:p.meta})},n.Utf8EncodeWorker=h},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(e,t,n){"use strict";var r=e("./support"),i=e("./base64"),a=e("./nodejsUtils"),s=e("./external");function o(b){return b}function l(b,C){for(var N=0;N<b.length;++N)C[N]=255&b.charCodeAt(N);return C}e("setimmediate"),n.newBlob=function(b,C){n.checkSupport("blob");try{return new Blob([b],{type:C})}catch{try{var N=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return N.append(b),N.getBlob(C)}catch{throw new Error("Bug : can't construct the Blob.")}}};var c={stringifyByChunk:function(b,C,N){var w=[],I=0,S=b.length;if(S<=N)return String.fromCharCode.apply(null,b);for(;I<S;)C==="array"||C==="nodebuffer"?w.push(String.fromCharCode.apply(null,b.slice(I,Math.min(I+N,S)))):w.push(String.fromCharCode.apply(null,b.subarray(I,Math.min(I+N,S)))),I+=N;return w.join("")},stringifyByChar:function(b){for(var C="",N=0;N<b.length;N++)C+=String.fromCharCode(b[N]);return C},applyCanBeUsed:{uint8array:function(){try{return r.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return r.nodebuffer&&String.fromCharCode.apply(null,a.allocBuffer(1)).length===1}catch{return!1}}()}};function h(b){var C=65536,N=n.getTypeOf(b),w=!0;if(N==="uint8array"?w=c.applyCanBeUsed.uint8array:N==="nodebuffer"&&(w=c.applyCanBeUsed.nodebuffer),w)for(;1<C;)try{return c.stringifyByChunk(b,N,C)}catch{C=Math.floor(C/2)}return c.stringifyByChar(b)}function p(b,C){for(var N=0;N<b.length;N++)C[N]=b[N];return C}n.applyFromCharCode=h;var E={};E.string={string:o,array:function(b){return l(b,new Array(b.length))},arraybuffer:function(b){return E.string.uint8array(b).buffer},uint8array:function(b){return l(b,new Uint8Array(b.length))},nodebuffer:function(b){return l(b,a.allocBuffer(b.length))}},E.array={string:h,array:o,arraybuffer:function(b){return new Uint8Array(b).buffer},uint8array:function(b){return new Uint8Array(b)},nodebuffer:function(b){return a.newBufferFrom(b)}},E.arraybuffer={string:function(b){return h(new Uint8Array(b))},array:function(b){return p(new Uint8Array(b),new Array(b.byteLength))},arraybuffer:o,uint8array:function(b){return new Uint8Array(b)},nodebuffer:function(b){return a.newBufferFrom(new Uint8Array(b))}},E.uint8array={string:h,array:function(b){return p(b,new Array(b.length))},arraybuffer:function(b){return b.buffer},uint8array:o,nodebuffer:function(b){return a.newBufferFrom(b)}},E.nodebuffer={string:h,array:function(b){return p(b,new Array(b.length))},arraybuffer:function(b){return E.nodebuffer.uint8array(b).buffer},uint8array:function(b){return p(b,new Uint8Array(b.length))},nodebuffer:o},n.transformTo=function(b,C){if(C=C||"",!b)return C;n.checkSupport(b);var N=n.getTypeOf(C);return E[N][b](C)},n.resolve=function(b){for(var C=b.split("/"),N=[],w=0;w<C.length;w++){var I=C[w];I==="."||I===""&&w!==0&&w!==C.length-1||(I===".."?N.pop():N.push(I))}return N.join("/")},n.getTypeOf=function(b){return typeof b=="string"?"string":Object.prototype.toString.call(b)==="[object Array]"?"array":r.nodebuffer&&a.isBuffer(b)?"nodebuffer":r.uint8array&&b instanceof Uint8Array?"uint8array":r.arraybuffer&&b instanceof ArrayBuffer?"arraybuffer":void 0},n.checkSupport=function(b){if(!r[b.toLowerCase()])throw new Error(b+" is not supported by this platform")},n.MAX_VALUE_16BITS=65535,n.MAX_VALUE_32BITS=-1,n.pretty=function(b){var C,N,w="";for(N=0;N<(b||"").length;N++)w+="\\x"+((C=b.charCodeAt(N))<16?"0":"")+C.toString(16).toUpperCase();return w},n.delay=function(b,C,N){setImmediate(function(){b.apply(N||null,C||[])})},n.inherits=function(b,C){function N(){}N.prototype=C.prototype,b.prototype=new N},n.extend=function(){var b,C,N={};for(b=0;b<arguments.length;b++)for(C in arguments[b])Object.prototype.hasOwnProperty.call(arguments[b],C)&&N[C]===void 0&&(N[C]=arguments[b][C]);return N},n.prepareContent=function(b,C,N,w,I){return s.Promise.resolve(C).then(function(S){return r.blob&&(S instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(S))!==-1)&&typeof FileReader<"u"?new s.Promise(function(_,P){var v=new FileReader;v.onload=function(y){_(y.target.result)},v.onerror=function(y){P(y.target.error)},v.readAsArrayBuffer(S)}):S}).then(function(S){var _=n.getTypeOf(S);return _?(_==="arraybuffer"?S=n.transformTo("uint8array",S):_==="string"&&(I?S=i.decode(S):N&&w!==!0&&(S=function(P){return l(P,r.uint8array?new Uint8Array(P.length):new Array(P.length))}(S))),S):s.Promise.reject(new Error("Can't read the data of '"+b+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(e,t,n){"use strict";var r=e("./reader/readerFor"),i=e("./utils"),a=e("./signature"),s=e("./zipEntry"),o=e("./support");function l(c){this.files=[],this.loadOptions=c}l.prototype={checkSignature:function(c){if(!this.reader.readAndCheckSignature(c)){this.reader.index-=4;var h=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+i.pretty(h)+", expected "+i.pretty(c)+")")}},isSignature:function(c,h){var p=this.reader.index;this.reader.setIndex(c);var E=this.reader.readString(4)===h;return this.reader.setIndex(p),E},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var c=this.reader.readData(this.zipCommentLength),h=o.uint8array?"uint8array":"array",p=i.transformTo(h,c);this.zipComment=this.loadOptions.decodeFileName(p)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var c,h,p,E=this.zip64EndOfCentralSize-44;0<E;)c=this.reader.readInt(2),h=this.reader.readInt(4),p=this.reader.readData(h),this.zip64ExtensibleData[c]={id:c,length:h,value:p}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var c,h;for(c=0;c<this.files.length;c++)h=this.files[c],this.reader.setIndex(h.localHeaderOffset),this.checkSignature(a.LOCAL_FILE_HEADER),h.readLocalPart(this.reader),h.handleUTF8(),h.processAttributes()},readCentralDir:function(){var c;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(a.CENTRAL_FILE_HEADER);)(c=new s({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(c);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var c=this.reader.lastIndexOfSignature(a.CENTRAL_DIRECTORY_END);if(c<0)throw this.isSignature(0,a.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(c);var h=c;if(this.checkSignature(a.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===i.MAX_VALUE_16BITS||this.diskWithCentralDirStart===i.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===i.MAX_VALUE_16BITS||this.centralDirRecords===i.MAX_VALUE_16BITS||this.centralDirSize===i.MAX_VALUE_32BITS||this.centralDirOffset===i.MAX_VALUE_32BITS){if(this.zip64=!0,(c=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(c),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,a.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var p=this.centralDirOffset+this.centralDirSize;this.zip64&&(p+=20,p+=12+this.zip64EndOfCentralSize);var E=h-p;if(0<E)this.isSignature(h,a.CENTRAL_FILE_HEADER)||(this.reader.zero=E);else if(E<0)throw new Error("Corrupted zip: missing "+Math.abs(E)+" bytes.")},prepareReader:function(c){this.reader=r(c)},load:function(c){this.prepareReader(c),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},t.exports=l},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(e,t,n){"use strict";var r=e("./reader/readerFor"),i=e("./utils"),a=e("./compressedObject"),s=e("./crc32"),o=e("./utf8"),l=e("./compressions"),c=e("./support");function h(p,E){this.options=p,this.loadOptions=E}h.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(p){var E,b;if(p.skip(22),this.fileNameLength=p.readInt(2),b=p.readInt(2),this.fileName=p.readData(this.fileNameLength),p.skip(b),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((E=function(C){for(var N in l)if(Object.prototype.hasOwnProperty.call(l,N)&&l[N].magic===C)return l[N];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+i.pretty(this.compressionMethod)+" unknown (inner file : "+i.transformTo("string",this.fileName)+")");this.decompressed=new a(this.compressedSize,this.uncompressedSize,this.crc32,E,p.readData(this.compressedSize))},readCentralPart:function(p){this.versionMadeBy=p.readInt(2),p.skip(2),this.bitFlag=p.readInt(2),this.compressionMethod=p.readString(2),this.date=p.readDate(),this.crc32=p.readInt(4),this.compressedSize=p.readInt(4),this.uncompressedSize=p.readInt(4);var E=p.readInt(2);if(this.extraFieldsLength=p.readInt(2),this.fileCommentLength=p.readInt(2),this.diskNumberStart=p.readInt(2),this.internalFileAttributes=p.readInt(2),this.externalFileAttributes=p.readInt(4),this.localHeaderOffset=p.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");p.skip(E),this.readExtraFields(p),this.parseZIP64ExtraField(p),this.fileComment=p.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var p=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),p==0&&(this.dosPermissions=63&this.externalFileAttributes),p==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var p=r(this.extraFields[1].value);this.uncompressedSize===i.MAX_VALUE_32BITS&&(this.uncompressedSize=p.readInt(8)),this.compressedSize===i.MAX_VALUE_32BITS&&(this.compressedSize=p.readInt(8)),this.localHeaderOffset===i.MAX_VALUE_32BITS&&(this.localHeaderOffset=p.readInt(8)),this.diskNumberStart===i.MAX_VALUE_32BITS&&(this.diskNumberStart=p.readInt(4))}},readExtraFields:function(p){var E,b,C,N=p.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});p.index+4<N;)E=p.readInt(2),b=p.readInt(2),C=p.readData(b),this.extraFields[E]={id:E,length:b,value:C};p.setIndex(N)},handleUTF8:function(){var p=c.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=o.utf8decode(this.fileName),this.fileCommentStr=o.utf8decode(this.fileComment);else{var E=this.findExtraFieldUnicodePath();if(E!==null)this.fileNameStr=E;else{var b=i.transformTo(p,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(b)}var C=this.findExtraFieldUnicodeComment();if(C!==null)this.fileCommentStr=C;else{var N=i.transformTo(p,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(N)}}},findExtraFieldUnicodePath:function(){var p=this.extraFields[28789];if(p){var E=r(p.value);return E.readInt(1)!==1||s(this.fileName)!==E.readInt(4)?null:o.utf8decode(E.readData(p.length-5))}return null},findExtraFieldUnicodeComment:function(){var p=this.extraFields[25461];if(p){var E=r(p.value);return E.readInt(1)!==1||s(this.fileComment)!==E.readInt(4)?null:o.utf8decode(E.readData(p.length-5))}return null}},t.exports=h},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(e,t,n){"use strict";function r(E,b,C){this.name=E,this.dir=C.dir,this.date=C.date,this.comment=C.comment,this.unixPermissions=C.unixPermissions,this.dosPermissions=C.dosPermissions,this._data=b,this._dataBinary=C.binary,this.options={compression:C.compression,compressionOptions:C.compressionOptions}}var i=e("./stream/StreamHelper"),a=e("./stream/DataWorker"),s=e("./utf8"),o=e("./compressedObject"),l=e("./stream/GenericWorker");r.prototype={internalStream:function(E){var b=null,C="string";try{if(!E)throw new Error("No output type specified.");var N=(C=E.toLowerCase())==="string"||C==="text";C!=="binarystring"&&C!=="text"||(C="string"),b=this._decompressWorker();var w=!this._dataBinary;w&&!N&&(b=b.pipe(new s.Utf8EncodeWorker)),!w&&N&&(b=b.pipe(new s.Utf8DecodeWorker))}catch(I){(b=new l("error")).error(I)}return new i(b,C,"")},async:function(E,b){return this.internalStream(E).accumulate(b)},nodeStream:function(E,b){return this.internalStream(E||"nodebuffer").toNodejsStream(b)},_compressWorker:function(E,b){if(this._data instanceof o&&this._data.compression.magic===E.magic)return this._data.getCompressedWorker();var C=this._decompressWorker();return this._dataBinary||(C=C.pipe(new s.Utf8EncodeWorker)),o.createWorkerFrom(C,E,b)},_decompressWorker:function(){return this._data instanceof o?this._data.getContentWorker():this._data instanceof l?this._data:new a(this._data)}};for(var c=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],h=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},p=0;p<c.length;p++)r.prototype[c[p]]=h;t.exports=r},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(e,t,n){(function(r){"use strict";var i,a,s=r.MutationObserver||r.WebKitMutationObserver;if(s){var o=0,l=new s(E),c=r.document.createTextNode("");l.observe(c,{characterData:!0}),i=function(){c.data=o=++o%2}}else if(r.setImmediate||r.MessageChannel===void 0)i="document"in r&&"onreadystatechange"in r.document.createElement("script")?function(){var b=r.document.createElement("script");b.onreadystatechange=function(){E(),b.onreadystatechange=null,b.parentNode.removeChild(b),b=null},r.document.documentElement.appendChild(b)}:function(){setTimeout(E,0)};else{var h=new r.MessageChannel;h.port1.onmessage=E,i=function(){h.port2.postMessage(0)}}var p=[];function E(){var b,C;a=!0;for(var N=p.length;N;){for(C=p,p=[],b=-1;++b<N;)C[b]();N=p.length}a=!1}t.exports=function(b){p.push(b)!==1||a||i()}}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(e,t,n){"use strict";var r=e("immediate");function i(){}var a={},s=["REJECTED"],o=["FULFILLED"],l=["PENDING"];function c(N){if(typeof N!="function")throw new TypeError("resolver must be a function");this.state=l,this.queue=[],this.outcome=void 0,N!==i&&b(this,N)}function h(N,w,I){this.promise=N,typeof w=="function"&&(this.onFulfilled=w,this.callFulfilled=this.otherCallFulfilled),typeof I=="function"&&(this.onRejected=I,this.callRejected=this.otherCallRejected)}function p(N,w,I){r(function(){var S;try{S=w(I)}catch(_){return a.reject(N,_)}S===N?a.reject(N,new TypeError("Cannot resolve promise with itself")):a.resolve(N,S)})}function E(N){var w=N&&N.then;if(N&&(typeof N=="object"||typeof N=="function")&&typeof w=="function")return function(){w.apply(N,arguments)}}function b(N,w){var I=!1;function S(v){I||(I=!0,a.reject(N,v))}function _(v){I||(I=!0,a.resolve(N,v))}var P=C(function(){w(_,S)});P.status==="error"&&S(P.value)}function C(N,w){var I={};try{I.value=N(w),I.status="success"}catch(S){I.status="error",I.value=S}return I}(t.exports=c).prototype.finally=function(N){if(typeof N!="function")return this;var w=this.constructor;return this.then(function(I){return w.resolve(N()).then(function(){return I})},function(I){return w.resolve(N()).then(function(){throw I})})},c.prototype.catch=function(N){return this.then(null,N)},c.prototype.then=function(N,w){if(typeof N!="function"&&this.state===o||typeof w!="function"&&this.state===s)return this;var I=new this.constructor(i);return this.state!==l?p(I,this.state===o?N:w,this.outcome):this.queue.push(new h(I,N,w)),I},h.prototype.callFulfilled=function(N){a.resolve(this.promise,N)},h.prototype.otherCallFulfilled=function(N){p(this.promise,this.onFulfilled,N)},h.prototype.callRejected=function(N){a.reject(this.promise,N)},h.prototype.otherCallRejected=function(N){p(this.promise,this.onRejected,N)},a.resolve=function(N,w){var I=C(E,w);if(I.status==="error")return a.reject(N,I.value);var S=I.value;if(S)b(N,S);else{N.state=o,N.outcome=w;for(var _=-1,P=N.queue.length;++_<P;)N.queue[_].callFulfilled(w)}return N},a.reject=function(N,w){N.state=s,N.outcome=w;for(var I=-1,S=N.queue.length;++I<S;)N.queue[I].callRejected(w);return N},c.resolve=function(N){return N instanceof this?N:a.resolve(new this(i),N)},c.reject=function(N){var w=new this(i);return a.reject(w,N)},c.all=function(N){var w=this;if(Object.prototype.toString.call(N)!=="[object Array]")return this.reject(new TypeError("must be an array"));var I=N.length,S=!1;if(!I)return this.resolve([]);for(var _=new Array(I),P=0,v=-1,y=new this(i);++v<I;)$(N[v],v);return y;function $(Z,ce){w.resolve(Z).then(function(q){_[ce]=q,++P!==I||S||(S=!0,a.resolve(y,_))},function(q){S||(S=!0,a.reject(y,q))})}},c.race=function(N){var w=this;if(Object.prototype.toString.call(N)!=="[object Array]")return this.reject(new TypeError("must be an array"));var I=N.length,S=!1;if(!I)return this.resolve([]);for(var _=-1,P=new this(i);++_<I;)v=N[_],w.resolve(v).then(function(y){S||(S=!0,a.resolve(P,y))},function(y){S||(S=!0,a.reject(P,y))});var v;return P}},{immediate:36}],38:[function(e,t,n){"use strict";var r={};(0,e("./lib/utils/common").assign)(r,e("./lib/deflate"),e("./lib/inflate"),e("./lib/zlib/constants")),t.exports=r},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(e,t,n){"use strict";var r=e("./zlib/deflate"),i=e("./utils/common"),a=e("./utils/strings"),s=e("./zlib/messages"),o=e("./zlib/zstream"),l=Object.prototype.toString,c=0,h=-1,p=0,E=8;function b(N){if(!(this instanceof b))return new b(N);this.options=i.assign({level:h,method:E,chunkSize:16384,windowBits:15,memLevel:8,strategy:p,to:""},N||{});var w=this.options;w.raw&&0<w.windowBits?w.windowBits=-w.windowBits:w.gzip&&0<w.windowBits&&w.windowBits<16&&(w.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new o,this.strm.avail_out=0;var I=r.deflateInit2(this.strm,w.level,w.method,w.windowBits,w.memLevel,w.strategy);if(I!==c)throw new Error(s[I]);if(w.header&&r.deflateSetHeader(this.strm,w.header),w.dictionary){var S;if(S=typeof w.dictionary=="string"?a.string2buf(w.dictionary):l.call(w.dictionary)==="[object ArrayBuffer]"?new Uint8Array(w.dictionary):w.dictionary,(I=r.deflateSetDictionary(this.strm,S))!==c)throw new Error(s[I]);this._dict_set=!0}}function C(N,w){var I=new b(w);if(I.push(N,!0),I.err)throw I.msg||s[I.err];return I.result}b.prototype.push=function(N,w){var I,S,_=this.strm,P=this.options.chunkSize;if(this.ended)return!1;S=w===~~w?w:w===!0?4:0,typeof N=="string"?_.input=a.string2buf(N):l.call(N)==="[object ArrayBuffer]"?_.input=new Uint8Array(N):_.input=N,_.next_in=0,_.avail_in=_.input.length;do{if(_.avail_out===0&&(_.output=new i.Buf8(P),_.next_out=0,_.avail_out=P),(I=r.deflate(_,S))!==1&&I!==c)return this.onEnd(I),!(this.ended=!0);_.avail_out!==0&&(_.avail_in!==0||S!==4&&S!==2)||(this.options.to==="string"?this.onData(a.buf2binstring(i.shrinkBuf(_.output,_.next_out))):this.onData(i.shrinkBuf(_.output,_.next_out)))}while((0<_.avail_in||_.avail_out===0)&&I!==1);return S===4?(I=r.deflateEnd(this.strm),this.onEnd(I),this.ended=!0,I===c):S!==2||(this.onEnd(c),!(_.avail_out=0))},b.prototype.onData=function(N){this.chunks.push(N)},b.prototype.onEnd=function(N){N===c&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=N,this.msg=this.strm.msg},n.Deflate=b,n.deflate=C,n.deflateRaw=function(N,w){return(w=w||{}).raw=!0,C(N,w)},n.gzip=function(N,w){return(w=w||{}).gzip=!0,C(N,w)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(e,t,n){"use strict";var r=e("./zlib/inflate"),i=e("./utils/common"),a=e("./utils/strings"),s=e("./zlib/constants"),o=e("./zlib/messages"),l=e("./zlib/zstream"),c=e("./zlib/gzheader"),h=Object.prototype.toString;function p(b){if(!(this instanceof p))return new p(b);this.options=i.assign({chunkSize:16384,windowBits:0,to:""},b||{});var C=this.options;C.raw&&0<=C.windowBits&&C.windowBits<16&&(C.windowBits=-C.windowBits,C.windowBits===0&&(C.windowBits=-15)),!(0<=C.windowBits&&C.windowBits<16)||b&&b.windowBits||(C.windowBits+=32),15<C.windowBits&&C.windowBits<48&&!(15&C.windowBits)&&(C.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new l,this.strm.avail_out=0;var N=r.inflateInit2(this.strm,C.windowBits);if(N!==s.Z_OK)throw new Error(o[N]);this.header=new c,r.inflateGetHeader(this.strm,this.header)}function E(b,C){var N=new p(C);if(N.push(b,!0),N.err)throw N.msg||o[N.err];return N.result}p.prototype.push=function(b,C){var N,w,I,S,_,P,v=this.strm,y=this.options.chunkSize,$=this.options.dictionary,Z=!1;if(this.ended)return!1;w=C===~~C?C:C===!0?s.Z_FINISH:s.Z_NO_FLUSH,typeof b=="string"?v.input=a.binstring2buf(b):h.call(b)==="[object ArrayBuffer]"?v.input=new Uint8Array(b):v.input=b,v.next_in=0,v.avail_in=v.input.length;do{if(v.avail_out===0&&(v.output=new i.Buf8(y),v.next_out=0,v.avail_out=y),(N=r.inflate(v,s.Z_NO_FLUSH))===s.Z_NEED_DICT&&$&&(P=typeof $=="string"?a.string2buf($):h.call($)==="[object ArrayBuffer]"?new Uint8Array($):$,N=r.inflateSetDictionary(this.strm,P)),N===s.Z_BUF_ERROR&&Z===!0&&(N=s.Z_OK,Z=!1),N!==s.Z_STREAM_END&&N!==s.Z_OK)return this.onEnd(N),!(this.ended=!0);v.next_out&&(v.avail_out!==0&&N!==s.Z_STREAM_END&&(v.avail_in!==0||w!==s.Z_FINISH&&w!==s.Z_SYNC_FLUSH)||(this.options.to==="string"?(I=a.utf8border(v.output,v.next_out),S=v.next_out-I,_=a.buf2string(v.output,I),v.next_out=S,v.avail_out=y-S,S&&i.arraySet(v.output,v.output,I,S,0),this.onData(_)):this.onData(i.shrinkBuf(v.output,v.next_out)))),v.avail_in===0&&v.avail_out===0&&(Z=!0)}while((0<v.avail_in||v.avail_out===0)&&N!==s.Z_STREAM_END);return N===s.Z_STREAM_END&&(w=s.Z_FINISH),w===s.Z_FINISH?(N=r.inflateEnd(this.strm),this.onEnd(N),this.ended=!0,N===s.Z_OK):w!==s.Z_SYNC_FLUSH||(this.onEnd(s.Z_OK),!(v.avail_out=0))},p.prototype.onData=function(b){this.chunks.push(b)},p.prototype.onEnd=function(b){b===s.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=b,this.msg=this.strm.msg},n.Inflate=p,n.inflate=E,n.inflateRaw=function(b,C){return(C=C||{}).raw=!0,E(b,C)},n.ungzip=E},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(e,t,n){"use strict";var r=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";n.assign=function(s){for(var o=Array.prototype.slice.call(arguments,1);o.length;){var l=o.shift();if(l){if(typeof l!="object")throw new TypeError(l+"must be non-object");for(var c in l)l.hasOwnProperty(c)&&(s[c]=l[c])}}return s},n.shrinkBuf=function(s,o){return s.length===o?s:s.subarray?s.subarray(0,o):(s.length=o,s)};var i={arraySet:function(s,o,l,c,h){if(o.subarray&&s.subarray)s.set(o.subarray(l,l+c),h);else for(var p=0;p<c;p++)s[h+p]=o[l+p]},flattenChunks:function(s){var o,l,c,h,p,E;for(o=c=0,l=s.length;o<l;o++)c+=s[o].length;for(E=new Uint8Array(c),o=h=0,l=s.length;o<l;o++)p=s[o],E.set(p,h),h+=p.length;return E}},a={arraySet:function(s,o,l,c,h){for(var p=0;p<c;p++)s[h+p]=o[l+p]},flattenChunks:function(s){return[].concat.apply([],s)}};n.setTyped=function(s){s?(n.Buf8=Uint8Array,n.Buf16=Uint16Array,n.Buf32=Int32Array,n.assign(n,i)):(n.Buf8=Array,n.Buf16=Array,n.Buf32=Array,n.assign(n,a))},n.setTyped(r)},{}],42:[function(e,t,n){"use strict";var r=e("./common"),i=!0,a=!0;try{String.fromCharCode.apply(null,[0])}catch{i=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{a=!1}for(var s=new r.Buf8(256),o=0;o<256;o++)s[o]=252<=o?6:248<=o?5:240<=o?4:224<=o?3:192<=o?2:1;function l(c,h){if(h<65537&&(c.subarray&&a||!c.subarray&&i))return String.fromCharCode.apply(null,r.shrinkBuf(c,h));for(var p="",E=0;E<h;E++)p+=String.fromCharCode(c[E]);return p}s[254]=s[254]=1,n.string2buf=function(c){var h,p,E,b,C,N=c.length,w=0;for(b=0;b<N;b++)(64512&(p=c.charCodeAt(b)))==55296&&b+1<N&&(64512&(E=c.charCodeAt(b+1)))==56320&&(p=65536+(p-55296<<10)+(E-56320),b++),w+=p<128?1:p<2048?2:p<65536?3:4;for(h=new r.Buf8(w),b=C=0;C<w;b++)(64512&(p=c.charCodeAt(b)))==55296&&b+1<N&&(64512&(E=c.charCodeAt(b+1)))==56320&&(p=65536+(p-55296<<10)+(E-56320),b++),p<128?h[C++]=p:(p<2048?h[C++]=192|p>>>6:(p<65536?h[C++]=224|p>>>12:(h[C++]=240|p>>>18,h[C++]=128|p>>>12&63),h[C++]=128|p>>>6&63),h[C++]=128|63&p);return h},n.buf2binstring=function(c){return l(c,c.length)},n.binstring2buf=function(c){for(var h=new r.Buf8(c.length),p=0,E=h.length;p<E;p++)h[p]=c.charCodeAt(p);return h},n.buf2string=function(c,h){var p,E,b,C,N=h||c.length,w=new Array(2*N);for(p=E=0;p<N;)if((b=c[p++])<128)w[E++]=b;else if(4<(C=s[b]))w[E++]=65533,p+=C-1;else{for(b&=C===2?31:C===3?15:7;1<C&&p<N;)b=b<<6|63&c[p++],C--;1<C?w[E++]=65533:b<65536?w[E++]=b:(b-=65536,w[E++]=55296|b>>10&1023,w[E++]=56320|1023&b)}return l(w,E)},n.utf8border=function(c,h){var p;for((h=h||c.length)>c.length&&(h=c.length),p=h-1;0<=p&&(192&c[p])==128;)p--;return p<0||p===0?h:p+s[c[p]]>h?p:h}},{"./common":41}],43:[function(e,t,n){"use strict";t.exports=function(r,i,a,s){for(var o=65535&r|0,l=r>>>16&65535|0,c=0;a!==0;){for(a-=c=2e3<a?2e3:a;l=l+(o=o+i[s++]|0)|0,--c;);o%=65521,l%=65521}return o|l<<16|0}},{}],44:[function(e,t,n){"use strict";t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(e,t,n){"use strict";var r=function(){for(var i,a=[],s=0;s<256;s++){i=s;for(var o=0;o<8;o++)i=1&i?3988292384^i>>>1:i>>>1;a[s]=i}return a}();t.exports=function(i,a,s,o){var l=r,c=o+s;i^=-1;for(var h=o;h<c;h++)i=i>>>8^l[255&(i^a[h])];return-1^i}},{}],46:[function(e,t,n){"use strict";var r,i=e("../utils/common"),a=e("./trees"),s=e("./adler32"),o=e("./crc32"),l=e("./messages"),c=0,h=4,p=0,E=-2,b=-1,C=4,N=2,w=8,I=9,S=286,_=30,P=19,v=2*S+1,y=15,$=3,Z=258,ce=Z+$+1,q=42,W=113,O=1,re=2,le=3,ie=4;function oe(V,Se){return V.msg=l[Se],Se}function Q(V){return(V<<1)-(4<V?9:0)}function j(V){for(var Se=V.length;0<=--Se;)V[Se]=0}function H(V){var Se=V.state,Ee=Se.pending;Ee>V.avail_out&&(Ee=V.avail_out),Ee!==0&&(i.arraySet(V.output,Se.pending_buf,Se.pending_out,Ee,V.next_out),V.next_out+=Ee,Se.pending_out+=Ee,V.total_out+=Ee,V.avail_out-=Ee,Se.pending-=Ee,Se.pending===0&&(Se.pending_out=0))}function G(V,Se){a._tr_flush_block(V,0<=V.block_start?V.block_start:-1,V.strstart-V.block_start,Se),V.block_start=V.strstart,H(V.strm)}function fe(V,Se){V.pending_buf[V.pending++]=Se}function pe(V,Se){V.pending_buf[V.pending++]=Se>>>8&255,V.pending_buf[V.pending++]=255&Se}function de(V,Se){var Ee,ae,ue=V.max_chain_length,ye=V.strstart,Ve=V.prev_length,et=V.nice_match,Re=V.strstart>V.w_size-ce?V.strstart-(V.w_size-ce):0,Qe=V.window,gt=V.w_mask,rt=V.prev,Je=V.strstart+Z,qt=Qe[ye+Ve-1],nn=Qe[ye+Ve];V.prev_length>=V.good_match&&(ue>>=2),et>V.lookahead&&(et=V.lookahead);do if(Qe[(Ee=Se)+Ve]===nn&&Qe[Ee+Ve-1]===qt&&Qe[Ee]===Qe[ye]&&Qe[++Ee]===Qe[ye+1]){ye+=2,Ee++;do;while(Qe[++ye]===Qe[++Ee]&&Qe[++ye]===Qe[++Ee]&&Qe[++ye]===Qe[++Ee]&&Qe[++ye]===Qe[++Ee]&&Qe[++ye]===Qe[++Ee]&&Qe[++ye]===Qe[++Ee]&&Qe[++ye]===Qe[++Ee]&&Qe[++ye]===Qe[++Ee]&&ye<Je);if(ae=Z-(Je-ye),ye=Je-Z,Ve<ae){if(V.match_start=Se,et<=(Ve=ae))break;qt=Qe[ye+Ve-1],nn=Qe[ye+Ve]}}while((Se=rt[Se&gt])>Re&&--ue!=0);return Ve<=V.lookahead?Ve:V.lookahead}function Ae(V){var Se,Ee,ae,ue,ye,Ve,et,Re,Qe,gt,rt=V.w_size;do{if(ue=V.window_size-V.lookahead-V.strstart,V.strstart>=rt+(rt-ce)){for(i.arraySet(V.window,V.window,rt,rt,0),V.match_start-=rt,V.strstart-=rt,V.block_start-=rt,Se=Ee=V.hash_size;ae=V.head[--Se],V.head[Se]=rt<=ae?ae-rt:0,--Ee;);for(Se=Ee=rt;ae=V.prev[--Se],V.prev[Se]=rt<=ae?ae-rt:0,--Ee;);ue+=rt}if(V.strm.avail_in===0)break;if(Ve=V.strm,et=V.window,Re=V.strstart+V.lookahead,Qe=ue,gt=void 0,gt=Ve.avail_in,Qe<gt&&(gt=Qe),Ee=gt===0?0:(Ve.avail_in-=gt,i.arraySet(et,Ve.input,Ve.next_in,gt,Re),Ve.state.wrap===1?Ve.adler=s(Ve.adler,et,gt,Re):Ve.state.wrap===2&&(Ve.adler=o(Ve.adler,et,gt,Re)),Ve.next_in+=gt,Ve.total_in+=gt,gt),V.lookahead+=Ee,V.lookahead+V.insert>=$)for(ye=V.strstart-V.insert,V.ins_h=V.window[ye],V.ins_h=(V.ins_h<<V.hash_shift^V.window[ye+1])&V.hash_mask;V.insert&&(V.ins_h=(V.ins_h<<V.hash_shift^V.window[ye+$-1])&V.hash_mask,V.prev[ye&V.w_mask]=V.head[V.ins_h],V.head[V.ins_h]=ye,ye++,V.insert--,!(V.lookahead+V.insert<$)););}while(V.lookahead<ce&&V.strm.avail_in!==0)}function Ie(V,Se){for(var Ee,ae;;){if(V.lookahead<ce){if(Ae(V),V.lookahead<ce&&Se===c)return O;if(V.lookahead===0)break}if(Ee=0,V.lookahead>=$&&(V.ins_h=(V.ins_h<<V.hash_shift^V.window[V.strstart+$-1])&V.hash_mask,Ee=V.prev[V.strstart&V.w_mask]=V.head[V.ins_h],V.head[V.ins_h]=V.strstart),Ee!==0&&V.strstart-Ee<=V.w_size-ce&&(V.match_length=de(V,Ee)),V.match_length>=$)if(ae=a._tr_tally(V,V.strstart-V.match_start,V.match_length-$),V.lookahead-=V.match_length,V.match_length<=V.max_lazy_match&&V.lookahead>=$){for(V.match_length--;V.strstart++,V.ins_h=(V.ins_h<<V.hash_shift^V.window[V.strstart+$-1])&V.hash_mask,Ee=V.prev[V.strstart&V.w_mask]=V.head[V.ins_h],V.head[V.ins_h]=V.strstart,--V.match_length!=0;);V.strstart++}else V.strstart+=V.match_length,V.match_length=0,V.ins_h=V.window[V.strstart],V.ins_h=(V.ins_h<<V.hash_shift^V.window[V.strstart+1])&V.hash_mask;else ae=a._tr_tally(V,0,V.window[V.strstart]),V.lookahead--,V.strstart++;if(ae&&(G(V,!1),V.strm.avail_out===0))return O}return V.insert=V.strstart<$-1?V.strstart:$-1,Se===h?(G(V,!0),V.strm.avail_out===0?le:ie):V.last_lit&&(G(V,!1),V.strm.avail_out===0)?O:re}function ve(V,Se){for(var Ee,ae,ue;;){if(V.lookahead<ce){if(Ae(V),V.lookahead<ce&&Se===c)return O;if(V.lookahead===0)break}if(Ee=0,V.lookahead>=$&&(V.ins_h=(V.ins_h<<V.hash_shift^V.window[V.strstart+$-1])&V.hash_mask,Ee=V.prev[V.strstart&V.w_mask]=V.head[V.ins_h],V.head[V.ins_h]=V.strstart),V.prev_length=V.match_length,V.prev_match=V.match_start,V.match_length=$-1,Ee!==0&&V.prev_length<V.max_lazy_match&&V.strstart-Ee<=V.w_size-ce&&(V.match_length=de(V,Ee),V.match_length<=5&&(V.strategy===1||V.match_length===$&&4096<V.strstart-V.match_start)&&(V.match_length=$-1)),V.prev_length>=$&&V.match_length<=V.prev_length){for(ue=V.strstart+V.lookahead-$,ae=a._tr_tally(V,V.strstart-1-V.prev_match,V.prev_length-$),V.lookahead-=V.prev_length-1,V.prev_length-=2;++V.strstart<=ue&&(V.ins_h=(V.ins_h<<V.hash_shift^V.window[V.strstart+$-1])&V.hash_mask,Ee=V.prev[V.strstart&V.w_mask]=V.head[V.ins_h],V.head[V.ins_h]=V.strstart),--V.prev_length!=0;);if(V.match_available=0,V.match_length=$-1,V.strstart++,ae&&(G(V,!1),V.strm.avail_out===0))return O}else if(V.match_available){if((ae=a._tr_tally(V,0,V.window[V.strstart-1]))&&G(V,!1),V.strstart++,V.lookahead--,V.strm.avail_out===0)return O}else V.match_available=1,V.strstart++,V.lookahead--}return V.match_available&&(ae=a._tr_tally(V,0,V.window[V.strstart-1]),V.match_available=0),V.insert=V.strstart<$-1?V.strstart:$-1,Se===h?(G(V,!0),V.strm.avail_out===0?le:ie):V.last_lit&&(G(V,!1),V.strm.avail_out===0)?O:re}function Te(V,Se,Ee,ae,ue){this.good_length=V,this.max_lazy=Se,this.nice_length=Ee,this.max_chain=ae,this.func=ue}function Me(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=w,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new i.Buf16(2*v),this.dyn_dtree=new i.Buf16(2*(2*_+1)),this.bl_tree=new i.Buf16(2*(2*P+1)),j(this.dyn_ltree),j(this.dyn_dtree),j(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new i.Buf16(y+1),this.heap=new i.Buf16(2*S+1),j(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new i.Buf16(2*S+1),j(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Ge(V){var Se;return V&&V.state?(V.total_in=V.total_out=0,V.data_type=N,(Se=V.state).pending=0,Se.pending_out=0,Se.wrap<0&&(Se.wrap=-Se.wrap),Se.status=Se.wrap?q:W,V.adler=Se.wrap===2?0:1,Se.last_flush=c,a._tr_init(Se),p):oe(V,E)}function at(V){var Se=Ge(V);return Se===p&&function(Ee){Ee.window_size=2*Ee.w_size,j(Ee.head),Ee.max_lazy_match=r[Ee.level].max_lazy,Ee.good_match=r[Ee.level].good_length,Ee.nice_match=r[Ee.level].nice_length,Ee.max_chain_length=r[Ee.level].max_chain,Ee.strstart=0,Ee.block_start=0,Ee.lookahead=0,Ee.insert=0,Ee.match_length=Ee.prev_length=$-1,Ee.match_available=0,Ee.ins_h=0}(V.state),Se}function ft(V,Se,Ee,ae,ue,ye){if(!V)return E;var Ve=1;if(Se===b&&(Se=6),ae<0?(Ve=0,ae=-ae):15<ae&&(Ve=2,ae-=16),ue<1||I<ue||Ee!==w||ae<8||15<ae||Se<0||9<Se||ye<0||C<ye)return oe(V,E);ae===8&&(ae=9);var et=new Me;return(V.state=et).strm=V,et.wrap=Ve,et.gzhead=null,et.w_bits=ae,et.w_size=1<<et.w_bits,et.w_mask=et.w_size-1,et.hash_bits=ue+7,et.hash_size=1<<et.hash_bits,et.hash_mask=et.hash_size-1,et.hash_shift=~~((et.hash_bits+$-1)/$),et.window=new i.Buf8(2*et.w_size),et.head=new i.Buf16(et.hash_size),et.prev=new i.Buf16(et.w_size),et.lit_bufsize=1<<ue+6,et.pending_buf_size=4*et.lit_bufsize,et.pending_buf=new i.Buf8(et.pending_buf_size),et.d_buf=1*et.lit_bufsize,et.l_buf=3*et.lit_bufsize,et.level=Se,et.strategy=ye,et.method=Ee,at(V)}r=[new Te(0,0,0,0,function(V,Se){var Ee=65535;for(Ee>V.pending_buf_size-5&&(Ee=V.pending_buf_size-5);;){if(V.lookahead<=1){if(Ae(V),V.lookahead===0&&Se===c)return O;if(V.lookahead===0)break}V.strstart+=V.lookahead,V.lookahead=0;var ae=V.block_start+Ee;if((V.strstart===0||V.strstart>=ae)&&(V.lookahead=V.strstart-ae,V.strstart=ae,G(V,!1),V.strm.avail_out===0)||V.strstart-V.block_start>=V.w_size-ce&&(G(V,!1),V.strm.avail_out===0))return O}return V.insert=0,Se===h?(G(V,!0),V.strm.avail_out===0?le:ie):(V.strstart>V.block_start&&(G(V,!1),V.strm.avail_out),O)}),new Te(4,4,8,4,Ie),new Te(4,5,16,8,Ie),new Te(4,6,32,32,Ie),new Te(4,4,16,16,ve),new Te(8,16,32,32,ve),new Te(8,16,128,128,ve),new Te(8,32,128,256,ve),new Te(32,128,258,1024,ve),new Te(32,258,258,4096,ve)],n.deflateInit=function(V,Se){return ft(V,Se,w,15,8,0)},n.deflateInit2=ft,n.deflateReset=at,n.deflateResetKeep=Ge,n.deflateSetHeader=function(V,Se){return V&&V.state?V.state.wrap!==2?E:(V.state.gzhead=Se,p):E},n.deflate=function(V,Se){var Ee,ae,ue,ye;if(!V||!V.state||5<Se||Se<0)return V?oe(V,E):E;if(ae=V.state,!V.output||!V.input&&V.avail_in!==0||ae.status===666&&Se!==h)return oe(V,V.avail_out===0?-5:E);if(ae.strm=V,Ee=ae.last_flush,ae.last_flush=Se,ae.status===q)if(ae.wrap===2)V.adler=0,fe(ae,31),fe(ae,139),fe(ae,8),ae.gzhead?(fe(ae,(ae.gzhead.text?1:0)+(ae.gzhead.hcrc?2:0)+(ae.gzhead.extra?4:0)+(ae.gzhead.name?8:0)+(ae.gzhead.comment?16:0)),fe(ae,255&ae.gzhead.time),fe(ae,ae.gzhead.time>>8&255),fe(ae,ae.gzhead.time>>16&255),fe(ae,ae.gzhead.time>>24&255),fe(ae,ae.level===9?2:2<=ae.strategy||ae.level<2?4:0),fe(ae,255&ae.gzhead.os),ae.gzhead.extra&&ae.gzhead.extra.length&&(fe(ae,255&ae.gzhead.extra.length),fe(ae,ae.gzhead.extra.length>>8&255)),ae.gzhead.hcrc&&(V.adler=o(V.adler,ae.pending_buf,ae.pending,0)),ae.gzindex=0,ae.status=69):(fe(ae,0),fe(ae,0),fe(ae,0),fe(ae,0),fe(ae,0),fe(ae,ae.level===9?2:2<=ae.strategy||ae.level<2?4:0),fe(ae,3),ae.status=W);else{var Ve=w+(ae.w_bits-8<<4)<<8;Ve|=(2<=ae.strategy||ae.level<2?0:ae.level<6?1:ae.level===6?2:3)<<6,ae.strstart!==0&&(Ve|=32),Ve+=31-Ve%31,ae.status=W,pe(ae,Ve),ae.strstart!==0&&(pe(ae,V.adler>>>16),pe(ae,65535&V.adler)),V.adler=1}if(ae.status===69)if(ae.gzhead.extra){for(ue=ae.pending;ae.gzindex<(65535&ae.gzhead.extra.length)&&(ae.pending!==ae.pending_buf_size||(ae.gzhead.hcrc&&ae.pending>ue&&(V.adler=o(V.adler,ae.pending_buf,ae.pending-ue,ue)),H(V),ue=ae.pending,ae.pending!==ae.pending_buf_size));)fe(ae,255&ae.gzhead.extra[ae.gzindex]),ae.gzindex++;ae.gzhead.hcrc&&ae.pending>ue&&(V.adler=o(V.adler,ae.pending_buf,ae.pending-ue,ue)),ae.gzindex===ae.gzhead.extra.length&&(ae.gzindex=0,ae.status=73)}else ae.status=73;if(ae.status===73)if(ae.gzhead.name){ue=ae.pending;do{if(ae.pending===ae.pending_buf_size&&(ae.gzhead.hcrc&&ae.pending>ue&&(V.adler=o(V.adler,ae.pending_buf,ae.pending-ue,ue)),H(V),ue=ae.pending,ae.pending===ae.pending_buf_size)){ye=1;break}ye=ae.gzindex<ae.gzhead.name.length?255&ae.gzhead.name.charCodeAt(ae.gzindex++):0,fe(ae,ye)}while(ye!==0);ae.gzhead.hcrc&&ae.pending>ue&&(V.adler=o(V.adler,ae.pending_buf,ae.pending-ue,ue)),ye===0&&(ae.gzindex=0,ae.status=91)}else ae.status=91;if(ae.status===91)if(ae.gzhead.comment){ue=ae.pending;do{if(ae.pending===ae.pending_buf_size&&(ae.gzhead.hcrc&&ae.pending>ue&&(V.adler=o(V.adler,ae.pending_buf,ae.pending-ue,ue)),H(V),ue=ae.pending,ae.pending===ae.pending_buf_size)){ye=1;break}ye=ae.gzindex<ae.gzhead.comment.length?255&ae.gzhead.comment.charCodeAt(ae.gzindex++):0,fe(ae,ye)}while(ye!==0);ae.gzhead.hcrc&&ae.pending>ue&&(V.adler=o(V.adler,ae.pending_buf,ae.pending-ue,ue)),ye===0&&(ae.status=103)}else ae.status=103;if(ae.status===103&&(ae.gzhead.hcrc?(ae.pending+2>ae.pending_buf_size&&H(V),ae.pending+2<=ae.pending_buf_size&&(fe(ae,255&V.adler),fe(ae,V.adler>>8&255),V.adler=0,ae.status=W)):ae.status=W),ae.pending!==0){if(H(V),V.avail_out===0)return ae.last_flush=-1,p}else if(V.avail_in===0&&Q(Se)<=Q(Ee)&&Se!==h)return oe(V,-5);if(ae.status===666&&V.avail_in!==0)return oe(V,-5);if(V.avail_in!==0||ae.lookahead!==0||Se!==c&&ae.status!==666){var et=ae.strategy===2?function(Re,Qe){for(var gt;;){if(Re.lookahead===0&&(Ae(Re),Re.lookahead===0)){if(Qe===c)return O;break}if(Re.match_length=0,gt=a._tr_tally(Re,0,Re.window[Re.strstart]),Re.lookahead--,Re.strstart++,gt&&(G(Re,!1),Re.strm.avail_out===0))return O}return Re.insert=0,Qe===h?(G(Re,!0),Re.strm.avail_out===0?le:ie):Re.last_lit&&(G(Re,!1),Re.strm.avail_out===0)?O:re}(ae,Se):ae.strategy===3?function(Re,Qe){for(var gt,rt,Je,qt,nn=Re.window;;){if(Re.lookahead<=Z){if(Ae(Re),Re.lookahead<=Z&&Qe===c)return O;if(Re.lookahead===0)break}if(Re.match_length=0,Re.lookahead>=$&&0<Re.strstart&&(rt=nn[Je=Re.strstart-1])===nn[++Je]&&rt===nn[++Je]&&rt===nn[++Je]){qt=Re.strstart+Z;do;while(rt===nn[++Je]&&rt===nn[++Je]&&rt===nn[++Je]&&rt===nn[++Je]&&rt===nn[++Je]&&rt===nn[++Je]&&rt===nn[++Je]&&rt===nn[++Je]&&Je<qt);Re.match_length=Z-(qt-Je),Re.match_length>Re.lookahead&&(Re.match_length=Re.lookahead)}if(Re.match_length>=$?(gt=a._tr_tally(Re,1,Re.match_length-$),Re.lookahead-=Re.match_length,Re.strstart+=Re.match_length,Re.match_length=0):(gt=a._tr_tally(Re,0,Re.window[Re.strstart]),Re.lookahead--,Re.strstart++),gt&&(G(Re,!1),Re.strm.avail_out===0))return O}return Re.insert=0,Qe===h?(G(Re,!0),Re.strm.avail_out===0?le:ie):Re.last_lit&&(G(Re,!1),Re.strm.avail_out===0)?O:re}(ae,Se):r[ae.level].func(ae,Se);if(et!==le&&et!==ie||(ae.status=666),et===O||et===le)return V.avail_out===0&&(ae.last_flush=-1),p;if(et===re&&(Se===1?a._tr_align(ae):Se!==5&&(a._tr_stored_block(ae,0,0,!1),Se===3&&(j(ae.head),ae.lookahead===0&&(ae.strstart=0,ae.block_start=0,ae.insert=0))),H(V),V.avail_out===0))return ae.last_flush=-1,p}return Se!==h?p:ae.wrap<=0?1:(ae.wrap===2?(fe(ae,255&V.adler),fe(ae,V.adler>>8&255),fe(ae,V.adler>>16&255),fe(ae,V.adler>>24&255),fe(ae,255&V.total_in),fe(ae,V.total_in>>8&255),fe(ae,V.total_in>>16&255),fe(ae,V.total_in>>24&255)):(pe(ae,V.adler>>>16),pe(ae,65535&V.adler)),H(V),0<ae.wrap&&(ae.wrap=-ae.wrap),ae.pending!==0?p:1)},n.deflateEnd=function(V){var Se;return V&&V.state?(Se=V.state.status)!==q&&Se!==69&&Se!==73&&Se!==91&&Se!==103&&Se!==W&&Se!==666?oe(V,E):(V.state=null,Se===W?oe(V,-3):p):E},n.deflateSetDictionary=function(V,Se){var Ee,ae,ue,ye,Ve,et,Re,Qe,gt=Se.length;if(!V||!V.state||(ye=(Ee=V.state).wrap)===2||ye===1&&Ee.status!==q||Ee.lookahead)return E;for(ye===1&&(V.adler=s(V.adler,Se,gt,0)),Ee.wrap=0,gt>=Ee.w_size&&(ye===0&&(j(Ee.head),Ee.strstart=0,Ee.block_start=0,Ee.insert=0),Qe=new i.Buf8(Ee.w_size),i.arraySet(Qe,Se,gt-Ee.w_size,Ee.w_size,0),Se=Qe,gt=Ee.w_size),Ve=V.avail_in,et=V.next_in,Re=V.input,V.avail_in=gt,V.next_in=0,V.input=Se,Ae(Ee);Ee.lookahead>=$;){for(ae=Ee.strstart,ue=Ee.lookahead-($-1);Ee.ins_h=(Ee.ins_h<<Ee.hash_shift^Ee.window[ae+$-1])&Ee.hash_mask,Ee.prev[ae&Ee.w_mask]=Ee.head[Ee.ins_h],Ee.head[Ee.ins_h]=ae,ae++,--ue;);Ee.strstart=ae,Ee.lookahead=$-1,Ae(Ee)}return Ee.strstart+=Ee.lookahead,Ee.block_start=Ee.strstart,Ee.insert=Ee.lookahead,Ee.lookahead=0,Ee.match_length=Ee.prev_length=$-1,Ee.match_available=0,V.next_in=et,V.input=Re,V.avail_in=Ve,Ee.wrap=ye,p},n.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(e,t,n){"use strict";t.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(e,t,n){"use strict";t.exports=function(r,i){var a,s,o,l,c,h,p,E,b,C,N,w,I,S,_,P,v,y,$,Z,ce,q,W,O,re;a=r.state,s=r.next_in,O=r.input,o=s+(r.avail_in-5),l=r.next_out,re=r.output,c=l-(i-r.avail_out),h=l+(r.avail_out-257),p=a.dmax,E=a.wsize,b=a.whave,C=a.wnext,N=a.window,w=a.hold,I=a.bits,S=a.lencode,_=a.distcode,P=(1<<a.lenbits)-1,v=(1<<a.distbits)-1;e:do{I<15&&(w+=O[s++]<<I,I+=8,w+=O[s++]<<I,I+=8),y=S[w&P];t:for(;;){if(w>>>=$=y>>>24,I-=$,($=y>>>16&255)===0)re[l++]=65535&y;else{if(!(16&$)){if(!(64&$)){y=S[(65535&y)+(w&(1<<$)-1)];continue t}if(32&$){a.mode=12;break e}r.msg="invalid literal/length code",a.mode=30;break e}Z=65535&y,($&=15)&&(I<$&&(w+=O[s++]<<I,I+=8),Z+=w&(1<<$)-1,w>>>=$,I-=$),I<15&&(w+=O[s++]<<I,I+=8,w+=O[s++]<<I,I+=8),y=_[w&v];n:for(;;){if(w>>>=$=y>>>24,I-=$,!(16&($=y>>>16&255))){if(!(64&$)){y=_[(65535&y)+(w&(1<<$)-1)];continue n}r.msg="invalid distance code",a.mode=30;break e}if(ce=65535&y,I<($&=15)&&(w+=O[s++]<<I,(I+=8)<$&&(w+=O[s++]<<I,I+=8)),p<(ce+=w&(1<<$)-1)){r.msg="invalid distance too far back",a.mode=30;break e}if(w>>>=$,I-=$,($=l-c)<ce){if(b<($=ce-$)&&a.sane){r.msg="invalid distance too far back",a.mode=30;break e}if(W=N,(q=0)===C){if(q+=E-$,$<Z){for(Z-=$;re[l++]=N[q++],--$;);q=l-ce,W=re}}else if(C<$){if(q+=E+C-$,($-=C)<Z){for(Z-=$;re[l++]=N[q++],--$;);if(q=0,C<Z){for(Z-=$=C;re[l++]=N[q++],--$;);q=l-ce,W=re}}}else if(q+=C-$,$<Z){for(Z-=$;re[l++]=N[q++],--$;);q=l-ce,W=re}for(;2<Z;)re[l++]=W[q++],re[l++]=W[q++],re[l++]=W[q++],Z-=3;Z&&(re[l++]=W[q++],1<Z&&(re[l++]=W[q++]))}else{for(q=l-ce;re[l++]=re[q++],re[l++]=re[q++],re[l++]=re[q++],2<(Z-=3););Z&&(re[l++]=re[q++],1<Z&&(re[l++]=re[q++]))}break}}break}}while(s<o&&l<h);s-=Z=I>>3,w&=(1<<(I-=Z<<3))-1,r.next_in=s,r.next_out=l,r.avail_in=s<o?o-s+5:5-(s-o),r.avail_out=l<h?h-l+257:257-(l-h),a.hold=w,a.bits=I}},{}],49:[function(e,t,n){"use strict";var r=e("../utils/common"),i=e("./adler32"),a=e("./crc32"),s=e("./inffast"),o=e("./inftrees"),l=1,c=2,h=0,p=-2,E=1,b=852,C=592;function N(q){return(q>>>24&255)+(q>>>8&65280)+((65280&q)<<8)+((255&q)<<24)}function w(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new r.Buf16(320),this.work=new r.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function I(q){var W;return q&&q.state?(W=q.state,q.total_in=q.total_out=W.total=0,q.msg="",W.wrap&&(q.adler=1&W.wrap),W.mode=E,W.last=0,W.havedict=0,W.dmax=32768,W.head=null,W.hold=0,W.bits=0,W.lencode=W.lendyn=new r.Buf32(b),W.distcode=W.distdyn=new r.Buf32(C),W.sane=1,W.back=-1,h):p}function S(q){var W;return q&&q.state?((W=q.state).wsize=0,W.whave=0,W.wnext=0,I(q)):p}function _(q,W){var O,re;return q&&q.state?(re=q.state,W<0?(O=0,W=-W):(O=1+(W>>4),W<48&&(W&=15)),W&&(W<8||15<W)?p:(re.window!==null&&re.wbits!==W&&(re.window=null),re.wrap=O,re.wbits=W,S(q))):p}function P(q,W){var O,re;return q?(re=new w,(q.state=re).window=null,(O=_(q,W))!==h&&(q.state=null),O):p}var v,y,$=!0;function Z(q){if($){var W;for(v=new r.Buf32(512),y=new r.Buf32(32),W=0;W<144;)q.lens[W++]=8;for(;W<256;)q.lens[W++]=9;for(;W<280;)q.lens[W++]=7;for(;W<288;)q.lens[W++]=8;for(o(l,q.lens,0,288,v,0,q.work,{bits:9}),W=0;W<32;)q.lens[W++]=5;o(c,q.lens,0,32,y,0,q.work,{bits:5}),$=!1}q.lencode=v,q.lenbits=9,q.distcode=y,q.distbits=5}function ce(q,W,O,re){var le,ie=q.state;return ie.window===null&&(ie.wsize=1<<ie.wbits,ie.wnext=0,ie.whave=0,ie.window=new r.Buf8(ie.wsize)),re>=ie.wsize?(r.arraySet(ie.window,W,O-ie.wsize,ie.wsize,0),ie.wnext=0,ie.whave=ie.wsize):(re<(le=ie.wsize-ie.wnext)&&(le=re),r.arraySet(ie.window,W,O-re,le,ie.wnext),(re-=le)?(r.arraySet(ie.window,W,O-re,re,0),ie.wnext=re,ie.whave=ie.wsize):(ie.wnext+=le,ie.wnext===ie.wsize&&(ie.wnext=0),ie.whave<ie.wsize&&(ie.whave+=le))),0}n.inflateReset=S,n.inflateReset2=_,n.inflateResetKeep=I,n.inflateInit=function(q){return P(q,15)},n.inflateInit2=P,n.inflate=function(q,W){var O,re,le,ie,oe,Q,j,H,G,fe,pe,de,Ae,Ie,ve,Te,Me,Ge,at,ft,V,Se,Ee,ae,ue=0,ye=new r.Buf8(4),Ve=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!q||!q.state||!q.output||!q.input&&q.avail_in!==0)return p;(O=q.state).mode===12&&(O.mode=13),oe=q.next_out,le=q.output,j=q.avail_out,ie=q.next_in,re=q.input,Q=q.avail_in,H=O.hold,G=O.bits,fe=Q,pe=j,Se=h;e:for(;;)switch(O.mode){case E:if(O.wrap===0){O.mode=13;break}for(;G<16;){if(Q===0)break e;Q--,H+=re[ie++]<<G,G+=8}if(2&O.wrap&&H===35615){ye[O.check=0]=255&H,ye[1]=H>>>8&255,O.check=a(O.check,ye,2,0),G=H=0,O.mode=2;break}if(O.flags=0,O.head&&(O.head.done=!1),!(1&O.wrap)||(((255&H)<<8)+(H>>8))%31){q.msg="incorrect header check",O.mode=30;break}if((15&H)!=8){q.msg="unknown compression method",O.mode=30;break}if(G-=4,V=8+(15&(H>>>=4)),O.wbits===0)O.wbits=V;else if(V>O.wbits){q.msg="invalid window size",O.mode=30;break}O.dmax=1<<V,q.adler=O.check=1,O.mode=512&H?10:12,G=H=0;break;case 2:for(;G<16;){if(Q===0)break e;Q--,H+=re[ie++]<<G,G+=8}if(O.flags=H,(255&O.flags)!=8){q.msg="unknown compression method",O.mode=30;break}if(57344&O.flags){q.msg="unknown header flags set",O.mode=30;break}O.head&&(O.head.text=H>>8&1),512&O.flags&&(ye[0]=255&H,ye[1]=H>>>8&255,O.check=a(O.check,ye,2,0)),G=H=0,O.mode=3;case 3:for(;G<32;){if(Q===0)break e;Q--,H+=re[ie++]<<G,G+=8}O.head&&(O.head.time=H),512&O.flags&&(ye[0]=255&H,ye[1]=H>>>8&255,ye[2]=H>>>16&255,ye[3]=H>>>24&255,O.check=a(O.check,ye,4,0)),G=H=0,O.mode=4;case 4:for(;G<16;){if(Q===0)break e;Q--,H+=re[ie++]<<G,G+=8}O.head&&(O.head.xflags=255&H,O.head.os=H>>8),512&O.flags&&(ye[0]=255&H,ye[1]=H>>>8&255,O.check=a(O.check,ye,2,0)),G=H=0,O.mode=5;case 5:if(1024&O.flags){for(;G<16;){if(Q===0)break e;Q--,H+=re[ie++]<<G,G+=8}O.length=H,O.head&&(O.head.extra_len=H),512&O.flags&&(ye[0]=255&H,ye[1]=H>>>8&255,O.check=a(O.check,ye,2,0)),G=H=0}else O.head&&(O.head.extra=null);O.mode=6;case 6:if(1024&O.flags&&(Q<(de=O.length)&&(de=Q),de&&(O.head&&(V=O.head.extra_len-O.length,O.head.extra||(O.head.extra=new Array(O.head.extra_len)),r.arraySet(O.head.extra,re,ie,de,V)),512&O.flags&&(O.check=a(O.check,re,de,ie)),Q-=de,ie+=de,O.length-=de),O.length))break e;O.length=0,O.mode=7;case 7:if(2048&O.flags){if(Q===0)break e;for(de=0;V=re[ie+de++],O.head&&V&&O.length<65536&&(O.head.name+=String.fromCharCode(V)),V&&de<Q;);if(512&O.flags&&(O.check=a(O.check,re,de,ie)),Q-=de,ie+=de,V)break e}else O.head&&(O.head.name=null);O.length=0,O.mode=8;case 8:if(4096&O.flags){if(Q===0)break e;for(de=0;V=re[ie+de++],O.head&&V&&O.length<65536&&(O.head.comment+=String.fromCharCode(V)),V&&de<Q;);if(512&O.flags&&(O.check=a(O.check,re,de,ie)),Q-=de,ie+=de,V)break e}else O.head&&(O.head.comment=null);O.mode=9;case 9:if(512&O.flags){for(;G<16;){if(Q===0)break e;Q--,H+=re[ie++]<<G,G+=8}if(H!==(65535&O.check)){q.msg="header crc mismatch",O.mode=30;break}G=H=0}O.head&&(O.head.hcrc=O.flags>>9&1,O.head.done=!0),q.adler=O.check=0,O.mode=12;break;case 10:for(;G<32;){if(Q===0)break e;Q--,H+=re[ie++]<<G,G+=8}q.adler=O.check=N(H),G=H=0,O.mode=11;case 11:if(O.havedict===0)return q.next_out=oe,q.avail_out=j,q.next_in=ie,q.avail_in=Q,O.hold=H,O.bits=G,2;q.adler=O.check=1,O.mode=12;case 12:if(W===5||W===6)break e;case 13:if(O.last){H>>>=7&G,G-=7&G,O.mode=27;break}for(;G<3;){if(Q===0)break e;Q--,H+=re[ie++]<<G,G+=8}switch(O.last=1&H,G-=1,3&(H>>>=1)){case 0:O.mode=14;break;case 1:if(Z(O),O.mode=20,W!==6)break;H>>>=2,G-=2;break e;case 2:O.mode=17;break;case 3:q.msg="invalid block type",O.mode=30}H>>>=2,G-=2;break;case 14:for(H>>>=7&G,G-=7&G;G<32;){if(Q===0)break e;Q--,H+=re[ie++]<<G,G+=8}if((65535&H)!=(H>>>16^65535)){q.msg="invalid stored block lengths",O.mode=30;break}if(O.length=65535&H,G=H=0,O.mode=15,W===6)break e;case 15:O.mode=16;case 16:if(de=O.length){if(Q<de&&(de=Q),j<de&&(de=j),de===0)break e;r.arraySet(le,re,ie,de,oe),Q-=de,ie+=de,j-=de,oe+=de,O.length-=de;break}O.mode=12;break;case 17:for(;G<14;){if(Q===0)break e;Q--,H+=re[ie++]<<G,G+=8}if(O.nlen=257+(31&H),H>>>=5,G-=5,O.ndist=1+(31&H),H>>>=5,G-=5,O.ncode=4+(15&H),H>>>=4,G-=4,286<O.nlen||30<O.ndist){q.msg="too many length or distance symbols",O.mode=30;break}O.have=0,O.mode=18;case 18:for(;O.have<O.ncode;){for(;G<3;){if(Q===0)break e;Q--,H+=re[ie++]<<G,G+=8}O.lens[Ve[O.have++]]=7&H,H>>>=3,G-=3}for(;O.have<19;)O.lens[Ve[O.have++]]=0;if(O.lencode=O.lendyn,O.lenbits=7,Ee={bits:O.lenbits},Se=o(0,O.lens,0,19,O.lencode,0,O.work,Ee),O.lenbits=Ee.bits,Se){q.msg="invalid code lengths set",O.mode=30;break}O.have=0,O.mode=19;case 19:for(;O.have<O.nlen+O.ndist;){for(;Te=(ue=O.lencode[H&(1<<O.lenbits)-1])>>>16&255,Me=65535&ue,!((ve=ue>>>24)<=G);){if(Q===0)break e;Q--,H+=re[ie++]<<G,G+=8}if(Me<16)H>>>=ve,G-=ve,O.lens[O.have++]=Me;else{if(Me===16){for(ae=ve+2;G<ae;){if(Q===0)break e;Q--,H+=re[ie++]<<G,G+=8}if(H>>>=ve,G-=ve,O.have===0){q.msg="invalid bit length repeat",O.mode=30;break}V=O.lens[O.have-1],de=3+(3&H),H>>>=2,G-=2}else if(Me===17){for(ae=ve+3;G<ae;){if(Q===0)break e;Q--,H+=re[ie++]<<G,G+=8}G-=ve,V=0,de=3+(7&(H>>>=ve)),H>>>=3,G-=3}else{for(ae=ve+7;G<ae;){if(Q===0)break e;Q--,H+=re[ie++]<<G,G+=8}G-=ve,V=0,de=11+(127&(H>>>=ve)),H>>>=7,G-=7}if(O.have+de>O.nlen+O.ndist){q.msg="invalid bit length repeat",O.mode=30;break}for(;de--;)O.lens[O.have++]=V}}if(O.mode===30)break;if(O.lens[256]===0){q.msg="invalid code -- missing end-of-block",O.mode=30;break}if(O.lenbits=9,Ee={bits:O.lenbits},Se=o(l,O.lens,0,O.nlen,O.lencode,0,O.work,Ee),O.lenbits=Ee.bits,Se){q.msg="invalid literal/lengths set",O.mode=30;break}if(O.distbits=6,O.distcode=O.distdyn,Ee={bits:O.distbits},Se=o(c,O.lens,O.nlen,O.ndist,O.distcode,0,O.work,Ee),O.distbits=Ee.bits,Se){q.msg="invalid distances set",O.mode=30;break}if(O.mode=20,W===6)break e;case 20:O.mode=21;case 21:if(6<=Q&&258<=j){q.next_out=oe,q.avail_out=j,q.next_in=ie,q.avail_in=Q,O.hold=H,O.bits=G,s(q,pe),oe=q.next_out,le=q.output,j=q.avail_out,ie=q.next_in,re=q.input,Q=q.avail_in,H=O.hold,G=O.bits,O.mode===12&&(O.back=-1);break}for(O.back=0;Te=(ue=O.lencode[H&(1<<O.lenbits)-1])>>>16&255,Me=65535&ue,!((ve=ue>>>24)<=G);){if(Q===0)break e;Q--,H+=re[ie++]<<G,G+=8}if(Te&&!(240&Te)){for(Ge=ve,at=Te,ft=Me;Te=(ue=O.lencode[ft+((H&(1<<Ge+at)-1)>>Ge)])>>>16&255,Me=65535&ue,!(Ge+(ve=ue>>>24)<=G);){if(Q===0)break e;Q--,H+=re[ie++]<<G,G+=8}H>>>=Ge,G-=Ge,O.back+=Ge}if(H>>>=ve,G-=ve,O.back+=ve,O.length=Me,Te===0){O.mode=26;break}if(32&Te){O.back=-1,O.mode=12;break}if(64&Te){q.msg="invalid literal/length code",O.mode=30;break}O.extra=15&Te,O.mode=22;case 22:if(O.extra){for(ae=O.extra;G<ae;){if(Q===0)break e;Q--,H+=re[ie++]<<G,G+=8}O.length+=H&(1<<O.extra)-1,H>>>=O.extra,G-=O.extra,O.back+=O.extra}O.was=O.length,O.mode=23;case 23:for(;Te=(ue=O.distcode[H&(1<<O.distbits)-1])>>>16&255,Me=65535&ue,!((ve=ue>>>24)<=G);){if(Q===0)break e;Q--,H+=re[ie++]<<G,G+=8}if(!(240&Te)){for(Ge=ve,at=Te,ft=Me;Te=(ue=O.distcode[ft+((H&(1<<Ge+at)-1)>>Ge)])>>>16&255,Me=65535&ue,!(Ge+(ve=ue>>>24)<=G);){if(Q===0)break e;Q--,H+=re[ie++]<<G,G+=8}H>>>=Ge,G-=Ge,O.back+=Ge}if(H>>>=ve,G-=ve,O.back+=ve,64&Te){q.msg="invalid distance code",O.mode=30;break}O.offset=Me,O.extra=15&Te,O.mode=24;case 24:if(O.extra){for(ae=O.extra;G<ae;){if(Q===0)break e;Q--,H+=re[ie++]<<G,G+=8}O.offset+=H&(1<<O.extra)-1,H>>>=O.extra,G-=O.extra,O.back+=O.extra}if(O.offset>O.dmax){q.msg="invalid distance too far back",O.mode=30;break}O.mode=25;case 25:if(j===0)break e;if(de=pe-j,O.offset>de){if((de=O.offset-de)>O.whave&&O.sane){q.msg="invalid distance too far back",O.mode=30;break}Ae=de>O.wnext?(de-=O.wnext,O.wsize-de):O.wnext-de,de>O.length&&(de=O.length),Ie=O.window}else Ie=le,Ae=oe-O.offset,de=O.length;for(j<de&&(de=j),j-=de,O.length-=de;le[oe++]=Ie[Ae++],--de;);O.length===0&&(O.mode=21);break;case 26:if(j===0)break e;le[oe++]=O.length,j--,O.mode=21;break;case 27:if(O.wrap){for(;G<32;){if(Q===0)break e;Q--,H|=re[ie++]<<G,G+=8}if(pe-=j,q.total_out+=pe,O.total+=pe,pe&&(q.adler=O.check=O.flags?a(O.check,le,pe,oe-pe):i(O.check,le,pe,oe-pe)),pe=j,(O.flags?H:N(H))!==O.check){q.msg="incorrect data check",O.mode=30;break}G=H=0}O.mode=28;case 28:if(O.wrap&&O.flags){for(;G<32;){if(Q===0)break e;Q--,H+=re[ie++]<<G,G+=8}if(H!==(4294967295&O.total)){q.msg="incorrect length check",O.mode=30;break}G=H=0}O.mode=29;case 29:Se=1;break e;case 30:Se=-3;break e;case 31:return-4;case 32:default:return p}return q.next_out=oe,q.avail_out=j,q.next_in=ie,q.avail_in=Q,O.hold=H,O.bits=G,(O.wsize||pe!==q.avail_out&&O.mode<30&&(O.mode<27||W!==4))&&ce(q,q.output,q.next_out,pe-q.avail_out)?(O.mode=31,-4):(fe-=q.avail_in,pe-=q.avail_out,q.total_in+=fe,q.total_out+=pe,O.total+=pe,O.wrap&&pe&&(q.adler=O.check=O.flags?a(O.check,le,pe,q.next_out-pe):i(O.check,le,pe,q.next_out-pe)),q.data_type=O.bits+(O.last?64:0)+(O.mode===12?128:0)+(O.mode===20||O.mode===15?256:0),(fe==0&&pe===0||W===4)&&Se===h&&(Se=-5),Se)},n.inflateEnd=function(q){if(!q||!q.state)return p;var W=q.state;return W.window&&(W.window=null),q.state=null,h},n.inflateGetHeader=function(q,W){var O;return q&&q.state&&2&(O=q.state).wrap?((O.head=W).done=!1,h):p},n.inflateSetDictionary=function(q,W){var O,re=W.length;return q&&q.state?(O=q.state).wrap!==0&&O.mode!==11?p:O.mode===11&&i(1,W,re,0)!==O.check?-3:ce(q,W,re,re)?(O.mode=31,-4):(O.havedict=1,h):p},n.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(e,t,n){"use strict";var r=e("../utils/common"),i=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],a=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],s=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],o=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];t.exports=function(l,c,h,p,E,b,C,N){var w,I,S,_,P,v,y,$,Z,ce=N.bits,q=0,W=0,O=0,re=0,le=0,ie=0,oe=0,Q=0,j=0,H=0,G=null,fe=0,pe=new r.Buf16(16),de=new r.Buf16(16),Ae=null,Ie=0;for(q=0;q<=15;q++)pe[q]=0;for(W=0;W<p;W++)pe[c[h+W]]++;for(le=ce,re=15;1<=re&&pe[re]===0;re--);if(re<le&&(le=re),re===0)return E[b++]=20971520,E[b++]=20971520,N.bits=1,0;for(O=1;O<re&&pe[O]===0;O++);for(le<O&&(le=O),q=Q=1;q<=15;q++)if(Q<<=1,(Q-=pe[q])<0)return-1;if(0<Q&&(l===0||re!==1))return-1;for(de[1]=0,q=1;q<15;q++)de[q+1]=de[q]+pe[q];for(W=0;W<p;W++)c[h+W]!==0&&(C[de[c[h+W]]++]=W);if(v=l===0?(G=Ae=C,19):l===1?(G=i,fe-=257,Ae=a,Ie-=257,256):(G=s,Ae=o,-1),q=O,P=b,oe=W=H=0,S=-1,_=(j=1<<(ie=le))-1,l===1&&852<j||l===2&&592<j)return 1;for(;;){for(y=q-oe,Z=C[W]<v?($=0,C[W]):C[W]>v?($=Ae[Ie+C[W]],G[fe+C[W]]):($=96,0),w=1<<q-oe,O=I=1<<ie;E[P+(H>>oe)+(I-=w)]=y<<24|$<<16|Z|0,I!==0;);for(w=1<<q-1;H&w;)w>>=1;if(w!==0?(H&=w-1,H+=w):H=0,W++,--pe[q]==0){if(q===re)break;q=c[h+C[W]]}if(le<q&&(H&_)!==S){for(oe===0&&(oe=le),P+=O,Q=1<<(ie=q-oe);ie+oe<re&&!((Q-=pe[ie+oe])<=0);)ie++,Q<<=1;if(j+=1<<ie,l===1&&852<j||l===2&&592<j)return 1;E[S=H&_]=le<<24|ie<<16|P-b|0}}return H!==0&&(E[P+H]=q-oe<<24|64<<16|0),N.bits=le,0}},{"../utils/common":41}],51:[function(e,t,n){"use strict";t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(e,t,n){"use strict";var r=e("../utils/common"),i=0,a=1;function s(ue){for(var ye=ue.length;0<=--ye;)ue[ye]=0}var o=0,l=29,c=256,h=c+1+l,p=30,E=19,b=2*h+1,C=15,N=16,w=7,I=256,S=16,_=17,P=18,v=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],y=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],$=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],Z=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],ce=new Array(2*(h+2));s(ce);var q=new Array(2*p);s(q);var W=new Array(512);s(W);var O=new Array(256);s(O);var re=new Array(l);s(re);var le,ie,oe,Q=new Array(p);function j(ue,ye,Ve,et,Re){this.static_tree=ue,this.extra_bits=ye,this.extra_base=Ve,this.elems=et,this.max_length=Re,this.has_stree=ue&&ue.length}function H(ue,ye){this.dyn_tree=ue,this.max_code=0,this.stat_desc=ye}function G(ue){return ue<256?W[ue]:W[256+(ue>>>7)]}function fe(ue,ye){ue.pending_buf[ue.pending++]=255&ye,ue.pending_buf[ue.pending++]=ye>>>8&255}function pe(ue,ye,Ve){ue.bi_valid>N-Ve?(ue.bi_buf|=ye<<ue.bi_valid&65535,fe(ue,ue.bi_buf),ue.bi_buf=ye>>N-ue.bi_valid,ue.bi_valid+=Ve-N):(ue.bi_buf|=ye<<ue.bi_valid&65535,ue.bi_valid+=Ve)}function de(ue,ye,Ve){pe(ue,Ve[2*ye],Ve[2*ye+1])}function Ae(ue,ye){for(var Ve=0;Ve|=1&ue,ue>>>=1,Ve<<=1,0<--ye;);return Ve>>>1}function Ie(ue,ye,Ve){var et,Re,Qe=new Array(C+1),gt=0;for(et=1;et<=C;et++)Qe[et]=gt=gt+Ve[et-1]<<1;for(Re=0;Re<=ye;Re++){var rt=ue[2*Re+1];rt!==0&&(ue[2*Re]=Ae(Qe[rt]++,rt))}}function ve(ue){var ye;for(ye=0;ye<h;ye++)ue.dyn_ltree[2*ye]=0;for(ye=0;ye<p;ye++)ue.dyn_dtree[2*ye]=0;for(ye=0;ye<E;ye++)ue.bl_tree[2*ye]=0;ue.dyn_ltree[2*I]=1,ue.opt_len=ue.static_len=0,ue.last_lit=ue.matches=0}function Te(ue){8<ue.bi_valid?fe(ue,ue.bi_buf):0<ue.bi_valid&&(ue.pending_buf[ue.pending++]=ue.bi_buf),ue.bi_buf=0,ue.bi_valid=0}function Me(ue,ye,Ve,et){var Re=2*ye,Qe=2*Ve;return ue[Re]<ue[Qe]||ue[Re]===ue[Qe]&&et[ye]<=et[Ve]}function Ge(ue,ye,Ve){for(var et=ue.heap[Ve],Re=Ve<<1;Re<=ue.heap_len&&(Re<ue.heap_len&&Me(ye,ue.heap[Re+1],ue.heap[Re],ue.depth)&&Re++,!Me(ye,et,ue.heap[Re],ue.depth));)ue.heap[Ve]=ue.heap[Re],Ve=Re,Re<<=1;ue.heap[Ve]=et}function at(ue,ye,Ve){var et,Re,Qe,gt,rt=0;if(ue.last_lit!==0)for(;et=ue.pending_buf[ue.d_buf+2*rt]<<8|ue.pending_buf[ue.d_buf+2*rt+1],Re=ue.pending_buf[ue.l_buf+rt],rt++,et===0?de(ue,Re,ye):(de(ue,(Qe=O[Re])+c+1,ye),(gt=v[Qe])!==0&&pe(ue,Re-=re[Qe],gt),de(ue,Qe=G(--et),Ve),(gt=y[Qe])!==0&&pe(ue,et-=Q[Qe],gt)),rt<ue.last_lit;);de(ue,I,ye)}function ft(ue,ye){var Ve,et,Re,Qe=ye.dyn_tree,gt=ye.stat_desc.static_tree,rt=ye.stat_desc.has_stree,Je=ye.stat_desc.elems,qt=-1;for(ue.heap_len=0,ue.heap_max=b,Ve=0;Ve<Je;Ve++)Qe[2*Ve]!==0?(ue.heap[++ue.heap_len]=qt=Ve,ue.depth[Ve]=0):Qe[2*Ve+1]=0;for(;ue.heap_len<2;)Qe[2*(Re=ue.heap[++ue.heap_len]=qt<2?++qt:0)]=1,ue.depth[Re]=0,ue.opt_len--,rt&&(ue.static_len-=gt[2*Re+1]);for(ye.max_code=qt,Ve=ue.heap_len>>1;1<=Ve;Ve--)Ge(ue,Qe,Ve);for(Re=Je;Ve=ue.heap[1],ue.heap[1]=ue.heap[ue.heap_len--],Ge(ue,Qe,1),et=ue.heap[1],ue.heap[--ue.heap_max]=Ve,ue.heap[--ue.heap_max]=et,Qe[2*Re]=Qe[2*Ve]+Qe[2*et],ue.depth[Re]=(ue.depth[Ve]>=ue.depth[et]?ue.depth[Ve]:ue.depth[et])+1,Qe[2*Ve+1]=Qe[2*et+1]=Re,ue.heap[1]=Re++,Ge(ue,Qe,1),2<=ue.heap_len;);ue.heap[--ue.heap_max]=ue.heap[1],function(nn,Er){var zi,Lr,bi,dn,Kn,kr,yr=Er.dyn_tree,lr=Er.max_code,cr=Er.stat_desc.static_tree,_a=Er.stat_desc.has_stree,Qa=Er.stat_desc.extra_bits,Hi=Er.stat_desc.extra_base,Mr=Er.stat_desc.max_length,Cr=0;for(dn=0;dn<=C;dn++)nn.bl_count[dn]=0;for(yr[2*nn.heap[nn.heap_max]+1]=0,zi=nn.heap_max+1;zi<b;zi++)Mr<(dn=yr[2*yr[2*(Lr=nn.heap[zi])+1]+1]+1)&&(dn=Mr,Cr++),yr[2*Lr+1]=dn,lr<Lr||(nn.bl_count[dn]++,Kn=0,Hi<=Lr&&(Kn=Qa[Lr-Hi]),kr=yr[2*Lr],nn.opt_len+=kr*(dn+Kn),_a&&(nn.static_len+=kr*(cr[2*Lr+1]+Kn)));if(Cr!==0){do{for(dn=Mr-1;nn.bl_count[dn]===0;)dn--;nn.bl_count[dn]--,nn.bl_count[dn+1]+=2,nn.bl_count[Mr]--,Cr-=2}while(0<Cr);for(dn=Mr;dn!==0;dn--)for(Lr=nn.bl_count[dn];Lr!==0;)lr<(bi=nn.heap[--zi])||(yr[2*bi+1]!==dn&&(nn.opt_len+=(dn-yr[2*bi+1])*yr[2*bi],yr[2*bi+1]=dn),Lr--)}}(ue,ye),Ie(Qe,qt,ue.bl_count)}function V(ue,ye,Ve){var et,Re,Qe=-1,gt=ye[1],rt=0,Je=7,qt=4;for(gt===0&&(Je=138,qt=3),ye[2*(Ve+1)+1]=65535,et=0;et<=Ve;et++)Re=gt,gt=ye[2*(et+1)+1],++rt<Je&&Re===gt||(rt<qt?ue.bl_tree[2*Re]+=rt:Re!==0?(Re!==Qe&&ue.bl_tree[2*Re]++,ue.bl_tree[2*S]++):rt<=10?ue.bl_tree[2*_]++:ue.bl_tree[2*P]++,Qe=Re,qt=(rt=0)===gt?(Je=138,3):Re===gt?(Je=6,3):(Je=7,4))}function Se(ue,ye,Ve){var et,Re,Qe=-1,gt=ye[1],rt=0,Je=7,qt=4;for(gt===0&&(Je=138,qt=3),et=0;et<=Ve;et++)if(Re=gt,gt=ye[2*(et+1)+1],!(++rt<Je&&Re===gt)){if(rt<qt)for(;de(ue,Re,ue.bl_tree),--rt!=0;);else Re!==0?(Re!==Qe&&(de(ue,Re,ue.bl_tree),rt--),de(ue,S,ue.bl_tree),pe(ue,rt-3,2)):rt<=10?(de(ue,_,ue.bl_tree),pe(ue,rt-3,3)):(de(ue,P,ue.bl_tree),pe(ue,rt-11,7));Qe=Re,qt=(rt=0)===gt?(Je=138,3):Re===gt?(Je=6,3):(Je=7,4)}}s(Q);var Ee=!1;function ae(ue,ye,Ve,et){pe(ue,(o<<1)+(et?1:0),3),function(Re,Qe,gt,rt){Te(Re),rt&&(fe(Re,gt),fe(Re,~gt)),r.arraySet(Re.pending_buf,Re.window,Qe,gt,Re.pending),Re.pending+=gt}(ue,ye,Ve,!0)}n._tr_init=function(ue){Ee||(function(){var ye,Ve,et,Re,Qe,gt=new Array(C+1);for(Re=et=0;Re<l-1;Re++)for(re[Re]=et,ye=0;ye<1<<v[Re];ye++)O[et++]=Re;for(O[et-1]=Re,Re=Qe=0;Re<16;Re++)for(Q[Re]=Qe,ye=0;ye<1<<y[Re];ye++)W[Qe++]=Re;for(Qe>>=7;Re<p;Re++)for(Q[Re]=Qe<<7,ye=0;ye<1<<y[Re]-7;ye++)W[256+Qe++]=Re;for(Ve=0;Ve<=C;Ve++)gt[Ve]=0;for(ye=0;ye<=143;)ce[2*ye+1]=8,ye++,gt[8]++;for(;ye<=255;)ce[2*ye+1]=9,ye++,gt[9]++;for(;ye<=279;)ce[2*ye+1]=7,ye++,gt[7]++;for(;ye<=287;)ce[2*ye+1]=8,ye++,gt[8]++;for(Ie(ce,h+1,gt),ye=0;ye<p;ye++)q[2*ye+1]=5,q[2*ye]=Ae(ye,5);le=new j(ce,v,c+1,h,C),ie=new j(q,y,0,p,C),oe=new j(new Array(0),$,0,E,w)}(),Ee=!0),ue.l_desc=new H(ue.dyn_ltree,le),ue.d_desc=new H(ue.dyn_dtree,ie),ue.bl_desc=new H(ue.bl_tree,oe),ue.bi_buf=0,ue.bi_valid=0,ve(ue)},n._tr_stored_block=ae,n._tr_flush_block=function(ue,ye,Ve,et){var Re,Qe,gt=0;0<ue.level?(ue.strm.data_type===2&&(ue.strm.data_type=function(rt){var Je,qt=4093624447;for(Je=0;Je<=31;Je++,qt>>>=1)if(1&qt&&rt.dyn_ltree[2*Je]!==0)return i;if(rt.dyn_ltree[18]!==0||rt.dyn_ltree[20]!==0||rt.dyn_ltree[26]!==0)return a;for(Je=32;Je<c;Je++)if(rt.dyn_ltree[2*Je]!==0)return a;return i}(ue)),ft(ue,ue.l_desc),ft(ue,ue.d_desc),gt=function(rt){var Je;for(V(rt,rt.dyn_ltree,rt.l_desc.max_code),V(rt,rt.dyn_dtree,rt.d_desc.max_code),ft(rt,rt.bl_desc),Je=E-1;3<=Je&&rt.bl_tree[2*Z[Je]+1]===0;Je--);return rt.opt_len+=3*(Je+1)+5+5+4,Je}(ue),Re=ue.opt_len+3+7>>>3,(Qe=ue.static_len+3+7>>>3)<=Re&&(Re=Qe)):Re=Qe=Ve+5,Ve+4<=Re&&ye!==-1?ae(ue,ye,Ve,et):ue.strategy===4||Qe===Re?(pe(ue,2+(et?1:0),3),at(ue,ce,q)):(pe(ue,4+(et?1:0),3),function(rt,Je,qt,nn){var Er;for(pe(rt,Je-257,5),pe(rt,qt-1,5),pe(rt,nn-4,4),Er=0;Er<nn;Er++)pe(rt,rt.bl_tree[2*Z[Er]+1],3);Se(rt,rt.dyn_ltree,Je-1),Se(rt,rt.dyn_dtree,qt-1)}(ue,ue.l_desc.max_code+1,ue.d_desc.max_code+1,gt+1),at(ue,ue.dyn_ltree,ue.dyn_dtree)),ve(ue),et&&Te(ue)},n._tr_tally=function(ue,ye,Ve){return ue.pending_buf[ue.d_buf+2*ue.last_lit]=ye>>>8&255,ue.pending_buf[ue.d_buf+2*ue.last_lit+1]=255&ye,ue.pending_buf[ue.l_buf+ue.last_lit]=255&Ve,ue.last_lit++,ye===0?ue.dyn_ltree[2*Ve]++:(ue.matches++,ye--,ue.dyn_ltree[2*(O[Ve]+c+1)]++,ue.dyn_dtree[2*G(ye)]++),ue.last_lit===ue.lit_bufsize-1},n._tr_align=function(ue){pe(ue,2,3),de(ue,I,ce),function(ye){ye.bi_valid===16?(fe(ye,ye.bi_buf),ye.bi_buf=0,ye.bi_valid=0):8<=ye.bi_valid&&(ye.pending_buf[ye.pending++]=255&ye.bi_buf,ye.bi_buf>>=8,ye.bi_valid-=8)}(ue)}},{"../utils/common":41}],53:[function(e,t,n){"use strict";t.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(e,t,n){(function(r){(function(i,a){"use strict";if(!i.setImmediate){var s,o,l,c,h=1,p={},E=!1,b=i.document,C=Object.getPrototypeOf&&Object.getPrototypeOf(i);C=C&&C.setTimeout?C:i,s={}.toString.call(i.process)==="[object process]"?function(S){process.nextTick(function(){w(S)})}:function(){if(i.postMessage&&!i.importScripts){var S=!0,_=i.onmessage;return i.onmessage=function(){S=!1},i.postMessage("","*"),i.onmessage=_,S}}()?(c="setImmediate$"+Math.random()+"$",i.addEventListener?i.addEventListener("message",I,!1):i.attachEvent("onmessage",I),function(S){i.postMessage(c+S,"*")}):i.MessageChannel?((l=new MessageChannel).port1.onmessage=function(S){w(S.data)},function(S){l.port2.postMessage(S)}):b&&"onreadystatechange"in b.createElement("script")?(o=b.documentElement,function(S){var _=b.createElement("script");_.onreadystatechange=function(){w(S),_.onreadystatechange=null,o.removeChild(_),_=null},o.appendChild(_)}):function(S){setTimeout(w,0,S)},C.setImmediate=function(S){typeof S!="function"&&(S=new Function(""+S));for(var _=new Array(arguments.length-1),P=0;P<_.length;P++)_[P]=arguments[P+1];var v={callback:S,args:_};return p[h]=v,s(h),h++},C.clearImmediate=N}function N(S){delete p[S]}function w(S){if(E)setTimeout(w,0,S);else{var _=p[S];if(_){E=!0;try{(function(P){var v=P.callback,y=P.args;switch(y.length){case 0:v();break;case 1:v(y[0]);break;case 2:v(y[0],y[1]);break;case 3:v(y[0],y[1],y[2]);break;default:v.apply(a,y)}})(_)}finally{N(S),E=!1}}}}function I(S){S.source===i&&typeof S.data=="string"&&S.data.indexOf(c)===0&&w(+S.data.slice(c.length))}})(typeof self>"u"?r===void 0?this:r:self)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})});var kb=Yt(u0());var hb=Yt(fb());function db(){let e=(0,hb.default)();this.xml.jsEvaluate=e.evaluate}var Pa=document.createTreeWalker(document.documentElement,NodeFilter.SHOW_COMMENT),Np=(e,t,n={})=>{let{maxItems:r,startElement:i}=n,a=Pa.currentNode;Pa.currentNode=i!=null?i:e;let s=[];for(;Pa.nextNode()!=null;){let o=Pa.currentNode;if(!e.contains(o)||t(o.data)&&(s.push(o),r!=null&&s.length===r))break}return Pa.currentNode=a,s},Pp=(e,t,n)=>{let r=Pa.currentNode;Pa.currentNode=e;let i=-1,a=null;for(;i<n&&Pa.nextNode()!=null;){let s=Pa.currentNode;if(s.data===t&&(i+=1,i===n)){a=s;break}}return Pa.currentNode=r,a};var pb=Symbol("BREAK"),gb=new Set,Xf=new Set,_u=class{constructor(t,n,r,i,a){var b,C;if(gb.has(t))throw new Error(`The id parameter must be unique per form, "${t}" is already used`);Xf.add(this),this.id=t,this.form=n,this.rootElement=r,this.prefix=`${t}:`,this.selector=i,this.refAttr=a!=null?a:null,this.refs=new Set,this.repeatDescendantRefs=new Set,this.topLevelGroupRefs=new Set,this.refIndexCache=new Map([["",new WeakMap]]),this.refElementsCache=new Map;let{refs:s}=this,o=r.querySelectorAll(i),l=o[0],c=l==null||l.parentElement==null;this.isNoop=c,this.startElement=c?r:(b=l==null?void 0:l.previousElementSibling)!=null?b:r,this.startElementContainer=c?r:(C=this.startElement.closest(".or-group"))!=null?C:r;let h=l==null?void 0:l.nodeName.toLowerCase();this.commentToElementKey=h==="input"?"nextElementSibling":"parentElement";let p=h==="input"?(N,w)=>{N.before(w)}:(N,w)=>{N.prepend(w)},E=n.initialized?!n.features.repeat:r.querySelector(".or-repeat")==null;o.forEach(N=>{let w=a==null?"":N.getAttribute(a);if(w==null)return;this.refs.has(w)||(s.add(w),!E&&N.closest(".or-repeat")!=null?(this.repeatDescendantRefs.add(w),this.refIndexCache.set(w,new WeakMap)):(this.refElementsCache.set(w,[N]),this.refIndexCache.set(w,new WeakMap([[N,0]]))));let I=document.createComment(`${t}:${w}`);p(N,I)}),this.isStatic=this.isNoop||(n.initialized?!n.features.repeat:r.querySelector(".or-repeat")==null)||this.repeatDescendantRefs.size===0}reset(){this.isNoop=!0,this.isStatic=!0,this.refs=new Set,this.repeatDescendantRefs=new Set,this.topLevelGroupRefs=new Set,this.refIndexCache=new Map([["",new WeakMap]]),this.refElementsCache=new Map,this.rootElement=document.createElement("no-op")}invalidate(t){if(this.isNoop||this.isStatic)return;this.refElementsCache.delete(""),this.refIndexCache.set("",new WeakMap);let n=Array.from(this.repeatDescendantRefs);if(t!=null){let r=`${t}/`;n=n.filter(i=>i===t||i.startsWith(r))}for(let r of n)this.refElementsCache.delete(r),this.refIndexCache.set(r,new WeakMap)}hasRef(t){return this.refs.has(t)}walk(t,n={}){let{isNoop:r,prefix:i,rootElement:a}=this;if(r)return;let{matchRef:s}=n,o=0,{startElement:l,startElementContainer:c}=this;c.isConnected||(c=a,this.startElementContainer=c),l.isConnected||(l=c.isConnected?c:this.rootElement,this.startElement=l);let h=s?`${i}${s}`:null,p=Np(a,h==null?b=>b.startsWith(i):b=>b===h,{startElement:l}),{commentToElementKey:E}=this;for(let b of p){let C=b[E];if(t(C,o)===pb)break;o+=1}}collect(t={}){let{cacheIndexes:n=!1,matchRef:r}=t,i=[];return this.walk((a,s)=>{i.push(a),n&&this.setRefIndexCache(a,s)},{matchRef:r}),i}getIndex(t,n={}){let{matchRef:r,cacheIndexes:i=r!=null}=n,a=-1;return this.walk((s,o)=>{if(i&&this.setRefIndexCache(s,o,r!=null?r:""),s===t)return a=o,pb},{matchRef:r}),a}getElements(){return this.getElementsByRef("")}getElement(t=0){return this.getElements()[t]}getElementsByRef(t){if(this.isNoop)return[];let n=this.refElementsCache.get(t);if(n==null){let r=t!==""||this.refAttr==null,i=t||null;n=this.collect({cacheIndexes:r,matchRef:i}),this.refElementsCache.set(t,n)}return n}getElementByRef(t,n=0){return this.getElementsByRef(t)[n]}indexOf(t){return this.isNoop?0:this.getIndex(t)}setRefIndexCache(t,n,r=this.refAttr==null?"":(i=>(i=t.getAttribute(this.refAttr))!=null?i:"")()){let a=this.refIndexCache.get(r);a==null&&(a=new WeakMap,this.refIndexCache.set(r,a)),a.set(t,n)}refIndexOf(t,n){var i;if(this.isNoop)return 0;let r=(i=this.refIndexCache.get(n))==null?void 0:i.get(t);return(r==null||r===-1&&this.rootElement.contains(t))&&(r=this.getIndex(t,{matchRef:n}),this.setRefIndexCache(t,r)),r}},Dp=e=>{let t=e.view.html;for(Pa.currentNode=t;Pa.nextNode()!=null;);let n={valueChanged:e.features.valueChangedAction?new _u("valueChangedActions",e,t,".xforms-value-changed","name"):null},r=new _u("groups",e,t,".or-group, .or-group-data","name"),i=new _u("refTargetContainers",e,t,".contains-ref-target","data-contains-ref-target"),a=new _u("repeats",e,t,".or-repeat","name"),s=new _u("repeatInfos",e,t,".or-repeat-info","data-name");return{actions:n,groups:r,refTargetContainers:i,repeats:a,repeatInfos:s}},Yf=e=>{for(let t of Xf)t.invalidate(e)},Rp=()=>{for(let e of Xf)e.reset();gb=new Set,Xf=new Set};var Op=e=>{let t=e.querySelector(".action")!=null,n=t||e.querySelector("[data-calculate]")!=null,r=t&&e.querySelector(".odk-instance-first-load")!=null,i=e.querySelector(".itemset-template")!=null,a=t&&e.querySelector(".odk-new-repeat")!=null,s=e.querySelector(".or-output")!=null,o=e.classList.contains("pages"),l=e.querySelector("[data-relevant]")!=null,c=e.querySelector(".or-repeat")!=null,h=c&&e.querySelector(".or-repeat-info[data-repeat-count]")!=null,p=e.querySelector("[data-required]")!=null,E=e.querySelector(".xforms-value-changed")!=null;return{action:t,calculate:n,instanceFirstLoadAction:r,itemset:i,newRepeatAction:a,output:s,pagination:o,relevant:l,repeatCount:h,repeat:c,required:p,valueChangedAction:E}};var Bp=e=>{var l,c,h,p,E;if(e.input==null)throw new Error("Must be called after `form.input` initialization");let t=e.view.html,n=t.querySelector("[data-setvalue], [data-setgeopoint]")!=null,r=n?"[name], [data-name], [data-setvalue], [data-setgeopoint]":".question [name], .question [data-name]",i=t.querySelectorAll(r),a=["odk-instance-first-load","odk-new-repeat","xforms-value-changed"],s=a.map(b=>`non-${b}`),o=[];for(let b of i){if(n){let C=b.dataset.setvalue!=null||b.dataset.setgeopoint!=null,N=C&&b.closest(".question")!=null,w=[C?"action":"non-action",N?"form-control-action":"non-form-control-action"],I=C?(h=(c=(l=b.dataset.event)==null?void 0:l.trim())==null?void 0:c.split(/\s+/))!=null?h:[]:[],S=C?a.map((_,P)=>I.includes(_)?_:s[P]):s;o=[...w,...S],b.classList.add(...o)}if(!n||!b.matches('.or-group, .or-group-data, .or-repeat, .or-repeat-info, .question [data-event="xforms-value-changed"]')){let C=(p=b.dataset.name)!=null?p:b.getAttribute("name");if(C==null)return;let N=(E=b.closest(".itemset-template"))!=null?E:e.input.getWrapNode(b);b.classList.add("ref-target"),N.classList.add("contains-ref-target"),N.dataset.containsRefTarget=C,b.dataset.ref=C}}};function Uo(e,t){return mb(e,t,!0)}function ll(e,t){return mb(e,t)}function Rr(e,t="*"){let n,r=e.parentElement.firstElementChild;for(;r&&!n;)r!==e&&r.matches(t)&&(n=r),r=r.nextElementSibling;return n}function mb(e,t="*",n=!1){let r=[],i=e.parentElement.firstElementChild;for(;i;)(i===e&&n||i!==e&&i.matches(t))&&r.push(i),i=i.nextElementSibling;return r}function qo(e,t="*",n=null){let r=[],i=e.parentElement;for(;i;)i.matches(t)&&r.unshift(i),i=n&&i.matches(n)?null:i.parentElement;return r}function bu(e,t="*",n=null){let r=e.parentElement,i=null;for(;r&&!i;)r.matches(t)&&(i=r),r=n&&r.matches(n)?null:r.parentElement;return i}function cc(e,t="*"){return[...e.children].filter(n=>n.matches(t))}function Ds(e,t="*"){return[...e.children].find(n=>n.matches(t))}function vb(e){[...e.children].forEach(t=>t.remove())}function Mp(e){let t=!1,{nodeName:n}=e;for(e=e.previousSibling;e;){if(e.nodeName&&e.nodeName===n){t=!0;break}e=e.previousSibling}return t}function nN(e){let t=!1,{nodeName:n}=e;for(e=e.nextSibling;e;){if(e.nodeName&&e.nodeName===n){t=!0;break}e=e.nextSibling}return t}function rN(e){return nN(e)||Mp(e)}function yb(e,t){let n=!1;for(e=e.previousSibling;e;){if(e.nodeType===Node.COMMENT_NODE&&e.textContent===t){n=!0;break}e=e.previousSibling}return n}function Fi(e,t="#document",n=!1){let r,i=[],a="";if(!e||e.nodeType!==1)return null;let{nodeName:s}=e,o=e.parentElement,l=o?o.nodeName:null;for(n&&(r=Qf(e),r>0&&(a=`[${r+1}]`)),i.push(s+a);o&&l!==t&&l!=="#document";)n&&(r=Qf(o),a=rN(o)?`[${r+1}]`:""),i.push(l+a),o=o.parentElement,l=o?o.nodeName:null;return`/${i.reverse().join("/")}`}function Qf(e){let t=0,{nodeName:n}=e,r=e.previousSibling;for(;r;)r.nodeName&&r.nodeName===n&&t++,r=r.previousSibling;return t}var si={_storage:new WeakMap,put(e,t,n){this._storage.has(e)||this._storage.set(e,new Map),this._storage.get(e).set(t,n)},get(e,t){let n=this._storage.get(e);return n&&n.get(t)},has(e,t){let n=this._storage.get(e);return n&&n.has(t)},remove(e,t){let n=this._storage.get(e).delete(t);return!this._storage.get(t).size===0&&this._storage.delete(e),n}},ul=class{constructor(t=document.documentElement){let n=0,r=n;this.classChanges=new WeakMap,this.quiet=!0;let i=new MutationObserver(s=>{s.forEach(o=>{if(n++,o.type==="attributes"&&o.attributeName==="class"){let l=this.classChanges.get(o.target)||[];l.forEach(c=>{o.target.classList.contains(c.className)&&(c.completed=!0,this.classChanges.set(o.target,l))})}})});i.observe(t,{attributes:!0,characterData:!0,childList:!0,subtree:!0,attributeOldValue:!0,characterDataOldValue:!0});let a=setInterval(()=>{r===n?(this.quiet=!0,i.disconnect(),clearInterval(a)):(this.quiet=!1,r=n)},100)}_resolveWhenTrue(t){return typeof t!="function"?Promise.reject():new Promise(n=>{let r=setInterval(()=>{t.call(this)&&(clearInterval(r),n())},10)})}waitForClassChange(t,n){let r=this.classChanges.get(t)||[];return r.some(i=>i.className===n)||(r.push({className:n}),this.classChanges.set(t,r)),this._resolveWhenTrue(()=>this.classChanges.get(t).find(i=>i.className===n).completed)}waitForQuietness(){return this._resolveWhenTrue(()=>this.quiet)}},_b=null,bb=new IntersectionObserver(e=>{for(let{target:t,isIntersecting:n}of e)t===_b&&!n&&t.scrollIntoView({block:"nearest",inline:"nearest"}),bb.unobserve(t)}),wb=e=>{_b=e,bb.observe(e)};function Jf(e){this.message=e||"unknown",this.name="FormLogicError",this.stack=new Error().stack}Jf.prototype=Object.create(Error.prototype);Jf.prototype.constructor=Jf;var wu=Jf;var cl=Yt(su());function iN(e){return new CustomEvent("dataupdate",{detail:e})}function aN(){return new CustomEvent("fakefocus",{bubbles:!0})}function sN(){return new CustomEvent("applyfocus")}function oN(){return new CustomEvent("pageflip",{bubbles:!0})}function uN(e){return new CustomEvent("removed",{detail:e,bubbles:!0})}function lN(){return new CustomEvent("odk-instance-first-load",{bubbles:!0})}function cN(e){return new CustomEvent("odk-new-repeat",{detail:e,bubbles:!0})}function fN(e={}){return new CustomEvent("addrepeat",{detail:e,bubbles:!0})}function hN(e){return new CustomEvent("removerepeat",{detail:e,bubbles:!0})}function dN(){return new CustomEvent("changelanguage",{bubbles:!0})}function pN(){return new Event("change",{bubbles:!0})}function gN(e){return new CustomEvent("xforms-value-changed",{detail:e,bubbles:!0})}function mN(){return new Event("input",{bubbles:!0})}function vN(){return new CustomEvent("inputupdate",{bubbles:!0})}function yN(){return new CustomEvent("edited",{bubbles:!0})}function _N(){return new CustomEvent("before-save",{bubbles:!0})}function bN(){return new CustomEvent("validation-complete",{bubbles:!0})}function wN(){return new CustomEvent("invalidated",{bubbles:!0})}function xN(e){return new CustomEvent("progress-update",{detail:e,bubbles:!0})}function EN(){return new CustomEvent("goto-irrelevant",{bubbles:!0})}function CN(){return new CustomEvent("goto-invisible",{bubbles:!0})}function SN(){return new CustomEvent("change-option",{bubbles:!0})}function TN(){return new CustomEvent("printify",{bubbles:!0})}function LN(){return new CustomEvent("deprintify",{bubbles:!0})}function kN(){return new CustomEvent("update-max-size",{bubbles:!0})}var Xe={DataUpdate:iN,FakeFocus:aN,ApplyFocus:sN,PageFlip:oN,Removed:uN,InstanceFirstLoad:lN,NewRepeat:cN,AddRepeat:fN,RemoveRepeat:hN,ChangeLanguage:dN,Change:pN,Input:mN,InputUpdate:vN,Edited:yN,BeforeSave:_N,ValidationComplete:bN,Invalidated:wN,ProgressUpdate:xN,GoToIrrelevant:EN,GoToInvisible:CN,XFormsValueChanged:gN,ChangeOption:SN,Printify:TN,DePrintify:LN,UpdateMaxSize:kN};var Up=null,xb=()=>{let e=Intl.getCanonicalLocales(navigator.languages),t=new Date(2e3,1,1,1,23,45),n=t.toLocaleString(),r=t.toLocaleTimeString(),i=Intl.DateTimeFormat(e,{timeStyle:"short"});Up={locales:e,dateString:n,timeString:r,timeFormatter:i}},Eb=e=>{let t=()=>{xb(),e==null||e.dispatchEvent(Xe.ChangeLanguage())};return addEventListener("languagechange",t),xb(),removeEventListener.bind(window,"languagechange",t)},_i={get hour12(){let{hour12:e}=Up.timeFormatter.resolvedOptions();return Boolean(e)},get pmNotation(){return this.meridianNotation(new Date(2e3,1,1,23,0,0))},get amNotation(){return this.meridianNotation(new Date(2e3,1,1,1,0,0))},meridianNotation(e){let n=Up.timeFormatter.formatToParts(e).find(({type:r})=>r==="dayPeriod");return n!=null?n.value:null},hasMeridian(e){return e.includes(this.amNotation)||e.includes(this.pmNotation)}};var ro={string:{convert(e){return e.replace(/^\s+$/,"")},validate(){return!0}},select:{validate(){return!0}},select1:{validate(){return!0}},decimal:{convert(e){let t=Number(e);return isNaN(t)||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY?"":t},validate(e){let t=Number(e);return!isNaN(t)&&t!==Number.POSITIVE_INFINITY&&t!==Number.NEGATIVE_INFINITY}},int:{convert(e){let t=Number(e);return isNaN(t)||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY?"":t>=0?Math.floor(t):-Math.floor(Math.abs(t))},validate(e){let t=Number(e);return!isNaN(t)&&t!==Number.POSITIVE_INFINITY&&t!==Number.NEGATIVE_INFINITY&&Math.round(t)===t&&t.toString()===e.toString()}},date:{validate(e){let n=/^([0-9]{4})-([0-9]{2})-([0-9]{2})$/.exec(e);if(n&&n.length===4){let r=Number(n[1]),i=Number(n[2])-1,a=Number(n[3]),s=new Date(r,i,a);return s.getFullYear()===r&&s.getMonth()===i&&s.getDate()===a}return!1},convert(e){if(ai(e)){let t=new Date(e*24*60*60*1e3);return t.toString()==="Invalid Date"?"":`${t.getFullYear().toString().padStart(4,"0")}-${(t.getMonth()+1).toString().padStart(2,"0")}-${t.getDate().toString().padStart(2,"0")}`}return/[0-9]T[0-9]/.test(e)&&(e=e.split("T")[0]),this.validate(e)?e:""}},datetime:{validate(e){let t=e.split("T");return t.length===2?ro.date.validate(t[0])&&ro.time.validate(t[1],!1):ro.date.validate(t[0])},convert(e){let t="Invalid Date",n=e.split("T");if(ai(e))t=new Date(e*24*60*60*1e3);else if(/[0-9]T[0-9]/.test(e)&&n.length===2){let r=ro.date.convert(n[0]),i=ro.time.convert(n[1],!1);if(r&&i)return`${r}T${i}`}else{let r=ro.date.convert(n[0]);if(r)return`${r}T00:00:00.000${(0,cl.getTimezoneOffsetAsTime)(new Date)}`}return t.toString()!=="Invalid Date"?(0,cl.toISOLocalString)(t):""}},time:{validate(e,t){let n=e.match(/^(\d\d):(\d\d):(\d\d)\.\d\d\d(\+|-)(\d\d):(\d\d)$/);return t=typeof t!="boolean"?!0:t,!n&&!t&&(n=e.match(/^(\d\d):(\d\d):(\d\d)(\+|-)(\d\d):(\d\d)$/)),n?n[1]<24&&n[1]>=0&&n[2]<60&&n[2]>=0&&n[3]<60&&n[3]>=0&&n[5]<24&&n[5]>=0&&n[6]<60&&n[6]>=0:!1},convert(e,t){let n,r={},i,a,s,o,l,c=/^[0-9]{1,2}:[0-9]{1,2}(:[0-9.]*)?/;if(t=typeof t!="boolean"?!0:t,!c.test(e))if(n=new Date(e),n.toString()!=="Invalid Date")e=`${n.getHours()}:${n.getMinutes()}:${n.getSeconds()}.${n.getMilliseconds()}${(0,cl.getTimezoneOffsetAsTime)(n)}`;else return"";return i=e.toString().split(/(\+|-|Z)/),i.length<1?"":(a=i[0].split(":"),o=i[2]?[i[1]].concat(i[2].split(":")):i[1]==="Z"?["+","00","00"]:[],r.hours=a[0].padStart(2,"0"),r.minutes=a[1].padStart(2,"0"),s=a[2]?a[2].split("."):["00"],r.seconds=s[0],r.milliseconds=s[1]||(t?"000":void 0),o.length===0?l=(0,cl.getTimezoneOffsetAsTime)(new Date):l=`${o[0]+o[1].padStart(2,"0")}:${o[2]?o[2].padStart(2,"0"):"00"}`,e=`${r.hours}:${r.minutes}:${r.seconds}${r.milliseconds?`.${r.milliseconds}`:""}${l}`,this.validate(e,t)?e:"")},convertMeridian(e){if(e=e.trim(),_i.hasMeridian(e)){let t=e.split(" "),n=t[0].split(":");t.length>0&&(t[1]===_i.pmNotation?n[0]=(Number(n[0])%12+12).toString().padStart(2,"0"):t[1]===_i.amNotation&&(n[0]=(Number(n[0])%12).toString().padStart(2,"0")),e=n.join(":"))}return e}},barcode:{validate(){return!0}},geopoint:{validate(e){let t=e.toString().trim().split(" ");return t[0]!==""&&t[0]>=-90&&t[0]<=90&&t[1]!==""&&t[1]>=-360&&t[1]<=360&&(typeof t[2]>"u"||!isNaN(t[2]))&&(typeof t[3]>"u"||!isNaN(t[3])&&t[3]>=0)},convert(e){return e.toString().trim()}},geotrace:{validate(e){let t=e.toString().split(";");return t.length>=2&&t.every(n=>ro.geopoint.validate(n))},convert(e){return e.toString().trim()}},geoshape:{validate(e){let t=e.toString().split(";");return t.length>=4&&t[0]===t[t.length-1]&&t.every(n=>ro.geopoint.validate(n))},convert(e){return e.toString().trim()}},binary:{validate(){return!0}}},Xr=ro;var Lb=Yt(gr());var xu=new Map,qp=e=>{if(!Gn.excludeNonRelevant)return!0;let t=xu.get(e);return!(t!=null&&t.isParentNonRelevant)&&!(t!=null&&t.isSelfNonRelevant)},Sb=(e,t)=>{xu.set(e,{...xu.get(e),nonRelevantValue:t})};var Tb={form:null,init(){if(!this.form)throw new Error("Branch module not correctly instantiated with form property.");if(!this.form.features.relevant){this.update=()=>{};return}this.update()},update(e,t=Gn.forceClearNonRelevant){let n=this.form.getRelatedNodes("data-relevant","",e).get();this.updateNodes(n,t,e!=null?e:{})},updateNodes(e,t=!1,n={}){let r=!1,i={},a=[],s=this.form.features.repeat,{groups:o,repeats:l}=this.form.collections;e.forEach(c=>{if(a.includes(c.getAttribute("name")))return;let h=c.closest(".or-branch");if(!h){bu(c.parentsUntil(c,"#or-calculated-items",".or"))||console.error("could not find branch node for ",c);return}let p=this.form.input.getRelevant(c),E=this.form.input.getName(c),b=null,{repeatIndex:C}=n,{repeatPath:N}=n;if(s&&N==null&&(N=this.form.nodePathToRepeatPath[E],N==null)){for(let y of this.form.repeatPathPrefixes)if(E.startsWith(y)){N=y.substring(0,y.length-1);break}this.form.nodePathToRepeatPath[E]=N!=null?N:null}if(N!=null){let y=E.split("/");if(y.length>3&&N==null){let $=y.splice(0,y.length-1).join("/");if(o.getElementsByRef($).filter(ce=>Ds(ce,".or-repeat")||!Ds(ce,".or-repeat-info")).length===0)return}}let w=N!=null&&E.startsWith(`${N}/`),I=h.closest(".or-repeat"),S=I==null&&typeof C=="number"&&N!=null&&E.startsWith(`${N}/`)?C:null,_=E;(Ds(c,`.or-repeat-info[data-name="${E}"]`)&&!Ds(c,`.or-repeat[name="${E}"]`)||w&&I==null&&(n.removed||l.getElementByRef(N)==null))&&(_=null);let P=S!=null?S:this.form.repeats.getIndex(I);p.indexOf("..")===-1&&(w?b=`${p}__${E.substring(0,E.lastIndexOf("/"))}__${P}`:b=p);let v;b&&typeof i[b]<"u"?v=i[b]:(v=this.evaluate(p,_,P),i[b]=v),w||a.push(c.getAttribute("name")),this.process(h,E,v,t,{...n,repeatIndex:P,repeatPath:N})===!0&&(r=!0)}),r&&this.form.features.pagination&&this.form.view.$.trigger("changebranch")},evaluate(e,t,n){return this.form.model.evaluate(e,"boolean",t,n)},process(e,t,n,r=!1,i={}){return n===!0?this.enable(e,t,i):this.disable(e,t,r,i)},selfRelevant(e){return!e.classList.contains("disabled")&&!e.classList.contains("pre-init")},toggleNonRelevantModelNodes(e,t,n){var r,i,a;if(Gn.excludeNonRelevant){let{setRelevant:s}=n;e.dataset.isNonRelevant=String(!s);let{repeatIndex:o,repeatPath:l}=n,c=l&&t.startsWith(`${l}/`),h=c&&o!=null,p=(r=e.parentNode)==null?void 0:r.closest(".or-repeat"),E=o==null&&p!=null,b=null,C=null;if(E){let S=this.form.input.getIndex(e);b=this.form.model.node(t,S),C=b.getClosestRepeat()}else h&&(C={repeatIndex:o,repeatPath:l});b==null&&(b=this.form.model.node(t,c?o:null));let N=new Set(b.getElements()),w=b.getElements().flatMap(S=>[...N,...S.querySelectorAll("*")]).filter(S=>!qp(S)===s);if(w.length===0)return;let I=[];for(let S of w){let _=S.children.length===0,P=N.has(S),{textContent:v}=S,y=_?v||((a=(i=xu.get(S))==null?void 0:i.currentValue)!=null?a:v):null,$=s?v!==y:v!=="",Z=xu.get(S),ce=Boolean(Z==null?void 0:Z.isParentNonRelevant),q=Boolean(Z==null?void 0:Z.isSelfNonRelevant);s?(_&&v!==y&&(P||!q)&&(S.textContent=y),xu.set(S,{isParentNonRelevant:P?ce:!1,isSelfNonRelevant:P?!1:q,currentValue:y,nonRelevantValue:P?null:y})):(_&&v!==""&&(S.textContent=""),xu.set(S,{isParentNonRelevant:P?ce:!0,isSelfNonRelevant:P?!0:q,currentValue:y,nonRelevantValue:y})),_&&$&&I.unshift(S)}I.length>0&&this.form.model.events.dispatchEvent(Xe.DataUpdate({nodes:I.map(({nodeName:S})=>S),...C}))}else this.toggleNonRelevantModelNodes=()=>{}},enable(e,t,n){let r=!1;return this.selfRelevant(e)||(r=!0,e.classList.remove("disabled","pre-init"),this.toggleNonRelevantModelNodes(e,t,{...n,setRelevant:!0}),this.form.calc.update({relevantPath:t}),this.form.itemset.update({relevantPath:t}),this.form.output.update({rootNode:e}),this.form.widgets.enable(e),this.activate(e)),r},disable(e,t,n,r){let i=e.classList.contains("pre-init"),a=!1;return(i||this.selfRelevant(e)||n)&&(a=!0,n&&this.clear(e,t),this.toggleNonRelevantModelNodes(e,t,{...r,setRelevant:!1}),this.deactivate(e)),a},clear(e,t){this.form.input.clear(e,Xe.Change(),Xe.InputUpdate()),e.matches(".or-group, .or-group-data")&&this.form.calc.update({relevantPath:t},"",!0)},setDisabledProperty(e,t){let n=e.nodeName.toLowerCase();n==="label"?cc(e,"input, select, textarea").forEach(r=>r.disabled=t):n==="fieldset"||n==="section"?e.disabled=t:e.querySelectorAll("fieldset, input, select, textarea").forEach(r=>r.disabled=t)},activate(e){this.setDisabledProperty(e,!1)},deactivate(e){e.classList.add("disabled"),this.form.widgets.disable(e),this.setDisabledProperty(e,!0)}};var va=function(e,t,n,r){let i=r.hasInstance?"/model/instance[1]//*":"//*";this.model=r,this.originalSelector=e,this.selector=typeof e=="string"&&e.length>0?e:i,n=typeof n<"u"&&n!==null?n:{},this.filter=n,this.filter.onlyLeaf=typeof n.onlyLeaf<"u"?n.onlyLeaf:!1,this.filter.noEmpty=typeof n.noEmpty<"u"?n.noEmpty:!1,this.index=t};va.prototype.getElement=function(){return this.getElements()[0]};va.prototype.getElements=function(){let e,t;return this._nodes||(this._nodes=this.model.evaluate(this.selector,"nodes-ordered",null,null,!0),this.filter.noEmpty===!0?this._nodes=this._nodes.filter(n=>(t=n.textContent,n.children.length===0&&t.trim().length>0)):this.filter.onlyLeaf===!0&&(this._nodes=this._nodes.filter(n=>n.children.length===0))),e=this._nodes,typeof this.index<"u"&&this.index!==null&&(e=typeof e[this.index]>"u"?[]:[e[this.index]]),e};va.prototype.setIndex=function(e){this.index=e};va.prototype.setVal=function(e,t){let n,r,i,a=this.getVal();typeof e<"u"&&e!==null?n=Array.isArray(e)?e.join(" "):e.toString():n="",n=this.convert(n,t);let s=String(n),o=this.getElements();if(o.length===1&&s!==a.toString()){let l=o[0];return qp(l)?l.textContent=s:Sb(l,s),r=this.getClosestRepeat(),r.nodes=[l.nodeName],i=this.model.getUpdateEventData(l,t),r=i?Lb.default.extend({},r,i):r,this.model.events.dispatchEvent(Xe.DataUpdate(r)),t==="binary"&&(n.length>0?(l.setAttribute("type","file"),l.removeAttribute("src")):l.removeAttribute("type")),r}return o.length>1?(console.error("nodeset.setVal expected nodeset with one node, but received multiple"),null):(o.length===0&&console.warn(`Data node: ${this.selector} with null-based index: ${this.index} not found. Ignored.`),null)};va.prototype.getVal=function(){let e=this.getElements();return e.length?e[0].textContent:void 0};va.prototype.getClosestRepeat=function(){let e=this.getElement(),{nodeName:t}=e;for(;t&&t!=="instance"&&!(e.nextElementSibling&&e.nextElementSibling.nodeName===t)&&!(e.previousElementSibling&&e.previousElementSibling.nodeName===t);)e=e.parentElement,t=e?e.nodeName:null;return!t||t==="instance"?{}:{repeatPath:Fi(e,"instance"),repeatIndex:this.model.determineIndex(e)}};va.prototype.remove=function(){let e=this.getElement();if(e){let{nodeName:t}=e,n=Fi(e,"instance"),r=this.model.determineIndex(e),i=this.model.getRemovalEventData(e);this.model.templates[n]||this.model.extractFakeTemplates([n]);let a=e.nextElementSibling;for(e.remove(),this._nodes=null,this.model.events.dispatchEvent(Xe.DataUpdate({nodes:null,repeatPath:n,repeatIndex:r,removed:!0}));a&&a.nodeName===t;)a=a.nextElementSibling,this.model.events.dispatchEvent(Xe.DataUpdate({nodes:null,repeatPath:n,repeatIndex:r++}));this.model.events.dispatchEvent(Xe.Removed(i))}else console.error(`could not find node ${this.selector} with index ${this.index} to remove `)};va.prototype.convert=(e,t)=>e.toString()===""?e:typeof t<"u"&&t!==null&&typeof Xr[t.toLowerCase()]<"u"&&typeof Xr[t.toLowerCase()].convert<"u"?Xr[t.toLowerCase()].convert(e):e;va.prototype.validate=function(e,t,n){let r=this,i={};return this.validateRequired(t).then(a=>(i.requiredValid=a,a===!1?null:r.validateConstraintAndType(e,n))).then(a=>(i.constraintValid=a,i))};va.prototype.validateConstraintAndType=function(e,t){let n=this,r;return(!t||typeof Xr[t.toLowerCase()]>"u")&&(t="string"),!e&&(t==="string"||t==="select"||t==="select1"||t==="binary")||(r=n.getVal(),r.toString()==="")?Promise.resolve(!0):Promise.resolve().then(()=>Xr[t.toLowerCase()].validate(r)).then(i=>i?e?n.model.evaluate(e,"boolean",n.originalSelector,n.index):!0:!1)};va.prototype.isRequired=function(e){return!e||e.trim()==="false()"?!1:e.trim()==="true()"||this.model.evaluate(e,"boolean",this.originalSelector,this.index)};va.prototype.validateRequired=function(e){let t=this;return!e||this.getVal()?Promise.resolve(!0):Promise.resolve().then(()=>!t.isRequired(e))};typeof console.deprecate>"u"&&(console.deprecate=(e,t)=>{console.warn(`${e} is deprecated. Use ${t} instead.`)});var Fp="repeat:/",AN=/instance\(\s*(["'])((?:(?!\1)[A-z0-9.\-_]+))\1\s*\)/g,IN=/(decimal-date-time\(|pow\(|indexed-repeat\(|format-date\(|coalesce\(|join\(|max\(|min\(|random\(|substr\(|int\(|uuid\(|regex\(|now\(|today\(|date\(|if\(|boolean-from-string\(|checklist\(|selected\(|selected-at\(|round\(|area\(|position\([^)])/,Ab="http://openrosa.org/xforms",Ib="http://openrosa.org/javarosa",Rs="http://enketo.org/xforms",Nb="http://www.opendatakit.org/xforms",fc=new DOMParser,en=function(e,t){typeof e=="string"&&(e={modelStr:e}),e.external=e.external||[],e.submitted=typeof e.submitted<"u"?e.submitted:!0,t=t||{},t.full=typeof t.full<"u"?t.full:!0,this.events=document.createElement("div"),this.convertedExpressions=new Map,this.templates={},this.loadErrors=[],this.data=e,this.options=t,this.namespaces={}};en.prototype={get version(){return this.evaluate("/*/@version","string",null,null,!0)},get instanceID(){return this.getMetaNode("instanceID").getVal()},get deprecatedID(){return this.getMetaNode("deprecatedID").getVal()||""},get instanceName(){return this.getMetaNode("instanceName").getVal()}};en.prototype.init=function(){let e,t,n,r,i=this;this.data.modelStr=this.data.modelStr.replace(/\s(xmlns=("|')[^\s>]+("|'))/g," data-$1"),this.options.full||(this.data.modelStr=this.data.modelStr.replace(/^(<model\s*><instance((?!<instance).)+<\/instance\s*>\s*)(<instance.+<\/instance\s*>)*/,"$1"));try{e="model",this.xml=fc.parseFromString(this.data.modelStr,"text/xml"),this.throwParserErrors(this.xml,this.data.modelStr),this.data.external.forEach(a=>{if(a==null||!a.xml)return;for(e=a.id?`instance "${a.id}"`:'instance "unknown"',n=i.getSecondaryInstance(a.id),r=n.children,t=r.length-1;t>=0;t--)n.removeChild(r[t]);let s;a.xml instanceof XMLDocument&&(s=i.xml.importNode(a.xml.documentElement,!0)),s&&n.appendChild(s)}),this.createSession("__session",this.data.session)}catch(a){console.error("parseXML error"),this.loadErrors.push(`Error trying to parse XML ${e}. ${a.message}`)}if(this.xml){try{this.hasInstance=!!this.xml.querySelector("model > instance"),this.rootElement=this.xml.querySelector("instance > *")||this.xml.documentElement,this.setNamespaces(),this.noRepeatRefErrorExpected=this.evaluate(`/model/@${this.getNamespacePrefix(Nb)}:xforms-version`,"boolean",null,null,!0),this.getMetaNode("instanceID").getElement()||i.loadErrors.push("Invalid primary instance. Missing instanceID node."),Array.prototype.slice.call(this.xml.querySelectorAll("model > instance[src]:empty")).forEach(a=>{let s=a.getAttribute("src"),o=s==null?`External instance "${a.id}" is empty.`:`Can't find ${s.replace(/.*\//,"")}.`;i.loadErrors.push(o)}),this.trimValues(),this.extractTemplates()}catch(a){console.error(a),this.loadErrors.push(`${a.name}: ${a.message}`)}try{e="record",this.data.instanceStr&&this.mergeXml(this.data.instanceStr),this.setInstanceIdAndDeprecatedId(),this.data.instanceStr||this.events.dispatchEvent(Xe.InstanceFirstLoad())}catch(a){console.error(a),this.loadErrors.push(`Error trying to parse XML ${e}. ${a.message}`)}}return this.loadErrors};en.prototype.throwParserErrors=(e,t)=>{if(!e||e.querySelector("parsererror"))throw new Error(`Invalid XML: ${t}`)};en.prototype.createSession=function(e,t){let n,r,i=this.xml.querySelector("model"),a=["deviceid","username","email","phonenumber","simserial","subscriberid"];i&&(t=typeof t=="object"?t:{},n=i.querySelector(`instance#${CSS.escape(e)}`),n||(n=fc.parseFromString(`<instance id="${e}"/>`,"text/xml").documentElement,this.xml.adoptNode(n),i.appendChild(n)),a.forEach(s=>{t[s]=t[s]||t0(`__enketo_meta_${s}`)||`${s} not found`}),r=fc.parseFromString(`<session><context>${a.map(s=>`<${s}>${t[s]}</${s}>`).join("")}</context></session>`,"text/xml").documentElement,this.xml.adoptNode(r),n.appendChild(r))};en.prototype.getSecondaryInstance=function(e){let t;return[...this.xml.querySelectorAll("model > instance")].some(n=>n.getAttribute("id")===e?(t=n,!0):!1),t};en.prototype.node=function(e,t,n){return new va(e,t,n,this)};en.prototype.mergeXml=function(e){let t=this;if(!e)return;let n=this.xml.querySelector("instance"),r=this.xml.querySelector("instance > *");if(!r)throw new Error("Model is corrupt. It does not contain a childnode of instance");e=e.replace(/\s(xmlns=("|')[^\s>]+("|'))/g,""),e=e.replace(/<!--[^>]*-->/g,"");let i=fc.parseFromString(e,"text/xml"),a=i.querySelectorAll("[*|template]");for(let c=0;c<a.length;c++)a[c].remove();Array.prototype.slice.call(i.querySelectorAll("*")).forEach(c=>{let h,p=0,E,b;try{h=Fi(c,"instance",!1),(typeof t.templates[h]<"u"||Qf(c)>0)&&(E=Fi(c,"instance",!0),t.evaluate(E,"node",null,null,!0)||(b=E.match(/([^[]+)\[(\d+)\]\//g),b&&b.length>0&&(p=b[b.length-1].match(/\[(\d+)\]/)[1]-1),t.addRepeat(h,p,!0)))}catch(C){console.warn("Ignored error:",C)}}),Array.prototype.slice.call(i.querySelectorAll("*")).filter(c=>{let h=c.textContent;return c.children.length===0&&h.trim().length===0}).forEach(c=>{let h=Fi(c,"instance",!0),p=t.node(h,0).getElement();p&&(p.children.length===0?t.evaluate("./text()","nodes-ordered",h,0,!0).forEach(E=>{E.textContent=""}):t.evaluate(".//*[not(*)]","nodes-ordered",h,0,!0).forEach(E=>{E.textContent=""}))});let s=new kb.default({join:!1}),o=new XMLSerializer().serializeToString(r);if(e=new XMLSerializer().serializeToString(i),s.AddSource(o),s.AddSource(e),s.error.code)throw new Error(s.error.text);let l=s.dom;this.xml.querySelector("instance").removeChild(r),r=this.xml.adoptNode(l.documentElement),n.appendChild(r),this.rootElement=r};en.prototype.trimValues=function(){this.node(null,null,{noEmpty:!0}).getElements().forEach(e=>{e.textContent=e.textContent.trim()})};en.prototype.setInstanceIdAndDeprecatedId=function(){let e,t,n,r,i;if(e=this.getMetaNode("instanceID"),t=e.getElement(),i=e.getVal(),!t){console.warn("Model has no instanceID element");return}if(this.data.instanceStr&&this.data.submitted){n=this.getMetaNode("deprecatedID").getElement(),t.textContent="";let a=t.namespaceURI;if(!n){let s=a?this.getNamespacePrefix(a):"",o=a?`xmlns:${s}="${a}"`:"";n=fc.parseFromString(`<${s?`${s}:`:""}deprecatedID ${o}/>`,"text/xml").documentElement,this.xml.adoptNode(n),r=this.xml.querySelector("instance > * > meta"),r.appendChild(n)}}e.getVal()||e.setVal(this.evaluate('concat("uuid:", uuid())',"string")),n&&this.getMetaNode("deprecatedID").setVal(i)};en.prototype.bindJsEvaluator=db;en.prototype.getMetaNode=function(e){let t=this.getNamespacePrefix(Ab),n=this.node(`/*/${t}:meta/${t}:${e}`);return n.getElement()||(n=this.node(`/*/meta/${e}`)),n};en.prototype.getRepeatCommentText=e=>(e=e.trim(),Fp+e);en.prototype.getRepeatCommentSelector=function(e){return`//comment()[self::comment()="${this.getRepeatCommentText(e)}"]`};en.prototype.getRepeatCommentNode=function(e,t){return Pp(this.xml.documentElement,this.getRepeatCommentText(e),t)};en.prototype.addRepeat=function(e,t,n){let r,i=this;this.templates[e]||this.extractFakeTemplates([e]);let a=this.templates[e],s=this.getRepeatSeries(e,t),o=s.length?s[s.length-1]:this.getRepeatCommentNode(e,t);n||s.forEach(l=>{i.addOrdinalAttribute(l,s[0])}),a&&o?(r=a.cloneNode(!0),o.after(r),this.removeOrdinalAttributes(r),n||this.addOrdinalAttribute(r,s[0]),n&&Array.prototype.slice.call(r.querySelectorAll("*")).filter(l=>l.children.length===0).forEach(l=>{l.textContent=""})):console.error("Could not find template node and/or node to insert the clone after")};en.prototype.addOrdinalAttribute=function(e,t){if(Gn.repeatOrdinals===!0&&!e.getAttributeNS(Rs,"ordinal")){let n,r,i=this.getNamespacePrefix(Rs);t=t||e,n=t.getAttributeNS(Rs,"last-used-ordinal")||0,r=Number(n)+1,t.setAttributeNS(Rs,`${i}:last-used-ordinal`,r),e.setAttributeNS(Rs,`${i}:ordinal`,r)}};en.prototype.removeOrdinalAttributes=e=>{if(Gn.repeatOrdinals===!0){let t=Array.prototype.slice.call(e.querySelectorAll("[*|ordinal]"));t.push(e);for(let n=0;n<t.length;n++)t[n].removeAttributeNS(Rs,"last-used-ordinal"),t[n].removeAttributeNS(Rs,"ordinal")}};en.prototype.getRepeatSeries=function(e,t){let n,r,i,a=this.getRepeatCommentNode(e,t),s=[];if(a)for(n=a.textContent.substr(Fp.length).split("/"),r=n[n.length-1],i=a.nextSibling;i;)i.nodeName&&i.nodeName===r&&s.push(i),i=i.nextSibling;return s};en.prototype.determineIndex=function(e){if(e){let{nodeName:t}=e,n=Fi(e,"instance"),r=Array.prototype.slice.call(this.xml.querySelectorAll(t.replace(/\./g,"\\."))).filter(i=>n===Fi(i,"instance"));return r.length===1?null:r.indexOf(e)}return console.error("no node, or multiple nodes, provided to determineIndex function"),-1};en.prototype.extractTemplates=function(){let e=this;this.getTemplateNodes().reverse().forEach(t=>{let n=Fi(t,"instance");e.addTemplate(n,t),t.remove()})};en.prototype.extractFakeTemplates=function(e){let t=this,n;e.forEach(r=>{n=t.evaluate(r,"node",null,null,!0),n&&t.addTemplate(r,n,!0)})};en.prototype.addRepeatComments=function(e){let t=this.getRepeatCommentText(e);this.evaluate(e,"nodes-ordered",null,null,!0).forEach(n=>{!Mp(n)&&!yb(n,t)&&n.before(document.createComment(t))})};en.prototype.addTemplate=function(e,t,n){if(this.addRepeatComments(e),!this.templates[e]){let r=t.cloneNode(!0);r.removeAttribute("template"),r.removeAttribute("jr:template"),n&&Array.prototype.slice.call(r.querySelectorAll("*")).filter(i=>i.children.length===0).forEach(i=>{i.textContent=""}),this.templates[e]=r}};en.prototype.getTemplateNodes=function(){let e=this.getNamespacePrefix(Ib);return this.evaluate(`/model/instance[1]/*//*[@${e}:template]`,"nodes-ordered",null,null,!0)};en.prototype.getStr=function(){let e=new XMLSerializer().serializeToString(this.xml.querySelector("instance > *")||this.xml.documentElement,"text/xml");return e=e.replace(/\s(data-)(xmlns=("|')[^\s>]+("|'))/g," $2"),e=e.replace(new RegExp(`<!--${Fp}\\/[^>]+-->`,"g"),""),navigator.userAgent.indexOf("Trident/")===-1&&(e=this.removeDuplicateEnketoNsDeclarations(e)),e};en.prototype.removeDuplicateEnketoNsDeclarations=function(e){let t=0,n=new RegExp(`( xmlns:${this.getNamespacePrefix(Rs)}="${Rs}")`,"g");return e.replace(n,r=>(t++,t>1?"":r))};en.prototype.makeBugCompliant=function(e,t,n){if(this.noRepeatRefErrorExpected)return e;let r=this.node(t,n).getElement();if(!r)return e;let i=[r];for(;r&&r.parentElement&&r.nodeName.toLowerCase()!=="instance";)r=r.parentElement,i.push(r);return i.forEach(a=>{let s=a.nodeName.replace(/\./g,"\\."),o=Uo(a,`${s}:not([template])`);if(o.length>1){let l=Fi(a,"instance"),c=o.indexOf(a);e=e.replace(new RegExp(`${l}/`,"g"),`${l}[${c+1}]/`)}}),e};en.prototype.setNamespaces=function(){let e=this.hasInstance?"/model/instance":"",t=this.evaluate(`${e}/*`,"nodes-ordered",null,null,!0),n=this,r;t.forEach(i=>{i.hasAttributes()&&Array.from(i.attributes).forEach(a=>{a.name.indexOf("xmlns:")===0&&(n.namespaces[a.name.substring(6)]=a.value)}),[["orx",Ab,!1],["jr",Ib,!1],["enk",Rs,Gn.repeatOrdinals===!0],["odk",Nb,!1]].forEach(a=>{n.getNamespacePrefix(a[1])||(r=n.namespaces[a[0]]?`__${a[0]}`:a[0],n.namespaces[r]=a[1],a[2]&&i.setAttributeNS("http://www.w3.org/2000/xmlns/",`xmlns:${r}`,a[1]))})})};en.prototype.getNamespacePrefix=function(e){let t=Object.entries(this.namespaces).find(n=>n[1]===e);return t?t[0]:void 0};en.prototype.getNsResolver=function(){let e=typeof this.namespaces>"u"?{}:this.namespaces;return{lookupNamespaceURI(t){return e[t]||null}}};en.prototype.shiftRoot=function(e){let t=/"([^"]*)(")|'([^']*)(')/g;return this.hasInstance&&(e=e.replace(t,(n,r,i,a,s)=>{let o=encodeURIComponent(typeof r<"u"?r:a),l=i||s;return l+o+l}),e=e.replace(/^(\/(?!model\/)[^/][^/\s,"']*\/)/g,"/model/instance[1]$1"),e=e.replace(/([^a-zA-Z0-9.\])/*_-])(\/(?!model\/)[^/][^/\s,"']*\/)/g,"$1/model/instance[1]$2"),e=e.replace(t,(n,r,i,a,s)=>{let o=decodeURIComponent(typeof r<"u"?r:a),l=i||s;return l+o+l})),e};en.prototype.replaceInstanceFn=function(e){let t,n=this;return e.replace(AN,(r,i,a)=>{if(t=`/model/instance[@id="${a}"]`,n.evaluate(t,"nodes-ordered",null,null,!0).length)return t;throw new wu(`instance "${a}" does not exist in model`)})};en.prototype.replaceCurrentFn=(e,t)=>e.replace(/current\(\)/g,`${t}`);en.prototype.replaceIndexedRepeatFn=function(e,t,n){let r=this;return So(e,"indexed-repeat").forEach(a=>{let s,o,l,c=a[1];if(c.length%2===1){for(o=c[0],s=c.length-1;s>1;s-=2)l=isNaN(c[s])?r.evaluate(c[s],"number",t,n,!0):c[s],o=o.replace(c[s-1],`${c[s-1]}[position() = ${l}]`);e=e.replace(a[0],o)}else throw new wu(`indexed repeat with incorrect number of parameters found: ${a[0]}`)}),e};en.prototype.replaceVersionFn=function(e){let t=this,n;return So(e,"version").forEach(i=>{n=n||t.evaluate("/*/@version","string",null,0,!0),e=e.replace(i[0],`"${n}"`)}),e};en.prototype.replacePullDataFn=function(e,t,n){let r,i=this,a=this.convertPullDataFn(e,t,n);for(let s in a)Object.prototype.hasOwnProperty.call(a,s)&&(r=i.evaluate(a[s],"string",t,n,!0),e=e.replace(s,`"${r}"`));return e};en.prototype.convertPullDataFn=function(e,t,n){let r=this,i=So(e,"pulldata"),a={};return i.length&&i.forEach(s=>{let o,l,c=s[1];if(c.length===4)c[1]=Kl(c[1]),c[2]=Kl(c[2]),o=`'${r.evaluate(c[3],"string",t,n,!0)}'`,l=`instance(${c[0]})/root/item[${c[2]} = ${o}]/${c[1]}`,a[s[0]]=l;else throw new wu(`pulldata with incorrect number of parameters found: ${s[0]}`)}),a};en.prototype.evaluate=function(e,t,n,r,i){let a,s,o,l,c,h,p,E,b,C,N,w;N=e,i=i||!1,t=t||"any",r=r||0,o=this.xml,b=null,n?(p=this.node(n).getElements(),b=p.length,s=p[r]):s=this.rootElement,s||console.error("no context element found",n,r),C=[e,n,r,b].join("|"),e=this.replaceIndexedRepeatFn(e,n,r),e=this.replacePullDataFn(e,n,r),w=N===e;let I=this.convertedExpressions.get(C);I===void 0?(e=e.trim(),e=this.replaceInstanceFn(e),e=this.replaceVersionFn(e),e=this.replaceCurrentFn(e,Fi(s,"instance",!0)),e=this.shiftRoot(e),b&&b>1&&(e=this.makeBugCompliant(e,n,r)),e=e.replace(/&lt;/g,"<"),e=e.replace(/&gt;/g,">"),e=e.replace(/&quot;/g,'"'),w&&this.convertedExpressions.set(C,e)):e=I,c={0:["any","ANY_TYPE"],1:["number","NUMBER_TYPE","numberValue"],2:["string","STRING_TYPE","stringValue"],3:["boolean","BOOLEAN_TYPE","booleanValue"],6:["nodes","UNORDERED_NODE_SNAPSHOT_TYPE"],7:["nodes-ordered","ORDERED_NODE_SNAPSHOT_TYPE"],9:["node","FIRST_ORDERED_NODE_TYPE","singleNodeValue"]};for(l in c)if(Object.prototype.hasOwnProperty.call(c,l)){if(l=Number(l),c[l][0]===t)break;l=0}if(i&&typeof o.evaluate<"u"&&!IN.test(e))try{h=o.evaluate(e,s,this.getNsResolver(),l,null)}catch{}if(!h)try{typeof o.jsEvaluate>"u"&&this.bindJsEvaluator(),h=o.jsEvaluate(e,s,this.getNsResolver(),l,null)}catch(S){throw new wu(`Could not evaluate: ${e}, message: ${S.message}`)}if(h){if(l===0){for(l in c)if(Object.prototype.hasOwnProperty.call(c,l)&&(l=Number(l),l===Number(h.resultType)&&l>0&&l<4)){E=h[c[l][2]];break}E||console.error(`Expression: ${e} did not return any boolean, string or number value as expected`)}else if(l===6||l===7)for(E=[],a=0;a<h.snapshotLength;a++)E.push(h.snapshotItem(a));else E=h[c[l][2]];return E}};en.prototype.getUpdateEventData=()=>{};en.prototype.getRemovalEventData=()=>{};en.prototype.types=Xr;function Vi(e){return Vi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vi(e)}function Vp(e,t){if(Vi(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Vi(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function hc(e){var t=Vp(e,"string");return Vi(t)==="symbol"?t:String(t)}function zp(e,t,n){return t=hc(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Or(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?Object(arguments[t]):{},r=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&r.push.apply(r,Object.getOwnPropertySymbols(n).filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),r.forEach(function(i){zp(e,i,n[i])})}return e}function Da(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Pb(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,hc(r.key),r)}}function Ra(e,t,n){return t&&Pb(e.prototype,t),n&&Pb(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Os(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Eu(e,t){if(t&&(Vi(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Os(e)}function Fo(e){return Fo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Fo(e)}function dc(e,t){return dc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},dc(e,t)}function fl(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&dc(e,t)}var NN={type:"logger",log:function(t){this.output("log",t)},warn:function(t){this.output("warn",t)},error:function(t){this.output("error",t)},output:function(t,n){console&&console[t]&&console[t].apply(console,n)}},PN=function(){function e(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Da(this,e),this.init(t,n)}return Ra(e,[{key:"init",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=r.prefix||"i18next:",this.logger=n||NN,this.options=r,this.debug=r.debug}},{key:"setDebug",value:function(n){this.debug=n}},{key:"log",value:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return this.forward(r,"log","",!0)}},{key:"warn",value:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return this.forward(r,"warn","",!0)}},{key:"error",value:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return this.forward(r,"error","")}},{key:"deprecate",value:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return this.forward(r,"warn","WARNING DEPRECATED: ",!0)}},{key:"forward",value:function(n,r,i,a){return a&&!this.debug?null:(typeof n[0]=="string"&&(n[0]="".concat(i).concat(this.prefix," ").concat(n[0])),this.logger[r](n))}},{key:"create",value:function(n){return new e(this.logger,Or({},{prefix:"".concat(this.prefix,":").concat(n,":")},this.options))}}]),e}(),io=new PN,Vo=function(){function e(){Da(this,e),this.observers={}}return Ra(e,[{key:"on",value:function(n,r){var i=this;return n.split(" ").forEach(function(a){i.observers[a]=i.observers[a]||[],i.observers[a].push(r)}),this}},{key:"off",value:function(n,r){if(this.observers[n]){if(!r){delete this.observers[n];return}this.observers[n]=this.observers[n].filter(function(i){return i!==r})}}},{key:"emit",value:function(n){for(var r=arguments.length,i=new Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];if(this.observers[n]){var s=[].concat(this.observers[n]);s.forEach(function(l){l.apply(void 0,i)})}if(this.observers["*"]){var o=[].concat(this.observers["*"]);o.forEach(function(l){l.apply(l,[n].concat(i))})}}}]),e}();function pc(){var e,t,n=new Promise(function(r,i){e=r,t=i});return n.resolve=e,n.reject=t,n}function Db(e){return e==null?"":""+e}function DN(e,t,n){e.forEach(function(r){t[r]&&(n[r]=t[r])})}function $p(e,t,n){function r(o){return o&&o.indexOf("###")>-1?o.replace(/###/g,"."):o}function i(){return!e||typeof e=="string"}for(var a=typeof t!="string"?[].concat(t):t.split(".");a.length>1;){if(i())return{};var s=r(a.shift());!e[s]&&n&&(e[s]=new n),Object.prototype.hasOwnProperty.call(e,s)?e=e[s]:e={}}return i()?{}:{obj:e,k:r(a.shift())}}function Rb(e,t,n){var r=$p(e,t,Object),i=r.obj,a=r.k;i[a]=n}function RN(e,t,n,r){var i=$p(e,t,Object),a=i.obj,s=i.k;a[s]=a[s]||[],r&&(a[s]=a[s].concat(n)),r||a[s].push(n)}function nh(e,t){var n=$p(e,t),r=n.obj,i=n.k;if(r)return r[i]}function Ob(e,t,n){var r=nh(e,n);return r!==void 0?r:nh(t,n)}function qb(e,t,n){for(var r in t)r!=="__proto__"&&r!=="constructor"&&(r in e?typeof e[r]=="string"||e[r]instanceof String||typeof t[r]=="string"||t[r]instanceof String?n&&(e[r]=t[r]):qb(e[r],t[r],n):e[r]=t[r]);return e}function hl(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}var ON={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};function BN(e){return typeof e=="string"?e.replace(/[&<>"'\/]/g,function(t){return ON[t]}):e}var rh=typeof window<"u"&&window.navigator&&window.navigator.userAgent&&window.navigator.userAgent.indexOf("MSIE")>-1;function Fb(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";if(e){if(e[t])return e[t];for(var r=t.split(n),i=e,a=0;a<r.length;++a){if(!i||typeof i[r[a]]=="string"&&a+1<r.length)return;if(i[r[a]]===void 0){for(var s=2,o=r.slice(a,a+s).join(n),l=i[o];l===void 0&&r.length>a+s;)s++,o=r.slice(a,a+s).join(n),l=i[o];if(l===void 0)return;if(typeof l=="string")return l;if(o&&typeof l[o]=="string")return l[o];var c=r.slice(a+s).join(n);return c?Fb(l,c,n):void 0}i=i[r[a]]}return i}}var MN=function(e){fl(t,e);function t(n){var r,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};return Da(this,t),r=Eu(this,Fo(t).call(this)),rh&&Vo.call(Os(r)),r.data=n||{},r.options=i,r.options.keySeparator===void 0&&(r.options.keySeparator="."),r.options.ignoreJSONStructure===void 0&&(r.options.ignoreJSONStructure=!0),r}return Ra(t,[{key:"addNamespaces",value:function(r){this.options.ns.indexOf(r)<0&&this.options.ns.push(r)}},{key:"removeNamespaces",value:function(r){var i=this.options.ns.indexOf(r);i>-1&&this.options.ns.splice(i,1)}},{key:"getResource",value:function(r,i,a){var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},o=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator,l=s.ignoreJSONStructure!==void 0?s.ignoreJSONStructure:this.options.ignoreJSONStructure,c=[r,i];a&&typeof a!="string"&&(c=c.concat(a)),a&&typeof a=="string"&&(c=c.concat(o?a.split(o):a)),r.indexOf(".")>-1&&(c=r.split("."));var h=nh(this.data,c);return h||!l||typeof a!="string"?h:Fb(this.data&&this.data[r]&&this.data[r][i],a,o)}},{key:"addResource",value:function(r,i,a,s){var o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1},l=this.options.keySeparator;l===void 0&&(l=".");var c=[r,i];a&&(c=c.concat(l?a.split(l):a)),r.indexOf(".")>-1&&(c=r.split("."),s=i,i=c[1]),this.addNamespaces(i),Rb(this.data,c,s),o.silent||this.emit("added",r,i,a,s)}},{key:"addResources",value:function(r,i,a){var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(var o in a)(typeof a[o]=="string"||Object.prototype.toString.apply(a[o])==="[object Array]")&&this.addResource(r,i,o,a[o],{silent:!0});s.silent||this.emit("added",r,i,a)}},{key:"addResourceBundle",value:function(r,i,a,s,o){var l=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1},c=[r,i];r.indexOf(".")>-1&&(c=r.split("."),s=a,a=i,i=c[1]),this.addNamespaces(i);var h=nh(this.data,c)||{};s?qb(h,a,o):h=Or({},h,a),Rb(this.data,c,h),l.silent||this.emit("added",r,i,a)}},{key:"removeResourceBundle",value:function(r,i){this.hasResourceBundle(r,i)&&delete this.data[r][i],this.removeNamespaces(i),this.emit("removed",r,i)}},{key:"hasResourceBundle",value:function(r,i){return this.getResource(r,i)!==void 0}},{key:"getResourceBundle",value:function(r,i){return i||(i=this.options.defaultNS),this.options.compatibilityAPI==="v1"?Or({},{},this.getResource(r,i)):this.getResource(r,i)}},{key:"getDataByLanguage",value:function(r){return this.data[r]}},{key:"toJSON",value:function(){return this.data}}]),t}(Vo),Vb={processors:{},addPostProcessor:function(t){this.processors[t.name]=t},handle:function(t,n,r,i,a){var s=this;return t.forEach(function(o){s.processors[o]&&(n=s.processors[o].process(n,r,i,a))}),n}},Bb={},Mb=function(e){fl(t,e);function t(n){var r,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Da(this,t),r=Eu(this,Fo(t).call(this)),rh&&Vo.call(Os(r)),DN(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],n,Os(r)),r.options=i,r.options.keySeparator===void 0&&(r.options.keySeparator="."),r.logger=io.create("translator"),r}return Ra(t,[{key:"changeLanguage",value:function(r){r&&(this.language=r)}},{key:"exists",value:function(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};if(r==null)return!1;var a=this.resolve(r,i);return a&&a.res!==void 0}},{key:"extractFromKey",value:function(r,i){var a=i.nsSeparator!==void 0?i.nsSeparator:this.options.nsSeparator;a===void 0&&(a=":");var s=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator,o=i.ns||this.options.defaultNS;if(a&&r.indexOf(a)>-1){var l=r.match(this.interpolator.nestingRegexp);if(l&&l.length>0)return{key:r,namespaces:o};var c=r.split(a);(a!==s||a===s&&this.options.ns.indexOf(c[0])>-1)&&(o=c.shift()),r=c.join(s)}return typeof o=="string"&&(o=[o]),{key:r,namespaces:o}}},{key:"translate",value:function(r,i,a){var s=this;if(Vi(i)!=="object"&&this.options.overloadTranslationOptionHandler&&(i=this.options.overloadTranslationOptionHandler(arguments)),i||(i={}),r==null)return"";Array.isArray(r)||(r=[String(r)]);var o=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator,l=this.extractFromKey(r[r.length-1],i),c=l.key,h=l.namespaces,p=h[h.length-1],E=i.lng||this.language,b=i.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(E&&E.toLowerCase()==="cimode"){if(b){var C=i.nsSeparator||this.options.nsSeparator;return p+C+c}return c}var N=this.resolve(r,i),w=N&&N.res,I=N&&N.usedKey||c,S=N&&N.exactUsedKey||c,_=Object.prototype.toString.apply(w),P=["[object Number]","[object Function]","[object RegExp]"],v=i.joinArrays!==void 0?i.joinArrays:this.options.joinArrays,y=!this.i18nFormat||this.i18nFormat.handleAsObject,$=typeof w!="string"&&typeof w!="boolean"&&typeof w!="number";if(y&&w&&$&&P.indexOf(_)<0&&!(typeof v=="string"&&_==="[object Array]")){if(!i.returnObjects&&!this.options.returnObjects)return this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!"),this.options.returnedObjectHandler?this.options.returnedObjectHandler(I,w,Or({},i,{ns:h})):"key '".concat(c," (").concat(this.language,")' returned an object instead of string.");if(o){var Z=_==="[object Array]",ce=Z?[]:{},q=Z?S:I;for(var W in w)if(Object.prototype.hasOwnProperty.call(w,W)){var O="".concat(q).concat(o).concat(W);ce[W]=this.translate(O,Or({},i,{joinArrays:!1,ns:h})),ce[W]===O&&(ce[W]=w[W])}w=ce}}else if(y&&typeof v=="string"&&_==="[object Array]")w=w.join(v),w&&(w=this.extendTranslation(w,r,i,a));else{var re=!1,le=!1,ie=i.count!==void 0&&typeof i.count!="string",oe=t.hasDefaultValue(i),Q=ie?this.pluralResolver.getSuffix(E,i.count):"",j=i["defaultValue".concat(Q)]||i.defaultValue;!this.isValidLookup(w)&&oe&&(re=!0,w=j),this.isValidLookup(w)||(le=!0,w=c);var H=i.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey,G=H&&le?void 0:w,fe=oe&&j!==w&&this.options.updateMissing;if(le||re||fe){if(this.logger.log(fe?"updateKey":"missingKey",E,p,c,fe?j:w),o){var pe=this.resolve(c,Or({},i,{keySeparator:!1}));pe&&pe.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}var de=[],Ae=this.languageUtils.getFallbackCodes(this.options.fallbackLng,i.lng||this.language);if(this.options.saveMissingTo==="fallback"&&Ae&&Ae[0])for(var Ie=0;Ie<Ae.length;Ie++)de.push(Ae[Ie]);else this.options.saveMissingTo==="all"?de=this.languageUtils.toResolveHierarchy(i.lng||this.language):de.push(i.lng||this.language);var ve=function(Me,Ge,at){s.options.missingKeyHandler?s.options.missingKeyHandler(Me,p,Ge,fe?at:G,fe,i):s.backendConnector&&s.backendConnector.saveMissing&&s.backendConnector.saveMissing(Me,p,Ge,fe?at:G,fe,i),s.emit("missingKey",Me,p,Ge,w)};this.options.saveMissing&&(this.options.saveMissingPlurals&&ie?de.forEach(function(Te){s.pluralResolver.getSuffixes(Te).forEach(function(Me){ve([Te],c+Me,i["defaultValue".concat(Me)]||j)})}):ve(de,c,j))}w=this.extendTranslation(w,r,i,N,a),le&&w===c&&this.options.appendNamespaceToMissingKey&&(w="".concat(p,":").concat(c)),(le||re)&&this.options.parseMissingKeyHandler&&(w=this.options.parseMissingKeyHandler(w))}return w}},{key:"extendTranslation",value:function(r,i,a,s,o){var l=this;if(this.i18nFormat&&this.i18nFormat.parse)r=this.i18nFormat.parse(r,a,s.usedLng,s.usedNS,s.usedKey,{resolved:s});else if(!a.skipInterpolation){a.interpolation&&this.interpolator.init(Or({},a,{interpolation:Or({},this.options.interpolation,a.interpolation)}));var c=a.interpolation&&a.interpolation.skipOnVariables||this.options.interpolation.skipOnVariables,h;if(c){var p=r.match(this.interpolator.nestingRegexp);h=p&&p.length}var E=a.replace&&typeof a.replace!="string"?a.replace:a;if(this.options.interpolation.defaultVariables&&(E=Or({},this.options.interpolation.defaultVariables,E)),r=this.interpolator.interpolate(r,E,a.lng||this.language,a),c){var b=r.match(this.interpolator.nestingRegexp),C=b&&b.length;h<C&&(a.nest=!1)}a.nest!==!1&&(r=this.interpolator.nest(r,function(){for(var I=arguments.length,S=new Array(I),_=0;_<I;_++)S[_]=arguments[_];return o&&o[0]===S[0]&&!a.context?(l.logger.warn("It seems you are nesting recursively key: ".concat(S[0]," in key: ").concat(i[0])),null):l.translate.apply(l,S.concat([i]))},a)),a.interpolation&&this.interpolator.reset()}var N=a.postProcess||this.options.postProcess,w=typeof N=="string"?[N]:N;return r!=null&&w&&w.length&&a.applyPostProcessor!==!1&&(r=Vb.handle(w,r,i,this.options&&this.options.postProcessPassResolved?Or({i18nResolved:s},a):a,this)),r}},{key:"resolve",value:function(r){var i=this,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s,o,l,c,h;return typeof r=="string"&&(r=[r]),r.forEach(function(p){if(!i.isValidLookup(s)){var E=i.extractFromKey(p,a),b=E.key;o=b;var C=E.namespaces;i.options.fallbackNS&&(C=C.concat(i.options.fallbackNS));var N=a.count!==void 0&&typeof a.count!="string",w=a.context!==void 0&&(typeof a.context=="string"||typeof a.context=="number")&&a.context!=="",I=a.lngs?a.lngs:i.languageUtils.toResolveHierarchy(a.lng||i.language,a.fallbackLng);C.forEach(function(S){i.isValidLookup(s)||(h=S,!Bb["".concat(I[0],"-").concat(S)]&&i.utils&&i.utils.hasLoadedNamespace&&!i.utils.hasLoadedNamespace(h)&&(Bb["".concat(I[0],"-").concat(S)]=!0,i.logger.warn('key "'.concat(o,'" for languages "').concat(I.join(", "),`" won't get resolved as namespace "`).concat(h,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),I.forEach(function(_){if(!i.isValidLookup(s)){c=_;var P=b,v=[P];if(i.i18nFormat&&i.i18nFormat.addLookupKeys)i.i18nFormat.addLookupKeys(v,b,_,S,a);else{var y;N&&(y=i.pluralResolver.getSuffix(_,a.count)),N&&w&&v.push(P+y),w&&v.push(P+="".concat(i.options.contextSeparator).concat(a.context)),N&&v.push(P+=y)}for(var $;$=v.pop();)i.isValidLookup(s)||(l=$,s=i.getResource(_,S,$,a))}}))})}}),{res:s,usedKey:o,exactUsedKey:l,usedLng:c,usedNS:h}}},{key:"isValidLookup",value:function(r){return r!==void 0&&!(!this.options.returnNull&&r===null)&&!(!this.options.returnEmptyString&&r==="")}},{key:"getResource",value:function(r,i,a){var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(r,i,a,s):this.resourceStore.getResource(r,i,a,s)}}],[{key:"hasDefaultValue",value:function(r){var i="defaultValue";for(var a in r)if(Object.prototype.hasOwnProperty.call(r,a)&&i===a.substring(0,i.length)&&r[a]!==void 0)return!0;return!1}}]),t}(Vo);function Hp(e){return e.charAt(0).toUpperCase()+e.slice(1)}var UN=function(){function e(t){Da(this,e),this.options=t,this.whitelist=this.options.supportedLngs||!1,this.supportedLngs=this.options.supportedLngs||!1,this.logger=io.create("languageUtils")}return Ra(e,[{key:"getScriptPartFromCode",value:function(n){if(!n||n.indexOf("-")<0)return null;var r=n.split("-");return r.length===2||(r.pop(),r[r.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(r.join("-"))}},{key:"getLanguagePartFromCode",value:function(n){if(!n||n.indexOf("-")<0)return n;var r=n.split("-");return this.formatLanguageCode(r[0])}},{key:"formatLanguageCode",value:function(n){if(typeof n=="string"&&n.indexOf("-")>-1){var r=["hans","hant","latn","cyrl","cans","mong","arab"],i=n.split("-");return this.options.lowerCaseLng?i=i.map(function(a){return a.toLowerCase()}):i.length===2?(i[0]=i[0].toLowerCase(),i[1]=i[1].toUpperCase(),r.indexOf(i[1].toLowerCase())>-1&&(i[1]=Hp(i[1].toLowerCase()))):i.length===3&&(i[0]=i[0].toLowerCase(),i[1].length===2&&(i[1]=i[1].toUpperCase()),i[0]!=="sgn"&&i[2].length===2&&(i[2]=i[2].toUpperCase()),r.indexOf(i[1].toLowerCase())>-1&&(i[1]=Hp(i[1].toLowerCase())),r.indexOf(i[2].toLowerCase())>-1&&(i[2]=Hp(i[2].toLowerCase()))),i.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?n.toLowerCase():n}},{key:"isWhitelisted",value:function(n){return this.logger.deprecate("languageUtils.isWhitelisted",`function "isWhitelisted" will be renamed to "isSupportedCode" in the next major - please make sure to rename it's usage asap.`),this.isSupportedCode(n)}},{key:"isSupportedCode",value:function(n){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(n=this.getLanguagePartFromCode(n)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(n)>-1}},{key:"getBestMatchFromCodes",value:function(n){var r=this;if(!n)return null;var i;return n.forEach(function(a){if(!i){var s=r.formatLanguageCode(a);(!r.options.supportedLngs||r.isSupportedCode(s))&&(i=s)}}),!i&&this.options.supportedLngs&&n.forEach(function(a){if(!i){var s=r.getLanguagePartFromCode(a);if(r.isSupportedCode(s))return i=s;i=r.options.supportedLngs.find(function(o){if(o.indexOf(s)===0)return o})}}),i||(i=this.getFallbackCodes(this.options.fallbackLng)[0]),i}},{key:"getFallbackCodes",value:function(n,r){if(!n)return[];if(typeof n=="function"&&(n=n(r)),typeof n=="string"&&(n=[n]),Object.prototype.toString.apply(n)==="[object Array]")return n;if(!r)return n.default||[];var i=n[r];return i||(i=n[this.getScriptPartFromCode(r)]),i||(i=n[this.formatLanguageCode(r)]),i||(i=n[this.getLanguagePartFromCode(r)]),i||(i=n.default),i||[]}},{key:"toResolveHierarchy",value:function(n,r){var i=this,a=this.getFallbackCodes(r||this.options.fallbackLng||[],n),s=[],o=function(c){c&&(i.isSupportedCode(c)?s.push(c):i.logger.warn("rejecting language code not found in supportedLngs: ".concat(c)))};return typeof n=="string"&&n.indexOf("-")>-1?(this.options.load!=="languageOnly"&&o(this.formatLanguageCode(n)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&o(this.getScriptPartFromCode(n)),this.options.load!=="currentOnly"&&o(this.getLanguagePartFromCode(n))):typeof n=="string"&&o(this.formatLanguageCode(n)),a.forEach(function(l){s.indexOf(l)<0&&o(i.formatLanguageCode(l))}),s}}]),e}(),qN=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],FN={1:function(t){return Number(t>1)},2:function(t){return Number(t!=1)},3:function(t){return 0},4:function(t){return Number(t%10==1&&t%100!=11?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2)},5:function(t){return Number(t==0?0:t==1?1:t==2?2:t%100>=3&&t%100<=10?3:t%100>=11?4:5)},6:function(t){return Number(t==1?0:t>=2&&t<=4?1:2)},7:function(t){return Number(t==1?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2)},8:function(t){return Number(t==1?0:t==2?1:t!=8&&t!=11?2:3)},9:function(t){return Number(t>=2)},10:function(t){return Number(t==1?0:t==2?1:t<7?2:t<11?3:4)},11:function(t){return Number(t==1||t==11?0:t==2||t==12?1:t>2&&t<20?2:3)},12:function(t){return Number(t%10!=1||t%100==11)},13:function(t){return Number(t!==0)},14:function(t){return Number(t==1?0:t==2?1:t==3?2:3)},15:function(t){return Number(t%10==1&&t%100!=11?0:t%10>=2&&(t%100<10||t%100>=20)?1:2)},16:function(t){return Number(t%10==1&&t%100!=11?0:t!==0?1:2)},17:function(t){return Number(t==1||t%10==1&&t%100!=11?0:1)},18:function(t){return Number(t==0?0:t==1?1:2)},19:function(t){return Number(t==1?0:t==0||t%100>1&&t%100<11?1:t%100>10&&t%100<20?2:3)},20:function(t){return Number(t==1?0:t==0||t%100>0&&t%100<20?1:2)},21:function(t){return Number(t%100==1?1:t%100==2?2:t%100==3||t%100==4?3:0)},22:function(t){return Number(t==1?0:t==2?1:(t<0||t>10)&&t%10==0?2:3)}};function VN(){var e={};return qN.forEach(function(t){t.lngs.forEach(function(n){e[n]={numbers:t.nr,plurals:FN[t.fc]}})}),e}var zN=function(){function e(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Da(this,e),this.languageUtils=t,this.options=n,this.logger=io.create("pluralResolver"),this.rules=VN()}return Ra(e,[{key:"addRule",value:function(n,r){this.rules[n]=r}},{key:"getRule",value:function(n){return this.rules[n]||this.rules[this.languageUtils.getLanguagePartFromCode(n)]}},{key:"needsPlural",value:function(n){var r=this.getRule(n);return r&&r.numbers.length>1}},{key:"getPluralFormsOfKey",value:function(n,r){return this.getSuffixes(n).map(function(i){return r+i})}},{key:"getSuffixes",value:function(n){var r=this,i=this.getRule(n);return i?i.numbers.map(function(a){return r.getSuffix(n,a)}):[]}},{key:"getSuffix",value:function(n,r){var i=this,a=this.getRule(n);if(a){var s=a.noAbs?a.plurals(r):a.plurals(Math.abs(r)),o=a.numbers[s];this.options.simplifyPluralSuffix&&a.numbers.length===2&&a.numbers[0]===1&&(o===2?o="plural":o===1&&(o=""));var l=function(){return i.options.prepend&&o.toString()?i.options.prepend+o.toString():o.toString()};return this.options.compatibilityJSON==="v1"?o===1?"":typeof o=="number"?"_plural_".concat(o.toString()):l():this.options.compatibilityJSON==="v2"||this.options.simplifyPluralSuffix&&a.numbers.length===2&&a.numbers[0]===1?l():this.options.prepend&&s.toString()?this.options.prepend+s.toString():s.toString()}return this.logger.warn("no plural rule found for: ".concat(n)),""}}]),e}(),HN=function(){function e(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Da(this,e),this.logger=io.create("interpolator"),this.options=t,this.format=t.interpolation&&t.interpolation.format||function(n){return n},this.init(t)}return Ra(e,[{key:"init",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};n.interpolation||(n.interpolation={escapeValue:!0});var r=n.interpolation;this.escape=r.escape!==void 0?r.escape:BN,this.escapeValue=r.escapeValue!==void 0?r.escapeValue:!0,this.useRawValueToEscape=r.useRawValueToEscape!==void 0?r.useRawValueToEscape:!1,this.prefix=r.prefix?hl(r.prefix):r.prefixEscaped||"{{",this.suffix=r.suffix?hl(r.suffix):r.suffixEscaped||"}}",this.formatSeparator=r.formatSeparator?r.formatSeparator:r.formatSeparator||",",this.unescapePrefix=r.unescapeSuffix?"":r.unescapePrefix||"-",this.unescapeSuffix=this.unescapePrefix?"":r.unescapeSuffix||"",this.nestingPrefix=r.nestingPrefix?hl(r.nestingPrefix):r.nestingPrefixEscaped||hl("$t("),this.nestingSuffix=r.nestingSuffix?hl(r.nestingSuffix):r.nestingSuffixEscaped||hl(")"),this.nestingOptionsSeparator=r.nestingOptionsSeparator?r.nestingOptionsSeparator:r.nestingOptionsSeparator||",",this.maxReplaces=r.maxReplaces?r.maxReplaces:1e3,this.alwaysFormat=r.alwaysFormat!==void 0?r.alwaysFormat:!1,this.resetRegExp()}},{key:"reset",value:function(){this.options&&this.init(this.options)}},{key:"resetRegExp",value:function(){var n="".concat(this.prefix,"(.+?)").concat(this.suffix);this.regexp=new RegExp(n,"g");var r="".concat(this.prefix).concat(this.unescapePrefix,"(.+?)").concat(this.unescapeSuffix).concat(this.suffix);this.regexpUnescape=new RegExp(r,"g");var i="".concat(this.nestingPrefix,"(.+?)").concat(this.nestingSuffix);this.nestingRegexp=new RegExp(i,"g")}},{key:"interpolate",value:function(n,r,i,a){var s=this,o,l,c,h=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{};function p(w){return w.replace(/\$/g,"$$$$")}var E=function(I){if(I.indexOf(s.formatSeparator)<0){var S=Ob(r,h,I);return s.alwaysFormat?s.format(S,void 0,i,Or({},a,r,{interpolationkey:I})):S}var _=I.split(s.formatSeparator),P=_.shift().trim(),v=_.join(s.formatSeparator).trim();return s.format(Ob(r,h,P),v,i,Or({},a,r,{interpolationkey:P}))};this.resetRegExp();var b=a&&a.missingInterpolationHandler||this.options.missingInterpolationHandler,C=a&&a.interpolation&&a.interpolation.skipOnVariables||this.options.interpolation.skipOnVariables,N=[{regex:this.regexpUnescape,safeValue:function(I){return p(I)}},{regex:this.regexp,safeValue:function(I){return s.escapeValue?p(s.escape(I)):p(I)}}];return N.forEach(function(w){for(c=0;o=w.regex.exec(n);){if(l=E(o[1].trim()),l===void 0)if(typeof b=="function"){var I=b(n,o,a);l=typeof I=="string"?I:""}else if(C){l=o[0];continue}else s.logger.warn("missed to pass in variable ".concat(o[1]," for interpolating ").concat(n)),l="";else typeof l!="string"&&!s.useRawValueToEscape&&(l=Db(l));var S=w.safeValue(l);if(n=n.replace(o[0],S),C?(w.regex.lastIndex+=S.length,w.regex.lastIndex-=o[0].length):w.regex.lastIndex=0,c++,c>=s.maxReplaces)break}}),n}},{key:"nest",value:function(n,r){var i=this,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s,o,l=Or({},a);l.applyPostProcessor=!1,delete l.defaultValue;function c(b,C){var N=this.nestingOptionsSeparator;if(b.indexOf(N)<0)return b;var w=b.split(new RegExp("".concat(N,"[ ]*{"))),I="{".concat(w[1]);b=w[0],I=this.interpolate(I,l),I=I.replace(/'/g,'"');try{l=JSON.parse(I),C&&(l=Or({},C,l))}catch(S){return this.logger.warn("failed parsing options string in nesting for key ".concat(b),S),"".concat(b).concat(N).concat(I)}return delete l.defaultValue,b}for(;s=this.nestingRegexp.exec(n);){var h=[],p=!1;if(s[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(s[1])){var E=s[1].split(this.formatSeparator).map(function(b){return b.trim()});s[1]=E.shift(),h=E,p=!0}if(o=r(c.call(this,s[1].trim(),l),l),o&&s[0]===n&&typeof o!="string")return o;typeof o!="string"&&(o=Db(o)),o||(this.logger.warn("missed to resolve ".concat(s[1]," for nesting ").concat(n)),o=""),p&&(o=h.reduce(function(b,C){return i.format(b,C,a.lng,Or({},a,{interpolationkey:s[1].trim()}))},o.trim())),n=n.replace(s[0],o),this.regexp.lastIndex=0}return n}}]),e}();function $N(e,t){for(var n=e.indexOf(t);n!==-1;)e.splice(n,1),n=e.indexOf(t)}var jN=function(e){fl(t,e);function t(n,r,i){var a,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return Da(this,t),a=Eu(this,Fo(t).call(this)),rh&&Vo.call(Os(a)),a.backend=n,a.store=r,a.services=i,a.languageUtils=i.languageUtils,a.options=s,a.logger=io.create("backendConnector"),a.state={},a.queue=[],a.backend&&a.backend.init&&a.backend.init(i,s.backend,s),a}return Ra(t,[{key:"queueLoad",value:function(r,i,a,s){var o=this,l=[],c=[],h=[],p=[];return r.forEach(function(E){var b=!0;i.forEach(function(C){var N="".concat(E,"|").concat(C);!a.reload&&o.store.hasResourceBundle(E,C)?o.state[N]=2:o.state[N]<0||(o.state[N]===1?c.indexOf(N)<0&&c.push(N):(o.state[N]=1,b=!1,c.indexOf(N)<0&&c.push(N),l.indexOf(N)<0&&l.push(N),p.indexOf(C)<0&&p.push(C)))}),b||h.push(E)}),(l.length||c.length)&&this.queue.push({pending:c,loaded:{},errors:[],callback:s}),{toLoad:l,pending:c,toLoadLanguages:h,toLoadNamespaces:p}}},{key:"loaded",value:function(r,i,a){var s=r.split("|"),o=s[0],l=s[1];i&&this.emit("failedLoading",o,l,i),a&&this.store.addResourceBundle(o,l,a),this.state[r]=i?-1:2;var c={};this.queue.forEach(function(h){RN(h.loaded,[o],l),$N(h.pending,r),i&&h.errors.push(i),h.pending.length===0&&!h.done&&(Object.keys(h.loaded).forEach(function(p){c[p]||(c[p]=[]),h.loaded[p].length&&h.loaded[p].forEach(function(E){c[p].indexOf(E)<0&&c[p].push(E)})}),h.done=!0,h.errors.length?h.callback(h.errors):h.callback())}),this.emit("loaded",c),this.queue=this.queue.filter(function(h){return!h.done})}},{key:"read",value:function(r,i,a){var s=this,o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,l=arguments.length>4&&arguments[4]!==void 0?arguments[4]:350,c=arguments.length>5?arguments[5]:void 0;return r.length?this.backend[a](r,i,function(h,p){if(h&&p&&o<5){setTimeout(function(){s.read.call(s,r,i,a,o+1,l*2,c)},l);return}c(h,p)}):c(null,{})}},{key:"prepareLoading",value:function(r,i){var a=this,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),o&&o();typeof r=="string"&&(r=this.languageUtils.toResolveHierarchy(r)),typeof i=="string"&&(i=[i]);var l=this.queueLoad(r,i,s,o);if(!l.toLoad.length)return l.pending.length||o(),null;l.toLoad.forEach(function(c){a.loadOne(c)})}},{key:"load",value:function(r,i,a){this.prepareLoading(r,i,{},a)}},{key:"reload",value:function(r,i,a){this.prepareLoading(r,i,{reload:!0},a)}},{key:"loadOne",value:function(r){var i=this,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",s=r.split("|"),o=s[0],l=s[1];this.read(o,l,"read",void 0,void 0,function(c,h){c&&i.logger.warn("".concat(a,"loading namespace ").concat(l," for language ").concat(o," failed"),c),!c&&h&&i.logger.log("".concat(a,"loaded namespace ").concat(l," for language ").concat(o),h),i.loaded(r,c,h)})}},{key:"saveMissing",value:function(r,i,a,s,o){var l=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(i)){this.logger.warn('did not save key "'.concat(a,'" as the namespace "').concat(i,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}a==null||a===""||(this.backend&&this.backend.create&&this.backend.create(r,i,a,s,null,Or({},l,{isUpdate:o})),!(!r||!r[0])&&this.store.addResource(r[0],i,a,s))}}]),t}(Vo);function KN(){return{debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,whitelist:!1,nonExplicitWhitelist:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!0,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:function(t){var n={};if(Vi(t[1])==="object"&&(n=t[1]),typeof t[1]=="string"&&(n.defaultValue=t[1]),typeof t[2]=="string"&&(n.tDescription=t[2]),Vi(t[2])==="object"||Vi(t[3])==="object"){var r=t[3]||t[2];Object.keys(r).forEach(function(i){n[i]=r[i]})}return n},interpolation:{escapeValue:!0,format:function(t,n,r,i){return t},prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!1}}}function Ub(e){return typeof e.ns=="string"&&(e.ns=[e.ns]),typeof e.fallbackLng=="string"&&(e.fallbackLng=[e.fallbackLng]),typeof e.fallbackNS=="string"&&(e.fallbackNS=[e.fallbackNS]),e.whitelist&&(e.whitelist&&e.whitelist.indexOf("cimode")<0&&(e.whitelist=e.whitelist.concat(["cimode"])),e.supportedLngs=e.whitelist),e.nonExplicitWhitelist&&(e.nonExplicitSupportedLngs=e.nonExplicitWhitelist),e.supportedLngs&&e.supportedLngs.indexOf("cimode")<0&&(e.supportedLngs=e.supportedLngs.concat(["cimode"])),e}function th(){}var WN=function(e){fl(t,e);function t(){var n,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=arguments.length>1?arguments[1]:void 0;if(Da(this,t),n=Eu(this,Fo(t).call(this)),rh&&Vo.call(Os(n)),n.options=Ub(r),n.services={},n.logger=io,n.modules={external:[]},i&&!n.isInitialized&&!r.isClone){if(!n.options.initImmediate)return n.init(r,i),Eu(n,Os(n));setTimeout(function(){n.init(r,i)},0)}return n}return Ra(t,[{key:"init",value:function(){var r=this,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0;typeof i=="function"&&(a=i,i={}),i.whitelist&&!i.supportedLngs&&this.logger.deprecate("whitelist",'option "whitelist" will be renamed to "supportedLngs" in the next major - please make sure to rename this option asap.'),i.nonExplicitWhitelist&&!i.nonExplicitSupportedLngs&&this.logger.deprecate("whitelist",'options "nonExplicitWhitelist" will be renamed to "nonExplicitSupportedLngs" in the next major - please make sure to rename this option asap.'),this.options=Or({},KN(),this.options,Ub(i)),this.format=this.options.interpolation.format,a||(a=th);function s(C){return C?typeof C=="function"?new C:C:null}if(!this.options.isClone){this.modules.logger?io.init(s(this.modules.logger),this.options):io.init(null,this.options);var o=new UN(this.options);this.store=new MN(this.options.resources,this.options);var l=this.services;l.logger=io,l.resourceStore=this.store,l.languageUtils=o,l.pluralResolver=new zN(o,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),l.interpolator=new HN(this.options),l.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},l.backendConnector=new jN(s(this.modules.backend),l.resourceStore,l,this.options),l.backendConnector.on("*",function(C){for(var N=arguments.length,w=new Array(N>1?N-1:0),I=1;I<N;I++)w[I-1]=arguments[I];r.emit.apply(r,[C].concat(w))}),this.modules.languageDetector&&(l.languageDetector=s(this.modules.languageDetector),l.languageDetector.init(l,this.options.detection,this.options)),this.modules.i18nFormat&&(l.i18nFormat=s(this.modules.i18nFormat),l.i18nFormat.init&&l.i18nFormat.init(this)),this.translator=new Mb(this.services,this.options),this.translator.on("*",function(C){for(var N=arguments.length,w=new Array(N>1?N-1:0),I=1;I<N;I++)w[I-1]=arguments[I];r.emit.apply(r,[C].concat(w))}),this.modules.external.forEach(function(C){C.init&&C.init(r)})}if(this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){var c=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);c.length>0&&c[0]!=="dev"&&(this.options.lng=c[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined");var h=["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"];h.forEach(function(C){r[C]=function(){var N;return(N=r.store)[C].apply(N,arguments)}});var p=["addResource","addResources","addResourceBundle","removeResourceBundle"];p.forEach(function(C){r[C]=function(){var N;return(N=r.store)[C].apply(N,arguments),r}});var E=pc(),b=function(){var N=function(I,S){r.isInitialized&&!r.initializedStoreOnce&&r.logger.warn("init: i18next is already initialized. You should call init just once!"),r.isInitialized=!0,r.options.isClone||r.logger.log("initialized",r.options),r.emit("initialized",r.options),E.resolve(S),a(I,S)};if(r.languages&&r.options.compatibilityAPI!=="v1"&&!r.isInitialized)return N(null,r.t.bind(r));r.changeLanguage(r.options.lng,N)};return this.options.resources||!this.options.initImmediate?b():setTimeout(b,0),E}},{key:"loadResources",value:function(r){var i=this,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:th,s=a,o=typeof r=="string"?r:this.language;if(typeof r=="function"&&(s=r),!this.options.resources||this.options.partialBundledLanguages){if(o&&o.toLowerCase()==="cimode")return s();var l=[],c=function(E){if(E){var b=i.services.languageUtils.toResolveHierarchy(E);b.forEach(function(C){l.indexOf(C)<0&&l.push(C)})}};if(o)c(o);else{var h=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);h.forEach(function(p){return c(p)})}this.options.preload&&this.options.preload.forEach(function(p){return c(p)}),this.services.backendConnector.load(l,this.options.ns,s)}else s(null)}},{key:"reloadResources",value:function(r,i,a){var s=pc();return r||(r=this.languages),i||(i=this.options.ns),a||(a=th),this.services.backendConnector.reload(r,i,function(o){s.resolve(),a(o)}),s}},{key:"use",value:function(r){if(!r)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!r.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return r.type==="backend"&&(this.modules.backend=r),(r.type==="logger"||r.log&&r.warn&&r.error)&&(this.modules.logger=r),r.type==="languageDetector"&&(this.modules.languageDetector=r),r.type==="i18nFormat"&&(this.modules.i18nFormat=r),r.type==="postProcessor"&&Vb.addPostProcessor(r),r.type==="3rdParty"&&this.modules.external.push(r),this}},{key:"changeLanguage",value:function(r,i){var a=this;this.isLanguageChangingTo=r;var s=pc();this.emit("languageChanging",r);var o=function(h,p){p?(a.language=p,a.languages=a.services.languageUtils.toResolveHierarchy(p),a.translator.changeLanguage(p),a.isLanguageChangingTo=void 0,a.emit("languageChanged",p),a.logger.log("languageChanged",p)):a.isLanguageChangingTo=void 0,s.resolve(function(){return a.t.apply(a,arguments)}),i&&i(h,function(){return a.t.apply(a,arguments)})},l=function(h){!r&&!h&&a.services.languageDetector&&(h=[]);var p=typeof h=="string"?h:a.services.languageUtils.getBestMatchFromCodes(h);p&&(a.language||(a.language=p,a.languages=a.services.languageUtils.toResolveHierarchy(p)),a.translator.language||a.translator.changeLanguage(p),a.services.languageDetector&&a.services.languageDetector.cacheUserLanguage(p)),a.loadResources(p,function(E){o(E,p)})};return!r&&this.services.languageDetector&&!this.services.languageDetector.async?l(this.services.languageDetector.detect()):!r&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect(l):l(r),s}},{key:"getFixedT",value:function(r,i,a){var s=this,o=function l(c,h){var p;if(Vi(h)!=="object"){for(var E=arguments.length,b=new Array(E>2?E-2:0),C=2;C<E;C++)b[C-2]=arguments[C];p=s.options.overloadTranslationOptionHandler([c,h].concat(b))}else p=Or({},h);p.lng=p.lng||l.lng,p.lngs=p.lngs||l.lngs,p.ns=p.ns||l.ns;var N=s.options.keySeparator||".",w=a?"".concat(a).concat(N).concat(c):c;return s.t(w,p)};return typeof r=="string"?o.lng=r:o.lngs=r,o.ns=i,o.keyPrefix=a,o}},{key:"t",value:function(){var r;return this.translator&&(r=this.translator).translate.apply(r,arguments)}},{key:"exists",value:function(){var r;return this.translator&&(r=this.translator).exists.apply(r,arguments)}},{key:"setDefaultNamespace",value:function(r){this.options.defaultNS=r}},{key:"hasLoadedNamespace",value:function(r){var i=this,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;var s=this.languages[0],o=this.options?this.options.fallbackLng:!1,l=this.languages[this.languages.length-1];if(s.toLowerCase()==="cimode")return!0;var c=function(E,b){var C=i.services.backendConnector.state["".concat(E,"|").concat(b)];return C===-1||C===2};if(a.precheck){var h=a.precheck(this,c);if(h!==void 0)return h}return!!(this.hasResourceBundle(s,r)||!this.services.backendConnector.backend||c(s,r)&&(!o||c(l,r)))}},{key:"loadNamespaces",value:function(r,i){var a=this,s=pc();return this.options.ns?(typeof r=="string"&&(r=[r]),r.forEach(function(o){a.options.ns.indexOf(o)<0&&a.options.ns.push(o)}),this.loadResources(function(o){s.resolve(),i&&i(o)}),s):(i&&i(),Promise.resolve())}},{key:"loadLanguages",value:function(r,i){var a=pc();typeof r=="string"&&(r=[r]);var s=this.options.preload||[],o=r.filter(function(l){return s.indexOf(l)<0});return o.length?(this.options.preload=s.concat(o),this.loadResources(function(l){a.resolve(),i&&i(l)}),a):(i&&i(),Promise.resolve())}},{key:"dir",value:function(r){if(r||(r=this.languages&&this.languages.length>0?this.languages[0]:this.language),!r)return"rtl";var i=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam"];return i.indexOf(this.services.languageUtils.getLanguagePartFromCode(r))>=0?"rtl":"ltr"}},{key:"createInstance",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=arguments.length>1?arguments[1]:void 0;return new t(r,i)}},{key:"cloneInstance",value:function(){var r=this,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:th,s=Or({},this.options,i,{isClone:!0}),o=new t(s),l=["store","services","language"];return l.forEach(function(c){o[c]=r[c]}),o.services=Or({},this.services),o.services.utils={hasLoadedNamespace:o.hasLoadedNamespace.bind(o)},o.translator=new Mb(o.services,o.options),o.translator.on("*",function(c){for(var h=arguments.length,p=new Array(h>1?h-1:0),E=1;E<h;E++)p[E-1]=arguments[E];o.emit.apply(o,[c].concat(p))}),o.init(s,a),o.translator.options=o.options,o.translator.backendConnector.services.utils={hasLoadedNamespace:o.hasLoadedNamespace.bind(o)},o}},{key:"toJSON",value:function(){return{options:this.options,store:this.store,language:this.language,languages:this.languages}}}]),t}(Vo),GN=new WN,dl=GN;function jp(e){return jp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jp(e)}var zb=[],ZN=zb.forEach,XN=zb.slice;function gc(e){return ZN.call(XN.call(arguments,1),function(t){if(t)for(var n in t)e[n]===void 0&&(e[n]=t[n])}),e}function Kp(){return typeof XMLHttpRequest=="function"||(typeof XMLHttpRequest>"u"?"undefined":jp(XMLHttpRequest))==="object"}function YN(e){return!!e&&typeof e.then=="function"}function Hb(e){return YN(e)?e:Promise.resolve(e)}var oh=Yt(Gb(),1);function sh(e){return sh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sh(e)}var so;typeof fetch=="function"&&(typeof global<"u"&&global.fetch?so=global.fetch:typeof window<"u"&&window.fetch?so=window.fetch:so=fetch);var vc;Kp()&&(typeof global<"u"&&global.XMLHttpRequest?vc=global.XMLHttpRequest:typeof window<"u"&&window.XMLHttpRequest&&(vc=window.XMLHttpRequest));var uh;typeof ActiveXObject=="function"&&(typeof global<"u"&&global.ActiveXObject?uh=global.ActiveXObject:typeof window<"u"&&window.ActiveXObject&&(uh=window.ActiveXObject));!so&&oh&&!vc&&!uh&&(so=oh.default||oh);typeof so!="function"&&(so=void 0);var Gp=function(t,n){if(n&&sh(n)==="object"){var r="";for(var i in n)r+="&"+encodeURIComponent(i)+"="+encodeURIComponent(n[i]);if(!r)return t;t=t+(t.indexOf("?")!==-1?"&":"?")+r.slice(1)}return t},Zb=function(t,n,r){so(t,n).then(function(i){if(!i.ok)return r(i.statusText||"Error",{status:i.status});i.text().then(function(a){r(null,{status:i.status,data:a})}).catch(r)}).catch(r)},Xb=!1,QN=function(t,n,r,i){t.queryStringParams&&(n=Gp(n,t.queryStringParams));var a=gc({},typeof t.customHeaders=="function"?t.customHeaders():t.customHeaders);r&&(a["Content-Type"]="application/json");var s=typeof t.requestOptions=="function"?t.requestOptions(r):t.requestOptions,o=gc({method:r?"POST":"GET",body:r?t.stringify(r):void 0,headers:a},Xb?{}:s);try{Zb(n,o,i)}catch(l){if(!s||Object.keys(s).length===0||!l.message||l.message.indexOf("not implemented")<0)return i(l);try{Object.keys(s).forEach(function(c){delete o[c]}),Zb(n,o,i),Xb=!0}catch(c){i(c)}}},JN=function(t,n,r,i){r&&sh(r)==="object"&&(r=Gp("",r).slice(1)),t.queryStringParams&&(n=Gp(n,t.queryStringParams));try{var a;vc?a=new vc:a=new uh("MSXML2.XMLHTTP.3.0"),a.open(r?"POST":"GET",n,1),t.crossDomain||a.setRequestHeader("X-Requested-With","XMLHttpRequest"),a.withCredentials=!!t.withCredentials,r&&a.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),a.overrideMimeType&&a.overrideMimeType("application/json");var s=t.customHeaders;if(s=typeof s=="function"?s():s,s)for(var o in s)a.setRequestHeader(o,s[o]);a.onreadystatechange=function(){a.readyState>3&&i(a.status>=400?a.statusText:null,{status:a.status,data:a.responseText})},a.send(r)}catch(l){console&&console.log(l)}},eP=function(t,n,r,i){if(typeof r=="function"&&(i=r,r=void 0),i=i||function(){},so)return QN(t,n,r,i);if(Kp()||typeof ActiveXObject=="function")return JN(t,n,r,i);i(new Error("No fetch and no xhr implementation found!"))},Yb=eP;function tP(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Qb(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function nP(e,t,n){return t&&Qb(e.prototype,t),n&&Qb(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function rP(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var iP=function(){return{loadPath:"/locales/{{lng}}/{{ns}}.json",addPath:"/locales/add/{{lng}}/{{ns}}",allowMultiLoading:!1,parse:function(n){return JSON.parse(n)},stringify:JSON.stringify,parsePayload:function(n,r,i){return rP({},r,i||"")},request:Yb,reloadInterval:typeof window<"u"?!1:60*60*1e3,customHeaders:{},queryStringParams:{},crossDomain:!1,withCredentials:!1,overrideMimeType:!1,requestOptions:{mode:"cors",credentials:"same-origin",cache:"default"}}},Jb=function(){function e(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};tP(this,e),this.services=t,this.options=n,this.allOptions=r,this.type="backend",this.init(t,n,r)}return nP(e,[{key:"init",value:function(n){var r=this,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=n,this.options=gc(i,this.options||{},iP()),this.allOptions=a,this.services&&this.options.reloadInterval&&setInterval(function(){return r.reload()},this.options.reloadInterval)}},{key:"readMulti",value:function(n,r,i){this._readAny(n,n,r,r,i)}},{key:"read",value:function(n,r,i){this._readAny([n],n,[r],r,i)}},{key:"_readAny",value:function(n,r,i,a,s){var o=this,l=this.options.loadPath;typeof this.options.loadPath=="function"&&(l=this.options.loadPath(n,i)),l=Hb(l),l.then(function(c){if(!c)return s(null,{});var h=o.services.interpolator.interpolate(c,{lng:n.join("+"),ns:i.join("+")});o.loadUrl(h,s,r,a)})}},{key:"loadUrl",value:function(n,r,i,a){var s=this;this.options.request(this.options,n,void 0,function(o,l){if(l&&(l.status>=500&&l.status<600||!l.status))return r("failed loading "+n+"; status code: "+l.status,!0);if(l&&l.status>=400&&l.status<500)return r("failed loading "+n+"; status code: "+l.status,!1);if(!l&&o&&o.message&&o.message.indexOf("Failed to fetch")>-1)return r("failed loading "+n+": "+o.message,!0);if(o)return r(o,!1);var c,h;try{typeof l.data=="string"?c=s.options.parse(l.data,i,a):c=l.data}catch{h="failed parsing "+n+" to json"}if(h)return r(h,!1);r(null,c)})}},{key:"create",value:function(n,r,i,a,s){var o=this;if(this.options.addPath){typeof n=="string"&&(n=[n]);var l=this.options.parsePayload(r,i,a),c=0,h=[],p=[];n.forEach(function(E){var b=o.options.addPath;typeof o.options.addPath=="function"&&(b=o.options.addPath(E,r));var C=o.services.interpolator.interpolate(b,{lng:E,ns:r});o.options.request(o.options,C,l,function(N,w){c+=1,h.push(N),p.push(w),c===n.length&&s&&s(h,p)})})}}},{key:"reload",value:function(){var n=this,r=this.services,i=r.backendConnector,a=r.languageUtils,s=r.logger,o=i.language;if(!(o&&o.toLowerCase()==="cimode")){var l=[],c=function(p){var E=a.toResolveHierarchy(p);E.forEach(function(b){l.indexOf(b)<0&&l.push(b)})};c(o),this.allOptions.preload&&this.allOptions.preload.forEach(function(h){return c(h)}),l.forEach(function(h){n.allOptions.ns.forEach(function(p){i.read(h,p,"read",null,null,function(E,b){E&&s.warn("loading namespace ".concat(p," for language ").concat(h," failed"),E),!E&&b&&s.log("loaded namespace ".concat(p," for language ").concat(h),b),i.loaded("".concat(h,"|").concat(p),E,b)})})})}}}]),e}();Jb.type="backend";var e1=Jb;var a1=[],aP=a1.forEach,sP=a1.slice;function oP(e){return aP.call(sP.call(arguments,1),function(t){if(t)for(var n in t)e[n]===void 0&&(e[n]=t[n])}),e}var t1=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,uP=function(t,n,r){var i=r||{};i.path=i.path||"/";var a=encodeURIComponent(n),s="".concat(t,"=").concat(a);if(i.maxAge>0){var o=i.maxAge-0;if(Number.isNaN(o))throw new Error("maxAge should be a Number");s+="; Max-Age=".concat(Math.floor(o))}if(i.domain){if(!t1.test(i.domain))throw new TypeError("option domain is invalid");s+="; Domain=".concat(i.domain)}if(i.path){if(!t1.test(i.path))throw new TypeError("option path is invalid");s+="; Path=".concat(i.path)}if(i.expires){if(typeof i.expires.toUTCString!="function")throw new TypeError("option expires is invalid");s+="; Expires=".concat(i.expires.toUTCString())}if(i.httpOnly&&(s+="; HttpOnly"),i.secure&&(s+="; Secure"),i.sameSite){var l=typeof i.sameSite=="string"?i.sameSite.toLowerCase():i.sameSite;switch(l){case!0:s+="; SameSite=Strict";break;case"lax":s+="; SameSite=Lax";break;case"strict":s+="; SameSite=Strict";break;case"none":s+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}}return s},n1={create:function(t,n,r,i){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{path:"/",sameSite:"strict"};r&&(a.expires=new Date,a.expires.setTime(a.expires.getTime()+r*60*1e3)),i&&(a.domain=i),document.cookie=uP(t,encodeURIComponent(n),a)},read:function(t){for(var n="".concat(t,"="),r=document.cookie.split(";"),i=0;i<r.length;i++){for(var a=r[i];a.charAt(0)===" ";)a=a.substring(1,a.length);if(a.indexOf(n)===0)return a.substring(n.length,a.length)}return null},remove:function(t){this.create(t,"",-1)}},lP={name:"cookie",lookup:function(t){var n;if(t.lookupCookie&&typeof document<"u"){var r=n1.read(t.lookupCookie);r&&(n=r)}return n},cacheUserLanguage:function(t,n){n.lookupCookie&&typeof document<"u"&&n1.create(n.lookupCookie,t,n.cookieMinutes,n.cookieDomain,n.cookieOptions)}},cP={name:"querystring",lookup:function(t){var n;if(typeof window<"u"){var r=window.location.search;!window.location.search&&window.location.hash&&window.location.hash.indexOf("?")>-1&&(r=window.location.hash.substring(window.location.hash.indexOf("?")));for(var i=r.substring(1),a=i.split("&"),s=0;s<a.length;s++){var o=a[s].indexOf("=");if(o>0){var l=a[s].substring(0,o);l===t.lookupQuerystring&&(n=a[s].substring(o+1))}}}return n}},yc=null,r1=function(){if(yc!==null)return yc;try{yc=window!=="undefined"&&window.localStorage!==null;var t="i18next.translate.boo";window.localStorage.setItem(t,"foo"),window.localStorage.removeItem(t)}catch{yc=!1}return yc},fP={name:"localStorage",lookup:function(t){var n;if(t.lookupLocalStorage&&r1()){var r=window.localStorage.getItem(t.lookupLocalStorage);r&&(n=r)}return n},cacheUserLanguage:function(t,n){n.lookupLocalStorage&&r1()&&window.localStorage.setItem(n.lookupLocalStorage,t)}},_c=null,i1=function(){if(_c!==null)return _c;try{_c=window!=="undefined"&&window.sessionStorage!==null;var t="i18next.translate.boo";window.sessionStorage.setItem(t,"foo"),window.sessionStorage.removeItem(t)}catch{_c=!1}return _c},hP={name:"sessionStorage",lookup:function(t){var n;if(t.lookupSessionStorage&&i1()){var r=window.sessionStorage.getItem(t.lookupSessionStorage);r&&(n=r)}return n},cacheUserLanguage:function(t,n){n.lookupSessionStorage&&i1()&&window.sessionStorage.setItem(n.lookupSessionStorage,t)}},dP={name:"navigator",lookup:function(t){var n=[];if(typeof navigator<"u"){if(navigator.languages)for(var r=0;r<navigator.languages.length;r++)n.push(navigator.languages[r]);navigator.userLanguage&&n.push(navigator.userLanguage),navigator.language&&n.push(navigator.language)}return n.length>0?n:void 0}},pP={name:"htmlTag",lookup:function(t){var n,r=t.htmlTag||(typeof document<"u"?document.documentElement:null);return r&&typeof r.getAttribute=="function"&&(n=r.getAttribute("lang")),n}},gP={name:"path",lookup:function(t){var n;if(typeof window<"u"){var r=window.location.pathname.match(/\/([a-zA-Z-]*)/g);if(r instanceof Array)if(typeof t.lookupFromPathIndex=="number"){if(typeof r[t.lookupFromPathIndex]!="string")return;n=r[t.lookupFromPathIndex].replace("/","")}else n=r[0].replace("/","")}return n}},mP={name:"subdomain",lookup:function(t){var n=typeof t.lookupFromSubdomainIndex=="number"?t.lookupFromSubdomainIndex+1:1,r=typeof window<"u"&&window.location&&window.location.hostname&&window.location.hostname.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i);if(r)return r[n]}};function vP(){return{order:["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"],lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"]}}var Zp=function(){function e(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Da(this,e),this.type="languageDetector",this.detectors={},this.init(t,n)}return Ra(e,[{key:"init",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=n,this.options=oP(r,this.options||{},vP()),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=i,this.addDetector(lP),this.addDetector(cP),this.addDetector(fP),this.addDetector(hP),this.addDetector(dP),this.addDetector(pP),this.addDetector(gP),this.addDetector(mP)}},{key:"addDetector",value:function(n){this.detectors[n.name]=n}},{key:"detect",value:function(n){var r=this;n||(n=this.options.order);var i=[];return n.forEach(function(a){if(r.detectors[a]){var s=r.detectors[a].lookup(r.options);s&&typeof s=="string"&&(s=[s]),s&&(i=i.concat(s))}}),this.services.languageUtils.getBestMatchFromCodes?i:i.length>0?i[0]:null}},{key:"cacheUserLanguage",value:function(n,r){var i=this;r||(r=this.options.caches),r&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(n)>-1||r.forEach(function(a){i.detectors[a]&&i.detectors[a].cacheUserLanguage(n,i.options)}))}}]),e}();Zp.type="languageDetector";var s1=`${lt.basePath}${lt.offlinePath}/locales/build/__lng__/translation-combined.json`,o1=/^[a-z]{2,3}/,yP=document.createRange(),_P={type:"postProcessor",name:"htmlParagraphsPostProcessor",process(e){let t=e.split(`
`);return t.length>1?`<p>${t.join("</p><p>")}</p>`:e}},u1=e=>bP.then(()=>e),bP=new Promise((e,t)=>{dl.use(e1).use(Zp).use(_P).init({whitelist:lt.languagesSupported,fallbackLng:"en",joinArrays:`
`,backend:{loadPath:s1},load:"languageOnly",lowerCaseLng:!0,detection:{order:["querystring","navigator"],lookupQuerystring:"lang",caches:!1},interpolation:{prefix:"__",suffix:"__"},postProcess:["htmlParagraphsPostProcessor"]},n=>{n?t(n):e()})}),Be=(e,t)=>dl.t(e,t),lh=(e,t)=>{let n={},r=e.querySelectorAll("[data-i18n]");return Promise.resolve().then(()=>{if(t)return dl.changeLanguage(t)}).then(()=>(r.forEach(i=>{let a=i.dataset.i18n;if(i.dataset.i18nNumber&&(a=`${a}-${i.dataset.i18nNumber}`),a){if(!n[a]){let o={};i.dataset.i18nIcon&&(o={icon:`<span class="icon ${i.dataset.i18nIcon}"> </span>`,interpolation:{escapeValue:!1}}),i.dataset.i18nNumber&&(o={number:i.dataset.i18nNumber}),n[a]=Be(i.dataset.i18n,o)}let s=n[a];i.placeholder?i.placeholder=s:i.dataset.i18nIcon?(i.textContent="",i.append(yP.createContextualFragment(s))):i.textContent=s}}),dl.dir()))},xF=e=>{e&&(console.log(`loading translations for ${e}`),fetch(s1.replace("__lng__",e)))},l1=()=>{let e=dl.language.match(o1);return e.length?e[0]:null},c1=()=>{let e=navigator.language.match(o1);return e.length?e[0]:null};Xe.QueueSubmissionSuccess=function(e){return new CustomEvent("queuesubmissionsuccess",{detail:e,bubbles:!0})};Xe.SubmissionSuccess=function(){return new CustomEvent("submissionsuccess",{bubbles:!0})};Xe.Close=function(){return new CustomEvent("close",{bubbles:!0})};Xe.OfflineLaunchCapable=function(e){return new CustomEvent("offlinelaunchcapable",{detail:e,bubbles:!0})};Xe.ApplicationUpdated=function(){return new CustomEvent("applicationupdated",{bubbles:!0})};Xe.FormUpdated=function(){return new CustomEvent("formupdated",{bubbles:!0})};Xe.FormReset=function(){return new CustomEvent("formreset",{bubbles:!0})};var Br=Xe;var Xp=navigator.userAgent,f1=navigator.platform,oo={get ios(){return/iPad|iPhone|iPod/i.test(f1)||/Mac/i.test(f1)&&document.documentElement.ontouchstart!==void 0},get android(){return/android/i.test(Xp)},get macos(){return/Mac/.test(Xp)}},h1={get safari(){return/^((?!chrome|android).)*safari/i.test(Xp)}};var d1={},Yp=!1;["date","datetime-local","time","month"].forEach(e=>{let t=document.createElement("input");t.setAttribute("type",e),d1[e]=t.type!=="text"});(oo.ios||oo.android)&&(Yp=!0,document.documentElement.classList.add("touch"));var $n={get inputTypes(){return d1},get touch(){return Yp},set touch(e){Yp=e}};var wc=Yt(gr());var p1,bc,ch;document.addEventListener("DOMContentLoaded",()=>wP());function wP(){let e={},t=document.body.appendChild(document.createElement("DIV"));t.style.width="1in",t.style.padding="0",e.v=t.offsetWidth,t.parentNode.removeChild(t),p1=e.v}function xP(){for(let e in document.styleSheets)if(Object.prototype.hasOwnProperty.call(document.styleSheets,e)){let t=document.styleSheets[e];if(t.media.mediaText==="print")return t}return null}function EP(){return document.querySelector('link[media="print"]')}function g1(){return bc=bc||xP(),ch=ch||EP(),bc.media.mediaText="all",ch.setAttribute("media","all"),!!bc}function m1(){bc.media.mediaText="print",ch.setAttribute("media","print"),document.querySelectorAll(".print-height-adjusted, .print-width-adjusted, .main").forEach(e=>{e.removeAttribute("style"),e.classList.remove("print-height-adjusted","print-width-adjusted")}),(0,wc.default)(".back-to-screen-view").off("click").remove()}function Jp(){return/theme-.*grid.*/.test(document.querySelector("form.or").getAttribute("class"))}function eg(e,t=500){let n=new ul,r=document.querySelector(".main"),i="print-width-adjusted",a=n.waitForClassChange(r,i);return r.style.width=CP(e),r.classList.add(i),a.then(()=>{let s=[],o,l=document.querySelector("#form-title"),c=l?l.offsetWidth-1:null,h=document.querySelectorAll(".question:not(.draft), .trigger:not(.draft)");return h.forEach((p,E)=>{let b=E===h.length-1,{top:C}=(0,wc.default)(p).offset();o=o||o===0?o:C,C===o&&(s=s.concat(p)),b&&Qp(s,c),C>o?(Qp(s,c),b&&!s.includes(p)?Qp([p],c):(s=[p],o=(0,wc.default)(p).offset().top)):o<C&&console.error("unexpected question top position: ",C,"for element:",p,"expected >=",o)}),n.waitForQuietness().then(()=>new Promise(p=>{setTimeout(p,t)}))})}function Qp(e,t){let n=[],r=0,i=0;if(e.forEach(a=>{let s=Number((0,wc.default)(a).css("width").replace("px",""));n.push(s),r+=s}),r<t){let a=t-r;e.forEach((s,o)=>{let l=n[o]+n[o]/r*a;s.style.width=`${Math.floor(l*100/t*100)/100}%`,s.classList.add("print-width-adjusted")})}e.forEach(a=>{let s=a.offsetHeight;i=s>i?s:i}),e.forEach(a=>{a.classList.contains("or-appearance-image-map")||(a.classList.add("print-height-adjusted"),a.style.height=`${i}px`)})}function CP(e){let t,n={Letter:[8.5,11],Legal:[8.5,14],Tabloid:[11,17],Ledger:[17,11],A0:[33.1,46.8],A1:[23.4,33.1],A2:[16.5,23.4],A3:[11.7,16.5],A4:[8.27,11.7],A5:[5.83,8.27],A6:[4.13,5.83]};return e.landscape=typeof e.landscape=="boolean"?e.landscape:e.orientation==="landscape",delete e.orientation,typeof e.margin>"u"?e.margin=.4:/^[\d.]+in$/.test(e.margin.trim())?e.margin=parseFloat(e.margin,10):/^[\d.]+cm$/.test(e.margin.trim())?e.margin=parseFloat(e.margin,10)/2.54:/^[\d.]+mm$/.test(e.margin.trim())&&(e.margin=parseFloat(e.margin,10)/25.4),e.format=typeof e.format=="string"&&typeof n[e.format]<"u"?e.format:"A4",t=e.landscape===!0?n[e.format][1]:n[e.format][0],`${(t-2*e.margin)*p1}px`}function tg(){document.querySelectorAll("details.or-form-guidance.active").forEach(e=>{e.open?e.dataset.previousOpen=!0:e.open=!0})}function ng(){document.querySelectorAll("details.or-form-guidance.active").forEach(e=>{e.dataset.previousOpen?delete e.dataset.previousOpen:e.open=!1})}var Oa=Yt(y1()),mr=Yt(xc()),I1=Yt(A1());var sg={get feedbackBar(){return this._fbBar||(this._fbBar=document.querySelector("#feedback-bar")),this._fbBar},get messages(){return this.feedbackBar.querySelectorAll("p")},setCloseHandler(){this.feedbackBar.querySelector(".close").addEventListener("click",()=>{this.hide()})},show(e,t){this.feedbackBar.classList.add("feedback-bar--show");let{messages:n}=this;if(n.length>1&&n[1].remove(),!n[0]||n[0].innerHTML!==e.trim()){let r=document.createElement("p");r.innerHTML=e.trim(),this.feedbackBar.prepend(r),t&&setTimeout(()=>{r.remove(),this.messages.length===0&&this.hide()},t*1e3)}},hide(){this.feedbackBar.classList.remove("feedback-bar--show"),this.messages.forEach(e=>e.remove())}};var dh=navigator.userAgent,Ec={browser:{get chrome(){let e=/chrome|crios\/(\d+)/i.test(dh);return!/edge\//i.test(dh)&&e},get safari(){return/^((?!chrome|android|fxios|crios|ucbrowser).)*safari/i.test(dh)},get firefox(){return/firefox|fxios/i.test(dh)}},os:oo};var zo=Yt(xc());zo.default.fn.capitalizeStart=function(e){e||(e=1);let t=this.contents().filter(function(){return this.nodeType===3}).first(),n=t.text(),r=n.split(" ",e).join(" ");t.length&&(t[0].nodeValue=n.slice(r.length),t.before(`<span class="capitalize">${r}</span>`))};zo.default.fn.btnBusyState=function(e){return this.each(function(){let t=(0,zo.default)(this),n=t.find(".temp").html();e&&!n?(n=t.html(),t.empty().append("<progress></progress>").append((0,zo.default)('<span class="temp" style="display: none;"/>').append(n)).attr("disabled",!0)):!e&&n&&t.empty().append(n).removeAttr("disabled")})};zo.default.fn.btnText=function(e){(0,zo.default)(this).add((0,zo.default)(this).find("span")).last()[0].lastChild.textContent=e};var MP,Cc,N1,Su;Oa.default.registerPlugin(I1.default);Oa.default.defaultOptions.className="vex-theme-plain";function UP(){u1().then(qP),typeof window.console>"u"&&(window.console={log(){}}),typeof window.console.debug>"u"&&(console.debug=console.log),lt.touch?($n.touch=!0,(0,mr.default)("html").addClass("touch")):lt.touch===!1&&($n.touch=!1,(0,mr.default)("html").removeClass("touch"))}function qP(){let e=(0,mr.default)(document);sg.setCloseHandler(),e.on("click",".side-slider .close, .slider-overlay",()=>{(0,mr.default)("body").removeClass("show-side-slider")}),(0,mr.default)(".form-header__button--print").on("click",R1),(0,mr.default)(".side-slider__toggle, .offline-enabled__queue-length").on("click",()=>{let t=(0,mr.default)("body");window.scrollTo(0,0),t.toggleClass("show-side-slider")}),(0,mr.default)(".offline-enabled__icon").on("click",()=>{let t=Be("alert.offlinesupported.msg");Tu(t,Be("alert.offlinesupported.heading"),"normal")}),(0,mr.default)("#save-draft").on("click",".save-draft-info",()=>{let t=document.querySelector(".side-slider__toggle").cloneNode(!0);t.removeAttribute("aria-label"),t.style.position="static",t.style.margin="10px auto",t.style.display="block",t.disabled=!0;let n=Be("alert.savedraftinfo.msg",{icon:t.outerHTML,interpolation:{escapeValue:!1}});Tu(n,Be("alert.savedraftinfo.heading"),"normal")}),(0,mr.default)("a.branding").on("click",function(){let t=this.getAttribute("href");return!(!t||t==="#")}),D1()&&(0,mr.default)(".form-header__button--homescreen").removeClass("hide").on("click",$P),e.on("xpatherror",(t,n)=>{let r=lt.supportEmail,i=`<a href="mailto:${r}?subject=xpath errors for: ${encodeURIComponent(location.href)}&body=${encodeURIComponent(n)}" target="_blank" >${r}</a>`;Tu(`${Be("alert.xpatherror.msg",{emailLink:i,interpolation:{escapeValue:!1}})}<ul class="error-list"><li>${n}</li></ul>`,Be("alert.xpatherror.heading"))}),(0,mr.default)(".side-slider__app-version").on("click",()=>{(0,mr.default)(".side-slider__advanced").toggleClass("hide")})}function FP(e){let t=e.theme,n=(0,mr.default)("link[rel=stylesheet][href*=theme-]"),r=/\/theme-([A-z]+)(\.print)?\.css/.exec(n.eq(0).attr("href"));return Su=r!==null?r[1]:null,new Promise(i=>{if(t&&t!==Su&&lt.themesSupported.some(a=>t===a)){let a=[];n.each(function(){a.push((0,mr.default)(this.outerHTML.replace(/(href=.*\/theme-)[A-z]+((\.print)?\.css)/,`$1${t}$2`)))}),console.log("Swapping theme to",t),a[0].on("load",()=>{Su=t,i(e)}),n.each(function(s){(0,mr.default)(this).replaceWith(a[s])})}else console.log("Keeping default theme."),delete e.theme,i(e)})}function VP(e,t,n=Be("feedback.header")){$n.touch?Tu(e,n,"info",t):sg.show(e,t)}function Tu(e,t,n,r){return n=n||"error",Oa.default.closeAll(),Oa.default.dialog.alert({unsafeMessage:`<span>${e}</span>`,title:t||Be("alert.default.heading"),messageClassName:n==="normal"?"":`alert-box ${n}`,buttons:[{text:Be("alert.validationsuccess.heading"),type:"submit",className:"btn btn-primary small"}],autoClose:r,showCloseButton:!0}),Promise.resolve()}function ug(e,t){let n="",r=typeof e=="string"?e:e.msg;return e.errorMsg&&(n=`<p class="alert-box error">${e.errorMsg}</p>`),new Promise(i=>{t=t||{},t.allowAlternativeClose=typeof t.allowAlternativeClose<"u"?t.allowAlternativeClose:!0,Oa.default.closeAll(),Oa.default.dialog.confirm({unsafeMessage:n+(r||Be("confirm.default.msg")),title:e.heading||Be("confirm.default.heading"),buttons:[mr.default.extend({},Oa.default.dialog.buttons.YES,{text:t.posButton||Be("confirm.default.posButton"),className:"btn btn-primary small"}),mr.default.extend({},Oa.default.dialog.buttons.NO,{text:t.negButton||Be("confirm.default.negButton"),className:"btn btn-default small"})],callback:i,afterClose:i,showCloseButton:t.allowAlternativeClose,escapeButtonCloses:t.allowAlternativeClose,overlayClosesOnClick:t.allowAlternativeClose})})}function P1(e,t,n){let r="",i=typeof e=="string"?e:e.msg;return e.errorMsg&&(r=`<p class="alert-box error">${e.errorMsg}</p>`),new Promise(a=>{t=t||{},Oa.default.closeAll(),Oa.default.dialog.prompt({unsafeMessage:r+(i||""),title:e.heading||Be("prompt.default.heading"),buttons:[mr.default.extend({},Oa.default.dialog.buttons.YES,{text:t.posButton||Be("confirm.default.posButton"),className:"btn btn-primary small"}),mr.default.extend({},Oa.default.dialog.buttons.NO,{text:t.negButton||Be("confirm.default.negButton"),className:"btn btn-default small"})],input:n,callback:a,showCloseButton:!0})})}function zP(e){e=e||Be("confirm.login.msg"),ug({msg:e,heading:Be("confirm.login.heading")},{posButton:Be("confirm.login.posButton"),negButton:Be("confirm.login.negButton")}).then(t=>{if(!t)return;let n=`?return_url=${encodeURIComponent(location.href)}`;n+=lt.touch?`&touch=${lt.touch}`:"",n+=lt.debug?`&debug=${lt.debug}`:"",location.href=`${location.protocol}//${location.host}${lt.loginUrl}${n}`})}function HP(e,t,n={}){let r=e.map(p=>`<p>${p.split(`

`).join("</p><p>")}</p>`),i=e.length===1?`${r[0]}`:`<ul class="error-list"><li>${r.join("</li><li>")}</li></ul>`,a=`* ${e.join(`
* `)}`,s=lt.supportEmail,l={emailLink:`<a href="mailto:${s}?subject=loading errors for: ${encodeURIComponent(location.href)}&body=${encodeURIComponent(a)}" target="_blank" >${s}</a>`,count:e.length,interpolation:{escapeValue:!1}};t=t||"";let c=n.omitIntro?"":`${Be("alert.loaderror.msg1",l)} `,h=n.omitSupportContact?"":`<p>${Be("alert.loaderror.msg2",l)}</p>`;Tu(`<p>${c}${t}</p>${h}${i}`,Be("alert.loaderror.heading",l))}function $P(){Tu(D1(),Be("alert.addtohomescreen.heading"),"normal")}function D1(){let e,{browser:t}=Ec,{os:n}=Ec;return Cc||(n.ios&&t.safari?(e="ios-safari",Cc=Be("alert.addtohomescreen.iossafari.msg",og(e))):n.android&&t.chrome?(e="android-chrome",Cc=Be("alert.addtohomescreen.androidchrome.msg",og(e))):n.android&&t.firefox&&(Cc=Be("alert.addtohomescreen.androidfirefox.msg",og()))),Cc}function og(e,t){return{image1:e?`<span class="${e}"/>`:"",image2:t?`<span class="${t}"/>`:"",interpolation:{escapeValue:!1}}}function R1(){let e=O1(),t={heading:e.heading,msg:e.msg},n={posButton:e.posButton,negButton:e.negButton},r=e.gridInputs+e.gridWarning,i=document.querySelectorAll(".question");return tg(),i.forEach(a=>a.dispatchEvent(Br.Printify())),Su==="grid"||!Su&&Jp()?P1(t,n,r).then(a=>{if(a)return jP(a)}).then(()=>{ng(),i.forEach(a=>a.dispatchEvent(Br.DePrintify()))}):(window.print(),ng(),i.forEach(a=>a.dispatchEvent(Br.DePrintify())),Promise.resolve())}function O1(){return{heading:Be("confirm.print.heading"),msg:Be("confirm.print.msg"),posButton:Be("confirm.print.posButton"),negButton:Be("alert.default.button"),gridInputs:`<fieldset><legend>${Be("confirm.print.psize")}</legend><label><input name="format" type="radio" value="A4" required checked/><span>${Be("confirm.print.a4")}</span></label><label><input name="format" type="radio" value="Letter" required/><span>${Be("confirm.print.letter")}</span></label></fieldset><fieldset><legend>${Be("confirm.print.orientation")}</legend><label><input name="orientation" type="radio" value="portrait" required checked/><span>${Be("confirm.print.portrait")}</span></label><label><input name="orientation" type="radio" value="landscape" required/><span>${Be("confirm.print.landscape")}</span></label></fieldset>`,gridWarning:`<p class="alert-box info" >${Be("confirm.print.reminder")}</p>`}}function jP(e){let t=g1();return eg(e).then(window.print).catch(console.error).then(()=>{if(t)return new Promise(n=>{setTimeout(()=>{m1(),n()},500)})})}function KP(){WP().then(()=>{if(tg(),document.querySelectorAll(".question").forEach(e=>e.dispatchEvent(Br.Printify())),Su==="grid"||!Su&&Jp()){let e={format:lt.format,landscape:lt.landscape,scale:lt.scale,margin:lt.margin};return eg(e)}}).then(()=>{window.printReady=!0}).catch(console.error)}function WP(){return new Promise(e=>{let t=[...document.images],n=setInterval(()=>{t=t.filter(r=>!r.complete),t.length===0&&(clearInterval(n),e())},150)})}function GP(){let e=Be("alert.offlineunsupported.msg"),t={posButton:Be("alert.offlineunsupported.posButton"),negButton:Be("alert.offlineunsupported.negButton")};ug({msg:e,heading:Be("alert.offlineunsupported.heading")},t).then(n=>{n&&(window.location=lt.modernBrowsersURL)})}N1={offlineCapable(e){e?(0,mr.default)(".offline-enabled__icon.not-enabled").removeClass("not-enabled"):(0,mr.default)(".offline-enabled__icon").addClass("not-enabled")},applicationVersion(e){(0,mr.default)(".side-slider__app-version__value").text(e)}};function ZP(e){let t,n={supportEmail:lt.supportEmail},r=Be("contact.support",n),i=Be("contact.admin"),a={0:Be("submission.http0"),200:`${Be("submission.http2xx")}<br/>${r}`,"2xx":`${Be("submission.http2xx")}<br/>${r}`,400:`${Be("submission.http400")}<br/>${i}`,401:Be("submission.http401"),403:`${Be("submission.http403")}<br/>${i}`,404:Be("submission.http404"),408:Be("submission.http408"),"4xx":Be("submission.http4xx"),413:`${Be("submission.http413")}<br/>${r}`,500:Be("submission.http500",n),503:Be("submission.http500",n),504:Be("submission.http504",n),"5xx":Be("submission.http500",n)};return e=typeof e<"u"?e.toString():"undefined",a[e]?t=`${a[e]} (${e})`:a[e.replace(e.substring(1),"xx")]?t=`${a[e.replace(e.substring(1),"xx")]} (${e})`:t=`${Be("error.unknown")} (${e})`,t}(0,mr.default)(document).ready(()=>{UP()});var cn={alert:Tu,confirm:ug,prompt:P1,feedback:VP,updateStatus:N1,pages:MP,swapTheme:FP,confirmLogin:zP,alertLoadErrors:HP,alertCacheUnsupported:GP,getErrorResponseMsg:ZP,applyPrintStyle:KP,getPrintDialogComponents:O1,printForm:R1};var Yx=Yt(M1());var Ba=Yt(Lp());var XP="AES-CFB",YP="RSA-OAEP",QP={md:Ba.default.md.sha256.create(),mgf:Ba.default.mgf.mgf1.create(Ba.default.md.sha1.create())};function JP(){return typeof ArrayBuffer<"u"&&new ArrayBuffer(8).byteLength===8&&typeof Uint8Array<"u"&&new Uint8Array(8).length===8}var U1=Symbol("isEncryptionEnabled");function q1(e){return Boolean(e[U1])}function eD(e){return q1(e)?{...e,isEncryptionEnabled:!0}:e}function tD(e){if(e.isEncryptionEnabled){let t={...e};return delete t.isEncryptionEnabled,F1(t)}return e}function F1(e){return Object.defineProperty(e,U1,{configurable:!1,value:!0})}function nD(e,t){let n=rD(),r=`-----BEGIN PUBLIC KEY-----${e.encryptionKey}-----END PUBLIC KEY-----`,i=Ba.default.pki.publicKeyFromPem(r),a=V1(n,i),s=new H1(t.instanceId,n),o=new oD(e.id,e.version);o.addElement("base64EncryptedKey",a),o.addMetaElement("instanceID",t.instanceId);let l=[e.id];return e.version&&l.push(e.version),l=l.concat([a,t.instanceId]),aD(t.files,n,s).then(o.addMediaFiles).then(c=>{let h=sD(t.xml,n,s);return o.addXmlSubmissionFile(h),c.push(h),c}).then(c=>{let h=c.map(p=>`${p.name.substring(0,p.name.length-4)}::${p.md5}`);return l=l.concat(h),o.addElement("base64EncryptedElementSignature",iD(l,i)),t.xml=o.getXmlStr(),t.files=c,t})}function rD(){return Ba.default.random.getBytesSync(32)}function V1(e,t){let n=t.encrypt(e,YP,QP);return Ba.default.util.encode64(n)}function ph(e){let t=Ba.default.md.md5.create();return t.update(e),t.digest()}function iD(e,t){let n=`${e.join(`
`)}
`,r=ph(n).getBytes();return V1(r,t)}function aD(e,t,n){return e=e||[],e.map(i=>()=>pa.blobToDataUri(i).then(a=>{let s=Ba.default.util.decode64(a.split(",")[1]),o=Ba.default.util.createBuffer(s,"raw"),l=z1(o,t,n);return l.name=`${i.name}.enc`,l.md5=ph(s).toHex(),l})).reduce((i,a)=>i.then(s=>a().then(o=>(s.push(o),s))),Promise.resolve([]))}function sD(e,t,n){let r=z1(Ba.default.util.createBuffer(e,"utf8"),t,n);return r.name="submission.xml.enc",r.md5=ph(e).toHex(),r}function z1(e,t,n){let r=Ba.default.cipher.createCipher(XP,t),i=n.getIncrementedSeedByteString();r.mode.pad=Ba.default.cipher.modes.cbc.prototype.pad.bind(r.mode),r.start({iv:i}),r.update(e);let a=r.finish(),s=r.output.getBytes();if(!a)throw new Error("Encryption failed.");let o=new ArrayBuffer(s.length),l=new Uint8Array(o);for(let c=0;c<s.length;c++)l[c]=s.charCodeAt(c);return new Blob([l])}function H1(e,t){let r=ph(e+t).getBytes().split("").map(a=>a.charCodeAt(0)),i=0;this.getIncrementedSeedByteString=()=>(++r[i%r.length],++i,r.map(a=>String.fromCharCode(a)).join(""))}function oD(e,t){let n="http://opendatakit.org/submissions",r="http://openrosa.org/xforms",i=document.createElementNS(n,"data");i.setAttribute("encrypted","yes"),i.setAttribute("id",e),t&&i.setAttribute("version",t),this.getXmlStr=()=>new XMLSerializer().serializeToString(i),this.addElement=(s,o)=>{let l=document.createElementNS(n,s);l.textContent=o,i.appendChild(l)},this.addMetaElement=(s,o)=>{let l=i.querySelector("meta"),c=l||document.createElementNS(r,"meta"),h=document.createElementNS(r,s);h.textContent=o,c.appendChild(h),l||i.appendChild(c)},this.addMediaFiles=s=>s.map(a),this.addXmlSubmissionFile=s=>{let o=document.createElementNS(n,"encryptedXmlFile");o.setAttribute("type","file"),o.textContent=s.name,i.appendChild(o)};function a(s){let o=document.createElementNS(n,"media"),l=document.createElementNS(n,"file");return l.setAttribute("type","file"),l.textContent=s.name,o.appendChild(l),i.appendChild(o),s}}var ss={isEncryptionEnabled:q1,setEncryptionEnabled:F1,serializeEncryptedSurvey:eD,deserializeEncryptedSurvey:tD,isSupported:JP,encryptRecord:nD,Seed:H1};var Eh=Yt(K1());var gh,uD=new Uint8Array(16);function cg(){if(!gh&&(gh=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!gh))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return gh(uD)}var W1=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function lD(e){return typeof e=="string"&&W1.test(e)}var G1=lD;var Ai=[];for(mh=0;mh<256;++mh)Ai.push((mh+256).toString(16).substr(1));var mh;function cD(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=(Ai[e[t+0]]+Ai[e[t+1]]+Ai[e[t+2]]+Ai[e[t+3]]+"-"+Ai[e[t+4]]+Ai[e[t+5]]+"-"+Ai[e[t+6]]+Ai[e[t+7]]+"-"+Ai[e[t+8]]+Ai[e[t+9]]+"-"+Ai[e[t+10]]+Ai[e[t+11]]+Ai[e[t+12]]+Ai[e[t+13]]+Ai[e[t+14]]+Ai[e[t+15]]).toLowerCase();if(!G1(n))throw TypeError("Stringified UUID is invalid");return n}var Z1=cD;function fD(e,t,n){e=e||{};var r=e.random||(e.rng||cg)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,t){n=n||0;for(var i=0;i<16;++i)t[n+i]=r[i];return t}return Z1(r)}var Sc=fD;var Gg=Yt(X1()),qs=Yt(ow());function yD(e){return typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer||typeof Blob<"u"&&e instanceof Blob}function _D(e){return e instanceof ArrayBuffer?e.slice(0):e.slice(0,e.size,e.type)}var Ow=Function.prototype.toString,bD=Ow.call(Object);function wD(e){var t=Object.getPrototypeOf(e);if(t===null)return!0;var n=t.constructor;return typeof n=="function"&&n instanceof n&&Ow.call(n)==bD}function ui(e){var t,n,r;if(!e||typeof e!="object")return e;if(Array.isArray(e)){for(t=[],n=0,r=e.length;n<r;n++)t[n]=ui(e[n]);return t}if(e instanceof Date&&isFinite(e))return e.toISOString();if(yD(e))return _D(e);if(!wD(e))return e;t={};for(n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var i=ui(e[n]);typeof i<"u"&&(t[n]=i)}return t}function Bw(e){var t=!1;return function(...n){if(t)throw new Error("once called more than once");t=!0,e.apply(this,n)}}function Mw(e){return function(...t){t=ui(t);var n=this,r=typeof t[t.length-1]=="function"?t.pop():!1,i=new Promise(function(a,s){var o;try{var l=Bw(function(c,h){c?s(c):a(h)});t.push(l),o=e.apply(n,t),o&&typeof o.then=="function"&&a(o)}catch(c){s(c)}});return r&&i.then(function(a){r(null,a)},r),i}}function xD(e,t,n){if(e.constructor.listeners("debug").length){for(var r=["api",e.name,t],i=0;i<n.length-1;i++)r.push(n[i]);e.constructor.emit("debug",r);var a=n[n.length-1];n[n.length-1]=function(s,o){var l=["api",e.name,t];l=l.concat(s?["error",s]:["success",o]),e.constructor.emit("debug",l),a(s,o)}}}function zr(e,t){return Mw(function(...n){if(this._closed)return Promise.reject(new Error("database is closed"));if(this._destroyed)return Promise.reject(new Error("database is destroyed"));var r=this;return xD(r,e,n),this.taskqueue.isReady?t.apply(this,n):new Promise(function(i,a){r.taskqueue.addTask(function(s){s?a(s):i(r[e].apply(r,n))})})})}function Ic(e,t){for(var n={},r=0,i=t.length;r<i;r++){var a=t[r];a in e&&(n[a]=e[a])}return n}var ED=6;function uw(e){return e}function CD(e){return[{ok:e}]}function Uw(e,t,n){var r=t.docs,i=new Map;r.forEach(function(N){i.has(N.id)?i.get(N.id).push(N):i.set(N.id,[N])});var a=i.size,s=0,o=new Array(a);function l(){var N=[];o.forEach(function(w){w.docs.forEach(function(I){N.push({id:w.id,docs:[I]})})}),n(null,{results:N})}function c(){++s===a&&l()}function h(N,w,I){o[N]={id:w,docs:I},c()}var p=[];i.forEach(function(N,w){p.push(w)});var E=0;function b(){if(!(E>=p.length)){var N=Math.min(E+ED,p.length),w=p.slice(E,N);C(w,E),E+=w.length}}function C(N,w){N.forEach(function(I,S){var _=w+S,P=i.get(I),v=Ic(P[0],["atts_since","attachments"]);v.open_revs=P.map(function($){return $.rev}),v.open_revs=v.open_revs.filter(uw);var y=uw;v.open_revs.length===0&&(delete v.open_revs,y=CD),["revs","attachments","binary","ajax","latest"].forEach(function($){$ in t&&(v[$]=t[$])}),e.get(I,v,function($,Z){var ce;$?ce=[{error:$}]:ce=y(Z),h(_,I,ce),b()})})}b()}var Tg;try{localStorage.setItem("_pouch_check_localstorage",1),Tg=!!localStorage.getItem("_pouch_check_localstorage")}catch{Tg=!1}function Ch(){return Tg}var Fs=typeof queueMicrotask=="function"?queueMicrotask:function(t){Promise.resolve().then(t)},Lg=class extends qs.default{constructor(){super(),this._listeners={},Ch()&&addEventListener("storage",t=>{this.emit(t.key)})}addListener(t,n,r,i){if(this._listeners[n])return;var a=!1,s=this;function o(){if(!s._listeners[n])return;if(a){a="waiting";return}a=!0;var l=Ic(i,["style","include_docs","attachments","conflicts","filter","doc_ids","view","since","query_params","binary","return_docs"]);function c(){a=!1}r.changes(l).on("change",function(h){h.seq>i.since&&!i.cancelled&&(i.since=h.seq,i.onChange(h))}).on("complete",function(){a==="waiting"&&Fs(o),a=!1}).on("error",c)}this._listeners[n]=o,this.on(t,o)}removeListener(t,n){n in this._listeners&&(super.removeListener(t,this._listeners[n]),delete this._listeners[n])}notifyLocalWindows(t){Ch()&&(localStorage[t]=localStorage[t]==="a"?"b":"a")}notify(t){this.emit(t),this.notifyLocalWindows(t)}};function Xa(e){if(typeof console<"u"&&typeof console[e]=="function"){var t=Array.prototype.slice.call(arguments,1);console[e].apply(console,t)}}function SD(e,t){var n=6e5;e=parseInt(e,10)||0,t=parseInt(t,10),t!==t||t<=e?t=(e||1)<<1:t=t+1,t>n&&(e=n>>1,t=n);var r=Math.random(),i=t-e;return~~(i*r+e)}function TD(e){var t=0;return e||(t=2e3),SD(e,t)}function kg(e,t){Xa("info","The above "+e+" is totally normal. "+t)}var nr=class extends Error{constructor(t,n,r){super(),this.status=t,this.name=n,this.message=r,this.error=!0}toString(){return JSON.stringify({status:this.status,name:this.name,message:this.message,reason:this.reason})}},cV=new nr(401,"unauthorized","Name or password is incorrect."),LD=new nr(400,"bad_request","Missing JSON list of 'docs'"),Ga=new nr(404,"not_found","missing"),wl=new nr(409,"conflict","Document update conflict"),qw=new nr(400,"bad_request","_id field must contain a string"),kD=new nr(412,"missing_id","_id is required for puts"),AD=new nr(400,"bad_request","Only reserved document ids may start with underscore."),fV=new nr(412,"precondition_failed","Database not open"),Zg=new nr(500,"unknown_error","Database encountered an unknown error"),Fw=new nr(500,"badarg","Some query argument is invalid"),hV=new nr(400,"invalid_request","Request was invalid"),ID=new nr(400,"query_parse_error","Some query parameter is invalid"),lw=new nr(500,"doc_validation","Bad special document member"),Ph=new nr(400,"bad_request","Something wrong with the request"),dg=new nr(400,"bad_request","Document must be a JSON object"),dV=new nr(404,"not_found","Database not found"),Xg=new nr(500,"indexed_db_went_bad","unknown"),pV=new nr(500,"web_sql_went_bad","unknown"),gV=new nr(500,"levelDB_went_went_bad","unknown"),mV=new nr(403,"forbidden","Forbidden by design doc validate_doc_update function"),wh=new nr(400,"bad_request","Invalid rev format"),vV=new nr(412,"file_exists","The database could not be created, the file already exists."),ND=new nr(412,"missing_stub","A pre-existing attachment stub wasn't found"),yV=new nr(413,"invalid_url","Provided URL is invalid");function tn(e,t){function n(r){for(var i=Object.getOwnPropertyNames(e),a=0,s=i.length;a<s;a++)typeof e[i[a]]!="function"&&(this[i[a]]=e[i[a]]);this.stack===void 0&&(this.stack=new Error().stack),r!==void 0&&(this.reason=r)}return n.prototype=nr.prototype,new n(t)}function xl(e){if(typeof e!="object"){var t=e;e=Zg,e.data=t}return"error"in e&&e.error==="conflict"&&(e.name="conflict",e.status=409),"name"in e||(e.name=e.error||"unknown"),"status"in e||(e.status=500),"message"in e||(e.message=e.message||e.reason),"stack"in e||(e.stack=new Error().stack),e}function PD(e,t,n){try{return!e(t,n)}catch(i){var r="Filter function threw: "+i.toString();return tn(Ph,r)}}function Yg(e){var t={},n=e.filter&&typeof e.filter=="function";return t.query=e.query_params,function(i){i.doc||(i.doc={});var a=n&&PD(e.filter,i.doc,t);if(typeof a=="object")return a;if(a)return!1;if(!e.include_docs)delete i.doc;else if(!e.attachments)for(var s in i.doc._attachments)Object.prototype.hasOwnProperty.call(i.doc._attachments,s)&&(i.doc._attachments[s].stub=!0);return!0}}function Vw(e){var t;if(e?typeof e!="string"?t=tn(qw):/^_/.test(e)&&!/^_(design|local)/.test(e)&&(t=tn(AD)):t=tn(kD),t)throw t}function Us(e){return typeof e._remote=="boolean"?e._remote:typeof e.type=="function"?(Xa("warn","db.type() is deprecated and will be removed in a future version of PouchDB"),e.type()==="http"):!1}function DD(e,t){return"listenerCount"in e?e.listenerCount(t):qs.default.listenerCount(e,t)}function Ag(e){if(!e)return null;var t=e.split("/");return t.length===2?t:t.length===1?[e,e]:null}function cw(e){var t=Ag(e);return t?t.join("/"):null}var fw=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],hw="queryKey",RD=/(?:^|&)([^&=]*)=?([^&]*)/g,OD=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/;function zw(e){for(var t=OD.exec(e),n={},r=14;r--;){var i=fw[r],a=t[r]||"",s=["user","password"].indexOf(i)!==-1;n[i]=s?decodeURIComponent(a):a}return n[hw]={},n[fw[12]].replace(RD,function(o,l,c){l&&(n[hw][l]=c)}),n}function Qg(e,t){var n=[],r=[];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n.push(i),r.push(t[i]));return n.push(e),Function.apply(null,n).apply(null,r)}function Sh(e,t,n){return e.get(t).catch(function(r){if(r.status!==404)throw r;return{}}).then(function(r){var i=r._rev,a=n(r);return a?(a._id=t,a._rev=i,BD(e,a,n)):{updated:!1,rev:i}})}function BD(e,t,n){return e.put(t).then(function(r){return{updated:!0,rev:r.rev}},function(r){if(r.status!==409)throw r;return Sh(e,t._id,n)})}var Jg=function(e){return atob(e)},Nc=function(e){return btoa(e)};function em(e,t){e=e||[],t=t||{};try{return new Blob(e,t)}catch(a){if(a.name!=="TypeError")throw a;for(var n=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,r=new n,i=0;i<e.length;i+=1)r.append(e[i]);return r.getBlob(t.type)}}function MD(e){for(var t=e.length,n=new ArrayBuffer(t),r=new Uint8Array(n),i=0;i<t;i++)r[i]=e.charCodeAt(i);return n}function tm(e,t){return em([MD(e)],{type:t})}function nm(e,t){return tm(Jg(e),t)}function UD(e){for(var t="",n=new Uint8Array(e),r=n.byteLength,i=0;i<r;i++)t+=String.fromCharCode(n[i]);return t}function Hw(e,t){var n=new FileReader,r=typeof n.readAsBinaryString=="function";n.onloadend=function(i){var a=i.target.result||"";if(r)return t(a);t(UD(a))},r?n.readAsBinaryString(e):n.readAsArrayBuffer(e)}function $w(e,t){Hw(e,function(n){t(n)})}function rm(e,t){$w(e,function(n){t(Nc(n))})}function qD(e,t){var n=new FileReader;n.onloadend=function(r){var i=r.target.result||new ArrayBuffer(0);t(i)},n.readAsArrayBuffer(e)}var FD=self.setImmediate||self.setTimeout,VD=32768;function zD(e){return Nc(e)}function HD(e,t,n,r,i){(n>0||r<t.size)&&(t=t.slice(n,r)),qD(t,function(a){e.append(a),i()})}function $D(e,t,n,r,i){(n>0||r<t.length)&&(t=t.substring(n,r)),e.appendBinary(t),i()}function im(e,t){var n=typeof e=="string",r=n?e.length:e.size,i=Math.min(VD,r),a=Math.ceil(r/i),s=0,o=n?new Eh.default:new Eh.default.ArrayBuffer,l=n?$D:HD;function c(){FD(p)}function h(){var E=o.end(!0),b=zD(E);t(b),o.destroy()}function p(){var E=s*i,b=E+i;s++,s<a?l(o,e,E,b,c):l(o,e,E,b,h)}p()}function jw(e){return Eh.default.hash(e)}function Kw(e,t){if(!t)return Sc().replace(/-/g,"").toLowerCase();var n=Object.assign({},e);return delete n._rev_tree,jw(JSON.stringify(n))}var Dh=Sc;function Pu(e){for(var t,n,r,i=e.rev_tree.slice(),a;a=i.pop();){var s=a.ids,o=s[2],l=a.pos;if(o.length){for(var c=0,h=o.length;c<h;c++)i.push({pos:l+1,ids:o[c]});continue}var p=!!s[1].deleted,E=s[0];(!t||(r!==p?r:n!==l?n<l:t<E))&&(t=E,n=l,r=p)}return n+"-"+t}function Du(e,t){for(var n=e.slice(),r;r=n.pop();)for(var i=r.pos,a=r.ids,s=a[2],o=t(s.length===0,i,a[0],r.ctx,a[1]),l=0,c=s.length;l<c;l++)n.push({pos:i+1,ids:s[l],ctx:o})}function jD(e,t){return e.pos-t.pos}function am(e){var t=[];Du(e,function(i,a,s,o,l){i&&t.push({rev:a+"-"+s,pos:a,opts:l})}),t.sort(jD).reverse();for(var n=0,r=t.length;n<r;n++)delete t[n].pos;return t}function sm(e){for(var t=Pu(e),n=am(e.rev_tree),r=[],i=0,a=n.length;i<a;i++){var s=n[i];s.rev!==t&&!s.opts.deleted&&r.push(s.rev)}return r}function KD(e){var t=[];return Du(e.rev_tree,function(n,r,i,a,s){s.status==="available"&&!n&&(t.push(r+"-"+i),s.status="missing")}),t}function WD(e,t){let n=[],r=e.slice(),i;for(;i=r.pop();){let{pos:a,ids:s}=i,o=`${a}-${s[0]}`,l=s[2];if(n.push(o),o===t){if(l.length!==0)throw new Error("The requested revision is not a leaf");return n.reverse()}(l.length===0||l.length>1)&&(n=[]);for(let c=0,h=l.length;c<h;c++)r.push({pos:a+1,ids:l[c]})}if(n.length===0)throw new Error("The requested revision does not exist");return n.reverse()}function Ww(e){for(var t=[],n=e.slice(),r;r=n.pop();){var i=r.pos,a=r.ids,s=a[0],o=a[1],l=a[2],c=l.length===0,h=r.history?r.history.slice():[];h.push({id:s,opts:o}),c&&t.push({pos:i+1-h.length,ids:h});for(var p=0,E=l.length;p<E;p++)n.push({pos:i+1,ids:l[p],history:h})}return t.reverse()}function GD(e,t){return e.pos-t.pos}function ZD(e,t,n){for(var r=0,i=e.length,a;r<i;)a=r+i>>>1,n(e[a],t)<0?r=a+1:i=a;return r}function XD(e,t,n){var r=ZD(e,t,n);e.splice(r,0,t)}function dw(e,t){for(var n,r,i=t,a=e.length;i<a;i++){var s=e[i],o=[s.id,s.opts,[]];r?(r[2].push(o),r=o):n=r=o}return n}function YD(e,t){return e[0]<t[0]?-1:1}function pw(e,t){for(var n=[{tree1:e,tree2:t}],r=!1;n.length>0;){var i=n.pop(),a=i.tree1,s=i.tree2;(a[1].status||s[1].status)&&(a[1].status=a[1].status==="available"||s[1].status==="available"?"available":"missing");for(var o=0;o<s[2].length;o++){if(!a[2][0]){r="new_leaf",a[2][0]=s[2][o];continue}for(var l=!1,c=0;c<a[2].length;c++)a[2][c][0]===s[2][o][0]&&(n.push({tree1:a[2][c],tree2:s[2][o]}),l=!0);l||(r="new_branch",XD(a[2],s[2][o],YD))}}return{conflicts:r,tree:e}}function Gw(e,t,n){var r=[],i=!1,a=!1,s;if(!e.length)return{tree:[t],conflicts:"new_leaf"};for(var o=0,l=e.length;o<l;o++){var c=e[o];if(c.pos===t.pos&&c.ids[0]===t.ids[0])s=pw(c.ids,t.ids),r.push({pos:c.pos,ids:s.tree}),i=i||s.conflicts,a=!0;else if(n!==!0){var h=c.pos<t.pos?c:t,p=c.pos<t.pos?t:c,E=p.pos-h.pos,b=[],C=[];for(C.push({ids:h.ids,diff:E,parent:null,parentIdx:null});C.length>0;){var N=C.pop();if(N.diff===0){N.ids[0]===p.ids[0]&&b.push(N);continue}for(var w=N.ids[2],I=0,S=w.length;I<S;I++)C.push({ids:w[I],diff:N.diff-1,parent:N.ids,parentIdx:I})}var _=b[0];_?(s=pw(_.ids,p.ids),_.parent[2][_.parentIdx]=s.tree,r.push({pos:h.pos,ids:h.ids}),i=i||s.conflicts,a=!0):r.push(c)}else r.push(c)}return a||r.push(t),r.sort(GD),{tree:r,conflicts:i||"internal_node"}}function QD(e,t){for(var n=Ww(e),r,i,a=0,s=n.length;a<s;a++){var o=n[a],l=o.ids,c;if(l.length>t){r||(r={});var h=l.length-t;c={pos:o.pos+h,ids:dw(l,h)};for(var p=0;p<h;p++){var E=o.pos+p+"-"+l[p].id;r[E]=!0}}else c={pos:o.pos,ids:dw(l,0)};i?i=Gw(i,c,!0).tree:i=[c]}return r&&Du(i,function(b,C,N){delete r[C+"-"+N]}),{tree:i,revs:r?Object.keys(r):[]}}function Zw(e,t,n){var r=Gw(e,t),i=QD(r.tree,n);return{tree:i.tree,stemmedRevs:i.revs,conflicts:r.conflicts}}function JD(e,t){for(var n=e.slice(),r=t.split("-"),i=parseInt(r[0],10),a=r[1],s;s=n.pop();){if(s.pos===i&&s.ids[0]===a)return!0;for(var o=s.ids[2],l=0,c=o.length;l<c;l++)n.push({pos:s.pos+1,ids:o[l]})}return!1}function eR(e){return e.ids}function lo(e,t){t||(t=Pu(e));for(var n=t.substring(t.indexOf("-")+1),r=e.rev_tree.map(eR),i;i=r.pop();){if(i[0]===n)return!!i[1].deleted;r=r.concat(i[2])}}function Nu(e){return typeof e=="string"&&e.startsWith("_local/")}function tR(e,t){for(var n=t.rev_tree.slice(),r;r=n.pop();){var i=r.pos,a=r.ids,s=a[0],o=a[1],l=a[2],c=l.length===0,h=r.history?r.history.slice():[];if(h.push({id:s,pos:i,opts:o}),c)for(var p=0,E=h.length;p<E;p++){var b=h[p],C=b.pos+"-"+b.id;if(C===e)return i+"-"+s}for(var N=0,w=l.length;N<w;N++)n.push({pos:i+1,ids:l[N],history:h})}throw new Error("Unable to resolve latest revision for id "+t.id+", rev "+e)}function nR(e,t,n,r){try{e.emit("change",t,n,r)}catch(i){Xa("error",'Error in .on("change", function):',i)}}function rR(e,t,n){var r=[{rev:e._rev}];n.style==="all_docs"&&(r=am(t.rev_tree).map(function(a){return{rev:a.rev}}));var i={id:t.id,changes:r,doc:e};return lo(t,e._rev)&&(i.deleted=!0),n.conflicts&&(i.doc._conflicts=sm(t),i.doc._conflicts.length||delete i.doc._conflicts),i}var Ig=class extends qs.default{constructor(t,n,r){super(),this.db=t,n=n?ui(n):{};var i=n.complete=Bw((o,l)=>{o?DD(this,"error")>0&&this.emit("error",o):this.emit("complete",l),this.removeAllListeners(),t.removeListener("destroyed",a)});r&&(this.on("complete",function(o){r(null,o)}),this.on("error",r));let a=()=>{this.cancel()};t.once("destroyed",a),n.onChange=(o,l,c)=>{this.isCancelled||nR(this,o,l,c)};var s=new Promise(function(o,l){n.complete=function(c,h){c?l(c):o(h)}});this.once("cancel",function(){t.removeListener("destroyed",a),n.complete(null,{status:"cancelled"})}),this.then=s.then.bind(s),this.catch=s.catch.bind(s),this.then(function(o){i(null,o)},i),t.taskqueue.isReady?this.validateChanges(n):t.taskqueue.addTask(o=>{o?n.complete(o):this.isCancelled?this.emit("cancel"):this.validateChanges(n)})}cancel(){this.isCancelled=!0,this.db.taskqueue.isReady&&this.emit("cancel")}validateChanges(t){var n=t.complete;on._changesFilterPlugin?on._changesFilterPlugin.validate(t,r=>{if(r)return n(r);this.doChanges(t)}):this.doChanges(t)}doChanges(t){var n=t.complete;if(t=ui(t),"live"in t&&!("continuous"in t)&&(t.continuous=t.live),t.processChange=rR,t.since==="latest"&&(t.since="now"),t.since||(t.since=0),t.since==="now"){this.db.info().then(i=>{if(this.isCancelled){n(null,{status:"cancelled"});return}t.since=i.update_seq,this.doChanges(t)},n);return}if(on._changesFilterPlugin){if(on._changesFilterPlugin.normalize(t),on._changesFilterPlugin.shouldFilter(this,t))return on._changesFilterPlugin.filter(this,t)}else["doc_ids","filter","selector","view"].forEach(function(i){i in t&&Xa("warn",'The "'+i+'" option was passed in to changes/replicate, but pouchdb-changes-filter plugin is not installed, so it was ignored. Please install the plugin to enable filtering.')});"descending"in t||(t.descending=!1),t.limit=t.limit===0?1:t.limit,t.complete=n;var r=this.db._changes(t);if(r&&typeof r.cancel=="function"){let i=this.cancel;this.cancel=(...a)=>{r.cancel(),i.apply(this,a)}}}};function pg(e,t){return function(n,r){n||r[0]&&r[0].error?(n=n||r[0],n.docId=t,e(n)):e(null,r.length?r[0]:r)}}function iR(e){for(var t=0;t<e.length;t++){var n=e[t];if(n._deleted)delete n._attachments;else if(n._attachments)for(var r=Object.keys(n._attachments),i=0;i<r.length;i++){var a=r[i];n._attachments[a]=Ic(n._attachments[a],["data","digest","content_type","length","revpos","stub"])}}}function aR(e,t){if(e._id===t._id){let n=e._revisions?e._revisions.start:0,r=t._revisions?t._revisions.start:0;return n-r}return e._id<t._id?-1:1}function sR(e){var t={},n=[];return Du(e,function(r,i,a,s){var o=i+"-"+a;return r&&(t[o]=0),s!==void 0&&n.push({from:s,to:o}),o}),n.reverse(),n.forEach(function(r){t[r.from]===void 0?t[r.from]=1+t[r.to]:t[r.from]=Math.min(t[r.from],1+t[r.to])}),t}function oR(e){var t="limit"in e?e.keys.slice(e.skip,e.limit+e.skip):e.skip>0?e.keys.slice(e.skip):e.keys;e.keys=t,e.skip=0,delete e.limit,e.descending&&(t.reverse(),e.descending=!1)}function Xw(e){var t=e._compactionQueue[0],n=t.opts,r=t.callback;e.get("_local/compaction").catch(function(){return!1}).then(function(i){i&&i.last_seq&&(n.last_seq=i.last_seq),e._compact(n,function(a,s){a?r(a):r(null,s),Fs(function(){e._compactionQueue.shift(),e._compactionQueue.length&&Xw(e)})})})}function uR(e,t,n){return e.get("_local/purges").then(function(r){let i=r.purgeSeq+1;return r.purges.push({docId:t,rev:n,purgeSeq:i}),r.purges.length>self.purged_infos_limit&&r.purges.splice(0,r.purges.length-self.purged_infos_limit),r.purgeSeq=i,r}).catch(function(r){if(r.status!==404)throw r;return{_id:"_local/purges",purges:[{docId:t,rev:n,purgeSeq:0}],purgeSeq:0}}).then(function(r){return e.put(r)})}function lR(e){return e.charAt(0)==="_"?e+" is not a valid attachment name, attachment names cannot start with '_'":!1}function gg(e){return e===null||typeof e!="object"||Array.isArray(e)}var cR=/^\d+-[^-]*$/;function mg(e){return typeof e=="string"&&cR.test(e)}var Th=class extends qs.default{_setup(){this.post=zr("post",function(t,n,r){if(typeof n=="function"&&(r=n,n={}),gg(t))return r(tn(dg));this.bulkDocs({docs:[t]},n,pg(r,t._id))}).bind(this),this.put=zr("put",function(t,n,r){if(typeof n=="function"&&(r=n,n={}),gg(t))return r(tn(dg));if(Vw(t._id),"_rev"in t&&!mg(t._rev))return r(tn(wh));if(Nu(t._id)&&typeof this._putLocal=="function")return t._deleted?this._removeLocal(t,r):this._putLocal(t,r);let i=s=>{typeof this._put=="function"&&n.new_edits!==!1?this._put(t,n,s):this.bulkDocs({docs:[t]},n,pg(s,t._id))};n.force&&t._rev?(a(),i(function(s){var o=s?null:{ok:!0,id:t._id,rev:t._rev};r(s,o)})):i(r);function a(){var s=t._rev.split("-"),o=s[1],l=parseInt(s[0],10),c=l+1,h=Kw();t._revisions={start:c,ids:[h,o]},t._rev=c+"-"+h,n.new_edits=!1}}).bind(this),this.putAttachment=zr("putAttachment",function(t,n,r,i,a){var s=this;typeof a=="function"&&(a=i,i=r,r=null),typeof a>"u"&&(a=i,i=r,r=null),a||Xa("warn","Attachment",n,"on document",t,"is missing content_type");function o(l){var c="_rev"in l?parseInt(l._rev,10):0;return l._attachments=l._attachments||{},l._attachments[n]={content_type:a,data:i,revpos:++c},s.put(l)}return s.get(t).then(function(l){if(l._rev!==r)throw tn(wl);return o(l)},function(l){if(l.reason===Ga.message)return o({_id:t});throw l})}).bind(this),this.removeAttachment=zr("removeAttachment",function(t,n,r,i){this.get(t,(a,s)=>{if(a){i(a);return}if(s._rev!==r){i(tn(wl));return}if(!s._attachments)return i();delete s._attachments[n],Object.keys(s._attachments).length===0&&delete s._attachments,this.put(s,i)})}).bind(this),this.remove=zr("remove",function(t,n,r,i){var a;typeof n=="string"?(a={_id:t,_rev:n},typeof r=="function"&&(i=r,r={})):(a=t,typeof n=="function"?(i=n,r={}):(i=r,r=n)),r=r||{},r.was_delete=!0;var s={_id:a._id,_rev:a._rev||r.rev};if(s._deleted=!0,Nu(s._id)&&typeof this._removeLocal=="function")return this._removeLocal(a,i);this.bulkDocs({docs:[s]},r,pg(i,s._id))}).bind(this),this.revsDiff=zr("revsDiff",function(t,n,r){typeof n=="function"&&(r=n,n={});var i=Object.keys(t);if(!i.length)return r(null,{});var a=0,s=new Map;function o(c,h){s.has(c)||s.set(c,{missing:[]}),s.get(c).missing.push(h)}function l(c,h){var p=t[c].slice(0);Du(h,function(E,b,C,N,w){var I=b+"-"+C,S=p.indexOf(I);S!==-1&&(p.splice(S,1),w.status!=="available"&&o(c,I))}),p.forEach(function(E){o(c,E)})}i.forEach(function(c){this._getRevisionTree(c,function(h,p){if(h&&h.status===404&&h.message==="missing")s.set(c,{missing:t[c]});else{if(h)return r(h);l(c,p)}if(++a===i.length){var E={};return s.forEach(function(b,C){E[C]=b}),r(null,E)}})},this)}).bind(this),this.bulkGet=zr("bulkGet",function(t,n){Uw(this,t,n)}).bind(this),this.compactDocument=zr("compactDocument",function(t,n,r){this._getRevisionTree(t,(i,a)=>{if(i)return r(i);var s=sR(a),o=[],l=[];Object.keys(s).forEach(function(c){s[c]>n&&o.push(c)}),Du(a,function(c,h,p,E,b){var C=h+"-"+p;b.status==="available"&&o.indexOf(C)!==-1&&l.push(C)}),this._doCompaction(t,l,r)})}).bind(this),this.compact=zr("compact",function(t,n){typeof t=="function"&&(n=t,t={}),t=t||{},this._compactionQueue=this._compactionQueue||[],this._compactionQueue.push({opts:t,callback:n}),this._compactionQueue.length===1&&Xw(this)}).bind(this),this.get=zr("get",function(t,n,r){if(typeof n=="function"&&(r=n,n={}),n=n||{},typeof t!="string")return r(tn(qw));if(Nu(t)&&typeof this._getLocal=="function")return this._getLocal(t,r);var i=[];let a=()=>{var l=[],c=i.length;if(!c)return r(null,l);i.forEach(h=>{this.get(t,{rev:h,revs:n.revs,latest:n.latest,attachments:n.attachments,binary:n.binary},function(p,E){if(p)l.push({missing:h});else{for(var b,C=0,N=l.length;C<N;C++)if(l[C].ok&&l[C].ok._rev===E._rev){b=!0;break}b||l.push({ok:E})}c--,c||r(null,l)})})};if(n.open_revs){if(n.open_revs==="all")this._getRevisionTree(t,function(l,c){if(l)return r(l);i=am(c).map(function(h){return h.rev}),a()});else if(Array.isArray(n.open_revs)){i=n.open_revs;for(var s=0;s<i.length;s++){var o=i[s];if(!mg(o))return r(tn(wh))}a()}else return r(tn(Zg,"function_clause"));return}return this._get(t,n,(l,c)=>{if(l)return l.docId=t,r(l);var h=c.doc,p=c.metadata,E=c.ctx;if(n.conflicts){var b=sm(p);b.length&&(h._conflicts=b)}if(lo(p,h._rev)&&(h._deleted=!0),n.revs||n.revs_info){for(var C=h._rev.split("-"),N=parseInt(C[0],10),w=C[1],I=Ww(p.rev_tree),S=null,_=0;_<I.length;_++){var P=I[_];let re=P.ids.findIndex(le=>le.id===w);var v=re===N-1;(v||!S&&re!==-1)&&(S=P)}if(!S)return l=new Error("invalid rev tree"),l.docId=t,r(l);let W=h._rev.split("-")[1],O=S.ids.findIndex(re=>re.id===W)+1;var y=S.ids.length-O;if(S.ids.splice(O,y),S.ids.reverse(),n.revs&&(h._revisions={start:S.pos+S.ids.length-1,ids:S.ids.map(function(re){return re.id})}),n.revs_info){var $=S.pos+S.ids.length;h._revs_info=S.ids.map(function(re){return $--,{rev:$+"-"+re.id,status:re.opts.status}})}}if(n.attachments&&h._attachments){var Z=h._attachments,ce=Object.keys(Z).length;if(ce===0)return r(null,h);Object.keys(Z).forEach(W=>{this._getAttachment(h._id,W,Z[W],{binary:n.binary,metadata:p,ctx:E},function(O,re){var le=h._attachments[W];le.data=re,delete le.stub,delete le.length,--ce||r(null,h)})})}else{if(h._attachments)for(var q in h._attachments)Object.prototype.hasOwnProperty.call(h._attachments,q)&&(h._attachments[q].stub=!0);r(null,h)}})}).bind(this),this.getAttachment=zr("getAttachment",function(t,n,r,i){r instanceof Function&&(i=r,r={}),this._get(t,r,(a,s)=>{if(a)return i(a);if(s.doc._attachments&&s.doc._attachments[n])r.ctx=s.ctx,r.binary=!0,r.metadata=s.metadata,this._getAttachment(t,n,s.doc._attachments[n],r,i);else return i(tn(Ga))})}).bind(this),this.allDocs=zr("allDocs",function(t,n){if(typeof t=="function"&&(n=t,t={}),t.skip=typeof t.skip<"u"?t.skip:0,t.start_key&&(t.startkey=t.start_key),t.end_key&&(t.endkey=t.end_key),"keys"in t){if(!Array.isArray(t.keys))return n(new TypeError("options.keys must be an array"));var r=["startkey","endkey","key"].filter(function(i){return i in t})[0];if(r){n(tn(ID,"Query parameter `"+r+"` is not compatible with multi-get"));return}if(!Us(this)&&(oR(t),t.keys.length===0))return this._allDocs({limit:0},n)}return this._allDocs(t,n)}).bind(this),this.close=zr("close",function(t){return this._closed=!0,this.emit("closed"),this._close(t)}).bind(this),this.info=zr("info",function(t){this._info((n,r)=>{if(n)return t(n);r.db_name=r.db_name||this.name,r.auto_compaction=!!(this.auto_compaction&&!Us(this)),r.adapter=this.adapter,t(null,r)})}).bind(this),this.id=zr("id",function(t){return this._id(t)}).bind(this),this.bulkDocs=zr("bulkDocs",function(t,n,r){if(typeof n=="function"&&(r=n,n={}),n=n||{},Array.isArray(t)&&(t={docs:t}),!t||!t.docs||!Array.isArray(t.docs))return r(tn(LD));for(var i=0;i<t.docs.length;++i){let l=t.docs[i];if(gg(l))return r(tn(dg));if("_rev"in l&&!mg(l._rev))return r(tn(wh))}var a;if(t.docs.forEach(function(l){l._attachments&&Object.keys(l._attachments).forEach(function(c){a=a||lR(c),l._attachments[c].content_type||Xa("warn","Attachment",c,"on document",l._id,"is missing content_type")})}),a)return r(tn(Ph,a));"new_edits"in n||("new_edits"in t?n.new_edits=t.new_edits:n.new_edits=!0);var s=this;!n.new_edits&&!Us(s)&&t.docs.sort(aR),iR(t.docs);var o=t.docs.map(function(l){return l._id});this._bulkDocs(t,n,function(l,c){if(l)return r(l);if(n.new_edits||(c=c.filter(function(E){return E.error})),!Us(s))for(var h=0,p=c.length;h<p;h++)c[h].id=c[h].id||o[h];r(null,c)})}).bind(this),this.registerDependentDatabase=zr("registerDependentDatabase",function(t,n){var r=ui(this.__opts);this.__opts.view_adapter&&(r.adapter=this.__opts.view_adapter);var i=new this.constructor(t,r);function a(s){return s.dependentDbs=s.dependentDbs||{},s.dependentDbs[t]?!1:(s.dependentDbs[t]=!0,s)}Sh(this,"_local/_pouch_dependentDbs",a).then(function(){n(null,{db:i})}).catch(n)}).bind(this),this.destroy=zr("destroy",function(t,n){typeof t=="function"&&(n=t,t={});var r="use_prefix"in this?this.use_prefix:!0;let i=()=>{this._destroy(t,(a,s)=>{if(a)return n(a);this._destroyed=!0,this.emit("destroyed"),n(null,s||{ok:!0})})};if(Us(this))return i();this.get("_local/_pouch_dependentDbs",(a,s)=>{if(a)return a.status!==404?n(a):i();var o=s.dependentDbs,l=this.constructor,c=Object.keys(o).map(h=>{var p=r?h.replace(new RegExp("^"+l.prefix),""):h;return new l(p,this.__opts).destroy()});Promise.all(c).then(i,n)})}).bind(this)}_compact(t,n){var r={return_docs:!1,last_seq:t.last_seq||0,since:t.last_seq||0},i=[],a,s=0;let o=h=>{this.activeTasks.update(a,{completed_items:++s}),i.push(this.compactDocument(h.id,0))},l=h=>{this.activeTasks.remove(a,h),n(h)},c=h=>{var p=h.last_seq;Promise.all(i).then(()=>Sh(this,"_local/compaction",E=>!E.last_seq||E.last_seq<p?(E.last_seq=p,E):!1)).then(()=>{this.activeTasks.remove(a),n(null,{ok:!0})}).catch(l)};this.info().then(h=>{a=this.activeTasks.add({name:"database_compaction",total_items:h.update_seq-r.last_seq}),this.changes(r).on("change",o).on("complete",c).on("error",l)})}changes(t,n){return typeof t=="function"&&(n=t,t={}),t=t||{},t.return_docs="return_docs"in t?t.return_docs:!t.live,new Ig(this,t,n)}type(){return typeof this._type=="function"?this._type():this.adapter}};Th.prototype.purge=zr("_purge",function(e,t,n){if(typeof this._purge>"u")return n(tn(Zg,"Purge is not implemented in the "+this.adapter+" adapter."));var r=this;r._getRevisionTree(e,(i,a)=>{if(i)return n(i);if(!a)return n(tn(Ga));let s;try{s=WD(a,t)}catch(o){return n(o.message||o)}r._purge(e,s,(o,l)=>{if(o)return n(o);uR(r,e,t).then(function(){return n(null,l)})})})});var Ng=class{constructor(){this.isReady=!1,this.failed=!1,this.queue=[]}execute(){var t;if(this.failed)for(;t=this.queue.shift();)t(this.failed);else for(;t=this.queue.shift();)t()}fail(t){this.failed=t,this.execute()}ready(t){this.isReady=!0,this.db=t,this.execute()}addTask(t){this.queue.push(t),this.failed&&this.execute()}};function fR(e,t){var n=e.match(/([a-z-]*):\/\/(.*)/);if(n)return{name:/https?/.test(n[1])?n[1]+"://"+n[2]:n[2],adapter:n[1]};var r=on.adapters,i=on.preferredAdapters,a=on.prefix,s=t.adapter;if(!s)for(var o=0;o<i.length;++o){if(s=i[o],s==="idb"&&"websql"in r&&Ch()&&localStorage["_pouch__websqldb_"+a+e]){Xa("log",'PouchDB is downgrading "'+e+'" to WebSQL to avoid data loss, because it was already opened with WebSQL.');continue}break}var l=r[s],c=l&&"use_prefix"in l?l.use_prefix:!0;return{name:c?a+e:e,adapter:s}}function hR(e,t){e.prototype=Object.create(t.prototype,{constructor:{value:e}})}function Yw(e,t){let n=function(...r){if(!(this instanceof n))return new n(...r);t.apply(this,r)};return hR(n,e),n}function dR(e){function t(r){e.removeListener("closed",n),r||e.constructor.emit("destroyed",e.name)}function n(){e.removeListener("destroyed",t),e.constructor.emit("unref",e)}e.once("destroyed",t),e.once("closed",n),e.constructor.emit("ref",e)}var Lh=class extends Th{constructor(t,n){super(),this._setup(t,n)}_setup(t,n){if(super._setup(),n=n||{},t&&typeof t=="object"&&(n=t,t=n.name,delete n.name),n.deterministic_revs===void 0&&(n.deterministic_revs=!0),this.__opts=n=ui(n),this.auto_compaction=n.auto_compaction,this.purged_infos_limit=n.purged_infos_limit||1e3,this.prefix=on.prefix,typeof t!="string")throw new Error("Missing/invalid DB name");var r=(n.prefix||"")+t,i=fR(r,n);if(n.name=i.name,n.adapter=n.adapter||i.adapter,this.name=t,this._adapter=n.adapter,on.emit("debug",["adapter","Picked adapter: ",n.adapter]),!on.adapters[n.adapter]||!on.adapters[n.adapter].valid())throw new Error("Invalid Adapter: "+n.adapter);if(n.view_adapter&&(!on.adapters[n.view_adapter]||!on.adapters[n.view_adapter].valid()))throw new Error("Invalid View Adapter: "+n.view_adapter);this.taskqueue=new Ng,this.adapter=n.adapter,on.adapters[n.adapter].call(this,n,a=>{if(a)return this.taskqueue.fail(a);dR(this),this.emit("created",this),on.emit("created",this.name),this.taskqueue.ready(this)})}},on=Yw(Lh,function(e,t){Lh.prototype._setup.call(this,e,t)}),Qw=fetch,_l=Headers,Pg=class{constructor(){this.tasks={}}list(){return Object.values(this.tasks)}add(t){let n=Sc();return this.tasks[n]={id:n,name:t.name,total_items:t.total_items,created_at:new Date().toJSON()},n}get(t){return this.tasks[t]}remove(t,n){return delete this.tasks[t],this.tasks}update(t,n){let r=this.tasks[t];if(typeof r<"u"){let i={id:r.id,name:r.name,created_at:r.created_at,total_items:n.total_items||r.total_items,completed_items:n.completed_items||r.completed_items,updated_at:new Date().toJSON()};this.tasks[t]=i}return this.tasks}};on.adapters={};on.preferredAdapters=[];on.prefix="_pouch_";var gw=new qs.default;function pR(e){Object.keys(qs.default.prototype).forEach(function(n){typeof qs.default.prototype[n]=="function"&&(e[n]=gw[n].bind(gw))});var t=e._destructionListeners=new Map;e.on("ref",function(r){t.has(r.name)||t.set(r.name,[]),t.get(r.name).push(r)}),e.on("unref",function(r){if(t.has(r.name)){var i=t.get(r.name),a=i.indexOf(r);a<0||(i.splice(a,1),i.length>1?t.set(r.name,i):t.delete(r.name))}}),e.on("destroyed",function(r){if(t.has(r)){var i=t.get(r);t.delete(r),i.forEach(function(a){a.emit("destroyed",!0)})}})}pR(on);on.adapter=function(e,t,n){t.valid()&&(on.adapters[e]=t,n&&on.preferredAdapters.push(e))};on.plugin=function(e){if(typeof e=="function")e(on);else{if(typeof e!="object"||Object.keys(e).length===0)throw new Error('Invalid plugin: got "'+e+'", expected an object or a function');Object.keys(e).forEach(function(t){on.prototype[t]=e[t]})}return this.__defaults&&(on.__defaults=Object.assign({},this.__defaults)),on};on.defaults=function(e){let t=Yw(on,function(n,r){r=r||{},n&&typeof n=="object"&&(r=n,n=r.name,delete r.name),r=Object.assign({},t.__defaults,r),on.call(this,n,r)});return t.preferredAdapters=on.preferredAdapters.slice(),Object.keys(on).forEach(function(n){n in t||(t[n]=on[n])}),t.__defaults=Object.assign({},this.__defaults,e),t};on.fetch=function(e,t){return Qw(e,t)};on.prototype.activeTasks=on.activeTasks=new Pg;var gR="9.0.0";function om(e,t){for(var n=e,r=0,i=t.length;r<i;r++){var a=t[r];if(n=n[a],!n)break}return n}function mR(e,t){return e<t?-1:e>t?1:0}function um(e){for(var t=[],n="",r=0,i=e.length;r<i;r++){var a=e[r];r>0&&e[r-1]==="\\"&&(a==="$"||a===".")?n=n.substring(0,n.length-1)+a:a==="."?(t.push(n),n=""):n+=a}return t.push(n),t}var vR=["$or","$nor","$not"];function Jw(e){return vR.indexOf(e)>-1}function ex(e){return Object.keys(e)[0]}function yR(e){return e[ex(e)]}function kc(e){var t={},n={$or:!0,$nor:!0};return e.forEach(function(r){Object.keys(r).forEach(function(i){var a=r[i];if(typeof a!="object"&&(a={$eq:a}),Jw(i))if(a instanceof Array){if(n[i]){n[i]=!1,t[i]=a;return}var s=[];t[i].forEach(function(l){Object.keys(a).forEach(function(c){var h=a[c],p=Math.max(Object.keys(l).length,Object.keys(h).length),E=kc([l,h]);Object.keys(E).length<=p||s.push(E)})}),t[i]=s}else t[i]=kc([a]);else{var o=t[i]=t[i]||{};Object.keys(a).forEach(function(l){var c=a[l];if(l==="$gt"||l==="$gte")return _R(l,c,o);if(l==="$lt"||l==="$lte")return bR(l,c,o);if(l==="$ne")return wR(c,o);if(l==="$eq")return xR(c,o);if(l==="$regex")return ER(c,o);o[l]=c})}})}),t}function _R(e,t,n){typeof n.$eq<"u"||(typeof n.$gte<"u"?e==="$gte"?t>n.$gte&&(n.$gte=t):t>=n.$gte&&(delete n.$gte,n.$gt=t):typeof n.$gt<"u"?e==="$gte"?t>n.$gt&&(delete n.$gt,n.$gte=t):t>n.$gt&&(n.$gt=t):n[e]=t)}function bR(e,t,n){typeof n.$eq<"u"||(typeof n.$lte<"u"?e==="$lte"?t<n.$lte&&(n.$lte=t):t<=n.$lte&&(delete n.$lte,n.$lt=t):typeof n.$lt<"u"?e==="$lte"?t<n.$lt&&(delete n.$lt,n.$lte=t):t<n.$lt&&(n.$lt=t):n[e]=t)}function wR(e,t){"$ne"in t?t.$ne.push(e):t.$ne=[e]}function xR(e,t){delete t.$gt,delete t.$gte,delete t.$lt,delete t.$lte,delete t.$ne,t.$eq=e}function ER(e,t){"$regex"in t?t.$regex.push(e):t.$regex=[e]}function tx(e){for(var t in e){if(Array.isArray(e))for(var n in e)e[n].$and&&(e[n]=kc(e[n].$and));var r=e[t];typeof r=="object"&&tx(r)}return e}function nx(e,t){for(var n in e){n==="$and"&&(t=!0);var r=e[n];typeof r=="object"&&(t=nx(r,t))}return t}function CR(e){var t=ui(e);nx(t,!1)&&(t=tx(t),"$and"in t&&(t=kc(t.$and))),["$or","$nor"].forEach(function(s){s in t&&t[s].forEach(function(o){for(var l=Object.keys(o),c=0;c<l.length;c++){var h=l[c],p=o[h];(typeof p!="object"||p===null)&&(o[h]={$eq:p})}})}),"$not"in t&&(t.$not=kc([t.$not]));for(var n=Object.keys(t),r=0;r<n.length;r++){var i=n[r],a=t[i];(typeof a!="object"||a===null)&&(a={$eq:a}),t[i]=a}return Dg(t),t}function Dg(e){Object.keys(e).forEach(function(t){var n=e[t];Array.isArray(n)?n.forEach(function(r){r&&typeof r=="object"&&Dg(r)}):t==="$ne"?e.$ne=[n]:t==="$regex"?e.$regex=[n]:n&&typeof n=="object"&&Dg(n)})}function SR(e,t,n){for(var r="",i=n-e.length;r.length<i;)r+=t;return r}function TR(e,t,n){var r=SR(e,t,n);return r+e}var rx=-324,Rg=3,Og="";function Hr(e,t){if(e===t)return 0;e=Ru(e),t=Ru(t);var n=Bg(e),r=Bg(t);if(n-r!==0)return n-r;switch(typeof e){case"number":return e-t;case"boolean":return e<t?-1:1;case"string":return PR(e,t)}return Array.isArray(e)?NR(e,t):DR(e,t)}function Ru(e){switch(typeof e){case"undefined":return null;case"number":return e===1/0||e===-1/0||isNaN(e)?null:e;case"object":var t=e;if(Array.isArray(e)){var n=e.length;e=new Array(n);for(var r=0;r<n;r++)e[r]=Ru(t[r])}else{if(e instanceof Date)return e.toJSON();if(e!==null){e={};for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var a=t[i];typeof a<"u"&&(e[i]=Ru(a))}}}}return e}function LR(e){if(e!==null)switch(typeof e){case"boolean":return e?1:0;case"number":return RR(e);case"string":return e.replace(/\u0002/g,"").replace(/\u0001/g,"").replace(/\u0000/g,"");case"object":var t=Array.isArray(e),n=t?e:Object.keys(e),r=-1,i=n.length,a="";if(t)for(;++r<i;)a+=us(n[r]);else for(;++r<i;){var s=n[r];a+=us(s)+us(e[s])}return a}return""}function us(e){var t="\0";return e=Ru(e),Bg(e)+Og+LR(e)+t}function kR(e,t){var n=t,r,i=e[t]==="1";if(i)r=0,t++;else{var a=e[t]==="0";t++;var s="",o=e.substring(t,t+Rg),l=parseInt(o,10)+rx;for(a&&(l=-l),t+=Rg;;){var c=e[t];if(c==="\0")break;s+=c,t++}s=s.split("."),s.length===1?r=parseInt(s,10):r=parseFloat(s[0]+"."+s[1]),a&&(r=r-10),l!==0&&(r=parseFloat(r+"e"+l))}return{num:r,length:t-n}}function AR(e,t){var n=e.pop();if(t.length){var r=t[t.length-1];n===r.element&&(t.pop(),r=t[t.length-1]);var i=r.element,a=r.index;if(Array.isArray(i))i.push(n);else if(a===e.length-2){var s=e.pop();i[s]=n}else e.push(n)}}function IR(e){for(var t=[],n=[],r=0;;){var i=e[r++];if(i==="\0"){if(t.length===1)return t.pop();AR(t,n);continue}switch(i){case"1":t.push(null);break;case"2":t.push(e[r]==="1"),r++;break;case"3":var a=kR(e,r);t.push(a.num),r+=a.length;break;case"4":for(var s="";;){var o=e[r];if(o==="\0")break;s+=o,r++}s=s.replace(/\u0001\u0001/g,"\0").replace(/\u0001\u0002/g,"").replace(/\u0002\u0002/g,""),t.push(s);break;case"5":var l={element:[],index:t.length};t.push(l.element),n.push(l);break;case"6":var c={element:{},index:t.length};t.push(c.element),n.push(c);break;default:throw new Error("bad collationIndex or unexpectedly reached end of input: "+i)}}}function NR(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=Hr(e[r],t[r]);if(i!==0)return i}return e.length===t.length?0:e.length>t.length?1:-1}function PR(e,t){return e===t?0:e>t?1:-1}function DR(e,t){for(var n=Object.keys(e),r=Object.keys(t),i=Math.min(n.length,r.length),a=0;a<i;a++){var s=Hr(n[a],r[a]);if(s!==0||(s=Hr(e[n[a]],t[r[a]]),s!==0))return s}return n.length===r.length?0:n.length>r.length?1:-1}function Bg(e){var t=["boolean","number","string","object"],n=t.indexOf(typeof e);if(~n)return e===null?1:Array.isArray(e)?5:n<3?n+2:n+3;if(Array.isArray(e))return 5}function RR(e){if(e===0)return"1";var t=e.toExponential().split(/e\+?/),n=parseInt(t[1],10),r=e<0,i=r?"0":"2",a=(r?-n:n)-rx,s=TR(a.toString(),"0",Rg);i+=Og+s;var o=Math.abs(parseFloat(t[0]));r&&(o=10-o);var l=o.toFixed(20);return l=l.replace(/\.?0+$/,""),i+=Og+l,i}function OR(e){function t(n){return e.map(function(r){var i=ex(r),a=um(i),s=om(n,a);return s})}return function(n,r){var i=t(n.doc),a=t(r.doc),s=Hr(i,a);return s!==0?s:mR(n.doc._id,r.doc._id)}}function BR(e,t,n){if(e=e.filter(function(s){return bl(s.doc,t.selector,n)}),t.sort){var r=OR(t.sort);e=e.sort(r),typeof t.sort[0]!="string"&&yR(t.sort[0])==="desc"&&(e=e.reverse())}if("limit"in t||"skip"in t){var i=t.skip||0,a=("limit"in t?t.limit:e.length)+i;e=e.slice(i,a)}return e}function bl(e,t,n){return n.every(function(r){var i=t[r],a=um(r),s=om(e,a);return Jw(r)?MR(r,i,e):kh(i,e,a,s)})}function kh(e,t,n,r){return e?typeof e=="object"?Object.keys(e).every(function(i){var a=e[i];if(i.indexOf("$")===0)return mw(i,t,a,n,r);var s=um(i);if(r===void 0&&typeof a!="object"&&s.length>0)return!1;var o=om(r,s);return typeof a=="object"?kh(a,t,n,o):mw("$eq",t,a,s,o)}):e===r:!0}function MR(e,t,n){return e==="$or"?t.some(function(r){return bl(n,r,Object.keys(r))}):e==="$not"?!bl(n,t,Object.keys(t)):!t.find(function(r){return bl(n,r,Object.keys(r))})}function mw(e,t,n,r,i){if(!yw[e])throw new Error('unknown operator "'+e+'" - should be one of $eq, $lte, $lt, $gt, $gte, $exists, $ne, $in, $nin, $size, $mod, $regex, $elemMatch, $type, $allMatch or $all');return yw[e](t,n,r,i)}function Tc(e){return typeof e<"u"&&e!==null}function Lu(e){return typeof e<"u"}function UR(e,t){if(typeof e!="number"||parseInt(e,10)!==e)return!1;var n=t[0],r=t[1];return e%n===r}function vw(e,t){return t.some(function(n){return e instanceof Array?e.some(function(r){return Hr(n,r)===0}):Hr(n,e)===0})}function qR(e,t){return t.every(function(n){return e.some(function(r){return Hr(n,r)===0})})}function FR(e,t){return e.length===t}function VR(e,t){var n=new RegExp(t);return n.test(e)}function zR(e,t){switch(t){case"null":return e===null;case"boolean":return typeof e=="boolean";case"number":return typeof e=="number";case"string":return typeof e=="string";case"array":return e instanceof Array;case"object":return{}.toString.call(e)==="[object Object]"}}var yw={$elemMatch:function(e,t,n,r){return!Array.isArray(r)||r.length===0?!1:typeof r[0]=="object"&&r[0]!==null?r.some(function(i){return bl(i,t,Object.keys(t))}):r.some(function(i){return kh(t,e,n,i)})},$allMatch:function(e,t,n,r){return!Array.isArray(r)||r.length===0?!1:typeof r[0]=="object"&&r[0]!==null?r.every(function(i){return bl(i,t,Object.keys(t))}):r.every(function(i){return kh(t,e,n,i)})},$eq:function(e,t,n,r){return Lu(r)&&Hr(r,t)===0},$gte:function(e,t,n,r){return Lu(r)&&Hr(r,t)>=0},$gt:function(e,t,n,r){return Lu(r)&&Hr(r,t)>0},$lte:function(e,t,n,r){return Lu(r)&&Hr(r,t)<=0},$lt:function(e,t,n,r){return Lu(r)&&Hr(r,t)<0},$exists:function(e,t,n,r){return t?Lu(r):!Lu(r)},$mod:function(e,t,n,r){return Tc(r)&&UR(r,t)},$ne:function(e,t,n,r){return t.every(function(i){return Hr(r,i)!==0})},$in:function(e,t,n,r){return Tc(r)&&vw(r,t)},$nin:function(e,t,n,r){return Tc(r)&&!vw(r,t)},$size:function(e,t,n,r){return Tc(r)&&Array.isArray(r)&&FR(r,t)},$all:function(e,t,n,r){return Array.isArray(r)&&qR(r,t)},$regex:function(e,t,n,r){return Tc(r)&&typeof r=="string"&&t.every(function(i){return VR(r,i)})},$type:function(e,t,n,r){return zR(r,t)}};function HR(e,t){if(typeof t!="object")throw new Error("Selector error: expected a JSON object");t=CR(t);var n={doc:e},r=BR([n],{selector:t},Object.keys(t));return r&&r.length===1}function $R(e){return Qg(`"use strict";
return `+e+";",{})}function jR(e){var t=["return function(doc) {",'  "use strict";',"  var emitted = false;","  var emit = function (a, b) {","    emitted = true;","  };","  var view = "+e+";","  view(doc);","  if (emitted) {","    return true;","  }","};"].join(`
`);return Qg(t,{})}function KR(e,t){if(e.selector&&e.filter&&e.filter!=="_selector"){var n=typeof e.filter=="string"?e.filter:"function";return t(new Error('selector invalid for filter "'+n+'"'))}t()}function WR(e){e.view&&!e.filter&&(e.filter="_view"),e.selector&&!e.filter&&(e.filter="_selector"),e.filter&&typeof e.filter=="string"&&(e.filter==="_view"?e.view=cw(e.view):e.filter=cw(e.filter))}function GR(e,t){return t.filter&&typeof t.filter=="string"&&!t.doc_ids&&!Us(e.db)}function ZR(e,t){var n=t.complete;if(t.filter==="_view"){if(!t.view||typeof t.view!="string"){var r=tn(Ph,"`view` filter parameter not found or invalid.");return n(r)}var i=Ag(t.view);e.db.get("_design/"+i[0],function(s,o){if(e.isCancelled)return n(null,{status:"cancelled"});if(s)return n(xl(s));var l=o&&o.views&&o.views[i[1]]&&o.views[i[1]].map;if(!l)return n(tn(Ga,o.views?"missing json key: "+i[1]:"missing json key: views"));t.filter=jR(l),e.doChanges(t)})}else if(t.selector)t.filter=function(s){return HR(s,t.selector)},e.doChanges(t);else{var a=Ag(t.filter);e.db.get("_design/"+a[0],function(s,o){if(e.isCancelled)return n(null,{status:"cancelled"});if(s)return n(xl(s));var l=o&&o.filters&&o.filters[a[1]];if(!l)return n(tn(Ga,o&&o.filters?"missing json key: "+a[1]:"missing json key: filters"));t.filter=$R(l),e.doChanges(t)})}}function XR(e){e._changesFilterPlugin={validate:KR,normalize:WR,shouldFilter:GR,filter:ZR}}on.plugin(XR);on.version=gR;function YR(e,t,n){return new Promise(function(r){var i=em([""]);let a;if(typeof n=="function"){let o=n(i);a=e.objectStore(t).put(o)}else{let s=n;a=e.objectStore(t).put(i,s)}a.onsuccess=function(){var s=navigator.userAgent.match(/Chrome\/(\d+)/),o=navigator.userAgent.match(/Edge\//);r(o||!s||parseInt(s[1],10)>=43)},a.onerror=e.onabort=function(s){s.preventDefault(),s.stopPropagation(),r(!1)}}).catch(function(){return!1})}function ix(e){return e.reduce(function(t,n){return t[n]=!0,t},{})}var QR=ix(["_id","_rev","_access","_attachments","_deleted","_revisions","_revs_info","_conflicts","_deleted_conflicts","_local_seq","_rev_tree","_replication_id","_replication_state","_replication_state_time","_replication_state_reason","_replication_stats","_removed"]),JR=ix(["_access","_attachments","_replication_id","_replication_state","_replication_state_time","_replication_state_reason","_replication_stats"]);function _w(e){if(!/^\d+-/.test(e))return tn(wh);var t=e.indexOf("-"),n=e.substring(0,t),r=e.substring(t+1);return{prefix:parseInt(n,10),id:r}}function eO(e,t){for(var n=e.start-e.ids.length+1,r=e.ids,i=[r[0],t,[]],a=1,s=r.length;a<s;a++)i=[r[a],{status:"missing"},[i]];return[{pos:n,ids:i}]}function ax(e,t,n){n||(n={deterministic_revs:!0});var r,i,a,s={status:"available"};if(e._deleted&&(s.deleted=!0),t)if(e._id||(e._id=Dh()),i=Kw(e,n.deterministic_revs),e._rev){if(a=_w(e._rev),a.error)return a;e._rev_tree=[{pos:a.prefix,ids:[a.id,{status:"missing"},[[i,s,[]]]]}],r=a.prefix+1}else e._rev_tree=[{pos:1,ids:[i,s,[]]}],r=1;else if(e._revisions&&(e._rev_tree=eO(e._revisions,s),r=e._revisions.start,i=e._revisions.ids[0]),!e._rev_tree){if(a=_w(e._rev),a.error)return a;r=a.prefix,i=a.id,e._rev_tree=[{pos:r,ids:[i,s,[]]}]}Vw(e._id),e._rev=r+"-"+i;var o={metadata:{},data:{}};for(var l in e)if(Object.prototype.hasOwnProperty.call(e,l)){var c=l[0]==="_";if(c&&!QR[l]){var h=tn(lw,l);throw h.message=lw.message+": "+l,h}else c&&!JR[l]?o.metadata[l.slice(1)]=e[l]:o.data[l]=e[l]}return o}function tO(e){try{return Jg(e)}catch{var t=tn(Fw,"Attachment is not a valid base64 string");return{error:t}}}function nO(e,t,n){var r=tO(e.data);if(r.error)return n(r.error);e.length=r.length,t==="blob"?e.data=tm(r,e.content_type):t==="base64"?e.data=Nc(r):e.data=r,im(r,function(i){e.digest="md5-"+i,n()})}function rO(e,t,n){im(e.data,function(r){e.digest="md5-"+r,e.length=e.data.size||e.data.length||0,t==="binary"?$w(e.data,function(i){e.data=i,n()}):t==="base64"?rm(e.data,function(i){e.data=i,n()}):n()})}function iO(e,t,n){if(e.stub)return n();typeof e.data=="string"?nO(e,t,n):rO(e,t,n)}function aO(e,t,n){if(!e.length)return n();var r=0,i;e.forEach(function(s){var o=s.data&&s.data._attachments?Object.keys(s.data._attachments):[],l=0;if(!o.length)return a();function c(p){i=p,l++,l===o.length&&a()}for(var h in s.data._attachments)Object.prototype.hasOwnProperty.call(s.data._attachments,h)&&iO(s.data._attachments[h],t,c)});function a(){r++,e.length===r&&(i?n(i):n())}}function sO(e,t,n,r,i,a,s,o){if(JD(t.rev_tree,n.metadata.rev)&&!o)return r[i]=n,a();var l=t.winningRev||Pu(t),c="deleted"in t?t.deleted:lo(t,l),h="deleted"in n.metadata?n.metadata.deleted:lo(n.metadata),p=/^1-/.test(n.metadata.rev);if(c&&!h&&o&&p){var E=n.data;E._rev=l,E._id=n.metadata.id,n=ax(E,o)}var b=Zw(t.rev_tree,n.metadata.rev_tree[0],e),C=o&&(c&&h&&b.conflicts!=="new_leaf"||!c&&b.conflicts!=="new_leaf"||c&&!h&&b.conflicts==="new_branch");if(C){var N=tn(wl);return r[i]=N,a()}var w=n.metadata.rev;n.metadata.rev_tree=b.tree,n.stemmedRevs=b.stemmedRevs||[],t.rev_map&&(n.metadata.rev_map=t.rev_map);var I=Pu(n.metadata),S=lo(n.metadata,I),_=c===S?0:c<S?-1:1,P;w===I?P=S:P=lo(n.metadata,w),s(n,I,S,P,!0,_,i,a)}function oO(e){return e.metadata.rev_tree[0].ids[1].status==="missing"}function uO(e,t,n,r,i,a,s,o,l){e=e||1e3;function c(N,w,I){var S=Pu(N.metadata),_=lo(N.metadata,S);if("was_delete"in o&&_)return a[w]=tn(Ga,"deleted"),I();var P=h&&oO(N);if(P){var v=tn(wl);return a[w]=v,I()}var y=_?0:1;s(N,S,_,_,!1,y,w,I)}var h=o.new_edits,p=new Map,E=0,b=t.length;function C(){++E===b&&l&&l()}t.forEach(function(N,w){if(N._id&&Nu(N._id)){var I=N._deleted?"_removeLocal":"_putLocal";n[I](N,{ctx:i},function(_,P){a[w]=_||P,C()});return}var S=N.metadata.id;p.has(S)?(b--,p.get(S).push([N,w])):p.set(S,[[N,w]])}),p.forEach(function(N,w){var I=0;function S(){++I<N.length?_():C()}function _(){var P=N[I],v=P[0],y=P[1];if(r.has(w))sO(e,r.get(w),v,a,y,S,s,h);else{var $=Zw([],v.metadata.rev_tree[0],e);v.metadata.rev_tree=$.tree,v.stemmedRevs=$.stemmedRevs||[],c(v,y,S)}}_()})}var lO=5,Qr="document-store",Ii="by-sequence",Za="attach-store",Au="attach-seq-store",ta="meta-store",Bs="local-store",vg="detect-blob-support";function cO(e){try{return JSON.parse(e)}catch{return Gg.default.parse(e)}}function fO(e){try{return JSON.stringify(e)}catch{return Gg.default.stringify(e)}}function Ms(e){return function(t){var n="unknown_error";t.target&&t.target.error&&(n=t.target.error.name||t.target.error.message),e(tn(Xg,n,t.type))}}function Mg(e,t,n){return{data:fO(e),winningRev:t,deletedOrLocal:n?"1":"0",seq:e.seq,id:e.id}}function Iu(e){if(!e)return null;var t=cO(e.data);return t.winningRev=e.winningRev,t.deleted=e.deletedOrLocal==="1",t.seq=e.seq,t}function Ah(e){if(!e)return e;var t=e._doc_id_rev.lastIndexOf(":");return e._id=e._doc_id_rev.substring(0,t-1),e._rev=e._doc_id_rev.substring(t+1),delete e._doc_id_rev,e}function sx(e,t,n,r){n?r(e?typeof e!="string"?e:nm(e,t):em([""],{type:t})):e?typeof e!="string"?Hw(e,function(i){r(Nc(i))}):r(e):r("")}function ox(e,t,n,r){var i=Object.keys(e._attachments||{});if(!i.length)return r&&r();var a=0;function s(){++a===i.length&&r&&r()}function o(l,c){var h=l._attachments[c],p=h.digest,E=n.objectStore(Za).get(p);E.onsuccess=function(b){h.body=b.target.result.body,s()}}i.forEach(function(l){t.attachments&&t.include_docs?o(e,l):(e._attachments[l].stub=!0,s())})}function Ug(e,t){return Promise.all(e.map(function(n){if(n.doc&&n.doc._attachments){var r=Object.keys(n.doc._attachments);return Promise.all(r.map(function(i){var a=n.doc._attachments[i];if("body"in a){var s=a.body,o=a.content_type;return new Promise(function(l){sx(s,o,t,function(c){n.doc._attachments[i]=Object.assign(Ic(a,["digest","content_type"]),{data:c}),l()})})}}))}}))}function ux(e,t,n){var r=[],i=n.objectStore(Ii),a=n.objectStore(Za),s=n.objectStore(Au),o=e.length;function l(){o--,o||c()}function c(){r.length&&r.forEach(function(h){var p=s.index("digestSeq").count(IDBKeyRange.bound(h+"::",h+"::\uFFFF",!1,!1));p.onsuccess=function(E){var b=E.target.result;b||a.delete(h)}})}e.forEach(function(h){var p=i.index("_doc_id_rev"),E=t+"::"+h;p.getKey(E).onsuccess=function(b){var C=b.target.result;if(typeof C!="number")return l();i.delete(C);var N=s.index("seq").openCursor(IDBKeyRange.only(C));N.onsuccess=function(w){var I=w.target.result;if(I){var S=I.value.digestSeq.split("::")[0];r.push(S),s.delete(I.primaryKey),I.continue()}else l()}}})}function ls(e,t,n){try{return{txn:e.transaction(t,n)}}catch(r){return{error:r}}}var Lc=new Lg;function hO(e,t,n,r,i,a){for(var s=t.docs,o,l,c,h,p,E,b,C,N=0,w=s.length;N<w;N++){var I=s[N];I._id&&Nu(I._id)||(I=s[N]=ax(I,n.new_edits,e),I.error&&!b&&(b=I))}if(b)return a(b);var S=!1,_=0,P=new Array(s.length),v=new Map,y=!1,$=r._meta.blobSupport?"blob":"base64";aO(s,$,function(fe){if(fe)return a(fe);Z()});function Z(){var fe=[Qr,Ii,Za,Bs,Au,ta],pe=ls(i,fe,"readwrite");if(pe.error)return a(pe.error);o=pe.txn,o.onabort=Ms(a),o.ontimeout=Ms(a),o.oncomplete=re,l=o.objectStore(Qr),c=o.objectStore(Ii),h=o.objectStore(Za),p=o.objectStore(Au),E=o.objectStore(ta),E.get(ta).onsuccess=function(de){C=de.target.result,W()},ie(function(de){if(de)return y=!0,a(de);O()})}function ce(){S=!0,W()}function q(){uO(e.revs_limit,s,r,v,o,P,oe,n,ce)}function W(){!C||!S||(C.docCount+=_,E.put(C))}function O(){if(!s.length)return;var fe=0;function pe(){++fe===s.length&&q()}function de(Me){var Ge=Iu(Me.target.result);Ge&&v.set(Ge.id,Ge),pe()}for(var Ae=0,Ie=s.length;Ae<Ie;Ae++){var ve=s[Ae];if(ve._id&&Nu(ve._id)){pe();continue}var Te=l.get(ve.metadata.id);Te.onsuccess=de}}function re(){y||(Lc.notify(r._meta.name),a(null,P))}function le(fe,pe){var de=h.get(fe);de.onsuccess=function(Ae){if(Ae.target.result)pe();else{var Ie=tn(ND,"unknown stub attachment with digest "+fe);Ie.status=412,pe(Ie)}}}function ie(fe){var pe=[];if(s.forEach(function(ve){ve.data&&ve.data._attachments&&Object.keys(ve.data._attachments).forEach(function(Te){var Me=ve.data._attachments[Te];Me.stub&&pe.push(Me.digest)})}),!pe.length)return fe();var de=0,Ae;function Ie(){++de===pe.length&&fe(Ae)}pe.forEach(function(ve){le(ve,function(Te){Te&&!Ae&&(Ae=Te),Ie()})})}function oe(fe,pe,de,Ae,Ie,ve,Te,Me){fe.metadata.winningRev=pe,fe.metadata.deleted=de;var Ge=fe.data;Ge._id=fe.metadata.id,Ge._rev=fe.metadata.rev,Ae&&(Ge._deleted=!0);var at=Ge._attachments&&Object.keys(Ge._attachments).length;if(at)return j(fe,pe,de,Ie,Te,Me);_+=ve,W(),Q(fe,pe,de,Ie,Te,Me)}function Q(fe,pe,de,Ae,Ie,ve){var Te=fe.data,Me=fe.metadata;Te._doc_id_rev=Me.id+"::"+Me.rev,delete Te._id,delete Te._rev;function Ge(Se){var Ee=fe.stemmedRevs||[];Ae&&r.auto_compaction&&(Ee=Ee.concat(KD(fe.metadata))),Ee&&Ee.length&&ux(Ee,fe.metadata.id,o),Me.seq=Se.target.result;var ae=Mg(Me,pe,de),ue=l.put(ae);ue.onsuccess=ft}function at(Se){Se.preventDefault(),Se.stopPropagation();var Ee=c.index("_doc_id_rev"),ae=Ee.getKey(Te._doc_id_rev);ae.onsuccess=function(ue){var ye=c.put(Te,ue.target.result);ye.onsuccess=Ge}}function ft(){P[Ie]={ok:!0,id:Me.id,rev:Me.rev},v.set(fe.metadata.id,fe.metadata),H(fe,Me.seq,ve)}var V=c.put(Te);V.onsuccess=Ge,V.onerror=at}function j(fe,pe,de,Ae,Ie,ve){var Te=fe.data,Me=0,Ge=Object.keys(Te._attachments);function at(){Me===Ge.length&&Q(fe,pe,de,Ae,Ie,ve)}function ft(){Me++,at()}Ge.forEach(function(V){var Se=fe.data._attachments[V];if(Se.stub)Me++,at();else{var Ee=Se.data;delete Se.data,Se.revpos=parseInt(pe,10);var ae=Se.digest;G(ae,Ee,ft)}})}function H(fe,pe,de){var Ae=0,Ie=Object.keys(fe.data._attachments||{});if(!Ie.length)return de();function ve(){++Ae===Ie.length&&de()}function Te(Ge){var at=fe.data._attachments[Ge].digest,ft=p.put({seq:pe,digestSeq:at+"::"+pe});ft.onsuccess=ve,ft.onerror=function(V){V.preventDefault(),V.stopPropagation(),ve()}}for(var Me=0;Me<Ie.length;Me++)Te(Ie[Me])}function G(fe,pe,de){var Ae=h.count(fe);Ae.onsuccess=function(Ie){var ve=Ie.target.result;if(ve)return de();var Te={digest:fe,body:pe},Me=h.put(Te);Me.onsuccess=de}}}function lx(e,t,n,r,i){r===-1&&(r=1e3);var a=typeof e.getAll=="function"&&typeof e.getAllKeys=="function"&&r>1&&!n,s,o,l;function c(b){o=b.target.result,s&&i(s,o,l)}function h(b){s=b.target.result,o&&i(s,o,l)}function p(){if(!s.length)return i();var b=s[s.length-1],C;if(t&&t.upper)try{C=IDBKeyRange.bound(b,t.upper,!0,t.upperOpen)}catch(N){if(N.name==="DataError"&&N.code===0)return i()}else C=IDBKeyRange.lowerBound(b,!0);t=C,s=null,o=null,e.getAll(t,r).onsuccess=c,e.getAllKeys(t,r).onsuccess=h}function E(b){var C=b.target.result;if(!C)return i();i([C.key],[C.value],C)}a?(l={continue:p},e.getAll(t,r).onsuccess=c,e.getAllKeys(t,r).onsuccess=h):n?e.openCursor(t,"prev").onsuccess=E:e.openCursor(t).onsuccess=E}function dO(e,t,n){if(typeof e.getAll=="function"){e.getAll(t).onsuccess=n;return}var r=[];function i(a){var s=a.target.result;s?(r.push(s.value),s.continue()):n({target:{result:r}})}e.openCursor(t).onsuccess=i}function pO(e,t,n){var r=new Array(e.length),i=0;e.forEach(function(a,s){t.get(a).onsuccess=function(o){o.target.result?r[s]=o.target.result:r[s]={key:a,error:"not_found"},i++,i===e.length&&n(e,r,{})}})}function gO(e,t,n,r,i){try{if(e&&t)return i?IDBKeyRange.bound(t,e,!n,!1):IDBKeyRange.bound(e,t,!1,!n);if(e)return i?IDBKeyRange.upperBound(e):IDBKeyRange.lowerBound(e);if(t)return i?IDBKeyRange.lowerBound(t,!n):IDBKeyRange.upperBound(t,!n);if(r)return IDBKeyRange.only(r)}catch(a){return{error:a}}return null}function mO(e,t,n){var r="startkey"in e?e.startkey:!1,i="endkey"in e?e.endkey:!1,a="key"in e?e.key:!1,s="keys"in e?e.keys:!1,o=e.skip||0,l=typeof e.limit=="number"?e.limit:-1,c=e.inclusive_end!==!1,h,p;if(!s&&(h=gO(r,i,c,a,e.descending),p=h&&h.error,p&&!(p.name==="DataError"&&p.code===0)))return n(tn(Xg,p.name,p.message));var E=[Qr,Ii,ta];e.attachments&&E.push(Za);var b=ls(t,E,"readonly");if(b.error)return n(b.error);var C=b.txn;C.oncomplete=O,C.onabort=Ms(n);var N=C.objectStore(Qr),w=C.objectStore(Ii),I=C.objectStore(ta),S=w.index("_doc_id_rev"),_=[],P,v;I.get(ta).onsuccess=function(re){P=re.target.result.docCount},e.update_seq&&(w.openKeyCursor(null,"prev").onsuccess=re=>{var le=re.target.result;le&&le.key&&(v=le.key)});function y(re,le,ie){var oe=re.id+"::"+ie;S.get(oe).onsuccess=function(j){if(le.doc=Ah(j.target.result)||{},e.conflicts){var H=sm(re);H.length&&(le.doc._conflicts=H)}ox(le.doc,e,C)}}function $(re,le){var ie={id:le.id,key:le.id,value:{rev:re}},oe=le.deleted;oe?s&&(_.push(ie),ie.value.deleted=!0,ie.doc=null):o--<=0&&(_.push(ie),e.include_docs&&y(le,ie,re))}function Z(re){for(var le=0,ie=re.length;le<ie&&_.length!==l;le++){var oe=re[le];if(oe.error&&s){_.push(oe);continue}var Q=Iu(oe),j=Q.winningRev;$(j,Q)}}function ce(re,le,ie){ie&&(Z(le),_.length<l&&ie.continue())}function q(re){var le=re.target.result;e.descending&&(le=le.reverse()),Z(le)}function W(){var re={total_rows:P,offset:e.skip,rows:_};e.update_seq&&v!==void 0&&(re.update_seq=v),n(null,re)}function O(){e.attachments?Ug(_,e.binary).then(W):W()}if(!(p||l===0)){if(s)return pO(s,N,ce);if(l===-1)return dO(N,h,q);lx(N,h,e.descending,l+o,ce)}}function vO(e,t){var n=e.objectStore(Qr).index("deletedOrLocal");n.count(IDBKeyRange.only("0")).onsuccess=function(r){t(r.target.result)}}var qg=!1,Fg=[];function yO(e,t,n,r){try{e(t,n)}catch(i){r.emit("error",i)}}function bw(){qg||!Fg.length||(qg=!0,Fg.shift()())}function _O(e,t,n){Fg.push(function(){e(function(a,s){yO(t,a,s,n),qg=!1,Fs(function(){bw(n)})})}),bw()}function bO(e,t,n,r){if(e=ui(e),e.continuous){var i=n+":"+Dh();return Lc.addListener(n,i,t,e),Lc.notify(n),{cancel:function(){Lc.removeListener(n,i)}}}var a=e.doc_ids&&new Set(e.doc_ids);e.since=e.since||0;var s=e.since,o="limit"in e?e.limit:-1;o===0&&(o=1);var l=[],c=0,h=Yg(e),p=new Map,E,b,C,N;function w(Z,ce,q){if(!q||!Z.length)return;var W=new Array(Z.length),O=new Array(Z.length);function re(oe,Q){var j=e.processChange(Q,oe,e);s=j.seq=oe.seq;var H=h(j);return typeof H=="object"?Promise.reject(H):H?(c++,e.return_docs&&l.push(j),e.attachments&&e.include_docs?new Promise(function(G){ox(Q,e,E,function(){Ug([j],e.binary).then(function(){G(j)})})}):Promise.resolve(j)):Promise.resolve()}function le(){for(var oe=[],Q=0,j=W.length;Q<j&&c!==o;Q++){var H=W[Q];if(H){var G=O[Q];oe.push(re(G,H))}}Promise.all(oe).then(function(fe){for(var pe=0,de=fe.length;pe<de;pe++)fe[pe]&&e.onChange(fe[pe])}).catch(e.complete),c!==o&&q.continue()}var ie=0;ce.forEach(function(oe,Q){var j=Ah(oe),H=Z[Q];S(j,H,function(G,fe){O[Q]=G,W[Q]=fe,++ie===Z.length&&le()})})}function I(Z,ce,q,W){if(q.seq!==ce)return W();if(q.winningRev===Z._rev)return W(q,Z);var O=Z._id+"::"+q.winningRev,re=N.get(O);re.onsuccess=function(le){W(q,Ah(le.target.result))}}function S(Z,ce,q){if(a&&!a.has(Z._id))return q();var W=p.get(Z._id);if(W)return I(Z,ce,W,q);C.get(Z._id).onsuccess=function(O){W=Iu(O.target.result),p.set(Z._id,W),I(Z,ce,W,q)}}function _(){e.complete(null,{results:l,last_seq:s})}function P(){!e.continuous&&e.attachments?Ug(l).then(_):_()}var v=[Qr,Ii];e.attachments&&v.push(Za);var y=ls(r,v,"readonly");if(y.error)return e.complete(y.error);E=y.txn,E.onabort=Ms(e.complete),E.oncomplete=P,b=E.objectStore(Ii),C=E.objectStore(Qr),N=b.index("_doc_id_rev");var $=e.since&&!e.descending?IDBKeyRange.lowerBound(e.since,!0):null;lx(b,$,e.descending,o,w)}var yl=new Map,yg,_g=new Map;function cx(e,t){var n=this;_O(function(r){wO(n,e,r)},t,n.constructor)}function wO(e,t,n){var r=t.name,i=null,a=null;e._meta=null;function s(w){return function(I,S){I&&I instanceof Error&&!I.reason&&a&&(I.reason=a),w(I,S)}}function o(w){var I=w.createObjectStore(Qr,{keyPath:"id"});w.createObjectStore(Ii,{autoIncrement:!0}).createIndex("_doc_id_rev","_doc_id_rev",{unique:!0}),w.createObjectStore(Za,{keyPath:"digest"}),w.createObjectStore(ta,{keyPath:"id",autoIncrement:!1}),w.createObjectStore(vg),I.createIndex("deletedOrLocal","deletedOrLocal",{unique:!1}),w.createObjectStore(Bs,{keyPath:"_id"});var S=w.createObjectStore(Au,{autoIncrement:!0});S.createIndex("seq","seq"),S.createIndex("digestSeq","digestSeq",{unique:!0})}function l(w,I){var S=w.objectStore(Qr);S.createIndex("deletedOrLocal","deletedOrLocal",{unique:!1}),S.openCursor().onsuccess=function(_){var P=_.target.result;if(P){var v=P.value,y=lo(v);v.deletedOrLocal=y?"1":"0",S.put(v),P.continue()}else I()}}function c(w){w.createObjectStore(Bs,{keyPath:"_id"}).createIndex("_doc_id_rev","_doc_id_rev",{unique:!0})}function h(w,I){var S=w.objectStore(Bs),_=w.objectStore(Qr),P=w.objectStore(Ii),v=_.openCursor();v.onsuccess=function(y){var $=y.target.result;if($){var Z=$.value,ce=Z.id,q=Nu(ce),W=Pu(Z);if(q){var O=ce+"::"+W,re=ce+"::",le=ce+"::~",ie=P.index("_doc_id_rev"),oe=IDBKeyRange.bound(re,le,!1,!1),Q=ie.openCursor(oe);Q.onsuccess=function(j){if(Q=j.target.result,!Q)_.delete($.primaryKey),$.continue();else{var H=Q.value;H._doc_id_rev===O&&S.put(H),P.delete(Q.primaryKey),Q.continue()}}}else $.continue()}else I&&I()}}function p(w){var I=w.createObjectStore(Au,{autoIncrement:!0});I.createIndex("seq","seq"),I.createIndex("digestSeq","digestSeq",{unique:!0})}function E(w,I){var S=w.objectStore(Ii),_=w.objectStore(Za),P=w.objectStore(Au),v=_.count();v.onsuccess=function(y){var $=y.target.result;if(!$)return I();S.openCursor().onsuccess=function(Z){var ce=Z.target.result;if(!ce)return I();for(var q=ce.value,W=ce.primaryKey,O=Object.keys(q._attachments||{}),re={},le=0;le<O.length;le++){var ie=q._attachments[O[le]];re[ie.digest]=!0}var oe=Object.keys(re);for(le=0;le<oe.length;le++){var Q=oe[le];P.put({seq:W,digestSeq:Q+"::"+W})}ce.continue()}}}function b(w){function I(v){return v.data?Iu(v):(v.deleted=v.deletedOrLocal==="1",v)}var S=w.objectStore(Ii),_=w.objectStore(Qr),P=_.openCursor();P.onsuccess=function(v){var y=v.target.result;if(!y)return;var $=I(y.value);$.winningRev=$.winningRev||Pu($);function Z(){var q=$.id+"::",W=$.id+"::\uFFFF",O=S.index("_doc_id_rev").openCursor(IDBKeyRange.bound(q,W)),re=0;O.onsuccess=function(le){var ie=le.target.result;if(!ie)return $.seq=re,ce();var oe=ie.primaryKey;oe>re&&(re=oe),ie.continue()}}function ce(){var q=Mg($,$.winningRev,$.deleted),W=_.put(q);W.onsuccess=function(){y.continue()}}if($.seq)return ce();Z()}}e._remote=!1,e.type=function(){return"idb"},e._id=Mw(function(w){w(null,e._meta.instanceId)}),e._bulkDocs=function(I,S,_){hO(t,I,S,e,i,s(_))},e._get=function(I,S,_){var P,v,y,$=S.ctx;if(!$){var Z=ls(i,[Qr,Ii,Za],"readonly");if(Z.error)return _(Z.error);$=Z.txn}function ce(){_(y,{doc:P,metadata:v,ctx:$})}$.objectStore(Qr).get(I).onsuccess=function(q){if(v=Iu(q.target.result),!v)return y=tn(Ga,"missing"),ce();var W;if(S.rev)W=S.latest?tR(S.rev,v):S.rev;else{W=v.winningRev;var O=lo(v);if(O)return y=tn(Ga,"deleted"),ce()}var re=$.objectStore(Ii),le=v.id+"::"+W;re.index("_doc_id_rev").get(le).onsuccess=function(ie){if(P=ie.target.result,P&&(P=Ah(P)),!P)return y=tn(Ga,"missing"),ce();ce()}}},e._getAttachment=function(w,I,S,_,P){var v;if(_.ctx)v=_.ctx;else{var y=ls(i,[Qr,Ii,Za],"readonly");if(y.error)return P(y.error);v=y.txn}var $=S.digest,Z=S.content_type;v.objectStore(Za).get($).onsuccess=function(ce){var q=ce.target.result.body;sx(q,Z,_.binary,function(W){P(null,W)})}},e._info=function(I){var S,_,P=ls(i,[ta,Ii],"readonly");if(P.error)return I(P.error);var v=P.txn;v.objectStore(ta).get(ta).onsuccess=function(y){_=y.target.result.docCount},v.objectStore(Ii).openKeyCursor(null,"prev").onsuccess=function(y){var $=y.target.result;S=$?$.key:0},v.oncomplete=function(){I(null,{doc_count:_,update_seq:S,idb_attachment_format:e._meta.blobSupport?"binary":"base64"})}},e._allDocs=function(I,S){mO(I,i,s(S))},e._changes=function(I){return bO(I,e,r,i)},e._close=function(w){i.close(),yl.delete(r),w()},e._getRevisionTree=function(w,I){var S=ls(i,[Qr],"readonly");if(S.error)return I(S.error);var _=S.txn,P=_.objectStore(Qr).get(w);P.onsuccess=function(v){var y=Iu(v.target.result);y?I(null,y.rev_tree):I(tn(Ga))}},e._doCompaction=function(w,I,S){var _=[Qr,Ii,Za,Au],P=ls(i,_,"readwrite");if(P.error)return S(P.error);var v=P.txn,y=v.objectStore(Qr);y.get(w).onsuccess=function($){var Z=Iu($.target.result);Du(Z.rev_tree,function(W,O,re,le,ie){var oe=O+"-"+re;I.indexOf(oe)!==-1&&(ie.status="missing")}),ux(I,w,v);var ce=Z.winningRev,q=Z.deleted;v.objectStore(Qr).put(Mg(Z,ce,q))},v.onabort=Ms(S),v.oncomplete=function(){S()}},e._getLocal=function(w,I){var S=ls(i,[Bs],"readonly");if(S.error)return I(S.error);var _=S.txn,P=_.objectStore(Bs).get(w);P.onerror=Ms(I),P.onsuccess=function(v){var y=v.target.result;y?(delete y._doc_id_rev,I(null,y)):I(tn(Ga))}},e._putLocal=function(w,I,S){typeof I=="function"&&(S=I,I={}),delete w._revisions;var _=w._rev,P=w._id;_?w._rev="0-"+(parseInt(_.split("-")[1],10)+1):w._rev="0-1";var v=I.ctx,y;if(!v){var $=ls(i,[Bs],"readwrite");if($.error)return S($.error);v=$.txn,v.onerror=Ms(S),v.oncomplete=function(){y&&S(null,y)}}var Z=v.objectStore(Bs),ce;_?(ce=Z.get(P),ce.onsuccess=function(q){var W=q.target.result;if(!W||W._rev!==_)S(tn(wl));else{var O=Z.put(w);O.onsuccess=function(){y={ok:!0,id:w._id,rev:w._rev},I.ctx&&S(null,y)}}}):(ce=Z.add(w),ce.onerror=function(q){S(tn(wl)),q.preventDefault(),q.stopPropagation()},ce.onsuccess=function(){y={ok:!0,id:w._id,rev:w._rev},I.ctx&&S(null,y)})},e._removeLocal=function(w,I,S){typeof I=="function"&&(S=I,I={});var _=I.ctx;if(!_){var P=ls(i,[Bs],"readwrite");if(P.error)return S(P.error);_=P.txn,_.oncomplete=function(){v&&S(null,v)}}var v,y=w._id,$=_.objectStore(Bs),Z=$.get(y);Z.onerror=Ms(S),Z.onsuccess=function(ce){var q=ce.target.result;!q||q._rev!==w._rev?S(tn(Ga)):($.delete(y),v={ok:!0,id:y,rev:"0-0"},I.ctx&&S(null,v))}},e._destroy=function(w,I){Lc.removeAllListeners(r);var S=_g.get(r);S&&S.result&&(S.result.close(),yl.delete(r));var _=indexedDB.deleteDatabase(r);_.onsuccess=function(){_g.delete(r),Ch()&&r in localStorage&&delete localStorage[r],I(null,{ok:!0})},_.onerror=Ms(I)};var C=yl.get(r);if(C)return i=C.idb,e._meta=C.global,Fs(function(){n(null,e)});var N=indexedDB.open(r,lO);_g.set(r,N),N.onupgradeneeded=function(w){var I=w.target.result;if(w.oldVersion<1)return o(I);var S=w.currentTarget.transaction;w.oldVersion<3&&c(I),w.oldVersion<4&&p(I);var _=[l,h,E,b],P=w.oldVersion;function v(){var y=_[P-1];P++,y&&y(S,v)}v()},N.onsuccess=function(w){i=w.target.result,i.onversionchange=function(){i.close(),yl.delete(r)},i.onabort=function(ce){Xa("error","Database has a global failure",ce.target.error),a=ce.target.error,i.close(),yl.delete(r)};var I=i.transaction([ta,vg,Qr],"readwrite"),S=!1,_,P,v,y;function $(){typeof v>"u"||!S||(e._meta={name:r,instanceId:y,blobSupport:v},yl.set(r,{idb:i,global:e._meta}),n(null,e))}function Z(){if(!(typeof P>"u"||typeof _>"u")){var ce=r+"_id";ce in _?y=_[ce]:_[ce]=y=Dh(),_.docCount=P,I.objectStore(ta).put(_)}}I.objectStore(ta).get(ta).onsuccess=function(ce){_=ce.target.result||{id:ta},Z()},vO(I,function(ce){P=ce,Z()}),yg||(yg=YR(I,vg,"key")),yg.then(function(ce){v=ce,$()}),I.oncomplete=function(){S=!0,$()},I.onabort=Ms(n)},N.onerror=function(w){var I=w.target.error&&w.target.error.message;I?I.indexOf("stored database is a higher version")!==-1&&(I=new Error('This DB was created with the newer "indexeddb" adapter, but you are trying to open it with the older "idb" adapter')):I="Failed to open indexedDB, are you in private browsing mode?",Xa("error",I),n(tn(Xg,I))}}cx.valid=function(){try{return typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}};function xO(e){e.adapter("idb",cx,!0)}function EO(e,t){return new Promise(function(n,r){var i=0,a=0,s=0,o=e.length,l;function c(){i++,e[a++]().then(p,E)}function h(){++s===o?l?r(l):n():b()}function p(){i--,h()}function E(C){i--,l=l||C,h()}function b(){for(;i<t&&a<o;)c()}b()})}var CO=25,SO=50,_h=5e3,TO=1e4,bg={};function wg(e){let t=e.doc||e.ok,n=t&&t._attachments;n&&Object.keys(n).forEach(function(r){let i=n[r];i.data=nm(i.data,i.content_type)})}function ku(e){return/^_design/.test(e)?"_design/"+encodeURIComponent(e.slice(8)):e.startsWith("_local/")?"_local/"+encodeURIComponent(e.slice(7)):encodeURIComponent(e)}function ww(e){return!e._attachments||!Object.keys(e._attachments)?Promise.resolve():Promise.all(Object.keys(e._attachments).map(function(t){let n=e._attachments[t];if(n.data&&typeof n.data!="string")return new Promise(function(r){rm(n.data,r)}).then(function(r){n.data=r})}))}function LO(e){if(!e.prefix)return!1;let t=zw(e.prefix).protocol;return t==="http"||t==="https"}function kO(e,t){if(LO(t)){let i=t.name.substr(t.prefix.length);e=t.prefix.replace(/\/?$/,"/")+encodeURIComponent(i)}let n=zw(e);(n.user||n.password)&&(n.auth={username:n.user,password:n.password});let r=n.path.replace(/(^\/|\/$)/g,"").split("/");return n.db=r.pop(),n.db.indexOf("%")===-1&&(n.db=encodeURIComponent(n.db)),n.path=r.join("/"),n}function oi(e,t){return xh(e,e.db+"/"+t)}function xh(e,t){let n=e.path?"/":"";return e.protocol+"://"+e.host+(e.port?":"+e.port:"")+"/"+e.path+n+t}function bh(e){let t=Object.keys(e);return t.length===0?"":"?"+t.map(n=>n+"="+encodeURIComponent(e[n])).join("&")}function AO(e){let t=typeof navigator<"u"&&navigator.userAgent?navigator.userAgent.toLowerCase():"",n=t.indexOf("msie")!==-1,r=t.indexOf("trident")!==-1,i=t.indexOf("edge")!==-1,a=!("method"in e)||e.method==="GET";return(n||r||i)&&a}function Vg(e,t){let n=this,r=kO(e.name,e),i=oi(r,"");e=ui(e);let a=async function(p,E){if(E=E||{},E.headers=E.headers||new _l,E.credentials="include",e.auth||r.auth){let N=e.auth||r.auth,w=N.username+":"+N.password,I=Nc(unescape(encodeURIComponent(w)));E.headers.set("Authorization","Basic "+I)}let b=e.headers||{};return Object.keys(b).forEach(function(N){E.headers.append(N,b[N])}),AO(E)&&(p+=(p.indexOf("?")===-1?"?":"&")+"_nonce="+Date.now()),await(e.fetch||Qw)(p,E)};function s(p,E){return zr(p,function(...b){c().then(function(){return E.apply(this,b)}).catch(function(C){b.pop()(C)})}).bind(n)}async function o(p,E){let b={};E=E||{},E.headers=E.headers||new _l,E.headers.get("Content-Type")||E.headers.set("Content-Type","application/json"),E.headers.get("Accept")||E.headers.set("Accept","application/json");let C=await a(p,E);b.ok=C.ok,b.status=C.status;let N=await C.json();if(b.data=N,!b.ok)throw b.data.status=b.status,xl(b.data);return Array.isArray(b.data)&&(b.data=b.data.map(function(w){return w.error||w.missing?xl(w):w})),b}let l;async function c(){return e.skip_setup?Promise.resolve():l||(l=o(i).catch(function(p){return p&&p.status&&p.status===404?(kg(404,"PouchDB is just detecting if the remote exists."),o(i,{method:"PUT"})):Promise.reject(p)}).catch(function(p){return p&&p.status&&p.status===412?!0:Promise.reject(p)}),l.catch(function(){l=null}),l)}Fs(function(){t(null,n)}),n._remote=!0,n.type=function(){return"http"},n.id=s("id",async function(p){let E;try{E=await(await a(xh(r,""))).json()}catch{E={}}let b=E&&E.uuid?E.uuid+r.db:oi(r,"");p(null,b)}),n.compact=s("compact",async function(p,E){typeof p=="function"&&(E=p,p={}),p=ui(p),await o(oi(r,"_compact"),{method:"POST"});function b(){n.info(function(C,N){N&&!N.compact_running?E(null,{ok:!0}):setTimeout(b,p.interval||200)})}b()}),n.bulkGet=zr("bulkGet",function(p,E){let b=this;async function C(S){let _={};p.revs&&(_.revs=!0),p.attachments&&(_.attachments=!0),p.latest&&(_.latest=!0);try{let P=await o(oi(r,"_bulk_get"+bh(_)),{method:"POST",body:JSON.stringify({docs:p.docs})});p.attachments&&p.binary&&P.data.results.forEach(function(v){v.docs.forEach(wg)}),S(null,P.data)}catch(P){S(P)}}function N(){let S=SO,_=Math.ceil(p.docs.length/S),P=0,v=new Array(_);function y($){return function(Z,ce){v[$]=ce.results,++P===_&&E(null,{results:v.flat()})}}for(let $=0;$<_;$++){let Z=Ic(p,["revs","attachments","binary","latest"]);Z.docs=p.docs.slice($*S,Math.min(p.docs.length,($+1)*S)),Uw(b,Z,y($))}}let w=xh(r,""),I=bg[w];typeof I!="boolean"?C(function(S,_){S?(bg[w]=!1,kg(S.status,"PouchDB is just detecting if the remote supports the _bulk_get API."),N()):(bg[w]=!0,E(null,_))}):I?C(E):N()}),n._info=async function(p){try{await c();let b=await(await a(oi(r,""))).json();b.host=oi(r,""),p(null,b)}catch(E){p(E)}},n.fetch=async function(p,E){await c();let b=p.substring(0,1)==="/"?xh(r,p.substring(1)):oi(r,p);return a(b,E)},n.get=s("get",async function(p,E,b){typeof E=="function"&&(b=E,E={}),E=ui(E);let C={};E.revs&&(C.revs=!0),E.revs_info&&(C.revs_info=!0),E.latest&&(C.latest=!0),E.open_revs&&(E.open_revs!=="all"&&(E.open_revs=JSON.stringify(E.open_revs)),C.open_revs=E.open_revs),E.rev&&(C.rev=E.rev),E.conflicts&&(C.conflicts=E.conflicts),E.update_seq&&(C.update_seq=E.update_seq),p=ku(p);function N(S){let _=S._attachments,P=_&&Object.keys(_);if(!_||!P.length)return;async function v($){let Z=_[$],ce=ku(S._id)+"/"+h($)+"?rev="+S._rev,q=await a(oi(r,ce)),W;"buffer"in q?W=await q.buffer():W=await q.blob();let O;if(E.binary){let re=Object.getOwnPropertyDescriptor(W.__proto__,"type");(!re||re.set)&&(W.type=Z.content_type),O=W}else O=await new Promise(function(re){rm(W,re)});delete Z.stub,delete Z.length,Z.data=O}let y=P.map(function($){return function(){return v($)}});return EO(y,5)}function w(S){return Array.isArray(S)?Promise.all(S.map(function(_){if(_.ok)return N(_.ok)})):N(S)}let I=oi(r,p+bh(C));try{let S=await o(I);E.attachments&&await w(S.data),b(null,S.data)}catch(S){S.docId=p,b(S)}}),n.remove=s("remove",async function(p,E,b,C){let N;typeof E=="string"?(N={_id:p,_rev:E},typeof b=="function"&&(C=b,b={})):(N=p,typeof E=="function"?(C=E,b={}):(C=b,b=E));let w=N._rev||b.rev,I=oi(r,ku(N._id))+"?rev="+w;try{let S=await o(I,{method:"DELETE"});C(null,S.data)}catch(S){C(S)}});function h(p){return p.split("/").map(encodeURIComponent).join("/")}n.getAttachment=s("getAttachment",async function(p,E,b,C){typeof b=="function"&&(C=b,b={});let N=b.rev?"?rev="+b.rev:"",w=oi(r,ku(p))+"/"+h(E)+N,I;try{let S=await a(w,{method:"GET"});if(!S.ok)throw S;I=S.headers.get("content-type");let _;if(typeof process<"u"&&!process.browser&&typeof S.buffer=="function"?_=await S.buffer():_=await S.blob(),typeof process<"u"&&!process.browser){let P=Object.getOwnPropertyDescriptor(_.__proto__,"type");(!P||P.set)&&(_.type=I)}C(null,_)}catch(S){C(S)}}),n.removeAttachment=s("removeAttachment",async function(p,E,b,C){let N=oi(r,ku(p)+"/"+h(E))+"?rev="+b;try{let w=await o(N,{method:"DELETE"});C(null,w.data)}catch(w){C(w)}}),n.putAttachment=s("putAttachment",async function(p,E,b,C,N,w){typeof N=="function"&&(w=N,N=C,C=b,b=null);let I=ku(p)+"/"+h(E),S=oi(r,I);if(b&&(S+="?rev="+b),typeof C=="string"){let _;try{_=Jg(C)}catch{return w(tn(Fw,"Attachment is not a valid base64 string"))}C=_?tm(_,N):""}try{let _=await o(S,{headers:new _l({"Content-Type":N}),method:"PUT",body:C});w(null,_.data)}catch(_){w(_)}}),n._bulkDocs=async function(p,E,b){p.new_edits=E.new_edits;try{await c(),await Promise.all(p.docs.map(ww));let C=await o(oi(r,"_bulk_docs"),{method:"POST",body:JSON.stringify(p)});b(null,C.data)}catch(C){b(C)}},n._put=async function(p,E,b){try{await c(),await ww(p);let C=await o(oi(r,ku(p._id)),{method:"PUT",body:JSON.stringify(p)});b(null,C.data)}catch(C){C.docId=p&&p._id,b(C)}},n.allDocs=s("allDocs",async function(p,E){typeof p=="function"&&(E=p,p={}),p=ui(p);let b={},C,N="GET";p.conflicts&&(b.conflicts=!0),p.update_seq&&(b.update_seq=!0),p.descending&&(b.descending=!0),p.include_docs&&(b.include_docs=!0),p.attachments&&(b.attachments=!0),p.key&&(b.key=JSON.stringify(p.key)),p.start_key&&(p.startkey=p.start_key),p.startkey&&(b.startkey=JSON.stringify(p.startkey)),p.end_key&&(p.endkey=p.end_key),p.endkey&&(b.endkey=JSON.stringify(p.endkey)),typeof p.inclusive_end<"u"&&(b.inclusive_end=!!p.inclusive_end),typeof p.limit<"u"&&(b.limit=p.limit),typeof p.skip<"u"&&(b.skip=p.skip);let w=bh(b);typeof p.keys<"u"&&(N="POST",C={keys:p.keys});try{let I=await o(oi(r,"_all_docs"+w),{method:N,body:JSON.stringify(C)});p.include_docs&&p.attachments&&p.binary&&I.data.rows.forEach(wg),E(null,I.data)}catch(I){E(I)}}),n._changes=function(p){let E="batch_size"in p?p.batch_size:CO;p=ui(p),p.continuous&&!("heartbeat"in p)&&(p.heartbeat=TO);let b="timeout"in p?p.timeout:30*1e3;"timeout"in p&&p.timeout&&b-p.timeout<_h&&(b=p.timeout+_h),"heartbeat"in p&&p.heartbeat&&b-p.heartbeat<_h&&(b=p.heartbeat+_h);let C={};"timeout"in p&&p.timeout&&(C.timeout=p.timeout);let N=typeof p.limit<"u"?p.limit:!1,w=N;if(p.style&&(C.style=p.style),(p.include_docs||p.filter&&typeof p.filter=="function")&&(C.include_docs=!0),p.attachments&&(C.attachments=!0),p.continuous&&(C.feed="longpoll"),p.seq_interval&&(C.seq_interval=p.seq_interval),p.conflicts&&(C.conflicts=!0),p.descending&&(C.descending=!0),p.update_seq&&(C.update_seq=!0),"heartbeat"in p&&p.heartbeat&&(C.heartbeat=p.heartbeat),p.filter&&typeof p.filter=="string"&&(C.filter=p.filter),p.view&&typeof p.view=="string"&&(C.filter="_view",C.view=p.view),p.query_params&&typeof p.query_params=="object")for(let Z in p.query_params)Object.prototype.hasOwnProperty.call(p.query_params,Z)&&(C[Z]=p.query_params[Z]);let I="GET",S;p.doc_ids?(C.filter="_doc_ids",I="POST",S={doc_ids:p.doc_ids}):p.selector&&(C.filter="_selector",I="POST",S={selector:p.selector});let _=new AbortController,P,v=async function(Z,ce){if(p.aborted)return;C.since=Z,typeof C.since=="object"&&(C.since=JSON.stringify(C.since)),p.descending?N&&(C.limit=w):C.limit=!N||w>E?E:w;let q=oi(r,"_changes"+bh(C)),W={signal:_.signal,method:I,body:JSON.stringify(S)};if(P=Z,!p.aborted)try{await c();let O=await o(q,W);ce(null,O.data)}catch(O){ce(O)}},y={results:[]},$=function(Z,ce){if(p.aborted)return;let q=0;if(ce&&ce.results){q=ce.results.length,y.last_seq=ce.last_seq;let O=null,re=null;typeof ce.pending=="number"&&(O=ce.pending),(typeof y.last_seq=="string"||typeof y.last_seq=="number")&&(re=y.last_seq);let le={};le.query=p.query_params,ce.results=ce.results.filter(function(ie){w--;let oe=Yg(p)(ie);return oe&&(p.include_docs&&p.attachments&&p.binary&&wg(ie),p.return_docs&&y.results.push(ie),p.onChange(ie,O,re)),oe})}else if(Z){p.aborted=!0,p.complete(Z);return}ce&&ce.last_seq&&(P=ce.last_seq);let W=N&&w<=0||ce&&q<E||p.descending;p.continuous&&!(N&&w<=0)||!W?Fs(function(){v(P,$)}):p.complete(null,y)};return v(p.since||0,$),{cancel:function(){p.aborted=!0,_.abort()}}},n.revsDiff=s("revsDiff",async function(p,E,b){typeof E=="function"&&(b=E,E={});try{let C=await o(oi(r,"_revs_diff"),{method:"POST",body:JSON.stringify(p)});b(null,C.data)}catch(C){b(C)}}),n._close=function(p){p()},n._destroy=async function(p,E){try{let b=await o(oi(r,""),{method:"DELETE"});E(null,b)}catch(b){b.status===404?E(null,{ok:!0}):E(b)}}}Vg.valid=function(){return!0};function IO(e){e.adapter("http",Vg,!1),e.adapter("https",Vg,!1)}var uo=class extends Error{constructor(t){super(),this.status=400,this.name="query_parse_error",this.message=t,this.error=!0;try{Error.captureStackTrace(this,uo)}catch{}}},El=class extends Error{constructor(t){super(),this.status=404,this.name="not_found",this.message=t,this.error=!0;try{Error.captureStackTrace(this,El)}catch{}}},Cl=class extends Error{constructor(t){super(),this.status=500,this.name="invalid_value",this.message=t,this.error=!0;try{Error.captureStackTrace(this,Cl)}catch{}}};function fx(e,t){return t&&e.then(function(n){Fs(function(){t(null,n)})},function(n){Fs(function(){t(n)})}),e}function NO(e){return function(...t){var n=t.pop(),r=e.apply(this,t);return typeof n=="function"&&fx(r,n),r}}function PO(e,t){return e.then(function(n){return t().then(function(){return n})},function(n){return t().then(function(){throw n})})}function xg(e,t){return function(){var n=arguments,r=this;return e.add(function(){return t.apply(r,n)})}}function xw(e){var t=new Set(e),n=new Array(t.size),r=-1;return t.forEach(function(i){n[++r]=i}),n}function Eg(e){var t=new Array(e.size),n=-1;return e.forEach(function(r,i){t[++n]=i}),t}function Ew(e){var t="builtin "+e+" function requires map values to be numbers or number arrays";return new Cl(t)}function zg(e){for(var t=0,n=0,r=e.length;n<r;n++){var i=e[n];if(typeof i!="number")if(Array.isArray(i)){t=typeof t=="number"?[t]:t;for(var a=0,s=i.length;a<s;a++){var o=i[a];if(typeof o!="number")throw Ew("_sum");typeof t[a]>"u"?t.push(o):t[a]+=o}}else throw Ew("_sum");else typeof t=="number"?t+=i:t[0]+=i}return t}var DO=Xa.bind(null,"log"),RO=Array.isArray,OO=JSON.parse;function hx(e,t){return Qg("return ("+e.replace(/;\s*$/,"")+");",{emit:t,sum:zg,log:DO,isArray:RO,toJSON:OO})}var Ac=class{constructor(){this.promise=Promise.resolve()}add(t){return this.promise=this.promise.catch(()=>{}).then(()=>t()),this.promise}finish(){return this.promise}};function Cw(e){if(!e)return"undefined";switch(typeof e){case"function":return e.toString();case"string":return e.toString();default:return JSON.stringify(e)}}function BO(e,t){return Cw(e)+Cw(t)+"undefined"}async function Sw(e,t,n,r,i,a){let s=BO(n,r),o;if(!i&&(o=e._cachedViews=e._cachedViews||{},o[s]))return o[s];let l=e.info().then(async function(c){let h=c.db_name+"-mrview-"+(i?"temp":jw(s));function p(w){w.views=w.views||{};let I=t;I.indexOf("/")===-1&&(I=t+"/"+t);let S=w.views[I]=w.views[I]||{};if(!S[h])return S[h]=!0,w}await Sh(e,"_local/"+a,p);let b=(await e.registerDependentDatabase(h)).db;b.auto_compaction=!0;let C={name:h,db:b,sourceDB:e,adapter:e.adapter,mapFun:n,reduceFun:r},N;try{N=await C.db.get("_local/lastSeq")}catch(w){if(w.status!==404)throw w}return C.seq=N?N.seq:0,o&&C.db.once("destroyed",function(){delete o[s]}),C});return o&&(o[s]=l),l}var Tw={},Lw=new Ac,MO=50;function Cg(e){return e.indexOf("/")===-1?[e,e]:e.split("/")}function UO(e){return e.length===1&&/^1-/.test(e[0].rev)}function kw(e,t,n){try{e.emit("error",t)}catch{Xa("error",`The user's map/reduce function threw an uncaught error.
You can debug this error by doing:
myDatabase.on('error', function (err) { debugger; });
Please double-check your map/reduce function.`),Xa("error",t,n)}}function qO(e,t,n,r){function i(j,H,G){try{H(G)}catch(fe){kw(j,fe,{fun:H,doc:G})}}function a(j,H,G,fe,pe){try{return{output:H(G,fe,pe)}}catch(de){return kw(j,de,{fun:H,keys:G,values:fe,rereduce:pe}),{error:de}}}function s(j,H){let G=Hr(j.key,H.key);return G!==0?G:Hr(j.value,H.value)}function o(j,H,G){return G=G||0,typeof H=="number"?j.slice(G,H+G):G>0?j.slice(G):j}function l(j){let H=j.value;return H&&typeof H=="object"&&H._id||j.id}function c(j){for(let H of j.rows){let G=H.doc&&H.doc._attachments;if(G)for(let fe of Object.keys(G)){let pe=G[fe];G[fe].data=nm(pe.data,pe.content_type)}}}function h(j){return function(H){return j.include_docs&&j.attachments&&j.binary&&c(H),H}}function p(j,H,G,fe){let pe=H[j];typeof pe<"u"&&(fe&&(pe=encodeURIComponent(JSON.stringify(pe))),G.push(j+"="+pe))}function E(j){if(typeof j<"u"){let H=Number(j);return!isNaN(H)&&H===parseInt(j,10)?H:j}}function b(j){return j.group_level=E(j.group_level),j.limit=E(j.limit),j.skip=E(j.skip),j}function C(j){if(j){if(typeof j!="number")return new uo(`Invalid value for integer: "${j}"`);if(j<0)return new uo(`Invalid value for positive integer: "${j}"`)}}function N(j,H){let G=j.descending?"endkey":"startkey",fe=j.descending?"startkey":"endkey";if(typeof j[G]<"u"&&typeof j[fe]<"u"&&Hr(j[G],j[fe])>0)throw new uo("No rows can match your key range, reverse your start_key and end_key or set {descending : true}");if(H.reduce&&j.reduce!==!1){if(j.include_docs)throw new uo("{include_docs:true} is invalid for reduce");if(j.keys&&j.keys.length>1&&!j.group&&!j.group_level)throw new uo("Multi-key fetches for reduce views must use {group: true}")}for(let pe of["group_level","limit","skip"]){let de=C(j[pe]);if(de)throw de}}async function w(j,H,G){let fe=[],pe,de="GET",Ae;if(p("reduce",G,fe),p("include_docs",G,fe),p("attachments",G,fe),p("limit",G,fe),p("descending",G,fe),p("group",G,fe),p("group_level",G,fe),p("skip",G,fe),p("stale",G,fe),p("conflicts",G,fe),p("startkey",G,fe,!0),p("start_key",G,fe,!0),p("endkey",G,fe,!0),p("end_key",G,fe,!0),p("inclusive_end",G,fe),p("key",G,fe,!0),p("update_seq",G,fe),fe=fe.join("&"),fe=fe===""?"":"?"+fe,typeof G.keys<"u"){let Me=`keys=${encodeURIComponent(JSON.stringify(G.keys))}`;Me.length+fe.length+1<=2e3?fe+=(fe[0]==="?"?"&":"?")+Me:(de="POST",typeof H=="string"?pe={keys:G.keys}:H.keys=G.keys)}if(typeof H=="string"){let Te=Cg(H),Me=await j.fetch("_design/"+Te[0]+"/_view/"+Te[1]+fe,{headers:new _l({"Content-Type":"application/json"}),method:de,body:JSON.stringify(pe)});Ae=Me.ok;let Ge=await Me.json();if(!Ae)throw Ge.status=Me.status,xl(Ge);for(let at of Ge.rows)if(at.value&&at.value.error&&at.value.error==="builtin_reduce_error")throw new Error(at.reason);return new Promise(function(at){at(Ge)}).then(h(G))}pe=pe||{};for(let Te of Object.keys(H))Array.isArray(H[Te])?pe[Te]=H[Te]:pe[Te]=H[Te].toString();let Ie=await j.fetch("_temp_view"+fe,{headers:new _l({"Content-Type":"application/json"}),method:"POST",body:JSON.stringify(pe)});Ae=Ie.ok;let ve=await Ie.json();if(!Ae)throw ve.status=Ie.status,xl(ve);return new Promise(function(Te){Te(ve)}).then(h(G))}function I(j,H,G){return new Promise(function(fe,pe){j._query(H,G,function(de,Ae){if(de)return pe(de);fe(Ae)})})}function S(j){return new Promise(function(H,G){j._viewCleanup(function(fe,pe){if(fe)return G(fe);H(pe)})})}function _(j){return function(H){if(H.status===404)return j;throw H}}async function P(j,H,G){let fe="_local/doc_"+j,pe={_id:fe,keys:[]},de=G.get(j),Ae=de[0],Ie=de[1];function ve(){return UO(Ie)?Promise.resolve(pe):H.db.get(fe).catch(_(pe))}function Te(ft){return ft.keys.length?H.db.allDocs({keys:ft.keys,include_docs:!0}):Promise.resolve({rows:[]})}function Me(ft,V){let Se=[],Ee=new Set;for(let ue of V.rows){let ye=ue.doc;if(ye&&(Se.push(ye),Ee.add(ye._id),ye._deleted=!Ae.has(ye._id),!ye._deleted)){let Ve=Ae.get(ye._id);"value"in Ve&&(ye.value=Ve.value)}}let ae=Eg(Ae);for(let ue of ae)if(!Ee.has(ue)){let ye={_id:ue},Ve=Ae.get(ue);"value"in Ve&&(ye.value=Ve.value),Se.push(ye)}return ft.keys=xw(ae.concat(ft.keys)),Se.push(ft),Se}let Ge=await ve(),at=await Te(Ge);return Me(Ge,at)}function v(j){return j.sourceDB.get("_local/purges").then(function(H){let G=H.purgeSeq;return j.db.get("_local/purgeSeq").then(function(fe){return fe._rev}).catch(_(void 0)).then(function(fe){return j.db.put({_id:"_local/purgeSeq",_rev:fe,purgeSeq:G})})}).catch(function(H){if(H.status!==404)throw H})}function y(j,H,G){var fe="_local/lastSeq";return j.db.get(fe).catch(_({_id:fe,seq:0})).then(function(pe){var de=Eg(H);return Promise.all(de.map(function(Ae){return P(Ae,j,H)})).then(function(Ae){var Ie=Ae.flat();return pe.seq=G,Ie.push(pe),j.db.bulkDocs({docs:Ie})}).then(()=>v(j))})}function $(j){let H=typeof j=="string"?j:j.name,G=Tw[H];return G||(G=Tw[H]=new Ac),G}async function Z(j,H){return xg($(j),function(){return ce(j,H)})()}async function ce(j,H){let G,fe,pe;function de(ue,ye){let Ve={id:fe._id,key:Ru(ue)};typeof ye<"u"&&ye!==null&&(Ve.value=Ru(ye)),G.push(Ve)}let Ae=t(j.mapFun,de),Ie=j.seq||0;function ve(){return j.sourceDB.info().then(function(ue){pe=j.sourceDB.activeTasks.add({name:"view_indexing",total_items:ue.update_seq-Ie})})}function Te(ue,ye){return function(){return y(j,ue,ye)}}let Me=0,Ge={view:j.name,indexed_docs:Me};j.sourceDB.emit("indexing",Ge);let at=new Ac;async function ft(){let ue=await j.sourceDB.changes({return_docs:!0,conflicts:!0,include_docs:!0,style:"all_docs",since:Ie,limit:H.changes_batch_size}),ye=await V();return Se(ue,ye)}function V(){return j.db.get("_local/purgeSeq").then(function(ue){return ue.purgeSeq}).catch(_(-1)).then(function(ue){return j.sourceDB.get("_local/purges").then(function(ye){let Ve=ye.purges.filter(function(Re,Qe){return Qe>ue}).map(Re=>Re.docId),et=Ve.filter(function(Re,Qe){return Ve.indexOf(Re)===Qe});return Promise.all(et.map(function(Re){return j.sourceDB.get(Re).then(function(Qe){return{docId:Re,doc:Qe}}).catch(_({docId:Re}))}))}).catch(_([]))})}function Se(ue,ye){let Ve=ue.results;if(!Ve.length&&!ye.length)return;for(let Qe of ye)if(Ve.findIndex(function(rt){return rt.id===Qe.docId})<0){let rt={_id:Qe.docId,doc:{_id:Qe.docId,_deleted:1},changes:[]};Qe.doc&&(rt.doc=Qe.doc,rt.changes.push({rev:Qe.doc._rev})),Ve.push(rt)}let et=Ee(Ve);at.add(Te(et,Ie)),Me=Me+Ve.length;let Re={view:j.name,last_seq:ue.last_seq,results_count:Ve.length,indexed_docs:Me};if(j.sourceDB.emit("indexing",Re),j.sourceDB.activeTasks.update(pe,{completed_items:Me}),!(Ve.length<H.changes_batch_size))return ft()}function Ee(ue){let ye=new Map;for(let Ve of ue){if(Ve.doc._id[0]!=="_"){G=[],fe=Ve.doc,fe._deleted||i(j.sourceDB,Ae,fe),G.sort(s);let et=ae(G);ye.set(Ve.doc._id,[et,Ve.changes])}Ie=Ve.seq}return ye}function ae(ue){let ye=new Map,Ve;for(let et=0,Re=ue.length;et<Re;et++){let Qe=ue[et],gt=[Qe.key,Qe.id];et>0&&Hr(Qe.key,Ve)===0&&gt.push(et),ye.set(us(gt),Qe),Ve=Qe.key}return ye}try{await ve(),await ft(),await at.finish(),j.seq=Ie,j.sourceDB.activeTasks.remove(pe)}catch(ue){j.sourceDB.activeTasks.remove(pe,ue)}}function q(j,H,G){G.group_level===0&&delete G.group_level;let fe=G.group||G.group_level,pe=n(j.reduceFun),de=[],Ae=isNaN(G.group_level)?Number.POSITIVE_INFINITY:G.group_level;for(let Ie of H){let ve=de[de.length-1],Te=fe?Ie.key:null;if(fe&&Array.isArray(Te)&&(Te=Te.slice(0,Ae)),ve&&Hr(ve.groupKey,Te)===0){ve.keys.push([Ie.key,Ie.id]),ve.values.push(Ie.value);continue}de.push({keys:[[Ie.key,Ie.id]],values:[Ie.value],groupKey:Te})}H=[];for(let Ie of de){let ve=a(j.sourceDB,pe,Ie.keys,Ie.values,!1);if(ve.error&&ve.error instanceof Cl)throw ve.error;H.push({value:ve.error?null:ve.output,key:Ie.groupKey})}return{rows:o(H,G.limit,G.skip)}}function W(j,H){return xg($(j),function(){return O(j,H)})()}async function O(j,H){let G,fe=j.reduceFun&&H.reduce!==!1,pe=H.skip||0;typeof H.keys<"u"&&!H.keys.length&&(H.limit=0,delete H.keys);async function de(Ie){Ie.include_docs=!0;let ve=await j.db.allDocs(Ie);return G=ve.total_rows,ve.rows.map(function(Te){if("value"in Te.doc&&typeof Te.doc.value=="object"&&Te.doc.value!==null){let Ge=Object.keys(Te.doc.value).sort(),at=["id","key","value"];if(!(Ge<at||Ge>at))return Te.doc.value}let Me=IR(Te.doc._id);return{key:Me[0],id:Me[1],value:"value"in Te.doc?Te.doc.value:null}})}async function Ae(Ie){let ve;if(fe?ve=q(j,Ie,H):typeof H.keys>"u"?ve={total_rows:G,offset:pe,rows:Ie}:ve={total_rows:G,offset:pe,rows:o(Ie,H.limit,H.skip)},H.update_seq&&(ve.update_seq=j.seq),H.include_docs){let Te=xw(Ie.map(l)),Me=await j.sourceDB.allDocs({keys:Te,include_docs:!0,conflicts:H.conflicts,attachments:H.attachments,binary:H.binary}),Ge=new Map;for(let at of Me.rows)Ge.set(at.id,at.doc);for(let at of Ie){let ft=l(at),V=Ge.get(ft);V&&(at.doc=V)}}return ve}if(typeof H.keys<"u"){let ve=H.keys.map(function(Ge){let at={startkey:us([Ge]),endkey:us([Ge,{}])};return H.update_seq&&(at.update_seq=!0),de(at)}),Me=(await Promise.all(ve)).flat();return Ae(Me)}else{let Ie={descending:H.descending};H.update_seq&&(Ie.update_seq=!0);let ve,Te;if("start_key"in H&&(ve=H.start_key),"startkey"in H&&(ve=H.startkey),"end_key"in H&&(Te=H.end_key),"endkey"in H&&(Te=H.endkey),typeof ve<"u"&&(Ie.startkey=H.descending?us([ve,{}]):us([ve])),typeof Te<"u"){let Ge=H.inclusive_end!==!1;H.descending&&(Ge=!Ge),Ie.endkey=us(Ge?[Te,{}]:[Te])}if(typeof H.key<"u"){let Ge=us([H.key]),at=us([H.key,{}]);Ie.descending?(Ie.endkey=Ge,Ie.startkey=at):(Ie.startkey=Ge,Ie.endkey=at)}fe||(typeof H.limit=="number"&&(Ie.limit=H.limit),Ie.skip=pe);let Me=await de(Ie);return Ae(Me)}}async function re(j){return(await j.fetch("_view_cleanup",{headers:new _l({"Content-Type":"application/json"}),method:"POST"})).json()}async function le(j){try{let H=await j.get("_local/"+e),G=new Map;for(let ve of Object.keys(H.views)){let Te=Cg(ve),Me="_design/"+Te[0],Ge=Te[1],at=G.get(Me);at||(at=new Set,G.set(Me,at)),at.add(Ge)}let fe={keys:Eg(G),include_docs:!0},pe=await j.allDocs(fe),de={};for(let ve of pe.rows){let Te=ve.key.substring(8);for(let Me of G.get(ve.key)){let Ge=Te+"/"+Me;H.views[Ge]||(Ge=Me);let at=Object.keys(H.views[Ge]),ft=ve.doc&&ve.doc.views&&ve.doc.views[Me];for(let V of at)de[V]=de[V]||ft}}let Ie=Object.keys(de).filter(function(ve){return!de[ve]}).map(function(ve){return xg($(ve),function(){return new j.constructor(ve,j.__opts).destroy()})()});return Promise.all(Ie).then(function(){return{ok:!0}})}catch(H){if(H.status===404)return{ok:!0};throw H}}async function ie(j,H,G){if(typeof j._query=="function")return I(j,H,G);if(Us(j))return w(j,H,G);let fe={changes_batch_size:j.__opts.view_update_changes_batch_size||MO};if(typeof H!="string")return N(G,H),Lw.add(async function(){let pe=await Sw(j,"temp_view/temp_view",H.map,H.reduce,!0,e);return PO(Z(pe,fe).then(function(){return W(pe,G)}),function(){return pe.db.destroy()})}),Lw.finish();{let pe=H,de=Cg(pe),Ae=de[0],Ie=de[1],ve=await j.get("_design/"+Ae);if(H=ve.views&&ve.views[Ie],!H)throw new El(`ddoc ${ve._id} has no view named ${Ie}`);r(ve,Ie),N(G,H);let Te=await Sw(j,pe,H.map,H.reduce,!1,e);return G.stale==="ok"||G.stale==="update_after"?(G.stale==="update_after"&&Fs(function(){Z(Te,fe)}),W(Te,G)):(await Z(Te,fe),W(Te,G))}}function oe(j,H,G){let fe=this;typeof H=="function"&&(G=H,H={}),H=H?b(H):{},typeof j=="function"&&(j={map:j});let pe=Promise.resolve().then(function(){return ie(fe,j,H)});return fx(pe,G),pe}let Q=NO(function(){let j=this;return typeof j._viewCleanup=="function"?S(j):Us(j)?re(j):le(j)});return{query:oe,viewCleanup:Q}}var Sg={_sum:function(e,t){return zg(t)},_count:function(e,t){return t.length},_stats:function(e,t){function n(r){for(var i=0,a=0,s=r.length;a<s;a++){var o=r[a];i+=o*o}return i}return{sum:zg(t),min:Math.min.apply(null,t),max:Math.max.apply(null,t),count:t.length,sumsqr:n(t)}}};function FO(e){if(/^_sum/.test(e))return Sg._sum;if(/^_count/.test(e))return Sg._count;if(/^_stats/.test(e))return Sg._stats;if(/^_/.test(e))throw new Error(e+" is not a supported reduce function.")}function VO(e,t){if(typeof e=="function"&&e.length===2){var n=e;return function(r){return n(r,t)}}else return hx(e.toString(),t)}function zO(e){var t=e.toString(),n=FO(t);return n||hx(t)}function HO(e,t){var n=e.views&&e.views[t];if(typeof n.map!="string")throw new El("ddoc "+e._id+" has no string view named "+t+", instead found object of type: "+typeof n.map)}var $O="mrviews",dx=qO($O,VO,zO,HO);function jO(e,t,n){return dx.query.call(this,e,t,n)}function KO(e){return dx.viewCleanup.call(this,e)}var WO={query:jO,viewCleanup:KO};function GO(e,t,n){return!e._attachments||!e._attachments[n]||e._attachments[n].digest!==t._attachments[n].digest}function Aw(e,t){var n=Object.keys(t._attachments);return Promise.all(n.map(function(r){return e.getAttachment(t._id,r,{rev:t._rev})}))}function ZO(e,t,n){var r=Us(t)&&!Us(e),i=Object.keys(n._attachments);return r?e.get(n._id).then(function(a){return Promise.all(i.map(function(s){return GO(a,n,s)?t.getAttachment(n._id,s):e.getAttachment(a._id,s)}))}).catch(function(a){if(a.status!==404)throw a;return Aw(t,n)}):Aw(t,n)}function XO(e){var t=[];return Object.keys(e).forEach(function(n){var r=e[n].missing;r.forEach(function(i){t.push({id:n,rev:i})})}),{docs:t,revs:!0,latest:!0}}function YO(e,t,n,r){n=ui(n);var i=[],a=!0;function s(){var l=XO(n);if(l.docs.length)return e.bulkGet(l).then(function(c){if(r.cancelled)throw new Error("cancelled");return Promise.all(c.results.map(function(h){return Promise.all(h.docs.map(function(p){var E=p.ok;return p.error&&(a=!1),!E||!E._attachments?E:ZO(t,e,E).then(b=>{var C=Object.keys(E._attachments);return b.forEach(function(N,w){var I=E._attachments[C[w]];delete I.stub,delete I.length,I.data=N}),E})}))})).then(function(h){i=i.concat(h.flat().filter(Boolean))})})}function o(){return{ok:a,docs:i}}return Promise.resolve().then(s).then(o)}var Iw=1,Nw="pouchdb",QO=5,os=0;function Hg(e,t,n,r,i){return e.get(t).catch(function(a){if(a.status===404)return(e.adapter==="http"||e.adapter==="https")&&kg(404,"PouchDB is just checking if a remote checkpoint exists."),{session_id:r,_id:t,history:[],replicator:Nw,version:Iw};throw a}).then(function(a){if(!i.cancelled&&a.last_seq!==n)return a.history=(a.history||[]).filter(function(s){return s.session_id!==r}),a.history.unshift({last_seq:n,session_id:r}),a.history=a.history.slice(0,QO),a.version=Iw,a.replicator=Nw,a.session_id=r,a.last_seq=n,e.put(a).catch(function(s){if(s.status===409)return Hg(e,t,n,r,i);throw s})})}var Ih=class{constructor(t,n,r,i,a={writeSourceCheckpoint:!0,writeTargetCheckpoint:!0}){this.src=t,this.target=n,this.id=r,this.returnValue=i,this.opts=a,typeof a.writeSourceCheckpoint>"u"&&(a.writeSourceCheckpoint=!0),typeof a.writeTargetCheckpoint>"u"&&(a.writeTargetCheckpoint=!0)}writeCheckpoint(t,n){var r=this;return this.updateTarget(t,n).then(function(){return r.updateSource(t,n)})}updateTarget(t,n){return this.opts.writeTargetCheckpoint?Hg(this.target,this.id,t,n,this.returnValue):Promise.resolve(!0)}updateSource(t,n){if(this.opts.writeSourceCheckpoint){var r=this;return Hg(this.src,this.id,t,n,this.returnValue).catch(function(i){if(Dw(i))return r.opts.writeSourceCheckpoint=!1,!0;throw i})}else return Promise.resolve(!0)}getCheckpoint(){var t=this;return!t.opts.writeSourceCheckpoint&&!t.opts.writeTargetCheckpoint?Promise.resolve(os):t.opts&&t.opts.writeSourceCheckpoint&&!t.opts.writeTargetCheckpoint?t.src.get(t.id).then(function(n){return n.last_seq||os}).catch(function(n){if(n.status!==404)throw n;return os}):t.target.get(t.id).then(function(n){return t.opts&&t.opts.writeTargetCheckpoint&&!t.opts.writeSourceCheckpoint?n.last_seq||os:t.src.get(t.id).then(function(r){if(n.version!==r.version)return os;var i;return n.version?i=n.version.toString():i="undefined",i in Pw?Pw[i](n,r):os},function(r){if(r.status===404&&n.last_seq)return t.src.put({_id:t.id,last_seq:os}).then(function(){return os},function(i){return Dw(i)?(t.opts.writeSourceCheckpoint=!1,n.last_seq):os});throw r})}).catch(function(n){if(n.status!==404)throw n;return os})}},Pw={undefined:function(e,t){return Hr(e.last_seq,t.last_seq)===0?t.last_seq:0},1:function(e,t){return JO(t,e).last_seq}};function JO(e,t){return e.session_id===t.session_id?{last_seq:e.last_seq,history:e.history}:px(e.history,t.history)}function px(e,t){var n=e[0],r=e.slice(1),i=t[0],a=t.slice(1);if(!n||t.length===0)return{last_seq:os,history:[]};var s=n.session_id;if($g(s,t))return{last_seq:n.last_seq,history:e};var o=i.session_id;return $g(o,r)?{last_seq:i.last_seq,history:a}:px(r,a)}function $g(e,t){var n=t[0],r=t.slice(1);return!e||t.length===0?!1:e===n.session_id?!0:$g(e,r)}function Dw(e){return typeof e.status=="number"&&Math.floor(e.status/100)===4}function gx(e,t,n,r,i){return this instanceof Ih?gx:new Ih(e,t,n,r,i)}var Rw=0;function eB(e,t,n,r){if(e.retry===!1){t.emit("error",n),t.removeAllListeners();return}if(typeof e.back_off_function!="function"&&(e.back_off_function=TD),t.emit("requestError",n),t.state==="active"||t.state==="pending"){t.emit("paused",n),t.state="stopped";var i=function(){e.current_back_off=Rw},a=function(){t.removeListener("active",i)};t.once("paused",a),t.once("active",i)}e.current_back_off=e.current_back_off||Rw,e.current_back_off=e.back_off_function(e.current_back_off),setTimeout(r,e.current_back_off)}function tB(e){return Object.keys(e).sort(Hr).reduce(function(t,n){return t[n]=e[n],t},{})}function nB(e,t,n){var r=n.doc_ids?n.doc_ids.sort(Hr):"",i=n.filter?n.filter.toString():"",a="",s="",o="";return n.selector&&(o=JSON.stringify(n.selector)),n.filter&&n.query_params&&(a=JSON.stringify(tB(n.query_params))),n.filter&&n.filter==="_view"&&(s=n.view.toString()),Promise.all([e.id(),t.id()]).then(function(l){var c=l[0]+l[1]+i+s+a+r+o;return new Promise(function(h){im(c,h)})}).then(function(l){return l=l.replace(/\//g,".").replace(/\+/g,"_"),"_local/"+l})}function mx(e,t,n,r,i){var a=[],s,o={seq:0,changes:[],docs:[]},l=!1,c=!1,h=!1,p=0,E=0,b=n.continuous||n.live||!1,C=n.batch_size||100,N=n.batches_limit||10,w=n.style||"all_docs",I=!1,S=n.doc_ids,_=n.selector,P,v,y=[],$=Dh(),Z;i=i||{ok:!0,start_time:new Date().toISOString(),docs_read:0,docs_written:0,doc_write_failures:0,errors:[]};var ce={};r.ready(e,t);function q(){return v?Promise.resolve():nB(e,t,n).then(function(ve){P=ve;var Te={};n.checkpoint===!1?Te={writeSourceCheckpoint:!1,writeTargetCheckpoint:!1}:n.checkpoint==="source"?Te={writeSourceCheckpoint:!0,writeTargetCheckpoint:!1}:n.checkpoint==="target"?Te={writeSourceCheckpoint:!1,writeTargetCheckpoint:!0}:Te={writeSourceCheckpoint:!0,writeTargetCheckpoint:!0},v=new gx(e,t,P,r,Te)})}function W(){if(y=[],s.docs.length!==0){var ve=s.docs,Te={timeout:n.timeout};return t.bulkDocs({docs:ve,new_edits:!1},Te).then(function(Me){if(r.cancelled)throw j(),new Error("cancelled");var Ge=Object.create(null);Me.forEach(function(ft){ft.error&&(Ge[ft.id]=ft)});var at=Object.keys(Ge).length;i.doc_write_failures+=at,i.docs_written+=ve.length-at,ve.forEach(function(ft){var V=Ge[ft._id];if(V){i.errors.push(V);var Se=(V.name||"").toLowerCase();if(Se==="unauthorized"||Se==="forbidden")r.emit("denied",ui(V));else throw V}else y.push(ft)})},function(Me){throw i.doc_write_failures+=ve.length,Me})}}function O(){if(s.error)throw new Error("There was a problem getting docs.");i.last_seq=E=s.seq;var ve=ui(i);return y.length&&(ve.docs=y,typeof s.pending=="number"&&(ve.pending=s.pending,delete s.pending),r.emit("change",ve)),l=!0,e.info().then(function(Te){var Me=e.activeTasks.get(Z);if(!(!s||!Me)){var Ge=Me.completed_items||0,at=parseInt(Te.update_seq,10)-parseInt(p,10);e.activeTasks.update(Z,{completed_items:Ge+s.changes.length,total_items:at})}}),v.writeCheckpoint(s.seq,$).then(function(){if(r.emit("checkpoint",{checkpoint:s.seq}),l=!1,r.cancelled)throw j(),new Error("cancelled");s=void 0,pe()}).catch(function(Te){throw Ie(Te),Te})}function re(){var ve={};return s.changes.forEach(function(Te){r.emit("checkpoint",{revs_diff:Te}),Te.id!=="_user/"&&(ve[Te.id]=Te.changes.map(function(Me){return Me.rev}))}),t.revsDiff(ve).then(function(Te){if(r.cancelled)throw j(),new Error("cancelled");s.diffs=Te})}function le(){return YO(e,t,s.diffs,r).then(function(ve){s.error=!ve.ok,ve.docs.forEach(function(Te){delete s.diffs[Te._id],i.docs_read++,s.docs.push(Te)})})}function ie(){if(!(r.cancelled||s)){if(a.length===0){oe(!0);return}s=a.shift(),r.emit("checkpoint",{start_next_batch:s.seq}),re().then(le).then(W).then(O).then(ie).catch(function(ve){Q("batch processing terminated with error",ve)})}}function oe(ve){if(o.changes.length===0){a.length===0&&!s&&((b&&ce.live||c)&&(r.state="pending",r.emit("paused")),c&&j());return}(ve||c||o.changes.length>=C)&&(a.push(o),o={seq:0,changes:[],docs:[]},(r.state==="pending"||r.state==="stopped")&&(r.state="active",r.emit("active")),ie())}function Q(ve,Te){h||(Te.message||(Te.message=ve),i.ok=!1,i.status="aborting",a=[],o={seq:0,changes:[],docs:[]},j(Te))}function j(ve){if(!h&&!(r.cancelled&&(i.status="cancelled",l)))if(i.status=i.status||"complete",i.end_time=new Date().toISOString(),i.last_seq=E,h=!0,e.activeTasks.remove(Z,ve),ve){ve=tn(ve),ve.result=i;var Te=(ve.name||"").toLowerCase();Te==="unauthorized"||Te==="forbidden"?(r.emit("error",ve),r.removeAllListeners()):eB(n,r,ve,function(){mx(e,t,n,r)})}else r.emit("complete",i),r.removeAllListeners()}function H(ve,Te,Me){if(r.cancelled)return j();typeof Te=="number"&&(o.pending=Te);var Ge=Yg(n)(ve);if(!Ge){var at=e.activeTasks.get(Z);if(at){var ft=at.completed_items||0;e.activeTasks.update(Z,{completed_items:++ft})}return}o.seq=ve.seq||Me,o.changes.push(ve),r.emit("checkpoint",{pending_batch:o.seq}),Fs(function(){oe(a.length===0&&ce.live)})}function G(ve){if(I=!1,r.cancelled)return j();if(ve.results.length>0)ce.since=ve.results[ve.results.length-1].seq,pe(),oe(!0);else{var Te=function(){b?(ce.live=!0,pe()):c=!0,oe(!0)};!s&&ve.results.length===0?(l=!0,v.writeCheckpoint(ve.last_seq,$).then(function(){if(l=!1,i.last_seq=E=ve.last_seq,r.cancelled)throw j(),new Error("cancelled");Te()}).catch(Ie)):Te()}}function fe(ve){if(I=!1,r.cancelled)return j();Q("changes rejected",ve)}function pe(){if(!(!I&&!c&&a.length<N))return;I=!0;function ve(){Me.cancel()}function Te(){r.removeListener("cancel",ve)}r._changes&&(r.removeListener("cancel",r._abortChanges),r._changes.cancel()),r.once("cancel",ve);var Me=e.changes(ce).on("change",H);Me.then(Te,Te),Me.then(G).catch(fe),n.retry&&(r._changes=Me,r._abortChanges=ve)}function de(ve){return e.info().then(function(Te){var Me=typeof n.since>"u"?parseInt(Te.update_seq,10)-parseInt(ve,10):parseInt(Te.update_seq,10);return Z=e.activeTasks.add({name:`${b?"continuous ":""}replication from ${Te.db_name}`,total_items:Me}),ve})}function Ae(){q().then(function(){if(r.cancelled){j();return}return v.getCheckpoint().then(de).then(function(ve){E=ve,p=ve,ce={since:E,limit:C,batch_size:C,style:w,doc_ids:S,selector:_,return_docs:!0},n.filter&&(typeof n.filter!="string"?ce.include_docs=!0:ce.filter=n.filter),"heartbeat"in n&&(ce.heartbeat=n.heartbeat),"timeout"in n&&(ce.timeout=n.timeout),n.query_params&&(ce.query_params=n.query_params),n.view&&(ce.view=n.view),pe()})}).catch(function(ve){Q("getCheckpoint rejected with ",ve)})}function Ie(ve){l=!1,Q("writeCheckpoint completed with error",ve)}if(r.cancelled){j();return}r._addedListeners||(r.once("cancel",j),typeof n.complete=="function"&&(r.once("error",n.complete),r.once("complete",function(ve){n.complete(null,ve)})),r._addedListeners=!0),typeof n.since>"u"?Ae():q().then(function(){return l=!0,v.writeCheckpoint(n.since,$)}).then(function(){if(l=!1,r.cancelled){j();return}E=n.since,Ae()}).catch(Ie)}var jg=class extends qs.default{constructor(){super(),this.cancelled=!1,this.state="pending";let t=new Promise((n,r)=>{this.once("complete",n),this.once("error",r)});this.then=function(n,r){return t.then(n,r)},this.catch=function(n){return t.catch(n)},this.catch(function(){})}cancel(){this.cancelled=!0,this.state="cancelled",this.emit("cancel")}ready(t,n){if(this._readyCalled)return;this._readyCalled=!0;let r=()=>{this.cancel()};t.once("destroyed",r),n.once("destroyed",r);function i(){t.removeListener("destroyed",r),n.removeListener("destroyed",r)}this.once("complete",i),this.once("error",i)}};function Nh(e,t){var n=t.PouchConstructor;return typeof e=="string"?new n(e,t):e}function Kg(e,t,n,r){if(typeof n=="function"&&(r=n,n={}),typeof n>"u"&&(n={}),n.doc_ids&&!Array.isArray(n.doc_ids))throw tn(Ph,"`doc_ids` filter parameter is not a list.");n.complete=r,n=ui(n),n.continuous=n.continuous||n.live,n.retry="retry"in n?n.retry:!1,n.PouchConstructor=n.PouchConstructor||this;var i=new jg(n),a=Nh(e,n),s=Nh(t,n);return mx(a,s,n,i),i}function rB(e,t,n,r){return typeof n=="function"&&(r=n,n={}),typeof n>"u"&&(n={}),n=ui(n),n.PouchConstructor=n.PouchConstructor||this,e=Nh(e,n),t=Nh(t,n),new Wg(e,t,n,r)}var Wg=class extends qs.default{constructor(t,n,r,i){super(),this.canceled=!1;let a=r.push?Object.assign({},r,r.push):r,s=r.pull?Object.assign({},r,r.pull):r;this.push=Kg(t,n,a),this.pull=Kg(n,t,s),this.pushPaused=!0,this.pullPaused=!0;let o=_=>{this.emit("change",{direction:"pull",change:_})},l=_=>{this.emit("change",{direction:"push",change:_})},c=_=>{this.emit("denied",{direction:"push",doc:_})},h=_=>{this.emit("denied",{direction:"pull",doc:_})},p=()=>{this.pushPaused=!0,this.pullPaused&&this.emit("paused")},E=()=>{this.pullPaused=!0,this.pushPaused&&this.emit("paused")},b=()=>{this.pushPaused=!1,this.pullPaused&&this.emit("active",{direction:"push"})},C=()=>{this.pullPaused=!1,this.pushPaused&&this.emit("active",{direction:"pull"})},N={},w=_=>(P,v)=>{(P==="change"&&(v===o||v===l)||P==="denied"&&(v===h||v===c)||P==="paused"&&(v===E||v===p)||P==="active"&&(v===C||v===b))&&(P in N||(N[P]={}),N[P][_]=!0,Object.keys(N[P]).length===2&&this.removeAllListeners(P))};r.live&&(this.push.on("complete",this.pull.cancel.bind(this.pull)),this.pull.on("complete",this.push.cancel.bind(this.push)));function I(_,P,v){_.listeners(P).indexOf(v)==-1&&_.on(P,v)}this.on("newListener",function(_){_==="change"?(I(this.pull,"change",o),I(this.push,"change",l)):_==="denied"?(I(this.pull,"denied",h),I(this.push,"denied",c)):_==="active"?(I(this.pull,"active",C),I(this.push,"active",b)):_==="paused"&&(I(this.pull,"paused",E),I(this.push,"paused",p))}),this.on("removeListener",function(_){_==="change"?(this.pull.removeListener("change",o),this.push.removeListener("change",l)):_==="denied"?(this.pull.removeListener("denied",h),this.push.removeListener("denied",c)):_==="active"?(this.pull.removeListener("active",C),this.push.removeListener("active",b)):_==="paused"&&(this.pull.removeListener("paused",E),this.push.removeListener("paused",p))}),this.pull.on("removeListener",w("pull")),this.push.on("removeListener",w("push"));let S=Promise.all([this.push,this.pull]).then(_=>{let P={push:_[0],pull:_[1]};return this.emit("complete",P),i&&i(null,P),this.removeAllListeners(),P},_=>{if(this.cancel(),i?i(_):this.emit("error",_),this.removeAllListeners(),i)throw _});this.then=function(_,P){return S.then(_,P)},this.catch=function(_){return S.catch(_)}}cancel(){this.canceled||(this.canceled=!0,this.push.cancel(),this.pull.cancel())}};function iB(e){e.replicate=Kg,e.sync=rB,Object.defineProperty(e.prototype,"replicate",{get:function(){var t=this;return typeof this.replicateMethods>"u"&&(this.replicateMethods={from:function(n,r,i){return t.constructor.replicate(n,t,r,i)},to:function(n,r,i){return t.constructor.replicate(t,n,r,i)}}),this.replicateMethods}}),e.prototype.sync=function(t,n,r){return this.constructor.sync(this,t,n,r)}}on.plugin(xO).plugin(IO).plugin(WO).plugin(iB);var vx=on;var Qx=Yt(Zx()),vm=new vx("enketodb"),dM={ignoreAttributes:!1,attributeNamePrefix:"@_"},pM=new Qx.XMLParser(dM),gM=e=>{if(!e)throw new Error("El XML es undefined o null. No se puede convertir a JSON.");console.log("XML que se intenta convertir:",e);try{return pM.parse(e)}catch(t){throw console.error("Error convirtiendo XML a JSON:",t),t}},wm=(e,t=[])=>{for(let n in e){let r=e[n];typeof r=="object"&&r!==null&&!Array.isArray(r)?"@_hxl"in r&&"#text"in r?t.push({label:n,value:r["#text"],hxl:r["@_hxl"]}):wm(r,t):Array.isArray(r)&&r.forEach(i=>{typeof i=="object"&&i!==null&&wm(i,t)})}return t.sort((n,r)=>{if(n.hxl==="avatar")return-1;if(r.hxl==="avatar")return 1;let i=!isNaN(Number(n.hxl)),a=!isNaN(Number(r.hxl));return i&&a?Number(n.hxl)-Number(r.hxl):i?-1:a?1:n.hxl==="location"?-1:r.hxl==="location"||n.hxl==="attachment"?1:r.hxl==="attachment"?-1:0}),t},mM=async()=>{if(navigator.storage&&navigator.storage.persist){let e=await navigator.storage.persist();console.log(e?"Persistencia activada":"Persistencia no garantizada")}else console.warn("API de persistencia no soportada")};mM();var vM=async(e,t=3)=>{if(!e.xml)throw new Error("El campo 'xml' en el registro es undefined o null.");for(let n=0;n<t;n++)try{e._id||(e._id=e.instanceId),e._id.startsWith("_")&&(e._id=`id_${e._id.slice(1)}`),e.jsonData=gM(e.xml),delete e.xml;let r=wm(e.jsonData),i=r.map(s=>String(s.value).toLowerCase());if(e.hxlFields=r,e.searchTextTokens=i,e.files&&e.files.length>0){e._attachments=e._attachments||{};for(let s of e.files){let o=s.item;e._attachments[s.name]={content_type:o.type,data:o}}delete e.files}let a=await vm.get(e._id).catch(s=>null);return a&&(e._rev=a._rev),await vm.put(e),console.log("Record guardado en PouchDB"),e}catch(r){if(r.status===409){let i=await vm.get(e._id);e._rev=i._rev}else throw console.error("Error guardando el record en PouchDB:",r),r}throw new Error("No se pudo guardar el registro despu\xE9s de varios intentos.")};var yM=new DOMParser,jn,xm,Jx=!1,Oh="enketo",ym=4,_m=4;function _M({failSilently:e}={}){return bM().then(()=>ym!==_m?Promise.resolve():new Promise((t,n)=>{let r=indexedDB.open(Oh,ym);r.addEventListener("blocked",n),r.addEventListener("success",t),r.addEventListener("error",n),r.addEventListener("upgradeneeded",i=>{let{transaction:a}=r;try{if(i.oldVersion!==_m-1||i.newVersion!==_m)return a.abort(),t(i);let s=a.objectStore("records");s.createIndex("recordName",["enketoId","name"],{unique:!0}),s.deleteIndex("name")}catch(s){n(s)}})})).then(()=>Yx.default.open({server:Oh,version:ym,schema:{surveys:{key:{keyPath:"enketoId",autoIncrement:!1},indexes:{enketoId:{unique:!0}}},resources:{key:{autoIncrement:!1},indexes:{key:{unique:!0}}},records:{key:{keyPath:"instanceId"},indexes:{recordName:{keyPath:["enketoId","name"],unique:!0},instanceId:{unique:!0},enketoId:{unique:!1}}},lastSavedRecords:{key:{keyPath:"_enketoId",autoIncrement:!1}},files:{key:{autoIncrement:!1},indexes:{key:{unique:!0}}},properties:{key:{keyPath:"name",autoIncrement:!1},indexes:{key:{unique:!0}}},data:{key:{keyPath:"enketoId",autoIncrement:!1},indexes:{enketoId:{unique:!0}}}}})).then(t=>{jn=t}).then(wM).then(EM).then(()=>{Jx=!0}).catch(t=>{if(!e)throw console.error("store initialization error",t),typeof t=="string"?t=new Error(t):t instanceof Error||(t=new Error(Be("store.error.notavailable",{error:JSON.stringify(t)}))),t.status=500,t})}function bM(){let e;return new Promise((t,n)=>{typeof indexedDB=="object"?t():(Ec.os.ios?e=new Error(Be("store.error.iosusesafari")):e=new Error(Be("store.error.notsupported")),e.status=500,n(e))})}function wM(){return $o.update({name:"testWrite",value:new Date().getTime()})}function xM(){let e=new Blob(['<a id="a"><b id="b">hey!</b></a>'],{type:"text/xml"});return $o.update({name:"testBlobWrite",value:e})}function EM(){return xM().then(()=>{xm=!1}).catch(()=>{console.log("This browser is not able to store blobs directly, so blobs will be Base64 encoded"),xm=!0})}var $o={get(e){return jn.properties.get(e).then(Vs)},update(e){return jn.properties.update(e).then(Vs)},removeAll(){return Rc("properties")},getSurveyStats(e){return jn.properties.get(`${e}:stats`)},incrementRecordCount(e){return $o.getSurveyStats(e.enketoId).then(t=>(t||(t={name:`${e.enketoId}:stats`}),t.recordCount||(t.recordCount=0),++t.recordCount,$o.update(t)))},addSubmittedInstanceId(e){return $o.getSurveyStats(e.enketoId).then(t=>(t||(t={name:`${e.enketoId}:stats`}),t.submitted||(t.submitted=[]),t.submitted.push(e.instanceId),$o.update(t)))}},Sl={get(e){return jn.surveys.get(e).then(Vs).then(bm)},set(e){if(!e.form||!e.model||!e.enketoId||!e.hash)throw new Error("Survey not complete");return jn.surveys.add(Xx(e)).then(Vs).then(t=>{let n=[];return e.binaryDefaults&&e.binaryDefaults.forEach(r=>{n.push(Sl.resource.update(e.enketoId,r))}),Promise.all(n).then(()=>t)}).then(bm)},update(e){let t=[],n=[];if(!e.form||!e.model||!e.enketoId)throw new Error("Survey not complete");let r=[].concat(e.resources||[]).map(a=>a.url),i=[].concat(e.binaryDefaults||[]).map(a=>a.url);return jn.surveys.get(e.enketoId).then(a=>{e.resources&&(t=(a.resources||[]).filter(o=>r.indexOf(o)<0)),e.binaryDefaults&&(n=(a.binaryDefaults||[]).filter(o=>i.indexOf(o)<0));let s={...Xx(e)};return e.resources&&(s.resources=r),e.binaryDefaults&&(s.binaryDefaults=i),jn.surveys.update(s)}).then(Vs).then(a=>{let s=[];return(e.resources||[]).concat(e.binaryDefaults||[]).forEach(o=>{s.push(Sl.resource.update(e.enketoId,o))}),t.concat(n).forEach(o=>{s.push(Sl.resource.remove(e.enketoId,o).then(()=>null))}),Promise.all(s).then(o=>(e.resources&&(a.resources=o.filter(l=>l!=null)),bm(a)))})},remove(e){let t,n=[];return Sl.get(e).then(r=>(t=r.resources||[],t.forEach(i=>{n.push(Sl.resource.remove(e,i))}),n.push(jn.surveys.remove(e)),Promise.all(n))).then(()=>{})},removeAll(){return Rc("surveys").then(()=>Rc("resources"))},resource:{get(e,t){return tE("resources",e,t)},update(e,t){return nE("resources",e,t)},remove(e,t){return jn.resources.remove(`${e}:${t}`)}}},eE={get(e){return jn.data.get(e).then(Vs)},update(e){if(!e.enketoId)throw new Error("Dynamic data object not complete");return jn.data.update(e).then(Vs)},remove(e){return eE.remove(e)}},Tl={get(e){let t=[];return jn.records.get(e).then(Vs).then(n=>n&&(n.files.forEach(r=>{t.push(Tl.file.get(n.instanceId,r))}),Promise.all(t).then(r=>(r=r.filter(i=>i),n.files=r||[],n))))},getAll(e,t){return e?jn.records.query("enketoId").only(e).execute().then(n=>(t&&(n=n.filter(r=>!r.draft)),n.sort((r,i)=>r.updated-i.updated))):Promise.reject(new Error("No Enketo ID provided"))},set(e){let t;return!e.instanceId||!e.enketoId||!e.name||!e.xml?Promise.reject(new Error("Record not complete")):(e.files=e.files||[],t=e.files.map(n=>n.name),jn.records.add({instanceId:e.instanceId,enketoId:e.enketoId,name:e.name,xml:e.xml,files:t,created:new Date().getTime(),updated:new Date().getTime(),draft:e.draft}).then(Vs).then($o.incrementRecordCount).then(()=>e.files.reduce((n,r)=>n.then(()=>r&&r.item&&r.item instanceof Blob?Tl.file.update(e.instanceId,r):Promise.resolve()),Promise.resolve())).then(()=>vM(e)).then(()=>e))},update(e){let t,n=[];if(!e.instanceId||!e.enketoId||!e.name||!e.xml)throw new Error("Record not complete");return e.files=e.files||[],t=e.files.map(r=>r.name),jn.records.get(e.instanceId).then(r=>(r&&r.files&&(n=r.files.filter(i=>t.indexOf(i)<0)),jn.records.update({instanceId:e.instanceId,enketoId:e.enketoId,name:e.name,xml:e.xml,files:t,created:r&&r.created?r.created:new Date().getTime(),updated:new Date().getTime(),draft:e.draft}))).then(()=>e.files.reduce((r,i)=>r.then(()=>i&&i.item&&i.item instanceof Blob?Tl.file.update(e.instanceId,i):Promise.resolve()),Promise.resolve()).then(()=>n.reduce((r,i)=>r.then(()=>Tl.file.remove(e.instanceId,i)),Promise.resolve())).then(()=>e))},remove(e){return jn.records.get(e).then(Vs).then(t=>{let n=[];return(t&&t.files?t.files:[]).forEach(i=>{n.push(Tl.file.remove(e,i))}),n.push(jn.records.remove(e)),Promise.all(n)})},removeAll(){return Rc("records").then(()=>Rc("files"))},file:{get(e,t){return tE("files",e,t)},update(e,t){return nE("files",e,t)},remove(e,t){return jn.files.remove(`${e}:${t}`)}}};function Vs(e){return Array.isArray(e)?Promise.resolve(e[0]):Promise.resolve(e)}function Xx(e){if(e)return e.externalData&&(e.externalData=e.externalData.map(t=>(t.xml instanceof XMLDocument&&(t.xml=new XMLSerializer().serializeToString(t.xml.documentElement,"text/xml")),t))),ss.serializeEncryptedSurvey(e)}function bm(e){if(e)return e.externalData&&(e.externalData=e.externalData.map(t=>(typeof t.xml=="string"&&(t.xml=yM.parseFromString(t.xml,"text/xml")),t))),ss.deserializeEncryptedSurvey(e)}function tE(e,t,n){let r,i={};return new Promise((a,s)=>{if(e==="resources"||e==="files")return r=e==="resources"?"url":"name",jn[e].get(`${t}:${n}`).then(o=>{i[r]=n,o instanceof Blob?(i.item=o,a(i)):typeof o=="string"?pa.dataUriToBlob(o).then(l=>{i.item=l,a(i)}):a(void 0)}).catch(s);s(new Error("Unknown table or missing id or key."))})}function nE(e,t,n){let r,i,a;return e==="resources"||e==="files"?(i=e==="resources"?"url":"name",t&&n&&n.item instanceof Blob&&n[i]?(a=n[i],n.key=`${t}:${n[i]}`,delete n[i],xm?pa.blobToDataUri(n.item).then(s=>(n.item=s,jn[e].update(n).then(()=>(n[i]=a,delete n.key,n)))):jn[e].update(n).then(()=>(n[i]=a,delete n.key,n))):(r=new Error("DataError. File not complete or ID not provided."),r.name="DataError",Promise.reject(r))):Promise.reject(new Error("Unknown table or missing ID or key."))}function CM(){let e;return new Promise((t,n)=>{try{jn.close(Oh)}catch(r){console.log("Database has probably been removed already. Doing nothing.",r),t()}e=indexedDB.deleteDatabase(Oh),e.onsuccess=()=>{console.log("Deleted database successfully"),t()},e.onerror=r=>{n(r)},e.onblocked=r=>{n(r)}})}function Rc(e){return jn[e].clear()}var SM={resources(){jn.resources.query().all().execute().done(e=>{console.log(`${e.length} resources found`),e.forEach(t=>{t instanceof Blob?console.log(t.type,t.size,URL.createObjectURL(t)):console.log("resource string with length ",t.length,"found")})})},surveys(){jn.surveys.query().all().execute().done(e=>{console.log(`${e.length} surveys found`),e.forEach(t=>{console.log("survey",t)})})},records(){jn.records.query().all().execute().done(e=>{console.log(`${e.length} records found`),e.forEach(t=>{console.log("survey",t)})})},files(){jn.files.query().all().execute().done(e=>{console.log(`${e.length} resources found`),e.forEach(t=>{t instanceof Blob?console.log(t.type,t.size,URL.createObjectURL(t)):console.log("resource string with length ",t.length,"found")})})}},gn={init:_M,get available(){return Jx},property:$o,survey:Sl,dynamicData:eE,record:Tl,flush:CM,dump:SM,get lastSavedRecords(){return jn.lastSavedRecords}};var Bh="jr://instance/last-saved",iE=e=>Array.isArray(e.externalData)&&e.externalData.some(t=>(t==null?void 0:t.src)===Bh),Oc=e=>lt.type==="other"&&gn.available&&iE(e)&&!ss.isEncryptionEnabled(e),Ll=e=>!gn.available||lt.type!=="other"?Promise.resolve():gn.lastSavedRecords.get(e).then(t=>{if(t!=null)return delete t._enketoId,Object.assign(t,{enketoId:e})}),Mh=async e=>{gn.available&&await gn.lastSavedRecords.remove(e)},rE=new DOMParser,TM=(e,t)=>{if(t==null||!Oc(e)){let r=rE.parseFromString(e.model,"text/xml").querySelector("model > instance > *").cloneNode(!0),i=document.implementation.createDocument(null,"",null);return i.appendChild(r),i}return rE.parseFromString(t.xml,"text/xml")},jo=(e,t)=>{if(!iE(e))return e;let n=TM(e,t),r=e.externalData.map(i=>(i==null?void 0:i.src)===Bh?{...i,xml:n}:i);return{...e,externalData:r}},Uh=(e,t)=>{if(!gn.available||lt.type!=="other")return Promise.resolve({survey:jo(e)});let n=Oc(e)?{...t,_enketoId:t.enketoId}:null;return(n==null?Mh(e.enketoId):gn.lastSavedRecords.update(n)).then(([r]=[])=>({survey:jo(e,r),lastSavedRecord:r}))};var aE="Feature",qh="Point",Cm="LineString",LM="Polygon",kM=new Set([qh,Cm,LM]),AM="Only Points, LineStrings and Polygons are currently supported",Em=e=>{if(!Array.isArray(e)||e.length!==2||typeof e[0]!="number"||typeof e[1]!="number")throw new TypeError(`Only ${qh}s with latitude and longitude are currently supported`)},IM=e=>{let[t,n]=e;return`${n} ${t} 0 0`},NM=(e,t)=>{let n=e.createElement("geometry"),r;return t.type===qh?r=[t.coordinates]:t.type===Cm?r=t.coordinates:r=t.coordinates[0],n.textContent=r.map(IM).join("; "),n},PM=e=>{if(e==null||typeof e!="object"||!kM.has(e.type)||!Array.isArray(e.coordinates))throw new TypeError(AM)},DM=e=>{var t;PM(e),e.type===qh?Em(e.coordinates):e.type===Cm?e.coordinates.forEach(Em):Array.isArray(e.coordinates[0])&&((t=e.coordinates[0])==null||t.forEach(Em))},RM=e=>{if(e==null)throw new TypeError("Feature object expected");let{geometry:t,type:n}=e;if(n!==aE||t==null)throw new TypeError(`Item of type ${n} found but expected item of type ${aE}`);DM(t)},OM="FeatureCollection",BM=e=>{let{type:t,features:n}=e!=null?e:{};if(t!==OM||!Array.isArray(n))throw new TypeError("GeoJSON file must be a FeatureCollection");n.forEach(RM)},MM=new DOMParser,sE=e=>{BM(e);let t=MM.parseFromString("<root/>","text/xml"),n=t.documentElement;return e.features.forEach(({id:r,geometry:i,properties:a})=>{let{id:s,...o}=a!=null?a:{},l=Object.entries(o),c=r!=null?r:s;c!==void 0&&l.push(["id",c]);let h=t.createElement("item");h.append(NM(t,i)),l.forEach(([p,E])=>{let b=t.createElement(p);b.textContent=String(E!=null?E:""),h.append(b)}),n.append(h)}),t};var Ko=(e,t={},n={})=>{let r=e.querySelectorAll('[href^="jr:"], [src^="jr:"], [data-offline-src^="jr:"]'),i=e instanceof HTMLElement;if(r.forEach(a=>{var p;let s=a.hasAttribute("href")?"href":"src",o=i?a.dataset.offlineSrc:null,c=((p=o!=null?o:a[s])!=null?p:a.getAttribute(s)).replace(/.*\/([^/]+)$/,"$1"),h=t[c];h!=null&&(o!=null?a.dataset.offlineSrc=h:i?a[s]=h:a.setAttribute(s,h))}),i){let a=t["form_logo.png"];if(a!=null){let s=e.querySelector(".form-logo");if(s.firstElementChild==null){let o=document.createElement("img");n.isOffline?o.dataset.offlineSrc=a:o.src=a,o.alt="form logo",s.append(o)}}}},Sm=(e,t={})=>{let n=null;Object.defineProperty(e.model,"rootElement",{get(){return n},set(r){r!==n&&(n=r,Ko(n,t))}})};var kl=new DOMParser,UM=new XMLSerializer,qM=`${lt.basePath}/connection`,FM=`${lt.basePath}/transform/xform/hash/${lt.enketoId}`,VM=lt.enketoId?`${lt.basePath}/submission/${lt.enketoId}`:null,zM=lt.enketoId?`${lt.basePath}/submission/max-size/${lt.enketoId}`:`${lt.basePath}/submission/max-size/?xformUrl=${encodeURIComponent(lt.xformUrl)}`;function HM(){return fetch(qM,{cache:"no-cache",headers:{"Content-Type":"text/plain"}}).then(e=>e.text()).then(e=>/connected/.test(e)).catch(()=>!1)}function uE(e){let t;try{t=WM(e)}catch(i){return Promise.reject(i)}let n=Promise.resolve([]),r;return t.reduce((i,a)=>i.then(s=>KM(a).then(o=>(s.push(o),s))),n).then(i=>{console.log("results of all batches submitted",i),r=i[0]}).then(()=>r)}var $M=uE,jM=(e,t)=>Uh(e,t).then(()=>uE(t));function KM(e){let t=lt.enketoId?`${lt.basePath}/submission/${lt.enketoId}${Tm()}`:null,n=new AbortController;return setTimeout(()=>{n.abort()},lt.timeout),fetch(t,{method:"POST",cache:"no-cache",headers:{"X-OpenRosa-Version":"1.0","X-OpenRosa-Deprecated-Id":e.deprecatedId,"X-OpenRosa-Instance-Id":e.instanceId},signal:n.signal,body:e.formData}).then(r=>{let i={status:r.status,failedFiles:e.failedFiles?e.failedFiles:void 0};if(r.status===400)return r.text().then(a=>{let s=kl.parseFromString(a,"text/xml");if(s){let o=s.querySelector("OpenRosaResponse > message");o&&(i.message=o.textContent)}throw i});if(r.status!==201&&r.status!==202)throw i;return i}).catch(r=>{throw r.name==="AbortError"&&typeof r.status>"u"&&(r.status=408),r})}function WM(e){let t=kl.parseFromString(e.xml,"text/xml"),n=Array.prototype.slice.call(t.querySelectorAll('[type="file"]')).map(E=>(E.removeAttribute("type"),E)),r=UM.serializeToString(t.documentElement),i=new Blob([r],{type:"text/xml"}),a=e.files||[],s=[],o=[],l=[],c=[[]],h=[],{maxSize:p}=lt;return n.forEach(E=>{let b,{nodeName:C}=E,N=E.textContent;a.some(w=>w.name===N?(b=w,!0):!1),b?(l.push({nodeName:C,file:b}),s.push(b.size)):(o.push(N),console.error(`Error occured when trying to retrieve ${N}`))}),l.length>0&&(c=GM(s,p)),console.log(`splitting record into ${c.length} batches to reduce submission size `,c),c.forEach(E=>{let b=new FormData;b.append("xml_submission_file",i,"xml_submission_file");let C=(document.cookie.split("; ").find(w=>w.startsWith(lt.csrfCookieName))||"").split("=")[1];C&&b.append(lt.csrfCookieName,C);let N={instanceId:e.instanceId,deprecatedId:e.deprecatedId,formData:b,failedFiles:o};E.forEach(w=>{N.formData.append(l[w].file.name,l[w].file,l[w].file.name)}),h.push(N)}),h}function GM(e,t){let n,r,i,a,s=[],o=[];for(n=0;n<e.length;n++)s.push({index:n,size:e[n]});for(;s.length>0;){if(i=[s[0].index],a=s[0].size,s[0].size<t)for(n=1;n<s.length;n++)a+s[n].size<t&&(i.push(s[n].index),a+=s[n].size);for(o.push(i),n=0;n<s.length;n++)for(r=0;r<i.length;r++)s[n].index===i[r]&&s.splice(n,1)}return o}function ZM(e){return fetch(zM).then(t=>t.json()).then(t=>{t&&t.maxSize&&!isNaN(t.maxSize)?e.maxSize=Number(t.maxSize):console.error("Error retrieving maximum submission size. Unexpected response: ",t)}).catch(()=>{}).then(()=>e)}var XM=(e,t)=>{let n=t?`/${t}`:"";return`${e}/transform/xform${n}${Tm()}`},YM=async(e,t,n={})=>{Ko(t,e.media);let r=[];return[...t.querySelectorAll("instance[id][src]")].map(a=>({id:a.id,src:a.getAttribute("src")})).forEach((a,s)=>{let{src:o}=a;if(o===Bh){r.push(Promise.resolve(a));return}let l=async()=>{try{let c=await n3(o,e.languageMap);return{...a,xml:c}}catch(c){if(r.splice(s,1),n.isPreview)return;throw c}};r.push(l())}),Promise.all(r)},QM=async e=>{let{transform:t}=await import("./transformer-ZDAQRDQF.js"),r=await(await fetch(e,{credentials:"same-origin",mode:"cors"})).text(),i=await t({xform:r}),a=Object.fromEntries([{docStr:i.form,mimeType:"text/html"},{docStr:i.model,mimeType:"text/xml"}].flatMap(({docStr:s,mimeType:o})=>[...kl.parseFromString(s,o).querySelectorAll('[src^="jr:"]:not(instance[src="jr://instance/last-saved"]), a[href^="jr:"]')].map(h=>{var b;return[((b=h.getAttribute("href"))!=null?b:h.getAttribute("src")).replace(/.*\/([^/]+$)/,"$1"),"data:,"]})));return{...i,media:a}};async function JM(e){let t;try{if(e.xformUrl){if(!e.isPreview||e.enketoId!=null)throw new Error("Unexpected preview request");t=await QM(e.xformUrl)}else{let o=XM(lt.basePath,e.enketoId);t=await lE(o,{xformUrl:e.xformUrl})}}catch(o){throw o.status===void 0&&(o.message=Be("error.formloadfailed")),o}let n=kl.parseFromString(t.model,"text/xml"),r=n.querySelector("submission[base64RsaPublicKey]"),i={...t,enketoId:e.enketoId,theme:t.theme||pa.getThemeFromFormStr(t.form)||lt.defaultTheme};r!=null&&(i=ss.setEncryptionEnabled(i));let a=await YM(i,n,{isPreview:e.isPreview});Object.assign(i,{externalData:a});let s=e.isPreview?null:await Ll(i.enketoId);return jo(i,s)}function lE(e,t={}){return cE(e,"POST",t)}function e3(e,t={}){return cE(e,"GET",t)}function cE(e,t="POST",n={}){let r={method:t,headers:{"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json"}};if(t==="GET"||t==="HEAD"){if(Object.keys(n).length){let i=new URL(e,location.href),a=i.search.slice(1);i.search=`?${a}${a?"&":""}${oE(n)}`,e=i.href}}else r.body=oE(n);return fetch(e,r).then(fE).then(i=>i.json())}function fE(e){return e.ok?e:e.json().then(t=>{throw typeof t.status>"u"&&(t.status=e.status),typeof t.message>"u"&&(t.status=e.statusText),t})}function oE(e){return Object.keys(e).filter(t=>e[t]).map(t=>`${encodeURIComponent(t)}=${encodeURIComponent(e[t])}`).join("&")}function t3(e){return fetch(e).then(fE).then(t=>t.blob()).then(t=>({url:e,item:t})).catch(t=>{let n=new Error(t.message||Be("error.loadfailed",{resource:e,interpolation:{escapeValue:!1}}));throw n.status=t.status,n})}function n3(e,t){let n;return fetch(e).then(r=>{var i,a;return n=(a=(i=r.headers.get("Content-Type"))==null?void 0:i.split(";")[0])!=null?a:"",(n===""||String(n)==="null")&&e.endsWith(".geojson")&&(n="application/geo+json"),n==="application/geo+json"?r.json():r.text()}).then(r=>{let i;switch(n){case"application/geo+json":i=sE(r);break;case"text/csv":i=pa.csvToXml(r,t);break;case"text/xml":i=kl.parseFromString(r,n);break;default:console.error("External data not served with expected Content-Type.",n),i=kl.parseFromString(r,"text/xml")}return i&&i.querySelector("parsererror")&&n!=="text/csv"&&(console.log("Failed to parse external data as XML, am going to try as CSV"),i=pa.csvToXml(r,t)),i}).catch(r=>{let i=!r.message||/fetch/.test(r.message)?Be("error.dataloadfailed",{filename:e.replace(/.*\//,"")}):r.message;throw new Error(i)})}function r3(e){return fetch(e).then(t=>t.text()).then(t=>{let n=t.match(/version\s?=\s?'([^\n]+)'/);return n?n[1]:"unknown"})}function i3(){return lE(FM+Tm()).then(e=>e.hash)}function a3(e){return e3(VM,e)}function Tm(){return pa.getQueryString([lt.languageOverrideParameter,lt.submissionParameter])}var ya={uploadRecord:jM,uploadQueuedRecord:$M,getMaximumSubmissionSize:ZM,getOnlineStatus:HM,getFormParts:JM,getFormPartsHash:i3,getMediaFile:t3,getExistingInstance:a3,getServiceWorkerVersion:r3};var hE={init(){if(!this.form)throw new Error("Preload module not correctly instantiated with form property.");this.form.view.html.querySelectorAll("input[data-preload], select[data-preload], textarea[data-preload]").forEach(e=>{let t=this.form.input.getProps(e),n=e.dataset&&e.dataset.preload?e.dataset.preload.toLowerCase():void 0,r=e.dataset&&e.dataset.preloadParams?e.dataset.preloadParams.toLowerCase():void 0;if(typeof this[n]<"u"){let i=this.form.model.node(t.path,t.index);if(i.getElements().length){let a=i.getVal(),s=this[n]({param:r,curVal:a,dataNode:i});i.setVal(s,t.xmlType)}}else console.warn(`Preload "${n}" not supported. May or may not be a big deal.`)})},timestamp(e){let t,n=this;return e.param==="start"?e.curVal.length>0?e.curVal:this.form.model.evaluate("now()","string"):e.param==="end"?(this.form.view.html.addEventListener(Xe.BeforeSave().type,()=>{t=n.form.model.evaluate("now()","string"),e.dataNode.setVal(t,"datetime")}),this.form.model.evaluate("now()","string")):"error - unknown timestamp parameter"},date(e){let t,n,r,i;return e.curVal.length===0?(t=new Date(this.form.model.evaluate("today()","string")),n=t.getFullYear().toString().padStart(4,"0"),r=(t.getMonth()+1).toString().padStart(2,"0"),i=t.getDate().toString().padStart(2,"0"),`${n}-${r}-${i}`):e.curVal},property(e){let t;return e.curVal.length===0?(t=this.form.model.node(`instance("__session")/session/context/${e.param}`),t.getElements().length?t.getVal():`no ${e.param} property in enketo`):e.curVal},context(e){return e.curVal.length===0?e.param==="application"?"enketo":`${e.param} not supported in enketo`:e.curVal},patient(e){return e.curVal.length===0?"patient preload item not supported in enketo":e.curVal},user(e){return e.curVal.length===0?"user preload item not supported in enketo yet":e.curVal},uid(e){return e.curVal.length===0?this.form.model.evaluate('concat("uuid:", uuid())',"string"):e.curVal}};var Bc=e=>new Promise((t,n)=>{navigator.geolocation.getCurrentPosition(r=>{let{latitude:i,longitude:a,altitude:s,accuracy:o}=r.coords,l=Math.round(i*1e6)/1e6,c=Math.round(a*1e6)/1e6,h=`${l} ${c} ${s||"0.0"} ${o||"0.0"}`;t({geopoint:h,lat:l,lng:c,position:r})},n,e)});var dE={form:null,preInitRelevance:new WeakMap,init(){if(!this.form)throw new Error("Calculation module not correctly instantiated with form property.");if(!this.form.features.calculate){this.update=()=>{},this.performAction=()=>{};return}this.initialized=!1,this.preInitRelevance=new WeakMap,this.update(),this.initialized=!0},update(e={},t="",n=!1){let r;e.relevantPath?r=this.form.getRelatedNodes("data-calculate",`[name^="${e.relevantPath}/"]${t}`).add(this.form.getRelatedNodes("data-calculate",`[name="${e.relevantPath}"]${t}`)).add(this.form.getRelatedNodes("data-calculate",`[data-name="${e.relevantPath}"]${t}`)).get():r=this.form.getRelatedNodes("data-calculate",t,e).get(),r.forEach(i=>{let a=this.form.input.getName(i),s=this.form.model.node(a),o=s.getElements(),l={name:a,expr:this.form.input.getCalculation(i),dataType:this.form.input.getXmlType(i),relevantExpr:this.form.input.getRelevant(i),index:0,dataNodesObj:s};if(o.length>1)if(e.repeatPath&&a.indexOf(`${e.repeatPath}/`)!==-1&&o[e.repeatIndex]){let c=a.lastIndexOf("/")!==-1?a.substring(a.lastIndexOf("/")+1):a,h=this.form.model.node(e.repeatPath,e.repeatIndex).getElement().querySelectorAll(c),p=Array.from(h).filter(E=>o.includes(E))[0];l.index=o.indexOf(p),l.index>-1&&this._updateCalc(i,l,n)}else if(i.type==="hidden")o.forEach((c,h)=>{let p=Object.create(l);p.index=h,this._updateCalc(i,p,n)});else{let c=Uo(i.closest(".or-repeat"),".or-repeat");c.length===o.length&&(l.index=c.indexOf(i.closest(".or-repeat")),this._updateCalc(i,l,n))}else o.length===1&&this._updateCalc(i,l,n)})},_getNodesForAction(e,t){if(t.type===new Xe.InstanceFirstLoad().type)return[...this.form.view.html.querySelectorAll(`.non-form-control-action[data-${e}].odk-instance-first-load`)].concat(this.form.filterRadioCheckSiblings([...this.form.view.html.querySelectorAll(`.form-control-action[data-${e}].odk-instance-first-load`)]));if(t.type===new Xe.NewRepeat().type)return this.form.getRelatedNodes(`data-${e}`,".non-form-control-action.odk-new-repeat",t.detail).get().concat(this.form.getRelatedNodes(`data-${e}`,".form-control-action.odk-new-repeat",t.detail).get());if(t.type===new Xe.XFormsValueChanged().type){let n=t.target.closest(".question");return n?[...n.querySelectorAll(".xforms-value-changed")].filter(r=>r.dataset[e]!=null):[]}return[]},performAction(e,t){if(!t)return;this._getNodesForAction(e,t).forEach(r=>{let i=this.form.input.getName(r),a=this.form.model.node(i),s=a.getElements(),o={name:i,dataType:this.form.input.getXmlType(r),relevantExpr:this.form.input.getRelevant(r),index:t.detail&&typeof t.detail.repeatIndex<"u"?t.detail.repeatIndex:0,dataNodesObj:a,type:e};if(e==="setvalue"&&(o.expr=r.dataset.setvalue),s.length>1&&t.type!==new Xe.NewRepeat().type&&t.type!==new Xe.XFormsValueChanged().type)s.forEach((l,c)=>{let h=Object.create(o),p=r;h.index=c,this._updateCalc(p,h)});else if(t.type===new Xe.XFormsValueChanged().type){let l=this.form.input.find(o.name,o.index);l||(o.index=0,l=this.form.input.find(o.name,0)),this._updateCalc(l,o)}else if(s[o.index]){let l=r;this._updateCalc(l,o)}else console.error("performAction called for node that does not exist in model.")})},_updateCalc(e,t,n){if(!n&&t.type!=="setvalue"&&t.type!=="setgeopoint"&&this._hasNeverBeenRelevant(e,t)&&!this._isRelevant(t))return;if(t.type==="setgeopoint"){Bc({enableHighAccuracy:!0,maximumAge:0}).then(({geopoint:o})=>{this._updateValue(e,t,o)}).catch(()=>{this._updateValue(e,t,"")});return}let r=n?!this._isRelevant(t):!1,i=this.form.replaceChoiceNameFn(t.expr,"string",t.name,t.index),a=!r&&i?this.form.model.evaluate(i,"string",t.name,t.index):"";this._updateValue(e,t,a)},_updateValue(e,t,n){t.dataNodesObj.setIndex(t.index);let r=t.dataNodesObj.getVal();t.dataNodesObj.setVal(n,t.dataType);let i=t.dataNodesObj.getVal();e&&r!==i&&(this.form.input.setVal(e,i),e.type!=="hidden"&&Gn.validateContinuously===!0&&this.form.validateInput(e))},_isRelevant(e){if(!this.form.features.relevant)return!0;let{groups:t,repeats:n}=this.form.collections,{relevantExpr:r,name:i,index:a}=e,s=r?this.form.model.evaluate(r,"boolean",i,a):!0,o=null;if(s){let l=i.split("/"),c=l.splice(0,l.length-1).join("/");a===0?o=t.getElementByRef(c):o=n.getElementByRef(c,a)||t.getElementByRef(c,a);let h=o?[o].concat(qo(o,".or-group[data-relevant], .or-group-data[data-relevant]")):[];h.length&&(s=h.map(p=>{let b=p.classList.contains("or-repeat")?n:t,C=this.form.input.getName(p),N=b.refIndexOf(p,C);return{element:p,context:C,index:N,expr:this.form.input.getRelevant(p)}}).concat([{context:e.name,index:e.index,expr:e.relevantExpr}]).every(p=>{let{element:E,expr:b,context:C,index:N}=p,w=this.preInitRelevance.get(E);if(w!=null&&!this.initialized)return w;let I=p.expr?this.form.model.evaluate(b,"boolean",C,N):!0;return E!=null&&!this.initialized&&this.preInitRelevance.set(E,I),I}))}return s},_hasNeverBeenRelevant(e,t){if(!this.form.features.relevant)return!1;if(e&&e.closest(".pre-init"))return!0;let{name:n,index:r}=t,i=n.split("/"),a=i.splice(0,i.length-1).join("/"),s=null,{groups:o,repeats:l}=this.form.collections;return r===0?s=o.getElementByRef(a):s=l.getElementByRef(a,r)||o.getElementByRef(a,r),s?s.closest(".pre-init")!=null:!1}};var aS=Yt(rS());var sS=3*1e3,oS=20*60*1e3,Vc;function x8(e){return gn.init().then(()=>uS(e)).then(t=>t||E8(e)).then(C8).then(S8)}function uS({enketoId:e}){return gn.survey.get(e).then(t=>Promise.all([t,Ll(e)])).then(([t,n])=>t==null?t:jo(t,n))}function lS(e){return Promise.resolve(L8(e)).then(k8)}var Fm=e=>(Oc(e)?Promise.resolve(e):Mh(e.enketoId)).then(()=>gn.survey.update(e));function E8(e){return ya.getFormParts(e).then(lS).then(gn.survey.set)}function cS(e){return gn.survey.remove(e.enketoId)}function C8(e){return e&&gn.dynamicData.get(e.enketoId).then(t=>{let n={enketoId:e.enketoId};return(0,aS.default)(n,t),lt.submissionParameter&&lt.submissionParameter.name?lt.submissionParameter.value?n.submissionParameter=lt.submissionParameter:lt.submissionParameter.value===""?delete n.submissionParameter:t&&t.submissionParameter&&t.submissionParameter.value&&(lt.submissionParameter.value=t.submissionParameter.value):delete n.submissionParameter,typeof lt.parentWindowOrigin<"u"?lt.parentWindowOrigin?n.parentWindowOrigin=lt.parentWindowOrigin:lt.parentWindowOrigin===""?delete n.parentWindowOrigin:t&&t.parentWindowOrigin&&(lt.parentWindowOrigin=t.parentWindowOrigin):delete n.parentWindowOrigin,gn.dynamicData.update(n)}).then(()=>e)}function S8(e){return Vc=e.hash,setTimeout(()=>{iS(e)},sS),setInterval(()=>{iS(e)},oS),Promise.resolve(e)}function T8(e){return document.querySelector("form.or").addEventListener(Br.AddRepeat().type,t=>{fS(e,[t.target])}),Promise.resolve(e)}function L8(e){return e.form=e.form.replace(/(src="[^"]*")/g,'data-offline-$1 src=""'),e}function k8(e){let t=new DOMParser().parseFromString(e.model,"text/xml");Ko(t,e.media);let n=[...t.querySelectorAll("instance:first-child > * *[src]")],r=[];return e.binaryDefaults=[],n.forEach(i=>{r.push(ya.getMediaFile(i.getAttribute("src")).then(a=>{a.url=i.textContent,e.binaryDefaults.push(a),i.removeAttribute("src")}).catch(a=>{console.error(a)}))}),Promise.all(r).then(()=>(e.model=new XMLSerializer().serializeToString(t),e))}function A8(e){return e.maxSize?Promise.resolve(e):ya.getMaximumSubmissionSize(e).then(t=>t.maxSize?(delete t.binaryDefaults,Fm(t)):t)}function I8(e){let t=document.querySelector("form.or");Ko(t,e.media,{isOffline:!0});let n=[t],r=document.querySelector(".form-header");return r&&n.push(r),fS(e,n).then(i=>i?(e.resources=i.filter(a=>!!a),console.log("Survey media has been updated. Updating cache."),Fm(e)):e).then(T8).catch(i=>(console.error("updateMedia failed",i),e))}function N8(e){return e.then(t=>t,t=>{console.error(t)})}function fS(e,t){let n=!1,r=[];return P8(t).forEach(i=>{let a=i[0].dataset.offlineSrc,s=gn.survey.resource.get(e.enketoId,a).then(async o=>{if(!o||!o.item){let l=await ya.getMediaFile(a);return n=!0,l}return o}).then(o=>{if(o.item){let l=URL.createObjectURL(o.item);i.forEach(c=>{c.src=l})}return o}).catch(o=>{console.error(o)});r.push(s)}),Promise.all(r.map(N8)).then(i=>{if(n)return i})}function P8(e){let t=[],n={},r=[];return e.forEach(i=>r=r.concat([...i.querySelectorAll("[data-offline-src]")])),r.forEach(i=>{if(!n[i.dataset.offlineSrc]){let a=i.dataset.offlineSrc,s=r.filter(o=>{if(o.dataset.offlineSrc===a)return!0});n[a]=!0,t.push(s)}}),t}function iS(e){return console.log("Checking for survey update..."),ya.getFormPartsHash(e).then(t=>{if(Vc===t)console.log("Cached survey is up to date!",Vc);else return console.log("Cached survey is outdated! old:",Vc,"new:",t),ya.getFormParts(e).then(n=>(n.resources=void 0,n)).then(lS).then(Fm).then(n=>{if(Vc=n.hash,!Oc(n))return Mh(n.enketoId)}).then(()=>{console.log("Survey is now updated in the store. Need to refresh."),document.dispatchEvent(Br.FormUpdated())})}).catch(t=>{t.status===404||t.status===401?cS(e).then(()=>{console.log(`survey ${e.enketoId} removed from storage`,t.status)}).catch(n=>{console.error("an error occurred when attempting to remove the survey from storage",n)}):console.log("Could not obtain latest survey or hash from server or failed to save it. Probably offline.",t.stack)})}function D8(){return gn.survey.removeAll().then(()=>{console.log("Done! The form cache is empty now. (Records have not been removed)")})}var zc={init:x8,get:uS,updateMaxSubmissionSize:A8,updateMedia:I8,remove:cS,flush:D8,CACHE_UPDATE_INITIAL_DELAY:sS,CACHE_UPDATE_INTERVAL:oS};var Yo=Yt(gr());var jh=Yt(su());var Hc={form:null,getWrapNode(e){return e.closest(".question, .calculation, .setvalue, .setgeopoint")},getWrapNodes(e){let t=[];return e.forEach(n=>{let r=this.getWrapNode(n);t.includes(r)||t.push(r)}),t},getProps(e){return{path:this.getName(e),ind:this.getIndex(e),inputType:this.getInputType(e),xmlType:this.getXmlType(e),constraint:this.getConstraint(e),calculation:this.getCalculation(e),relevant:this.getRelevant(e),readonly:this.getReadonly(e),val:this.getVal(e),required:this.getRequired(e),enabled:this.isEnabled(e),multiple:this.isMultiple(e)}},getInputType(e){let t=e.nodeName.toLowerCase();return t==="input"?e.dataset.drawing?"drawing":e.type?e.type==="text"&&this.getXmlType(e)==="date"?"date":e.type==="text"&&this.getXmlType(e)==="datetime"?"datetime-local":e.type.toLowerCase():console.error("<input> node has no type"):t==="select"?"select":t==="textarea"?"textarea":t==="fieldset"||t==="section"?"fieldset":console.error("unexpected input node type provided")},getConstraint(e){return e.dataset.constraint},getRequired(e){let{required:t}=e.dataset;if(t!=null&&!bu(e,".or-appearance-label",".or"))return t},getRelevant(e){return e.dataset.relevant},getReadonly(e){return e.matches("[readonly]")},getCalculation(e){return e.dataset.calculate},getXmlType(e){return(e.dataset.typeXml||"string").toLowerCase()},getName(e){let t=e.dataset.name||e.getAttribute("name");return t||console.error("input node has no name"),t},getIndex(e){return this.form.repeats.getIndex(e.closest(".or-repeat"))},isMultiple(e){return this.getInputType(e)==="checkbox"||e.multiple},isEnabled(e){return!(e.disabled||bu(e,".disabled",".or"))},getVal(e){let t="",n=this.getInputType(e),r=this.getName(e);switch(n){case"radio":{let i=this.getWrapNode(e).querySelector(`input[type="radio"][data-name="${r}"]:checked`);t=i?i.value:"";break}case"checkbox":{t=[...this.getWrapNode(e).querySelectorAll(`input[type="checkbox"][name="${r}"]:checked`)].map(i=>i.value);break}case"select":{if(this.isMultiple(e))t=[...e.querySelectorAll("option:checked")].map(i=>i.value);else{let i=e.querySelector("option:checked");t=i?i.value:""}break}case"datetime-local":{if(e.value){let i=e.value.split("T")[1].length===5?`${e.value}:00`:e.value;t=i+(0,jh.getTimezoneOffsetAsTime)(new Date(i))}break}default:t=e.value}return t||""},find(e,t=0){var n;return(n=this.form.collections.refTargetContainers.getElementByRef(e,t))==null?void 0:n.querySelector(".ref-target:not(.ignore)")},setVal(e,t,n=Xe.InputUpdate()){let r,i=this.getInputType(e),a=this.getXmlType(e),s=this.getWrapNode(e),o=this.getName(e);if(i==="radio")r=s.querySelectorAll(`[data-name="${o}"]:not(.ignore)`);else{if(r=s.querySelectorAll(`[name="${o}"]:not(.ignore)`),i==="file"&&t)return e.setAttribute("data-loaded-file-name",t),!1;if((a==="date"||a==="datetime")&&t&&(t=Xr[a.toLowerCase()].convert(t),a==="datetime")){t=(0,jh.toISOLocalString)(new Date(t));let l=t.split("T"),c=l[0],h=l&&l[1]?l[1].split(/[Z\-+]/)[0]:"00:00";t=`${c}T${h}`}if(i==="time"&&/(\+|-)/.test(t)){let l=new Date().toLocaleDateString("en",{month:"short",day:"numeric",year:"numeric"}),c=t.replace(/(\d\d:\d\d:\d\d)(\.\d{1,3})(\s?((\+|-)\d\d))(:)?(\d\d)?/,"$1 GMT$3$7"),h=new Date(`${l} ${c}`);h.toString()!=="Invalid Date"?t=`${h.getHours().toString().padStart(2,"0")}:${h.getMinutes().toString().padStart(2,"0")}`:console.error("could not parse time:",t)}}if(this.isMultiple(e)===!0?t=t.split(" "):i==="radio"&&(t=[t]),r.length){let l=this.getVal(e);if(l===void 0||l.toString()!==t.toString()){switch(i){case"radio":{if(t.toString()==="")r.forEach(c=>c.checked=!1);else{let c=this.getWrapNode(e).querySelector(`input[type="radio"][data-name="${o}"][value="${CSS.escape(t)}"]`);c&&(c.checked=!0)}break}case"checkbox":{this.getWrapNode(e).querySelectorAll(`input[type="checkbox"][name="${o}"]`).forEach(c=>c.checked=t.includes(c.value));break}case"select":{if(this.isMultiple(e))e.querySelectorAll("option").forEach(c=>c.selected=t.includes(c.value));else{let c=e.querySelector(`option[value="${CSS.escape(t)}"]`);c?c.selected=!0:e.querySelectorAll("option").forEach(h=>h.selected=!1)}break}default:e.value=t}n&&(r[0].dispatchEvent(n),n.type===Xe.InputUpdate().type&&r[0].dispatchEvent(Xe.XFormsValueChanged()))}}return r[0]},clear(e,t,n){(e.matches(".question")?[e]:e.querySelectorAll(".question")).forEach(i=>{let a=i.querySelector("input:not(.ignore), select:not(.ignore), textarea:not(.ignore)");a&&(this.setVal(a,"",t),n&&a.dispatchEvent(n))})},validate(e){return this.form.validateInput(e)}};var zs=Yt(gr());function Vm(e){return/^\s*instance\(.+\)/.test(e)?/\[.+\]/.test(e)?/\[\d+\]/.test(e):!0:!1}var hS={form:null,init(){if(!this.form)throw new Error("Itemset module not correctly instantiated with form property.");if(!this.form.features.itemset){this.update=()=>{};return}this.update()},update(e={}){let t=this,n={},r;if(e.relevantPath?r=this.form.getRelatedNodes("data-items-path",".itemset-template").get().filter(a=>a.querySelector(`[type="checkbox"][name^="${e.relevantPath}/"]`)||a.querySelector(`[type="radio"][data-name^="${e.relevantPath}/"]`)||a.parentElement.matches(`select[name^="${e.relevantPath}/"]`)||a.parentElement.parentElement.querySelector(`input[list][name^="${e.relevantPath}/"]`)||a.querySelector(`[type="checkbox"][name="${e.relevantPath}"]`)||a.querySelector(`[type="radio"][data-name="${e.relevantPath}"]`)||a.parentElement.matches(`select[name="${e.relevantPath}"]`)||a.parentElement.parentElement.querySelector(`input[list][name="${e.relevantPath}"]`)):r=this.form.getRelatedNodes("data-items-path",".itemset-template",e).get(),r.length===0)return;let i=[];r.forEach(a=>{if(a.closest(".disabled"))return;let s=a.parentElement,o=s.classList.contains("repeat-shared-datalist-itemset")||s.parentElement.matches(".or-repeat-info"),l={},c={},h=si.get(a,"items")||{},p=a.nodeName.toLowerCase(),E=a.parentElement.matches("select, datalist")?a.parentElement:null,b;if(p==="label"){let oe=Ds(a,"input");[].slice.call(oe.attributes).forEach(Q=>{l[Q.name]=Q.value}),b=oe.classList.contains("ignore")?Rr(oe.closest(".option-wrapper"),"input.rank"):oe}else E&&E.nodeName.toLowerCase()==="select"?(b=E,b.matches("[readonly]")&&(l.disabled="disabled")):E&&E.nodeName.toLowerCase()==="datalist"&&(o?b=t.form.view.html.querySelector(`input[name="${E.dataset.name}"]`):b=Rr(E,"input:not(.widget)"));let C=Rr(a.closest("label, select, datalist"),".itemset-labels"),N=a.dataset.itemsPath,{labelType:w}=C.dataset,{labelRef:I}=C.dataset,S=So(I,"translate");S.length&&(I=S[0][1][0],w="langs");let{valueRef:_}=C.dataset,P=t.form.input.getName(b),v=o?0:t.form.input.getIndex(b),y=!0,$=this.form.model.evaluate(N,"nodes",P,v,y);if(c.length=$.length,c.text=$.map(oe=>oe.textContent).join(""),c.length===h.length&&c.text===h.text)return;si.put(a,"items",c);let Z=a.closest(".question, datalist");[...Z.querySelectorAll(p)].filter(oe=>oe!==a).forEach(oe=>oe.remove());let ce=Z.nextElementSibling,q=ce&&ce.matches(".or-option-translations")?ce:Z.querySelector(".or-option-translations");q&&[...q.children].forEach(oe=>oe.remove());let W=document.createDocumentFragment(),O=document.createDocumentFragment(),re=[],le=`${P}:${N}`;n[le]?(W=n[le].optionsFragment.cloneNode(!0),O=n[le].optionsTranslationsFragment.cloneNode(!0)):($.forEach(oe=>{let Q=t.getNodesFromItem(I,oe);if(!Q||!Q.length)re=[{language:"",label:"error",active:!0}];else switch(w){case"itext":re=[...C.querySelectorAll(`[data-itext-id="${Q[0].textContent}"]`)].map(G=>{let fe=G.getAttribute("lang"),pe=G.nodeName,{src:de}=G,Ae=[...G.childNodes],Ie=G.classList.contains("active"),{alt:ve}=G;return{language:fe,type:pe,contentNodes:Ae,active:Ie,src:de,alt:ve}});break;case"langs":re=Q.map(G=>{let fe=G.getAttribute("lang"),pe=!fe&&!t.form.langs.currentLanguage||fe===t.form.langs.currentLanguage;return{language:fe,type:"span",contentNodes:[...G.childNodes],active:pe}});break;default:re=[{language:"",type:"span",contentNodes:Q&&Q.length?[...Q[0].childNodes]:[],active:!0}]}let j=t.getNodeFromItem(_,oe).textContent;if((l["data-type-xml"]==="select"&&l.type==="checkbox"||E&&E.multiple)&&j.indexOf(" ")>-1&&(i[i.length]=Be("alert.valuehasspaces.multiple",{value:j})),p==="label")W.appendChild(t.createInput(l,re,j));else if(p==="option"){let G=[];re.length>1?re.forEach(fe=>{fe.active&&(G=fe.contentNodes),O.appendChild(t.createOptionTranslation(fe,j))}):G=re[0].contentNodes,W.appendChild(t.createOption(l,G,j))}}),Vm(N)&&!(b.type==="radio"&&b.closest(".or-repeat"))&&(n[le]={optionsFragment:W.cloneNode(!0),optionsTranslationsFragment:O.cloneNode(!0)})),a.parentNode.appendChild(W),q&&q.appendChild(O);let ie=t.form.model.node(P,v).getVal();ie!==""&&(b.classList.contains("rank")&&(ie=""),t.form.input.setVal(b,ie,Xe.Change())),(E||b.classList.contains("rank"))&&b.dispatchEvent(Xe.ChangeOption())}),i.length>0&&cn.alert(i.join("<br>"))},getNodesFromItem(e,t,n){if(!e)throw new Error("Error: could not query instance item, no expression provided");let r=n?9:7,i=typeof this.form.model.xml.evaluate<"u"?"evaluate":"jsEvaluate",a=this.form.model.xml[i](e,t,this.form.model.getNsResolver(),r,null),s=[];if(n)s.push(a.singleNodeValue);else for(let o=0;o<a.snapshotLength;o++)s.push(a.snapshotItem(o));return s},getNodeFromItem(e,t){let n=this.getNodesFromItem(e,t,!0);return n.length?n[0]:null},createOption(e,t,n){let r=document.createElement("option");return Object.getOwnPropertyNames(e).forEach(i=>{r.setAttribute(i,e[i])}),r.textContent=t.map(i=>i.textContent).join(""),r.value=n,r},createOptionTranslation(e,t){let n=document.createElement(e.type||"span");return e.contentNodes&&(n.classList.add("option-label"),e.contentNodes.forEach(r=>n.appendChild(r.cloneNode(!0)))),n.classList.toggle("active",e.active),e.language&&(n.lang=e.language),n.dataset.optionValue=t,e.src&&(n.src=e.src,n.alt=e.alt),n},createInput(e,t,n){let r=this,i=document.createElement("label"),a=document.createElement("input");return Object.getOwnPropertyNames(e).forEach(s=>{a.setAttribute(s,e[s])}),a.value=n,i.appendChild(a),t.forEach(s=>{i.appendChild(r.createOptionTranslation(s,n))}),i}};var zm=Gn.repeatOrdinals===!0,dS={form:null,init(){let e=this,t;if(this.staticLists=[],!this.form)throw new Error("Repeat module not correctly instantiated with form property.");if(!this.form.features.repeat){this.getIndex=()=>0,this.form.input.getIndex=()=>0;return}return this.form.features.repeatCount||(this.countUpdate=()=>{},this.updateRepeatInstancesFromCount=()=>{}),t=this.form.view.$.find(".or-repeat-info"),this.templates={},this.templateStrings={},this.optionWrapperContainers=new Set,t.siblings(".or-repeat").prepend('<span class="repeat-number"></span>').addBack().filter(function(){return this.firstChild&&this.firstChild.nodeType===3&&(this.firstChild.textContent=""),!this.querySelector(".question")}).addClass("empty"),t.filter("*:not([data-repeat-fixed]):not([data-repeat-count])").append('<button type="button" class="btn btn-default add-repeat-btn"><i class="icon icon-plus"> </i></button>').siblings(".or-repeat").append(`<div class="repeat-buttons"><button type="button" ${zm?" disabled ":" "}class="btn btn-default remove"><i class="icon icon-minus"> </i></button></div>`),this.form.model.extractFakeTemplates(t.map(function(){return this.dataset.name}).get()),t.siblings(".or-repeat").reverse().each(function(){let n=this.cloneNode(!0);e.form.langs.setFormUi(e.form.currentLanguage,n);let r=n.getAttribute("name");n.querySelector(".option-wrapper")!=null&&e.optionWrapperContainers.add(r),this.remove(),(0,zs.default)(n).removeClass("contains-current current").find(".current").removeClass("current"),e.form.input.clear(n),e.templates[r]=n,e.templateStrings[r]=n.outerHTML}),t.reverse().each(function(){(0,zs.default)(this).closest(".or-repeat").length||e.updateDefaultFirstRepeatInstance(this)}).get().forEach(e.updateViewInstancesFromModel.bind(this)),this.form.view.$.on("click","button.add-repeat-btn:enabled",function(){return e.add((0,zs.default)(this).closest(".or-repeat-info")[0]),!1}),this.form.view.$.on("click","button.remove:enabled",function(){return e.confirmDelete(this.closest(".or-repeat")),!1}),this.countUpdate(),!0},confirmDelete(e){let t=this;cn.confirm({heading:Be("confirm.repeatremove.heading"),msg:Be("confirm.repeatremove.msg")}).then(n=>{n&&t.remove((0,zs.default)(e))}).catch(console.error)},getIndex(e){if(!e)return 0;let t=e.classList.contains("or-repeat-info"),n=t?e.dataset.name:e.getAttribute("name"),r=t?this.form.collections.repeatInfos:this.form.collections.repeats;return Math.max(0,r.refIndexOf(e,n))},updateViewInstancesFromModel(e){let t=e.dataset.name,n=this.getIndex(e),r=this.form.model.getRepeatSeries(t,n),i=ll(e,".or-repeat");return r.length>i.length&&(this.add(e,r.length-i.length,"model"),ll(e,".or-repeat").reduce((a,s)=>a.concat([...s.querySelectorAll(".or-repeat-info:not([data-repeat-count])")]),[]).forEach(this.updateViewInstancesFromModel.bind(this))),r.length},updateDefaultFirstRepeatInstance(e){let t=e.dataset.name;if(!this.form.model.data.instanceStr&&!this.templates[t].classList.contains("or-appearance-minimal")){let n=this.getIndex(e);this.form.model.getRepeatSeries(t,n).length===0&&this.add(e,1,"magic"),ll(e,".or-repeat").reduce((i,a)=>i.concat([...a.querySelectorAll(".or-repeat-info:not([data-repeat-count])")]),[]).forEach(this.updateDefaultFirstRepeatInstance.bind(this))}},updateRepeatInstancesFromCount(e){let t=e.dataset.repeatCount||"";if(!t)return;let n=e.dataset.name,r=this.form.model.evaluate(t,"number",this.form.model.getRepeatCommentSelector(n),this.getIndex(e),!0);r=isNaN(r)?0:r;let i=ll(e,`.or-repeat[name="${n}"]`).length,a=r-i;if(a>0)this.add(e,a,"count");else if(a<0)for(a=Math.abs(a)>=i?-i+(zm?1:0):a;a<0;a++){let s=(0,zs.default)(e.previousElementSibling);this.remove(s)}Uo(e,".or-repeat").reduce((s,o)=>s.concat(cc(o,".or-group, .or-group-data")),[]).reduce((s,o)=>s.concat(cc(o,".or-repeat-info[data-repeat-count]")),[]).forEach(this.updateRepeatInstancesFromCount.bind(this))},countUpdate(e={}){this.form.features.repeatCount&&this.form.getRelatedNodes("data-repeat-count",".or-repeat-info",e).get().forEach(this.updateRepeatInstancesFromCount.bind(this))},add(e,t=1,n="user"){if(!e)return console.error("Nothing to clone"),!1;let r=e.dataset.name,i=ll(e,".or-repeat"),a,s=i[i.length-1];s!=null&&(a=this.getIndex(s)+1);let o=this.getIndex(e),l=this.form.model.getRepeatSeries(r,o).length,c=e.previousElementSibling,h=c&&c.classList.contains("or-repeat")?Number(c.querySelector(".repeat-number").textContent):0,p=this.templateStrings[r],E=document.createRange(),b=Array(t).fill(null).map(()=>p).join(""),C=Array.from(E.createContextualFragment(b).children);for(let[N,w]of C.entries()){this.optionWrapperContainers.has(r)&&w.querySelectorAll(".option-wrapper").forEach(this.fixRadioName),this.form.features.itemset&&this.processDatalists(w.querySelectorAll("datalist"),e),e.before(w),w.querySelector(".repeat-number").textContent=h+1,i.push(w),Yf(r),i.length>l&&(this.form.model.addRepeat(r,o),l++),a=a!=null?a:this.getIndex(w),this.form.collections.repeats.setRefIndexCache(w,a,r);let I={repeatIndex:a,repeatInstance:w,repeatInfo:e,repeatPath:r,trigger:n,cloned:!0};(n==="user"||n==="count")&&w.dispatchEvent(Xe.NewRepeat(I)),w.dispatchEvent(Xe.AddRepeat(I)),this.form.widgetsInitialized&&(this.form.widgets.init((0,zs.default)(w),this.form.options),n==="user"&&N===0&&this.form.goToTarget(w)),w.querySelectorAll(".or-repeat-info:not([data-repeat-count])").forEach(this.updateDefaultFirstRepeatInstance.bind(this)),a++,h++}return this.toggleButtons(e),!0},remove(e){let t=this,n=e.next(".or-repeat, .or-repeat-info"),r=e.attr("name"),i=this.getIndex(e[0]),a=e.siblings(".or-repeat-info")[0];e.remove(),Yf(r),t.numberRepeats(a),t.toggleButtons(a);let s=this.form.initialized?{removed:{repeatPath:r,repeatIndex:i}}:{initRepeatInfo:{repeatPath:r,repeatIndex:i}};n[0].dispatchEvent(Xe.RemoveRepeat(s)),t.form.model.node(r,i).remove()},fixRadioName(e){let t=Math.floor(Math.random()*1e7+1);e.querySelectorAll('input[type="radio"]').forEach(n=>{n.setAttribute("name",t)})},fixDatalistId(e){let t=e.id+Math.floor(Math.random()*1e7+1);e.parentNode.querySelector(`input[list="${e.id}"]`).setAttribute("list",t),e.id=t},processDatalists(e,t){e.forEach(n=>{let r=n.querySelector(".itemset-template[data-items-path]"),i=r?r.dataset.itemsPath:null;if(!Vm(i))this.fixDatalistId(n);else{let{id:a}=n,s=Rr(n,"input[list]");if(s)if(this.staticLists.includes(a))n.remove();else{let o=n.parentElement,{name:l}=s,c=o.querySelector("datalist"),h=o.removeChild(c);h.setAttribute("data-name",l);let p=o.querySelector(".or-option-translations"),E=o.removeChild(p);E.setAttribute("data-name",l);let b=o.querySelector(".itemset-labels"),C=o.removeChild(b);C.setAttribute("data-name",l);let N=document.createElement("div");N.style.display="none",N.append(h,E,C),t.append(N),n.classList.add("repeat-shared-datalist-itemset"),N.classList.add("repeat-shared-datalist-itemset-elements"),this.staticLists.push(a)}}})},toggleButtons(e){(0,zs.default)(e).siblings(".or-repeat").children(".repeat-buttons").find("button.remove").prop("disabled",!1).first().prop("disabled",zm)},numberRepeats(e){(0,zs.default)(e).siblings(".or-repeat").each((t,n)=>{(0,zs.default)(n).children(".repeat-number").text(t+1)})}};var pS={tocItems:[],_maxTocLevel:[],generateTocItems(){this.tocItems=[],[...this.form.view.$[0].querySelectorAll('.question:not([role="comment"]), .or-group')].filter(n=>!n.closest(".disabled")&&(n.matches(".question")||n.querySelector(".question:not(.disabled)")||n.matches(".or-repeat-info")&&!Rr(n,".or-repeat"))).filter(n=>!n.classList.contains("or-repeat-info")).forEach((n,r)=>{let i=qo(n,".or-group");this.tocItems.push({element:n,level:i.length,parent:i.length>0?i[i.length-1]:null,tocId:r,tocParentId:null})}),this._maxTocLevel=Math.max(...this.tocItems.map(n=>n.level));let t=this.tocItems.filter(n=>n.level<this._maxTocLevel&&n.element.classList.contains("or-group"));this.tocItems.forEach(n=>{let r=t.find(i=>n.parent===i.element);r&&(n.tocParentId=r.tocId)})},getHtmlFragment(){this.generateTocItems();let e=document.createDocumentFragment(),t=0;do{let n=this.tocItems.filter(r=>r.level===t);t===0?this._buildTocHtmlList(n,e):[...new Set(n.map(i=>i.tocParentId))].forEach(i=>{let a=document.createElement("ul"),s=n.filter(l=>l.tocParentId===i);this._buildTocHtmlList(s,a),e.querySelectorAll(`[tocId="${i}"]`)[0].appendChild(a)}),t++}while(t<=this._maxTocLevel);return e},_getTitle(e){let t,n=e.querySelector(".question-label.active");if(n)t=n.textContent;else{let r=e.querySelector(".or-hint.active");r&&(t=r.textContent)}return t=t&&t.length>20?`${t.substring(0,20)}...`:t,t},_buildTocHtmlList(e,t){e.length>0&&e.forEach(n=>{let r=document.createElement("li");if(n.element.classList.contains("or-group")){let i=document.createElement("summary");i.textContent=this._getTitle(n.element)||`[${n.tocId+1}]`;let a=document.createElement("details");a.setAttribute("tocId",n.tocId),n.tocParentId!==null&&a.setAttribute("tocParentId",n.tocParentId),a.append(i),r.append(a)}else{let i=document.createElement("a");i.textContent=this._getTitle(n.element)||`[${n.tocId+1}]`,r.setAttribute("tocId",n.tocId),r.setAttribute("role","pageLink"),n.tocParentId!==null&&r.setAttribute("tocParentId",n.tocParentId),r.append(i)}t.append(r)})}};var Hs=Yt(gr());var NH=Yt(gS()),mS={form:null,active:!1,current:null,activePages:[],init(){if(!this.form)throw new Error("Repeats module not correctly instantiated with form property.");if(this.form.features.pagination){let e=[...this.form.view.html.querySelectorAll(".question, .or-appearance-field-list")].concat([...this.form.view.html.querySelectorAll(".or-repeat.or-appearance-field-list + .or-repeat-info")]).filter(t=>!t.parentElement.closest(".or-appearance-field-list")&&!(t.matches(".question")&&t.querySelector("[data-for]"))).map(t=>(t.setAttribute("role","page"),t));if(e.length>0||e[0].classList.contains("or-repeat")){let t=this.form.view.html.parentNode;this.$formFooter=(0,Hs.default)(t.querySelector(".form-footer")),this.$btnFirst=this.$formFooter.find(".first-page"),this.$btnPrev=this.$formFooter.find(".previous-page"),this.$btnNext=this.$formFooter.find(".next-page"),this.$btnNext.attr("tabindex",2),this.$btnLast=this.$formFooter.find(".last-page"),this.$toc=(0,Hs.default)(t.querySelector(".pages-toc__list")),this._updateAllActive(e),this._updateToc(),this._toggleButtons(0),this._setButtonHandlers(),this._setRepeatHandlers(),this._setBranchHandlers(),this._setSwipeHandlers(),this._setTocHandlers(),this._setLangChangeHandlers(),this.active=!0,this._flipToFirst()}}},flipToPageContaining(e){let t=e[0],n=t.closest('[role="page"]');if(n)this._flipTo(n);else if(t.closest(".question")){let r=t.querySelector("[data-for]"),i=t.closest(".or-repeat, form.or");if(r&&i){let a=i.querySelector(`[name="${r.dataset.for}"]`);a&&this._flipTo(a.closest('[role="page"]'))}}this.$toc.parent().find(".pages-toc__overlay").click()},_setButtonHandlers(){let e=this;this.$btnFirst.off(".pagemode").on("click.pagemode",()=>(e.form.pageNavigationBlocked||e._flipToFirst(),!1)),this.$btnPrev.off(".pagemode").on("click.pagemode",()=>(e.form.pageNavigationBlocked||e._prev(),!1)),this.$btnNext.off(".pagemode").on("click.pagemode",()=>(e.form.pageNavigationBlocked||e._next(),!1)),this.$btnLast.off(".pagemode").on("click.pagemode",()=>(e.form.pageNavigationBlocked||e._flipToLast(),!1))},_setSwipeHandlers(){if(Gn.swipePage===!1)return;let e=this,t=this.form.view.$.closest(".main");t.swipe("destroy"),t.swipe({allowPageScroll:"vertical",threshold:250,preventDefaultEvents:!1,swipeLeft(){e.$btnNext.click()},swipeRight(){e.$btnPrev.click()},swipeStatus(n,r){if(r==="start"){let i=e._getCurrent()?e._getCurrent().querySelector(":focus"):null;i&&i.blur()}}})},_setTocHandlers(){let e=this;this.$toc.on("click","a",function(){if(!e.form.pageNavigationBlocked&&this.parentElement&&this.parentElement.getAttribute("tocId")){let t=parseInt(this.parentElement.getAttribute("tocId"),10),n=e.form.toc.tocItems.find(r=>r.tocId===t);if(n&&n.element){let r=n.element;e.form.goToTarget(r)}}return!1}).parent().find(".pages-toc__overlay").on("click",()=>{e.$toc.parent().find("#toc-toggle").prop("checked",!1)})},_setRepeatHandlers(){this.form.view.html.addEventListener(Xe.AddRepeat().type,e=>{this._updateAllActive(),e.detail.trigger==="user"||this.activePages[0]===e.target||qo(this.activePages[0],".or-repeat").includes(e.target)?this.flipToPageContaining((0,Hs.default)(e.target)):this._toggleButtons()}),this.form.view.html.addEventListener(Xe.RemoveRepeat().type,e=>{if(this.current&&!this.current.closest("html")){this._updateAllActive();let t=(0,Hs.default)(e.target).prev();t.length===0&&(t=(0,Hs.default)(e.target)),this.flipToPageContaining(t)}})},_setBranchHandlers(){let e=this;this.form.view.$.on("changebranch.pagemode",()=>{e._updateAllActive(),e.activePages.includes(e.current)||e._next(),e._toggleButtons()})},_setLangChangeHandlers(){this.form.view.html.addEventListener(Xe.ChangeLanguage().type,()=>{this._updateToc()})},_getCurrent(){return this.current},_updateAllActive(e){e=e||[...this.form.view.html.querySelectorAll('[role="page"]')],this.activePages=e.filter(t=>!t.closest(".disabled")&&(t.matches(".question")||t.querySelector(".question:not(.disabled)")||t.matches(".or-repeat-info")&&!Rr(t,".or-repeat"))),this._updateToc()},_getPrev(e){return this.activePages[e-1]},_getNext(e){return this.activePages[e+1]},_getCurrentIndex(){return this.activePages.findIndex(e=>e===this.current)},_next(){let e=this,t,n;return t=this._getCurrentIndex(),n=Gn.validatePage===!1||!this.current?Promise.resolve(!0):this.form.validateContent((0,Hs.default)(this.current)),n.then(r=>{let i,a;return r?(i=e._getNext(t),i&&(a=t+1,e._flipTo(i,a)),!0):!1})},_prev(){let e=this._getCurrentIndex(),t=this._getPrev(e);t&&this._flipTo(t,e-1)},_setToCurrent(e){e.classList.add("current","hidden"),e.classList.remove("hidden"),qo(e,".or-group, .or-group-data, .or-repeat",".or").forEach(t=>t.classList.add("contains-current")),this.current=e,this.form.goToTarget(e,{isPageFlip:!0})},_flipTo(e,t){this.current&&this.current.closest("html")?this.current!==e&&(this.current.classList.remove("current","fade-out"),qo(this.current,".or-group, .or-group-data, .or-repeat",".or").forEach(n=>n.classList.remove("contains-current")),this._pauseMultimedia(this.current),this._setToCurrent(e),this._focusOnFirstQuestion(e),this._toggleButtons(t),e.dispatchEvent(Xe.PageFlip()),this.form.goToTarget(e,{isPageFlip:!0})):e&&(this._setToCurrent(e),this._focusOnFirstQuestion(e),this._toggleButtons(t),e.dispatchEvent(Xe.PageFlip()),this.form.goToTarget(e,{isPageFlip:!0}),e.setAttribute("tabindex",1))},_flipToFirst(){this._flipTo(this.activePages[0])},_flipToLast(){this._flipTo(this.activePages[this.activePages.length-1])},_focusOnFirstQuestion(e){(0,Hs.default)(e).find(".question:not(.disabled)").addBack(".question:not(.disabled)").filter(function(){return(0,Hs.default)(this).parentsUntil(".or",".disabled").length===0}).eq(0).find("input, select, textarea").eq(0).trigger("fakefocus"),e.focus(),e.scrollIntoView()},_toggleButtons(e=this._getCurrentIndex()){let t=this._getNext(e),n=this._getPrev(e);this.$btnNext.add(this.$btnLast).toggleClass("disabled",!t),this.$btnPrev.add(this.$btnFirst).toggleClass("disabled",!n),this.$formFooter.toggleClass("end",!t)},_pauseMultimedia(e){(0,Hs.default)(e).find("audio, video").each((t,n)=>n.pause())},_updateToc(){this.$toc.length&&(this.$toc.empty()[0].append(this.form.toc.getHtmlFragment()),this.$toc.closest(".pages-toc").removeClass("hide"))}};var vS={status:0,lastChanged:null,all:null,updateTotal(){this.all=[...this.form.view.html.querySelectorAll(".question:not(.disabled):not(.or-appearance-comment):not(.or-appearance-dn):not(.readonly)")].filter(e=>!e.closest(".disabled"))},isUpdateScheduled:!1,scheduledUpdateElement:null,update(e,t=!1){if(this.scheduledUpdateElement=e,!t){this.isUpdateScheduled||(this.isUpdateScheduled=!0,queueMicrotask(()=>{this.update(this.scheduledUpdateElement,!0),this.isUpdateScheduled=!1,this.scheduledUpdateElement=null}));return}let n;(!this.all||!e)&&this.updateTotal(),this.lastChanged=e||this.lastChanged,this.lastChanged&&(n=Math.round((this.all.indexOf(this.lastChanged.closest(".question"))+1)*100/this.all.length)),n>0&&n!==this.status&&(this.status=n,this.form.view.html.dispatchEvent(Xe.ProgressUpdate(n)))},get(){return this.status}};var yT=Yt(gr());var $c=class{};var Wm=Yt(gr());var yS=document.createRange(),$m=class{static globalInit(t,n){this.form=t,this.rootElement=n}static globalReset(){let{form:t,rootElement:n}=this;return delete this.form,delete this.rootElement,{form:t,rootElement:n}}constructor(t,n){return this.element=t,this.options=n||{},this.question=t.closest(".question"),this._props=this._getProps(),this._init()||this}_init(){this.value=this.originalInputValue}_getProps(){let t=this;return{get readonly(){return t.element.nodeName.toLowerCase()==="select"?t.element.hasAttribute("readonly"):!!t.element.readOnly},appearances:[...this.element.closest(".question, form.or").classList].filter(n=>n.indexOf("or-appearance-")===0).map(n=>n.substring(14)),multiple:!!this.element.multiple,disabled:!!this.element.disabled,type:this.element.getAttribute("data-type-xml")}}disable(){}enable(){}update(){}get props(){return this._props}get resetButtonHtml(){return yS.createContextualFragment(`<button
                type="button"
                class="btn-icon-only btn-reset"
                aria-label="reset">
                <i class="icon icon-refresh"> </i>
            </button>`)}get downloadButtonHtml(){return yS.createContextualFragment(`<a
                class="btn-icon-only btn-download"
                aria-label="download"
                download
                href=""><i class="icon icon-download"> </i></a>`)}get value(){}set value(t){}get originalInputValue(){return Hc.getVal(this.element)}set originalInputValue(t){Hc.setVal(this.element,t,null),this.element.dispatchEvent(Xe.Change())}static get name(){return this.constructor.name}static get list(){return!1}static condition(){return!0}},Ut=$m;var li=Yt(gr()),R8=".dropdown-backdrop",Kh="[data-toggle=dropdown]",Nl=function(e){(0,li.default)(e).on("click.bs.dropdown",this.toggle)};Nl.prototype.toggle=function(e){let t=(0,li.default)(this);if(t.is(".disabled, :disabled"))return;let n=Km(t),r=n.hasClass("open");if(jm(),!r){"ontouchstart"in document.documentElement&&!n.closest(".navbar-nav").length&&(0,li.default)('<div class="dropdown-backdrop"/>').insertAfter((0,li.default)(this)).on("click",jm);let i={relatedTarget:this};if(n.trigger(e=li.default.Event("show.bs.dropdown",i)),e.isDefaultPrevented())return;n.toggleClass("open").trigger("shown.bs.dropdown",i),t.focus()}return!1};Nl.prototype.keydown=function(e){if(!/^(38|40|27)$/.test(e.keyCode))return;let t=(0,li.default)(this);if(e.preventDefault(),e.stopPropagation(),t.is(".disabled, :disabled"))return;let n=Km(t),r=n.hasClass("open");if(!r||r&&e.keyCode===27)return e.which===27&&n.find(Kh).focus(),t.click();let i=" li:not(.divider):visible a",a=n.find(`[role=menu]${i}, [role=listbox]${i}`);if(!a.length)return;let s=a.index(a.filter(":focus"));e.keyCode===38&&s>0&&s--,e.keyCode===40&&s<a.length-1&&s++,~s||(s=0),a.eq(s).focus()};function jm(e){(0,li.default)(R8).remove(),(0,li.default)(Kh).each(function(){let t=Km((0,li.default)(this)),n={relatedTarget:this};t.hasClass("open")&&(t.trigger(e=li.default.Event("hide.bs.dropdown",n)),!e.isDefaultPrevented()&&t.removeClass("open").trigger("hidden.bs.dropdown",n))})}function Km(e){let t=e.attr("data-target");t||(t=e.attr("href"),t=t&&/#[A-Za-z]/.test(t)&&t.replace(/.*(?=#[^\s]*$)/,""));let n=t&&(0,li.default)(t);return n&&n.length?n:e.parent()}var O8=li.default.fn.dropdown;li.default.fn.dropdown=function(e){return this.each(function(){let t=(0,li.default)(this),n=t.data("bs.dropdown");n||t.data("bs.dropdown",new Nl(this)),typeof e=="string"&&n[e].call(t)})};li.default.fn.dropdown.Constructor=Nl;li.default.fn.dropdown.noConflict=function(){return li.default.fn.dropdown=O8,this};(0,li.default)(document).on("click.bs.dropdown.data-api",jm).on("click.bs.dropdown.data-api",".dropdown form",e=>{e.stopPropagation()}).on("click.bs.dropdown.data-api",Kh,Nl.prototype.toggle).on("keydown.bs.dropdown.data-api",`${Kh}, [role=menu], [role=listbox]`,Nl.prototype.keydown);var B8=document.createRange(),Gm=class extends Ut{static get selector(){return".question select"}static get list(){return!0}static condition(){return!$n.touch}_init(){let t=this.element;t.style.display="none";let n=this._getTemplate();t.after(n),this.picker=this.question.querySelector(".bootstrap-select"),this.props.readonly&&this.disable(),this._clickListener(),this._focusListener()}_getTemplate(){let t=B8.createContextualFragment(`
        <div class="btn-group bootstrap-select widget clearfix">
            <button type="button" class="btn btn-default dropdown-toggle clearfix" data-toggle="dropdown">
                <span class="selected"></span><span class="caret"></span>
            </button>
            <ul class="dropdown-menu" role="menu">${this._getLisHtml()}</ul>
        </div>`);return this._showSelected(t.querySelector(".selected")),t}_getLisHtml(){let t=this.props.multiple?'type="checkbox"':`type="radio" name="${Math.random()*1e5}"`;return[...this.element.querySelectorAll("option")].map(n=>{let r=n.textContent,i=n.matches(":checked"),{value:a}=n;return a?`
                        <li ${i?'class="active"':""}>
                            <a class="option-wrapper" tabindex="-1" href="#">
                                <label>
                                    <input class="ignore" ${t}${i?' checked="checked"':""} value="${hd(a)}" />
                                    <span class="option-label">${hd(r)}</span>
                                </label>
                            </a>
                        </li>`:""}).join("")}_showSelected(t){let n=[...this.element.querySelectorAll("option:checked")].filter(r=>r.getAttribute("value").length).map(r=>r.textContent);if(n.length===0)t.textContent=Be("selectpicker.noneselected"),t.dataset.i18n="selectpicker.noneselected",delete t.dataset.i18nNumber;else if(n.length===1)t.textContent=n[0],delete t.dataset.i18n,delete t.dataset.i18nNumber;else{let r=n.length;t.textContent=Be("selectpicker.numberselected",{number:r}),t.dataset.i18n="selectpicker.numberselected",t.dataset.i18nNumber=r}}_clickListener(){let t=this;(0,Wm.default)(this.picker).on("click","li:not(.disabled)",function(n){let r=this,i=r.querySelector("input"),a=t.element,s=a.querySelector(`option[value="${CSS.escape(i.value)}"]`),o=s.matches(":checked");n.target.nodeName.toLowerCase()!=="input"&&n.preventDefault(),t.props.multiple?n.stopPropagation():(t.picker.querySelectorAll("li").forEach(l=>l.classList.remove("active")),Uo(s,"option").forEach(l=>{l.selected=!1}),t.picker.querySelectorAll("input").forEach(l=>l.checked=!1)),setTimeout(()=>{o?(r.classList.remove("active"),i.checked=!1,s.selected=!1):(r.classList.add("active"),s.selected=!0,i.checked=!0);let l=t.picker.querySelector(".selected");t._showSelected(l),a.dispatchEvent(new Xe.Change)},10)}).on("keydown","li:not(.disabled)",n=>{let r=n.keyCode.toString(10);if(/(13|32)/.test(r)){/(32)/.test(r)||n.preventDefault();let i=(0,Wm.default)(":focus");i.click(),i.focus(),n.preventDefault()}}).on("click","li.disabled",n=>(n.stopPropagation(),!1)).on("click","a",n=>{n.preventDefault()})}_focusListener(){let t=this;this.element.addEventListener(Xe.ApplyFocus().type,()=>{t.picker.querySelector(".dropdown-toggle").focus()})}disable(){this.picker.querySelectorAll("li").forEach(t=>{t.classList.add("disabled");let n=t.querySelector("input");n.disabled=!0,n.readOnly=!0})}enable(){this.picker.querySelectorAll("li").forEach(t=>{t.classList.remove("disabled");let n=t.querySelector("input");n.disabled=!1,n.readOnly=!1})}update(){this.picker.remove(),this._init()}},_S=Gm;var Zm=class extends Ut{static get selector(){return".question select[multiple]"}static condition(){return $n.touch}_init(){let t=document.createRange().createContextualFragment('<span class="widget mobileselect"></span>');this.element.after(t),this.widget=this.element.parentElement.querySelector(".widget"),this.element.addEventListener("change",()=>{this._showSelectedValues()}),this._showSelectedValues()}_showSelectedValues(){this.widget.textContent=this.originalInputValue.join(", ")}update(){this._showSelectedValues()}},bS=Zm;var Jr=Yt(gr()),Wh="relevantDropdown";Jr.default.expr[":"].RD_contains=Jr.default.expr.createPseudo(e=>t=>(0,Jr.default)(t).text().toUpperCase().indexOf(e.toUpperCase())>=0);function jc(e,t,n){this.namespace=Wh,this.element=e,this.options=Jr.default.extend({fadeOutSpeed:"normal",change:null},t),n&&(n.stopPropagation(),n.preventDefault()),this._init()}jc.prototype._init=function(){let e=(0,Jr.default)(this.element);this.listId=e.attr("list"),this.$fakeDatalist=(0,Jr.default)("<ul />",{class:"datalist widget",id:this.listId}).appendTo(e.parent()),this._updateFakeDatalist(),this._setEventListeners()};jc.prototype._updateFakeDatalist=function(){let e=(0,Jr.default)(`#${this.listId}`),t=document.createDocumentFragment();this.$fakeDatalist.empty(),e.find("option").each(function(){let n=(0,Jr.default)("<li />",{text:(0,Jr.default)(this).val()})[0];t.appendChild(n)}),this.$fakeDatalist.append(t),this.$fakeDatalistItems=this.$fakeDatalist.find("li")};jc.prototype._setEventListeners=function(){let e=this,t=(0,Jr.default)(this.element),n,r=0;t.on("focus",()=>{e.$fakeDatalist.scrollTop(0),r=0}).on("blur",()=>{setTimeout(()=>{e.$fakeDatalist.fadeOut(e.options.fadeOutSpeed),e.$fakeDatalistItems.removeClass("active")},500)}).on("keyup",function(i){n=t.position(),e.$fakeDatalist.show().css({top:n.top+(0,Jr.default)(this).outerHeight(),left:n.left,width:t.outerWidth()}),e.$fakeDatalistItems.hide(),e.$fakeDatalist.find(`li:RD_contains("${t.val()}")`).show()}),this.$fakeDatalist.on("mouseenter","li",function(){(0,Jr.default)(this).addClass("active").siblings().removeClass("active")}).on("mouseleave","li",function(){(0,Jr.default)(this).removeClass("active")}),(0,Jr.default)(window).resize(function(){n=t.position(),e.$fakeDatalist.css({top:n.top+(0,Jr.default)(this).outerHeight(),left:n.left,width:t.outerWidth()})}),t.on("keydown",i=>{let a=e.$fakeDatalist.find("li.active"),s=e.$fakeDatalist.outerHeight(),o=e.$fakeDatalistItems.outerHeight();if(i.keyCode==38&&a.length&&(prevAll=a.prevAll("li:visible"),prevAll.length>0&&(a.removeClass("active"),prevAll.eq(0).addClass("active")),prevAll.length&&prevAll.position().top<0&&r>0&&e.$fakeDatalist.scrollTop(r-=o)),i.keyCode==40)if(a.length){let l=a.nextAll("li:visible");l.length>0&&(a.removeClass("active"),l.eq(0).addClass("active")),l.length&&l.position().top+o>=s&&e.$fakeDatalist.stop().animate({scrollTop:r+=o},200)}else e.$fakeDatalistItems.removeClass("active"),e.$fakeDatalist.find("li:visible:first").addClass("active");(i.keyCode==13||i.keyCode==9)&&(a.length&&t.val(a.text()).trigger("input"),e.$fakeDatalist.fadeOut(e.options.fadeOutSpeed),e.$fakeDatalistItems.removeClass("active")),i.keyCode!=13&&i.keyCode!=38&&i.keyCode!=40&&(e.$fakeDatalistItems.removeClass("active"),e.$fakeDatalist.find("li:visible:first").addClass("active"),e.$fakeDatalist.scrollTop(0),r=0)}),this.$fakeDatalist.on("click","li",function(){(0,Jr.default)("li.active").length&&t.val((0,Jr.default)(this).text()).trigger("input"),e.$fakeDatalist.fadeOut(e.options.fadeOutSpeed),e.$fakeDatalistItems.removeClass("active")})};jc.prototype.update=function(){this._updateFakeDatalist()};Jr.default.fn[Wh]=function(e,t){return e=e||{},this.each(function(){let n=(0,Jr.default)(this),r=n.data(Wh);!r&&typeof e=="object"?n.data(Wh,r=new jc(this,e,t)):r&&typeof e=="string"&&r[e](this)})};var Xm=class extends Ut{static get selector(){return".question input[list]"}static get list(){return!0}_init(){let t=this.element.getAttribute("list");if(Rr(this.element,"datalist"))this.options=[...this.question.querySelectorAll(`datalist#${CSS.escape(t)} > option`)];else{let r=Rr(this.element.closest(".or-repeat"),".or-repeat-info");this.options=r?[...r.querySelectorAll(`datalist#${CSS.escape(t)} > option`)]:[]}this.options.forEach(r=>{let i=r.getAttribute("value");!r.classList.contains("itemset-template")&&r.textContent&&i!==void 0&&i!==null&&(r.dataset.value=i,r.setAttribute("value",r.textContent),r.textContent="")});let n=document.createRange().createContextualFragment(`<input type="text" class="ignore widget autocomplete" list="${t}" />`);this.element.classList.add("hide"),this.element.after(n),this.fakeInput=this.element.parentElement.querySelector("input.autocomplete"),this.props.readonly&&this.fakeInput.setAttribute("readonly","readonly"),this.props.disabled&&this.fakeInput.setAttribute("disabled","disabled"),this._setFakeInputListener(),this._setFocusListener(),this._showCurrentLabel()}_showCurrentLabel(){let t=this.originalInputValue,n=this._findLabel(t);this.fakeInput.value=n,t&&!n&&this.fakeInput.dispatchEvent(Xe.Input())}_setFakeInputListener(){this.fakeInput.addEventListener("input",t=>{let n=t.target,r=n.value,i=this._findValue(r)||"";this.originalInputValue!==i&&(this.originalInputValue=i),n.classList.toggle("notfound",r&&!i)})}_findValue(t){let n="";return t?(this.options.forEach(r=>{if(r.value===t)return n=r.getAttribute("data-value"),!1}),n):""}_findLabel(t){let n="";return t?(this.options.forEach(r=>{if(r.dataset.value===t)return n=r.value,!1}),n):""}_setFocusListener(){this.element.addEventListener(Xe.ApplyFocus().type,()=>{this.fakeInput.focus()})}disable(){this.fakeInput.classList.add("disabled")}enable(){this.fakeInput.classList.remove("disabled")}update(){this.element.parentElement.querySelector(".widget").remove(),this._init()}},wS=Xm;var ei=Yt(gr());var Ni=Yt(ES());(function(e,t,n){function r(i,a){for(;(i=i.parentElement)&&!i.classList.contains(a););return i}L.drawVersion="1.0.4+838a63b",L.Draw={},L.drawLocal={draw:{toolbar:{actions:{title:"Cancel drawing",text:"Cancel"},finish:{title:"Finish drawing",text:"Finish"},undo:{title:"Delete last point drawn",text:"Delete last point"},buttons:{polyline:"Draw a polyline",polygon:"Draw a polygon",rectangle:"Draw a rectangle",circle:"Draw a circle",marker:"Draw a marker",circlemarker:"Draw a circlemarker"}},handlers:{circle:{tooltip:{start:"Click and drag to draw circle."},radius:"Radius"},circlemarker:{tooltip:{start:"Click map to place circle marker."}},marker:{tooltip:{start:"Click map to place marker."}},polygon:{tooltip:{start:"Click to start drawing shape.",cont:"Click to continue drawing shape.",end:"Click first point to close this shape."}},polyline:{error:"<strong>Error:</strong> shape edges cannot cross!",tooltip:{start:"Click to start drawing line.",cont:"Click to continue drawing line.",end:"Click last point to finish line."}},rectangle:{tooltip:{start:"Click and drag to draw rectangle."}},simpleshape:{tooltip:{end:"Release mouse to finish drawing."}}}},edit:{toolbar:{actions:{save:{title:"Save changes",text:"Save"},cancel:{title:"Cancel editing, discards all changes",text:"Cancel"},clearAll:{title:"Clear all layers",text:"Clear All"}},buttons:{edit:"Edit layers",editDisabled:"No layers to edit",remove:"Delete layers",removeDisabled:"No layers to delete"}},handlers:{edit:{tooltip:{text:"Drag handles or markers to edit features.",subtext:"Click cancel to undo changes."}},remove:{tooltip:{text:"Click on a feature to remove."}}}}},L.Draw.Event={},L.Draw.Event.CREATED="draw:created",L.Draw.Event.EDITED="draw:edited",L.Draw.Event.DELETED="draw:deleted",L.Draw.Event.DRAWSTART="draw:drawstart",L.Draw.Event.DRAWSTOP="draw:drawstop",L.Draw.Event.DRAWVERTEX="draw:drawvertex",L.Draw.Event.EDITSTART="draw:editstart",L.Draw.Event.EDITMOVE="draw:editmove",L.Draw.Event.EDITRESIZE="draw:editresize",L.Draw.Event.EDITVERTEX="draw:editvertex",L.Draw.Event.EDITSTOP="draw:editstop",L.Draw.Event.DELETESTART="draw:deletestart",L.Draw.Event.DELETESTOP="draw:deletestop",L.Draw.Event.TOOLBAROPENED="draw:toolbaropened",L.Draw.Event.TOOLBARCLOSED="draw:toolbarclosed",L.Draw.Event.MARKERCONTEXT="draw:markercontext",L.Draw=L.Draw||{},L.Draw.Feature=L.Handler.extend({initialize:function(i,a){this._map=i,this._container=i._container,this._overlayPane=i._panes.overlayPane,this._popupPane=i._panes.popupPane,a&&a.shapeOptions&&(a.shapeOptions=L.Util.extend({},this.options.shapeOptions,a.shapeOptions)),L.setOptions(this,a);var s=L.version.split(".");parseInt(s[0],10)===1&&parseInt(s[1],10)>=2?L.Draw.Feature.include(L.Evented.prototype):L.Draw.Feature.include(L.Mixin.Events)},enable:function(){this._enabled||(L.Handler.prototype.enable.call(this),this.fire("enabled",{handler:this.type}),this._map.fire(L.Draw.Event.DRAWSTART,{layerType:this.type}))},disable:function(){this._enabled&&(L.Handler.prototype.disable.call(this),this._map.fire(L.Draw.Event.DRAWSTOP,{layerType:this.type}),this.fire("disabled",{handler:this.type}))},addHooks:function(){var i=this._map;i&&(L.DomUtil.disableTextSelection(),i.getContainer().focus(),this._tooltip=new L.Draw.Tooltip(this._map),L.DomEvent.on(this._container,"keyup",this._cancelDrawing,this))},removeHooks:function(){this._map&&(L.DomUtil.enableTextSelection(),this._tooltip.dispose(),this._tooltip=null,L.DomEvent.off(this._container,"keyup",this._cancelDrawing,this))},setOptions:function(i){L.setOptions(this,i)},_fireCreatedEvent:function(i){this._map.fire(L.Draw.Event.CREATED,{layer:i,layerType:this.type})},_cancelDrawing:function(i){i.keyCode===27&&(this._map.fire("draw:canceled",{layerType:this.type}),this.disable())}}),L.Draw.Polyline=L.Draw.Feature.extend({statics:{TYPE:"polyline"},Poly:L.Polyline,options:{allowIntersection:!0,repeatMode:!1,drawError:{color:"#b00b00",timeout:2500},icon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon"}),touchIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-touch-icon"}),guidelineDistance:20,maxGuideLineLength:4e3,shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!1,clickable:!0},metric:!0,feet:!0,nautic:!1,showLength:!0,zIndexOffset:2e3,factor:1,maxPoints:0},initialize:function(i,a){L.Browser.touch&&(this.options.icon=this.options.touchIcon),this.options.drawError.message=L.drawLocal.draw.handlers.polyline.error,a&&a.drawError&&(a.drawError=L.Util.extend({},this.options.drawError,a.drawError)),this.type=L.Draw.Polyline.TYPE,L.Draw.Feature.prototype.initialize.call(this,i,a)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this),this._map&&(this._markers=[],this._markerGroup=new L.LayerGroup,this._map.addLayer(this._markerGroup),this._poly=new L.Polyline([],this.options.shapeOptions),this._tooltip.updateContent(this._getTooltipText()),this._mouseMarker||(this._mouseMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"leaflet-mouse-marker",iconAnchor:[20,20],iconSize:[40,40]}),opacity:0,zIndexOffset:this.options.zIndexOffset})),this._mouseMarker.on("mouseout",this._onMouseOut,this).on("mousemove",this._onMouseMove,this).on("mousedown",this._onMouseDown,this).on("mouseup",this._onMouseUp,this).addTo(this._map),this._map.on("mouseup",this._onMouseUp,this).on("mousemove",this._onMouseMove,this).on("zoomlevelschange",this._onZoomEnd,this).on("touchstart",this._onTouch,this).on("zoomend",this._onZoomEnd,this))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this),this._clearHideErrorTimeout(),this._cleanUpShape(),this._map.removeLayer(this._markerGroup),delete this._markerGroup,delete this._markers,this._map.removeLayer(this._poly),delete this._poly,this._mouseMarker.off("mousedown",this._onMouseDown,this).off("mouseout",this._onMouseOut,this).off("mouseup",this._onMouseUp,this).off("mousemove",this._onMouseMove,this),this._map.removeLayer(this._mouseMarker),delete this._mouseMarker,this._clearGuides(),this._map.off("mouseup",this._onMouseUp,this).off("mousemove",this._onMouseMove,this).off("zoomlevelschange",this._onZoomEnd,this).off("zoomend",this._onZoomEnd,this).off("touchstart",this._onTouch,this).off("click",this._onTouch,this)},deleteLastVertex:function(){if(!(this._markers.length<=1)){var i=this._markers.pop(),a=this._poly,s=a.getLatLngs(),o=s.splice(-1,1)[0];this._poly.setLatLngs(s),this._markerGroup.removeLayer(i),a.getLatLngs().length<2&&this._map.removeLayer(a),this._vertexChanged(o,!1)}},addVertex:function(i){if(this._markers.length>=2&&!this.options.allowIntersection&&this._poly.newLatLngIntersects(i))return void this._showErrorTooltip();this._errorShown&&this._hideErrorTooltip(),this._markers.push(this._createMarker(i)),this._poly.addLatLng(i),this._poly.getLatLngs().length===2&&this._map.addLayer(this._poly),this._vertexChanged(i,!0)},completeShape:function(){this._markers.length<=1||!this._shapeIsValid()||(this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable())},_finishShape:function(){var i=this._poly._defaultShape?this._poly._defaultShape():this._poly.getLatLngs(),a=this._poly.newLatLngIntersects(i[i.length-1]);if(!this.options.allowIntersection&&a||!this._shapeIsValid())return void this._showErrorTooltip();this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable()},_shapeIsValid:function(){return!0},_onZoomEnd:function(){this._markers!==null&&this._updateGuide()},_onMouseMove:function(i){var a=this._map.mouseEventToLayerPoint(i.originalEvent),s=this._map.layerPointToLatLng(a);this._currentLatLng=s,this._updateTooltip(s),this._updateGuide(a),this._mouseMarker.setLatLng(s),L.DomEvent.preventDefault(i.originalEvent)},_vertexChanged:function(i,a){this._map.fire(L.Draw.Event.DRAWVERTEX,{layers:this._markerGroup}),this._updateFinishHandler(),this._updateRunningMeasure(i,a),this._clearGuides(),this._updateTooltip()},_onMouseDown:function(i){if(!this._clickHandled&&!this._touchHandled&&!this._disableMarkers){this._onMouseMove(i),this._clickHandled=!0,this._disableNewMarkers();var a=i.originalEvent,s=a.clientX,o=a.clientY;this._startPoint.call(this,s,o)}},_startPoint:function(i,a){this._mouseDownOrigin=L.point(i,a)},_onMouseUp:function(i){var a=i.originalEvent,s=a.clientX,o=a.clientY;this._endPoint.call(this,s,o,i),this._clickHandled=null},_endPoint:function(i,a,s){if(this._mouseDownOrigin){var o=L.point(i,a).distanceTo(this._mouseDownOrigin),l=this._calculateFinishDistance(s.latlng);this.options.maxPoints>1&&this.options.maxPoints==this._markers.length+1?(this.addVertex(s.latlng),this._finishShape()):l<10&&L.Browser.touch?this._finishShape():Math.abs(o)<9*(e.devicePixelRatio||1)&&this.addVertex(s.latlng),this._enableNewMarkers()}this._mouseDownOrigin=null},_onTouch:function(i){var a,s,o=i.originalEvent;!o.touches||!o.touches[0]||this._clickHandled||this._touchHandled||this._disableMarkers||(a=o.touches[0].clientX,s=o.touches[0].clientY,this._disableNewMarkers(),this._touchHandled=!0,this._startPoint.call(this,a,s),this._endPoint.call(this,a,s,i),this._touchHandled=null),this._clickHandled=null},_onMouseOut:function(){this._tooltip&&this._tooltip._onMouseOut.call(this._tooltip)},_calculateFinishDistance:function(i){var a;if(this._markers.length>0){var s;if(this.type===L.Draw.Polyline.TYPE)s=this._markers[this._markers.length-1];else{if(this.type!==L.Draw.Polygon.TYPE)return 1/0;s=this._markers[0]}var o=this._map.latLngToContainerPoint(s.getLatLng()),l=new L.Marker(i,{icon:this.options.icon,zIndexOffset:2*this.options.zIndexOffset}),c=this._map.latLngToContainerPoint(l.getLatLng());a=o.distanceTo(c)}else a=1/0;return a},_updateFinishHandler:function(){var i=this._markers.length;i>1&&this._markers[i-1].on("click",this._finishShape,this),i>2&&this._markers[i-2].off("click",this._finishShape,this)},_createMarker:function(i){var a=new L.Marker(i,{icon:this.options.icon,zIndexOffset:2*this.options.zIndexOffset});return this._markerGroup.addLayer(a),a},_updateGuide:function(i){var a=this._markers?this._markers.length:0;a>0&&(i=i||this._map.latLngToLayerPoint(this._currentLatLng),this._clearGuides(),this._drawGuide(this._map.latLngToLayerPoint(this._markers[a-1].getLatLng()),i))},_updateTooltip:function(i){var a=this._getTooltipText();i&&this._tooltip.updatePosition(i),this._errorShown||this._tooltip.updateContent(a)},_drawGuide:function(i,a){var s,o,l,c=Math.floor(Math.sqrt(Math.pow(a.x-i.x,2)+Math.pow(a.y-i.y,2))),h=this.options.guidelineDistance,p=this.options.maxGuideLineLength,E=c>p?c-p:h;for(this._guidesContainer||(this._guidesContainer=L.DomUtil.create("div","leaflet-draw-guides",this._overlayPane));E<c;E+=this.options.guidelineDistance)s=E/c,o={x:Math.floor(i.x*(1-s)+s*a.x),y:Math.floor(i.y*(1-s)+s*a.y)},l=L.DomUtil.create("div","leaflet-draw-guide-dash",this._guidesContainer),l.style.backgroundColor=this._errorShown?this.options.drawError.color:this.options.shapeOptions.color,L.DomUtil.setPosition(l,o)},_updateGuideColor:function(i){if(this._guidesContainer)for(var a=0,s=this._guidesContainer.childNodes.length;a<s;a++)this._guidesContainer.childNodes[a].style.backgroundColor=i},_clearGuides:function(){if(this._guidesContainer)for(;this._guidesContainer.firstChild;)this._guidesContainer.removeChild(this._guidesContainer.firstChild)},_getTooltipText:function(){var i,a,s=this.options.showLength;return this._markers.length===0?i={text:L.drawLocal.draw.handlers.polyline.tooltip.start}:(a=s?this._getMeasurementString():"",i=this._markers.length===1?{text:L.drawLocal.draw.handlers.polyline.tooltip.cont,subtext:a}:{text:L.drawLocal.draw.handlers.polyline.tooltip.end,subtext:a}),i},_updateRunningMeasure:function(i,a){var s,o,l=this._markers.length;this._markers.length===1?this._measurementRunningTotal=0:(s=l-(a?2:1),o=L.GeometryUtil.isVersion07x()?i.distanceTo(this._markers[s].getLatLng())*(this.options.factor||1):this._map.distance(i,this._markers[s].getLatLng())*(this.options.factor||1),this._measurementRunningTotal+=o*(a?1:-1))},_getMeasurementString:function(){var i,a=this._currentLatLng,s=this._markers[this._markers.length-1].getLatLng();return i=L.GeometryUtil.isVersion07x()?s&&a&&a.distanceTo?this._measurementRunningTotal+a.distanceTo(s)*(this.options.factor||1):this._measurementRunningTotal||0:s&&a?this._measurementRunningTotal+this._map.distance(a,s)*(this.options.factor||1):this._measurementRunningTotal||0,L.GeometryUtil.readableDistance(i,this.options.metric,this.options.feet,this.options.nautic,this.options.precision)},_showErrorTooltip:function(){this._errorShown=!0,this._tooltip.showAsError().updateContent({text:this.options.drawError.message}),this._updateGuideColor(this.options.drawError.color),this._poly.setStyle({color:this.options.drawError.color}),this._clearHideErrorTimeout(),this._hideErrorTimeout=setTimeout(L.Util.bind(this._hideErrorTooltip,this),this.options.drawError.timeout)},_hideErrorTooltip:function(){this._errorShown=!1,this._clearHideErrorTimeout(),this._tooltip.removeError().updateContent(this._getTooltipText()),this._updateGuideColor(this.options.shapeOptions.color),this._poly.setStyle({color:this.options.shapeOptions.color})},_clearHideErrorTimeout:function(){this._hideErrorTimeout&&(clearTimeout(this._hideErrorTimeout),this._hideErrorTimeout=null)},_disableNewMarkers:function(){this._disableMarkers=!0},_enableNewMarkers:function(){setTimeout(function(){this._disableMarkers=!1}.bind(this),50)},_cleanUpShape:function(){this._markers.length>1&&this._markers[this._markers.length-1].off("click",this._finishShape,this)},_fireCreatedEvent:function(){var i=new this.Poly(this._poly.getLatLngs(),this.options.shapeOptions);L.Draw.Feature.prototype._fireCreatedEvent.call(this,i)}}),L.Draw.Polygon=L.Draw.Polyline.extend({statics:{TYPE:"polygon"},Poly:L.Polygon,options:{showArea:!1,showLength:!1,shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0},metric:!0,feet:!0,nautic:!1,precision:{}},initialize:function(i,a){L.Draw.Polyline.prototype.initialize.call(this,i,a),this.type=L.Draw.Polygon.TYPE},_updateFinishHandler:function(){var i=this._markers.length;i===1&&this._markers[0].on("click",this._finishShape,this),i>2&&(this._markers[i-1].on("dblclick",this._finishShape,this),i>3&&this._markers[i-2].off("dblclick",this._finishShape,this))},_getTooltipText:function(){var i,a;return this._markers.length===0?i=L.drawLocal.draw.handlers.polygon.tooltip.start:this._markers.length<3?(i=L.drawLocal.draw.handlers.polygon.tooltip.cont,a=this._getMeasurementString()):(i=L.drawLocal.draw.handlers.polygon.tooltip.end,a=this._getMeasurementString()),{text:i,subtext:a}},_getMeasurementString:function(){var i=this._area,a="";return i||this.options.showLength?(this.options.showLength&&(a=L.Draw.Polyline.prototype._getMeasurementString.call(this)),i&&(a+="<br>"+L.GeometryUtil.readableArea(i,this.options.metric,this.options.precision)),a):null},_shapeIsValid:function(){return this._markers.length>=3},_vertexChanged:function(i,a){var s;!this.options.allowIntersection&&this.options.showArea&&(s=this._poly.getLatLngs(),this._area=L.GeometryUtil.geodesicArea(s)),L.Draw.Polyline.prototype._vertexChanged.call(this,i,a)},_cleanUpShape:function(){var i=this._markers.length;i>0&&(this._markers[0].off("click",this._finishShape,this),i>2&&this._markers[i-1].off("dblclick",this._finishShape,this))}}),L.SimpleShape={},L.Draw.SimpleShape=L.Draw.Feature.extend({options:{repeatMode:!1},initialize:function(i,a){this._endLabelText=L.drawLocal.draw.handlers.simpleshape.tooltip.end,L.Draw.Feature.prototype.initialize.call(this,i,a)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this),this._map&&(this._mapDraggable=this._map.dragging.enabled(),this._mapDraggable&&this._map.dragging.disable(),this._container.style.cursor="crosshair",this._tooltip.updateContent({text:this._initialLabelText}),this._map.on("mousedown",this._onMouseDown,this).on("mousemove",this._onMouseMove,this).on("touchstart",this._onMouseDown,this).on("touchmove",this._onMouseMove,this),t.addEventListener("touchstart",L.DomEvent.preventDefault,{passive:!1}))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this),this._map&&(this._mapDraggable&&this._map.dragging.enable(),this._container.style.cursor="",this._map.off("mousedown",this._onMouseDown,this).off("mousemove",this._onMouseMove,this).off("touchstart",this._onMouseDown,this).off("touchmove",this._onMouseMove,this),L.DomEvent.off(t,"mouseup",this._onMouseUp,this),L.DomEvent.off(t,"touchend",this._onMouseUp,this),t.removeEventListener("touchstart",L.DomEvent.preventDefault),this._shape&&(this._map.removeLayer(this._shape),delete this._shape)),this._isDrawing=!1},_getTooltipText:function(){return{text:this._endLabelText}},_onMouseDown:function(i){this._isDrawing=!0,this._startLatLng=i.latlng,L.DomEvent.on(t,"mouseup",this._onMouseUp,this).on(t,"touchend",this._onMouseUp,this).preventDefault(i.originalEvent)},_onMouseMove:function(i){var a=i.latlng;this._tooltip.updatePosition(a),this._isDrawing&&(this._tooltip.updateContent(this._getTooltipText()),this._drawShape(a))},_onMouseUp:function(){this._shape&&this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable()}}),L.Draw.Rectangle=L.Draw.SimpleShape.extend({statics:{TYPE:"rectangle"},options:{shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0},showArea:!0,metric:!0},initialize:function(i,a){this.type=L.Draw.Rectangle.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.rectangle.tooltip.start,L.Draw.SimpleShape.prototype.initialize.call(this,i,a)},disable:function(){this._enabled&&(this._isCurrentlyTwoClickDrawing=!1,L.Draw.SimpleShape.prototype.disable.call(this))},_onMouseUp:function(i){if(!this._shape&&!this._isCurrentlyTwoClickDrawing)return void(this._isCurrentlyTwoClickDrawing=!0);this._isCurrentlyTwoClickDrawing&&!r(i.target,"leaflet-pane")||L.Draw.SimpleShape.prototype._onMouseUp.call(this)},_drawShape:function(i){this._shape?this._shape.setBounds(new L.LatLngBounds(this._startLatLng,i)):(this._shape=new L.Rectangle(new L.LatLngBounds(this._startLatLng,i),this.options.shapeOptions),this._map.addLayer(this._shape))},_fireCreatedEvent:function(){var i=new L.Rectangle(this._shape.getBounds(),this.options.shapeOptions);L.Draw.SimpleShape.prototype._fireCreatedEvent.call(this,i)},_getTooltipText:function(){var i,a,s,o=L.Draw.SimpleShape.prototype._getTooltipText.call(this),l=this._shape,c=this.options.showArea;return l&&(i=this._shape._defaultShape?this._shape._defaultShape():this._shape.getLatLngs(),a=L.GeometryUtil.geodesicArea(i),s=c?L.GeometryUtil.readableArea(a,this.options.metric):""),{text:o.text,subtext:s}}}),L.Draw.Marker=L.Draw.Feature.extend({statics:{TYPE:"marker"},options:{icon:new L.Icon.Default,repeatMode:!1,zIndexOffset:2e3},initialize:function(i,a){this.type=L.Draw.Marker.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.marker.tooltip.start,L.Draw.Feature.prototype.initialize.call(this,i,a)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this),this._map&&(this._tooltip.updateContent({text:this._initialLabelText}),this._mouseMarker||(this._mouseMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"leaflet-mouse-marker",iconAnchor:[20,20],iconSize:[40,40]}),opacity:0,zIndexOffset:this.options.zIndexOffset})),this._mouseMarker.on("click",this._onClick,this).addTo(this._map),this._map.on("mousemove",this._onMouseMove,this),this._map.on("click",this._onTouch,this))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this),this._map&&(this._map.off("click",this._onClick,this).off("click",this._onTouch,this),this._marker&&(this._marker.off("click",this._onClick,this),this._map.removeLayer(this._marker),delete this._marker),this._mouseMarker.off("click",this._onClick,this),this._map.removeLayer(this._mouseMarker),delete this._mouseMarker,this._map.off("mousemove",this._onMouseMove,this))},_onMouseMove:function(i){var a=i.latlng;this._tooltip.updatePosition(a),this._mouseMarker.setLatLng(a),this._marker?(a=this._mouseMarker.getLatLng(),this._marker.setLatLng(a)):(this._marker=this._createMarker(a),this._marker.on("click",this._onClick,this),this._map.on("click",this._onClick,this).addLayer(this._marker))},_createMarker:function(i){return new L.Marker(i,{icon:this.options.icon,zIndexOffset:this.options.zIndexOffset})},_onClick:function(){this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable()},_onTouch:function(i){this._onMouseMove(i),this._onClick()},_fireCreatedEvent:function(){var i=new L.Marker.Touch(this._marker.getLatLng(),{icon:this.options.icon});L.Draw.Feature.prototype._fireCreatedEvent.call(this,i)}}),L.Draw.CircleMarker=L.Draw.Marker.extend({statics:{TYPE:"circlemarker"},options:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0,zIndexOffset:2e3},initialize:function(i,a){this.type=L.Draw.CircleMarker.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.circlemarker.tooltip.start,L.Draw.Feature.prototype.initialize.call(this,i,a)},_fireCreatedEvent:function(){var i=new L.CircleMarker(this._marker.getLatLng(),this.options);L.Draw.Feature.prototype._fireCreatedEvent.call(this,i)},_createMarker:function(i){return new L.CircleMarker(i,this.options)}}),L.Draw.Circle=L.Draw.SimpleShape.extend({statics:{TYPE:"circle"},options:{shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0},showRadius:!0,metric:!0,feet:!0,nautic:!1},initialize:function(i,a){this.type=L.Draw.Circle.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.circle.tooltip.start,L.Draw.SimpleShape.prototype.initialize.call(this,i,a)},_drawShape:function(i){if(L.GeometryUtil.isVersion07x())var a=this._startLatLng.distanceTo(i);else var a=this._map.distance(this._startLatLng,i);this._shape?this._shape.setRadius(a):(this._shape=new L.Circle(this._startLatLng,a,this.options.shapeOptions),this._map.addLayer(this._shape))},_fireCreatedEvent:function(){var i=new L.Circle(this._startLatLng,this._shape.getRadius(),this.options.shapeOptions);L.Draw.SimpleShape.prototype._fireCreatedEvent.call(this,i)},_onMouseMove:function(i){var a,s=i.latlng,o=this.options.showRadius,l=this.options.metric;if(this._tooltip.updatePosition(s),this._isDrawing){this._drawShape(s),a=this._shape.getRadius().toFixed(1);var c="";o&&(c=L.drawLocal.draw.handlers.circle.radius+": "+L.GeometryUtil.readableDistance(a,l,this.options.feet,this.options.nautic)),this._tooltip.updateContent({text:this._endLabelText,subtext:c})}}}),L.Edit=L.Edit||{},L.Edit.Marker=L.Handler.extend({initialize:function(i,a){this._marker=i,L.setOptions(this,a)},addHooks:function(){var i=this._marker;i.dragging.enable(),i.on("dragend",this._onDragEnd,i),this._toggleMarkerHighlight()},removeHooks:function(){var i=this._marker;i.dragging.disable(),i.off("dragend",this._onDragEnd,i),this._toggleMarkerHighlight()},_onDragEnd:function(i){var a=i.target;a.edited=!0,this._map.fire(L.Draw.Event.EDITMOVE,{layer:a})},_toggleMarkerHighlight:function(){var i=this._marker._icon;i&&(i.style.display="none",L.DomUtil.hasClass(i,"leaflet-edit-marker-selected")?(L.DomUtil.removeClass(i,"leaflet-edit-marker-selected"),this._offsetMarker(i,-4)):(L.DomUtil.addClass(i,"leaflet-edit-marker-selected"),this._offsetMarker(i,4)),i.style.display="")},_offsetMarker:function(i,a){var s=parseInt(i.style.marginTop,10)-a,o=parseInt(i.style.marginLeft,10)-a;i.style.marginTop=s+"px",i.style.marginLeft=o+"px"}}),L.Marker.addInitHook(function(){L.Edit.Marker&&(this.editing=new L.Edit.Marker(this),this.options.editable&&this.editing.enable())}),L.Edit=L.Edit||{},L.Edit.Poly=L.Handler.extend({initialize:function(i){this.latlngs=[i._latlngs],i._holes&&(this.latlngs=this.latlngs.concat(i._holes)),this._poly=i,this._poly.on("revert-edited",this._updateLatLngs,this)},_defaultShape:function(){return L.Polyline._flat?L.Polyline._flat(this._poly._latlngs)?this._poly._latlngs:this._poly._latlngs[0]:this._poly._latlngs},_eachVertexHandler:function(i){for(var a=0;a<this._verticesHandlers.length;a++)i(this._verticesHandlers[a])},addHooks:function(){this._initHandlers(),this._eachVertexHandler(function(i){i.addHooks()})},removeHooks:function(){this._eachVertexHandler(function(i){i.removeHooks()})},updateMarkers:function(){this._eachVertexHandler(function(i){i.updateMarkers()})},_initHandlers:function(){this._verticesHandlers=[];for(var i=0;i<this.latlngs.length;i++)this._verticesHandlers.push(new L.Edit.PolyVerticesEdit(this._poly,this.latlngs[i],this._poly.options.poly))},_updateLatLngs:function(i){this.latlngs=[i.layer._latlngs],i.layer._holes&&(this.latlngs=this.latlngs.concat(i.layer._holes))}}),L.Edit.PolyVerticesEdit=L.Handler.extend({options:{icon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon"}),touchIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-touch-icon"}),drawError:{color:"#b00b00",timeout:1e3}},initialize:function(i,a,s){L.Browser.touch&&(this.options.icon=this.options.touchIcon),this._poly=i,s&&s.drawError&&(s.drawError=L.Util.extend({},this.options.drawError,s.drawError)),this._latlngs=a,L.setOptions(this,s)},_defaultShape:function(){return L.Polyline._flat?L.Polyline._flat(this._latlngs)?this._latlngs:this._latlngs[0]:this._latlngs},addHooks:function(){var i=this._poly,a=i._path;i instanceof L.Polygon||(i.options.fill=!1,i.options.editing&&(i.options.editing.fill=!1)),a&&i.options.editing&&i.options.editing.className&&(i.options.original.className&&i.options.original.className.split(" ").forEach(function(s){L.DomUtil.removeClass(a,s)}),i.options.editing.className.split(" ").forEach(function(s){L.DomUtil.addClass(a,s)})),i.setStyle(i.options.editing),this._poly._map&&(this._map=this._poly._map,this._markerGroup||this._initMarkers(),this._poly._map.addLayer(this._markerGroup))},removeHooks:function(){var i=this._poly,a=i._path;a&&i.options.editing&&i.options.editing.className&&(i.options.editing.className.split(" ").forEach(function(s){L.DomUtil.removeClass(a,s)}),i.options.original.className&&i.options.original.className.split(" ").forEach(function(s){L.DomUtil.addClass(a,s)})),i.setStyle(i.options.original),i._map&&(i._map.removeLayer(this._markerGroup),delete this._markerGroup,delete this._markers)},updateMarkers:function(){this._markerGroup.clearLayers(),this._initMarkers()},_initMarkers:function(){this._markerGroup||(this._markerGroup=new L.LayerGroup),this._markers=[];var i,a,s,o,l=this._defaultShape();for(i=0,s=l.length;i<s;i++)o=this._createMarker(l[i],i),o.on("click",this._onMarkerClick,this),o.on("contextmenu",this._onContextMenu,this),this._markers.push(o);var c,h;for(i=0,a=s-1;i<s;a=i++)(i!==0||L.Polygon&&this._poly instanceof L.Polygon)&&(c=this._markers[a],h=this._markers[i],this._createMiddleMarker(c,h),this._updatePrevNext(c,h))},_createMarker:function(i,a){var s=new L.Marker.Touch(i,{draggable:!0,icon:this.options.icon});return s._origLatLng=i,s._index=a,s.on("dragstart",this._onMarkerDragStart,this).on("drag",this._onMarkerDrag,this).on("dragend",this._fireEdit,this).on("touchmove",this._onTouchMove,this).on("touchend",this._fireEdit,this).on("MSPointerMove",this._onTouchMove,this).on("MSPointerUp",this._fireEdit,this),this._markerGroup.addLayer(s),s},_onMarkerDragStart:function(){this._poly.fire("editstart")},_spliceLatLngs:function(){var i=this._defaultShape(),a=[].splice.apply(i,arguments);return this._poly._convertLatLngs(i,!0),this._poly.redraw(),a},_removeMarker:function(i){var a=i._index;this._markerGroup.removeLayer(i),this._markers.splice(a,1),this._spliceLatLngs(a,1),this._updateIndexes(a,-1),i.off("dragstart",this._onMarkerDragStart,this).off("drag",this._onMarkerDrag,this).off("dragend",this._fireEdit,this).off("touchmove",this._onMarkerDrag,this).off("touchend",this._fireEdit,this).off("click",this._onMarkerClick,this).off("MSPointerMove",this._onTouchMove,this).off("MSPointerUp",this._fireEdit,this)},_fireEdit:function(){this._poly.edited=!0,this._poly.fire("edit"),this._poly._map.fire(L.Draw.Event.EDITVERTEX,{layers:this._markerGroup,poly:this._poly})},_onMarkerDrag:function(i){var a=i.target,s=this._poly,o=L.LatLngUtil.cloneLatLng(a._origLatLng);if(L.extend(a._origLatLng,a._latlng),s.options.poly){var l=s._map._editTooltip;if(!s.options.poly.allowIntersection&&s.intersects()){L.extend(a._origLatLng,o),a.setLatLng(o);var c=s.options.color;s.setStyle({color:this.options.drawError.color}),l&&l.updateContent({text:L.drawLocal.draw.handlers.polyline.error}),setTimeout(function(){s.setStyle({color:c}),l&&l.updateContent({text:L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.edit.handlers.edit.tooltip.subtext})},1e3)}}a._middleLeft&&a._middleLeft.setLatLng(this._getMiddleLatLng(a._prev,a)),a._middleRight&&a._middleRight.setLatLng(this._getMiddleLatLng(a,a._next)),this._poly._bounds._southWest=L.latLng(1/0,1/0),this._poly._bounds._northEast=L.latLng(-1/0,-1/0);var h=this._poly.getLatLngs();this._poly._convertLatLngs(h,!0),this._poly.redraw(),this._poly.fire("editdrag")},_onMarkerClick:function(i){var a=L.Polygon&&this._poly instanceof L.Polygon?4:3,s=i.target;this._defaultShape().length<a||(this._removeMarker(s),this._updatePrevNext(s._prev,s._next),s._middleLeft&&this._markerGroup.removeLayer(s._middleLeft),s._middleRight&&this._markerGroup.removeLayer(s._middleRight),s._prev&&s._next?this._createMiddleMarker(s._prev,s._next):s._prev?s._next||(s._prev._middleRight=null):s._next._middleLeft=null,this._fireEdit())},_onContextMenu:function(i){var a=i.target;this._poly,this._poly._map.fire(L.Draw.Event.MARKERCONTEXT,{marker:a,layers:this._markerGroup,poly:this._poly}),L.DomEvent.stopPropagation},_onTouchMove:function(i){var a=this._map.mouseEventToLayerPoint(i.originalEvent.touches[0]),s=this._map.layerPointToLatLng(a),o=i.target;L.extend(o._origLatLng,s),o._middleLeft&&o._middleLeft.setLatLng(this._getMiddleLatLng(o._prev,o)),o._middleRight&&o._middleRight.setLatLng(this._getMiddleLatLng(o,o._next)),this._poly.redraw(),this.updateMarkers()},_updateIndexes:function(i,a){this._markerGroup.eachLayer(function(s){s._index>i&&(s._index+=a)})},_createMiddleMarker:function(i,a){var s,o,l,c=this._getMiddleLatLng(i,a),h=this._createMarker(c);h.setOpacity(.6),i._middleRight=a._middleLeft=h,o=function(){h.off("touchmove",o,this);var p=a._index;h._index=p,h.off("click",s,this).on("click",this._onMarkerClick,this),c.lat=h.getLatLng().lat,c.lng=h.getLatLng().lng,this._spliceLatLngs(p,0,c),this._markers.splice(p,0,h),h.setOpacity(1),this._updateIndexes(p,1),a._index++,this._updatePrevNext(i,h),this._updatePrevNext(h,a),this._poly.fire("editstart")},l=function(){h.off("dragstart",o,this),h.off("dragend",l,this),h.off("touchmove",o,this),this._createMiddleMarker(i,h),this._createMiddleMarker(h,a)},s=function(){o.call(this),l.call(this),this._fireEdit()},h.on("click",s,this).on("dragstart",o,this).on("dragend",l,this).on("touchmove",o,this),this._markerGroup.addLayer(h)},_updatePrevNext:function(i,a){i&&(i._next=a),a&&(a._prev=i)},_getMiddleLatLng:function(i,a){var s=this._poly._map,o=s.project(i.getLatLng()),l=s.project(a.getLatLng());return s.unproject(o._add(l)._divideBy(2))}}),L.Polyline.addInitHook(function(){this.editing||(L.Edit.Poly&&(this.editing=new L.Edit.Poly(this),this.options.editable&&this.editing.enable()),this.on("add",function(){this.editing&&this.editing.enabled()&&this.editing.addHooks()}),this.on("remove",function(){this.editing&&this.editing.enabled()&&this.editing.removeHooks()}))}),L.Edit=L.Edit||{},L.Edit.SimpleShape=L.Handler.extend({options:{moveIcon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-move"}),resizeIcon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-resize"}),touchMoveIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-move leaflet-touch-icon"}),touchResizeIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-resize leaflet-touch-icon"})},initialize:function(i,a){L.Browser.touch&&(this.options.moveIcon=this.options.touchMoveIcon,this.options.resizeIcon=this.options.touchResizeIcon),this._shape=i,L.Util.setOptions(this,a)},addHooks:function(){var i=this._shape;this._shape._map&&(this._map=this._shape._map,i.setStyle(i.options.editing),i._map&&(this._map=i._map,this._markerGroup||this._initMarkers(),this._map.addLayer(this._markerGroup)))},removeHooks:function(){var i=this._shape;if(i.setStyle(i.options.original),i._map){this._unbindMarker(this._moveMarker);for(var a=0,s=this._resizeMarkers.length;a<s;a++)this._unbindMarker(this._resizeMarkers[a]);this._resizeMarkers=null,this._map.removeLayer(this._markerGroup),delete this._markerGroup}this._map=null},updateMarkers:function(){this._markerGroup.clearLayers(),this._initMarkers()},_initMarkers:function(){this._markerGroup||(this._markerGroup=new L.LayerGroup),this._createMoveMarker(),this._createResizeMarker()},_createMoveMarker:function(){},_createResizeMarker:function(){},_createMarker:function(i,a){var s=new L.Marker.Touch(i,{draggable:!0,icon:a,zIndexOffset:10});return this._bindMarker(s),this._markerGroup.addLayer(s),s},_bindMarker:function(i){i.on("dragstart",this._onMarkerDragStart,this).on("drag",this._onMarkerDrag,this).on("dragend",this._onMarkerDragEnd,this).on("touchstart",this._onTouchStart,this).on("touchmove",this._onTouchMove,this).on("MSPointerMove",this._onTouchMove,this).on("touchend",this._onTouchEnd,this).on("MSPointerUp",this._onTouchEnd,this)},_unbindMarker:function(i){i.off("dragstart",this._onMarkerDragStart,this).off("drag",this._onMarkerDrag,this).off("dragend",this._onMarkerDragEnd,this).off("touchstart",this._onTouchStart,this).off("touchmove",this._onTouchMove,this).off("MSPointerMove",this._onTouchMove,this).off("touchend",this._onTouchEnd,this).off("MSPointerUp",this._onTouchEnd,this)},_onMarkerDragStart:function(i){i.target.setOpacity(0),this._shape.fire("editstart")},_fireEdit:function(){this._shape.edited=!0,this._shape.fire("edit")},_onMarkerDrag:function(i){var a=i.target,s=a.getLatLng();a===this._moveMarker?this._move(s):this._resize(s),this._shape.redraw(),this._shape.fire("editdrag")},_onMarkerDragEnd:function(i){i.target.setOpacity(1),this._fireEdit()},_onTouchStart:function(i){if(L.Edit.SimpleShape.prototype._onMarkerDragStart.call(this,i),typeof this._getCorners=="function"){var a=this._getCorners(),s=i.target,o=s._cornerIndex;s.setOpacity(0),this._oppositeCorner=a[(o+2)%4],this._toggleCornerMarkers(0,o)}this._shape.fire("editstart")},_onTouchMove:function(i){var a=this._map.mouseEventToLayerPoint(i.originalEvent.touches[0]),s=this._map.layerPointToLatLng(a);return i.target===this._moveMarker?this._move(s):this._resize(s),this._shape.redraw(),!1},_onTouchEnd:function(i){i.target.setOpacity(1),this.updateMarkers(),this._fireEdit()},_move:function(){},_resize:function(){}}),L.Edit=L.Edit||{},L.Edit.Rectangle=L.Edit.SimpleShape.extend({_createMoveMarker:function(){var i=this._shape.getBounds(),a=i.getCenter();this._moveMarker=this._createMarker(a,this.options.moveIcon)},_createResizeMarker:function(){var i=this._getCorners();this._resizeMarkers=[];for(var a=0,s=i.length;a<s;a++)this._resizeMarkers.push(this._createMarker(i[a],this.options.resizeIcon)),this._resizeMarkers[a]._cornerIndex=a},_onMarkerDragStart:function(i){L.Edit.SimpleShape.prototype._onMarkerDragStart.call(this,i);var a=this._getCorners(),s=i.target,o=s._cornerIndex;this._oppositeCorner=a[(o+2)%4],this._toggleCornerMarkers(0,o)},_onMarkerDragEnd:function(i){var a,s,o=i.target;o===this._moveMarker&&(a=this._shape.getBounds(),s=a.getCenter(),o.setLatLng(s)),this._toggleCornerMarkers(1),this._repositionCornerMarkers(),L.Edit.SimpleShape.prototype._onMarkerDragEnd.call(this,i)},_move:function(i){for(var a,s=this._shape._defaultShape?this._shape._defaultShape():this._shape.getLatLngs(),o=this._shape.getBounds(),l=o.getCenter(),c=[],h=0,p=s.length;h<p;h++)a=[s[h].lat-l.lat,s[h].lng-l.lng],c.push([i.lat+a[0],i.lng+a[1]]);this._shape.setLatLngs(c),this._repositionCornerMarkers(),this._map.fire(L.Draw.Event.EDITMOVE,{layer:this._shape})},_resize:function(i){var a;this._shape.setBounds(L.latLngBounds(i,this._oppositeCorner)),a=this._shape.getBounds(),this._moveMarker.setLatLng(a.getCenter()),this._map.fire(L.Draw.Event.EDITRESIZE,{layer:this._shape})},_getCorners:function(){var i=this._shape.getBounds();return[i.getNorthWest(),i.getNorthEast(),i.getSouthEast(),i.getSouthWest()]},_toggleCornerMarkers:function(i){for(var a=0,s=this._resizeMarkers.length;a<s;a++)this._resizeMarkers[a].setOpacity(i)},_repositionCornerMarkers:function(){for(var i=this._getCorners(),a=0,s=this._resizeMarkers.length;a<s;a++)this._resizeMarkers[a].setLatLng(i[a])}}),L.Rectangle.addInitHook(function(){L.Edit.Rectangle&&(this.editing=new L.Edit.Rectangle(this),this.options.editable&&this.editing.enable())}),L.Edit=L.Edit||{},L.Edit.CircleMarker=L.Edit.SimpleShape.extend({_createMoveMarker:function(){var i=this._shape.getLatLng();this._moveMarker=this._createMarker(i,this.options.moveIcon)},_createResizeMarker:function(){this._resizeMarkers=[]},_move:function(i){if(this._resizeMarkers.length){var a=this._getResizeMarkerPoint(i);this._resizeMarkers[0].setLatLng(a)}this._shape.setLatLng(i),this._map.fire(L.Draw.Event.EDITMOVE,{layer:this._shape})}}),L.CircleMarker.addInitHook(function(){L.Edit.CircleMarker&&(this.editing=new L.Edit.CircleMarker(this),this.options.editable&&this.editing.enable()),this.on("add",function(){this.editing&&this.editing.enabled()&&this.editing.addHooks()}),this.on("remove",function(){this.editing&&this.editing.enabled()&&this.editing.removeHooks()})}),L.Edit=L.Edit||{},L.Edit.Circle=L.Edit.CircleMarker.extend({_createResizeMarker:function(){var i=this._shape.getLatLng(),a=this._getResizeMarkerPoint(i);this._resizeMarkers=[],this._resizeMarkers.push(this._createMarker(a,this.options.resizeIcon))},_getResizeMarkerPoint:function(i){var a=this._shape._radius*Math.cos(Math.PI/4),s=this._map.project(i);return this._map.unproject([s.x+a,s.y-a])},_resize:function(i){var a=this._moveMarker.getLatLng();L.GeometryUtil.isVersion07x()?radius=a.distanceTo(i):radius=this._map.distance(a,i),this._shape.setRadius(radius),this._map.editTooltip&&this._map._editTooltip.updateContent({text:L.drawLocal.edit.handlers.edit.tooltip.subtext+"<br />"+L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.draw.handlers.circle.radius+": "+L.GeometryUtil.readableDistance(radius,!0,this.options.feet,this.options.nautic)}),this._shape.setRadius(radius),this._map.fire(L.Draw.Event.EDITRESIZE,{layer:this._shape})}}),L.Circle.addInitHook(function(){L.Edit.Circle&&(this.editing=new L.Edit.Circle(this),this.options.editable&&this.editing.enable())}),L.Map.mergeOptions({touchExtend:!0}),L.Map.TouchExtend=L.Handler.extend({initialize:function(i){this._map=i,this._container=i._container,this._pane=i._panes.overlayPane},addHooks:function(){L.DomEvent.on(this._container,"touchstart",this._onTouchStart,this),L.DomEvent.on(this._container,"touchend",this._onTouchEnd,this),L.DomEvent.on(this._container,"touchmove",this._onTouchMove,this),this._detectIE()?(L.DomEvent.on(this._container,"MSPointerDown",this._onTouchStart,this),L.DomEvent.on(this._container,"MSPointerUp",this._onTouchEnd,this),L.DomEvent.on(this._container,"MSPointerMove",this._onTouchMove,this),L.DomEvent.on(this._container,"MSPointerCancel",this._onTouchCancel,this)):(L.DomEvent.on(this._container,"touchcancel",this._onTouchCancel,this),L.DomEvent.on(this._container,"touchleave",this._onTouchLeave,this))},removeHooks:function(){L.DomEvent.off(this._container,"touchstart",this._onTouchStart,this),L.DomEvent.off(this._container,"touchend",this._onTouchEnd,this),L.DomEvent.off(this._container,"touchmove",this._onTouchMove,this),this._detectIE()?(L.DomEvent.off(this._container,"MSPointerDown",this._onTouchStart,this),L.DomEvent.off(this._container,"MSPointerUp",this._onTouchEnd,this),L.DomEvent.off(this._container,"MSPointerMove",this._onTouchMove,this),L.DomEvent.off(this._container,"MSPointerCancel",this._onTouchCancel,this)):(L.DomEvent.off(this._container,"touchcancel",this._onTouchCancel,this),L.DomEvent.off(this._container,"touchleave",this._onTouchLeave,this))},_touchEvent:function(i,a){var s={};if(i.touches!==void 0){if(!i.touches.length)return;s=i.touches[0]}else if(i.pointerType!=="touch"||(s=i,!this._filterClick(i)))return;var o=this._map.mouseEventToContainerPoint(s),l=this._map.mouseEventToLayerPoint(s),c=this._map.layerPointToLatLng(l);this._map.fire(a,{latlng:c,layerPoint:l,containerPoint:o,pageX:s.pageX,pageY:s.pageY,originalEvent:i})},_filterClick:function(i){var a=i.timeStamp||i.originalEvent.timeStamp,s=L.DomEvent._lastClick&&a-L.DomEvent._lastClick;return s&&s>100&&s<500||i.target._simulatedClick&&!i._simulated?(L.DomEvent.stop(i),!1):(L.DomEvent._lastClick=a,!0)},_onTouchStart:function(i){this._map._loaded&&this._touchEvent(i,"touchstart")},_onTouchEnd:function(i){this._map._loaded&&this._touchEvent(i,"touchend")},_onTouchCancel:function(i){if(this._map._loaded){var a="touchcancel";this._detectIE()&&(a="pointercancel"),this._touchEvent(i,a)}},_onTouchLeave:function(i){this._map._loaded&&this._touchEvent(i,"touchleave")},_onTouchMove:function(i){this._map._loaded&&this._touchEvent(i,"touchmove")},_detectIE:function(){var i=e.navigator.userAgent,a=i.indexOf("MSIE ");if(a>0)return parseInt(i.substring(a+5,i.indexOf(".",a)),10);if(i.indexOf("Trident/")>0){var s=i.indexOf("rv:");return parseInt(i.substring(s+3,i.indexOf(".",s)),10)}var o=i.indexOf("Edge/");return o>0&&parseInt(i.substring(o+5,i.indexOf(".",o)),10)}}),L.Map.addInitHook("addHandler","touchExtend",L.Map.TouchExtend),L.Marker.Touch=L.Marker.extend({_initInteraction:function(){return this.addInteractiveTarget?L.Marker.prototype._initInteraction.apply(this):this._initInteractionLegacy()},_initInteractionLegacy:function(){if(this.options.clickable){var i=this._icon,a=["dblclick","mousedown","mouseover","mouseout","contextmenu","touchstart","touchend","touchmove"];this._detectIE?a.concat(["MSPointerDown","MSPointerUp","MSPointerMove","MSPointerCancel"]):a.concat(["touchcancel"]),L.DomUtil.addClass(i,"leaflet-clickable"),L.DomEvent.on(i,"click",this._onMouseClick,this),L.DomEvent.on(i,"keypress",this._onKeyPress,this);for(var s=0;s<a.length;s++)L.DomEvent.on(i,a[s],this._fireMouseEvent,this);L.Handler.MarkerDrag&&(this.dragging=new L.Handler.MarkerDrag(this),this.options.draggable&&this.dragging.enable())}},_detectIE:function(){var i=e.navigator.userAgent,a=i.indexOf("MSIE ");if(a>0)return parseInt(i.substring(a+5,i.indexOf(".",a)),10);if(i.indexOf("Trident/")>0){var s=i.indexOf("rv:");return parseInt(i.substring(s+3,i.indexOf(".",s)),10)}var o=i.indexOf("Edge/");return o>0&&parseInt(i.substring(o+5,i.indexOf(".",o)),10)}}),L.LatLngUtil={cloneLatLngs:function(i){for(var a=[],s=0,o=i.length;s<o;s++)Array.isArray(i[s])?a.push(L.LatLngUtil.cloneLatLngs(i[s])):a.push(this.cloneLatLng(i[s]));return a},cloneLatLng:function(i){return L.latLng(i.lat,i.lng)}},function(){var i={km:2,ha:2,m:0,mi:2,ac:2,yd:0,ft:0,nm:2};L.GeometryUtil=L.extend(L.GeometryUtil||{},{geodesicArea:function(a){var s,o,l=a.length,c=0,h=Math.PI/180;if(l>2){for(var p=0;p<l;p++)s=a[p],o=a[(p+1)%l],c+=(o.lng-s.lng)*h*(2+Math.sin(s.lat*h)+Math.sin(o.lat*h));c=6378137*c*6378137/2}return Math.abs(c)},formattedNumber:function(a,s){var o=parseFloat(a).toFixed(s),l=L.drawLocal.format&&L.drawLocal.format.numeric,c=l&&l.delimiters,h=c&&c.thousands,p=c&&c.decimal;if(h||p){var E=o.split(".");o=h?E[0].replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+h):E[0],p=p||".",E.length>1&&(o=o+p+E[1])}return o},readableArea:function(a,s,p){var l,c,h,p=L.Util.extend({},i,p);return s?(c=["ha","m"],h=typeof s,h==="string"?c=[s]:h!=="boolean"&&(c=s),l=a>=1e6&&c.indexOf("km")!==-1?L.GeometryUtil.formattedNumber(1e-6*a,p.km)+" km\xB2":a>=1e4&&c.indexOf("ha")!==-1?L.GeometryUtil.formattedNumber(1e-4*a,p.ha)+" ha":L.GeometryUtil.formattedNumber(a,p.m)+" m\xB2"):(a/=.836127,l=a>=3097600?L.GeometryUtil.formattedNumber(a/3097600,p.mi)+" mi\xB2":a>=4840?L.GeometryUtil.formattedNumber(a/4840,p.ac)+" acres":L.GeometryUtil.formattedNumber(a,p.yd)+" yd\xB2"),l},readableDistance:function(a,s,o,l,p){var h,p=L.Util.extend({},i,p);switch(s?typeof s=="string"?s:"metric":o?"feet":l?"nauticalMile":"yards"){case"metric":h=a>1e3?L.GeometryUtil.formattedNumber(a/1e3,p.km)+" km":L.GeometryUtil.formattedNumber(a,p.m)+" m";break;case"feet":a*=3.28083,h=L.GeometryUtil.formattedNumber(a,p.ft)+" ft";break;case"nauticalMile":a*=.53996,h=L.GeometryUtil.formattedNumber(a/1e3,p.nm)+" nm";break;case"yards":default:a*=1.09361,h=a>1760?L.GeometryUtil.formattedNumber(a/1760,p.mi)+" miles":L.GeometryUtil.formattedNumber(a,p.yd)+" yd"}return h},isVersion07x:function(){var a=L.version.split(".");return parseInt(a[0],10)===0&&parseInt(a[1],10)===7}})}(),L.Util.extend(L.LineUtil,{segmentsIntersect:function(i,a,s,o){return this._checkCounterclockwise(i,s,o)!==this._checkCounterclockwise(a,s,o)&&this._checkCounterclockwise(i,a,s)!==this._checkCounterclockwise(i,a,o)},_checkCounterclockwise:function(i,a,s){return(s.y-i.y)*(a.x-i.x)>(a.y-i.y)*(s.x-i.x)}}),L.Polyline.include({intersects:function(){var i,a,s,o=this._getProjectedPoints(),l=o?o.length:0;if(this._tooFewPointsForIntersection())return!1;for(i=l-1;i>=3;i--)if(a=o[i-1],s=o[i],this._lineSegmentsIntersectsRange(a,s,i-2))return!0;return!1},newLatLngIntersects:function(i,a){return!!this._map&&this.newPointIntersects(this._map.latLngToLayerPoint(i),a)},newPointIntersects:function(i,a){var s=this._getProjectedPoints(),o=s?s.length:0,l=s?s[o-1]:null,c=o-2;return!this._tooFewPointsForIntersection(1)&&this._lineSegmentsIntersectsRange(l,i,c,a?1:0)},_tooFewPointsForIntersection:function(i){var a=this._getProjectedPoints(),s=a?a.length:0;return s+=i||0,!a||s<=3},_lineSegmentsIntersectsRange:function(i,a,s,o){var l,c,h=this._getProjectedPoints();o=o||0;for(var p=s;p>o;p--)if(l=h[p-1],c=h[p],L.LineUtil.segmentsIntersect(i,a,l,c))return!0;return!1},_getProjectedPoints:function(){if(!this._defaultShape)return this._originalPoints;for(var i=[],a=this._defaultShape(),s=0;s<a.length;s++)i.push(this._map.latLngToLayerPoint(a[s]));return i}}),L.Polygon.include({intersects:function(){var i,a,s,o,l=this._getProjectedPoints();return!this._tooFewPointsForIntersection()&&(!!L.Polyline.prototype.intersects.call(this)||(i=l.length,a=l[0],s=l[i-1],o=i-2,this._lineSegmentsIntersectsRange(s,a,o,1)))}}),L.Control.Draw=L.Control.extend({options:{position:"topleft",draw:{},edit:!1},initialize:function(i){if(L.version<"0.7")throw new Error("Leaflet.draw 0.2.3+ requires Leaflet 0.7.0+. Download latest from https://github.com/Leaflet/Leaflet/");L.Control.prototype.initialize.call(this,i);var a;this._toolbars={},L.DrawToolbar&&this.options.draw&&(a=new L.DrawToolbar(this.options.draw),this._toolbars[L.DrawToolbar.TYPE]=a,this._toolbars[L.DrawToolbar.TYPE].on("enable",this._toolbarEnabled,this)),L.EditToolbar&&this.options.edit&&(a=new L.EditToolbar(this.options.edit),this._toolbars[L.EditToolbar.TYPE]=a,this._toolbars[L.EditToolbar.TYPE].on("enable",this._toolbarEnabled,this)),L.toolbar=this},onAdd:function(i){var a,s=L.DomUtil.create("div","leaflet-draw"),o=!1;for(var l in this._toolbars)this._toolbars.hasOwnProperty(l)&&(a=this._toolbars[l].addToolbar(i))&&(o||(L.DomUtil.hasClass(a,"leaflet-draw-toolbar-top")||L.DomUtil.addClass(a.childNodes[0],"leaflet-draw-toolbar-top"),o=!0),s.appendChild(a));return s},onRemove:function(){for(var i in this._toolbars)this._toolbars.hasOwnProperty(i)&&this._toolbars[i].removeToolbar()},setDrawingOptions:function(i){for(var a in this._toolbars)this._toolbars[a]instanceof L.DrawToolbar&&this._toolbars[a].setOptions(i)},_toolbarEnabled:function(i){var a=i.target;for(var s in this._toolbars)this._toolbars[s]!==a&&this._toolbars[s].disable()}}),L.Map.mergeOptions({drawControlTooltips:!0,drawControl:!1}),L.Map.addInitHook(function(){this.options.drawControl&&(this.drawControl=new L.Control.Draw,this.addControl(this.drawControl))}),L.Toolbar=L.Class.extend({initialize:function(i){L.setOptions(this,i),this._modes={},this._actionButtons=[],this._activeMode=null;var a=L.version.split(".");parseInt(a[0],10)===1&&parseInt(a[1],10)>=2?L.Toolbar.include(L.Evented.prototype):L.Toolbar.include(L.Mixin.Events)},enabled:function(){return this._activeMode!==null},disable:function(){this.enabled()&&this._activeMode.handler.disable()},addToolbar:function(i){var a,s=L.DomUtil.create("div","leaflet-draw-section"),o=0,l=this._toolbarClass||"",c=this.getModeHandlers(i);for(this._toolbarContainer=L.DomUtil.create("div","leaflet-draw-toolbar leaflet-bar"),this._map=i,a=0;a<c.length;a++)c[a].enabled&&this._initModeHandler(c[a].handler,this._toolbarContainer,o++,l,c[a].title);if(o)return this._lastButtonIndex=--o,this._actionsContainer=L.DomUtil.create("ul","leaflet-draw-actions"),s.appendChild(this._toolbarContainer),s.appendChild(this._actionsContainer),s},removeToolbar:function(){for(var i in this._modes)this._modes.hasOwnProperty(i)&&(this._disposeButton(this._modes[i].button,this._modes[i].handler.enable,this._modes[i].handler),this._modes[i].handler.disable(),this._modes[i].handler.off("enabled",this._handlerActivated,this).off("disabled",this._handlerDeactivated,this));this._modes={};for(var a=0,s=this._actionButtons.length;a<s;a++)this._disposeButton(this._actionButtons[a].button,this._actionButtons[a].callback,this);this._actionButtons=[],this._actionsContainer=null},_initModeHandler:function(i,a,s,o,l){var c=i.type;this._modes[c]={},this._modes[c].handler=i,this._modes[c].button=this._createButton({type:c,title:l,className:o+"-"+c,container:a,callback:this._modes[c].handler.enable,context:this._modes[c].handler}),this._modes[c].buttonIndex=s,this._modes[c].handler.on("enabled",this._handlerActivated,this).on("disabled",this._handlerDeactivated,this)},_detectIOS:function(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!e.MSStream},_createButton:function(i){var a=L.DomUtil.create("a",i.className||"",i.container),s=L.DomUtil.create("span","sr-only",i.container);a.href="#",a.appendChild(s),i.title&&(a.title=i.title,s.innerHTML=i.title),i.text&&(a.innerHTML=i.text,s.innerHTML=i.text);var o=this._detectIOS()?"touchstart":"click";return L.DomEvent.on(a,"click",L.DomEvent.stopPropagation).on(a,"mousedown",L.DomEvent.stopPropagation).on(a,"dblclick",L.DomEvent.stopPropagation).on(a,"touchstart",L.DomEvent.stopPropagation).on(a,"click",L.DomEvent.preventDefault).on(a,o,i.callback,i.context),a},_disposeButton:function(i,a){var s=this._detectIOS()?"touchstart":"click";L.DomEvent.off(i,"click",L.DomEvent.stopPropagation).off(i,"mousedown",L.DomEvent.stopPropagation).off(i,"dblclick",L.DomEvent.stopPropagation).off(i,"touchstart",L.DomEvent.stopPropagation).off(i,"click",L.DomEvent.preventDefault).off(i,s,a)},_handlerActivated:function(i){this.disable(),this._activeMode=this._modes[i.handler],L.DomUtil.addClass(this._activeMode.button,"leaflet-draw-toolbar-button-enabled"),this._showActionsToolbar(),this.fire("enable")},_handlerDeactivated:function(){this._hideActionsToolbar(),L.DomUtil.removeClass(this._activeMode.button,"leaflet-draw-toolbar-button-enabled"),this._activeMode=null,this.fire("disable")},_createActions:function(i){var a,s,o,l,c=this._actionsContainer,h=this.getActions(i),p=h.length;for(s=0,o=this._actionButtons.length;s<o;s++)this._disposeButton(this._actionButtons[s].button,this._actionButtons[s].callback);for(this._actionButtons=[];c.firstChild;)c.removeChild(c.firstChild);for(var E=0;E<p;E++)"enabled"in h[E]&&!h[E].enabled||(a=L.DomUtil.create("li","",c),l=this._createButton({title:h[E].title,text:h[E].text,container:a,callback:h[E].callback,context:h[E].context}),this._actionButtons.push({button:l,callback:h[E].callback}))},_showActionsToolbar:function(){var i=this._activeMode.buttonIndex,a=this._lastButtonIndex,s=this._activeMode.button.offsetTop-1;this._createActions(this._activeMode.handler),this._actionsContainer.style.top=s+"px",i===0&&(L.DomUtil.addClass(this._toolbarContainer,"leaflet-draw-toolbar-notop"),L.DomUtil.addClass(this._actionsContainer,"leaflet-draw-actions-top")),i===a&&(L.DomUtil.addClass(this._toolbarContainer,"leaflet-draw-toolbar-nobottom"),L.DomUtil.addClass(this._actionsContainer,"leaflet-draw-actions-bottom")),this._actionsContainer.style.display="block",this._map.fire(L.Draw.Event.TOOLBAROPENED)},_hideActionsToolbar:function(){this._actionsContainer.style.display="none",L.DomUtil.removeClass(this._toolbarContainer,"leaflet-draw-toolbar-notop"),L.DomUtil.removeClass(this._toolbarContainer,"leaflet-draw-toolbar-nobottom"),L.DomUtil.removeClass(this._actionsContainer,"leaflet-draw-actions-top"),L.DomUtil.removeClass(this._actionsContainer,"leaflet-draw-actions-bottom"),this._map.fire(L.Draw.Event.TOOLBARCLOSED)}}),L.Draw=L.Draw||{},L.Draw.Tooltip=L.Class.extend({initialize:function(i){this._map=i,this._popupPane=i._panes.popupPane,this._visible=!1,this._container=i.options.drawControlTooltips?L.DomUtil.create("div","leaflet-draw-tooltip",this._popupPane):null,this._singleLineLabel=!1,this._map.on("mouseout",this._onMouseOut,this)},dispose:function(){this._map.off("mouseout",this._onMouseOut,this),this._container&&(this._popupPane.removeChild(this._container),this._container=null)},updateContent:function(i){return this._container?(i.subtext=i.subtext||"",i.subtext.length!==0||this._singleLineLabel?i.subtext.length>0&&this._singleLineLabel&&(L.DomUtil.removeClass(this._container,"leaflet-draw-tooltip-single"),this._singleLineLabel=!1):(L.DomUtil.addClass(this._container,"leaflet-draw-tooltip-single"),this._singleLineLabel=!0),this._container.innerHTML=(i.subtext.length>0?'<span class="leaflet-draw-tooltip-subtext">'+i.subtext+"</span><br />":"")+"<span>"+i.text+"</span>",i.text||i.subtext?(this._visible=!0,this._container.style.visibility="inherit"):(this._visible=!1,this._container.style.visibility="hidden"),this):this},updatePosition:function(i){var a=this._map.latLngToLayerPoint(i),s=this._container;return this._container&&(this._visible&&(s.style.visibility="inherit"),L.DomUtil.setPosition(s,a)),this},showAsError:function(){return this._container&&L.DomUtil.addClass(this._container,"leaflet-error-draw-tooltip"),this},removeError:function(){return this._container&&L.DomUtil.removeClass(this._container,"leaflet-error-draw-tooltip"),this},_onMouseOut:function(){this._container&&(this._container.style.visibility="hidden")}}),L.DrawToolbar=L.Toolbar.extend({statics:{TYPE:"draw"},options:{polyline:{},polygon:{},rectangle:{},circle:{},marker:{},circlemarker:{}},initialize:function(i){for(var a in this.options)this.options.hasOwnProperty(a)&&i[a]&&(i[a]=L.extend({},this.options[a],i[a]));this._toolbarClass="leaflet-draw-draw",L.Toolbar.prototype.initialize.call(this,i)},getModeHandlers:function(i){return[{enabled:this.options.polyline,handler:new L.Draw.Polyline(i,this.options.polyline),title:L.drawLocal.draw.toolbar.buttons.polyline},{enabled:this.options.polygon,handler:new L.Draw.Polygon(i,this.options.polygon),title:L.drawLocal.draw.toolbar.buttons.polygon},{enabled:this.options.rectangle,handler:new L.Draw.Rectangle(i,this.options.rectangle),title:L.drawLocal.draw.toolbar.buttons.rectangle},{enabled:this.options.circle,handler:new L.Draw.Circle(i,this.options.circle),title:L.drawLocal.draw.toolbar.buttons.circle},{enabled:this.options.marker,handler:new L.Draw.Marker(i,this.options.marker),title:L.drawLocal.draw.toolbar.buttons.marker},{enabled:this.options.circlemarker,handler:new L.Draw.CircleMarker(i,this.options.circlemarker),title:L.drawLocal.draw.toolbar.buttons.circlemarker}]},getActions:function(i){return[{enabled:i.completeShape,title:L.drawLocal.draw.toolbar.finish.title,text:L.drawLocal.draw.toolbar.finish.text,callback:i.completeShape,context:i},{enabled:i.deleteLastVertex,title:L.drawLocal.draw.toolbar.undo.title,text:L.drawLocal.draw.toolbar.undo.text,callback:i.deleteLastVertex,context:i},{title:L.drawLocal.draw.toolbar.actions.title,text:L.drawLocal.draw.toolbar.actions.text,callback:this.disable,context:this}]},setOptions:function(i){L.setOptions(this,i);for(var a in this._modes)this._modes.hasOwnProperty(a)&&i.hasOwnProperty(a)&&this._modes[a].handler.setOptions(i[a])}}),L.EditToolbar=L.Toolbar.extend({statics:{TYPE:"edit"},options:{edit:{selectedPathOptions:{dashArray:"10, 10",fill:!0,fillColor:"#fe57a1",fillOpacity:.1,maintainColor:!1}},remove:{},poly:null,featureGroup:null},initialize:function(i){i.edit&&(i.edit.selectedPathOptions===void 0&&(i.edit.selectedPathOptions=this.options.edit.selectedPathOptions),i.edit.selectedPathOptions=L.extend({},this.options.edit.selectedPathOptions,i.edit.selectedPathOptions)),i.remove&&(i.remove=L.extend({},this.options.remove,i.remove)),i.poly&&(i.poly=L.extend({},this.options.poly,i.poly)),this._toolbarClass="leaflet-draw-edit",L.Toolbar.prototype.initialize.call(this,i),this._selectedFeatureCount=0},getModeHandlers:function(i){var a=this.options.featureGroup;return[{enabled:this.options.edit,handler:new L.EditToolbar.Edit(i,{featureGroup:a,selectedPathOptions:this.options.edit.selectedPathOptions,poly:this.options.poly}),title:L.drawLocal.edit.toolbar.buttons.edit},{enabled:this.options.remove,handler:new L.EditToolbar.Delete(i,{featureGroup:a}),title:L.drawLocal.edit.toolbar.buttons.remove}]},getActions:function(i){var a=[{title:L.drawLocal.edit.toolbar.actions.save.title,text:L.drawLocal.edit.toolbar.actions.save.text,callback:this._save,context:this},{title:L.drawLocal.edit.toolbar.actions.cancel.title,text:L.drawLocal.edit.toolbar.actions.cancel.text,callback:this.disable,context:this}];return i.removeAllLayers&&a.push({title:L.drawLocal.edit.toolbar.actions.clearAll.title,text:L.drawLocal.edit.toolbar.actions.clearAll.text,callback:this._clearAllLayers,context:this}),a},addToolbar:function(i){var a=L.Toolbar.prototype.addToolbar.call(this,i);return this._checkDisabled(),this.options.featureGroup.on("layeradd layerremove",this._checkDisabled,this),a},removeToolbar:function(){this.options.featureGroup.off("layeradd layerremove",this._checkDisabled,this),L.Toolbar.prototype.removeToolbar.call(this)},disable:function(){this.enabled()&&(this._activeMode.handler.revertLayers(),L.Toolbar.prototype.disable.call(this))},_save:function(){this._activeMode.handler.save(),this._activeMode&&this._activeMode.handler.disable()},_clearAllLayers:function(){this._activeMode.handler.removeAllLayers(),this._activeMode&&this._activeMode.handler.disable()},_checkDisabled:function(){var i,a=this.options.featureGroup,s=a.getLayers().length!==0;this.options.edit&&(i=this._modes[L.EditToolbar.Edit.TYPE].button,s?L.DomUtil.removeClass(i,"leaflet-disabled"):L.DomUtil.addClass(i,"leaflet-disabled"),i.setAttribute("title",s?L.drawLocal.edit.toolbar.buttons.edit:L.drawLocal.edit.toolbar.buttons.editDisabled)),this.options.remove&&(i=this._modes[L.EditToolbar.Delete.TYPE].button,s?L.DomUtil.removeClass(i,"leaflet-disabled"):L.DomUtil.addClass(i,"leaflet-disabled"),i.setAttribute("title",s?L.drawLocal.edit.toolbar.buttons.remove:L.drawLocal.edit.toolbar.buttons.removeDisabled))}}),L.EditToolbar.Edit=L.Handler.extend({statics:{TYPE:"edit"},initialize:function(i,a){if(L.Handler.prototype.initialize.call(this,i),L.setOptions(this,a),this._featureGroup=a.featureGroup,!(this._featureGroup instanceof L.FeatureGroup))throw new Error("options.featureGroup must be a L.FeatureGroup");this._uneditedLayerProps={},this.type=L.EditToolbar.Edit.TYPE;var s=L.version.split(".");parseInt(s[0],10)===1&&parseInt(s[1],10)>=2?L.EditToolbar.Edit.include(L.Evented.prototype):L.EditToolbar.Edit.include(L.Mixin.Events)},enable:function(){!this._enabled&&this._hasAvailableLayers()&&(this.fire("enabled",{handler:this.type}),this._map.fire(L.Draw.Event.EDITSTART,{handler:this.type}),L.Handler.prototype.enable.call(this),this._featureGroup.on("layeradd",this._enableLayerEdit,this).on("layerremove",this._disableLayerEdit,this))},disable:function(){this._enabled&&(this._featureGroup.off("layeradd",this._enableLayerEdit,this).off("layerremove",this._disableLayerEdit,this),L.Handler.prototype.disable.call(this),this._map.fire(L.Draw.Event.EDITSTOP,{handler:this.type}),this.fire("disabled",{handler:this.type}))},addHooks:function(){var i=this._map;i&&(i.getContainer().focus(),this._featureGroup.eachLayer(this._enableLayerEdit,this),this._tooltip=new L.Draw.Tooltip(this._map),this._tooltip.updateContent({text:L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.edit.handlers.edit.tooltip.subtext}),i._editTooltip=this._tooltip,this._updateTooltip(),this._map.on("mousemove",this._onMouseMove,this).on("touchmove",this._onMouseMove,this).on("MSPointerMove",this._onMouseMove,this).on(L.Draw.Event.EDITVERTEX,this._updateTooltip,this))},removeHooks:function(){this._map&&(this._featureGroup.eachLayer(this._disableLayerEdit,this),this._uneditedLayerProps={},this._tooltip.dispose(),this._tooltip=null,this._map.off("mousemove",this._onMouseMove,this).off("touchmove",this._onMouseMove,this).off("MSPointerMove",this._onMouseMove,this).off(L.Draw.Event.EDITVERTEX,this._updateTooltip,this))},revertLayers:function(){this._featureGroup.eachLayer(function(i){this._revertLayer(i)},this)},save:function(){var i=new L.LayerGroup;this._featureGroup.eachLayer(function(a){a.edited&&(i.addLayer(a),a.edited=!1)}),this._map.fire(L.Draw.Event.EDITED,{layers:i})},_backupLayer:function(i){var a=L.Util.stamp(i);this._uneditedLayerProps[a]||(i instanceof L.Polyline||i instanceof L.Polygon||i instanceof L.Rectangle?this._uneditedLayerProps[a]={latlngs:L.LatLngUtil.cloneLatLngs(i.getLatLngs())}:i instanceof L.Circle?this._uneditedLayerProps[a]={latlng:L.LatLngUtil.cloneLatLng(i.getLatLng()),radius:i.getRadius()}:(i instanceof L.Marker||i instanceof L.CircleMarker)&&(this._uneditedLayerProps[a]={latlng:L.LatLngUtil.cloneLatLng(i.getLatLng())}))},_getTooltipText:function(){return{text:L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.edit.handlers.edit.tooltip.subtext}},_updateTooltip:function(){this._tooltip.updateContent(this._getTooltipText())},_revertLayer:function(i){var a=L.Util.stamp(i);i.edited=!1,this._uneditedLayerProps.hasOwnProperty(a)&&(i instanceof L.Polyline||i instanceof L.Polygon||i instanceof L.Rectangle?i.setLatLngs(this._uneditedLayerProps[a].latlngs):i instanceof L.Circle?(i.setLatLng(this._uneditedLayerProps[a].latlng),i.setRadius(this._uneditedLayerProps[a].radius)):(i instanceof L.Marker||i instanceof L.CircleMarker)&&i.setLatLng(this._uneditedLayerProps[a].latlng),i.fire("revert-edited",{layer:i}))},_enableLayerEdit:function(i){var a,s,o=i.layer||i.target||i;this._backupLayer(o),this.options.poly&&(s=L.Util.extend({},this.options.poly),o.options.poly=s),this.options.selectedPathOptions&&(a=L.Util.extend({},this.options.selectedPathOptions),a.maintainColor&&(a.color=o.options.color,a.fillColor=o.options.fillColor),o.options.original=L.extend({},o.options),o.options.editing=a),o instanceof L.Marker?(o.editing&&o.editing.enable(),o.dragging.enable(),o.on("dragend",this._onMarkerDragEnd).on("touchmove",this._onTouchMove,this).on("MSPointerMove",this._onTouchMove,this).on("touchend",this._onMarkerDragEnd,this).on("MSPointerUp",this._onMarkerDragEnd,this)):o.editing.enable()},_disableLayerEdit:function(i){var a=i.layer||i.target||i;a.edited=!1,a.editing&&a.editing.disable(),delete a.options.editing,delete a.options.original,this._selectedPathOptions&&(a instanceof L.Marker?this._toggleMarkerHighlight(a):(a.setStyle(a.options.previousOptions),delete a.options.previousOptions)),a instanceof L.Marker?(a.dragging.disable(),a.off("dragend",this._onMarkerDragEnd,this).off("touchmove",this._onTouchMove,this).off("MSPointerMove",this._onTouchMove,this).off("touchend",this._onMarkerDragEnd,this).off("MSPointerUp",this._onMarkerDragEnd,this)):a.editing.disable()},_onMouseMove:function(i){this._tooltip.updatePosition(i.latlng)},_onMarkerDragEnd:function(i){var a=i.target;a.edited=!0,this._map.fire(L.Draw.Event.EDITMOVE,{layer:a})},_onTouchMove:function(i){var a=i.originalEvent.changedTouches[0],s=this._map.mouseEventToLayerPoint(a),o=this._map.layerPointToLatLng(s);i.target.setLatLng(o)},_hasAvailableLayers:function(){return this._featureGroup.getLayers().length!==0}}),L.EditToolbar.Delete=L.Handler.extend({statics:{TYPE:"remove"},initialize:function(i,a){if(L.Handler.prototype.initialize.call(this,i),L.Util.setOptions(this,a),this._deletableLayers=this.options.featureGroup,!(this._deletableLayers instanceof L.FeatureGroup))throw new Error("options.featureGroup must be a L.FeatureGroup");this.type=L.EditToolbar.Delete.TYPE;var s=L.version.split(".");parseInt(s[0],10)===1&&parseInt(s[1],10)>=2?L.EditToolbar.Delete.include(L.Evented.prototype):L.EditToolbar.Delete.include(L.Mixin.Events)},enable:function(){!this._enabled&&this._hasAvailableLayers()&&(this.fire("enabled",{handler:this.type}),this._map.fire(L.Draw.Event.DELETESTART,{handler:this.type}),L.Handler.prototype.enable.call(this),this._deletableLayers.on("layeradd",this._enableLayerDelete,this).on("layerremove",this._disableLayerDelete,this))},disable:function(){this._enabled&&(this._deletableLayers.off("layeradd",this._enableLayerDelete,this).off("layerremove",this._disableLayerDelete,this),L.Handler.prototype.disable.call(this),this._map.fire(L.Draw.Event.DELETESTOP,{handler:this.type}),this.fire("disabled",{handler:this.type}))},addHooks:function(){var i=this._map;i&&(i.getContainer().focus(),this._deletableLayers.eachLayer(this._enableLayerDelete,this),this._deletedLayers=new L.LayerGroup,this._tooltip=new L.Draw.Tooltip(this._map),this._tooltip.updateContent({text:L.drawLocal.edit.handlers.remove.tooltip.text}),this._map.on("mousemove",this._onMouseMove,this))},removeHooks:function(){this._map&&(this._deletableLayers.eachLayer(this._disableLayerDelete,this),this._deletedLayers=null,this._tooltip.dispose(),this._tooltip=null,this._map.off("mousemove",this._onMouseMove,this))},revertLayers:function(){this._deletedLayers.eachLayer(function(i){this._deletableLayers.addLayer(i),i.fire("revert-deleted",{layer:i})},this)},save:function(){this._map.fire(L.Draw.Event.DELETED,{layers:this._deletedLayers})},removeAllLayers:function(){this._deletableLayers.eachLayer(function(i){this._removeLayer({layer:i})},this),this.save()},_enableLayerDelete:function(i){(i.layer||i.target||i).on("click",this._removeLayer,this)},_disableLayerDelete:function(i){var a=i.layer||i.target||i;a.off("click",this._removeLayer,this),this._deletedLayers.removeLayer(a)},_removeLayer:function(i){var a=i.layer||i.target||i;this._deletableLayers.removeLayer(a),this._deletedLayers.addLayer(a),a.fire("deleted")},_onMouseMove:function(i){this._tooltip.updatePosition(i.latlng)},_hasAvailableLayers:function(){return this._deletableLayers.getLayers().length!==0}})})(window,document);(function(){"use strict";var e=Symbol("newer"),t=Symbol("older"),n=function(c,h){typeof c!="number"&&(h=c,c=0),this.size=0,this.limit=c,this.oldest=this.newest=void 0,this._keymap=new Map,h&&(this.assign(h),c<1&&(this.limit=this.size))};n.prototype._markEntryAsUsed=function(c){c!==this.newest&&(c[e]&&(c===this.oldest&&(this.oldest=c[e]),c[e][t]=c[t]),c[t]&&(c[t][e]=c[e]),c[e]=void 0,c[t]=this.newest,this.newest&&(this.newest[e]=c),this.newest=c)},n.prototype.assign=function(c){var h,p=this.limit||Number.MAX_VALUE;this._keymap.clear();for(var E=c[Symbol.iterator](),b=E.next();!b.done;b=E.next()){var C=new r(b.value[0],b.value[1]);if(this._keymap.set(C.key,C),h?(h[e]=C,C[t]=h):this.oldest=C,h=C,p--==0)throw new Error("overflow")}this.newest=h,this.size=this._keymap.size},n.prototype.get=function(c){var h=this._keymap.get(c);if(h)return this._markEntryAsUsed(h),h.value},n.prototype.set=function(c,h){var p=this._keymap.get(c);return p?(p.value=h,this._markEntryAsUsed(p),this):(this._keymap.set(c,p=new r(c,h)),this.newest?(this.newest[e]=p,p[t]=this.newest):this.oldest=p,this.newest=p,++this.size,this.size>this.limit&&this.shift(),this)},n.prototype.shift=function(){var c=this.oldest;if(c)return this.oldest[e]?(this.oldest=this.oldest[e],this.oldest[t]=void 0):(this.oldest=void 0,this.newest=void 0),c[e]=c[t]=void 0,this._keymap.delete(c.key),--this.size,[c.key,c.value]},n.prototype.find=function(c){var h=this._keymap.get(c);return h?h.value:void 0},n.prototype.has=function(c){return this._keymap.has(c)},n.prototype.delete=function(c){var h=this._keymap.get(c);if(h)return this._keymap.delete(h.key),h[e]&&h[t]?(h[t][e]=h[e],h[e][t]=h[t]):h[e]?(h[e][t]=void 0,this.oldest=h[e]):h[t]?(h[t][e]=void 0,this.newest=h[t]):this.oldest=this.newest=void 0,this.size--,h.value},n.prototype.clear=function(){this.oldest=this.newest=void 0,this.size=0,this._keymap.clear()},n.prototype.keys=function(){return new a(this.oldest)},n.prototype.values=function(){return new s(this.oldest)},n.prototype.entries=function(){return this},n.prototype[Symbol.iterator]=function(){return new i(this.oldest)},n.prototype.forEach=function(c,h){typeof h!="object"&&(h=this);for(var p=this.oldest;p;)c.call(h,p.value,p.key,this),p=p[e]},n.prototype.toJSON=function(){for(var c=new Array(this.size),h=0,p=this.oldest;p;)c[h++]={key:p.key,value:p.value},p=p[e];return c},n.prototype.toString=function(){for(var c="",h=this.oldest;h;)c+=String(h.key)+":"+h.value,h=h[e],h&&(c+=" < ");return c};function r(l,c){this.key=l,this.value=c,this[e]=void 0,this[t]=void 0}function i(l){this.entry=l}i.prototype[Symbol.iterator]=function(){return this},i.prototype.next=function(){var l=this.entry;return l?(this.entry=l[e],{done:!1,value:[l.key,l.value]}):{done:!0,value:void 0}};function a(l){this.entry=l}a.prototype[Symbol.iterator]=function(){return this},a.prototype.next=function(){var l=this.entry;return l?(this.entry=l[e],{done:!1,value:l.key}):{done:!0,value:void 0}};function s(l){this.entry=l}s.prototype[Symbol.iterator]=function(){return this},s.prototype.next=function(){var l=this.entry;return l?(this.entry=l[e],{done:!1,value:l.value}):{done:!0,value:void 0}};function o(l,c){var h=0,p=null;p=setInterval(function(){if(h>=20)throw clearInterval(p),new Error("window.google not found after 10 seconds");window.google&&window.google.maps&&window.google.maps.Map&&(clearInterval(p),l.call(c)),++h},500)}L.GridLayer.GoogleMutant=L.GridLayer.extend({options:{maxZoom:21,type:"roadmap",maxNativeZoom:21},initialize:function(l){L.GridLayer.prototype.initialize.call(this,l),this._tileCallbacks={},this._lru=new n(100),this._imagesPerTile=this.options.type==="hybrid"?2:1,this._boundOnMutatedImage=this._onMutatedImage.bind(this)},onAdd:function(l){var c=this;L.GridLayer.prototype.onAdd.call(this,l),this._initMutantContainer(),this._logoContainer&&l._controlCorners.bottomleft.appendChild(this._logoContainer),this._attributionContainer&&l._controlCorners.bottomright.appendChild(this._attributionContainer),o(function(){c._map&&(c._initMutant(),google.maps.event.addListenerOnce(c._mutant,"idle",function(){c._map&&(c._checkZoomLevels(),c._mutantIsReady=!0)}))})},onRemove:function(l){L.GridLayer.prototype.onRemove.call(this,l),this._observer.disconnect(),l._container.removeChild(this._mutantContainer),this._logoContainer&&L.DomUtil.remove(this._logoContainer),this._attributionContainer&&L.DomUtil.remove(this._attributionContainer),this._mutant&&google.maps.event.clearListeners(this._mutant,"idle")},addGoogleLayer:function(l,c){var h=this;return this._subLayers||(this._subLayers={}),this.whenReady(function(){var p=google.maps[l],E=new p(c);E.setMap(h._mutant),h._subLayers[l]=E}),this},removeGoogleLayer:function(l){var c=this;return this.whenReady(function(){var h=c._subLayers&&c._subLayers[l];h&&(h.setMap(null),delete c._subLayers[l])}),this},_initMutantContainer:function(){this._mutantContainer||(this._mutantContainer=L.DomUtil.create("div","leaflet-google-mutant leaflet-top leaflet-left"),this._mutantContainer.id="_MutantContainer_"+L.Util.stamp(this._mutantContainer),this._mutantContainer.style.pointerEvents="none",this._mutantContainer.style.visibility="hidden",L.DomEvent.off(this._mutantContainer)),this._map.getContainer().appendChild(this._mutantContainer),this.setOpacity(this.options.opacity);var l=this._mutantContainer.style;this._map.options.zoomSnap<1?(l.width="180%",l.height="180%"):(l.width="100%",l.height="100%"),l.zIndex=-1,this._attachObserver(this._mutantContainer)},_initMutant:function(){if(!this._mutant){var l=new google.maps.Map(this._mutantContainer,{center:{lat:0,lng:0},zoom:0,tilt:0,mapTypeId:this.options.type,disableDefaultUI:!0,keyboardShortcuts:!1,draggable:!1,disableDoubleClickZoom:!0,scrollwheel:!1,styles:this.options.styles||[],backgroundColor:"transparent"});this._mutant=l,this._update(),this.fire("spawned",{mapObject:l}),this._waitControls(),this.once("controls_ready",this._setupAttribution)}},_attachObserver:function(c){this._observer||(this._observer=new MutationObserver(this._onMutations.bind(this))),this._observer.observe(c,{childList:!0,subtree:!0}),Array.prototype.forEach.call(c.querySelectorAll("img"),this._boundOnMutatedImage)},_waitControls:function(){var l=this,c=setInterval(function(){var h=l._mutant.__gm.layoutManager;if(h){clearInterval(c);var p;Object.keys(h).forEach(function(E){var b=h[E];b.get&&b.get(1)instanceof Node&&(p=b)}),l.fire("controls_ready",{positions:p})}},50)},_setupAttribution:function(l){var c=google.maps.ControlPosition,h=this._attributionContainer=l.positions.get(c.BOTTOM_RIGHT);L.DomUtil.addClass(h,"leaflet-control leaflet-control-attribution"),L.DomEvent.disableClickPropagation(h),h.style.height="14px",this._map._controlCorners.bottomright.appendChild(h),this._logoContainer=l.positions.get(c.BOTTOM_LEFT),this._logoContainer.style.pointerEvents="auto",this._map._controlCorners.bottomleft.appendChild(this._logoContainer)},_onMutations:function(c){for(var h=0;h<c.length;++h)for(var p=c[h],E=0;E<p.addedNodes.length;++E){var b=p.addedNodes[E];b instanceof HTMLImageElement?this._onMutatedImage(b):b instanceof HTMLElement&&Array.prototype.forEach.call(b.querySelectorAll("img"),this._boundOnMutatedImage)}},_roadRegexp:/!1i(\d+)!2i(\d+)!3i(\d+)!/,_satRegexp:/x=(\d+)&y=(\d+)&z=(\d+)/,_staticRegExp:/StaticMapService\.GetMapImage/,_onMutatedImage:function(c){var h,p=c.src.match(this._roadRegexp),E=0;if(p?(h={z:p[1],x:p[2],y:p[3]},this._imagesPerTile>1&&(c.style.zIndex=1,E=1)):(p=c.src.match(this._satRegexp),p&&(h={x:p[1],y:p[2],z:p[3]}),E=0),h){var b=this._tileCoordsToKey(h);c.style.position="absolute";var C=b+"/"+E;this._lru.set(C,c),C in this._tileCallbacks&&this._tileCallbacks[C]&&(this._tileCallbacks[C].forEach(function(N){return N(c)}),delete this._tileCallbacks[C])}},createTile:function(l,c){var h=this._tileCoordsToKey(l),p=L.DomUtil.create("div");p.style.textAlign="left",p.dataset.pending=this._imagesPerTile,c=c.bind(this,null,p);for(var E=0;E<this._imagesPerTile;++E){var b=h+"/"+E,C=this._lru.get(b);C?(p.appendChild(this._clone(C)),--p.dataset.pending):(this._tileCallbacks[b]=this._tileCallbacks[b]||[],this._tileCallbacks[b].push(function(N){return function(w){N.appendChild(this._clone(w)),--N.dataset.pending,parseInt(N.dataset.pending)||c()}.bind(this)}.bind(this)(p)))}return parseInt(p.dataset.pending)||L.Util.requestAnimFrame(c),p},_clone:function(l){var c=l.cloneNode(!0);return c.style.visibility="visible",c},_checkZoomLevels:function(){var l=this._map.getZoom(),c=this._mutant.getZoom();!l||!c||(c!==l||c>this.options.maxNativeZoom)&&this._setMaxNativeZoom(c)},_setMaxNativeZoom:function(l){l!==this.options.maxNativeZoom&&(this.options.maxNativeZoom=l,this._resetView())},_update:function(l){if(this._mutant){l=l||this._map.getCenter();var c=new google.maps.LatLng(l.lat,l.lng),h=Math.round(this._map.getZoom()),p=this._mutant.getZoom();this._mutant.setCenter(c),h!==p&&(this._mutant.setZoom(h),this._mutantIsReady&&this._checkZoomLevels())}L.GridLayer.prototype._update.call(this,l)},whenReady:function(l,c){return this._mutant?l.call(c||this,{target:this}):this.on("spawned",l,c),this}}),L.gridLayer.googleMutant=function(l){return new L.GridLayer.GoogleMutant(l)}})();var Ym,Wo=15,M8=Gn&&Gn.maps&&Gn.maps.length>0?Gn.maps:[{name:"streets",maxzoom:24,tiles:["https://tile.openstreetmap.org/{z}/{x}/{y}.png"],attribution:'\xA9 <a href="http://openstreetmap.org">OpenStreetMap</a> | <a href="www.openstreetmap.org/copyright">Terms</a>'}],Kc="https://maps.googleapis.com/maps/api/geocode/json?address={address}&sensor=true&key={api_key}",Zh=Gn.googleApiKey||Gn.google_api_key,U8=Ni.default.divIcon({iconSize:[16,24],className:"enketo-geopoint-marker"}),q8=Ni.default.divIcon({iconSize:[16,16],className:"enketo-geopoint-circle-marker"}),F8=Ni.default.divIcon({iconSize:[16,16],className:"enketo-geopoint-circle-marker-active"}),Qm=class extends Ut{static get selector(){return'.question input[data-type-xml="geopoint"]:not([data-setvalue]):not([data-setgeopoint]), .question input[data-type-xml="geotrace"]:not([data-setvalue]):not([data-setgeopoint]), .question input[data-type-xml="geoshape"]:not([data-setvalue]):not([data-setgeopoint])'}static condition(t){return!si.has(t,"ArcGisGeopicker")}_init(){let t=this.originalInputValue,n=this;this.$form=(0,ei.default)(this.element).closest("form.or"),this.$question=(0,ei.default)(this.element).closest(".question"),this.mapId=Math.round(Math.random()*1e7),this._addDomElements(),this.currentIndex=0,this.points=[],t&&(this.value=t),this.$widget.find('[name="lat"], [name="long"], [name="alt"], [name="acc"]').on("change change.bymap change.bysearch",r=>{let i=n.$lat.val()?Number(n.$lat.val()):"",a=n.$lng.val()?Number(n.$lng.val()):"",s=n.$alt.val()?Number(n.$alt.val()):"",o=n.$acc.val()?Number(n.$acc.val()):"",l={lat:i,lng:a};r.stopImmediatePropagation(),r.namespace!=="bymap"&&r.namespace!=="bysearch"&&n.polyline&&n.props.type==="geoshape"&&!n.containsEmptyPoints(n.points,n.currentIndex)&&n.updatedPolylineWouldIntersect(l,n.currentIndex)?(n._showIntersectError(),n._updateInputs(n.points[n.currentIndex],"nochange")):(n._editPoint([i,a,s,o]),r.namespace!=="bysearch"&&n.$search&&n.$search.val(""))}),this.$kmlInput.on("change",function(r){let i=n.$points.find(".addpoint"),a=(0,ei.default)(this).prev(".paste-progress").removeClass("hide"),{value:s}=r.target,o=n._convertKmlCoordinatesToLeafletCoordinates(s);r.target.value="",setTimeout(()=>{o.forEach((l,c)=>{n._updateInputs(l),c<o.length-1&&i.click()}),a.remove(),n._switchInputType("points")},10)}),this.$widget.find(".toggle-input-type-btn").on("click",()=>{let r=n.$inputGroup.hasClass("kml-input-mode")?"points":"kml";return n._switchInputType(r),!1}),(0,ei.default)(this.element).on("change",function(){n.$kmlInput.prop("disabled",!!this.value)}).on("applyfocus",()=>{n.$widget[0].querySelector("input").focus()}),this.$points.on("click",".point",function(){return n._setCurrent(n.$points.find(".point").index((0,ei.default)(this))),n._switchInputType("points"),!1}),this.$points.find(".addpoint").on("click",()=>(n._addPoint(),!1)),this.$widget.find(".close-chain-btn").on("click",()=>(n._closePolygon(),!1)),this.$widget.find(".btn-remove").on("click",()=>{n.points.length<2?n._updateInputs([]):cn.confirm(Be("geopicker.removePoint")).then(r=>{r&&n._removePoint()}).catch(()=>{})}),this.$map.find(".show-map-btn").on("click",()=>(n.$widget.find(".search-bar").removeClass("hide-search"),n.$widget.addClass("full-screen"),n._updateMap(),!1)),this.$form.on(`pageflip.map${this.mapId}`,r=>{n.map&&ei.default.contains(r.target,n.element)&&(n.map.invalidateSize(),n.$form.off(`pageflip.map${n.mapId}`))}),this.props.wide&&this.$widget.addClass("wide"),this.$widget.toggleClass("hide-input",this.$question.hasClass("or-appearance-hide-input")).find(".toggle-input-visibility-btn").on("click",function(){n.$widget.toggleClass("hide-input"),(0,ei.default)(this).toggleClass("open",n.$widget.hasClass("hide-input")),n.map&&n.map.invalidateSize(!1)}).toggleClass("open",n.$widget.hasClass("hide-input")),this.$widget.find(".hide-map-btn").on("click",()=>(n.$widget.find(".search-bar").addClass("hide-search"),n.$widget.removeClass("full-screen").find(".map-canvas").removeClass("leaflet-container").find(".leaflet-google-layer").remove(),n.map&&(n.map.remove(),n.map=void 0,this.loadMap=void 0,n.polygon=void 0,n.polyline=void 0),!1)),this.props.search&&this._enableSearch(),this.props.detect&&this._enableDetection(),this.props.readonly&&this.disable(),t?this.points.forEach(()=>{n._addPointBtn()}):this._addPoint(),t?(this._updateMap(),this._setCurrent(this.currentIndex)):(this._updateMap([0,0],1),this.props.detect&&Bc().then(({position:r})=>{n._updateMap([r.coords.latitude,r.coords.longitude],Wo)}).catch(()=>{}))}_switchInputType(t){t==="kml"?this.$inputGroup.addClass("kml-input-mode"):t==="points"&&this.$inputGroup.removeClass("kml-input-mode")}_addPointBtn(){this.$points.find(".addpoint").before('<a href="#" class="point" aria-label="point"> </a>')}_addDomElements(){let t=`<div class="map-canvas-wrapper"><div class=map-canvas id="map${this.mapId}"></div></div>`,n='<div class="points"><button type="button" class="addpoint">+</button></div>',r=`
            <a href="#" class="toggle-input-type-btn">
                <span class="kml-input">KML</span>
                <span class="points-input" data-i18n="geopicker.points">${Be("geopicker.points")}</span>
            </a>
            <label class="geo kml">
                <span data-i18n="geopicker.kmlcoords">${Be("geopicker.kmlcoords")}</span>
                <progress class="paste-progress hide"></progress>
                <textarea class="ignore" name="kml" placeholder="${Be("geopicker.kmlpaste")}" data-i18n="geopicker.kmlpaste"></textarea>
                <span class="disabled-msg">remove all points to enable</span>
            </label>`,i=`<button type="button" class="close-chain-btn btn btn-default btn-xs" data-i18n="geopicker.closepolygon">${Be("geopicker.closepolygon")}</button>`,a='<button type="button" class="show-map-btn btn btn-default">Map</button>';if(this.$widget=(0,ei.default)(`<div class="geopicker widget">
                <div class="search-bar hide-search no-map no-detect">
                    <button type="button" class="hide-map-btn btn btn-default"><span class="icon icon-arrow-left"> </span></button>
                    <button name="geodetect" type="button" class="btn btn-default" title="detect current location" data-placement="top"><span class="icon icon-crosshairs"> </span></button>
                    <div class="input-group">
                        <input class="geo ignore" name="search" type="text" placeholder="${Be("geopicker.searchPlaceholder")}" data-i18n="geopicker.searchPlaceholder" disabled="disabled"/>
                        <button type="button" class="btn btn-default search-btn"><i class="icon icon-search"> </i></button>
                    </div>
                </div>
                <div class="geo-inputs">
                    <label class="geo lat">
                        <span data-i18n="geopicker.latitude">${Be("geopicker.latitude")}</span>
                        <input class="ignore" name="lat" type="number" step="0.000001" min="-90" max="90"/>
                    </label>
                    <label class="geo long">
                        <span data-i18n="geopicker.longitude">${Be("geopicker.longitude")}</span>
                        <input class="ignore" name="long" type="number" step="0.000001" min="-180" max="180"/>
                    </label>
                    <label class="geo alt">
                        <span data-i18n="geopicker.altitude">${Be("geopicker.altitude")}</span>
                        <input class="ignore" name="alt" type="number" step="0.1" />
                    </label>
                    <label class="geo acc">
                        <span data-i18n="geopicker.accuracy">${Be("geopicker.accuracy")}</span>
                        <input class="ignore" name="acc" type="number" step="0.1" />
                    </label>
                    <button type="button" class="btn-icon-only btn-remove" aria-label="remove"><span class="icon icon-trash"> </span></button>
                </div>
            </div>`),this.props.detect&&(this.$widget.find(".search-bar").removeClass("no-detect"),this.$detect=this.$widget.find('button[name="geodetect"]')),this.$search=this.$widget.find('[name="search"]'),this.$inputGroup=this.$widget.find(".geo-inputs"),this.props.map?(this.$widget.find(".search-bar").removeClass("no-map").after(t),this.$map=this.$widget.find(".map-canvas"),this.$map.parent().append('<button type="button" class="toggle-input-visibility-btn" aria-label="toggle input"> </button>')):this.$map=(0,ei.default)(),this.props.touch&&this.props.map&&this.$map.append(a),this.props.touch||this.$widget.find(".search-bar").removeClass("hide-search"),this.props.type!=="geopoint"){this.$points=(0,ei.default)(n),this.$widget.prepend(this.$points),this.props.type==="geoshape"&&this.$inputGroup.append(i);let s=(0,ei.default)(r);this.$kmlInput=s.find('[name="kml"]'),this.$inputGroup.prepend(s)}else this.$points=(0,ei.default)(),this.$kmlInput=(0,ei.default)();this.$lat=this.$widget.find('[name="lat"]'),this.$lng=this.$widget.find('[name="long"]'),this.$alt=this.$widget.find('[name="alt"]'),this.$acc=this.$widget.find('[name="acc"]'),(0,ei.default)(this.element).hide().after(this.$widget).parent().addClass("clearfix")}_updateValue(){this._markAsValid();let t=this.originalInputValue,n=this.value;return t!==n?(this.originalInputValue=n,!0):!1}_isValidGeopoint(t){return t?Xr.geopoint.validate(t):!1}_isValidLatLngList(t){let n=this;return t.every((r,i,a)=>n._isValidLatLng(r)||r.join()===""&&i===a.length-1)}_cleanLatLng(t){return Array.isArray(t)?[t[0],t[1]]:t}_isValidLatLng(t){let n=typeof t[0]=="number"?t[0]:typeof t.lat=="number"?t.lat:null,r=typeof t[1]=="number"?t[1]:typeof t.lng=="number"?t.lng:null;return Xr.geopoint.validate([n,r].join(" "))}_markAsInvalid(t){this.$points.find(".point").eq(t).addClass("has-error")}_markAsValid(){this.$points.find(".point").removeClass("has-error")}_setCurrent(t){this.currentIndex=t,this.$points.find(".point").removeClass("active").eq(t).addClass("active"),this._updateInputs(this.points[t],""),this.map&&(!this.props.touch||this._inFullScreenMode())&&this._updateMarkers()}_enableDetection(){let t=this,n={enableHighAccuracy:!0,maximumAge:0};this.$detect.click(r=>(r.preventDefault(),Bc(n).then(i=>{if(t.polyline&&t.props.type==="geoshape"&&t.updatedPolylineWouldIntersect(i,t.currentIndex))t._showIntersectError();else{let{lat:a,lng:s,position:o}=i;t._updateInputs([a,s,o.coords.altitude,o.coords.accuracy]),t.currentIndex===t.points.length-1&&t.props.type!=="geopoint"&&t._addPoint()}}).catch(()=>{console.error("error occurred trying to obtain position")}),!1))}_enableSearch(){let t=this;Zh?Kc=Kc.replace("{api_key}",Zh):Kc=Kc.replace("&key={api_key}",""),this.$search.prop("disabled",!1).on("change",function(n){let r=(0,ei.default)(this).val();n.stopImmediatePropagation(),r&&(r=r.split(/\s+/).join("+"),ei.default.get(Kc.replace("{address}",r),i=>{let a;i.results&&i.results.length>0&&i.results[0].geometry&&i.results[0].geometry.location?(a=i.results[0].geometry.location,t._updateMap([a.lat,a.lng],Wo),t.$search.closest(".input-group").removeClass("has-error")):(t.$search.closest(".input-group").addClass("has-error"),console.warn(`Location "${r}" not found`))},"json").fail(()=>{t.$search.closest(".input-group").addClass("has-error"),console.error("Error. Geocoding service may not be available or app is offline")}).always(()=>{}))})}_dynamicMapAvailable(){return!!this.map}_inFullScreenMode(){return this.$widget.hasClass("full-screen")}_updateMap(t,n){let r=this;this.props.map&&(n||(this.map?n=this.map.getZoom()||Wo:n=Wo),t&&(this.lastLatLng=t),(!this.props.touch||this._inFullScreenMode())&&(this.loadMap=this.loadMap||this._addDynamicMap(),this.loadMap.then(()=>{r._updateDynamicMapView(t,n)}).catch(()=>{})))}_addDynamicMap(){let t=this;return this._getLayers().then(n=>{let r={layers:t._getDefaultLayer(n)};t.map=Ni.default.map(`map${t.mapId}`,r).on("click",i=>{let a,s;if(t.props.readonly)return!1;a=i.latlng,s=t.$lat.val()&&t.$lng.val()?t.points.length:t.currentIndex,a.lat=Math.round(a.lat*1e6)/1e6,a.lng=Math.round(a.lng*1e6)/1e6,t.props.type==="geoshape"&&!t.containsEmptyPoints(t.points,s)&&t.updatedPolylineWouldIntersect(a,s)?t._showIntersectError():!t.$lat.val()||!t.$lng.val()||t.props.type==="geopoint"?t._updateInputs(a,"change.bymap"):t.$lat.val()&&t.$lng.val()&&(t._addPoint(),t._updateInputs(a,"change.bymap"))}),this.map.on("load",()=>{this.map.on("zoomend",i=>{let a=i.target.getZoom();a!=null&&(this.lastZoom=a)})}),t.map.attributionControl.setPrefix(""),n.length>1&&Ni.default.control.layers(t._getBaseLayers(n),null).addTo(t.map),t.$widget.find(".leaflet-control-layers-toggle").append('<span class="icon icon-globe"></span>'),t.map.on("baselayerchange",()=>{t.$widget.find(".leaflet-control-container input").addClass("ignore no-unselect").next("span").addClass("option-label")})})}_updateDynamicMapView(t,n){t?this.map.setView(t,n||Wo):(this._updatePolyline(),this._updateMarkers(),this.points.length===1&&this.points[0].toString()===""&&(this.lastLatLng?this.map.setView(this.lastLatLng,this.lastZoom||Wo):this.map.setView(Ni.default.latLng(0,0),n||Wo)))}_showIntersectError(){cn.alert(Be("geopicker.bordersintersectwarning"))}_getLayers(){let t=this,n=[];return M8.forEach((r,i)=>{typeof r.tiles=="string"&&/^GOOGLE_(SATELLITE|ROADMAP|HYBRID|TERRAIN)/.test(r.tiles)?n.push(t._getGoogleTileLayer(r,i)):r.tiles?n.push(t._getLeafletTileLayer(r,i)):console.error("Configuration error for map tiles. Not a valid tile layer: ",r)}),Promise.all(n)}_getLeafletTileLayer(t,n){let r,i=this._getTileOptions(t,n);return t.tileIndex=t.tileIndex===void 0?Math.round(Math.random()*100)%t.tiles.length:t.tileIndex,r=t.tiles[t.tileIndex],Promise.resolve(Ni.default.tileLayer(r,i))}_getGoogleTileLayer(t,n){let r=this._getTileOptions(t,n);return r.type=t.tiles.substring(7).toLowerCase(),this._loadGoogleMapsScript().then(()=>Ni.default.gridLayer.googleMutant(r))}_getTileOptions(t,n){let r=t.name||`map-${n+1}`;return{id:t.id||r,maxZoom:t.maxzoom||18,minZoom:t.minzoom||0,name:r,attribution:t.attribution||""}}_loadGoogleMapsScript(){return Ym||(Ym=new Promise(t=>{let n,r;window.gmapsLoaded=()=>{t()},n=Zh?`&key=${Zh}`:"",r=`https://maps.google.com/maps/api/js?v=weekly${n}&libraries=places&callback=gmapsLoaded`,s0(r)})),Ym}_getDefaultLayer(t){let n,r=this;return t.reverse().some(i=>(n=i,r.props.appearances.some(a=>a===i.options.name))),n}_getBaseLayers(t){let n={};return t.forEach(r=>{n[r.options.name]=r}),n}_updateMarkers(){let t=[],n=[],r=this;this.markerLayer&&this.markerLayer.clearLayers(),!(this.points.length<2&&this.points[0].join()==="")&&(this.points.forEach((i,a)=>{let s=r.props.type==="geopoint"?U8:a===r.currentIndex?F8:q8;r._isValidLatLng(i)?(t.push(r._cleanLatLng(i)),n.push(Ni.default.marker(r._cleanLatLng(i),{icon:s,clickable:!r.props.readonly,draggable:!r.props.readonly,alt:a,opacity:.9}).on("click",o=>{o.target.options.alt===0&&r.props.type==="geoshape"?r._closePolygon():r._setCurrent(o.target.options.alt)}).on("dragend",o=>{let l=o.target.getLatLng(),c=o.target.options.alt;l.lat=Math.round(l.lat*1e6)/1e6,l.lng=Math.round(l.lng*1e6)/1e6,r.polyline&&r.props.type==="geoshape"&&r.updatedPolylineWouldIntersect(l,c)?(r._showIntersectError(),r._updateMarkers()):(r._setCurrent(c),r._updateInputs(l,"change.bymap"),r._updateMap())}))):console.warn("this latLng was not considered valid",i)}),n.length>0&&(this.markerLayer=Ni.default.layerGroup(n).addTo(this.map),(this.points.length===1||!this._isValidLatLngList(this.points))&&this.map.setView(t[0],this.lastZoom||Wo)))}_updatePolyline(){let t,n=this;if(this.props.type!=="geopoint"){if(this.points.length<2||!this._isValidLatLngList(this.points)){this.map&&(this.polyline&&this.map.removeLayer(this.polyline),this.polygon&&this.map.removeLayer(this.polygon)),this.polyline=null,this.polygon=null;return}this.props.type==="geoshape"&&this._updatePolygon(),t=this.points[this.points.length-1].join("")!==""?this.points:this.points.slice(0,this.points.length-1),t=t.map(r=>n._cleanLatLng(r)),this.polyline?this.polyline.setLatLngs(t):(this.polyline=Ni.default.polyline(t,{color:"red"}),this.map.addLayer(this.polyline)),setTimeout(()=>{n.map.fitBounds(n.polyline.getBounds())},0)}}_updatePolygon(){let t,n=this;this.props.type==="geopoint"||this.props.type==="geotrace"||(t=this.points[this.points.length-1].join("")!==""?this.points:this.points.slice(0,this.points.length-1),t=t.map(r=>n._cleanLatLng(r)),this.polygon?this.polygon.setLatLngs(t):(this.polygon=Ni.default.polygon(t,{color:"red",stroke:!1}),this.map.addLayer(this.polygon)),this._updateArea(t))}_updateArea(t){let n,r;if(t.length>2){let i=t.map(a=>({lat:a[0],lng:a[1]}));n=Ni.default.GeometryUtil.geodesicArea(i),r=Ni.default.GeometryUtil.readableArea(n,!0),Ni.default.popup({className:"enketo-area-popup"}).setLatLng(this.polygon.getBounds().getCenter()).setContent(r).openOn(this.map)}else this.map.closePopup()}_addPoint(){this._addPointBtn(),this.points.push([]),this._setCurrent(this.points.length-1),this._updateValue()}_editPoint(t){let n;return this.points[this.currentIndex]=t,n=this._updateValue(),n&&this._updateMap(),n}_removePoint(){let t=this.currentIndex;this.points.splice(this.currentIndex,1),this._updateValue(),this.$points.find(".point").eq(this.currentIndex).remove(),typeof this.points[this.currentIndex]>"u"&&(t=this.currentIndex-1),this._setCurrent(t),this._updateMap()}_closePolygon(){let t=this.points[this.points.length-1];if(!(this.points.length<3||this.points.length===3&&!this._isValidLatLng(this.points[2])||JSON.stringify(this.points[0])===JSON.stringify(t))){if(this._isValidLatLng(t)?this._addPoint():this.currentIndex=this.points.length-1,this.polyline&&!this.containsEmptyPoints(this.points,this.points.length)&&this.updatedPolylineWouldIntersect(this.points[0],this.currentIndex))return this._showIntersectError();this._updateInputs(this.points[0])}}_updateInputs(t,n){let r=t[0]||t.lat||"",i=t[1]||t.lng||"",a=t[2]||t.alt||"",s=t[3]||t.acc||"";n=typeof n<"u"?n:"change",this.$lat.val(r||""),this.$lng.val(i||""),this.$alt.val(a||""),this.$acc.val(s||"").trigger(n)}_convertKmlCoordinatesToLeafletCoordinates(t){let n=[],r=/<\s?coordinates>(([^<]|\n)*)<\/\s?coordinates\s?>/;return t=r.test(t)?t.match(r)[1]:t,t.trim().split(/\s+/).forEach(a=>{let s=[];a.split(",").forEach((o,l)=>{let c=Number(o);l===0?s[1]=c:l===1?s[0]=c:l===2&&(s[2]=c)}),n.push(s)}),n}updatedPolylineWouldIntersect(t,n){let r=[],i,a,s,o=this;return this.points<3?!1:(ei.default.extend(!0,r,this.points),r[n]=[t[0]||t.lat,t[1]||t.lng],i=r[r.length-1].join("")!==""?r:r.slice(0,r.length-1),i[0][0]===i[i.length-1][0]&&i[0][1]===i[i.length-1][1]&&(i=i.slice(0,i.length-1)),i=i.map(l=>o._cleanLatLng(l)),a=Ni.default.polyline(i,{color:"white"}),this.map.addLayer(a),s=a.intersects(),this.map.removeLayer(a),s)}containsEmptyPoints(t,n){return t.some((r,i)=>i!==n&&(!r[0]||!r[1]))}get props(){let t=this._props;return t.detect=!!navigator.geolocation,t.map=!$n.touch||t.appearances.includes("maps")||t.appearances.includes("placement-map"),t.search=t.map,t.touch=$n.touch,t.wide=this.question.clientWidth/this.element.closest("form.or").clientWidth>.8,t}get value(){let t="";return this.points.forEach((n,r,i)=>{let a,s=typeof n[0]=="number"?n[0]:typeof n.lat=="number"?n.lat:null,o=typeof n[1]=="number"?n[1]:typeof n.lng=="number"?n.lng:null,l=typeof n[2]=="number"?n[2]:0,c=typeof n[3]=="number"?n[3]:0;a=s&&o?`${s} ${o} ${l} ${c}`:"",!this._isValidGeopoint(a)&&!(a===""&&r===i.length-1)&&this._markAsInvalid(r),a===""&&r===i.length-1?t=t.substring(0,t.lastIndexOf(";")):(t+=a,r!==i.length-1&&(t+=";"))}),t}set value(t){t.trim().split(";").forEach((n,r)=>{this.points[r]=n.trim().split(" "),this.points[r].forEach((i,a,s)=>{s[a]=Number(i)})})}enable(){(0,ei.default)(this.element).next(".widget").removeClass("readonly").find("input, select, textarea").prop("disabled",!1).end().find(".btn:not(.show-map-btn):not(.hide-map-btn), .btn-icon-only, .addpoint").prop("disabled",!1),this.map&&this.map.invalidateSize()}disable(){(0,ei.default)(this.element).next(".widget").addClass("readonly").find("input, select, textarea").prop("disabled",!0).end().find(".btn:not(.show-map-btn):not(.hide-map-btn), .btn-icon-only, .addpoint").prop("disabled",!0)}update(){let t=this.element.parentElement.querySelector(".widget");t&&(t.remove(),this.loadMap=void 0,this.map=void 0,this.polyline=void 0,this.polygon=void 0,this._init())}},CS=Qm;var Jm=class extends Ut{static get selector(){return"form"}_init(){let t=this.element.querySelectorAll("textarea");this.defaultHeight=t[0]?t[0].clientHeight:20,this.element.addEventListener("input",n=>{let r=n.target;r.nodeName.toLowerCase()==="textarea"&&this._resize(r)}),new ul(this.element).waitForQuietness().then(()=>{t.forEach(this._resize.bind(this))}),this.element.addEventListener(Xe.PageFlip().type,n=>{n.target.querySelectorAll("textarea").forEach(this._resize.bind(this))})}_resize(t){t.scrollHeight>t.clientHeight&&t.scrollHeight>this.defaultHeight&&(t.style.height=`${t.scrollHeight}px`,t.style.flex="auto")}},SS=Jm;var ev=class extends Ut{static get selector(){return'.or-appearance-url input[type="text"]'}_init(){let t=document.createRange().createContextualFragment('<a class="widget url-widget" target="_blank" rel="noopener"/>');this.element.classList.add("hide"),this.element.after(t),this.value=this.originalInputValue}update(){this.value=this.originalInputValue}get value(){return this.question.querySelector(".url-widget").href}set value(t){t=t||"";let n=this.question.querySelector(".url-widget");n.href=t,n.title=t,n.textContent=t}},TS=ev;var Wc=class{};var Xh=Yt(gr());var tv=class extends Ut{static get selector(){return"form"}_init(){let t=(0,Xh.default)(this.element),n=this;t.on("click",'input[type="radio"]:not([readonly]):checked',function(){(0,Xh.default)(this).parent("label").siblings().removeAttr("data-checked").end().attr("data-checked","true")}).on("click",'input[type="checkbox"]:not([readonly])',function(){n._updateDataChecked(this)}).on(Xe.InputUpdate().type,'input[type="radio"], input[type="checkbox"]',function(){this.closest(".option-wrapper").querySelectorAll('input[type="radio"],input[type="checkbox"]').forEach(r=>n._updateDataChecked(r))}).on("click",'input[type="checkbox"][readonly],input[type="radio"][readonly]',r=>(r.stopImmediatePropagation(),!1)).on(Xe.Change().type,'input[type="checkbox"][readonly],input[type="radio"][readonly]',function(r){let i=typeof r.originalEvent>"u";return i||(r.stopImmediatePropagation(),this.checked&&this.parentNode.dataset.checked!=="true"&&(this.checked=!1)),i}).on("click",'[data-checked]>input[type="radio"]:not(.no-unselect)',function(){(0,Xh.default)(this).prop("checked",!1).trigger("change").parent().removeAttr("data-checked")}),this.element.querySelectorAll('input[type="radio"]:checked, input[type="checkbox"]:checked').forEach(r=>this._updateDataChecked(r))}_updateDataChecked(t){t.checked?t.parentNode.dataset.checked=!0:delete t.parentNode.dataset.checked}},LS=tv;var Yh=Yt(gr());var k$=Yt(nv());var rv=class extends Ut{static get selector(){return'.question input[type="date"]'}static condition(){return!$n.touch||!$n.inputTypes.date}_init(){this.settings=this.props.appearances.includes("year")?{format:"yyyy",startView:"decade",minViewMode:"years"}:this.props.appearances.includes("month-year")?{format:"yyyy-mm",startView:"year",minViewMode:"months"}:{format:"yyyy-mm-dd",startView:"month",minViewMode:"days"},this.$fakeDateI=this._createFakeDateInput(this.settings.format),this._setChangeHandler(this.$fakeDateI),this._setFocusHandler(this.$fakeDateI),this._setResetHandler(this.$fakeDateI),this.enable(),this.value=this.element.value,this.props.readonly&&this.disable()}_createFakeDateInput(t){let n=(0,Yh.default)(this.element),r=(0,Yh.default)(`<div class="widget date"><input class="ignore input-small" type="text" placeholder="${t}" /></div>`).append(this.resetButtonHtml),i=r.find("input");return n.hide().before(r),i}_setChangeHandler(t){let{settings:n}=this;t.on("change paste",r=>{var s;let i="",a=r.type==="paste"?r0((s=r.originalEvent)!=null?s:r):this.displayedValue;return a.length>0&&(ai(a)&&n.format!=="yyyy"?i="":(a=this._toActualDate(a),i=Xr.date.convert(a))),t.val(this._toDisplayDate(i)).datepicker("update"),i===""&&r.type==="paste"&&r.stopImmediatePropagation(),this.originalInputValue!==i&&(this.originalInputValue=i),!1})}_setResetHandler(t){t.next(".btn-reset").on("click",()=>{this.originalInputValue&&(this.value="")})}_setFocusHandler(t){(0,Yh.default)(this.element).on("applyfocus",()=>{t[0].focus()})}_toActualDate(t=""){return t=t.trim(),t&&this.settings.format==="yyyy"&&t.length<5?`${t}-01-01`:t&&this.settings.format==="yyyy-mm"&&t.length<8?`${t}-01`:t}_toDisplayDate(t=""){return t=t.trim(),t&&this.settings.format==="yyyy"?t.substring(0,4):this.settings.format==="yyyy-mm"?t.substring(0,7):t}disable(){this.$fakeDateI.datepicker("destroy"),this.$fakeDateI.prop("disabled",!0),this.$fakeDateI.next(".btn-reset").prop("disabled",!0)}enable(){this.$fakeDateI.datepicker({format:this.settings.format,autoclose:!0,todayHighlight:!0,startView:this.settings.startView,minViewMode:this.settings.minViewMode,forceParse:!1}),this.$fakeDateI.prop("disabled",!1),this.$fakeDateI.next(".btn-reset").prop("disabled",!1)}update(){this.value=this.element.value}get displayedValue(){return this.question.querySelector(".widget input").value}get value(){return this._toActualDate(this.displayedValue)}set value(t){this.$fakeDateI[0].disabled?this.$fakeDateI[0].value=this._toDisplayDate(t):this.$fakeDateI.datepicker("setDate",this._toDisplayDate(t))}},AS=rv;var Qh=Yt(gr());var IS=Yt(gr());((e,t,n)=>{let r=function(i,a){this.languages=navigator.languages,this.widget="",this.$element=e(i),this.defaultTime=a.defaultTime,this.disableFocus=a.disableFocus,this.disableMousewheel=a.disableMousewheel,this.isOpen=a.isOpen,this.minuteStep=a.minuteStep,this.orientation=a.orientation,this.secondStep=a.secondStep,this.snapToStep=a.snapToStep,this.showInputs=a.showInputs,this.showSeconds=a.showSeconds,this.template=a.template,this.appendWidgetTo=a.appendWidgetTo,this.showWidgetOnAddonClick=a.showWidgetOnAddonClick,this.icons=a.icons,this.maxHours=a.maxHours,this.explicitMode=a.explicitMode,this.handleDocumentClick=s=>{let o=s.data.scope;o.$element.parent().find(s.target).length||o.$widget.is(s.target)||o.$widget.find(s.target).length||o.hideWidget()},this._init()};r.prototype={get showMeridian(){return _i.hour12},get meridianNotation(){return{am:_i.amNotation,pm:_i.pmNotation}},constructor:r,_init(){let i=this;this.showWidgetOnAddonClick&&this.$element.parent().hasClass("input-group")&&this.$element.parent().hasClass("timepicker")?(this.$element.parent(".input-group.timepicker").find(".input-group-addon").on({"click.timepicker":e.proxy(this.showWidget,this)}),this.$element.on({"focus.timepicker":e.proxy(this.highlightUnit,this),"click.timepicker":e.proxy(this.highlightUnit,this),"keydown.timepicker":e.proxy(this.elementKeydown,this),"blur.timepicker":e.proxy(this.blurElement,this),"mousewheel.timepicker DOMMouseScroll.timepicker":e.proxy(this.mousewheel,this)})):this.template?this.$element.on({"focus.timepicker":e.proxy(this.showWidget,this),"click.timepicker":e.proxy(this.showWidget,this),"blur.timepicker":e.proxy(this.blurElement,this),"mousewheel.timepicker DOMMouseScroll.timepicker":e.proxy(this.mousewheel,this)}):this.$element.on({"focus.timepicker":e.proxy(this.highlightUnit,this),"click.timepicker":e.proxy(this.highlightUnit,this),"keydown.timepicker":e.proxy(this.elementKeydown,this),"blur.timepicker":e.proxy(this.blurElement,this),"mousewheel.timepicker DOMMouseScroll.timepicker":e.proxy(this.mousewheel,this)}),this.template!==!1?(this.$widget=e(this.getTemplate()).on("click",e.proxy(this.widgetClick,this)),this.meridianColumns=this.$widget[0].querySelectorAll(".meridian-column")):this.$widget=!1,this.showInputs&&this.$widget!==!1&&this.$widget.find("input").each(function(){e(this).on({"click.timepicker":function(){e(this).select()},"keydown.timepicker":e.proxy(i.widgetKeydown,i),"keyup.timepicker":e.proxy(i.widgetKeyup,i)})}),this.setDefaultTime(this.defaultTime)},blurElement(){this.highlightedUnit=null,this.updateFromElementVal()},clear(){this.hour="",this.minute="",this.second="",this.meridian="",this.$element.val("")},decrementHour(){if(this.hour===""&&(this.hour=this.getCurrentHour(),this.incrementHour()),this.showMeridian)if(this.hour===1)this.hour=12;else{if(this.hour===12)return this.hour--,this.toggleMeridian();if(this.hour===0)return this.hour=11,this.toggleMeridian();this.hour--}else this.hour<=0?this.hour=this.maxHours-1:this.hour--},decrementMinute(i){let a;this.minute===""&&(this.minute=this.getCurrentMinute(),this.incrementMinute()),i?a=this.minute-i:a=this.minute-this.minuteStep,a<0?(this.decrementHour(),this.minute=a+60):this.minute=a},decrementSecond(){let i=this.second-this.secondStep;i<0?(this.decrementMinute(!0),this.second=i+60):this.second=i},elementKeydown(i){switch(i.which){case 9:if(i.shiftKey){if(this.highlightedUnit==="hour"){this.hideWidget();break}this.highlightPrevUnit()}else if(this.showMeridian&&this.highlightedUnit==="meridian"||this.showSeconds&&this.highlightedUnit==="second"||!this.showMeridian&&!this.showSeconds&&this.highlightedUnit==="minute"){this.hideWidget();break}else this.highlightNextUnit();i.preventDefault(),this.updateFromElementVal();break;case 27:this.updateFromElementVal();break;case 37:i.preventDefault(),this.highlightPrevUnit(),this.updateFromElementVal();break;case 38:switch(i.preventDefault(),this.highlightedUnit){case"hour":this.incrementHour(),this.highlightHour();break;case"minute":this.incrementMinute(),this.highlightMinute();break;case"second":this.incrementSecond(),this.highlightSecond();break;case"meridian":this.toggleMeridian(),this.highlightMeridian();break}this.update();break;case 39:i.preventDefault(),this.highlightNextUnit(),this.updateFromElementVal();break;case 40:switch(i.preventDefault(),this.highlightedUnit){case"hour":this.decrementHour(),this.highlightHour();break;case"minute":this.decrementMinute(),this.highlightMinute();break;case"second":this.decrementSecond(),this.highlightSecond();break;case"meridian":this.toggleMeridian(),this.highlightMeridian();break}this.update();break}},getCursorPosition(){let i=this.$element.get(0);if("selectionStart"in i)return i.selectionStart;if(n.selection){i.focus();let a=n.selection.createRange(),s=n.selection.createRange().text.length;return a.moveStart("character",-i.value.length),a.text.length-s}},getMeridianLength(){let i=n.createElement("span");i.textContent=this.meridianNotation.am,i.style.position="absolute",n.querySelector("body").appendChild(i);let a=i.scrollWidth;i.textContent=this.meridianNotation.pm;let s=i.scrollWidth;return i.remove(),a>s?a:s},getTemplate(){let i,a,s,o,l,c;if(this.showInputs){let h=this.getMeridianLength()>26?`style="width: ${this.getMeridianLength()+24}px"`:"";a=`<input type="text" class="timepicker-hour" ${h}/>`,s=`<input type="text" class="timepicker-minute" ${h}/>`,o=`<input type="text" class="timepicker-second" ${h}/>`,l=`<input type="text" class="timepicker-meridian"${h}/>`}else a='<span class="timepicker-hour"></span>',s='<span class="timepicker-minute"></span>',o='<span class="timepicker-second"></span>',l='<span class="timepicker-meridian"></span>';switch(c=`<table><tr><td><a href="#" data-action="incrementHour"><span class="${this.icons.up}"></span></a></td><td class="separator">&nbsp;</td><td><a href="#" data-action="incrementMinute"><span class="${this.icons.up}"></span></a></td>${this.showSeconds?`<td class="separator">&nbsp;</td><td><a href="#" data-action="incrementSecond"><span class="${this.icons.up}"></span></a></td>`:""}<td class="separator meridian-column">&nbsp;</td><td class="meridian-column"><a href="#" data-action="toggleMeridian"><span class="${this.icons.up}"></span></a></td></tr><tr><td>${a}</td> <td class="separator">:</td><td>${s}</td> ${this.showSeconds?`<td class="separator">:</td><td>${o}</td>`:""}<td class="separator meridian-column">&nbsp;</td><td class="meridian-column">${l}</td></tr><tr><td><a href="#" data-action="decrementHour"><span class="${this.icons.down}"></span></a></td><td class="separator"></td><td><a href="#" data-action="decrementMinute"><span class="${this.icons.down}"></span></a></td>${this.showSeconds?`<td class="separator">&nbsp;</td><td><a href="#" data-action="decrementSecond"><span class="${this.icons.down}"></span></a></td>`:""}<td class="separator meridian-column">&nbsp;</td><td class="meridian-column"><a href="#" data-action="toggleMeridian"><span class="${this.icons.down}"></span></a></td></tr></table>`,this.template){case"dropdown":i=`<div class="timepicker-widget dropdown-menu">${c}</div>`;break}return i},getTime(){return this.hour===""?"":`${this.hour.toString().length===1?`0${this.hour}`:this.hour}:${this.minute.toString().length===1?`0${this.minute}`:this.minute}${this.showSeconds?`:${this.second.toString().length===1?`0${this.second}`:this.second}`:""}${this.showMeridian?` ${this.meridian}`:""}`},hideWidget(){this.isOpen!==!1&&(this.$widget.removeClass("open"),e(n).off("mousedown.timepicker, touchend.timepicker",this.handleDocumentClick),this.isOpen=!1,this.$widget.detach())},highlightUnit(){this.position=this.getCursorPosition(),this.position>=0&&this.position<=2?this.highlightHour():this.position>=3&&this.position<=5?this.highlightMinute():this.position>=6&&this.position<=8?this.showSeconds?this.highlightSecond():this.highlightMeridian():this.position>=9&&this.position<=11&&this.highlightMeridian()},highlightNextUnit(){switch(this.highlightedUnit){case"hour":this.highlightMinute();break;case"minute":this.showSeconds?this.highlightSecond():this.showMeridian?this.highlightMeridian():this.highlightHour();break;case"second":this.showMeridian?this.highlightMeridian():this.highlightHour();break;case"meridian":this.highlightHour();break}},highlightPrevUnit(){switch(this.highlightedUnit){case"hour":this.showMeridian?this.highlightMeridian():this.showSeconds?this.highlightSecond():this.highlightMinute();break;case"minute":this.highlightHour();break;case"second":this.highlightMinute();break;case"meridian":this.showSeconds?this.highlightSecond():this.highlightMinute();break}},highlightHour(){let i=this.$element.get(0),a=this;this.highlightedUnit="hour",i.setSelectionRange&&setTimeout(()=>{a.hour<10?i.setSelectionRange(0,1):i.setSelectionRange(0,2)},0)},highlightMinute(){let i=this.$element.get(0),a=this;this.highlightedUnit="minute",i.setSelectionRange&&setTimeout(()=>{a.hour<10?i.setSelectionRange(2,4):i.setSelectionRange(3,5)},0)},highlightSecond(){let i=this.$element.get(0),a=this;this.highlightedUnit="second",i.setSelectionRange&&setTimeout(()=>{a.hour<10?i.setSelectionRange(5,7):i.setSelectionRange(6,8)},0)},highlightMeridian(){let i=this.$element.get(0),a=this;this.highlightedUnit="meridian",i.setSelectionRange&&(this.showSeconds?setTimeout(()=>{a.hour<10?i.setSelectionRange(8,10):i.setSelectionRange(9,11)},0):setTimeout(()=>{a.hour<10?i.setSelectionRange(5,7):i.setSelectionRange(6,8)},0))},getCurrentHour(){let i=new Date().getHours();return this.showMeridian?i%12:i},getCurrentMinute(){return new Date().getMinutes()},incrementHour(){if(this.hour===""&&(this.hour=this.getCurrentHour(),this.decrementHour()),this.showMeridian){if(this.hour===11)return this.hour++,this.toggleMeridian();this.hour===12&&(this.hour=0)}if(this.hour===this.maxHours-1){this.hour=0;return}this.hour++},incrementMinute(i){let a;this.minute===""&&(this.minute=this.getCurrentMinute(),this.decrementMinute()),i?a=this.minute+i:a=this.minute+this.minuteStep-this.minute%this.minuteStep,a>59?(this.incrementHour(),this.minute=a-60):this.minute=a},incrementSecond(){let i=this.second+this.secondStep-this.second%this.secondStep;i>59?(this.incrementMinute(!0),this.second=i-60):this.second=i},mousewheel(i){if(this.disableMousewheel)return;i.preventDefault(),i.stopPropagation();let a=i.originalEvent.wheelDelta||-i.originalEvent.detail,s=null;switch(i.type==="mousewheel"?s=i.originalEvent.wheelDelta*-1:i.type==="DOMMouseScroll"&&(s=40*i.originalEvent.detail),s&&(i.preventDefault(),e(this).scrollTop(s+e(this).scrollTop())),this.highlightedUnit){case"minute":a>0?this.incrementMinute():this.decrementMinute(),this.highlightMinute();break;case"second":a>0?this.incrementSecond():this.decrementSecond(),this.highlightSecond();break;case"meridian":this.toggleMeridian(),this.highlightMeridian();break;default:a>0?this.incrementHour():this.decrementHour(),this.highlightHour();break}return!1},changeToNearestStep(i,a){return i%a===0?i:Math.round(i%a/a)?(i+(a-i%a))%60:i-i%a},place(){if(this.isInline)return;let i=this.$widget.outerWidth(),a=this.$widget.outerHeight(),s=10,o=e(t).width(),l=e(t).height(),c=e(t).scrollTop(),h=parseInt(this.$element.parents().filter(function(){return e(this).css("z-index")!=="auto"}).first().css("z-index"),10)+10,p=this.component?this.component.parent().offset():this.$element.offset(),E=this.component?this.component.outerHeight(!0):this.$element.outerHeight(!1),b=this.component?this.component.outerWidth(!0):this.$element.outerWidth(!1),{left:C}=p,{top:N}=p;this.$widget.removeClass("timepicker-orient-top timepicker-orient-bottom timepicker-orient-right timepicker-orient-left"),this.orientation.x!=="auto"?(this.$widget.addClass(`timepicker-orient-${this.orientation.x}`),this.orientation.x==="right"&&(C-=i-b)):(this.$widget.addClass("timepicker-orient-left"),p.left<0?C-=p.left-s:p.left+i>o&&(C=o-i-s));let w=this.orientation.y,I,S;w==="auto"&&(I=-c+p.top-a,S=c+l-(p.top+E+a),Math.max(I,S)===S?w="top":w="bottom"),this.$widget.addClass(`timepicker-orient-${w}`),w==="top"?N+=E:N-=a+parseInt(this.$widget.css("padding-top"),10),this.$widget.css({top:N,left:C,zIndex:h})},remove(){e("document").off(".timepicker"),this.$widget&&this.$widget.remove(),delete this.$element.data().timepicker},setDefaultTime(i){if(this.$element.val())this.updateFromElementVal();else if(i==="current"){let a=new Date,s=a.getHours(),o=a.getMinutes(),l=a.getSeconds(),c=this.meridianNotation.am;l!==0&&(l=Math.ceil(a.getSeconds()/this.secondStep)*this.secondStep,l===60&&(o+=1,l=0)),o!==0&&(o=Math.ceil(a.getMinutes()/this.minuteStep)*this.minuteStep,o===60&&(s+=1,o=0)),this.showMeridian&&(s===0?s=12:s>=12?(s>12&&(s-=12),c=this.meridianNotation.pm):c=this.meridianNotation.am),this.hour=s,this.minute=o,this.second=l,this.meridian=c,this.update()}else i===!1?(this.hour=0,this.minute=0,this.second=0,this.meridian=this.meridianNotation.am):this.setTime(i)},setTime(i,a){if(!i){this.clear();return}let s,o,l,c,h,p;if(typeof i=="object"&&i.getMonth)l=i.getHours(),c=i.getMinutes(),h=i.getSeconds(),this.showMeridian&&(p=this.meridianNotation.am,l>12&&(p=this.meridianNotation.pm,l%=12),l===12&&(p=this.meridianNotation.pm));else{let E=this.showMeridian?this.meridianNotation.am:"am",b=this.showMeridian?this.meridianNotation.pm:"pm";if(s=(new RegExp(E,"i").test(i)?1:0)+(new RegExp(b,"i").test(i)?2:0),s>2){this.clear();return}if(o=i.replace(/[^0-9:]/g,"").split(":"),l=o[0]?o[0].toString():o.toString(),this.explicitMode&&l.length>2&&l.length%2!==0){this.clear();return}c=o[1]?o[1].toString():"",h=o[2]?o[2].toString():"",l.length>4&&(h=l.slice(-2),l=l.slice(0,-2)),l.length>2&&(c=l.slice(-2),l=l.slice(0,-2)),c.length>2&&(h=c.slice(-2),c=c.slice(0,-2)),l=parseInt(l,10),c=parseInt(c,10),h=parseInt(h,10),isNaN(l)&&(l=0),isNaN(c)&&(c=0),isNaN(h)&&(h=0),h>59&&(h=59),c>59&&(c=59),l>=this.maxHours&&(l=this.maxHours-1),this.showMeridian?(l>=12&&(s||(s=2),l-=12),s||(s=1),l===0&&(l=12),p=s===1?this.meridianNotation.am:this.meridianNotation.pm):l<12&&s===2?l+=12:l>=this.maxHours?l=this.maxHours-1:(l<0||l===12&&s===1)&&(l=0)}this.hour=l,this.snapToStep?(this.minute=this.changeToNearestStep(c,this.minuteStep),this.second=this.changeToNearestStep(h,this.secondStep)):(this.minute=c,this.second=h),this.meridian=p,this.update(a)},showWidget(){this.isOpen||this.$element.is(":disabled")||(this.setTime(this.$element.val()),this.updateWidget(),this.$widget.appendTo(this.appendWidgetTo),e(n).on("mousedown.timepicker, touchend.timepicker",{scope:this},this.handleDocumentClick),this.place(),this.disableFocus&&this.$element.blur(),this.hour===""&&this.defaultTime&&this.setDefaultTime(this.defaultTime),this.isOpen===!1&&this.$widget.addClass("open"),this.isOpen=!0)},toggleMeridian(){this.meridian=this.meridian===this.meridianNotation.am?this.meridianNotation.pm:this.meridianNotation.am},update(i){this.updateElement(),i||this.updateWidget()},updateElement(){this.$element.val(this.getTime()),this.$element[0].dispatchEvent(Xe.Change())},updateFromElementVal(){this.setTime(this.$element.val())},updateWidget(){if(this.$widget===!1)return;let{hour:i}=this,a=this.minute.toString().length===1?`0${this.minute}`:this.minute,s=this.second.toString().length===1?`0${this.second}`:this.second;this.showInputs?(this.$widget.find("input.timepicker-hour").val(i),this.$widget.find("input.timepicker-minute").val(a),this.showSeconds&&this.$widget.find("input.timepicker-second").val(s),this.showMeridian&&this.$widget.find("input.timepicker-meridian").val(this.meridian)):(this.$widget.find("span.timepicker-hour").text(i),this.$widget.find("span.timepicker-minute").text(a),this.showSeconds&&this.$widget.find("span.timepicker-second").text(s),this.showMeridian&&this.$widget.find("span.timepicker-meridian").text(this.meridian));let{showMeridian:o}=this,l=o?"table-cell":"none";this.meridianColumns.forEach(c=>{c.style.display=l})},updateLocalization(){this.languages!==navigator.languages&&(this.languages=navigator.languages,this.updateFromElementVal(),this.updateWidget())},updateFromWidgetInputs(){if(this.$widget===!1)return;let i=`${this.$widget.find("input.timepicker-hour").val()}:${this.$widget.find("input.timepicker-minute").val()}${this.showSeconds?`:${this.$widget.find("input.timepicker-second").val()}`:""}${this.showMeridian?this.$widget.find("input.timepicker-meridian").val():""}`;this.setTime(i,!0)},widgetClick(i){i.stopPropagation(),i.preventDefault();let a=e(i.target),s=a.closest("a").data("action");s&&this[s](),this.update(),a.is("input")&&a.get(0).setSelectionRange(0,2)},widgetKeydown(i){let a=e(i.target),s=a.attr("class").replace("timepicker-","");switch(i.which){case 9:if(i.shiftKey){if(s==="hour")return this.hideWidget()}else if(this.showMeridian&&s==="meridian"||this.showSeconds&&s==="second"||!this.showMeridian&&!this.showSeconds&&s==="minute")return this.hideWidget();break;case 27:this.hideWidget();break;case 38:switch(i.preventDefault(),s){case"hour":this.incrementHour();break;case"minute":this.incrementMinute();break;case"second":this.incrementSecond();break;case"meridian":this.toggleMeridian();break}this.setTime(this.getTime()),a.get(0).setSelectionRange(0,2);break;case 40:switch(i.preventDefault(),s){case"hour":this.decrementHour();break;case"minute":this.decrementMinute();break;case"second":this.decrementSecond();break;case"meridian":this.toggleMeridian();break}this.setTime(this.getTime()),a.get(0).setSelectionRange(0,2);break}},widgetKeyup(i){(i.which===65||i.which===77||i.which===80||i.which===46||i.which===8||i.which>=48&&i.which<=57||i.which>=96&&i.which<=105)&&this.updateFromWidgetInputs()}},e.fn.timepicker=function(i,...a){return this.each(function(){let s=e(this),o=s.data("timepicker"),l=typeof i=="object"&&i;o||s.data("timepicker",o=new r(this,e.extend({},e.fn.timepicker.defaults,l,e(this).data()))),typeof i=="string"&&o[i](...a)})},e.fn.timepicker.defaults={defaultTime:"current",disableFocus:!1,disableMousewheel:!1,isOpen:!1,minuteStep:15,orientation:{x:"auto",y:"auto"},secondStep:15,snapToStep:!1,showSeconds:!1,showInputs:!0,showMeridian:!0,meridianNotation:{am:"AM",pm:"PM"},template:"dropdown",appendWidgetTo:"body",showWidgetOnAddonClick:!0,icons:{up:"glyphicon glyphicon-chevron-up",down:"glyphicon glyphicon-chevron-down"},maxHours:24,explicitMode:!1},e.fn.timepicker.Constructor=r,e(n).on("focus.timepicker.data-api click.timepicker.data-api",'[data-provide="timepicker"]',function(i){let a=e(this);a.data("timepicker")||(i.preventDefault(),a.timepicker())})})(IS.default,window,document);var iv=class extends Ut{static get selector(){return'.question input[type="time"]:not([readonly])'}static condition(){return!$n.touch||!$n.inputTypes.time}_init(){let t=document.createRange().createContextualFragment(`<div class="widget timepicker">
                <input class="ignore timepicker-default" type="text" placeholder="hh:mm" />
            </div>`);t.querySelector(".widget").append(this.resetButtonHtml),this.element.classList.add("hide"),this.element.before(t);let n=this.question.querySelector(".widget > .btn-reset");this.fakeTimeI=this.question.querySelector(".widget > input"),(0,Qh.default)(this.fakeTimeI).timepicker({showMeridian:_i.hour12,meridianNotation:{am:_i.amNotation,pm:_i.pmNotation}}),this.value=this.originalInputValue,this.fakeTimeI.addEventListener("change",()=>{let r=_i.hour12?Xr.time.convertMeridian(this.value):this.value;this.originalInputValue=r}),n.addEventListener("click",this._reset.bind(this)),this.element.addEventListener(Xe.ApplyFocus().type,()=>{this.fakeTimeI.focus()})}_reset(){let t=this.originalInputValue?Xe.Change():null;(t||this.value)&&(this.value="",this.fakeTimeI.dispatchEvent(t))}update(){if(this.fakeTimeI){let t=(0,Qh.default)(this.fakeTimeI);this.element.value!==this.value&&t.timepicker("setTime",this.element.value),t.timepicker("updateLocalization")}}get value(){return this.fakeTimeI.value}set value(t){(0,Qh.default)(this.fakeTimeI).timepicker("setTime",t)}},NS=iv;var Go=Yt(su()),Jh=Yt(gr());var G$=Yt(nv());var av=class extends Ut{static get selector(){return'.question input[type="datetime-local"]:not([readonly])'}static condition(){return!$n.touch||!$n.inputTypes["datetime-local"]}_init(){this.$fakeDateI=this._createFakeDateInput(),this.$fakeTimeI=this._createFakeTimeInput(),this.element.classList.add("hide"),this.element.before(document.createRange().createContextualFragment('<div class="datetimepicker widget" />'));let t=this.question.querySelector(".widget");t.append(this.$fakeDateI[0].closest(".date")),t.append(this.$fakeTimeI[0].closest(".timepicker")),this.$fakeDateI.datepicker({format:"yyyy-mm-dd",autoclose:!0,todayHighlight:!0,forceParse:!1}),this.$fakeTimeI.timepicker({showMeridian:_i.hour12,meridianNotation:{am:_i.amNotation,pm:_i.pmNotation}}),this.value=this.originalInputValue,this._setFocusHandler(this.$fakeDateI.add(this.$fakeTimeI)),this.$fakeDateI.on("change changeDate",()=>(Xr.date.validate(this.$fakeDateI[0].value)||this.$fakeDateI.val("").datepicker("update"),this.originalInputValue=this.value,!1)),this.$fakeTimeI.on("change",()=>(this.originalInputValue=this.value,!1)),this.question.querySelector(".btn-reset").addEventListener("click",()=>{let n=this.originalInputValue?"change":"";(n||this.$fakeDateI.val()||this.$fakeTimeI.val())&&(this.$fakeDateI.val("").trigger(n).datepicker("update"),this.$fakeTimeI.val("").trigger(n))})}_createFakeDateInput(){return(0,Jh.default)('<div class="date"><input class="ignore" type="text" placeholder="yyyy-mm-dd"/></div>').find("input")}_createFakeTimeInput(){return(0,Jh.default)(`<div class="timepicker">
                    <input class="ignore timepicker-default" type="text" placeholder="hh:mm"/>
                </div>`).append(this.resetButtonHtml).find("input")}_setFocusHandler(t){this.element.addEventListener(Xe.ApplyFocus().type,()=>{t.eq(0).focus()})}update(){let t=(0,Jh.default)(this.element),n=t.val().length>0?(0,Go.toISOLocalString)(new Date(t.val())):"";if(oo.macos&&h1.safari&&(n=t.val().length>0?(0,Go.toISOLocalString)(new Date(t.val()+(0,Go.getTimezoneOffsetAsTime)(new Date))):""),n!==this.value){let r=n.split("T"),i=r[0],a=r[1]&&r[1].length>4?r[1].substring(0,5):"";this.$fakeDateI.datepicker("setDate",i),this.$fakeTimeI.timepicker("setTime",a)}this.$fakeTimeI.timepicker("updateLocalization")}get originalInputValue(){let t=super.originalInputValue;return t===""?"":(0,Go.toISOLocalString)(new Date(t))}set originalInputValue(t){super.originalInputValue=t}get value(){if(this.$fakeDateI.val().length>0&&this.$fakeTimeI.val().length>3){let t=this.$fakeDateI.val().split("-"),r=(_i.hour12?Xr.time.convertMeridian(this.$fakeTimeI.val()):this.$fakeTimeI.val()).split(":");return(0,Go.toISOLocalString)(new Date(t[0],t[1]-1,t[2],r[0],r[1]))}return""}set value(t){let r=(t?(0,Go.toISOLocalString)(new Date(t)):"").split("T"),i=r[0],a=r[1]&&r[1].length>4?r[1].substring(0,5):i&&!r[1]?"00:00":"";this.$fakeDateI.datepicker("setDate",i),this.$fakeTimeI.timepicker("setTime",a)}},PS=av;var sv=class extends Ut{static get selector(){return".or-appearance-no-buttons"}_init(){this.element.querySelectorAll(".option-label").forEach(t=>{Rr(t,"img, video, audio")&&(t.style.display="none")})}},DS=sv;var Dl=Yt(gr());var OS=/[a-zA-Z0-9+-.]+?:\/\//,Bu;function V8(){return Promise.resolve(!0)}function z8(){return!1}function H8(e){Bu=e}function BS(e){return new Promise((t,n)=>{if(!e)t(null);else if(typeof e=="string"){let r=encodeURIComponent(e);e.startsWith("/")||e.startsWith("data:")?t(e):Bu&&Object.prototype.hasOwnProperty.call(Bu,r)?t(Bu[r]):Bu&&Object.prototype.hasOwnProperty.call(Bu,e)?t(Bu[e]):!lt.offline||!gn.available?n(new Error("store not available")):OS.test(e)?gn.survey.resource.get(lt.enketoId,e).then(i=>{i.item?t(URL.createObjectURL(i.item)):n(new Error("File Retrieval Error"))}).catch(n):gn.record.file.get(K8(),e).then(i=>{i.item?ov(i.item)?n(RS()):t(URL.createObjectURL(i.item)):n(new Error("File Retrieval Error"))}).catch(n)}else typeof e=="object"?ov(e)?n(RS()):t(URL.createObjectURL(e)):n(new Error("Unknown error occurred"))})}function $8(e){return BS(e).then(t=>/https?:\/\//.test(t)?ya.getMediaFile(t).then(n=>URL.createObjectURL(n.item)):t)}function MS(){let e=[...document.querySelectorAll('form.or input[type="file"], form.or input[type="text"][data-drawing="true"]')],t=[],n=function(r,i){if(i&&i.name){let a=Qs(i,r.dataset.filenamePostfix);r.dataset.resized&&r.dataset.resizedDataURI&&(i=pa.dataUriToBlobSync(r.dataset.resizedDataURI)),i=new Blob([i],{type:i.type}),i.name=a}return i};return e.forEach(r=>{if(r.type==="file")r.files[0]&&t.push(Promise.resolve(n(r,r.files[0])));else if(r.value){let i=r.closest(".question").querySelector(".draw-widget canvas");i&&!OS.test(r.value)&&t.push(new Promise(a=>i.toBlob(s=>{s.name=r.value,a(n(r,s))})))}}),Promise.all(t).then(r=>(e.filter(i=>i.matches("[data-loaded-file-name]")).forEach(i=>r.push(i.getAttribute("data-loaded-file-name"))),r))}function j8(e){return MS().then(t=>t.find(n=>n.name===e))}function K8(){return lt.recordId}function ov(e){return e&&e.size>US()}function RS(){return new Error(Be("filepicker.toolargeerror",{maxSize:qS()}))}function US(){return lt.maxSize}function qS(){return`${Math.round(US()*100/(1e3*1e3*100))}MB`}var Pi={isWaitingForPermissions:z8,init:V8,setInstanceAttachments:H8,getFileUrl:BS,getObjectUrl:$8,getCurrentFiles:MS,getCurrentFile:j8,isTooLarge:ov,getMaxSizeReadable:qS};function W8(e,t,n){e.setAttribute("href",t||""),e.setAttribute("download",n||"")}var Pl={updateDownloadLink:W8};function uv(e,t,n){this.message=e,this.translationKey=t,this.translationOptions=n}uv.prototype=Object.create(Error.prototype);uv.prototype.name="TranslatedError";var FS=uv;var lv=class extends Ut{static get selector(){return'.question:not(.or-appearance-draw):not(.or-appearance-signature):not(.or-appearance-annotate) input[type="file"]'}_init(){let t=this.element.getAttribute("data-loaded-file-name"),n=this;this.element.classList.add("hide"),this.question.classList.add("with-media","clearfix");let r=document.createRange().createContextualFragment(`<div class="widget file-picker">
                    <input class="ignore fake-file-input"/>
                    <div class="file-feedback"></div>
                    <div class="file-preview"></div>
                </div>`);r.querySelector("input").after(this.downloadButtonHtml),r.querySelector("input").after(this.resetButtonHtml),this.element.after(r),this.disable();let i=this.question.querySelector(".widget");this.feedback=i.querySelector(".file-feedback"),this.preview=i.querySelector(".file-preview"),this.fakeInput=i.querySelector(".fake-file-input"),this.downloadLink=i.querySelector(".btn-download"),n._setResetButtonListener(i.querySelector(".btn-reset")),n._setFocusListener(),this._showFileName(t),Pi.isWaitingForPermissions()&&this._showFeedback(Be("filepicker.waitingForPermissions"),"warning"),this._updatePlaceholder(),this.element.closest("form.or").addEventListener(Xe.UpdateMaxSize().type,this._updatePlaceholder.bind(this)),Pi.init().then(()=>{n._showFeedback(),n._setChangeListener(),n.props.readonly||n.enable(),t&&Pi.getFileUrl(t).then(a=>{n._showPreview(a,n.props.mediaType),n._updateDownloadLink(a,t)}).catch(()=>{n._showFeedback(Be("filepicker.notFound",{existing:t}),"error")})}).catch(a=>{n._showFeedback(a,"error")})}_updatePlaceholder(){this.fakeInput.setAttribute("placeholder",Be("filepicker.placeholder",{maxSize:Pi.getMaxSizeReadable()||"?MB"}))}_setResetButtonListener(t){t&&t.addEventListener("click",()=>{(this.originalInputValue||this.value)&&cn.confirm(Be("filepicker.resetWarning",{item:Be("filepicker.file")})).then(n=>{n&&(this.originalInputValue="")}).catch(()=>{})})}_setChangeListener(){let t=this;(0,Dl.default)(this.element).on("click",n=>{if(t.props.readonly||n.namespace!=="propagate")return t.fakeInput.focus(),n.stopImmediatePropagation(),!1}).on("change.propagate",n=>{let r,i,a,s=this.element.getAttribute("data-loaded-file-name"),o=new Date;if(n.namespace==="propagate")return(0,Dl.default)(this.element).trigger("change.file"),!1;n.stopImmediatePropagation(),r=n.target.files[0],a=`-${o.getHours()}_${o.getMinutes()}_${o.getSeconds()}`,n.target.dataset.filenamePostfix=a,i=Qs(r,a),this._resizeFile(r,t.props.mediaType).then(l=>{n.target.dataset.resized=!0,n.target.dataset.resizedDataURI=l.dataURI,r=l.blob}).catch(()=>{}).finally(()=>{Pi.getFileUrl(r,i).then(l=>{t._showPreview(l,t.props.mediaType),t._showFeedback(),t._showFileName(i),s&&s!==i&&t.element.removeAttribute("data-loaded-file-name"),t._updateDownloadLink(l,i),(0,Dl.default)(t.element).trigger("change.propagate")}).catch(l=>{(0,Dl.default)(t.element).val("").trigger("change.propagate"),t._showFileName(""),t._showPreview(null),t._showFeedback(l,"error"),t._updateDownloadLink("","")})})}),this.fakeInput.addEventListener("click",n=>{if(n.preventDefault(),this.props.readonly||this.originalInputValue||this.value){this.fakeInput.focus(),n.stopImmediatePropagation();return}(0,Dl.default)(t.element).trigger("click.propagate")}),this.fakeInput.addEventListener("change",n=>{n.preventDefault(),n.stopPropagation()})}_setFocusListener(){this.element.addEventListener(Xe.ApplyFocus().type,()=>{this.fakeInput.focus()})}_showFileName(t){this.value=t,this.fakeInput.readOnly=!!t}_showFeedback(t,n){let r=t instanceof FS?Be(t.translationKey,t.translationOptions):t instanceof Error?t.message:t||"";n=n||"",this.feedback.textContent=r,this.feedback.setAttribute("class",`file-feedback ${n}`)}_showPreview(t,n){let r;switch(vb(this.preview),n){case"image/*":r="<img />";break;case"audio/*":r='<audio controls="controls"/>';break;case"video/*":r='<video controls="controls"/>';break}if(t&&r){let i=document.createRange().createContextualFragment(r);i.querySelector("*").src=t,this.preview.append(i)}}_resizeFile(t,n){return new Promise((r,i)=>{n!=="image/*"&&i(t),this.props&&this.props.maxPixels?i0(t,this.props.maxPixels).then(a=>{let s=new FileReader;s.addEventListener("load",()=>{r({blob:a,dataURI:s.result})},!1),s.readAsDataURL(a)}).catch(()=>{i(t)}):i(t)})}_updateDownloadLink(t,n){Pl.updateDownloadLink(this.downloadLink,t,n)}disable(){this.element.disabled=!0,this.question.querySelector(".btn-reset").disabled=!0}enable(){this.element.disabled=!1,this.question.querySelector(".btn-reset").disabled=!1}get props(){let t=this._props;return t.mediaType=this.element.getAttribute("accept"),this.element.dataset.maxPixels&&ai(this.element.dataset.maxPixels)&&(t.maxPixels=parseInt(this.element.dataset.maxPixels,10)),t}get value(){return this.fakeInput.value}set value(t){this.fakeInput.value=t}},VS=lv;var $s=Yt(gr());function Mu(e,t,n){this.x=e,this.y=t,this.time=n||new Date().getTime()}Mu.prototype.velocityFrom=function(e){return this.time!==e.time?this.distanceTo(e)/(this.time-e.time):1};Mu.prototype.distanceTo=function(e){return Math.sqrt(Math.pow(this.x-e.x,2)+Math.pow(this.y-e.y,2))};Mu.prototype.equals=function(e){return this.x===e.x&&this.y===e.y&&this.time===e.time};function cv(e,t,n,r){this.startPoint=e,this.control1=t,this.control2=n,this.endPoint=r}cv.prototype.length=function(){for(var e=10,t=0,n=void 0,r=void 0,i=0;i<=e;i+=1){var a=i/e,s=this._point(a,this.startPoint.x,this.control1.x,this.control2.x,this.endPoint.x),o=this._point(a,this.startPoint.y,this.control1.y,this.control2.y,this.endPoint.y);if(i>0){var l=s-n,c=o-r;t+=Math.sqrt(l*l+c*c)}n=s,r=o}return t};cv.prototype._point=function(e,t,n,r,i){return t*(1-e)*(1-e)*(1-e)+3*n*(1-e)*(1-e)*e+3*r*(1-e)*e*e+i*e*e*e};function G8(e,t,n){var r,i,a,s=null,o=0;n||(n={});var l=function(){o=n.leading===!1?0:Date.now(),s=null,a=e.apply(r,i),s||(r=i=null)};return function(){var c=Date.now();!o&&n.leading===!1&&(o=c);var h=t-(c-o);return r=this,i=arguments,h<=0||h>t?(s&&(clearTimeout(s),s=null),o=c,a=e.apply(r,i),s||(r=i=null)):!s&&n.trailing!==!1&&(s=setTimeout(l,h)),a}}function rr(e,t){var n=this,r=t||{};this.velocityFilterWeight=r.velocityFilterWeight||.7,this.minWidth=r.minWidth||.5,this.maxWidth=r.maxWidth||2.5,this.throttle="throttle"in r?r.throttle:16,this.minDistance="minDistance"in r?r.minDistance:5,this.throttle?this._strokeMoveUpdate=G8(rr.prototype._strokeUpdate,this.throttle):this._strokeMoveUpdate=rr.prototype._strokeUpdate,this.dotSize=r.dotSize||function(){return(this.minWidth+this.maxWidth)/2},this.penColor=r.penColor||"black",this.backgroundColor=r.backgroundColor||"rgba(0,0,0,0)",this.onBegin=r.onBegin,this.onEnd=r.onEnd,this._canvas=e,this._ctx=e.getContext("2d"),this.clear(),this._handleMouseDown=function(i){i.which===1&&(n._mouseButtonDown=!0,n._strokeBegin(i))},this._handleMouseMove=function(i){n._mouseButtonDown&&n._strokeMoveUpdate(i)},this._handleMouseUp=function(i){i.which===1&&n._mouseButtonDown&&(n._mouseButtonDown=!1,n._strokeEnd(i))},this._handleTouchStart=function(i){if(i.targetTouches.length===1){var a=i.changedTouches[0];n._strokeBegin(a)}},this._handleTouchMove=function(i){i.preventDefault();var a=i.targetTouches[0];n._strokeMoveUpdate(a)},this._handleTouchEnd=function(i){var a=i.target===n._canvas;a&&(i.preventDefault(),n._strokeEnd(i))},this.on()}rr.prototype.clear=function(){var e=this._ctx,t=this._canvas;e.fillStyle=this.backgroundColor,e.clearRect(0,0,t.width,t.height),e.fillRect(0,0,t.width,t.height),this._data=[],this._reset(),this._isEmpty=!0};rr.prototype.fromDataURL=function(e){var t=this,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=new Image,i=n.ratio||window.devicePixelRatio||1,a=n.width||this._canvas.width/i,s=n.height||this._canvas.height/i;this._reset(),r.src=e,r.onload=function(){t._ctx.drawImage(r,0,0,a,s)},this._isEmpty=!1};rr.prototype.toDataURL=function(e){var t;switch(e){case"image/svg+xml":return this._toSVG();default:for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return(t=this._canvas).toDataURL.apply(t,[e].concat(r))}};rr.prototype.on=function(){this._handleMouseEvents(),this._handleTouchEvents()};rr.prototype.off=function(){this._canvas.removeEventListener("mousedown",this._handleMouseDown),this._canvas.removeEventListener("mousemove",this._handleMouseMove),document.removeEventListener("mouseup",this._handleMouseUp),this._canvas.removeEventListener("touchstart",this._handleTouchStart),this._canvas.removeEventListener("touchmove",this._handleTouchMove),this._canvas.removeEventListener("touchend",this._handleTouchEnd)};rr.prototype.isEmpty=function(){return this._isEmpty};rr.prototype._strokeBegin=function(e){this._data.push([]),this._reset(),this._strokeUpdate(e),typeof this.onBegin=="function"&&this.onBegin(e)};rr.prototype._strokeUpdate=function(e){var t=e.clientX,n=e.clientY,r=this._createPoint(t,n),i=this._data[this._data.length-1],a=i&&i[i.length-1],s=a&&r.distanceTo(a)<this.minDistance;if(!(a&&s)){var o=this._addPoint(r),l=o.curve,c=o.widths;l&&c&&this._drawCurve(l,c.start,c.end),this._data[this._data.length-1].push({x:r.x,y:r.y,time:r.time,color:this.penColor})}};rr.prototype._strokeEnd=function(e){var t=this.points.length>2,n=this.points[0];if(!t&&n&&this._drawDot(n),n){var r=this._data[this._data.length-1],i=r[r.length-1];n.equals(i)||r.push({x:n.x,y:n.y,time:n.time,color:this.penColor})}typeof this.onEnd=="function"&&this.onEnd(e)};rr.prototype._handleMouseEvents=function(){this._mouseButtonDown=!1,this._canvas.addEventListener("mousedown",this._handleMouseDown),this._canvas.addEventListener("mousemove",this._handleMouseMove),document.addEventListener("mouseup",this._handleMouseUp)};rr.prototype._handleTouchEvents=function(){this._canvas.style.msTouchAction="none",this._canvas.style.touchAction="none",this._canvas.addEventListener("touchstart",this._handleTouchStart),this._canvas.addEventListener("touchmove",this._handleTouchMove),this._canvas.addEventListener("touchend",this._handleTouchEnd)};rr.prototype._reset=function(){this.points=[],this._lastVelocity=0,this._lastWidth=(this.minWidth+this.maxWidth)/2,this._ctx.fillStyle=this.penColor};rr.prototype._createPoint=function(e,t,n){var r=this._canvas.getBoundingClientRect();return new Mu(e-r.left,t-r.top,n||new Date().getTime())};rr.prototype._addPoint=function(e){var t=this.points,n=void 0;if(t.push(e),t.length>2){t.length===3&&t.unshift(t[0]),n=this._calculateCurveControlPoints(t[0],t[1],t[2]);var r=n.c2;n=this._calculateCurveControlPoints(t[1],t[2],t[3]);var i=n.c1,a=new cv(t[1],r,i,t[2]),s=this._calculateCurveWidths(a);return t.shift(),{curve:a,widths:s}}return{}};rr.prototype._calculateCurveControlPoints=function(e,t,n){var r=e.x-t.x,i=e.y-t.y,a=t.x-n.x,s=t.y-n.y,o={x:(e.x+t.x)/2,y:(e.y+t.y)/2},l={x:(t.x+n.x)/2,y:(t.y+n.y)/2},c=Math.sqrt(r*r+i*i),h=Math.sqrt(a*a+s*s),p=o.x-l.x,E=o.y-l.y,b=h/(c+h),C={x:l.x+p*b,y:l.y+E*b},N=t.x-C.x,w=t.y-C.y;return{c1:new Mu(o.x+N,o.y+w),c2:new Mu(l.x+N,l.y+w)}};rr.prototype._calculateCurveWidths=function(e){var t=e.startPoint,n=e.endPoint,r={start:null,end:null},i=this.velocityFilterWeight*n.velocityFrom(t)+(1-this.velocityFilterWeight)*this._lastVelocity,a=this._strokeWidth(i);return r.start=this._lastWidth,r.end=a,this._lastVelocity=i,this._lastWidth=a,r};rr.prototype._strokeWidth=function(e){return Math.max(this.maxWidth/(e+1),this.minWidth)};rr.prototype._drawPoint=function(e,t,n){var r=this._ctx;r.moveTo(e,t),r.arc(e,t,n,0,2*Math.PI,!1),this._isEmpty=!1};rr.prototype._drawCurve=function(e,t,n){var r=this._ctx,i=n-t,a=Math.floor(e.length());r.beginPath();for(var s=0;s<a;s+=1){var o=s/a,l=o*o,c=l*o,h=1-o,p=h*h,E=p*h,b=E*e.startPoint.x;b+=3*p*o*e.control1.x,b+=3*h*l*e.control2.x,b+=c*e.endPoint.x;var C=E*e.startPoint.y;C+=3*p*o*e.control1.y,C+=3*h*l*e.control2.y,C+=c*e.endPoint.y;var N=t+c*i;this._drawPoint(b,C,N)}r.closePath(),r.fill()};rr.prototype._drawDot=function(e){var t=this._ctx,n=typeof this.dotSize=="function"?this.dotSize():this.dotSize;t.beginPath(),this._drawPoint(e.x,e.y,n),t.closePath(),t.fill()};rr.prototype._fromData=function(e,t,n){for(var r=0;r<e.length;r+=1){var i=e[r];if(i.length>1)for(var a=0;a<i.length;a+=1){var s=i[a],o=new Mu(s.x,s.y,s.time),l=s.color;if(a===0)this.penColor=l,this._reset(),this._addPoint(o);else if(a!==i.length-1){var c=this._addPoint(o),h=c.curve,p=c.widths;h&&p&&t(h,p,l)}}else{this._reset();var E=i[0];n(E)}}};rr.prototype._toSVG=function(){var e=this,t=this._data,n=this._canvas,r=Math.max(window.devicePixelRatio||1,1),i=0,a=0,s=n.width/r,o=n.height/r,l=document.createElementNS("http://www.w3.org/2000/svg","svg");l.setAttributeNS(null,"width",n.width),l.setAttributeNS(null,"height",n.height),this._fromData(t,function(I,S,_){var P=document.createElement("path");if(!isNaN(I.control1.x)&&!isNaN(I.control1.y)&&!isNaN(I.control2.x)&&!isNaN(I.control2.y)){var v="M "+I.startPoint.x.toFixed(3)+","+I.startPoint.y.toFixed(3)+" "+("C "+I.control1.x.toFixed(3)+","+I.control1.y.toFixed(3)+" ")+(I.control2.x.toFixed(3)+","+I.control2.y.toFixed(3)+" ")+(I.endPoint.x.toFixed(3)+","+I.endPoint.y.toFixed(3));P.setAttribute("d",v),P.setAttribute("stroke-width",(S.end*2.25).toFixed(3)),P.setAttribute("stroke",_),P.setAttribute("fill","none"),P.setAttribute("stroke-linecap","round"),l.appendChild(P)}},function(I){var S=document.createElement("circle"),_=typeof e.dotSize=="function"?e.dotSize():e.dotSize;S.setAttribute("r",_),S.setAttribute("cx",I.x),S.setAttribute("cy",I.y),S.setAttribute("fill",I.color),l.appendChild(S)});var c="data:image/svg+xml;base64,",h='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"'+(' viewBox="'+i+" "+a+" "+s+" "+o+'"')+(' width="'+s+'"')+(' height="'+o+'"')+">",p=l.innerHTML;if(p===void 0){var E=document.createElement("dummy"),b=l.childNodes;E.innerHTML="";for(var C=0;C<b.length;C+=1)E.appendChild(b[C].cloneNode(!0));p=E.innerHTML}var N="</svg>",w=h+p+N;return c+btoa(w)};rr.prototype.fromData=function(e){var t=this;this.clear(),this._fromData(e,function(n,r){return t._drawCurve(n,r.start,r.end)},function(n){return t._drawDot(n)}),this._data=e};rr.prototype.toData=function(){return this._data};var ed=rr;var Z8=1500;ed.prototype.fromObjectURL=function(e,t){let n=new Image;t=t||{};let r=t.ratio||window.devicePixelRatio||1,i=t.width||this._canvas.width/r,a=t.height||this._canvas.height/r,s=this;return this._reset(),new Promise(o=>{n.src=e,n.onload=()=>{let l=n.width,c=n.height,h=i/l,p=a/c,E,b;if(h<1||p<1){let C=Math.min(h,p);E=(i-l*C)/2,b=(a-c*C)/2,s._ctx.drawImage(n,0,0,l,c,E,b,l*C,c*C)}else E=(i-l)/2,b=(a-c)/2,s._ctx.drawImage(n,E,b,l,c);o(e)},s._isEmpty=!1})};ed.prototype.updateData=function(e){let t=this;this._fromData(e,(n,r)=>{t._drawCurve(n,r.start,r.end)},n=>{t._drawDot(n)}),this._data=e};var fv=class extends Ut{static get selector(){return'.or-appearance-draw input[data-type-xml="binary"][accept^="image"], .or-appearance-signature input[data-type-xml="binary"][accept^="image"], .or-appearance-annotate input[data-type-xml="binary"][accept^="image"]'}_init(){let t,n=this,r=this.element.dataset.loadedFileName;this.element.type="text",this.element.dataset.drawing=!0,this.element.after(this._getMarkup());let{question:i}=this;i.classList.add(`or-${this.props.type}-initialized`),this.$widget=(0,$s.default)(i.querySelector(".widget")),t=this.$widget[0].querySelector(".draw-widget__body__canvas"),this._handleResize(t),this._resizeCanvas(t),this.props.load&&this._handleFiles(r),t.addEventListener("blur",this._forceUpdate.bind(this)),this.initialize=Pi.init().then(()=>(n.pad=new ed(t,{onEnd:()=>{clearTimeout(n._updateWithDelay),n._updateWithDelay=setTimeout(n._updateValue.bind(n),Z8)},penColor:n.props.colors[0]||"black"}),n.pad.off(),r?(n.element.value=r,n._loadFileIntoPad(r).then(n._updateDownloadLink.bind(n))):!0)),this.disable(),this.initialize.then(()=>{n.$widget.find(".btn-reset").on("click",n._reset.bind(n)).end().find(".draw-widget__colorpicker").on("click",".current",function(){(0,$s.default)(this).parent().toggleClass("reveal")}).on("click","[data-color]:not(.current)",function(){(0,$s.default)(this).siblings().removeClass("current").end().addClass("current").parent().removeClass("reveal"),n.pad.penColor=this.dataset.color}).end().find(".draw-widget__undo").on("click",()=>{let a=n.pad.toData();n.pad.clear();let s=n.$widget[0].querySelector("input[type=file]"),o=s&&s.files[0]?s.files[0]:n.element.dataset.loadedFileName;n._loadFileIntoPad(o).then(()=>{n.pad.updateData(a.slice(0,-1)),n._updateValue(),n.pad.penColor=n.$widget.find(".draw-widget__colorpicker .current")[0].dataset.color})}).end().find(".show-canvas-btn").on("click",()=>(n.$widget.addClass("full-screen"),n._resizeCanvas(t),n.enable(),!1)).end().find(".hide-canvas-btn").on("click",()=>(n.$widget.removeClass("full-screen"),n.pad.off(),n._forceUpdate(),n._resizeCanvas(t),!1)).click(),(0,$s.default)(t).on("canvasreload",()=>{n.cache&&n.pad.fromObjectURL(n.cache).then(n._updateValue.bind(n,!1))}),n.enable()}).catch(a=>{n._showFeedback(a.message)}),(0,$s.default)(this.element).on("applyfocus",()=>{t.focus()}).closest('[role="page"]').on(Xe.PageFlip().type,()=>{n._resizeCanvas(t)})}_forceUpdate(){this._updateWithDelay&&(clearTimeout(this._updateWithDelay),this._updateValue())}_handleFiles(t){this._updatePlaceholder(),this.element.closest("form.or").addEventListener(Xe.UpdateMaxSize().type,this._updatePlaceholder.bind(this));let n=this,r=this.$widget.find("input[type=file]"),i=this.$widget.find(".fake-file-input");this._showFileName(t),r.on("click",a=>{if(n.props.readonly||a.namespace!=="propagate")return n.$fakeInput.focus(),a.stopImmediatePropagation(),!1}).on("change",function(){let a=this.files[0];a?Pi.isTooLarge(a)?n._showFeedback(Be("filepicker.toolargeerror",{maxSize:Pi.getMaxSizeReadable()})):(n.pad.clear(),n._loadFileIntoPad(this.files[0]).then(()=>{n._updateValue.call(n),n._showFileName(a.name),n.enable()})):n._showFileName(null)}),i.on("click",function(a){if(n.props.readonly||r[0].value||i[0].value)return(0,$s.default)(this).focus(),a.stopImmediatePropagation(),!1;a.preventDefault(),r.trigger("click.propagate")}).on("change",()=>!1)}_showFileName(t){this.$widget.find(".fake-file-input").val(t).prop("readonly",!!t)}_updatePlaceholder(){this.$widget.find(".fake-file-input").attr("placeholder",Be("filepicker.placeholder",{maxSize:Pi.getMaxSizeReadable()||"?MB"}))}_getMarkup(){let t=this.props.load?`<input type="file" class="ignore draw-widget__load"${this.props.capture!==null?` capture="${this.props.capture}"`:""} accept="${this.props.accept}"/><div class="widget file-picker"><input class="ignore fake-file-input"/><div class="file-feedback"></div></div>`:"",n=this.props.touch?'<button type="button" class="show-canvas-btn btn btn-default">Draw/Sign</button><button type="button" class="hide-canvas-btn btn btn-default"><span class="icon icon-arrow-left"> </span></button>':"",r=document.createRange().createContextualFragment(`<div class="widget draw-widget">
                <div class="draw-widget__body">
                    ${n}
                    ${t}
                    <canvas class="draw-widget__body__canvas noSwipe disabled" tabindex="0"></canvas>
                    <div class="draw-widget__colorpicker"></div>
                    ${this.props.type==="signature"?"":'<button class="btn-icon-only draw-widget__undo" aria-label="undo" type=button><i class="icon icon-undo"> </i></button>'}
                </div>
                <div class="draw-widget__footer">
                    <div class="draw-widget__feedback"></div>
                </div>
            </div>`);r.querySelector(".draw-widget__footer").prepend(this.downloadButtonHtml),r.querySelector(".draw-widget__footer").prepend(this.resetButtonHtml);let i=r.querySelector(".draw-widget__colorpicker");return this.props.colors.forEach((a,s)=>{let o=s===0?" current":"",l=document.createRange().createContextualFragment(`<div class="${o}"data-color="${a}" style="background: ${a};" />`);i.append(l)}),r}_updateValue(t=!0){let n=this.pad.toDataURL();if(this.value!==n){let r=new Date,i=`-${r.getHours()}_${r.getMinutes()}_${r.getSeconds()}`;this.element.dataset.filenamePostfix=i,t&&(this.originalInputValue=this.props.filename),this.value=n,this._updateDownloadLink(this.value)}}_reset(){let t=this;if(this.element.value){let n=this.props.type==="signature"?Be("drawwidget.signature"):this.props.type==="drawing"?Be("drawwidget.drawing"):Be("drawwidget.annotation");cn.confirm(Be("filepicker.resetWarning",{item:n})).then(r=>{r&&(t.pad.clear(),t.cache=null,delete t.element.dataset.loadedFileName,delete t.element.dataset.loadedUrl,t.element.dataset.filenamePostfix="",(0,$s.default)(t.element).val("").trigger("change"),t._updateWithDelay&&(t._updateWithDelay=null),t.$widget.find("input[type=file]").val("").trigger("change"),t._updateDownloadLink(""),t.disable(),t.enable())})}}_loadFileIntoPad(t){let n=this;return t?(typeof t=="string"&&t.startsWith("jr://")&&this.element.dataset.loadedUrl&&(t=this.element.dataset.loadedUrl),Pi.getObjectUrl(t).then(n.pad.fromObjectURL.bind(n.pad)).then(r=>(n.cache=r,r)).catch(()=>{n._showFeedback("File could not be loaded (leave unchanged if already submitted and you want to preserve it).","error")})):Promise.resolve("")}_showFeedback(t){t=t||"",this.$widget.find(".draw-widget__feedback").text(t)}_updateDownloadLink(t){t&&t.indexOf("data:")===0&&(t=URL.createObjectURL(n0(t)));let n=t?Qs({name:this.element.value},this.element.dataset.filenamePostfix):"";Pl.updateDownloadLink(this.$widget.find(".btn-download")[0],t,n)}_handleResize(t){let n=this;(0,$s.default)(window).on("resize",()=>{n._resizeCanvas(t)})}_resizeCanvas(t){if(t.offsetWidth>0){let n=Math.max(window.devicePixelRatio||1,1);t.width=t.offsetWidth*n,t.height=t.offsetHeight*n,t.getContext("2d").scale(n,n),(0,$s.default)(t).trigger("canvasreload")}}disable(){let t=this,n=this.$widget.find(".draw-widget__body__canvas")[0];this.initialize.then(()=>{t.pad.off(),n.classList.add("disabled"),t.$widget.find(".btn-reset").prop("disabled",!0)})}enable(){let t=this,n=this.$widget.find(".draw-widget__body__canvas")[0],r=this.props.touch&&!this.$widget.is(".full-screen"),i=this.props.load&&!this.element.value;this.initialize.then(()=>{!t.props.readonly&&!i&&!r&&(t.pad.on(),n.classList.remove("disabled"),t.$widget.find(".btn-reset").prop("disabled",!1)),t._resizeCanvas(n)})}update(){this.originalInputValue===""&&this._reset()}get props(){let t=this._props;return t.type=t.appearances.includes("draw")?"drawing":t.appearances.includes("signature")?"signature":"annotation",t.filename=`${t.type}.png`,t.load=t.type==="annotation",t.colors=t.type==="signature"?[]:["black","lightblue","blue","red","orange","cyan","yellow","lightgreen","green","pink","purple","lightgray","darkgray"],t.touch=$n.touch,t.accept=this.element.getAttribute("accept"),t.capture=this.element.getAttribute("capture"),t}get value(){return this.cache||""}set value(t){this.cache=t}},zS=fv;var Fu=Yt(gr());var HS;(function(e){"use strict";var t=function(){function r(){this._dropEffect="move",this._effectAllowed="all",this._data={}}return Object.defineProperty(r.prototype,"dropEffect",{get:function(){return this._dropEffect},set:function(i){this._dropEffect=i},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"effectAllowed",{get:function(){return this._effectAllowed},set:function(i){this._effectAllowed=i},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"types",{get:function(){return Object.keys(this._data)},enumerable:!0,configurable:!0}),r.prototype.clearData=function(i){i!=null?delete this._data[i]:this._data=null},r.prototype.getData=function(i){return this._data[i]||""},r.prototype.setData=function(i,a){this._data[i]=a},r.prototype.setDragImage=function(i,a,s){var o=n._instance;o._imgCustom=i,o._imgOffset={x:a,y:s}},r}();e.DataTransfer=t;var n=function(){function r(){if(this._lastClick=0,r._instance)throw"DragDropTouch instance already created.";var i=!1;if(document.addEventListener("test",function(){},{get passive(){return i=!0,!0}}),"ontouchstart"in document){var a=document,s=this._touchstart.bind(this),o=this._touchmove.bind(this),l=this._touchend.bind(this),c=i?{passive:!1,capture:!1}:!1;a.addEventListener("touchstart",s,c),a.addEventListener("touchmove",o,c),a.addEventListener("touchend",l),a.addEventListener("touchcancel",l)}}return r.getInstance=function(){return r._instance},r.prototype._touchstart=function(i){var a=this;if(this._shouldHandle(i)){if(Date.now()-this._lastClick<r._DBLCLICK&&this._dispatchEvent(i,"dblclick",i.target)){i.cancelable&&i.preventDefault(),this._reset();return}this._reset();var s=this._closestDraggable(i.target);s&&!this._dispatchEvent(i,"mousemove",i.target)&&!this._dispatchEvent(i,"mousedown",i.target)&&(this._dragSource=s,this._ptDown=this._getPoint(i),this._lastTouch=i,i.cancelable&&i.preventDefault(),setTimeout(function(){a._dragSource==s&&a._img==null&&a._dispatchEvent(i,"contextmenu",s)&&a._reset()},r._CTXMENU),r._ISPRESSHOLDMODE&&(this._pressHoldInterval=setTimeout(function(){a._isDragEnabled=!0,a._touchmove(i)},r._PRESSHOLDAWAIT)))}},r.prototype._touchmove=function(i){if(this._shouldCancelPressHoldMove(i)){this._reset();return}if(this._shouldHandleMove(i)||this._shouldHandlePressHoldMove(i)){var a=this._getTarget(i);if(this._dispatchEvent(i,"mousemove",a)){this._lastTouch=i,i.cancelable&&i.preventDefault();return}this._dragSource&&!this._img&&this._shouldStartDragging(i)&&(this._dispatchEvent(i,"dragstart",this._dragSource),this._createImage(i),this._dispatchEvent(i,"dragenter",a)),this._img&&(this._lastTouch=i,i.cancelable&&i.preventDefault(),a!=this._lastTarget&&(this._dispatchEvent(this._lastTouch,"dragleave",this._lastTarget),this._dispatchEvent(i,"dragenter",a),this._lastTarget=a),this._moveImage(i),this._isDropZone=this._dispatchEvent(i,"dragover",a))}},r.prototype._touchend=function(i){if(this._shouldHandle(i)){if(this._dispatchEvent(this._lastTouch,"mouseup",i.target)){i.cancelable&&i.preventDefault();return}this._img||(this._dragSource=null,this._dispatchEvent(this._lastTouch,"click",i.target),this._lastClick=Date.now()),this._destroyImage(),this._dragSource&&(i.type.indexOf("cancel")<0&&this._isDropZone&&this._dispatchEvent(this._lastTouch,"drop",this._lastTarget),this._dispatchEvent(this._lastTouch,"dragend",this._dragSource),this._reset())}},r.prototype._shouldHandle=function(i){return i&&!i.defaultPrevented&&i.touches&&i.touches.length<2},r.prototype._shouldHandleMove=function(i){return!r._ISPRESSHOLDMODE&&this._shouldHandle(i)},r.prototype._shouldHandlePressHoldMove=function(i){return r._ISPRESSHOLDMODE&&this._isDragEnabled&&i&&i.touches&&i.touches.length},r.prototype._shouldCancelPressHoldMove=function(i){return r._ISPRESSHOLDMODE&&!this._isDragEnabled&&this._getDelta(i)>r._PRESSHOLDMARGIN},r.prototype._shouldStartDragging=function(i){var a=this._getDelta(i);return a>r._THRESHOLD||r._ISPRESSHOLDMODE&&a>=r._PRESSHOLDTHRESHOLD},r.prototype._reset=function(){this._destroyImage(),this._dragSource=null,this._lastTouch=null,this._lastTarget=null,this._ptDown=null,this._isDragEnabled=!1,this._isDropZone=!1,this._dataTransfer=new t,clearInterval(this._pressHoldInterval)},r.prototype._getPoint=function(i,a){return i&&i.touches&&(i=i.touches[0]),{x:a?i.pageX:i.clientX,y:a?i.pageY:i.clientY}},r.prototype._getDelta=function(i){if(r._ISPRESSHOLDMODE&&!this._ptDown)return 0;var a=this._getPoint(i);return Math.abs(a.x-this._ptDown.x)+Math.abs(a.y-this._ptDown.y)},r.prototype._getTarget=function(i){for(var a=this._getPoint(i),s=document.elementFromPoint(a.x,a.y);s&&getComputedStyle(s).pointerEvents=="none";)s=s.parentElement;return s},r.prototype._createImage=function(i){this._img&&this._destroyImage();var a=this._imgCustom||this._dragSource;if(this._img=a.cloneNode(!0),this._copyStyle(a,this._img),this._img.style.top=this._img.style.left="-9999px",!this._imgCustom){var s=a.getBoundingClientRect(),o=this._getPoint(i);this._imgOffset={x:o.x-s.left,y:o.y-s.top},this._img.style.opacity=r._OPACITY.toString()}this._moveImage(i),document.body.appendChild(this._img)},r.prototype._destroyImage=function(){this._img&&this._img.parentElement&&this._img.parentElement.removeChild(this._img),this._img=null,this._imgCustom=null},r.prototype._moveImage=function(i){var a=this;requestAnimationFrame(function(){if(a._img){var s=a._getPoint(i,!0),o=a._img.style;o.position="absolute",o.pointerEvents="none",o.zIndex="999999",o.left=Math.round(s.x-a._imgOffset.x)+"px",o.top=Math.round(s.y-a._imgOffset.y)+"px"}})},r.prototype._copyProps=function(i,a,s){for(var o=0;o<s.length;o++){var l=s[o];i[l]=a[l]}},r.prototype._copyStyle=function(i,a){if(r._rmvAtts.forEach(function(p){a.removeAttribute(p)}),i instanceof HTMLCanvasElement){var s=i,o=a;o.width=s.width,o.height=s.height,o.getContext("2d").drawImage(s,0,0)}for(var l=getComputedStyle(i),c=0;c<l.length;c++){var h=l[c];h.indexOf("transition")<0&&(a.style[h]=l[h])}a.style.pointerEvents="none";for(var c=0;c<i.children.length;c++)this._copyStyle(i.children[c],a.children[c])},r.prototype._dispatchEvent=function(i,a,s){if(i&&s){var o=document.createEvent("Event"),l=i.touches?i.touches[0]:i;return o.initEvent(a,!0,!0),o.button=0,o.which=o.buttons=1,this._copyProps(o,i,r._kbdProps),this._copyProps(o,l,r._ptProps),o.dataTransfer=this._dataTransfer,s.dispatchEvent(o),o.defaultPrevented}return!1},r.prototype._closestDraggable=function(i){for(;i;i=i.parentElement)if(i.hasAttribute("draggable")&&i.draggable)return i;return null},r}();n._instance=new n,n._THRESHOLD=5,n._OPACITY=.5,n._DBLCLICK=500,n._CTXMENU=900,n._ISPRESSHOLDMODE=!1,n._PRESSHOLDAWAIT=400,n._PRESSHOLDMARGIN=25,n._PRESSHOLDTHRESHOLD=0,n._rmvAtts="id,class,style,draggable".split(","),n._kbdProps="altKey,ctrlKey,metaKey,shiftKey".split(","),n._ptProps="pageX,pageY,clientX,clientY,screenX,screenY".split(","),e.DragDropTouch=n})(HS||(HS={}));var Ml=Yt(eT());var _v=class extends Ut{static get selector(){return".question input.rank"}static get list(){return!0}_init(){let t=this,n=this.originalInputValue,r=$n.touch?"rankwidget.tapstart":"rankwidget.clickstart";this.itemSelector="label:not(.itemset-template)",this.list=(0,Fu.default)(this.element).next(".option-wrapper").addClass("widget rank-widget")[0],(0,Fu.default)(this.list).toggleClass("rank-widget--empty",!n).append(this.resetButtonHtml).append(`<div class="rank-widget__overlay"><span class="rank-widget__overlay__content" data-i18n="${r}">${$n.touch?Be("rankwidget.tapstart"):Be("rankwidget.clickstart")}</span></div>`).on("click",function(){t.element.disabled||(this.classList.remove("rank-widget--empty"),t.originalInputValue=t.value,t.element.dispatchEvent(Xe.FakeFocus()))}),this.list.querySelector(".btn-reset").addEventListener("click",i=>{this._reset(),i.stopPropagation()}),this.element.classList.add("hide"),this.value=n,this.list.querySelectorAll(this.itemSelector).forEach(i=>{let a=document.createElement("span");a.textContent="::",a.className="handle",i.append(a)}),(0,Ml.default)(this.list,{items:this.itemSelector,handle:".handle",containerSerializer(i){return{value:[].slice.call(i.node.querySelectorAll(`${t.itemSelector} input`)).map(a=>a.value).join(" ")}}})[0].addEventListener("sortupdate",()=>{this.originalInputValue=this.value,this.element.dispatchEvent(Xe.FakeFocus())}),this.props.readonly&&this.disable()}_reset(){this.originalInputValue=""}get value(){return(0,Ml.default)(this.list,"serialize")[0].container.value}set value(t){if(!t)this._reset();else{let n=this,r=t.split(" "),i=[...this.list.querySelectorAll(`${this.itemSelector} input`)];if(r.length!==i.length)throw new Error("Could not load rank widget value. Number of items mismatch.");i.sort((a,s)=>{let o=r.indexOf(a.value),l=r.indexOf(s.value);if(o===-1||l===-1)throw new Error("Could not load rank widget value. Mismatch in item values.");return o-l}),i.forEach(a=>{(0,Fu.default)(n.list).find(".btn-reset").before((0,Fu.default)(a.parentNode).detach())})}}disable(){(0,Fu.default)(this.element).prop("disabled",!0).next(".widget").find("input, button").prop("disabled",!0),(0,Ml.default)(this.list,"disable")}enable(){(0,Fu.default)(this.element).prop("disabled",!1).next(".widget").find("input, button").prop("disabled",!1),(0,Ml.default)(this.list,"enable")}update(){let{value:t}=this.element;(0,Ml.default)(this.list),t?(this.value=t,this.originalInputValue=t):this._reset()}get originalInputValue(){return super.originalInputValue}set originalInputValue(t){super.originalInputValue=t,this.list.classList.toggle("rank-widget--empty",!t)}},tT=_v;var Qc=class{};var bv=class extends Ut{static get selector(){return'.or-appearance-distress input[type="number"], .question:not(.or-appearance-analog-scale):not(.or-appearance-rating) > input[type="number"][min][max][step]'}_init(){let t=this,n=document.createRange().createContextualFragment(this._getHtmlStr());n.querySelector(".range-widget__scale__end").before(this.resetButtonHtml),n.querySelector(".range-widget__scale__start").textContent=this.props.min,n.querySelector(".range-widget__scale__end").textContent=this.props.max,this.element.after(n),this.element.classList.add("hide"),this.element.addEventListener("applyfocus",()=>{this.range.focus()}),this.widget=this.question.querySelector(".widget"),this.range=this.widget.querySelector("input"),this.current=this.widget.querySelector(".range-widget__current"),this.props.readonly&&this.disable(),this.range.addEventListener("change",()=>{this.current.textContent=this.value,this._updateMercury((this.value-this.props.min)/(t.props.max-t.props.min)),this.originalInputValue!==this.value&&(this.originalInputValue=this.value)}),this.widget.querySelector("input.empty").addEventListener("click",()=>{this.range.classList.remove("empty"),this.range.dispatchEvent(Xe.Change())}),this.widget.querySelector("input.empty").addEventListener("touchstart",()=>{this.range.classList.remove("empty"),this.range.dispatchEvent(Xe.Change())}),this.widget.querySelector(".btn-reset").addEventListener("click",this._reset.bind(this)),this.update();let r=this.props.ticks?Math.ceil(Math.abs((this.props.max-this.props.min)/this.props.step)):1,i=Math.ceil(r/this.props.maxTicks);for(;r%i&&i<r;)i++;r/=i,this.widget.querySelector(".range-widget__ticks").append(document.createRange().createContextualFragment(new Array(r).fill("<span></span>").join("")))}_getHtmlStr(){return`<div class="widget range-widget">
                <div class="range-widget__wrap">
                    <div class="range-widget__current"></div>
                    <div class="range-widget__bg"></div>
                    <div class="range-widget__ticks"></div>
                    <div class="range-widget__scale">
                        <span class="range-widget__scale__start"></span>
                        ${this._stepsBetweenHtmlStr(this.props)}
                        <span class="range-widget__scale__end"></span>
                    </div>
                    <div class="range-widget__bulb">
                        <div class="range-widget__bulb__inner"></div>
                        <div class="range-widget__bulb__mercury"></div>
                    </div>
                </div>
                <input type="range" class="ignore empty" min="${this.props.min}" max="${this.props.max}" step="${this.props.step}"/>
            </div>`}_updateMercury(t){let n=this.widget.querySelector(".range-widget__ticks").clientHeight,r=this.widget.querySelector(".range-widget__bulb").clientHeight;this.widget.querySelector(".range-widget__bulb__mercury").style.height=`${t*n+.5*r}px`}_stepsBetweenHtmlStr(t){let n="";if(t.showScale&&(t.max-t.min)/t.step<=10&&(t.max-t.min)%t.step===0)for(let i=t.min+t.step;i<t.max;i+=t.step)n+=`<span class="range-widget__scale__between">${i}</span>`;return n}_reset(){this.current.textContent="",this._updateMercury(0),this.value="",this.originalInputValue=""}disable(){this.widget.querySelectorAll("input, button").forEach(t=>t.disabled=!0)}enable(){this.widget.querySelectorAll("input, button").forEach(t=>t.disabled=!1)}update(){let{value:t}=this.element;ai(t)?(this.value=t,this.range.dispatchEvent(Xe.Change())):this._reset()}get props(){let t=this._props,n=ai(this.element.getAttribute("min"))?this.element.getAttribute("min"):0,r=ai(this.element.getAttribute("max"))?this.element.getAttribute("max"):10,i=ai(this.element.getAttribute("step"))?this.element.getAttribute("step"):1,a=t.appearances.includes("distress");return t.min=Number(n),t.max=Number(r),t.step=Number(i),t.vertical=t.appearances.includes("vertical")||a,t.ticks=!t.appearances.includes("no-ticks"),t.showScale=a,t.maxTicks=50,t}get value(){return this.range.classList.contains("empty")?"":this.range.value}set value(t){this.range.value=t,this.range.classList.toggle("empty",t==="")}},nT=bv;var wv=class extends Ut{static get selector(){return".question.or-appearance-columns"}_init(){this.element.querySelectorAll(".option-wrapper").forEach(t=>{let r=3-t.querySelectorAll("label").length%3;for(;r<3&&r>0;)t.append(document.createRange().createContextualFragment('<label class="filler"></label>')),r--;this.question.classList.add("or-columns-initialized")})}},rT=wv;var xv=class extends Ut{static get selector(){return"a.or-big-image"}_init(){this.element.addEventListener("click",t=>{let n=this.element.getAttribute("href"),r=this.element.querySelector("img"),i=r.getAttribute("src");this.element.setAttribute("href",i),r.setAttribute("src",n),this.element.classList.toggle("open"),t.preventDefault(),t.stopPropagation()})}},iT=xv;var Ev=Yt(gr());var Cv=class extends Ut{static get selector(){return'.or-appearance-comment input[type="text"][data-for], .or-appearance-comment textarea[data-for]'}static get helpersRequired(){return["input","pathToAbsolute"]}_init(){if(this.linkedQuestion=this._getLinkedQuestion(this.element),this.commentQuestion=this.question,this.linkedQuestion){this.commentQuestion.classList.add("hide"),this.commentQuestion.setAttribute("role","comment");let t=document.createRange().createContextualFragment('<a class="btn-icon-only btn-comment aria-label="comment" type="button" href="#"><i class="icon"> </i></a>'),n=this.linkedQuestion.querySelectorAll(".question-label");n[n.length-1].after(t),this.commentButton=this.linkedQuestion.querySelector(".btn-comment"),this._setCommentButtonState(this.originalInputValue),this._setCommentButtonHandler(),this._setValidationHandler(),this._setFocusHandler()}}_getLinkedQuestion(t){let n=this.options.helpers.input.getName(t),r=this.element.dataset.for.trim(),i=this.options.helpers.pathToAbsolute(r,n),a=t.closest("form.or, .or-repeat");return this.options.helpers.input.getWrapNode(a.querySelector(`[name="${i}"], [data-name="${i}"]`))}_commentHasError(){return this.commentQuestion.classList.contains("invalid-required")||this.commentQuestion.classList.contains("invalid-constraint")}_setCommentButtonState(t,n){t=typeof t=="string"?t.trim():t,this.commentButton.classList.toggle("empty",!t),this.commentButton.classList.toggle("invalid",!!n)}_setCommentButtonHandler(){this.commentButton.addEventListener("click",t=>{this._isCommentModalShown(this.linkedQuestion)?this._hideCommentModal(this.linkedQuestion):this._showCommentModal(),t.preventDefault(),t.stopPropagation()})}_setValidationHandler(){this.element.closest("form.or").addEventListener(Xe.ValidationComplete().type,()=>{let t=this._commentHasError(),n=this.originalInputValue;this._setCommentButtonState(n,t)})}_setFocusHandler(){(0,Ev.default)(this.element).on("applyfocus",()=>{this.commentButton.matches(":visible")?this.commentButton.click():console.warn(`The linked question is not visible. Cannot apply focus to ${this.element.getAttribute("name")}`)})}_isCommentModalShown(t){return!!t.querySelector(".or-comment-widget")}_showCommentModal(){let t=this.question.cloneNode(!0),n=Be("widget.comment.update")||"Update",r=t.querySelector("input:not(.ignore), textarea:not(.ignore)");t.classList.remove("hide"),r.classList.add("ignore"),r.removeAttribute("name data-for data-type-xml");let i=document.createRange().createContextualFragment(`<section class="widget or-comment-widget">
                <div class="or-comment-widget__content">
                    <button class="btn btn-primary or-comment-widget__content__btn-update" type="button">${n}</button>
                    <button class="btn-icon-only or-comment-widget__content__btn-close-x" type="button">&times;</button>
                </div>
            </section>
            `);i.querySelector(".or-comment-widget__content").prepend(t);let a=document.createRange().createContextualFragment('<div class="or-comment-widget__overlay"></div>');this.linkedQuestion.prepend(i),this.linkedQuestion.before(a);let s=this.linkedQuestion.previousElementSibling,o=this.linkedQuestion.querySelector(".or-comment-widget"),l=o.querySelector(".or-comment-widget__content__btn-update"),c=o.querySelector(".or-comment-widget__content__btn-close-x");r.focus(),o.scrollIntoView(!1),l.addEventListener("click",h=>{let{value:p}=r;this.originalInputValue=p,this.element.dispatchEvent(Xe.Change());let E=this._commentHasError();this._setCommentButtonState(p,E),this._hideCommentModal(this.linkedQuestion),this.options.helpers.input.validate((0,Ev.default)(this.linkedQuestion.querySelector("input:not(.ignore), select:not(.ignore), textarea:not(.ignore)"))),h.preventDefault(),h.stopPropagation()}),c.addEventListener("click",h=>{this._hideCommentModal(this.linkedQuestion),h.stopPropagation(),h.preventDefault()}),s.addEventListener("click",h=>{this._hideCommentModal(this.linkedQuestion),h.stopPropagation(),h.preventDefault()})}_hideCommentModal(t){t.querySelector(".or-comment-widget").remove();let n=t.previousElementSibling;n&&n.matches(".or-comment-widget__overlay")&&n.remove()}},aT=Cv;var Jc="path[id], g[id], circle[id]",Sv=class extends Ut{static get selector(){return".simple-select.or-appearance-image-map label:first-child > input"}_init(){let t=this.question.querySelector("img");if(this.question.classList.add("or-image-map-initialized"),!t)this._showSvgNotFoundError();else return t.getAttribute("src")?this._addMarkup(t).then(this._addFunctionality.bind(this)).then(()=>this):new Promise(n=>{t.addEventListener("load",()=>{this._addMarkup(t).then(this._addFunctionality.bind(this)),n(this)})})}_addFunctionality(t){t&&(this.svg=t.querySelector("svg"),this.tooltip=t.querySelector(".image-map__ui__tooltip"),this.props.readonly&&this.disable(),this._setSvgClickHandler(),this._setChangeHandler(),this._setHoverHandler(),this._updateImage(),this._setPageHandler())}_addMarkup(t){let n=this,r=t.getAttribute("src");return fetch(r).then(i=>i.text()).then(i=>new DOMParser().parseFromString(i,"text/xml")).then(i=>{if(n._isSvgDoc(i)){let a=n._removeUnmatchedIds(i.querySelector("svg")),s=document.createRange().createContextualFragment(`<div class="widget image-map">
                            <div class="image-map__ui">
                                <span class="image-map__ui__tooltip"></span>
                            </div>
                        </div>`);s.querySelector(".widget").append(a),n.question.querySelectorAll("img").forEach(c=>c.remove()),n.question.querySelector("fieldset > .option-wrapper").before(s);let o=n.question.querySelector(".image-map"),l=o.querySelector("svg");return l.getAttribute("viewBox")||this._setViewBox(l),o}throw"Image is not an SVG doc"}).catch(this._showSvgNotFoundError.bind(n))}_setViewBox(t){let n;try{let r=t.getBBox();n=`${r.x} ${r.y} ${r.width} ${r.height}`}catch(r){console.error("Could not obtain Boundary Box of SVG element",r);let i=t.getAttribute("width"),a=t.getAttribute("height");i&&a&&(n=`0 0 ${parseInt(i,10)} ${parseInt(a,10)}`)}t.setAttribute("viewBox",n)}_showSvgNotFoundError(t){console.error(t);let n=document.createRange().createContextualFragment(`<div class="widget image-map">
                <div class="image-map__error" data-i18n="imagemap.svgNotFound">${Be("imagemap.svgNotFound")}</div>
            </div>`);this.question.querySelector(".option-wrapper").before(n)}_removeUnmatchedIds(t){return t.querySelectorAll(Jc).forEach(n=>{this._getInput(n.id)||n.removeAttribute("id")}),t}_getInput(t){return this.question.querySelector(`input[value="${CSS.escape(t)}"]`)}_setSvgClickHandler(){this.svg.addEventListener("click",t=>{if(!t.target.closest("svg").matches("[or-readonly]")&&(t.target.matches(Jc)||t.target.closest(Jc))){let n=t.target.id||t.target.closest("g[id]").id,r=this._getInput(n);r&&(r.checked=!r.checked,r.dispatchEvent(Xe.Change()),r.dispatchEvent(Xe.FakeFocus()))}})}_setChangeHandler(){this.question.addEventListener("change",this._updateImage.bind(this))}_setHoverHandler(){this.svg.querySelectorAll(Jc).forEach(t=>{t.addEventListener("mouseenter",n=>{let r=n.target.id||n.target.closest("g[id]").id,i=Rr(this._getInput(r),".option-label.active"),a=i?i.textContent:"";this.tooltip.textContent=a}),t.addEventListener("mouseleave",n=>{n.target.matches(Jc)&&(this.tooltip.textContent="")})})}_setPageHandler(){let t=this.element.closest('[role="page"]');t&&t.addEventListener(Xe.PageFlip().type,()=>this._setViewBox(this.svg))}_isSvgDoc(t){return typeof t=="object"&&t.querySelector("svg")}_updateImage(){let t=this.originalInputValue;this.svg.querySelectorAll("path[or-selected], g[or-selected], circle[or-selected]").forEach(n=>n.removeAttribute("or-selected")),typeof t=="string"&&(t=[t]),t.forEach(n=>{n&&this.svg.querySelectorAll(`path#${CSS.escape(n)},g#${CSS.escape(n)},circle#${CSS.escape(n)}`).forEach(r=>r.setAttribute("or-selected",""))})}disable(){this.svg.setAttribute("or-readonly","")}enable(){this.svg.removeAttribute("or-readonly")}update(){this._updateImage()}get value(){return this.originalInputValue}set value(t){this.originalInputValue=t}},sT=Sv;var Tv=class extends Ut{static get selector(){return'.question input[type="date"],.question input[type="datetime-local"]'}static condition(t){return!si.has(t,"DatepickerExtended")&&!si.has(t,"DatetimepickerExtended")&&!$n.touch}_init(){this.element.type="text",this.element.classList.add("mask-date")}},oT=Tv;var Lv=class extends Ut{static get selector(){return' .question input[type="date"], .question input[type="datetime-local"], .question input[type="time"]'}static condition(t){return!si.has(t,"DatepickerExtended")&&!si.has(t,"DatetimepickerExtended")&&!si.has(t,"TimepickerExtended")&&oo.ios}_init(){this.element.addEventListener("focus",()=>{this.element.readOnly&&this.element.blur()})}},uT=Lv;var kv=class extends Ut{static get selector(){return'.or-appearance-month-year input[type="date"]'}static condition(t){return!si.has(t,"DatepickerExtended")&&$n.touch&&$n.inputTypes.month}_init(){this.element.classList.add("hide");let t=document.createRange().createContextualFragment('<input class="ignore widget datepicker-mobile" type="month"/>');this.element.after(t),this.widgetInput=this.question.querySelector("input.widget"),this.value=this.originalInputValue,this.widgetInput.addEventListener("change",()=>{this.originalInputValue=this.value})}get value(){return this.widgetInput.value?`${this.widgetInput.value}-01`:""}set value(t){let n=t?t.substring(0,t.lastIndexOf("-")):"";this.widgetInput.value=n}update(){this.value=this.originalInputValue}},lT=kv;var Av=class extends Ut{static get selector(){return'[data-type-xml="string"]'}_init(){let t=Number(Gn.textMaxChars);!isNaN(t)&&t>0&&this.element.setAttribute("maxlength",Gn.textMaxChars)}},cT=Av;var Iv=class extends Ut{static get selector(){return".question:not(.or-appearance-autocomplete):not(.or-appearance-url) > input[type=text]:not(.ignore):not([data-for]), .question:not(.or-appearance-autocomplete):not(.or-appearance-url) > textarea:not(.ignore):not([data-for])"}_init(){this.question.addEventListener(Xe.Printify().type,this._addWidget.bind(this)),this.question.addEventListener(Xe.DePrintify().type,this._removeWidget.bind(this))}_addWidget(){if(!this.widget){let t="print-input-text",n=document.createElement("div");n.classList.add(t,"widget"),this.element.after(n),this.element.classList.add("print-hide"),this.widget=this.element.parentElement.querySelector(`.${t}`),this.widget.innerHTML=this.element.value.replace(/\n/g,"<br>")}}_removeWidget(){this.widget&&(this.element.classList.remove("print-hide"),this.element.parentElement.removeChild(this.widget),this.widget=null)}},fT=Iv;var Nv=class extends Ut{static get selector(){return'.or-appearance-rating input[type="number"]'}_init(){let t=document.createRange().createContextualFragment(this._getHtmlStr());this.element.after(t),this.element.classList.add("hide"),this.widget=this.question.querySelector(".widget");let n="",r=Math.random().toString(36).substring(2,15);for(let i=this.props.min;i<=this.props.max;i+=this.props.step)n+=`<input type=radio name="rating-stars__${r}" class="rating-widget__rating__star ignore" value="${i}"/>`;this.widget.querySelector(".rating-widget__rating").append(document.createRange().createContextualFragment(n)),this.rating=this.widget.querySelector(".rating-widget__rating"),this.stars=this.rating.querySelectorAll(".rating-widget__rating__star"),this.stars.forEach(i=>{i.addEventListener("change",()=>{let a=this.rating.querySelector("input:checked");(this.value!==a.value||this.rating.classList.contains("empty"))&&(this.value=a.value)})}),this.update(),this.props.readonly&&this.disable()}_getHtmlStr(){return`<div class="widget rating-widget">
                	<div class="rating-widget__rating empty"></div>
            	</div>`}disable(){this.stars.forEach(t=>t.disabled=!0)}enable(){this.stars.forEach(t=>t.disabled=!1)}update(){let{value:t}=this.element;ai(t)?this.stars.forEach(n=>{n.value===t&&(n.checked=!0,n.dispatchEvent(Xe.Change()))}):this._reset()}_reset(){let t=this.rating.querySelector("input:checked");t&&(this.value="",t.checked=!1)}get props(){let t=this._props,n=ai(this.element.getAttribute("min"))?this.element.getAttribute("min"):0,r=ai(this.element.getAttribute("max"))?this.element.getAttribute("max"):10,i=ai(this.element.getAttribute("step"))?this.element.getAttribute("step"):1;return t.min=Number(n),t.max=Number(r),t.step=Number(i),t}get value(){return this.originalInputValue}set value(t){this.originalInputValue=t,this.rating.classList.toggle("empty",t==="")}},hT=Nv;var Pv=class extends Ut{static get selector(){return'.or-appearance-thousands-sep input[type="number"]'}_init(){let t=document.createRange().createContextualFragment('<div class="widget "></div>');this.element.after(t),this.widget=this.element.parentElement.querySelector(".widget"),this.update(),this.element.addEventListener("change",this.update.bind(this))}update(){this.value=this.originalInputValue}get value(){return this.widget.textContent}set value(t){let n="";ai(t)&&(n=Number(t).toLocaleString(void 0,{maximumFractionDigits:20})),this.widget.textContent=n}},dT=Pv;var fU={constraint:{invalid:"Value not allowed",required:"This field is required"},filepicker:{placeholder:"Click here to upload file. (< __maxSize__)",notFound:"File __existing__ could not be found (leave unchanged if already submitted and you want to preserve it).",waitingForPermissions:"Waiting for user permissions.",resetWarning:"This will remove the __item__. Are you sure you want to do this?",toolargeerror:"File too large (> __maxSize__)",file:"file"},drawwidget:{drawing:"drawing",signature:"signature",annotation:"file and drawing"},form:{required:"required"},geopicker:{accuracy:"accuracy (m)",altitude:"altitude (m)",closepolygon:"close polygon",kmlcoords:"KML coordinates",kmlpaste:"paste KML coordinates here",latitude:"latitude (x.y \xB0)",longitude:"longitude (x.y \xB0)",points:"points",searchPlaceholder:"search for place or address",removePoint:"This will completely remove the current geopoint from the list of geopoints and cannot be undone. Are you sure you want to do this?"},selectpicker:{noneselected:"none selected",numberselected:"__number__ selected"},imagemap:{svgNotFound:"SVG image could not be found"},rankwidget:{tapstart:"Tap to start",clickstart:"Click to start"},widget:{comment:{update:"Update"}},alert:{gotonotfound:{msg:"Failed to find question '__path__' in form. Is it a valid path?"},valuehasspaces:{multiple:'Select multiple question has an illegal value "__value__" that contains a space.'}},confirm:{repeatremove:{heading:"Delete this group of responses?",msg:"This action is irreversible. Are you sure you want to proceed?"}}};function pT(e,t){let n="",r=fU;return e.split(".").forEach(i=>{r=r?r[i]:"",n=r}),t=t||{},n=n.replace(/__([^_]+)__/,(i,a)=>t[a]),n}var Dv=new Set,Rv=new WeakMap,gT=e=>{let t=Rv.get(e);return t==null&&(t=e.closest(".question"),t!=null&&Rv.set(e,t)),t},Ov=class extends Ut{constructor(n,r){super(n,r);au(this,"_languages",null);Dv.add(this);let i=gT(n),a=document.createElement("div");i.setAttribute("lang",this.constructor.language),a.classList.add("invalid-value-msg","active"),i.append(a),this.question=i,this.message=a,this.setFormattedValue(n.valueAsNumber),this.setValidity(),n.addEventListener("keydown",s=>{let{ctrlKey:o,isComposing:l,key:c,metaKey:h}=s;if(o||h||c&&c.length>1&&c!=="Spacebar"||!l&&this.constructor.validCharacters.has(c))return!0;s.preventDefault(),s.stopPropagation()}),n.addEventListener("input",()=>{this.setValidity()})}static languageChanged(){this._languages=null;let{language:n,pattern:r}=this,i=r.source;Array.from(Dv.values()).forEach(a=>{let{element:s,question:o}=a,{valueAsNumber:l}=s;o.setAttribute("lang",n),s.setAttribute("pattern",i),a.setFormattedValue(l),a.setValidity()})}static globalInit(n,r){super.globalInit(n,r),r.addEventListener(Xe.ChangeLanguage().type,this.languageChanged),window.addEventListener("languagechange",this.languageChanged)}static globalReset(){let{rootElement:n}=super.globalReset();n&&(n.removeEventListener(Xe.ChangeLanguage().type,this.languageChanged),window.removeEventListener("languagechange",this.languageChanged)),this._languages=null,Dv=new Set,Rv=new WeakMap}static get selector(){throw new Error("Not implemented")}static condition(n){if(n.classList.contains("ignore")||n.hasAttribute("min")&&n.hasAttribute("max")&&n.hasAttribute("step"))return!1;let i=gT(n);return!["or-appearance-analog-scale","or-appearance-my-widget","or-appearance-distress","or-appearance-rating"].some(a=>i.classList.contains(a))}static get languages(){let n=this._languages;if(n!=null)return n;let{currentLanguage:r}=this.form,i;try{Intl.getCanonicalLocales(r),i=r}catch{}return n=[i,...navigator.languages].filter(a=>a!=null),this._languages=n,n}static get language(){var n;return(n=this.languages[0])!=null?n:navigator.language}static get pattern(){throw new Error("Not implemented")}static get validCharacters(){throw new Error("Not implemented")}get value(){return this.element.value}set value(n){this.element.value=n}setFormattedValue(n){let{pattern:r}=this.constructor,{element:i}=this;i.removeAttribute("pattern"),i.value="",Number.isNaN(n)||(i.value=n),i.setAttribute("pattern",r.source)}setValidity(){let{element:n,message:r,question:i}=this,a=n.checkValidity();i.classList.toggle("invalid-value",!a),r.innerText=a?"":pT("constraint.invalid"),this.isValid=a}},nd=Ov;var Bv=new Map,mT=e=>{let[t]=e,n=Bv.get(t);if(n!=null)return n;let r=Intl.getCanonicalLocales(e),a=Intl.NumberFormat(r).formatToParts(.1).find(({type:s})=>s==="decimal").value;return n=new Set([".",a]),Bv.set(t,n),n},Mv=new Map,hU=e=>{let[t]=e,n=Mv.get(t);if(n!=null)return n;let r=Intl.getCanonicalLocales(e),i=Intl.NumberFormat(r),a=-9.012345678;return n=new Set(`${a}${i.format(a)}`.split("")),Mv.set(t,n),n},Uv=new Map,dU=e=>{let[t]=e,n=Uv.get(t);if(n!=null)return n;let r=mT(t),a=`^-?\\d+${`([${Array.from(r).join("")}]\\d+)?`}$`;return n=new RegExp(a),Uv.set(t,n),n},Ul=class extends nd{static globalInit(t,n){this.languageChanged=this.languageChanged.bind(this),super.globalInit(t,n)}static globalReset(t,n){Bv=new Map,Mv=new Map,Uv=new Map,super.globalReset(t,n)}static get decimalCharacters(){return mT(this.languages)}static get validCharacters(){return hU(this.languages)}static get pattern(){return dU(this.languages)}get value(){return super.value}set value(t){super.value=t}};au(Ul,"selector",'.question input[type="number"][data-type-xml="decimal"]');var qv=new Map,pU=e=>{let[t]=e,n=qv.get(t);if(n!=null)return n;let r=Intl.getCanonicalLocales(e),i=Intl.NumberFormat(r),a=-9012345678;return n=new Set(`${a}${i.format(a)}`.split("")),qv.set(t,n),n},Vu=class extends nd{static globalInit(t,n){this.languageChanged=this.languageChanged.bind(this),super.globalInit(t,n)}static globalReset(t,n){qv=new Map,super.globalReset(t,n)}static get validCharacters(){return pU(this.languages)}get value(){return super.value}set value(t){super.value=t}};au(Vu,"selector",'.question input[type="number"][data-type-xml="int"]'),au(Vu,"pattern",/^-?[0-9]+$/);var rd=[$c,_S,bS,wS,CS,SS,TS,Wc,LS,AS,NS,PS,DS,VS,zS,tT,Qc,nT,rT,iT,aT,sT,oT,uT,lT,cT,fT,hT,dT,Ul,Vu];var ql=rd.filter(e=>e.selector),_T,bT,Fl,gU=e=>{ql=rd.filter(t=>t.selector&&(t.selector==="form"||e.querySelector(t.selector)!=null))};function mU(e,t={}){if(!this.form)throw new Error("Widgets module not correctly instantiated with form property.");_T=t,bT=this.form,Fl=this.form.view.html;let n=e&&e.length?e[0]:Fl;return ql.forEach(r=>{_U(r,n)}),!0}function vU(e){ql.forEach(t=>{let n=Vv(e,t.selector).filter(r=>r.nodeName.toLowerCase()==="select"?!r.hasAttribute("readonly"):!r.readOnly);new Xo(n).enable(t)})}function yU(e){ql.forEach(t=>{let n=Vv(e,t.selector);new Xo(n).disable(t)})}function Vv(e,t){return t?t==="form"?[Fl]:e.classList.contains("question")?[...e.querySelectorAll("input:not(.ignore), select:not(.ignore), textarea:not(.ignore)")].filter(n=>n.matches(t)):[...e.querySelectorAll(t)]:[]}function _U(e,t){let n={};if(!e.name)return console.error("widget doesn't have a name");e.helpersRequired&&e.helpersRequired.length>0&&(n.helpers={},e.helpersRequired.forEach(i=>{n.helpers[i]=_T[i]}));let r=Vv(t,e.selector);t===Fl&&e.globalInit(bT,Fl),r.length&&(new Xo(r).instantiate(e,n),wU(e,r),xU(e,r),EU(e,r))}var bU=()=>{ql.forEach(e=>{var t;(t=e.globalReset)==null||t.call(e)}),ql=[...rd]},Fv=new Map,vT=!1;function wU(e,t){if(t.length>0){let n=Fv.get(e);n==null&&(n=new Set,Fv.set(e,n)),t.forEach(r=>{n.add(r)}),vT||(Fl.addEventListener(Xe.ChangeLanguage().type,()=>{for(let[r,i]of Fv)new Xo([...i]).update(r)}),vT=!0)}}function xU(e,t){t.length>0&&e.list&&(0,yT.default)(t).on(Xe.ChangeOption().type,function(){new Xo(this).update(e)})}function EU(e,t){t.length>0&&t[0].matches("input, select, textarea")&&t.forEach(n=>n.addEventListener(Xe.InputUpdate().type,r=>{new Xo(r.target).update(e)}))}var Xo=class{constructor(t){Array.isArray(t)||(t=[t]),this.elements=t}_instantiateSingleWidget(t,n,r={}){if(!n.condition(t)||si.has(t,n))return;let i=new n(t,r);i instanceof Promise?i.then(a=>si.put(t,n.name,a)):si.put(t,n.name,i)}_methodCall(t,n){this.elements.forEach(r=>{let i=si.get(r,t.name);i&&i[n]()})}instantiate(t,n){this.elements.forEach(r=>this._instantiateSingleWidget(r,t,n))}update(t){this._methodCall(t,"update")}disable(t){this._methodCall(t,"disable")}enable(t){this._methodCall(t,"enable")}},zv={initForm:gU,init:mU,enable:vU,disable:yU,reset:bU};var wT={form:null,init(e){if(!this.form)throw new Error("Language module not correctly instantiated with form property.");let t=this.form.view.html.closest("body")||this.form.view.html.parentNode;if(!t)return;let n=t.querySelector(".form-language-selector"),r=this.form.view.html.querySelector("#form-languages");if(!r)return;this.languages=[...r.querySelectorAll("option")].map(s=>s.value),n&&(n.append(r),this.languages.length>1&&n.classList.remove("hide")),this.formLanguages=t.querySelector("#form-languages"),this.defaultLanguage=this.formLanguages.dataset.defaultLang||void 0,e&&this.languages.includes(e)&&this.languages.length>1?(this._currentLang=e,this.setFormUi(this._currentLang)):this._currentLang=this.defaultLanguage||this.languages[0]||"";let i=this.formLanguages.querySelector(`[value="${this._currentLang}"]`),a=i&&i.dataset.dir||"ltr";this.formLanguages.value=this._currentLang,this.form.view.html.setAttribute("dir",a),!(this.languages.length<2)&&(this.formLanguages.addEventListener(Xe.Change().type,s=>{s.preventDefault(),this._currentLang=s.target.value,this.setFormUi(this._currentLang)}),this.form.view.html.addEventListener(Xe.AddRepeat().type,s=>this.setFormUi(this._currentLang,s.target)))},get currentLanguage(){return this._currentLang},get currentLangDesc(){let e=this.formLanguages.querySelector(`[value="${this._currentLang}"]`);return e?e.textContent:null},get languagesUsed(){return this.languages||[]},setFormUi(e,t=this.form.view.html){if(t.dataset.currentLang===e)return;t.dataset.currentLang=e,t===this.form.view.html&&this.form.collections.repeats.getElements().forEach(i=>{i.dataset.lang=e});let n=this.formLanguages.querySelector(`[value="${e}"]`).dataset.dir||"ltr",r=[...t.querySelectorAll("[lang]")];this.form.view.html.setAttribute("dir",n),r.forEach(i=>i.classList.remove("active")),r.filter(i=>i.matches(`[lang="${e}"], [lang=""]`)&&(!i.classList.contains("or-form-short")||i.classList.contains("or-form-short")&&!Rr(i,".or-form-long"))).forEach(i=>i.classList.add("active")),window.enketoFormLocale=e,this.form.view.html.querySelectorAll("select, datalist").forEach(i=>this.setSelect(i)),this.form.view.html.dispatchEvent(Xe.ChangeLanguage())},setSelect(e){let t=e.nodeName.toLowerCase(),n=e.closest(".question, .or-repeat-info"),r=n?n.querySelector(".or-option-translations"):null;r&&[...e.children].filter(i=>i.matches("option")&&!i.matches('[value=""], [data-value=""]')).forEach(i=>{let a=t==="datalist"?i.value:i.textContent,s=t==="datalist"&&i.dataset.value||i.value,o=r.querySelector(`.active[data-option-value="${CSS.escape(s)}"]`);if(o){let l=a;o&&o.textContent&&(l=o.textContent),i.value=s,i.textContent=l}})}};var ef=Yt(gr()),xT={form:null,init(){if(!this.form)throw new Error("Output module not correctly instantiated with form property.");if(!this.form.features.output){this.update=()=>{};return}this.update()},update(e){let t={},n="",r=this,{rootNode:i}=e!=null?e:{};(i==null?this.form.getRelatedNodes("data-value",".or-output",e):(0,ef.default)(i.querySelectorAll(".or-output"))).each(function(){let s=(0,ef.default)(this),o=this;if(s.closest(".or-branch").parent().closest(".disabled").length)return;let l=o.dataset.value,c=o.closest(".question, .or-group");c.matches(".or-group")||(c=c.querySelector("[name]"));let h=r.form.input.getName(c);(0,ef.default)(c).children(`.or-repeat-info[data-name="${h}"]`).length&&!(0,ef.default)(c).children(`.or-repeat[name="${h}"]`).length&&(h=null);let p=o.closest(".or-repeat")!=null,E=h?r.form.input.getIndex(c):0;typeof t[l]<"u"?n=t[l]:(n=r.form.model.evaluate(l,"string",h,E,!0),p||(t[l]=n)),s.text()!==n&&s.text(n)})}};var ET=Yt(gr()),CT={form:null,init(){if(!this.form)throw new Error("Required module not correctly instantiated with form property.");this.form.features.required||(this.update=()=>{}),this.update()},update(e){let t=this,n={};this.form.getRelatedNodes("data-required","",e).each(function(){let i=(0,ET.default)(this),a=this,s=t.form.input.getRequired(a),o=t.form.input.getName(a),l=t.form.input.getIndex(a),c=`${s}__${o.substring(0,o.lastIndexOf("/"))}__${l}`;typeof n[c]>"u"&&(n[c]=t.form.model.node(o,l).isRequired(s)),i.closest(".question").find(".required").toggleClass("hide",!n[c])})}};var ST={form:null,update(e){let t=this.form.getRelatedNodes("readonly","",e).get(),{valueChanged:n}=this.form.collections.actions;t.forEach(r=>{r.closest(".question").classList.add("readonly");let i=this.form.input.getName(r),a=n==null?void 0:n.hasRef(i),s=!r.value&&!r.dataset.calculate&&!a&&!r.classList.contains("readonly-forced");r.classList.toggle("empty",s),s?r.setAttribute("aria-hidden","true"):r.removeAttribute("aria-hidden")})}};var TT=Yt(gr());TT.default.fn.reverse=[].reverse;var CU=typeof requestIdleCallback=="function"?(e,t)=>{requestIdleCallback(e,{timeout:t})}:e=>{setTimeout(e)},LT=(e,t=16)=>{CU(e,t)};function In(e,t,n){let r=(0,Yo.default)(e);typeof e=="string"&&(console.deprecate("Form instantiation using a selector","a HTML <form> element"),e=r[0]),this.nonRepeats={},this.all={},this.options=n!=null?n:{};let i=e.outerHTML;this.view={$:r,html:e,get clone(){return document.createRange().createContextualFragment(i).firstElementChild}},this.features={},this.collections={},this.model=new en(t),this.widgetsInitialized=!1,this.repeatsInitialized=!1,this.pageNavigationBlocked=!1,this.initialized=!1}In.prototype={repeatPathPrefixes:null,nodePathToRepeatPath:{},evaluationCascadeAdditions:[],get evaluationCascade(){let e=[this.calc.update.bind(this.calc),this.repeats.countUpdate.bind(this.repeats),this.relevant.update.bind(this.relevant),this.output.update.bind(this.output),this.itemset.update.bind(this.itemset),this.required.update.bind(this.required),this.readonly.update.bind(this.readonly),this.validationUpdate],{evaluationCascadeAdditions:t}=this;return t.length>0&&e.push(function(...n){for(let r of t)r.apply(this,n)}),Gn.experimentalOptimizations.computeAsync?e.map(n=>function(...r){LT(()=>n.apply(this,r))}):e},get recordName(){return this.view.$.attr("name")},set recordName(e){this.view.$.attr("name",e)},get editStatus(){return this.view.html.dataset.edited==="true"},set editStatus(e){e&&e!==this.editStatus&&this.view.html.dispatchEvent(Xe.Edited()),this.view.html.dataset.edited=e},get surveyName(){return this.view.$.find("#form-title").text()},get instanceID(){return this.model.instanceID},get deprecatedID(){return this.model.deprecatedID},get instanceName(){return this.model.instanceName},get version(){return this.model.version},get encryptionKey(){return this.view.$.data("base64rsapublickey")},get action(){return this.view.$.attr("action")},get method(){return this.view.$.attr("method")},get id(){return this.view.html.dataset.formId},get constraintClassesInvalid(){return["invalid-constraint"]},get constraintAttributes(){return["data-constraint"]},get languages(){return this.langs.languagesUsed},get currentLanguage(){return this.langs.currentLanguage}};In.prototype.addModule=function(e){return Object.create(e,{form:{value:this}})};In.prototype.init=function(){let e=[],t=this;Eb(this.view.html),this.toc=this.addModule(pS),this.pages=this.addModule(mS),this.langs=this.addModule(wT),this.progress=this.addModule(vS),this.widgets=this.addModule(zv),this.preloads=this.addModule(hE),this.relevant=this.addModule(Tb),this.repeats=this.addModule(dS),this.input=this.addModule(Hc),this.output=this.addModule(xT),this.itemset=this.addModule(hS),this.calc=this.addModule(dE),this.required=this.addModule(CT),this.readonly=this.addModule(ST);let n=this.view.html;Bp(this),this.features=Op(n),this.collections=Dp(this),zv.initForm(n);let{instanceFirstLoadAction:r,newRepeatAction:i,valueChangedAction:a}=this.features;if(r&&this.model.events.addEventListener(Xe.InstanceFirstLoad().type,s=>{this.calc.performAction("setvalue",s),this.calc.performAction("setgeopoint",s)}),i&&this.view.html.addEventListener(Xe.NewRepeat().type,s=>{this.calc.performAction("setvalue",s),this.calc.performAction("setgeopoint",s)}),a&&this.view.html.addEventListener(Xe.XFormsValueChanged().type,s=>{this.calc.performAction("setvalue",s),this.calc.performAction("setgeopoint",s)}),this.model.events.addEventListener(Xe.DataUpdate().type,s=>{t.view.html.dispatchEvent(Xe.DataUpdate(s.detail))}),this.model.events.addEventListener(Xe.Removed().type,s=>{t.view.html.dispatchEvent(Xe.Removed(s.detail))}),e=e.concat(this.model.init()),typeof this.model>"u"||!(this.model instanceof en))return e.push("Form could not be initialized without a model."),e;try{this.preloads.init(),this.view.$.data({instanceID:this.model.instanceID}),this.grosslyViolateStandardComplianceByIgnoringCertainCalcs(),this.calc.init(),this.langs.init(this.options.language),this.pages.init();let s=Array.from(this.view.html.querySelectorAll(".or-repeat-info")).map(o=>o.dataset.name);if(this.repeatPathPrefixes=s.map(o=>`${o}/`).sort((o,l)=>l.length-o.length),s.length>0){let l=Array.from(this.view.html.querySelectorAll(".or-repeat .or-repeat")).map(w=>w.getAttribute("name")),h=[...s.filter(w=>l.some(I=>I.startsWith(w))),...l],p=!1,E=Xe.AddRepeat().type,b=Xe.RemoveRepeat().type,C=({detail:w})=>{h.includes(w.repeatPath)&&(this.calc.update(w),p=!0)},N=w=>{(p||h.includes(w.detail.initRepeatInfo.repeatPath))&&(this.all={},p=!1)};h.length>0&&(this.view.html.addEventListener(E,C),this.view.html.addEventListener(b,N)),this.repeatsInitialized=!0,this.repeats.init(),h.length>0&&(this.view.html.removeEventListener(E,C),this.view.html.removeEventListener(b,N)),this.calc.update({allRepeats:!0,cloned:!0}),this.all={}}return this.output.init(),this.itemset.init(),this.setAllVals(),this.readonly.update(),this.options.input=this.input,this.options.pathToAbsolute=this.pathToAbsolute.bind(this),this.options.evaluate=this.model.evaluate.bind(this.model),this.options.getModelValue=this.getModelValue.bind(this),this.widgetsInitialized=this.widgets.init(null,this.options),this.relevant.init(),this.setEventHandlers(),this.calc.update(),this.required.init(),this.editStatus=!1,this.options.printRelevantOnly!==!1&&this.view.$.addClass("print-relevant-only"),this.goToTarget(this.view.html),setTimeout(()=>{t.progress.update()},0),this.initialized=!0,e}catch(s){console.error(s),e.push(`${s.name}: ${s.message}`)}return document.body.scrollIntoView(),e};In.prototype.goTo=function(e){let t=[];return this.goToTarget(this.getGoToTarget(e))||t.push(Be("alert.gotonotfound.msg",{path:e.substring(e.lastIndexOf("/")+1)})),t};In.prototype.getDataStr=function(e={}){return e.irrelevant===!1?this.getDataStrWithoutIrrelevantNodes():this.model.getStr()};In.prototype.resetView=function(){return this.widgets.reset(),this.langs.formLanguages&&this.langs.formLanguages.remove(),this.view.html.replaceWith(this.view.clone),Rp(),document.querySelector("form.or")};In.prototype.replaceChoiceNameFn=function(e,t,n,r,i){return So(e,"jr:choice-name").forEach(s=>{let o=s[1];if(o.length===2){let l="",c=this.model.evaluate(o[0],t,n,r,i),h=Kl(o[1]).trim();h=h.startsWith("/")?h:a0(n,h);let p=[...this.view.html.querySelectorAll(`[name="${h}"], [data-name="${h}"]`)],E=p.length?p[0].nodeName.toLowerCase():null;if(!c||!p.length)l="";else if(E==="select"){let b=p.find(C=>C.querySelector(`[value="${CSS.escape(c)}"]`));l=b?b.querySelector(`[value="${CSS.escape(c)}"]`).textContent:""}else if(E==="input"){let b=p[0].getAttribute("list");if(b){let C=Rr(p[0],`datalist#${CSS.escape(b)}`);if(C){let N=C.querySelector(`[data-value="${c}"]`);l=N?N.getAttribute("value"):""}}else{let C=p.find(w=>w.getAttribute("value")===c),N=C?Rr(C,".option-label.active"):[];l=N?N.textContent:""}}e=e.replace(s[0],`"${l}"`)}else throw new wu(`jr:choice-name function has incorrect number of parameters: ${s[0]}`)}),e};In.prototype.setAllVals=function(e,t){let n=this,r=e&&e.attr("name")?e.attr("name"):null;t=typeof t<"u"?t:null,this.model.node(r,t).getElements().reduce((i,a)=>{let s=[...a.querySelectorAll("*")].filter(o=>o.children.length===0&&o.textContent);return i.concat(s)},[]).forEach(i=>{let a,s;try{a=i.textContent,s=Fi(i,"instance");let o=n.model.node(s).getElements().indexOf(i),l=n.input.find(s,o);l&&(n.input.setVal(l,a,null),n.input.getXmlType(l)==="binary"&&a.startsWith("jr://")&&i.getAttribute("src")&&l.setAttribute("data-loaded-url",i.getAttribute("src")))}catch(o){throw console.error(o),new Error(`Could not load input field value with name: ${s} and value: ${a}`)}})};In.prototype.getModelValue=function(e){let t=e[0],n=this.input.getName(t),r=this.input.getIndex(t);return this.model.node(n,r).getVal()};In.prototype.getRelatedNodes=function(e,t,n){let r=null,i;n=n||{},t=t||"";let{allRepeats:a,cloned:s,repeatPath:o}=n;if(!a&&!this.nonRepeats[e]&&(i=[...this.view.html.querySelectorAll(`:not(.or-repeat-info)[${e}]`)].filter(p=>!p.closest(".or-repeat")),this.nonRepeats[e]=this.filterRadioCheckSiblings(i)),a){let p=[...this.view.html.querySelectorAll(`form.or .or-repeat [${e}]`)];r=this.filterRadioCheckSiblings(p)}else if(typeof o<"u"&&n.repeatIndex>=0){let p=this.collections.repeats.getElementByRef(o,n.repeatIndex);i=p?[...p.querySelectorAll(`[${e}]`)]:[],r=this.filterRadioCheckSiblings(i)}!this.all[e]||o&&!s||t===".or-output"?this.all[e]=this.repeatsInitialized?this.filterRadioCheckSiblings([...this.view.html.querySelectorAll(`[${e}]`)]):this.nonRepeats[e]:s&&r&&(this.all[e]=this.all[e].concat(r));let l;if(r?l=this.nonRepeats[e].concat(r):l=this.all[e],l.length===0)return(0,Yo.default)(l);let c=[];if(!n.nodes||n.nodes.length===0?r!=null&&s&&t===".itemset-template"?c=[`.or-repeat[name="${o}"] ${t}[${e}]`]:c=[`${t}[${e}]`]:(n.nodes.forEach(p=>{c=c.concat(this.getQuerySelectorsForLogic(t,e,p))}),c=c.concat(this.getQuerySelectorsForLogic(t,e,"*"))),c.length===0)return(0,Yo.default)(l);let h=c.join(", ");return l=l.filter(p=>p.matches(h)),(0,Yo.default)(l)};In.prototype.filterRadioCheckSiblings=e=>{let t=[];return e.filter(n=>{let r=n.type==="radio"||n.type==="checkbox"?bu(n,".option-wrapper",".question"):null;if(r){if(t.includes(r))return!1;t.push(r)}return!0})};In.prototype.getQuerySelectorsForLogic=(e,t,n)=>[`${e}[${t}*="/${n} "]`,`${e}[${t}*="/${n})"]`,`${e}[${t}*="/${n},"]`,`${e}[${t}$="/${n}"]`,`${e}[${t}*="/${n}]"]`,`${e}[${t}*="/${n}["]`];In.prototype.getDataStrWithoutIrrelevantNodes=function(){let e=this,t=new en(this.model.getStr());return t.init(),this.getRelatedNodes("data-relevant").reverse().each(function(){let n=this,r=e.input.getRelevant(n),i=e.input.getIndex(n),a=e.input.getName(n),s;Ds(n,`.or-repeat-info[data-name="${a}"]`)&&!Ds(n,`.or-repeat[name="${a}"]`)?s=null:s=t.node(a,i).getElement(),s&&!e.model.evaluate(r,"boolean",a,i)&&s.remove()}),t.getStr()};In.prototype.grosslyViolateStandardComplianceByIgnoringCertainCalcs=function(){let e=this.view.$.find('[name$="instanceID"][data-calculate]');e.length>0&&e.removeAttr("data-calculate")};In.prototype.validationUpdate=function(e={}){if(Gn.validateContinuously===!0){let t={...e};e.cloned&&(t={nodes:e.repeatPath.split("/").reverse().slice(0,1)});let n=new Set(this.features.required?this.getRelatedNodes("data-required","",t).get():[]);this.constraintAttributes.forEach(r=>this.getRelatedNodes(r,"",t).get().forEach(n.add,n)),n.forEach(this.validateInput,this)}};In.prototype.setEventHandlers=function(){let e=this;this.view.$.attr("onsubmit","return false;"),this.view.$.on("change.file","input:not(.ignore), select:not(.ignore), textarea:not(.ignore)",function(){let t=this,n={path:e.input.getName(t),inputType:e.input.getInputType(t),xmlType:e.input.getXmlType(t),val:e.input.getVal(t),index:e.input.getIndex(t)};n.val.length>0&&n.inputType==="file"&&t.files[0]&&t.files[0].size>0&&(n.val=Qs(t.files[0],t.dataset.filenamePostfix)),n.val.length>0&&n.inputType==="drawing"&&(n.val=Qs({name:n.val},t.dataset.filenamePostfix)),e.model.node(n.path,n.index).setVal(n.val,n.xmlType)&&e.validateInput(t).then(()=>{t.dispatchEvent(Xe.XFormsValueChanged({repeatIndex:n.index}))})}),this.view.html.addEventListener("focusin",t=>{this.progress.update(t.target)}),this.view.html.addEventListener(Xe.FakeFocus().type,t=>{this.progress.update(t.target)}),this.model.events.addEventListener(Xe.DataUpdate().type,t=>{e.evaluationCascade.forEach(n=>{n.call(e,t.detail)},!0),e.editStatus=!0}),this.view.html.addEventListener(Xe.AddRepeat().type,t=>{let n=(0,Yo.default)(t.target);this.setAllVals(n,t.detail.repeatIndex),this.evaluationCascade.forEach(r=>{r.call(e,t.detail)}),this.progress.update()}),this.view.html.addEventListener(Xe.RemoveRepeat().type,()=>{this.progress.update()}),this.view.html.addEventListener(Xe.ChangeLanguage().type,()=>{this.output.update()}),this.view.$.on("click",".or-group > h4",function(){(0,Yo.default)(this).closest(".or-group").toggleClass("or-appearance-compact").trigger("resize")})};In.prototype.setValid=function(e,t){let n=this.input.getWrapNode(e);if(!n)return;let r=t?[`invalid-${t}`]:[...n.classList].filter(i=>i.indexOf("invalid-")===0);n.classList.remove(...r)};In.prototype.setInvalid=function(e,t="constraint"){let n=this.input.getWrapNode(e);n&&(Gn.validatePage===!1&&this.isValid(e)&&this.blockPageNavigation(),n.classList.add(`invalid-${t}`))};In.prototype.updateValidityInUi=function(e,t){let n=t.requiredValid!==!1&&t.constraintValid!==!1;t.requiredValid===!1?(this.setValid(e,"constraint"),this.setInvalid(e,"required")):t.constraintValid===!1?(this.setValid(e,"required"),this.setInvalid(e,"constraint")):(this.setValid(e,"constraint"),this.setValid(e,"required")),n||e.dispatchEvent(Xe.Invalidated())};In.prototype.blockPageNavigation=function(){let e=this;this.pageNavigationBlocked=!0,window.clearTimeout(this.blockPageNavigationTimeout),this.blockPageNavigationTimeout=window.setTimeout(()=>{e.pageNavigationBlocked=!1},600)};In.prototype.isValid=function(e){let t=[".invalid-value,",".invalid-required",".invalid-relevant"].concat(this.constraintClassesInvalid.map(n=>`.${n}`));if(e){let r=this.input.getWrapNode(e).classList;return!t.some(i=>r.contains(i))}return!this.view.html.querySelector(t.join(", "))};In.prototype.clearNonRelevant=function(){this.relevant.update(null,!0)};In.prototype.validateAll=function(){let e=this;return this.clearNonRelevant(),this.validateContent(this.view.$).then(t=>(e.view.html.dispatchEvent(Xe.ValidationComplete()),t))};In.prototype.validate=In.prototype.validateAll;In.prototype.validateContent=function(e){let t=this,n=[".invalid-value",".invalid-required",".invalid-relevant"].concat(this.constraintClassesInvalid.map(i=>`.${i}`)).join(", ");e.find("fieldset:disabled input, fieldset:disabled select, fieldset:disabled textarea, input:disabled, select:disabled, textarea:disabled").each(function(){t.setValid(this)});let r=e.find(".question").addBack(".question").map(function(){let i=this.querySelector("input:enabled:not(.ignore), select:enabled:not(.ignore), textarea:enabled:not(.ignore)");return i?t.validateInput(i):Promise.resolve()}).toArray();return Promise.all(r).then(()=>{let i=e[0],a=i.matches(n)?i:i.querySelector(n);return a&&t.goToTarget(a),!a}).catch(()=>!1)};In.prototype.pathToAbsolute=function(e,t){let n;return e.indexOf("/")===0?e:(n=this.model.evaluate(e,"node",t,0,!0),Fi(n,"instance",!1))};In.prototype.validateInput=function(e){if(!this.initialized)return Promise.resolve();let t=this,n,r={path:this.input.getName(e),inputType:this.input.getInputType(e),xmlType:this.input.getXmlType(e),enabled:this.input.isEnabled(e),constraint:this.input.getConstraint(e),calculation:this.input.getCalculation(e),required:this.input.getRequired(e),readonly:this.input.getReadonly(e),val:this.input.getVal(e)};return r.readonly&&!r.val&&!r.required&&!r.constraint&&!r.calculation?Promise.resolve():(r.enabled&&r.inputType!=="hidden"?(r.ind=this.input.getIndex(e),n=this.model.node(r.path,r.ind).validate(r.constraint,r.required,r.xmlType)):n=Promise.resolve({requiredValid:!0,constraintValid:!0}),n.then(i=>(r.inputType!=="hidden"&&this.updateValidityInUi(e,i),i)).catch(i=>{throw console.error("validation error",i),t.setInvalid(e,"constraint"),i}))};In.prototype.getGoToTarget=function(e){let t,n,r,i,a="",s=/([^[]+)\[(\d+)\]([^[]*$)?/g;if(e&&(n=this.model.node(e).getElement(),!!n)){if(e=Fi(n,"instance",!0),r=this.view.html.querySelector(`[name="${e}"]`),!r)for(i=this.view.html;(t=s.exec(e))!==null&&i;)a+=t[1],i=i.querySelectorAll(`[name="${a}"], [data-name="${a}"]`)[t[2]],i&&t[3]&&(a+=t[3],i=i.querySelector(`[name="${a}"],[data-name="${a}"]`)),r=i;return r&&this.input.getWrapNode(r)}};In.prototype.goToTarget=function(e,t={}){if(e){this.pages.active&&!t.isPageFlip&&this.pages.flipToPageContaining((0,Yo.default)(e)),e.closest(".calculation, .setvalue, .setgeopoint")&&e.dispatchEvent(Xe.GoToInvisible()),e.closest(".or-branch.disabled")&&e.dispatchEvent(Xe.GoToIrrelevant());let n=e.querySelector("input:not(.ignore):not([readonly]), textarea:not(.ignore):not([readonly]), select:not(.ignore):not([readonly])");n!=null&&(n.focus(),n.dispatchEvent(Xe.ApplyFocus())),wb(e)}return!!e};In.requiredTransformerVersion="4.1.1";var Ri=Yt(xc());var Ya=Yt(xc());var NT=Yt(AT());function SU(e,t){let n,r,i=[],a=[],s=[],o=t||e,l=new NT.default;return gn.record.getAll(e).then(c=>c.reduce((h,p)=>h.then(()=>gn.record.get(p.instanceId).then(E=>{let b=[],C;return r=`${o}_${IT(E.created)}`,n=l.folder(r),n.file("submission.xml",`<?xml version="1.0" ?>
${E.xml}`,{date:new Date(E.updated)}),C={folder:r,draft:E.draft,"local name":E.name,instanceID:E.instanceId},E.files.forEach(N=>{a.push(pa.blobToArrayBuffer(N.item).then(w=>{n.file(N.name,w)}).catch(w=>{console.error(w),b.push(N.name),i.push(`Failed to retrieve ${N.name} for record "${E.name}".`)}))}),Promise.all(a).then(()=>{b.length>0&&(C["failed files"]=b),s.push(C)})})),Promise.resolve())).then(()=>(l.file("meta.json",JSON.stringify(s,null,4)),l.generateAsync({type:"blob"}))).then(c=>{let h;if(c.name=`${o}_${IT(new Date)}.zip`,i.length>0)throw h=new Error(`<ul class="error-list"><li>${i.join("</li><li>")}</li></ul>`),h.exportFile=c,h;return c})}function IT(e){let t=new Date(e);return t.toString()==="Invalid Date"?`unknown${Math.floor(Math.random()*1e4)}`:`${t.getFullYear()}-${tf(t.getMonth()+1,2)}-${tf(t.getDate(),2)}_${tf(t.getHours(),2)}-${tf(t.getMinutes(),2)}-${tf(t.getSeconds(),2)}`}function tf(e,t){let n,r=e.toString(),i=t-r.length;for(n=0;n<i;n++)r=`0${r}`;return r}var PT={recordsToZip:SU};var nf={iteration:0,timeoutID:-1};function $v(e){let t=Math.min(2**nf.iteration,300)*1e3;nf.iteration+=1,nf.timeoutID=setTimeout(()=>{e({isRetry:!0})},t)}function id(){nf.iteration=0,clearTimeout(nf.timeoutID)}var zl,Hl,rf,DT,af,sd,Vl=!1;function TU(){return zl=(0,Ya.default)(".record-list__button-bar__button.export"),Hl=(0,Ya.default)(".record-list__button-bar__button.upload"),DT=(0,Ya.default)(".offline-enabled__queue-length"),sd=!1,Vl=!1,ud().then(od)}function RT(e){return gn.record.get(e)}function LU(e){return OT().then(t=>(t&&(e.files=t.files),gn.record.set(e)))}function kU(e,t){let n,r;return e==="set"?n=LU(t):n=gn.record.update(t),n.then(i=>(r=i,r)).then(({enketoId:i})=>zc.get({enketoId:i})).then(i=>Uh(i,t)).then(ud).then(()=>r)}function AU(e){return gn.record.remove(e).then(ud)}function sf(){return`__autoSave_${lt.enketoId}`}function OT(){return RT(sf())}function IU(e){return e.draft=!0,e.name=`__autoSave_${Date.now()}`,e.instanceId=sf(),e.enketoId=lt.enketoId,gn.record.update(e)}function NU(){return gn.record.remove(sf())}function PU(e){return gn.property.getSurveyStats(e).then(t=>!t||isNaN(t.recordCount)?1:t.recordCount+1)}function DU(e){lt.recordId=e,(0,Ya.default)(".record-list__records").find(".active").removeClass("active").addBack().find(`[data-id="${e}"]`).addClass("active")}var ad=null,od=async(e={isRetry:!1,isUserTriggered:!1})=>{let{isRetry:t,isUserTriggered:n}=e,r=[],i=null,a=null;if(Vl||!sd&&!n&&!t)return!1;n&&id();let s=await ya.getOnlineStatus();if(s&&ad==="offline"&&(id(),ad=null),!s)return $v(od),ad="offline",Hl.btnBusyState(!1),n&&cn.alert(`${Be("record-list.msg2")}`,Be("alert.recordsavesuccess.finalmsg"),"info",10),!1;Vl=!0,Hl.btnBusyState(!0);let o=await jv(lt.enketoId,{finalOnly:!0});if(!o||o.length===0){Vl=!1;return}console.debug(`Uploading queue of ${o.length} records.`);let l=await Promise.all(o.map(({instanceId:h})=>gn.record.get(h)));for await(let h of l)try{h.files=h.files.map(p=>(typeof p.item.name>"u"&&(p.item.name=p.name),p.item)),af.update(h.instanceId,"ongoing"),await ya.uploadQueuedRecord(h),r.push(h.name),af.update(h.instanceId,"success"),await gn.record.remove(h.instanceId),await gn.property.addSubmittedInstanceId(h)}catch(p){p.status===401&&(a=p),i=p.message||cn.getErrorResponseMsg(p.status),af.update(h.instanceId,"error",i)}Vl=!1,Hl.btnBusyState(!1);let c=a==null&&r.length===l.length;return c?(id(),cn.feedback(Be("alert.queuesubmissionsuccess.msg",{count:r.length,recordNames:r.join(", ")}),7)):a==null?(Vl=!1,ad="failure",$v(od),n&&cn.alert(`${Be("record-list.msg2")}`,Be("alert.recordsavesuccess.finalmsg"),"info",10)):cn.confirmLogin(Be("confirm.login.queuedMsg")),ud(),c};function RU(e){return zl.prop("disabled",!0),PT.recordsToZip(lt.enketoId,e).then(t=>(zl.prop("disabled",!1),t)).catch(t=>{throw zl.prop("disabled",!1),t})}af={_getLi(e){return(0,Ya.default)(`.record-list__records__record[data-id="${e}"]`)},_reset(e){let t=(0,Ya.default)(".record-list__records").find("li:not([data-draft])");t.first().attr("data-id")===e&&t.removeClass("ongoing success error").filter(function(){return!(0,Ya.default)(this).hasClass("record-list__records__record")}).remove()},_updateClass(e,t){e.removeClass("ongoing success error").addClass(t)},update(e,t,n){let r,i=this._getLi(e);this._reset(e),n&&(r=(0,Ya.default)(`<li data-id="${e}" class="record-list__records__msg ${t}">${n}</li>`).insertAfter(i),window.setTimeout(()=>{r.hide(600)},3e3)),this._updateClass(i,t),t==="success"&&i.hide(1500)}};function jv(e,{finalOnly:t=!1}={}){let n=sf();return gn.record.getAll(e,t).then(i=>i.filter(a=>a.instanceId!==n))}function ud(){let e;return zl.prop("disabled",!0),Hl.prop("disabled",!0),rf=(0,Ya.default)(".record-list__records"),sd=!1,jv(lt.enketoId).then(t=>{DT.text(t.length),t.length===0?rf.empty().append(`<li class="record-list__records--none" data-i18n="record-list.norecords">${Be("record-list.norecords")}</li>`):(rf.find(".record-list__records--none").remove(),zl.prop("disabled",!1)),rf.find(".record-list__records__record").each(function(){let n=(0,Ya.default)(this);t.some(r=>n.attr("data-id")===r.instanceId)||n.next(".msg").addBack().remove()}),t.forEach(n=>{n.draft||(sd=!0,Hl.prop("disabled",!1)),e=af._getLi(n.instanceId),e.length===0&&(e=(0,Ya.default)('<li class="record-list__records__record" />').attr("data-id",n.instanceId).appendTo(rf)),e.text(n.name).attr("data-draft",!!n.draft)})})}function OU(){return gn.flushTable("records").then(()=>gn.flushTable("files")).then(()=>{console.log("Done! The record store is empty now.")})}var Di={init:TU,get:RT,save:kU,remove:AU,getAutoSavedKey:sf,getAutoSavedRecord:OT,getDisplayableRecordList:jv,updateAutoSavedRecord:IU,removeAutoSavedRecord:NU,flush:OU,getCounterValue:PU,setActive:DU,uploadQueue:od,exportToZip:RU};var Wt,cd,Kv,uf={printRelevantOnly:lt.printRelevantOnly};function BU(e,t,n=[]){let r={...t.survey.media,...t.instanceAttachments};return Ko(e,r,{isOffline:lt.offline}),cd=t,MU().then(UU).then(i=>{!t.instanceStr&&i&&i.xml&&(Di.setActive(Di.getAutoSavedKey()),t.instanceStr=i.xml),t.submitted=Boolean(t.isEditing),t.instanceAttachments&&Pi.setInstanceAttachments(t.instanceAttachments);let a=e.querySelector("#form-languages"),s=a?a.dataset.defaultLang:void 0,o=c1();if(lt.languageOverrideParameter?uf.language=lt.languageOverrideParameter.value:!s&&a&&a.querySelector(`option[value="${o}"]`)&&(uf.language=o),Wt=new In(e,t,uf),Sm(Wt,r),n=n.concat(Wt.init()),l1()!==Wt.currentLanguage&&/^[a-z]{2,3}/.test(Wt.currentLanguage)&&lh(document.querySelector("body"),Wt.currentLanguage).then(l=>document.querySelector("html").setAttribute("dir",l)),(0,Ri.default)(".main-loader").remove(),lt.goTo&&location.hash&&(n=n.concat(Wt.goTo(decodeURIComponent(location.hash.substring(1)).split("#")[0]))),Wt.encryptionKey){let l=document.querySelector(".form-footer#save-draft");l&&l.remove(),ss.isSupported()||n.unshift(Be("error.encryptionnotsupported"))}if(Kv=document.querySelector(".form-progress"),zU(t.survey),FT(),n.length>0)throw n;return Wt})}function MU(){return lt.offline?Di.init():Promise.resolve()}function UU(){let e;return lt.offline?Di.getAutoSavedRecord().then(t=>{if(t)return e=t,cn.confirm({heading:Be("confirm.autosaveload.heading"),msg:Be("confirm.autosaveload.msg")},{posButton:Be("confirm.autosaveload.posButton"),negButton:Be("confirm.autosaveload.negButton"),allowAlternativeClose:!1})}).then(t=>{if(t)return e;e&&Di.removeAutoSavedRecord()}):Promise.resolve()}function UT(e,t={}){return Ll(e.enketoId).then(n=>jo(e,n)).then(n=>{let r=Wt.resetView();Wt=new In(r,{modelStr:cd.modelStr,external:n.externalData},uf),Sm(Wt,n.media);let i=Wt.init();Wt.view.html.dispatchEvent(Br.FormReset()),t.isOffline&&zc.updateMedia(n),Di&&Di.setActive(null),i.length>0&&cn.alertLoadErrors(i)})}function qT(e,t,n){let r,i,a;!n&&Wt.editStatus?(r={msg:Be("confirm.discardcurrent.msg"),heading:Be("confirm.discardcurrent.heading")},i={posButton:Be("confirm.discardcurrent.posButton")},cn.confirm(r,i).then(s=>{s&&qT(e,t,!0)})):Di.get(t).then(s=>{if(!s||!s.xml)return cn.alert(Be("alert.recordnotfound.msg"));let o=Wt.resetView();if(Wt=new In(o,{modelStr:cd.modelStr,instanceStr:s.xml,external:cd.external,submitted:!1},uf),a=Wt.init(),Wt.view.html.dispatchEvent(Br.FormReset()),zc.updateMedia(e),Wt.recordName=s.name,Di.setActive(s.instanceId),a.length>0)throw a;cn.feedback(Be("alert.recordloadsuccess.msg",{recordName:s.name}),2),(0,Ri.default)(".side-slider__toggle.close").click()}).catch(s=>{console.error("load errors: ",s),Array.isArray(s)||(s=[s.message]),cn.alertLoadErrors(s,Be("alert.loaderror.editadvice"))})}function qU(e){let t=lt.type==="single"||lt.type==="edit"||lt.type==="view",n,r,i,a="",s={irrelevant:!1};return Wt.view.html.dispatchEvent(Br.BeforeSave()),n=t?Be("alert.submission.redirectmsg"):"",r=`<a href="${lt.loginUrl}" target="_blank">${Be("here")}</a>`,cn.alert(`${n}<div class="loader-animation-small" style="margin: 40px auto 0 auto;"/>`,Be("alert.submission.msg"),"bare"),Pi.getCurrentFiles().then(o=>{let l={enketoId:lt.enketoId,xml:Wt.getDataStr(s),files:o,instanceId:Wt.instanceID,deprecatedId:Wt.deprecatedID};if(Wt.encryptionKey){let c={encryptionKey:Wt.encryptionKey,id:Wt.id,version:Wt.version};return ss.encryptRecord(c,l)}return l}).then(o=>ya.uploadRecord(e,o)).then(o=>{o=o||{},i="success",o.failedFiles&&o.failedFiles.length>0&&(a=`${Be("alert.submissionerror.fnfmsg",{failedFiles:o.failedFiles.join(", "),supportEmail:lt.supportEmail})}<br/>`,i="warning")}).then(()=>{if(document.dispatchEvent(Br.SubmissionSuccess()),t){if(!lt.multipleAllowed){let o=new Date,l=31536e3,c=new Date;history.replaceState({},"",`${lt.defaultReturnUrl}?taken=${o.getTime()}`),(0,Ri.default)("form.or").empty(),(0,Ri.default)("button#submit-form").remove(),c.setTime(c.getTime()+l*1e3),document.cookie=`${lt.enketoId}=${o.getTime()};path=${lt.basePath}/single;max-age=${l};expires=${c.toGMTString()};`}a+=Be("alert.submissionsuccess.redirectmsg"),cn.alert(a,Be("alert.submissionsuccess.heading"),i),setTimeout(()=>{location.href=decodeURIComponent(lt.returnUrl||lt.defaultReturnUrl)},1200)}else a=a.length>0?a:Be("alert.submissionsuccess.msg"),cn.alert(a,Be("alert.submissionsuccess.heading"),i),UT(e)}).catch(o=>{let l;o=o||{},console.error("submission failed",o),o.status===401?l=Be("alert.submissionerror.authrequiredmsg",{here:r,interpolation:{escapeValue:!1}}):l=o.message||cn.getErrorResponseMsg(o.status),cn.alert(l,Be("alert.submissionerror.heading"))})}function FU(){return Di.getCounterValue(lt.enketoId).then(e=>Wt.instanceName||Wt.recordName||`${Wt.surveyName} - ${e}`)}function BT(e,t,n){let r={msg:"",heading:t?Be("formfooter.savedraft.label"):Be("alert.submissionerror.heading"),errorMsg:n},i={posButton:t?Be("confirm.save.posButton"):Be("formfooter.submit.btn"),negButton:Be("confirm.default.negButton")},a=`<label><span>${Be("confirm.save.name")}</span><span class="or-hint active">${t?Be("confirm.save.hint"):""}</span><input name="record-name" type="text" value="${e}"required /></label>`;return cn.prompt(r,i,a).then(s=>{if(s)return s["record-name"];throw new Error("Cancelled by user")})}function lf(e,t,n,r){let i={irrelevant:t};return Wt.view.html.dispatchEvent(Br.BeforeSave()),n?t&&!r?BT(n,t).then(a=>lf(e,t,a,!0)).catch(()=>{}):of.then(()=>Pi.getCurrentFiles()).then(a=>{let s={draft:t,xml:Wt.getDataStr(i),name:n,instanceId:Wt.instanceID,deprecateId:Wt.deprecatedID,enketoId:lt.enketoId,files:a};if(Wt.encryptionKey&&!t){let o={encryptionKey:Wt.encryptionKey,id:Wt.id,version:Wt.version};return ss.encryptRecord(o,s)}return s}).then(a=>{a.files=a.files.map(o=>typeof o=="string"?{name:o}:{name:o.name,item:o});let s=Wt.recordName?"update":"set";return Di.save(s,a)}).then(()=>(Di.removeAutoSavedRecord(),UT(e,{isOffline:!0}),t?(cn.alert(Be("alert.recordsavesuccess.draftmsg"),Be("alert.savedraftinfo.heading"),"info",5),!0):Di.uploadQueue({isUserTriggered:!t}))).catch(a=>{console.error("save error",a);let s=a.message;if(!s&&a.target&&a.target.error&&a.target.error.name&&a.target.error.name.toLowerCase()==="constrainterror")return BT(n,t,Be("confirm.save.existingerror")).then(o=>lf(e,t,o,!0));s||(s=Be("confirm.save.unkownerror")),cn.alert(s,"Save Error")}):FU().then(a=>lf(e,t,a,!1))}var of=Promise.resolve();function VU(){return Wt.recordName||Wt.encryptionKey||(of=of.then(()=>Pi.getCurrentFiles()).then(e=>{let t={xml:Wt.getDataStr(),files:e.map(n=>typeof n=="string"?{name:n}:{name:n.name,item:n})};return Di.updateAutoSavedRecord(t)}).then(()=>{console.log("autosave successful")}).catch(e=>{console.error("autosave error",e)})),of}function zU(e){let t=(0,Ri.default)(document);(0,Ri.default)("button#submit-form").click(function(){let i=(0,Ri.default)(this);return i.btnBusyState(!0),setTimeout(()=>{Wt.validate().then(a=>{if(a)return lt.offline?lf(e,!1):qU(e);cn.alert(Be("alert.validationerror.msg"))}).catch(a=>{cn.alert(a.message)}).then(()=>{i.btnBusyState(!1)})},100),!1});let n=document.querySelector("button#save-draft");n&&n.addEventListener("click",i=>{if(!i.target.matches(".save-draft-info")){let a=(0,Ri.default)(n);a.btnBusyState(!0),setTimeout(()=>{lf(e,!0).then(()=>{a.btnBusyState(!1)}).catch(s=>{throw a.btnBusyState(!1),s})},100)}}),(0,Ri.default)("button#validate-form:not(.disabled)").click(function(){if(typeof Wt<"u"){let i=(0,Ri.default)(this);i.btnBusyState(!0),setTimeout(()=>{Wt.validate().then(a=>{i.btnBusyState(!1),a?cn.alert(Be("alert.validationsuccess.msg"),Be("alert.validationsuccess.heading"),"success"):cn.alert(Be("alert.validationerror.msg"))}).catch(a=>{cn.alert(a.message)}).then(()=>{i.btnBusyState(!1)})},100)}return!1}),(0,Ri.default)("button#close-form:not(.disabled)").click(()=>{let i=Be("alert.submissionsuccess.redirectmsg");return document.dispatchEvent(Br.Close()),cn.alert(i,Be("alert.closing.heading"),"warning"),setTimeout(()=>{location.href=decodeURIComponent(lt.returnUrl||lt.defaultReturnUrl)},300),!1}),(0,Ri.default)(".record-list__button-bar__button.upload").on("click",()=>{Di.uploadQueue({isUserTriggered:!0})}),(0,Ri.default)(".record-list__button-bar__button.export").on("click",()=>{let i='<a class="vex-dialog-link" id="download-export" href="#">download</a>';Di.exportToZip(Wt.surveyName).then(a=>{cn.alert(Be("alert.export.success.msg")+i,Be("alert.export.success.heading"),"normal"),MT(document.querySelector("#download-export"),a)}).catch(a=>{let s=Be("alert.export.error.msg",{errors:a.message,interpolation:{escapeValue:!1}});a.exportFile&&(s+=`<p>${Be("alert.export.error.filecreatedmsg")}</p>${i}`),cn.alert(s,Be("alert.export.error.heading")),a.exportFile&&MT(document.querySelector("#download-export"),a.exportFile)})}),t.on("click",'.record-list__records__record[data-draft="true"]',function(){qT(e,(0,Ri.default)(this).attr("data-id"),!1)}),t.on("click",".record-list__records__record",function(){(0,Ri.default)(this).next(".record-list__records__msg").toggle(100)}),document.addEventListener(Br.ProgressUpdate().type,i=>{i.target.classList.contains("or")&&Kv&&i.detail&&(Kv.style.width=`${i.detail}%`)}),VT()&&lt.parentWindowOrigin&&(document.addEventListener(Br.SubmissionSuccess().type,ld),document.addEventListener(Br.Edited().type,ld),document.addEventListener(Br.Close().type,ld));let r=document.querySelector("#form-languages");r&&r.addEventListener(Br.Change().type,i=>{i.preventDefault(),console.log("ready to set UI lang",Wt.currentLanguage),lh(document.querySelector("body"),Wt.currentLanguage).then(a=>document.querySelector("html").setAttribute("dir",a))}),document.addEventListener(Br.AddRepeat().type,i=>{lh(i.target,Wt.currentLanguage)}),lt.offline&&document.addEventListener(Br.XFormsValueChanged().type,async()=>{await VU()})}function MT(e,t){let n=URL.createObjectURL(t);e.textContent=t.name,Pl.updateDownloadLink(e,n,t.name),e.click()}function FT(){let e=document.cookie.split("; ").some(t=>t.indexOf("__enketo_logout=")!==-1);(0,Ri.default)(".form-footer .logout").toggleClass("hide",!e)}function VT(){try{return window.self!==window.top}catch{return!0}}function ld(e){if(e&&e.type)try{window.parent.postMessage(JSON.stringify({enketoEvent:e.type}),lt.parentWindowOrigin)}catch(t){console.error(t)}}var AK={init:BU,setLogoutLinkVisibility:FT,inIframe:VT,postEventAsMessageToParentWindow:ld};export{en as a,u1 as b,Be as c,lh as d,xF as e,Br as f,cn as g,gn as h,ya as i,hE as j,dE as k,zc as l,AK as m};
/*!
 * Timepicker
 *
 * Forked from https://github.com/jdewit/bootstrap-timepicker:
 *
 * Copyright 2013 Joris de Wit and timepicker contributors
 *
 * Contributors https://github.com/jdewit/bootstrap-timepicker/graphs/contributors
 * Contributors https://github.com/enketo/timepicker-basic/graphs/contributors
 *
 * For the full copyright and license information, please view the LICENSE
 * file that was distributed with this source code.
 */
/*! Bundled license information:

jquery/dist/jquery.js:
  (*!
   * jQuery JavaScript Library v3.7.1
   * https://jquery.com/
   *
   * Copyright OpenJS Foundation and other contributors
   * Released under the MIT license
   * https://jquery.org/license
   *
   * Date: 2023-08-28T13:37Z
   *)

vex-js/dist/js/vex.js:
  (*! @source http://purl.eligrey.com/github/classList.js/blob/master/classList.js *)

jquery/dist/jquery.js:
  (*!
   * jQuery JavaScript Library v3.6.3
   * https://jquery.com/
   *
   * Includes Sizzle.js
   * https://sizzlejs.com/
   *
   * Copyright OpenJS Foundation and other contributors
   * Released under the MIT license
   * https://jquery.org/license
   *
   * Date: 2022-12-20T21:28Z
   *)

jquery-touchswipe/jquery.touchSwipe.min.js:
  (*!
   * @fileOverview TouchSwipe - jQuery Plugin
   * @version 1.6.18
   *
   * @author Matt Bryson http://www.github.com/mattbryson
   * @see https://github.com/mattbryson/TouchSwipe-Jquery-Plugin
   * @see http://labs.rampinteractive.co.uk/touchSwipe/
   * @see http://plugins.jquery.com/project/touchSwipe
   * @license
   * Copyright (c) 2010-2015 Matt Bryson
   * Dual licensed under the MIT or GPL Version 2 licenses.
   *
   *)

leaflet/dist/leaflet-src.js:
  (* @preserve
   * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
   * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
   *)

bootstrap-datepicker/dist/js/bootstrap-datepicker.js:
  (*!
   * Datepicker for Bootstrap v1.10.0 (https://github.com/uxsolutions/bootstrap-datepicker)
   *
   * Licensed under the Apache License v2.0 (https://www.apache.org/licenses/LICENSE-2.0)
   *)

jszip/dist/jszip.min.js:
  (*!
  
  JSZip v3.10.1 - A JavaScript class for generating and reading zip files
  <http://stuartk.com/jszip>
  
  (c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
  Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.
  
  JSZip uses the library pako released under the MIT license :
  https://github.com/nodeca/pako/blob/main/LICENSE
  *)

signature_pad/dist/signature_pad.mjs:
  (*!
   * Signature Pad v2.3.2
   * https://github.com/szimek/signature_pad
   *
   * Copyright 2017 Szymon Nowak
   * Released under the MIT license
   *
   * The main idea and some parts of the code (e.g. drawing variable width Bzier curve) are taken from:
   * http://corner.squareup.com/2012/07/smoother-signatures.html
   *
   * Implementation of interpolation using cubic Bzier curves is taken from:
   * http://benknowscode.wordpress.com/2012/09/14/path-interpolation-using-cubic-bezier-and-control-point-estimation-in-javascript
   *
   * Algorithm for approximated length of a Bzier curve is taken from:
   * http://www.lemoda.net/maths/bezier-length/index.html
   *
   *)
*/
//# sourceMappingURL=chunk-TAVM5FHE.js.map
